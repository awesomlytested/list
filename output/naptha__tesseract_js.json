{"repo":"naptha/tesseract.js","url":"https://github.com/naptha/tesseract.js","branch":"master","configs":[{"package":"tesseract.js","lang":"js","dir":"tests","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"should detect OSD","suites":["detect()"],"updatePoint":{"line":10,"column":23},"line":10,"code":"  it('should detect OSD', () => {\n    [{\n      name: 'cosmic.png',\n      ans: {\n        script: 'Latin'\n      }\n    }].forEach(async ({\n      name,\n      ans: {\n        script\n      }\n    }) => {\n      await worker.loadLanguage('osd');\n      await worker.initialize('osd');\n      const {\n        data: {\n          script: s\n        }\n      } = await worker.detect(`${IMAGE_PATH}/${name}`);\n      expect(s).to.be(script);\n    });\n  }).timeout(TIMEOUT);","file":"detect.test.js","skipped":false,"dir":"tests"},{"name":"should write and read text from FS (using FS only)","suites":["FS"],"updatePoint":{"line":11,"column":56},"line":11,"code":"  it('should write and read text from FS (using FS only)', () => {\n    [SIMPLE_TEXT].forEach(async text => {\n      const path = 'tmp.txt';\n      await worker.FS('writeFile', [path, SIMPLE_TEXT]);\n      setTimeout(async () => {\n        const {\n          data\n        } = await worker.FS('readFile', [path]);\n        await worker.FS('unlink', [path]);\n        expect(data.toString()).to.be(text);\n      }, FS_WAIT);\n    });\n  }).timeout(TIMEOUT);","file":"FS.test.js","skipped":false,"dir":"tests"},{"name":"should write and read text from FS (using writeFile, readFile)","suites":["FS"],"updatePoint":{"line":24,"column":68},"line":24,"code":"  it('should write and read text from FS (using writeFile, readFile)', () => {\n    [SIMPLE_TEXT].forEach(async text => {\n      const path = 'tmp2.txt';\n      await worker.writeText(path, SIMPLE_TEXT);\n      setTimeout(async () => {\n        const {\n          data\n        } = await worker.readText(path);\n        await worker.removeFile(path);\n        expect(data.toString()).to.be(text);\n      }, FS_WAIT);\n    });\n  }).timeout(TIMEOUT);","file":"FS.test.js","skipped":false,"dir":"tests"},{"name":"support  format","suites":["recognize()","should read bmp, jpg, png and pbm format images"],"updatePoint":{"line":13,"column":58},"line":13,"code":"    FORMATS.forEach(format => it(`support ${format} format`, async () => {\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/simple.${format}`);\n      expect(text).to.be(SIMPLE_TEXT);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"recongize  in base64","suites":["recognize()","should recognize base64 image"],"updatePoint":{"line":36,"column":43},"line":36,"code":"    }) => it(`recongize ${format} in base64`, async () => {\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(image);\n      expect(text).to.be(ans);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"recongize ","suites":["recognize()","should recognize different langs"],"updatePoint":{"line":55,"column":31},"line":55,"code":"    }) => it(`recongize ${lang}`, async () => {\n      await worker.initialize(lang);\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/${name}`);\n      expect(text).to.be(ans);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"recongize  image","suites":["recognize()","should support different complexity"],"updatePoint":{"line":82,"column":37},"line":82,"code":"    }) => it(`recongize ${desc} image`, async () => {\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/${name}`);\n      expect(text).to.be(ans);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"recongize half ","suites":["recognize()","should recognize part of the image"],"updatePoint":{"line":107,"column":36},"line":107,"code":"    }) => it(`recongize half ${name}`, async () => {\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/${name}`, {\n        rectangle: {\n          top,\n          left,\n          width,\n          height\n        }\n      });\n      expect(text).to.be(ans);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support preserve_interword_spaces","suites":["recognize()","should work with selected parameters"],"updatePoint":{"line":125,"column":41},"line":125,"code":"    it('support preserve_interword_spaces', async () => {\n      await worker.initialize('eng');\n      await worker.setParameters({\n        preserve_interword_spaces: '1'\n      });\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/bill.png`);\n      expect(text).to.be(BILL_SPACED_TEXT);\n    }).timeout(TIMEOUT);","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support tessedit_char_whitelist","suites":["recognize()","should work with selected parameters"],"updatePoint":{"line":137,"column":39},"line":137,"code":"    it('support tessedit_char_whitelist', async () => {\n      await worker.initialize('eng');\n      await worker.setParameters({\n        tessedit_char_whitelist: 'Tess'\n      });\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(`${IMAGE_PATH}/simple.png`);\n      expect(text).to.be(SIMPLE_WHITELIST_TEXT);\n    }).timeout(TIMEOUT);","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support PSM. mode","suites":["recognize()","should support all page seg modes"],"updatePoint":{"line":157,"column":38},"line":157,"code":"    }) => it(`support PSM.${name} mode`, async () => {\n      await worker.initialize('eng');\n      await worker.setParameters({\n        tessedit_pageseg_mode: mode\n      });\n      const {\n        data\n      } = await worker.recognize(`${IMAGE_PATH}/simple.png`);\n      expect(Object.keys(data).length).not.to.be(0);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support  format","suites":["recognize()","should support all page seg modes"],"updatePoint":{"line":169,"column":58},"line":169,"code":"    FORMATS.forEach(format => it(`support ${format} format`, async () => {\n      const buf = fs.readFileSync(path.join(__dirname, 'assets', 'images', `simple.${format}`));\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(buf);\n      expect(text).to.be(SIMPLE_TEXT);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support  format","suites":["recognize()","should support all page seg modes"],"updatePoint":{"line":181,"column":58},"line":181,"code":"    FORMATS.forEach(format => it(`support ${format} format`, async () => {\n      const imageDOM = document.createElement('img');\n      imageDOM.setAttribute('src', `${IMAGE_PATH}/simple.${format}`);\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(imageDOM);\n      expect(text).to.be(SIMPLE_TEXT);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support  format","suites":["recognize()","should support all page seg modes"],"updatePoint":{"line":194,"column":58},"line":194,"code":"    FORMATS.forEach(format => it(`support ${format} format`, async () => {\n      const videoDOM = document.createElement('video');\n      videoDOM.setAttribute('poster', `${IMAGE_PATH}/simple.${format}`);\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(videoDOM);\n      expect(text).to.be(SIMPLE_TEXT);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support  format","suites":["recognize()","should support all page seg modes"],"updatePoint":{"line":229,"column":58},"line":229,"code":"    formats.forEach(format => it(`support ${format} format`, async () => {\n      await worker.initialize('eng');\n      const {\n        data: {\n          text\n        }\n      } = await worker.recognize(canvasDOM);\n      expect(text).to.be(SIMPLE_TEXT);\n    }).timeout(TIMEOUT));","file":"recognize.test.js","skipped":false,"dir":"tests"},{"name":"support using  workers","suites":["scheduler","should speed up with more workers (running 10 jobs)"],"updatePoint":{"line":21,"column":61},"line":21,"code":"    [1, 3, 5].forEach(num => it(`support using ${num} workers`, async () => {\n      const NUM_JOBS = 10;\n      const scheduler = createScheduler();\n      workers.slice(0, num).forEach(w => {\n        scheduler.addWorker(w);\n      });\n      const rets = await Promise.all(Array(NUM_JOBS).fill(0).map((_, idx) => scheduler.addJob('recognize', `${IMAGE_PATH}/${idx % 2 === 0 ? 'simple' : 'cosmic'}.png`)));\n      expect(rets.length).to.be(NUM_JOBS);\n    }).timeout(60000));","file":"scheduler.test.js","skipped":false,"dir":"tests"}]}