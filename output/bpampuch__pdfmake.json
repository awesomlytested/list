{"repo":"bpampuch/pdfmake","url":"https://github.com/bpampuch/pdfmake","branch":"master","configs":[{"package":"pdfmake","lang":"js","dir":"tests","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"Object.isExtensible bug","suites":["core-js polyfill"],"updatePoint":{"line":6,"column":29,"index":250},"line":6,"code":"  it('Object.isExtensible bug', async function () {\n    var docDefinition = {\n      content: ['Empty document']\n    };\n    var pdf = pdfmake.createPdf(docDefinition);\n    await pdf.getStream().then(() => {\n      // noop\n    }, () => {\n      // noop\n    });\n    assert.equal(Object.isExtensible(docDefinition), true);\n  });","file":"browser/polyfills.spec.js","skipped":false,"dir":"tests"},{"name":"renders text right aligned","suites":["Integration test: alignment"],"updatePoint":{"line":8,"column":32,"index":305},"line":8,"code":"  it('renders text right aligned', function () {\n    var dd = {\n      content: [{\n        text: 'Left aligned before',\n        alignment: 'left'\n      }, {\n        text: 'Right aligned',\n        alignment: 'right'\n      }, {\n        text: 'Left aligned after',\n        alignment: 'left'\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var itemLeftBefore = pages[0].items[0].item;\n    assert.equal(itemLeftBefore.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftBefore.y, testHelper.MARGINS.top);\n    var itemRight = pages[0].items[1].item;\n    assert.equal(itemRight.x, sizes.A6[0] - testHelper.MARGINS.right - testHelper.getWidthOfString('Right aligned'));\n    assert.equal(itemRight.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    var itemLeftAfter = pages[0].items[2].item;\n    assert.equal(itemLeftAfter.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftAfter.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n  });","file":"integration/alignment.spec.js","skipped":false,"dir":"tests"},{"name":"renders text center aligned","suites":["Integration test: alignment"],"updatePoint":{"line":33,"column":33,"index":1308},"line":33,"code":"  it('renders text center aligned', function () {\n    var dd = {\n      content: [{\n        text: 'Left aligned before',\n        alignment: 'left'\n      }, {\n        text: 'Right aligned',\n        alignment: 'center'\n      }, {\n        text: 'Left aligned after',\n        alignment: 'left'\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var itemLeftBefore = pages[0].items[0].item;\n    assert.equal(itemLeftBefore.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftBefore.y, testHelper.MARGINS.top);\n    var itemCenter = pages[0].items[1].item;\n    assert.equal(itemCenter.x, sizes.A6[0] / 2 - testHelper.getWidthOfString('Right aligned') / 2);\n    assert.equal(itemCenter.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    var itemLeftAfter = pages[0].items[2].item;\n    assert.equal(itemLeftAfter.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftAfter.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n  });","file":"integration/alignment.spec.js","skipped":false,"dir":"tests"},{"name":"renders text justify aligned","suites":["Integration test: alignment"],"updatePoint":{"line":58,"column":34,"index":2297},"line":58,"code":"  it('renders text justify aligned', function () {\n    var dd = {\n      content: [{\n        text: 'Left aligned before',\n        alignment: 'left'\n      }, {\n        text: 'I\\'m not sure yet if this is the_desired_behavior. I find it a better.',\n        alignment: 'justify'\n      }, {\n        text: 'Left aligned after',\n        alignment: 'left'\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var itemLeftBefore = pages[0].items[0].item;\n    assert.equal(itemLeftBefore.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftBefore.y, testHelper.MARGINS.top);\n    var itemJustify1 = pages[0].items[1].item;\n    assert.equal(itemJustify1.x, testHelper.MARGINS.left);\n    assert.equal(itemJustify1.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    var availablePageWidth = sizes.A6[0] - testHelper.MARGINS.left - testHelper.MARGINS.right;\n    var endOfLastItem = itemJustify1.inlines[itemJustify1.inlines.length - 1].x + testHelper.getWidthOfString('is');\n    assert.equal(endOfLastItem, availablePageWidth);\n    var itemJustify2 = pages[0].items[2].item;\n    assert.equal(itemJustify2.x, testHelper.MARGINS.left);\n    assert.equal(itemJustify2.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n    assert.equal(itemJustify2.inlineWidths, testHelper.getWidthOfString('the_desired_behavior. I find it a better.'));\n    var itemLeftAfter = pages[0].items[3].item;\n    assert.equal(itemLeftAfter.x, testHelper.MARGINS.left);\n    assert.equal(itemLeftAfter.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 3);\n  });","file":"integration/alignment.spec.js","skipped":false,"dir":"tests"},{"name":"renders on every page","suites":["Integration test: background"],"updatePoint":{"line":7,"column":27,"index":242},"line":7,"code":"  it('renders on every page', function () {\n    var dd = {\n      background: function (page) {\n        return ['Background paragraph on page ' + page];\n      },\n      content: ['First page', '\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n', 'Another Page']\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 2);\n    var backgroundPage1 = pages[0].items[0].item;\n    assert.equal(backgroundPage1.inlines.map(node => node.text).join(''), 'Background paragraph on page 1');\n    assert.equal(backgroundPage1.x, 0);\n    assert.equal(backgroundPage1.y, 0);\n    var backgroundPage2 = pages[1].items[0].item;\n    assert.equal(backgroundPage2.inlines.map(node => node.text).join(''), 'Background paragraph on page 2');\n    assert.equal(backgroundPage2.x, 0);\n    assert.equal(backgroundPage2.y, 0);\n  });","file":"integration/background.spec.js","skipped":false,"dir":"tests"},{"name":"table fillColor must be above background","suites":["Integration test: background"],"updatePoint":{"line":25,"column":46,"index":1094},"line":25,"code":"  it('table fillColor must be above background', function () {\n    var dd = {\n      background: function () {\n        return ['Background paragraph'];\n      },\n      content: [{\n        table: {\n          body: [[{\n            text: '\\n',\n            fillColor: '#7d02c9'\n          }]]\n        }\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var fillColorRect = pages[0].items[1].item;\n    var backgroundPage = pages[0].items[0].item;\n    assert.equal(backgroundPage.inlines.map(node => node.text).join(''), 'Background paragraph');\n    assert.equal(fillColorRect.type, 'rect');\n    assert.equal(fillColorRect.color, '#7d02c9');\n  });","file":"integration/background.spec.js","skipped":false,"dir":"tests"},{"name":"background elements remain at the bottom of item list on every page","suites":["Integration test: background"],"updatePoint":{"line":58,"column":73,"index":2046},"line":58,"code":"  it('background elements remain at the bottom of item list on every page', function () {\n    var dd = {\n      background: function () {\n        return [{\n          canvas: [{\n            type: 'rect',\n            x: 0,\n            y: 0,\n            w: 50,\n            h: 50,\n            color: 'red'\n          }, {\n            type: 'rect',\n            x: 0,\n            y: 0,\n            w: 50,\n            h: 50,\n            color: 'green'\n          }, {\n            type: 'rect',\n            x: 0,\n            y: 0,\n            w: 50,\n            h: 50,\n            color: 'blue'\n          }]\n        }];\n      },\n      content: [{\n        table: {\n          body: [[{\n            text: 'a',\n            fillColor: '#aaa'\n          }, {\n            text: 'b',\n            fillColor: '#bbb'\n          }, {\n            text: 'c',\n            fillColor: '#ccc'\n          }]]\n        }\n      }, {\n        qr: 'qr',\n        foreground: 'red',\n        background: 'yellow'\n      }, {\n        ul: ['List 1', 'List 2', 'List 3']\n      }, {\n        image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=='\n      }, {\n        text: 'Leaf',\n        pageBreak: 'after'\n      }, {\n        table: {\n          body: [[{\n            text: 'a',\n            fillColor: '#aaa'\n          }, {\n            text: 'b',\n            fillColor: '#bbb'\n          }, {\n            text: 'c',\n            fillColor: '#ccc'\n          }]]\n        }\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 2);\n    var first = pages[0].items[0].item;\n    var second = pages[0].items[1].item;\n    var third = pages[0].items[2].item;\n    var first2 = pages[1].items[0].item;\n    var second2 = pages[1].items[1].item;\n    var third2 = pages[1].items[2].item;\n    assert.equal(first.color, 'red');\n    assert.equal(second.color, 'green');\n    assert.equal(third.color, 'blue');\n    assert.equal(first2.color, 'red');\n    assert.equal(second2.color, 'green');\n    assert.equal(third2.color, 'blue');\n  });","file":"integration/background.spec.js","skipped":false,"dir":"tests"},{"name":"renders text on page","suites":["Integration test: basics"],"updatePoint":{"line":8,"column":26,"index":296},"line":8,"code":"  it('renders text on page', function () {\n    var pages = testHelper.renderPages('A7', {\n      content: ['First paragraph', 'Second paragraph on three lines because it is longer']\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 4);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.x), [testHelper.MARGINS.left, testHelper.MARGINS.left, testHelper.MARGINS.left, testHelper.MARGINS.left]);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top + 2 * testHelper.LINE_HEIGHT, testHelper.MARGINS.top + 3 * testHelper.LINE_HEIGHT]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }), ['First ', 'paragraph']);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }), ['Second ', 'paragraph ', 'on ']);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }), ['three ', 'lines ', 'because ', 'it ', 'is ']);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 3\n    }), ['longer']);\n  });","file":"integration/basics.spec.js","skipped":false,"dir":"tests"},{"name":"renders text with margin","suites":["Integration test: basics"],"updatePoint":{"line":33,"column":30,"index":1514},"line":33,"code":"  it('renders text with margin', function () {\n    var customMargin = 10;\n    var anotherCustomMargin = 13;\n    var dd = {\n      content: [{\n        text: 'has margin',\n        margin: customMargin\n      }, {\n        text: 'has only top/bottom margin',\n        margin: [0, customMargin]\n      }, {\n        text: 'has single set margin',\n        margin: [anotherCustomMargin, anotherCustomMargin, anotherCustomMargin, anotherCustomMargin]\n      }, {\n        text: 'has only right margin',\n        alignment: 'right',\n        marginRight: 20\n      }]\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items[0].item.x, testHelper.MARGINS.left + customMargin);\n    assert.equal(pages[0].items[0].item.y, testHelper.MARGINS.top + customMargin);\n    assert.equal(pages[0].items[1].item.x, testHelper.MARGINS.left);\n    assert.equal(pages[0].items[1].item.y, testHelper.MARGINS.top + customMargin * 3 + testHelper.LINE_HEIGHT);\n    assert.equal(pages[0].items[2].item.x, testHelper.MARGINS.left + anotherCustomMargin);\n    assert.equal(pages[0].items[2].item.y.toFixed(3), testHelper.MARGINS.top + customMargin * 4 + anotherCustomMargin + testHelper.LINE_HEIGHT * 2);\n    assert.equal(pages[0].items[3].item.x, sizes.A5[0] - testHelper.MARGINS.right - 20 - testHelper.getWidthOfString('has only right margin'));\n    assert.equal(pages[0].items[3].item.y.toFixed(3), (testHelper.MARGINS.top + customMargin * 4 + anotherCustomMargin * 2 + testHelper.LINE_HEIGHT * 3).toFixed(3));\n  });","file":"integration/basics.spec.js","skipped":false,"dir":"tests"},{"name":"renders two columns","suites":["Integration test: columns"],"updatePoint":{"line":8,"column":25,"index":296},"line":8,"code":"  it('renders two columns', function () {\n    var dd = {\n      content: [{\n        alignment: 'justify',\n        columns: ['Lorem ipsum Malit profecta versatur', 'and alta adipisicing elit Malit profecta versatur']\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var columnCount = 2,\n      columnSpacing = (sizes.A5[0] + dd.defaultStyle.columnGap) / columnCount;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 4);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.x), [testHelper.MARGINS.left, testHelper.MARGINS.left, columnSpacing, columnSpacing]);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'Lorem ipsum Malit profecta ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'versatur');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }).join(''), 'and alta adipisicing elit Malit ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 3\n    }).join(''), 'profecta versatur');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders three columns","suites":["Integration test: columns"],"updatePoint":{"line":42,"column":27,"index":1724},"line":42,"code":"  it('renders three columns', function () {\n    var dd = {\n      content: [{\n        columns: ['dolor sit amet', 'Diu concederetur.', 'dolor sit amet']\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var columnCount = 3,\n      columnSpacing = (sizes.A5[0] - (testHelper.MARGINS.left + testHelper.MARGINS.right) + dd.defaultStyle.columnGap) / columnCount;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 3);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.x), [testHelper.MARGINS.left, testHelper.MARGINS.left + columnSpacing, testHelper.MARGINS.left + 2 * columnSpacing]);\n    assert.deepEqual(pages[0].items.map(node => node.item).map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top, testHelper.MARGINS.top]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'dolor sit amet');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'Diu concederetur.');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }).join(''), 'dolor sit amet');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders star column","suites":["Integration test: columns"],"updatePoint":{"line":71,"column":25,"index":2951},"line":71,"code":"  it('renders star column', function () {\n    var dd = {\n      content: [{\n        columns: [{\n          width: 90,\n          text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'\n        }, {\n          width: '*',\n          text: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit.'\n        }]\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var leftColumnSpacing = testHelper.MARGINS.left,\n      definedWidth = dd.content[0].columns[0].width,\n      rightColumnSpacing = testHelper.MARGINS.left + definedWidth + dd.defaultStyle.columnGap,\n      starWidth = sizes.A5[0] - (testHelper.MARGINS.left + testHelper.MARGINS.right) - dd.defaultStyle.columnGap - definedWidth;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 6);\n    var items = pages[0].items.map(node => node.item);\n    assert.deepEqual(items.map(item => item.x), [leftColumnSpacing, leftColumnSpacing, leftColumnSpacing, leftColumnSpacing, rightColumnSpacing, rightColumnSpacing]);\n    assert.deepEqual(items.map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top + 2 * testHelper.LINE_HEIGHT, testHelper.MARGINS.top + 3 * testHelper.LINE_HEIGHT, testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT]);\n    assert.deepEqual(items.map(item => item.maxWidth), [definedWidth, definedWidth, definedWidth, definedWidth, starWidth, starWidth]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'Lorem ipsum ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'dolor sit amet, ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }).join(''), 'consectetur ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 3\n    }).join(''), 'adipisicing elit.');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 4\n    }).join(''), 'Lorem ipsum dolor sit amet, consectetur ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 5\n    }).join(''), 'adipisicing elit.');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders auto column","suites":["Integration test: columns"],"updatePoint":{"line":122,"column":25,"index":5215},"line":122,"code":"  it('renders auto column', function () {\n    var dd = {\n      content: [{\n        columns: [{\n          width: 'auto',\n          text: 'auto column'\n        }, {\n          width: '*',\n          text: 'This is a star-sized column. It should get the remaining space divided by the number'\n        }, {\n          width: 50,\n          text: 'this one'\n        }]\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var items = pages[0].items.map(node => node.item);\n    var definedWidth = dd.content[0].columns[2].width,\n      autoColumnSpacing = testHelper.MARGINS.left,\n      fixedColumnSpacing = sizes.A5[0] - testHelper.MARGINS.right - definedWidth,\n      autoWidth = Math.max(...items.slice(0, 2).map(node => node.maxWidth)),\n      starWidth = sizes.A5[0] - (testHelper.MARGINS.left + testHelper.MARGINS.right) - 2 * dd.defaultStyle.columnGap - definedWidth - autoWidth,\n      starColumnSpacing = autoColumnSpacing + autoWidth + dd.defaultStyle.columnGap;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 5);\n    assert.deepEqual(items.map(item => item.x), [autoColumnSpacing, autoColumnSpacing, starColumnSpacing, starColumnSpacing, fixedColumnSpacing]);\n    assert.deepEqual(items.map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top]);\n    assert.deepEqual(items.map(item => item.maxWidth), [autoWidth, autoWidth, starWidth, starWidth, definedWidth]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'auto ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'column');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }).join(''), 'This is a star-sized column. It should get the ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 3\n    }).join(''), 'remaining space divided by the number');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 4\n    }).join(''), 'this one');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders only needed space for auto columns","suites":["Integration test: columns"],"updatePoint":{"line":174,"column":48,"index":7473},"line":174,"code":"  it('renders only needed space for auto columns', function () {\n    var dd = {\n      content: [{\n        columns: [{\n          width: 'auto',\n          text: 'val'\n        }, {\n          width: 'auto',\n          text: 'val'\n        }]\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var items = pages[0].items.map(node => node.item);\n    var autoWidth = Math.max(...items.slice(0, 2).map(node => node.maxWidth)),\n      leftColumnSpacing = testHelper.MARGINS.left,\n      rightColumnSpacing = leftColumnSpacing + autoWidth + dd.defaultStyle.columnGap;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 2);\n    assert.deepEqual(items.map(item => item.x), [leftColumnSpacing, rightColumnSpacing]);\n    assert.deepEqual(items.map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'val');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'val');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders empty column lists","suites":["Integration test: columns"],"updatePoint":{"line":207,"column":32,"index":8576},"line":207,"code":"  it('renders empty column lists', function () {\n    var dd = {\n      content: [{\n        columns: []\n      }, {\n        columns: [{\n          text: new Array(80).fill().map(() => 'Lorem ipsum')\n        }]\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.deepEqual(pages.length, 2);\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"render nested columns","suites":["Integration test: columns"],"updatePoint":{"line":220,"column":27,"index":8888},"line":220,"code":"  it('render nested columns', function () {\n    var dd = {\n      content: [{\n        columns: [{\n          width: 100,\n          text: 'Lorem ipsum dolor sit amet'\n        }, {\n          columns: ['Lorem ipsum', 'Lorem ipsum', 'Lorem ipsum']\n        }]\n      }],\n      defaultStyle: {\n        columnGap: 1\n      }\n    };\n    var pages = testHelper.renderPages('A5', dd);\n    var items = pages[0].items.map(node => node.item);\n    var gap = dd.defaultStyle.columnGap;\n    var loremIpsumWidth = Math.max(...items.slice(items.length - 3, items.length).map(node => node.maxWidth)),\n      definedWidth = dd.content[0].columns[0].width,\n      leftColumnSpacing = testHelper.MARGINS.left,\n      rightColumnSpacing = leftColumnSpacing + definedWidth + gap;\n    assert.equal(pages.length, 1);\n    assert.equal(pages[0].items.length, 5);\n    assert.deepEqual(items.map(item => item.x), [leftColumnSpacing, leftColumnSpacing, rightColumnSpacing, rightColumnSpacing + (gap + loremIpsumWidth), rightColumnSpacing + 2 * (gap + loremIpsumWidth)]);\n    assert.deepEqual(items.map(item => item.y), [testHelper.MARGINS.top, testHelper.MARGINS.top + testHelper.LINE_HEIGHT, testHelper.MARGINS.top, testHelper.MARGINS.top, testHelper.MARGINS.top]);\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 0\n    }).join(''), 'Lorem ipsum ');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 1\n    }).join(''), 'dolor sit amet');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 2\n    }).join(''), 'Lorem ipsum');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 3\n    }).join(''), 'Lorem ipsum');\n    assert.deepEqual(testHelper.getInlineTexts(pages, {\n      page: 0,\n      item: 4\n    }).join(''), 'Lorem ipsum');\n  });","file":"integration/columns.spec.js","skipped":false,"dir":"tests"},{"name":"renders next element below image","suites":["Integration Test: images","basics"],"updatePoint":{"line":9,"column":40,"index":522},"line":9,"code":"    it('renders next element below image', function () {\n      var imageHeight = 150;\n      var dd = {\n        content: [{\n          image: INLINE_TEST_IMAGE,\n          height: imageHeight\n        }, 'some Text']\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      assert.equal(pages.length, 1);\n      var image = pages[0].items[0].item;\n      var someElementAfterImage = pages[0].items[1].item;\n      assert.equal(image.x, testHelper.MARGINS.left);\n      assert.equal(image.y, testHelper.MARGINS.top);\n      assert.equal(someElementAfterImage.x, testHelper.MARGINS.left);\n      assert.equal(someElementAfterImage.y, testHelper.MARGINS.top + imageHeight);\n    });","file":"integration/images.spec.js","skipped":false,"dir":"tests"},{"name":"renders image below text","suites":["Integration Test: images","basics"],"updatePoint":{"line":26,"column":32,"index":1193},"line":26,"code":"    it('renders image below text', function () {\n      var imageHeight = 150;\n      var dd = {\n        content: ['some Text', {\n          image: INLINE_TEST_IMAGE,\n          height: imageHeight\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      assert.equal(pages.length, 1);\n      var someElementBeforeImage = pages[0].items[0].item;\n      var image = pages[0].items[1].item;\n      assert.equal(someElementBeforeImage.x, testHelper.MARGINS.left);\n      assert.equal(someElementBeforeImage.y, testHelper.MARGINS.top);\n      assert.equal(image.x, testHelper.MARGINS.left);\n      assert.equal(image.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    });","file":"integration/images.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list","suites":["Integration test: lists"],"updatePoint":{"line":16,"column":28,"index":592},"line":16,"code":"  it('renders a ordered list', function () {\n    var dd = {\n      content: {\n        ol: ['item 1', 'item 2', 'item 3 - Paleo American Apparel forage whatever.']\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '1. ');\n    assert.equal(item1.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item1.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('1. '));\n    assert.equal(item1.bullet.y, testHelper.MARGINS.top);\n    assert.equal(item1.content.y, testHelper.MARGINS.top);\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '2. ');\n    assert.equal(item2.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item2.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('2. '));\n    assert.equal(item2.bullet.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    assert.equal(item2.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3 - Paleo American Apparel ');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), '3. ');\n    assert.equal(item3.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item3.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('3. '));\n    assert.equal(item3.bullet.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n    assert.equal(item3.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'forage whatever.');\n    assert.equal(item4.bullet, undefined);\n    assert.equal(item4.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    assert.equal(item4.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 3);\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list and adapts margin to longest list number","suites":["Integration test: lists"],"updatePoint":{"line":63,"column":69,"index":3084},"line":63,"code":"  it('renders a ordered list and adapts margin to longest list number', function () {\n    var dd = {\n      content: {\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5', 'item 6', 'item 7', 'item 8', 'item 9', 'item 10']\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '1. ');\n    assert.equal(item1.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item1.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('10. '));\n    var item10 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 10\n    });\n    assert.equal(item10.content.inlines.map(inline => inline.text).join(''), 'item 10');\n    assert.equal(item10.bullet.inlines.map(inline => inline.text).join(''), '10. ');\n    assert.equal(item10.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item10.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('10. '));\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a unordered list","suites":["Integration test: lists"],"updatePoint":{"line":88,"column":30,"index":4229},"line":88,"code":"  it('renders a unordered list', function () {\n    var dd = {\n      content: {\n        ul: ['item 1', 'item 2', 'item 3 - Paleo American Apparel forage whatever.']\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var bulletRadius = 2;\n    var bulletMargin = testHelper.MARGINS.left + bulletRadius;\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.type, 'ellipse');\n    assert.equal(item1.bullet.x, bulletMargin);\n    assert.equal(item1.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    assert.equal(item1.content.y, testHelper.MARGINS.top);\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.type, 'ellipse');\n    assert.equal(item2.bullet.x, bulletMargin);\n    assert.equal(item2.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3 - Paleo American Apparel ');\n    assert.equal(item3.bullet.type, 'ellipse');\n    assert.equal(item3.bullet.x, bulletMargin);\n    assert.equal(item3.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    assert.equal(item3.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'forage whatever.');\n    assert.equal(item4.bullet, undefined);\n    assert.equal(item4.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    assert.equal(item4.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 3);\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a unordered list and keeps constant small margin","suites":["Integration test: lists"],"updatePoint":{"line":133,"column":62,"index":6434},"line":133,"code":"  it('renders a unordered list and keeps constant small margin', function () {\n    var dd = {\n      content: {\n        ul: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5', 'item 6', 'item 7', 'item 8', 'item 9', 'item 10']\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var bulletRadius = 2;\n    var bulletMargin = testHelper.MARGINS.left + bulletRadius;\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.x, bulletMargin);\n    assert.equal(item1.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n    var item10 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 10\n    });\n    assert.equal(item10.content.inlines.map(inline => inline.text).join(''), 'item 10');\n    assert.equal(item10.bullet.x, bulletMargin);\n    assert.equal(item10.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER));\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders nested lists","suites":["Integration test: lists"],"updatePoint":{"line":158,"column":26,"index":7526},"line":158,"code":"  it('renders nested lists', function () {\n    var dd = {\n      content: {\n        ol: ['item 1', ['item 2', {\n          ol: ['subitem 1', 'subitem 2']\n        }], 'item 3']\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '1. ');\n    assert.equal(item1.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item1.content.x, testHelper.MARGINS.left + testHelper.getWidthOfString('1. '));\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '2. ');\n    var item2BulletSpacing = testHelper.MARGINS.left + testHelper.getWidthOfString('2. ');\n    assert.equal(item2.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item2.content.x, item2BulletSpacing);\n    var subItem1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(subItem1.content.inlines.map(inline => inline.text).join(''), 'subitem 1');\n    assert.equal(subItem1.bullet.inlines.map(inline => inline.text).join(''), '1. ');\n    assert.equal(subItem1.bullet.x, item2BulletSpacing);\n    assert.equal(subItem1.content.x, item2BulletSpacing + testHelper.getWidthOfString('1. '));\n    assert.equal(subItem1.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 2);\n    var subItem2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(subItem2.content.inlines.map(inline => inline.text).join(''), 'subitem 2');\n    assert.equal(subItem2.bullet.inlines.map(inline => inline.text).join(''), '2. ');\n    assert.equal(subItem2.bullet.x, item2BulletSpacing);\n    assert.equal(subItem2.content.x, item2BulletSpacing + testHelper.getWidthOfString('2. '));\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), '3. ');\n    var item3BulletSpacing = testHelper.MARGINS.left + testHelper.getWidthOfString('3. ');\n    assert.equal(item3.bullet.x, testHelper.MARGINS.left);\n    assert.equal(item3.content.x, item3BulletSpacing);\n    assert.equal(item3.content.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT * 4);\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with start value","suites":["Integration test: lists"],"updatePoint":{"line":213,"column":45,"index":10208},"line":213,"code":"  it('renders a ordered list with start value', function () {\n    var dd = {\n      content: [{\n        start: 50,\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '50. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '54. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with start value zero","suites":["Integration test: lists"],"updatePoint":{"line":235,"column":50,"index":11023},"line":235,"code":"  it('renders a ordered list with start value zero', function () {\n    var dd = {\n      content: [{\n        start: 0,\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '0. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '4. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with counter values","suites":["Integration test: lists"],"updatePoint":{"line":257,"column":48,"index":11833},"line":257,"code":"  it('renders a ordered list with counter values', function () {\n    var dd = {\n      content: [{\n        ol: [{\n          text: 'item 1',\n          counter: 0\n        }, {\n          text: 'item 2',\n          counter: 10\n        }, 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '0. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '10. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '5. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a reversed ordered list","suites":["Integration test: lists"],"updatePoint":{"line":290,"column":37,"index":12978},"line":290,"code":"  it('renders a reversed ordered list', function () {\n    var dd = {\n      content: [{\n        reversed: true,\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '5. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '1. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with own separator","suites":["Integration test: lists"],"updatePoint":{"line":312,"column":47,"index":13793},"line":312,"code":"  it('renders a ordered list with own separator', function () {\n    var dd = {\n      content: [{\n        separator: ')',\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '1) ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '5) ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with own complex separator","suites":["Integration test: lists"],"updatePoint":{"line":334,"column":55,"index":14616},"line":334,"code":"  it('renders a ordered list with own complex separator', function () {\n    var dd = {\n      content: [{\n        separator: ['(', ')'],\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '(1) ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), '(5) ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-roman style type","suites":["Integration test: lists"],"updatePoint":{"line":356,"column":56,"index":15449},"line":356,"code":"  it('renders a ordered list with upper-roman style type', function () {\n    var dd = {\n      content: [{\n        type: 'upper-roman',\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'I. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'II. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'III. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'IV. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'V. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with lower-roman style type","suites":["Integration test: lists"],"updatePoint":{"line":396,"column":56,"index":17068},"line":396,"code":"  it('renders a ordered list with lower-roman style type', function () {\n    var dd = {\n      content: [{\n        type: 'lower-roman',\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'i. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'ii. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'iii. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'iv. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'v. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-roman style type and check maximum","suites":["Integration test: lists"],"updatePoint":{"line":436,"column":74,"index":18705},"line":436,"code":"  it('renders a ordered list with upper-roman style type and check maximum', function () {\n    var dd = {\n      content: [{\n        start: 4995,\n        type: 'upper-roman',\n        ol: ['item 4995', 'item 4996', 'item 4997', 'item 4998', 'item 4999', 'item 5000', 'item 5001']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 4995');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'MMMMCMXCV. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 4996');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'MMMMCMXCVI. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 4997');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'MMMMCMXCVII. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4998');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'MMMMCMXCVIII. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 4999');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'MMMMCMXCIX. ');\n    var item6 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 6\n    });\n    assert.equal(item6.content.inlines.map(inline => inline.text).join(''), 'item 5000');\n    assert.equal(item6.bullet.inlines.map(inline => inline.text).join(''), '5000. ');\n    var item7 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 7\n    });\n    assert.equal(item7.content.inlines.map(inline => inline.text).join(''), 'item 5001');\n    assert.equal(item7.bullet.inlines.map(inline => inline.text).join(''), '5001. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-roman style type and check minimum","suites":["Integration test: lists"],"updatePoint":{"line":489,"column":74,"index":20998},"line":489,"code":"  it('renders a ordered list with upper-roman style type and check minimum', function () {\n    var dd = {\n      content: [{\n        start: -2,\n        type: 'upper-roman',\n        ol: ['item -2', 'item -1', 'item 0', 'item 1', 'item 2']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item -2');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '-2. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item -1');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '-1. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 0');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), '0. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'I. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'II. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-alpha style type","suites":["Integration test: lists"],"updatePoint":{"line":530,"column":56,"index":22639},"line":530,"code":"  it('renders a ordered list with upper-alpha style type', function () {\n    var dd = {\n      content: [{\n        type: 'upper-alpha',\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'A. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'B. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'C. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'D. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'E. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-alpha style type (counter 25 - 29)","suites":["Integration test: lists"],"updatePoint":{"line":570,"column":74,"index":24272},"line":570,"code":"  it('renders a ordered list with upper-alpha style type (counter 25 - 29)', function () {\n    var dd = {\n      content: [{\n        type: 'upper-alpha',\n        start: 25,\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'Y. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'Z. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'AA. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'AB. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'AC. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with upper-alpha style type and check minimum","suites":["Integration test: lists"],"updatePoint":{"line":611,"column":74,"index":25927},"line":611,"code":"  it('renders a ordered list with upper-alpha style type and check minimum', function () {\n    var dd = {\n      content: [{\n        start: -2,\n        type: 'upper-alpha',\n        ol: ['item -2', 'item -1', 'item 0', 'item 1', 'item 2']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item -2');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '-2. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item -1');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '-1. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 0');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), '0. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'A. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'B. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with lower-alpha style type","suites":["Integration test: lists"],"updatePoint":{"line":652,"column":56,"index":27567},"line":652,"code":"  it('renders a ordered list with lower-alpha style type', function () {\n    var dd = {\n      content: [{\n        type: 'lower-alpha',\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'a. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'b. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'c. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'd. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'e. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with lower-alpha style type (counter 25 - 29)","suites":["Integration test: lists"],"updatePoint":{"line":692,"column":74,"index":29200},"line":692,"code":"  it('renders a ordered list with lower-alpha style type (counter 25 - 29)', function () {\n    var dd = {\n      content: [{\n        type: 'lower-alpha',\n        start: 25,\n        ol: ['item 1', 'item 2', 'item 3', 'item 4', 'item 5']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), 'y. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), 'z. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 3');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), 'aa. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 4');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'ab. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 5');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'ac. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders a ordered list with lower-alpha style type and check minimum","suites":["Integration test: lists"],"updatePoint":{"line":733,"column":74,"index":30855},"line":733,"code":"  it('renders a ordered list with lower-alpha style type and check minimum', function () {\n    var dd = {\n      content: [{\n        start: -2,\n        type: 'lower-alpha',\n        ol: ['item -2', 'item -1', 'item 0', 'item 1', 'item 2']\n      }]\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    assert.equal(pages.length, 1);\n    var item1 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 1\n    });\n    assert.equal(item1.content.inlines.map(inline => inline.text).join(''), 'item -2');\n    assert.equal(item1.bullet.inlines.map(inline => inline.text).join(''), '-2. ');\n    var item2 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 2\n    });\n    assert.equal(item2.content.inlines.map(inline => inline.text).join(''), 'item -1');\n    assert.equal(item2.bullet.inlines.map(inline => inline.text).join(''), '-1. ');\n    var item3 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 3\n    });\n    assert.equal(item3.content.inlines.map(inline => inline.text).join(''), 'item 0');\n    assert.equal(item3.bullet.inlines.map(inline => inline.text).join(''), '0. ');\n    var item4 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 4\n    });\n    assert.equal(item4.content.inlines.map(inline => inline.text).join(''), 'item 1');\n    assert.equal(item4.bullet.inlines.map(inline => inline.text).join(''), 'a. ');\n    var item5 = getBulletListLine(pages, {\n      pageNumber: 0,\n      itemNumber: 5\n    });\n    assert.equal(item5.content.inlines.map(inline => inline.text).join(''), 'item 2');\n    assert.equal(item5.bullet.inlines.map(inline => inline.text).join(''), 'b. ');\n  });","file":"integration/lists.spec.js","skipped":false,"dir":"tests"},{"name":"renders next element below svg","suites":["Integration Test: svg's","basics"],"updatePoint":{"line":13,"column":38,"index":538},"line":13,"code":"    it('renders next element below svg', function () {\n      var svgHeight = 150;\n      var dd = {\n        content: [{\n          svg: INLINE_TEST_SVG,\n          height: svgHeight\n        }, 'some Text']\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      assert.equal(pages.length, 1);\n      var svg = pages[0].items[0].item;\n      var someElementAfterSvg = pages[0].items[1].item;\n      assert.equal(svg.x, testHelper.MARGINS.left);\n      assert.equal(svg.y, testHelper.MARGINS.top);\n      assert.equal(someElementAfterSvg.x, testHelper.MARGINS.left);\n      assert.equal(someElementAfterSvg.y, testHelper.MARGINS.top + svgHeight);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"renders svg below text","suites":["Integration Test: svg's","basics"],"updatePoint":{"line":30,"column":30,"index":1185},"line":30,"code":"    it('renders svg below text', function () {\n      var svgHeight = 150;\n      var dd = {\n        content: ['some Text', {\n          svg: INLINE_TEST_SVG,\n          height: svgHeight\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      assert.equal(pages.length, 1);\n      var someElementBeforeSvg = pages[0].items[0].item;\n      var image = pages[0].items[1].item;\n      assert.equal(someElementBeforeSvg.x, testHelper.MARGINS.left);\n      assert.equal(someElementBeforeSvg.y, testHelper.MARGINS.top);\n      assert.equal(image.x, testHelper.MARGINS.left);\n      assert.equal(image.y, testHelper.MARGINS.top + testHelper.LINE_HEIGHT);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"reads height and width from svg","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":50,"column":39,"index":1947},"line":50,"code":"    it('reads height and width from svg', function () {\n      var dd = {\n        content: [{\n          svg: '<svg width=\"200\" height=\"100\" viewBox=\"0 0 600 300\"></svg>'\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      assert.equal(svgNode._width, 200);\n      assert.equal(svgNode._height, 100);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"reads height and width from svg (decimals)","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":61,"column":50,"index":2334},"line":61,"code":"    it('reads height and width from svg (decimals)', function () {\n      var dd = {\n        content: [{\n          svg: '<svg width=\"200.15\" height=\"100.35\" viewBox=\"0 0 600 300\"></svg>'\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      assert.equal(Number(svgNode._width).toFixed(2), 200.15);\n      assert.equal(Number(svgNode._height).toFixed(2), 100.35);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"reads height and width from viewBox","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":72,"column":43,"index":2764},"line":72,"code":"    it('reads height and width from viewBox', function () {\n      var dd = {\n        content: [{\n          svg: '<svg viewBox=\"0 0 600 300\"></svg>'\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      assert.equal(svgNode._width, 600);\n      assert.equal(svgNode._height, 300);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"reads height and width from viewBox (decimals)","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":83,"column":54,"index":3130},"line":83,"code":"    it('reads height and width from viewBox (decimals)', function () {\n      var dd = {\n        content: [{\n          svg: '<svg viewBox=\"0 0 600.10 300.20\"></svg>'\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      assert.equal(Number(svgNode._width).toFixed(2), 600.10);\n      assert.equal(Number(svgNode._height).toFixed(2), 300.20);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"writes width and height from definition to svg","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":94,"column":54,"index":3546},"line":94,"code":"    it('writes width and height from definition to svg', function () {\n      var dd = {\n        content: [{\n          svg: '<svg width=\"200\" height=\"100\" viewBox=\"0 0 600 300\"></svg>',\n          width: 400,\n          height: 800\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      var svgDimensions = svgMeasure.measureSVG(svgNode.svg);\n      assert.equal(svgDimensions.width, 400);\n      assert.equal(svgDimensions.height, 800);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"writes width and height from definition to svg (decimals)","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":108,"column":65,"index":4065},"line":108,"code":"    it('writes width and height from definition to svg (decimals)', function () {\n      var dd = {\n        content: [{\n          svg: '<svg width=\"200\" height=\"100\" viewBox=\"0 0 600 300\"></svg>',\n          width: 400.15,\n          height: 800.35\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var svgNode = pages[0].items[0].item;\n      var svgDimensions = svgMeasure.measureSVG(svgNode.svg);\n      assert.equal(svgDimensions.width, 400.15);\n      assert.equal(svgDimensions.height, 800.35);\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"writes svg in header","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":122,"column":28,"index":4559},"line":122,"code":"    it('writes svg in header', function () {\n      var dd = {\n        content: [],\n        header: {\n          svg: '<svg width=\"200\" height=\"100\" viewBox=\"0 0 600 300\"></svg>'\n        }\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      assert.equal(pages[0].items[0].type, 'svg');\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"writes svg in table","suites":["Integration Test: svg's","dimensions"],"updatePoint":{"line":132,"column":27,"index":4865},"line":132,"code":"    it('writes svg in table', function () {\n      var dd = {\n        content: [{\n          table: {\n            body: [[{\n              svg: '<svg width=\"200\" height=\"100\" viewBox=\"0 0 600 300\"></svg>'\n            }]]\n          }\n        }]\n      };\n      var pages = testHelper.renderPages('A6', dd);\n      var types = pages[0].items.map(item => item.type);\n      assert.ok(types.includes('svg'));\n    });","file":"integration/svgs.spec.js","skipped":false,"dir":"tests"},{"name":"renders a simple table","suites":["Integration test: tables"],"updatePoint":{"line":20,"column":28,"index":871},"line":20,"code":"  it('renders a simple table', function () {\n    var dd = {\n      content: {\n        table: {\n          body: [['Column 1', 'Column 2'], ['Value 1', 'Value 2']]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 4);\n    var firstColumnSpacing = startX + TABLE_PADDING_X * 2 + TABLE_BORDER_STRENGTH * 1 + lines[0].item.maxWidth;\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x), [startX, firstColumnSpacing, startX, firstColumnSpacing]);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y), [startY, startY, testHelper.MARGINS.top + TABLE_LINE_HEIGHT, testHelper.MARGINS.top + TABLE_LINE_HEIGHT]);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'Column 1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'Column 2');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 2\n    }), 'Value 1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 3\n    }), 'Value 2');\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a table with nested list","suites":["Integration test: tables"],"updatePoint":{"line":50,"column":38,"index":1989},"line":50,"code":"  it('renders a table with nested list', function () {\n    var dd = {\n      content: {\n        table: {\n          body: [['Column 1'], [{\n            ul: ['item 1', 'item 2']\n          }]]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 3);\n    var bulletSpacing = testHelper.getWidthOfString(testHelper.DEFAULT_BULLET_SPACER);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x), [startX, startX + bulletSpacing, startX + bulletSpacing]);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y), [startY, testHelper.MARGINS.top + TABLE_LINE_HEIGHT, testHelper.MARGINS.top + TABLE_LINE_HEIGHT + testHelper.LINE_HEIGHT]);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'Column 1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'item 1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 2\n    }), 'item 2');\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a table with nested table","suites":["Integration test: tables"],"updatePoint":{"line":79,"column":39,"index":3037},"line":79,"code":"  it('renders a table with nested table', function () {\n    var dd = {\n      content: {\n        table: {\n          body: [['Column 1', 'Column 2'], [{\n            table: {\n              body: [['C1', 'C2']]\n            }\n          }, 'Some Value']]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 5);\n    var firstColumnSpacing = startX + TABLE_PADDING_X * 2 + TABLE_BORDER_STRENGTH + lines[0].item.maxWidth;\n    var startSubTableX = startX + TABLE_PADDING_X + TABLE_BORDER_STRENGTH;\n    var firstSubColumnSpacing = startSubTableX + TABLE_PADDING_X * 2 + TABLE_BORDER_STRENGTH + lines[3].item.maxWidth;\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x), [startX, firstColumnSpacing, startSubTableX, firstSubColumnSpacing, firstColumnSpacing]);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y), [startY, startY, testHelper.MARGINS.top + TABLE_LINE_HEIGHT + TABLE_PADDING_Y + TABLE_BORDER_STRENGTH, testHelper.MARGINS.top + TABLE_LINE_HEIGHT + TABLE_PADDING_Y + TABLE_BORDER_STRENGTH, testHelper.MARGINS.top + TABLE_LINE_HEIGHT]);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'Column 1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'Column 2');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 2\n    }), 'C1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 3\n    }), 'C2');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 4\n    }), 'Some Value');\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a simple table with star width","suites":["Integration test: tables"],"updatePoint":{"line":118,"column":44,"index":4658},"line":118,"code":"  it('renders a simple table with star width', function () {\n    var definedWidth = 25;\n    var dd = {\n      content: {\n        table: {\n          widths: [definedWidth, '*'],\n          body: [['C1', 'C2']]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 2);\n    var firstColumnSpacing = startX + TABLE_PADDING_X * 2 + TABLE_BORDER_STRENGTH + definedWidth;\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x), [startX, firstColumnSpacing]);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y), [startY, startY]);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'C1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'C2');\n    var starWidth = sizes.A6[0] - (testHelper.MARGINS.left + testHelper.MARGINS.right) - definedWidth - 4 * TABLE_PADDING_X - 3 * TABLE_BORDER_STRENGTH;\n    assert.equal(lines[1].item.maxWidth, starWidth);\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a simple table with auto width","suites":["Integration test: tables"],"updatePoint":{"line":146,"column":44,"index":5720},"line":146,"code":"  it('renders a simple table with auto width', function () {\n    var definedWidth = 25;\n    var dd = {\n      content: {\n        table: {\n          widths: [definedWidth, 'auto'],\n          body: [['C1', 'Column 2']]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 2);\n    var firstColumnSpacing = startX + TABLE_PADDING_X * 2 + TABLE_BORDER_STRENGTH + definedWidth;\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x), [startX, firstColumnSpacing]);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y), [startY, startY]);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'C1');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'Column 2');\n    var autoWidth = testHelper.getWidthOfString('Column 2');\n    assert.equal(lines[1].item.maxWidth, autoWidth);\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a simple table with colspan","suites":["Integration test: tables"],"updatePoint":{"line":174,"column":41,"index":6702},"line":174,"code":"  it('renders a simple table with colspan', function () {\n    var dd = {\n      content: {\n        table: {\n          body: [[{\n            text: 'Column 1 with colspan 2',\n            colSpan: 2\n          }, {\n            text: 'is not rendered at all'\n          }, {\n            text: 'Column 2'\n          }]]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 2);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x)[0], startX);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y)[0], startY);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'Column 1 with colspan 2');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'Column 2');\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"renders a simple table with rowspan","suites":["Integration test: tables"],"updatePoint":{"line":204,"column":41,"index":7565},"line":204,"code":"  it('renders a simple table with rowspan', function () {\n    var dd = {\n      content: {\n        table: {\n          body: [[{\n            text: 'Row 1 with rowspan 2',\n            rowSpan: 2\n          }], [{\n            text: 'is not rendered at all'\n          }], [{\n            text: 'Row 2'\n          }]]\n        }\n      }\n    };\n    var pages = testHelper.renderPages('A6', dd);\n    var lines = getCells(pages, {\n      pageNumber: 0\n    });\n    assert.equal(pages.length, 1);\n    assert.equal(lines.length, 2);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.x)[0], startX);\n    assert.deepEqual(lines.map(node => node.item).map(item => item.y)[0], startY);\n    assert.deepEqual(getColumnText(lines, {\n      cell: 0\n    }), 'Row 1 with rowspan 2');\n    assert.deepEqual(getColumnText(lines, {\n      cell: 1\n    }), 'Row 2');\n  });","file":"integration/tables.spec.js","skipped":false,"dir":"tests"},{"name":"should set calcWidth to specified width for fixed columns","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":7,"column":65,"index":271},"line":7,"code":"    it('should set calcWidth to specified width for fixed columns', function () {\n      var columns = [{\n        width: 50,\n        _minWidth: 30,\n        _maxWidth: 80\n      }, {\n        width: 35,\n        _minWidth: 30,\n        _maxWidth: 80\n      }, {\n        width: 20,\n        _minWidth: 30,\n        _maxWidth: 80\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      columns.forEach(function (col) {\n        assert.equal(col._calcWidth, col.width);\n      });\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should set calcWidth to minWidth for fixed columns with elasticWidth set to true","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":26,"column":88,"index":785},"line":26,"code":"    it('should set calcWidth to minWidth for fixed columns with elasticWidth set to true', function () {\n      var columns = [{\n        width: 50,\n        _minWidth: 30,\n        _maxWidth: 80\n      }, {\n        width: 35,\n        _minWidth: 30,\n        _maxWidth: 80\n      }, {\n        width: 20,\n        _minWidth: 30,\n        _maxWidth: 80,\n        elasticWidth: true\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      assert.equal(columns[0]._calcWidth, columns[0].width);\n      assert.equal(columns[1]._calcWidth, columns[1].width);\n      assert.equal(columns[2]._calcWidth, columns[2]._minWidth);\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should set auto to maxWidth if there is enough space for all columns","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":46,"column":76,"index":1404},"line":46,"code":"    it('should set auto to maxWidth if there is enough space for all columns', function () {\n      var columns = [{\n        width: 'auto',\n        _minWidth: 30,\n        _maxWidth: 41\n      }, {\n        width: 'auto',\n        _minWidth: 30,\n        _maxWidth: 42\n      }, {\n        width: 'auto',\n        _minWidth: 30,\n        _maxWidth: 43\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      columns.forEach(function (col) {\n        assert.equal(col._calcWidth, col._maxWidth);\n      });\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should equally divide availableSpace to star columns","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":65,"column":60,"index":1906},"line":65,"code":"    it('should equally divide availableSpace to star columns', function () {\n      var columns = [{\n        width: '*',\n        _minWidth: 30,\n        _maxWidth: 41\n      }, {\n        width: 'star',\n        _minWidth: 30,\n        _maxWidth: 42\n      }, {\n        _minWidth: 30,\n        _maxWidth: 43\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      columns.forEach(function (col) {\n        assert.equal(col._calcWidth, 320 / 3);\n      });\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should set calcWidth to minWidth if there is not enough space for the table","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":83,"column":83,"index":2399},"line":83,"code":"    it('should set calcWidth to minWidth if there is not enough space for the table', function () {\n      var columns = [{\n        width: 'auto',\n        _minWidth: 300,\n        _maxWidth: 410\n      }, {\n        width: 'auto',\n        _minWidth: 301,\n        _maxWidth: 420\n      }, {\n        width: 'auto',\n        _minWidth: 303,\n        _maxWidth: 421\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      columns.forEach(function (col) {\n        assert.equal(col._calcWidth, col._minWidth);\n      });\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should set calcWidth of star columns to largest star min-width if there is not enough space for the table","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":102,"column":113,"index":2960},"line":102,"code":"    it('should set calcWidth of star columns to largest star min-width if there is not enough space for the table', function () {\n      var columns = [{\n        width: 'auto',\n        _minWidth: 300,\n        _maxWidth: 410\n      }, {\n        width: '*',\n        _minWidth: 301,\n        _maxWidth: 420\n      }, {\n        width: 'star',\n        _minWidth: 303,\n        _maxWidth: 421\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      assert.equal(columns[0]._calcWidth, columns[0]._minWidth);\n      assert.equal(columns[1]._calcWidth, 303);\n      assert.equal(columns[2]._calcWidth, 303);\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should make columns wider proportionally if table can fit within the available space","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":121,"column":92,"index":3556},"line":121,"code":"    it('should make columns wider proportionally if table can fit within the available space', function () {\n      var columns = [{\n        width: 'auto',\n        _minWidth: 30,\n        _maxWidth: 41\n      }, {\n        width: 'auto',\n        _minWidth: 31,\n        _maxWidth: 42\n      }, {\n        width: 'auto',\n        _minWidth: 33,\n        _maxWidth: 421\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      assert(columns[0]._calcWidth > 30);\n      assert(columns[1]._calcWidth > 31);\n      assert(columns[2]._calcWidth > 220);\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should first take into account auto columns and then divide remaining space equally between all star if there is enough space for the table","suites":["ColumnCalculator","buildColumnWidths"],"updatePoint":{"line":140,"column":147,"index":4171},"line":140,"code":"    it('should first take into account auto columns and then divide remaining space equally between all star if there is enough space for the table', function () {\n      var columns = [{\n        width: '*',\n        _minWidth: 30,\n        _maxWidth: 41\n      }, {\n        width: 'auto',\n        _minWidth: 31,\n        _maxWidth: 42\n      }, {\n        width: '*',\n        _minWidth: 33,\n        _maxWidth: 421\n      }];\n      ColumnCalculator.buildColumnWidths(columns, 320);\n      assert(columns[1]._calcWidth > 31);\n      assert.equal(columns[0]._calcWidth, columns[0]._calcWidth);\n      assert.equal(columns[0]._calcWidth + columns[1]._calcWidth + columns[2]._calcWidth, 320);\n    });","file":"unit/columnCalculator.spec.js","skipped":false,"dir":"tests"},{"name":"should call textInlines.buildInlines and set _inlines, _minWidth, _maxWidth and return node","suites":["DocMeasure","measureLeaf"],"updatePoint":{"line":64,"column":99,"index":1712},"line":64,"code":"    it('should call textInlines.buildInlines and set _inlines, _minWidth, _maxWidth and return node', function () {\n      var dm = new DocMeasure(sampleTestProvider);\n      var called = false;\n      var node = {\n        text: 'abc'\n      };\n      dm.textInlines = {\n        buildInlines: function () {\n          called = true;\n          return {\n            items: ['abc'],\n            minWidth: 1,\n            maxWidth: 10\n          };\n        }\n      };\n      docPreprocessor.preprocessText(node);\n      var result = dm.measureLeaf(node);\n      assert(called);\n      assert(node._inlines);\n      assert(node._minWidth);\n      assert(node._maxWidth);\n      assert.equal(node._inlines.length, 1);\n      assert.equal(node._minWidth, 1);\n      assert.equal(node._maxWidth, 10);\n      assert.equal(node, result);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should extend document-definition-object if text columns are used","suites":["DocMeasure","measureColumns"],"updatePoint":{"line":93,"column":73,"index":2553},"line":93,"code":"    it('should extend document-definition-object if text columns are used', function () {\n      var node = {\n        columns: ['asdasd', 'bbbb']\n      };\n      docPreprocessor.preprocessColumns(node);\n      var result = docMeasure.measureColumns(node);\n      assert(result.columns[0]._minWidth);\n      assert(result.columns[0]._maxWidth);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should calculate _minWidth and _maxWidth of all columns","suites":["DocMeasure","measureColumns"],"updatePoint":{"line":102,"column":63,"index":2890},"line":102,"code":"    it('should calculate _minWidth and _maxWidth of all columns', function () {\n      var node = {\n        columns: ['this is a test', 'another one']\n      };\n      docPreprocessor.preprocessColumns(node);\n      var result = docMeasure.measureColumns(node);\n      assert.equal(result.columns[0]._minWidth, 4 * 12);\n      assert.equal(result.columns[0]._maxWidth, 14 * 12);\n      assert.equal(result.columns[1]._minWidth, 7 * 12);\n      assert.equal(result.columns[1]._maxWidth, 11 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth to the sum of inner min/max widths","suites":["DocMeasure","measureColumns"],"updatePoint":{"line":113,"column":77,"index":3400},"line":113,"code":"    it('should set _minWidth and _maxWidth to the sum of inner min/max widths', function () {\n      var node = {\n        columns: [{\n          text: 'this is a test',\n          width: 'auto'\n        }, {\n          text: 'another one',\n          width: 'auto'\n        }],\n        columnGap: 0\n      };\n      docPreprocessor.preprocessColumns(node);\n      docMeasure.measureColumns(node);\n      assert.equal(node._minWidth, 4 * 12 + 7 * 12);\n      assert.equal(node._maxWidth, 14 * 12 + 11 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth properly when star columns are defined","suites":["DocMeasure","measureColumns"],"updatePoint":{"line":129,"column":81,"index":3907},"line":129,"code":"    it('should set _minWidth and _maxWidth properly when star columns are defined', function () {\n      var node = {\n        columns: ['this is a test', 'another one'],\n        columnGap: 0\n      };\n      docPreprocessor.preprocessColumns(node);\n      docMeasure.measureColumns(node);\n      assert.equal(node._minWidth, 7 * 12 + 7 * 12);\n      assert.equal(node._maxWidth, 14 * 12 + 14 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should extend document-definition-object if text paragraphs are used","suites":["DocMeasure","measureVerticalContainer"],"updatePoint":{"line":141,"column":76,"index":4362},"line":141,"code":"    it('should extend document-definition-object if text paragraphs are used', function () {\n      var node = {\n        stack: ['asdasd', 'bbbb']\n      };\n      docPreprocessor.preprocessVerticalContainer(node);\n      var result = docMeasure.measureVerticalContainer(node);\n      assert(result.stack[0]._minWidth);\n      assert(result.stack[0]._maxWidth);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should calculate _minWidth and _maxWidth of all elements","suites":["DocMeasure","measureVerticalContainer"],"updatePoint":{"line":150,"column":64,"index":4714},"line":150,"code":"    it('should calculate _minWidth and _maxWidth of all elements', function () {\n      var node = {\n        stack: ['this is a test', 'another one']\n      };\n      docPreprocessor.preprocessVerticalContainer(node);\n      var result = docMeasure.measureVerticalContainer(node);\n      assert.equal(result.stack[0]._minWidth, 4 * 12);\n      assert.equal(result.stack[0]._maxWidth, 14 * 12);\n      assert.equal(result.stack[1]._minWidth, 7 * 12);\n      assert.equal(result.stack[1]._maxWidth, 11 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth to the max of inner min/max widths","suites":["DocMeasure","measureVerticalContainer"],"updatePoint":{"line":161,"column":77,"index":5234},"line":161,"code":"    it('should set _minWidth and _maxWidth to the max of inner min/max widths', function () {\n      var node = {\n        stack: ['this is a test', 'another one']\n      };\n      docPreprocessor.preprocessVerticalContainer(node);\n      docMeasure.measureVerticalContainer(node);\n      assert.equal(node._minWidth, 7 * 12);\n      assert.equal(node._maxWidth, 14 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should extend document-definition-object if text items are used","suites":["DocMeasure","measureUnorderedList"],"updatePoint":{"line":172,"column":71,"index":5657},"line":172,"code":"    it('should extend document-definition-object if text items are used', function () {\n      var node = {\n        ul: ['asdasd', 'bbbb']\n      };\n      docPreprocessor.preprocessList(node);\n      var result = docMeasure.measureUnorderedList(node);\n      assert(result.ul[0]._minWidth);\n      assert(result.ul[0]._maxWidth);\n      assert(result._gapSize);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should extend document-definition-object if text items are used","suites":["DocMeasure","measureOrderedList"],"updatePoint":{"line":184,"column":71,"index":6074},"line":184,"code":"    it('should extend document-definition-object if text items are used', function () {\n      var node = {\n        ol: ['asdasd', 'bbbb']\n      };\n      docPreprocessor.preprocessList(node);\n      var result = docMeasure.measureOrderedList(node);\n      assert(result.ol[0]._minWidth);\n      assert(result.ol[0]._maxWidth);\n      assert(result._gapSize);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should calculate _minWidth and _maxWidth of all elements","suites":["DocMeasure","measureOrderedList"],"updatePoint":{"line":194,"column":64,"index":6429},"line":194,"code":"    it('should calculate _minWidth and _maxWidth of all elements', function () {\n      var node = {\n        ol: ['this is a test', 'another one']\n      };\n      docPreprocessor.preprocessList(node);\n      var result = docMeasure.measureOrderedList(node);\n      assert.equal(result.ol[0]._minWidth, 4 * 12);\n      assert.equal(result.ol[0]._maxWidth, 14 * 12);\n      assert.equal(result.ol[1]._minWidth, 7 * 12);\n      assert.equal(result.ol[1]._maxWidth, 11 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth to the max of inner min/max widths + gapSize","suites":["DocMeasure","measureOrderedList"],"updatePoint":{"line":205,"column":87,"index":6925},"line":205,"code":"    it('should set _minWidth and _maxWidth to the max of inner min/max widths + gapSize', function () {\n      var node = {\n        ol: ['this is a test', 'another one']\n      };\n      docPreprocessor.preprocessList(node);\n      var result = docMeasure.measureOrderedList(node);\n      assert(node, result);\n      assert(node._gapSize.width > 0);\n      assert.equal(node._minWidth, 7 * 12 + node._gapSize.width);\n      assert.equal(node._maxWidth, 14 * 12 + node._gapSize.width);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should extend document-definition-object","suites":["DocMeasure","measureTable"],"updatePoint":{"line":245,"column":48,"index":8187},"line":245,"code":"    it('should extend document-definition-object', function () {\n      docPreprocessor.preprocessTable(tableNode);\n      var result = docMeasure.measureTable(tableNode);\n      assert(result.table.body[0][0]._minWidth);\n      assert(result.table.body[0][0]._maxWidth);\n      assert(result.table.body[0][3]._minWidth);\n      assert(result.table.body[0][3]._maxWidth);\n      assert(result.table.widths[0]._maxWidth);\n      assert(result.table.widths[0]._minWidth);\n      assert(result.table.widths[0].width);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should not spoil widths if measureTable has been called before","suites":["DocMeasure","measureTable"],"updatePoint":{"line":256,"column":70,"index":8723},"line":256,"code":"    it('should not spoil widths if measureTable has been called before', function () {\n      docPreprocessor.preprocessTable(tableNode);\n      var result = docMeasure.measureTable(tableNode);\n      result = docMeasure.measureTable(result);\n      assert(result.table.widths[0]._maxWidth);\n      assert(result.table.widths[0]._minWidth);\n      assert(result.table.widths[0].width);\n      assert.equal(result.table.widths[0].width, '*');\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should calculate _minWidth and _maxWidth for all columns","suites":["DocMeasure","measureTable"],"updatePoint":{"line":265,"column":64,"index":9160},"line":265,"code":"    it('should calculate _minWidth and _maxWidth for all columns', function () {\n      docPreprocessor.preprocessTable(tableNode);\n      var result = docMeasure.measureTable(tableNode);\n      result.table.widths.forEach(function (width) {\n        assert(width._maxWidth);\n        assert(width._minWidth);\n        assert(width.width);\n      });\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth of each column to min/max width or the largest cell","suites":["DocMeasure","measureTable"],"updatePoint":{"line":274,"column":94,"index":9542},"line":274,"code":"    it('should set _minWidth and _maxWidth of each column to min/max width or the largest cell', function () {\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      assert.equal(tableNode.table.widths[0]._minWidth, 6 * 12);\n      assert.equal(tableNode.table.widths[0]._maxWidth, 26 * 12);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should support single-width-definition and extend it to an array of widths","suites":["DocMeasure","measureTable"],"updatePoint":{"line":280,"column":82,"index":9872},"line":280,"code":"    it('should support single-width-definition and extend it to an array of widths', function () {\n      var node = {\n        table: {\n          headerLines: 1,\n          widths: 'auto',\n          body: [['Header 1', 'H2', 'Header\\nwith\\nlines', {\n            text: 'last',\n            fontSize: 20\n          }], ['Column 1', 'Column 2', 'Column 3', 'Column 4'], ['A text in the first column', 'Text in the second one', 'Other things go here', 'or here']]\n        }\n      };\n      docPreprocessor.preprocessTable(node);\n      docMeasure.measureTable(node);\n      assert(node.table.widths instanceof Array);\n      assert.equal(node.table.widths.length, 4);\n      node.table.widths.forEach(function (w) {\n        assert.equal(w.width, 'auto');\n      });\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should set _minWidth and _maxWidth to the sum of column min/max widths","suites":["DocMeasure","measureTable"],"line":299,"code":"    it.skip('should set _minWidth and _maxWidth to the sum of column min/max widths', function () {","file":"unit/DocMeasure.spec.js","skipped":true,"dir":"tests"},{"name":"should support column spans","suites":["DocMeasure","measureTable"],"updatePoint":{"line":305,"column":35,"index":10904},"line":305,"code":"    it('should support column spans', function () {\n      tableNode.table.body.push([{\n        text: 'Column 1',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should mark cells directly following colSpan-cell with _span property and set min/maxWidth to 0","suites":["DocMeasure","measureTable"],"updatePoint":{"line":313,"column":103,"index":11243},"line":313,"code":"    it('should mark cells directly following colSpan-cell with _span property and set min/maxWidth to 0', function () {\n      tableNode.table.body.push([{\n        text: 'Col 1',\n        colSpan: 3\n      }, {}, {}, 'Col 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var rows = tableNode.table.body.length;\n      assert(tableNode.table.body[rows - 1][1]._span !== undefined);\n      assert(tableNode.table.body[rows - 1][2]._span !== undefined);\n      assert(tableNode.table.body[rows - 1][3]._span === undefined);\n      assert.equal(tableNode.table.body[rows - 1][1]._minWidth, 0);\n      assert.equal(tableNode.table.body[rows - 1][1]._maxWidth, 0);\n      assert.equal(tableNode.table.body[rows - 1][2]._minWidth, 0);\n      assert.equal(tableNode.table.body[rows - 1][2]._maxWidth, 0);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"spanning cells should not influence min/max column widths if their min/max widths are lower or equal","suites":["DocMeasure","measureTable"],"updatePoint":{"line":329,"column":108,"index":12098},"line":329,"code":"    it('spanning cells should not influence min/max column widths if their min/max widths are lower or equal', function () {\n      tableNode.layout = emptyTableLayout;\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var col0min = tableNode.table.widths[0]._minWidth;\n      var col0max = tableNode.table.widths[0]._maxWidth;\n      var col1min = tableNode.table.widths[1]._minWidth;\n      var col1max = tableNode.table.widths[1]._maxWidth;\n      tableNode.table.body.push([{\n        text: 'Co1',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      tableNode.table.body.push([{\n        text: '123456789012',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      assert.equal(tableNode.table.widths[0]._minWidth, col0min);\n      assert.equal(tableNode.table.widths[0]._maxWidth, col0max);\n      assert.equal(tableNode.table.widths[1]._minWidth, col1min);\n      assert.equal(tableNode.table.widths[1]._maxWidth, col1max);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"spanning cells, having min-width larger than the sum of min-widths of the columns they span over, should update column min-widths equally","suites":["DocMeasure","measureTable"],"updatePoint":{"line":352,"column":145,"index":13224},"line":352,"code":"    it('spanning cells, having min-width larger than the sum of min-widths of the columns they span over, should update column min-widths equally', function () {\n      tableNode.layout = emptyTableLayout;\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var col0min = tableNode.table.widths[0]._minWidth;\n      var col1min = tableNode.table.widths[1]._minWidth;\n      assert.equal(col0min, 6 * 12);\n      assert.equal(col1min, 6 * 12);\n\n      // make sure we know default values for\n\n      tableNode.table.body.push([{\n        text: 'thisislongera',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      assert(tableNode.table.widths[0]._minWidth > col0min);\n      assert(tableNode.table.widths[1]._minWidth > col1min);\n      assert.equal(tableNode.table.widths[0]._minWidth, col1min + 1 * 12 / 2);\n      assert.equal(tableNode.table.widths[1]._minWidth, col1min + 1 * 12 / 2);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"spanning cells, having max-width larger than the sum of max-widths of the columns they span over, should update column max-widths equally","suites":["DocMeasure","measureTable"],"updatePoint":{"line":374,"column":145,"index":14261},"line":374,"code":"    it('spanning cells, having max-width larger than the sum of max-widths of the columns they span over, should update column max-widths equally', function () {\n      tableNode.layout = emptyTableLayout;\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var col0max = tableNode.table.widths[0]._maxWidth;\n      var col1max = tableNode.table.widths[1]._maxWidth;\n      assert.equal(col0max, 26 * 12);\n      assert.equal(col1max, 22 * 12);\n      tableNode.table.body.push([{\n        text: '1234 6789 1234 6789 1234 6789 1234 6789 1234 6789',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      assert.equal(tableNode.table.widths[0]._maxWidth, col0max + 1 * 12 / 2);\n      assert.equal(tableNode.table.widths[1]._maxWidth, col1max + 1 * 12 / 2);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"calculating widths (when colSpan are used) should take into account cell padding and borders","suites":["DocMeasure","measureTable"],"updatePoint":{"line":391,"column":100,"index":15121},"line":391,"code":"    it('calculating widths (when colSpan are used) should take into account cell padding and borders', function () {\n      // 5 + 3 + 4 == 12 --- the exact width of the overflowing letter in thisislongera\n      // it means we have enough space and there's no need to change column widths\n      tableNode.layout = {\n        vLineWidth: function () {\n          return 5;\n        },\n        paddingLeft: function () {\n          return 3;\n        },\n        paddingRight: function () {\n          return 4;\n        }\n      };\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var col0min = tableNode.table.widths[0]._minWidth;\n      var col1min = tableNode.table.widths[1]._minWidth;\n      assert.equal(col0min, 6 * 12);\n      assert.equal(col1min, 6 * 12);\n      tableNode.table.body.push([{\n        text: 'thisislongera',\n        colSpan: 2\n      }, {}, 'Column 3', 'Column 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      assert.equal(tableNode.table.widths[0]._minWidth, col0min);\n      assert.equal(tableNode.table.widths[1]._minWidth, col1min);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should mark cells directly below rowSpan-cell with _span property and set min/maxWidth to 0","suites":["DocMeasure","measureTable"],"updatePoint":{"line":420,"column":99,"index":16277},"line":420,"code":"    it('should mark cells directly below rowSpan-cell with _span property and set min/maxWidth to 0', function () {\n      tableNode.table.body.push([{\n        text: 'Col 1',\n        rowSpan: 3\n      }, 'Col2', 'Col 3', 'Col 4']);\n      tableNode.table.body.push([{}, 'Col2', 'Col 3', 'Col 4']);\n      tableNode.table.body.push([{}, 'Col2', 'Col 3', 'Col 4']);\n      tableNode.table.body.push(['Another', 'Col2', 'Col 3', 'Col 4']);\n      docPreprocessor.preprocessTable(tableNode);\n      docMeasure.measureTable(tableNode);\n      var rows = tableNode.table.body.length;\n      assert(tableNode.table.body[rows - 3][0]._span !== undefined);\n      assert(tableNode.table.body[rows - 2][0]._span !== undefined);\n      assert(tableNode.table.body[rows - 1][0]._span === undefined);\n      assert.equal(tableNode.table.body[rows - 3][0]._minWidth, 0);\n      assert.equal(tableNode.table.body[rows - 3][0]._maxWidth, 0);\n      assert.equal(tableNode.table.body[rows - 2][0]._minWidth, 0);\n      assert.equal(tableNode.table.body[rows - 2][0]._maxWidth, 0);\n      assert(tableNode.table.body[rows - 1][0]._minWidth !== 0);\n      assert(tableNode.table.body[rows - 1][0]._maxWidth !== 0);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should scale height proportionally if only image width is provided","suites":["DocMeasure","measureImage"],"updatePoint":{"line":443,"column":74,"index":17486},"line":443,"code":"    it('should scale height proportionally if only image width is provided');","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should stretch image if both width and height are specified","suites":["DocMeasure","measureImage"],"updatePoint":{"line":444,"column":67,"index":17557},"line":444,"code":"    it('should stretch image if both width and height are specified');","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should scales image to fit whole picture in a rectangle if fit is specified","suites":["DocMeasure","measureImage"],"updatePoint":{"line":445,"column":83,"index":17644},"line":445,"code":"    it('should scales image to fit whole picture in a rectangle if fit is specified');","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should copy alignment from styleStack into image definition object","suites":["DocMeasure","measureImage"],"updatePoint":{"line":446,"column":74,"index":17722},"line":446,"code":"    it('should copy alignment from styleStack into image definition object');","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should support dataUri images","suites":["DocMeasure","measureImage"],"updatePoint":{"line":447,"column":37,"index":17763},"line":447,"code":"    it('should support dataUri images', function () {});","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should treat margin in styling properties with higher priority","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":450,"column":70,"index":17903},"line":450,"code":"    it('should treat margin in styling properties with higher priority', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'marginStyle': {\n          margin: 10\n        }\n      }, {});\n      var node = {\n        text: 'test',\n        style: 'marginStyle',\n        margin: [5, 5, 5, 5]\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [5, 5, 5, 5]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should apply margins defined in the styles","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":465,"column":50,"index":18368},"line":465,"code":"    it('should apply margins defined in the styles', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'topLevel': {\n          margin: [123, 3, 5, 6]\n        }\n      }, {});\n      var node = {\n        text: 'test',\n        style: 'topLevel'\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [123, 3, 5, 6]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should apply sublevel styles not to parent","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":479,"column":50,"index":18811},"line":479,"code":"    it('should apply sublevel styles not to parent', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'topLevel': {\n          margin: [123, 3, 5, 6]\n        },\n        'subLevel': {\n          margin: 5\n        }\n      }, {});\n      var node = {\n        ul: ['one', 'two', {\n          text: 'three',\n          style: 'subLevel'\n        }],\n        style: 'topLevel'\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [123, 3, 5, 6]);\n      assert.equal(result.ul[0]._margin, null);\n      assert.equal(result.ul[1]._margin, null);\n      assert.deepEqual(result.ul[2]._margin, [5, 5, 5, 5]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should apply subsublevel styles not to parent","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":502,"column":53,"index":19538},"line":502,"code":"    it('should apply subsublevel styles not to parent', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'topLevel': {\n          margin: [123, 3, 5, 6]\n        },\n        'subLevel': {\n          margin: 5\n        },\n        'subsubLevel': {\n          margin: 25\n        }\n      }, {});\n      var node = {\n        ul: ['one', 'two', {\n          text: 'three',\n          style: 'subLevel'\n        }, {\n          ol: [{\n            text: 'three A',\n            style: 'subsubLevel'\n          }]\n        }],\n        style: 'topLevel'\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [123, 3, 5, 6]);\n      assert.equal(result.ul[0]._margin, null);\n      assert.equal(result.ul[1]._margin, null);\n      assert.deepEqual(result.ul[2]._margin, [5, 5, 5, 5]);\n      assert.deepEqual(result.ul[3].ol[0]._margin, [25, 25, 25, 25]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should process marginLeft property if defined","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":534,"column":53,"index":20497},"line":534,"code":"    it('should process marginLeft property if defined', function () {\n      var node = {\n        text: 'some text',\n        marginLeft: 5\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [5, 0, 0, 0]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should process marginRight property if defined","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":543,"column":54,"index":20808},"line":543,"code":"    it('should process marginRight property if defined', function () {\n      var node = {\n        text: 'some text',\n        marginRight: 5\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [0, 0, 5, 0]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should process multiple single margin properties if defined","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":552,"column":67,"index":21133},"line":552,"code":"    it('should process multiple single margin properties if defined', function () {\n      var node = {\n        text: 'some text',\n        marginRight: 5,\n        marginTop: 10,\n        marginBottom: 2\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [0, 10, 5, 2]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should treat margin property with higher priority than single margin properties","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":563,"column":87,"index":21527},"line":563,"code":"    it('should treat margin property with higher priority than single margin properties', function () {\n      var node = {\n        text: 'some text',\n        marginRight: 5,\n        marginTop: 10,\n        marginBottom: 2,\n        margin: 12\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [12, 12, 12, 12]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should combine all single margins defined in style dict ","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":575,"column":64,"index":21921},"line":575,"code":"    it('should combine all single margins defined in style dict ', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'style1': {\n          marginLeft: 5\n        },\n        'style2': {\n          marginTop: 10\n        }\n      }, {});\n      var node = {\n        text: 'some text',\n        style: ['style1', 'style2']\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [5, 10, 0, 0]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should combine the single margin defined in style dict and the object itself","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":592,"column":84,"index":22456},"line":592,"code":"    it('should combine the single margin defined in style dict and the object itself', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'style1': {\n          marginLeft: 5\n        }\n      }, {});\n      var node = {\n        text: 'some text',\n        style: ['style1'],\n        marginRight: 15\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [5, 0, 15, 0]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should override only left margin if marginLeft is defined","suites":["DocMeasure","measureDocument"],"updatePoint":{"line":607,"column":65,"index":22932},"line":607,"code":"    it('should override only left margin if marginLeft is defined', function () {\n      docMeasure = new DocMeasure(sampleTestProvider, {\n        'topLevel': {\n          margin: [123, 3, 5, 6]\n        },\n        'subLevel': {\n          marginLeft: 5\n        }\n      }, {});\n      var node = {\n        ul: ['one', 'two', {\n          text: 'three',\n          style: 'subLevel'\n        }],\n        style: 'topLevel'\n      };\n      docPreprocessor.preprocessDocument(node);\n      var result = docMeasure.measureDocument(node);\n      assert.deepEqual(result._margin, [123, 3, 5, 6]);\n      assert.deepEqual(result.ul[2]._margin, [5, 0, 0, 0]);\n    });","file":"unit/DocMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"has been registered text node to normalizer","suites":["DocPreprocessor","text"],"updatePoint":{"line":6,"column":51,"index":279},"line":6,"code":"    it('has been registered text node to normalizer', function () {\n      var ddContent = {\n        text: 'text'\n      };\n      assert.doesNotThrow(function () {\n        docPreprocessor.preprocessNode(ddContent);\n      });\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should expand shortcut to text and normalize","suites":["DocPreprocessor","text"],"updatePoint":{"line":14,"column":52,"index":511},"line":14,"code":"    it('should expand shortcut to text and normalize', function () {\n      var ddContent = ['Abc123', '12', '12.34', '0', '', new String('Abcdef'), 56, 56.78, 0, true, false, 'true', 'false', [],\n      // is stack\n      '[]', [1, 2, 3],\n      // is stack\n      {}, '{}', null, 'null', undefined, 'undefined'];\n      var result = docPreprocessor.preprocessNode(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 22);\n      assert.equal(result.stack[0].text, 'Abc123');\n      assert.equal(result.stack[1].text, '12');\n      assert.equal(result.stack[2].text, '12.34');\n      assert.equal(result.stack[3].text, '0');\n      assert.equal(result.stack[4].text, '');\n      assert.equal(result.stack[5].text, 'Abcdef');\n      assert.equal(result.stack[6].text, '56');\n      assert.equal(result.stack[7].text, '56.78');\n      assert.equal(result.stack[8].text, '0');\n      assert.equal(result.stack[9].text, 'true');\n      assert.equal(result.stack[10].text, 'false');\n      assert.equal(result.stack[11].text, 'true');\n      assert.equal(result.stack[12].text, 'false');\n      assert.equal(Array.isArray(result.stack[13].stack), true);\n      assert.equal(result.stack[13].stack.length, 0);\n      assert.equal(result.stack[14].text, '[]');\n      assert.equal(Array.isArray(result.stack[15].stack), true);\n      assert.equal(result.stack[15].stack.length, 3);\n      assert.equal(result.stack[15].stack[0].text, '1');\n      assert.equal(result.stack[15].stack[1].text, '2');\n      assert.equal(result.stack[15].stack[2].text, '3');\n      assert.equal(result.stack[16].text, '');\n      assert.equal(result.stack[17].text, '{}');\n      assert.equal(result.stack[18].text, '');\n      assert.equal(result.stack[19].text, 'null');\n      assert.equal(result.stack[20].text, '');\n      assert.equal(result.stack[21].text, 'undefined');\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should normalize text","suites":["DocPreprocessor","text"],"updatePoint":{"line":51,"column":29,"index":2370},"line":51,"code":"    it('should normalize text', function () {\n      var ddContent = [{\n        text: 'Abc123'\n      }, {\n        text: '12'\n      }, {\n        text: '12.34'\n      }, {\n        text: '0'\n      }, {\n        text: ''\n      }, {\n        text: new String('Abcdef')\n      }, {\n        text: 56\n      }, {\n        text: 56.78\n      }, {\n        text: 0\n      }, {\n        text: true\n      }, {\n        text: false\n      }, {\n        text: 'true'\n      }, {\n        text: 'false'\n      }, {\n        text: []\n      },\n      // is text with nested texts\n      {\n        text: '[]'\n      }, {\n        text: [1, 2, 3]\n      },\n      // is text with nested texts\n      {\n        text: {}\n      }, {\n        text: '{}'\n      }, {\n        text: null\n      }, {\n        text: 'null'\n      }, {\n        text: undefined\n      }, {\n        text: 'undefined'\n      }];\n      var result = docPreprocessor.preprocessNode(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 22);\n      assert.equal(result.stack[0].text, 'Abc123');\n      assert.equal(result.stack[1].text, '12');\n      assert.equal(result.stack[2].text, '12.34');\n      assert.equal(result.stack[3].text, '0');\n      assert.equal(result.stack[4].text, '');\n      assert.equal(result.stack[5].text, 'Abcdef');\n      assert.equal(result.stack[6].text, '56');\n      assert.equal(result.stack[7].text, '56.78');\n      assert.equal(result.stack[8].text, '0');\n      assert.equal(result.stack[9].text, 'true');\n      assert.equal(result.stack[10].text, 'false');\n      assert.equal(result.stack[11].text, 'true');\n      assert.equal(result.stack[12].text, 'false');\n      assert.equal(Array.isArray(result.stack[13].text), true);\n      assert.equal(result.stack[13].text.length, 0);\n      assert.equal(result.stack[14].text, '[]');\n      assert.equal(Array.isArray(result.stack[15].text), true);\n      assert.equal(result.stack[15].text.length, 3);\n      assert.equal(result.stack[15].text[0].text, '1');\n      assert.equal(result.stack[15].text[1].text, '2');\n      assert.equal(result.stack[15].text[2].text, '3');\n      assert.equal(result.stack[16].text, '');\n      assert.equal(result.stack[17].text, '{}');\n      assert.equal(result.stack[18].text, '');\n      assert.equal(result.stack[19].text, 'null');\n      assert.equal(result.stack[20].text, '');\n      assert.equal(result.stack[21].text, 'undefined');\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should replace tab as 4 spaces","suites":["DocPreprocessor","text"],"updatePoint":{"line":132,"column":38,"index":4793},"line":132,"code":"    it('should replace tab as 4 spaces', function () {\n      var ddContent = ['a\\tb', {\n        text: 'a\\tb'\n      }, 'a\\tb\\tc', {\n        text: 'a\\tb\\tc'\n      }, {\n        text: ['A\\tB', {\n          text: 'A\\tB'\n        }]\n      }];\n      var result = docPreprocessor.preprocessNode(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 5);\n      assert.equal(result.stack[0].text, 'a    b');\n      assert.equal(result.stack[1].text, 'a    b');\n      assert.equal(result.stack[2].text, 'a    b    c');\n      assert.equal(result.stack[3].text, 'a    b    c');\n      assert.equal(result.stack[4].text[0].text, 'A    B');\n      assert.equal(result.stack[4].text[1].text, 'A    B');\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should support text in nested nodes","suites":["DocPreprocessor","text"],"updatePoint":{"line":152,"column":43,"index":5540},"line":152,"code":"    it('should support text in nested nodes', function () {\n      var ddContent = [{\n        text: {\n          text: {\n            text: 'hello world'\n          }\n        }\n      }];\n      var result = docPreprocessor.preprocessNode(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 1);\n      assert.equal(Array.isArray(result.stack[0].text), true);\n      assert.equal(result.stack[0].text.length, 1);\n      assert.equal(Array.isArray(result.stack[0].text[0].text), true);\n      assert.equal(result.stack[0].text[0].text.length, 1);\n      assert.equal(result.stack[0].text[0].text[0].text, 'hello world');\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should support simple toc on begin of document","suites":["DocPreprocessor","toc"],"updatePoint":{"line":171,"column":54,"index":6260},"line":171,"code":"    it('should support simple toc on begin of document', function () {\n      var ddContent = [{\n        toc: {}\n      }, {\n        text: 'Header 1',\n        tocItem: true\n      }, {\n        text: 'Header 2',\n        tocItem: true\n      }];\n      var result = docPreprocessor.preprocessDocument(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 3);\n      assert.equal(result.stack[0].toc.id, '_default_');\n      assert.equal(Array.isArray(result.stack[0].toc._items), true);\n      assert.equal(result.stack[0].toc._items.length, 2);\n      assert.equal(result.stack[1].id, 'toc-_default_-0');\n      assert.equal(result.stack[2].id, 'toc-_default_-1');\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should support simple toc on end of document","suites":["DocPreprocessor","toc"],"updatePoint":{"line":190,"column":52,"index":6973},"line":190,"code":"    it('should support simple toc on end of document', function () {\n      var ddContent = [{\n        text: 'Header 1',\n        tocItem: true\n      }, {\n        text: 'Header 2',\n        tocItem: true\n      }, {\n        toc: {}\n      }];\n      var result = docPreprocessor.preprocessDocument(ddContent);\n      assert.equal(Array.isArray(result.stack), true);\n      assert.equal(result.stack.length, 3);\n      assert.equal(result.stack[0].id, 'toc-_default_-0');\n      assert.equal(result.stack[1].id, 'toc-_default_-1');\n      assert.equal(result.stack[2].toc.id, '_default_');\n      assert.equal(Array.isArray(result.stack[2].toc._items), true);\n      assert.equal(result.stack[2].toc._items.length, 2);\n    });","file":"unit/DocPreprocessor.spec.js","skipped":false,"dir":"tests"},{"name":"should set initial values based on pageSize and pageMargins","suites":["DocumentContext"],"updatePoint":{"line":22,"column":65,"index":498},"line":22,"code":"  it('should set initial values based on pageSize and pageMargins', function () {\n    assert.equal(pc.x, 40);\n    assert.equal(pc.y, 60);\n    assert.equal(pc.availableWidth, 400 - 40 - 40);\n    assert.equal(pc.availableHeight, 800 - 60 - 60);\n  });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should save current settings","suites":["DocumentContext","beginColumnGroup"],"updatePoint":{"line":29,"column":36,"index":763},"line":29,"code":"    it('should save current settings', function () {\n      pc.beginColumnGroup();\n      pc.x = 80;\n      pc.page = 3;\n      assert.equal(pc.snapshots.length, 1);\n      assert.equal(pc.snapshots[0].x, 40);\n      assert.equal(pc.snapshots[0].page, 0);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should set y, page and availableHeight back to the values stored in beginColumnGroup","suites":["DocumentContext","beginColumn"],"updatePoint":{"line":39,"column":92,"index":1123},"line":39,"code":"    it('should set y, page and availableHeight back to the values stored in beginColumnGroup', function () {\n      pc.beginColumnGroup();\n      pc.y = 150;\n      pc.page = 5;\n      pc.availableHeight = 123;\n      pc.beginColumn();\n      assert.equal(pc.y, 60);\n      assert.equal(pc.page, 0);\n      assert.equal(pc.availableHeight, 800 - 60 - 60);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add offset to current x","suites":["DocumentContext","beginColumn"],"updatePoint":{"line":49,"column":38,"index":1425},"line":49,"code":"    it('should add offset to current x', function () {\n      pc.beginColumnGroup();\n      pc.beginColumn(50, 30);\n      assert.equal(pc.x, 40 + 30);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add previous column widths to x when starting a new column","suites":["DocumentContext","beginColumn"],"updatePoint":{"line":54,"column":73,"index":1617},"line":54,"code":"    it('should add previous column widths to x when starting a new column', function () {\n      pc.beginColumnGroup();\n      pc.beginColumn(30);\n      assert.equal(pc.x, 40);\n      pc.beginColumn(20);\n      assert.equal(pc.x, 40 + 30);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should set availableWidth to the specified column width","suites":["DocumentContext","beginColumn"],"updatePoint":{"line":61,"column":63,"index":1851},"line":61,"code":"    it('should set availableWidth to the specified column width', function () {\n      pc.beginColumnGroup();\n      pc.beginColumn(30);\n      assert.equal(pc.availableWidth, 30);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should save context in endingCell if provided","suites":["DocumentContext","beginColumn"],"updatePoint":{"line":66,"column":53,"index":2027},"line":66,"code":"    it('should save context in endingCell if provided', function () {\n      var endingCell = {};\n      pc.beginColumnGroup();\n      pc.beginColumn(30, 0, endingCell);\n      pc.y = 150;\n      pc.page = 3;\n      pc.availableHeight = 123;\n      pc.beginColumn(30, 0);\n      assert.equal(endingCell._columnEndingContext.y, 150);\n      assert.equal(endingCell._columnEndingContext.page, 3);\n      assert.equal(endingCell._columnEndingContext.availableHeight, 123);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to the value stored in beginColumnGroup","suites":["DocumentContext","completeColumnGroup"],"updatePoint":{"line":80,"column":60,"index":2556},"line":80,"code":"    it('should set x to the value stored in beginColumnGroup', function () {\n      pc.beginColumnGroup();\n      pc.x = 150;\n      pc.completeColumnGroup();\n      assert.equal(pc.x, 40);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should set page to the value pointing to the end of the longest column","suites":["DocumentContext","completeColumnGroup"],"updatePoint":{"line":86,"column":78,"index":2768},"line":86,"code":"    it('should set page to the value pointing to the end of the longest column', function () {\n      pc.beginColumnGroup();\n      pc.beginColumn(30);\n      pc.page = 3;\n      pc.beginColumn(30);\n      pc.page = 7;\n      pc.beginColumn(30);\n      pc.page = 4;\n      pc.completeColumnGroup();\n      assert.equal(pc.page, 7);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should skip non-ending-cells (spanning over multiple rows) during vsync","suites":["DocumentContext","completeColumnGroup"],"updatePoint":{"line":97,"column":79,"index":3100},"line":97,"code":"    it('should skip non-ending-cells (spanning over multiple rows) during vsync', function () {\n      var endingCell = {};\n      pc.beginColumnGroup();\n      pc.beginColumn(30, 0, endingCell);\n      pc.y = 150;\n      pc.page = 3;\n      pc.availableHeight = 123;\n      pc.beginColumn(30, 0);\n      pc.y = 100;\n      pc.page = 3;\n      pc.completeColumnGroup();\n      assert.equal(pc.page, 3);\n      assert.equal(pc.y, 100);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"non-ending-cells (spanning over multiple rows) should also work with nested columns","suites":["DocumentContext","completeColumnGroup"],"updatePoint":{"line":111,"column":91,"index":3543},"line":111,"code":"    it('non-ending-cells (spanning over multiple rows) should also work with nested columns', function () {\n      var endingCell = {};\n      var endingCell2 = {};\n\n      // external table\n      pc.beginColumnGroup();\n      // col1 spans over 2 rows\n      pc.beginColumn(30, 0, endingCell);\n      pc.y = 350;\n      pc.beginColumn(40);\n      pc.y = 100;\n      // column3 contains a nested table\n      pc.beginColumn(100);\n      pc.beginColumnGroup();\n      pc.beginColumn(20);\n      pc.y = 100;\n      pc.beginColumn(20);\n      pc.y = 120;\n      // col3.3 spans over 2 rows\n      pc.beginColumn(40, 0, endingCell2);\n      pc.y = 180;\n      pc.completeColumnGroup();\n\n      //// bottom of all non-spanned columns\n      assert.equal(pc.y, 120);\n\n      // second row (of nested table)\n      pc.beginColumnGroup();\n      pc.beginColumn(20);\n      pc.y = 10;\n      pc.beginColumn(20);\n      pc.y = 20;\n      // col3.3 spans over 2 rows\n      pc.beginColumn(40, 0);\n      pc.markEnding(endingCell2);\n      pc.completeColumnGroup();\n\n      //// spanned column was large enough to influence bottom\n      assert.equal(pc.y, 180);\n      pc.completeColumnGroup();\n\n      //// bottom of all non-spanned columns\n      assert.equal(pc.y, 180);\n\n      // second row\n      pc.beginColumnGroup();\n      pc.beginColumn(30);\n      pc.markEnding(endingCell);\n      pc.beginColumn(40);\n      pc.y = 50;\n      pc.beginColumn(100);\n      pc.y = 10;\n      pc.completeColumnGroup();\n      assert.equal(pc.y, 350);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should change both x and availableWidth","suites":["DocumentContext","addMargin"],"updatePoint":{"line":168,"column":47,"index":5037},"line":168,"code":"    it('should change both x and availableWidth', function () {\n      var x = pc.x;\n      var aWidth = pc.availableWidth;\n      pc.addMargin(10);\n      assert.equal(pc.x, x + 10);\n      assert.equal(pc.availableWidth, aWidth - 10);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should support left and right margins","suites":["DocumentContext","addMargin"],"updatePoint":{"line":175,"column":45,"index":5275},"line":175,"code":"    it('should support left and right margins', function () {\n      var x = pc.x;\n      var aWidth = pc.availableWidth;\n      pc.addMargin(10, 15);\n      assert.equal(pc.x, x + 10);\n      assert.equal(pc.availableWidth, aWidth - 10 - 15);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should change both y and availableHeight","suites":["DocumentContext","moveDown"],"updatePoint":{"line":184,"column":48,"index":5568},"line":184,"code":"    it('should change both y and availableHeight', function () {\n      var y = pc.y;\n      var ah = pc.availableHeight;\n      pc.moveDown(123);\n      assert.equal(pc.y, y + 123);\n      assert.equal(pc.availableHeight, ah - 123);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should return true if there is still some space left on the page","suites":["DocumentContext","moveDown"],"updatePoint":{"line":191,"column":72,"index":5829},"line":191,"code":"    it('should return true if there is still some space left on the page', function () {\n      assert(pc.moveDown(123));\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should return false if there's no space left after the operation","suites":["DocumentContext","moveDown"],"updatePoint":{"line":194,"column":73,"index":5959},"line":194,"code":"    it('should return false if there\\'s no space left after the operation', function () {\n      assert(!pc.moveDown(1200));\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add new page in portrait","suites":["DocumentContext","moveToNext page"],"updatePoint":{"line":199,"column":39,"index":6107},"line":199,"code":"    it('should add new page in portrait', function () {\n      pc.moveToNextPage();\n      assert.equal(pc.pages[0].pageSize.orientation, 'portrait');\n      assert.equal(pc.pages[1].pageSize.orientation, 'portrait');\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add a new page in the same orientation as the previous one","suites":["DocumentContext","moveToNext page"],"updatePoint":{"line":204,"column":73,"index":6364},"line":204,"code":"    it('should add a new page in the same orientation as the previous one', function () {\n      pc.moveToNextPage('landscape');\n      pc.moveToNextPage();\n      pc.moveToNextPage('portrait');\n      pc.moveToNextPage();\n      assert.equal(pc.pages[0].pageSize.orientation, 'portrait');\n      assert.equal(pc.pages[1].pageSize.orientation, 'landscape');\n      assert.equal(pc.pages[2].pageSize.orientation, 'landscape');\n      assert.equal(pc.pages[3].pageSize.orientation, 'portrait');\n      assert.equal(pc.pages[4].pageSize.orientation, 'portrait');\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should change coordinates","suites":["DocumentContext","moveToRelative"],"updatePoint":{"line":217,"column":33,"index":6932},"line":217,"code":"    it('should change coordinates', function () {\n      pc.x = 100;\n      pc.y = 200;\n      pc.moveToRelative(50, 100);\n      assert.equal(pc.x, 150);\n      assert.equal(pc.y, 300);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add a new page","suites":["DocumentContext","addPage"],"updatePoint":{"line":234,"column":29,"index":7317},"line":234,"code":"    it('should add a new page', function () {\n      pc.addPage(pageSize);\n      assert.equal(pc.pages.length, 2);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should return added page","suites":["DocumentContext","addPage"],"updatePoint":{"line":238,"column":32,"index":7442},"line":238,"code":"    it('should return added page', function () {\n      var page = pc.addPage(pageSize);\n      assert.equal(page, pc.pages[pc.pages.length - 1]);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should set y, availableHeight and availableWidth on page to initial values","suites":["DocumentContext","addPage"],"updatePoint":{"line":242,"column":82,"index":7645},"line":242,"code":"    it('should set y, availableHeight and availableWidth on page to initial values', function () {\n      pc.y = 123;\n      pc.availableHeight = 123;\n      pc.initializePage();\n      assert.equal(pc.y, 60);\n      assert.equal(pc.availableHeight, 800 - 60 - 60);\n      assert.equal(pc.availableWidth, 400 - 40 - 40);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should keep column width when in column group, but set page width","suites":["DocumentContext","addPage"],"updatePoint":{"line":250,"column":73,"index":7959},"line":250,"code":"    it('should keep column width when in column group, but set page width', function () {\n      pc.beginColumnGroup();\n      pc.beginColumn(100, 0, {});\n      pc.initializePage();\n      assert.equal(pc.availableWidth, 100);\n      pc.completeColumnGroup();\n      assert.equal(pc.availableWidth, 400 - 40 - 40);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should return context with larger page if pages are different","suites":["DocumentContext","bottomMostContext"],"updatePoint":{"line":260,"column":69,"index":8325},"line":260,"code":"    it('should return context with larger page if pages are different', function () {\n      var result = DocumentContext.__get__('bottomMostContext')({\n        page: 2,\n        y: 10\n      }, {\n        page: 3,\n        y: 5\n      });\n      assert.equal(result.page, 3);\n      assert.equal(result.y, 5);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should return context with larger y if both contexts have the same page","suites":["DocumentContext","bottomMostContext"],"updatePoint":{"line":271,"column":79,"index":8646},"line":271,"code":"    it('should return context with larger y if both contexts have the same page', function () {\n      var result = DocumentContext.__get__('bottomMostContext')({\n        page: 3,\n        y: 100\n      }, {\n        page: 3,\n        y: 50\n      });\n      assert.equal(result.page, 3);\n      assert.equal(result.y, 100);\n    });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should support nesting","suites":["DocumentContext","bottomMostContext"],"updatePoint":{"line":283,"column":28,"index":8926},"line":283,"code":"  it('should support nesting', function () {\n    pc.beginColumnGroup();\n    pc.beginColumn(50);\n    pc.y = 200;\n    pc.beginColumn(40);\n    pc.y = 150;\n    pc.beginColumn(80);\n    pc.beginColumnGroup();\n    assert.equal(pc.snapshots.length, 2);\n    assert.equal(pc.snapshots[1].x, 40 + 50 + 40);\n    pc.beginColumn(20);\n    pc.y = 240;\n    pc.page = 2;\n    pc.beginColumn(20);\n    pc.y = 260;\n    pc.completeColumnGroup();\n    assert.equal(pc.snapshots.length, 1);\n    assert.equal(pc.x, 40 + 50 + 40);\n    assert.equal(pc.page, 2);\n    assert.equal(pc.y, 240);\n    pc.completeColumnGroup();\n    assert.equal(pc.snapshots.length, 0);\n    assert.equal(pc.x, 40);\n    assert.equal(pc.page, 2);\n    assert.equal(pc.y, 240);\n  });","file":"unit/DocumentContext.spec.js","skipped":false,"dir":"tests"},{"name":"should add lines to the current page if there's enough space","suites":["ElementWriter","addLine"],"updatePoint":{"line":62,"column":69,"index":1350},"line":62,"code":"    it('should add lines to the current page if there\\'s enough space', function () {\n      var line = buildLine(20);\n      var position = ew.addLine(line);\n      assert.equal(page.items.length, 1);\n      assert.equal(position, fakePosition);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should return position on page","suites":["ElementWriter","addLine"],"updatePoint":{"line":68,"column":38,"index":1570},"line":68,"code":"    it('should return position on page', function () {\n      var line = buildLine(20);\n      ew.pushContext(50, 50);\n      ew.pushContext(20, 30);\n      ew.pushContext(11, 40);\n      var position = ew.addLine(line);\n      assert.equal(position, fakePosition);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should not add line and return false if there's not enough space","suites":["ElementWriter","addLine"],"updatePoint":{"line":76,"column":73,"index":1873},"line":76,"code":"    it('should not add line and return false if there\\'s not enough space', function () {\n      var line = buildLine(120);\n      assert(!ew.addLine(line));\n      assert.equal(page.items.length, 0);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should set line.x and line.y to current context's values","suites":["ElementWriter","addLine"],"updatePoint":{"line":81,"column":65,"index":2071},"line":81,"code":"    it('should set line.x and line.y to current context\\'s values', function () {\n      var line = buildLine(30);\n      ew.addLine(line);\n      assert.equal(line.x, 10);\n      assert.equal(line.y, 20);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should update context.y and context.availableHeight","suites":["ElementWriter","addLine"],"updatePoint":{"line":87,"column":59,"index":2275},"line":87,"code":"    it('should update context.y and context.availableHeight', function () {\n      ew.addLine(buildLine(30));\n      assert.equal(ctx.y, 20 + 30);\n      assert.equal(ctx.availableHeight, 100 - 30);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"right","suites":["ElementWriter","addLine","should support line alignment"],"updatePoint":{"line":93,"column":15,"index":2495},"line":93,"code":"      it('right', function () {\n        var line = buildLine(30, 'right');\n        ew.addLine(line);\n        assert.equal(line.x, 10 + 100 - line.getWidth());\n      });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"center","suites":["ElementWriter","addLine","should support line alignment"],"updatePoint":{"line":98,"column":16,"index":2665},"line":98,"code":"      it('center', function () {\n        var line = buildLine(30, 'center');\n        ew.addLine(line);\n        assert.equal(line.x, 10 + (100 - line.getWidth()) / 2);\n      });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"justify","suites":["ElementWriter","addLine","should support line alignment"],"updatePoint":{"line":103,"column":17,"index":2843},"line":103,"code":"      it('justify', function () {\n        var line = buildLine(30, 'justify');\n        ew.addLine(line);\n        assert.equal(line.x, 10);\n        var additionalSpacing = (100 - 60) / 2;\n        assert.equal(line.inlines[1].x, 30 + additionalSpacing);\n        assert.equal(line.inlines[2].x, 50 + 2 * additionalSpacing);\n      });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add vectors to the current page","suites":["ElementWriter","addVector"],"updatePoint":{"line":114,"column":46,"index":3255},"line":114,"code":"    it('should add vectors to the current page', function () {\n      ew.addVector({\n        type: 'rect',\n        x: 10,\n        y: 10\n      });\n      assert.equal(page.items.length, 1);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should offset vectors to the current position","suites":["ElementWriter","addVector"],"updatePoint":{"line":122,"column":53,"index":3457},"line":122,"code":"    it('should offset vectors to the current position', function () {\n      var rect = {\n        type: 'rect',\n        x: 10,\n        y: 10\n      };\n      var ellipse = {\n        type: 'ellipse',\n        x: 10,\n        y: 10\n      };\n      var line = {\n        type: 'line',\n        x1: 10,\n        x2: 50,\n        y1: 10,\n        y2: 20\n      };\n      var polyline = {\n        type: 'polyline',\n        points: [{\n          x: 0,\n          y: 0\n        }, {\n          x: 20,\n          y: 20\n        }]\n      };\n      ew.addVector(rect);\n      ew.addVector(ellipse);\n      ew.addVector(line);\n      ew.addVector(polyline);\n      assert.equal(rect.x, 20);\n      assert.equal(rect.y, 30);\n      assert.equal(ellipse.x, 20);\n      assert.equal(ellipse.y, 30);\n      assert.equal(line.x1, 20);\n      assert.equal(line.x2, 60);\n      assert.equal(line.y1, 30);\n      assert.equal(line.y2, 40);\n      assert.equal(polyline.points[0].x, 10);\n      assert.equal(polyline.points[0].y, 20);\n      assert.equal(polyline.points[1].x, 30);\n      assert.equal(polyline.points[1].y, 40);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add all fragment vectors and lines","suites":["ElementWriter","addFragment"],"updatePoint":{"line":195,"column":49,"index":5109},"line":195,"code":"    it('should add all fragment vectors and lines', function () {\n      ew.addFragment(fragment);\n      assert.equal(page.items.length, 4);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should return false if fragment height is larger than available space","suites":["ElementWriter","addFragment"],"updatePoint":{"line":199,"column":77,"index":5285},"line":199,"code":"    it('should return false if fragment height is larger than available space', function () {\n      fragment.height = 120;\n      assert(!ew.addFragment(fragment));\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should update current position","suites":["ElementWriter","addFragment"],"updatePoint":{"line":203,"column":38,"index":5418},"line":203,"code":"    it('should update current position', function () {\n      fragment.height = 50;\n      ew.addFragment(fragment);\n      assert.equal(ctx.y, 20 + 50);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should offset lines and vectors","suites":["ElementWriter","addFragment"],"updatePoint":{"line":208,"column":39,"index":5578},"line":208,"code":"    it('should offset lines and vectors', function () {\n      ew.addFragment(fragment);\n      assert.equal(page.items[0].item.x, 20);\n      assert.equal(page.items[0].item.y, 30);\n      assert.equal(page.items[1].item.x, 20);\n      assert.equal(page.items[1].item.y, 70);\n      assert.equal(page.items[2].item.x, 20);\n      assert.equal(page.items[2].item.y, 40);\n      assert.equal(page.items[3].item.x, 50);\n      assert.equal(page.items[3].item.y, 80);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should not modify original line/vector positions","suites":["ElementWriter","addFragment"],"updatePoint":{"line":219,"column":56,"index":6059},"line":219,"code":"    it('should not modify original line/vector positions', function () {\n      ew.addFragment(fragment);\n      assert.equal(fragment.items[0].item.x, 10);\n      assert.equal(fragment.items[0].item.y, 10);\n      assert.equal(fragment.items[3].item.x, 40);\n      assert.equal(fragment.items[3].item.y, 60);\n    });","file":"unit/ElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should be correctly stringify node","suites":["helpers/node","stringifyNode"],"updatePoint":{"line":7,"column":42,"index":223},"line":7,"code":"    it('should be correctly stringify node', function () {\n      var node = {\n        text: 'Text',\n        font: 'XXX',\n        fontSize: 12\n      };\n      var result = stringifyNode(node);\n      assert.equal(result, '{\"text\":\"Text\",\"font\":\"font\",\"fontSize\":12}');\n    });","file":"unit/helpers/node.spec.js","skipped":false,"dir":"tests"},{"name":"should be correctly specify string type","suites":["helpers/variableType"],"updatePoint":{"line":93,"column":45,"index":1742},"line":93,"code":"  it('should be correctly specify string type', function () {\n    checkVariables(isString);\n  });","file":"unit/helpers/variableType.spec.js","skipped":false,"dir":"tests"},{"name":"should be correctly specify number type","suites":["helpers/variableType"],"updatePoint":{"line":96,"column":45,"index":1840},"line":96,"code":"  it('should be correctly specify number type', function () {\n    checkVariables(isNumber);\n  });","file":"unit/helpers/variableType.spec.js","skipped":false,"dir":"tests"},{"name":"should be correctly specify object","suites":["helpers/variableType"],"updatePoint":{"line":99,"column":40,"index":1933},"line":99,"code":"  it('should be correctly specify object', function () {\n    checkVariables(isObject);\n  });","file":"unit/helpers/variableType.spec.js","skipped":false,"dir":"tests"},{"name":"should be correctly specify variable with value","suites":["helpers/variableType"],"updatePoint":{"line":102,"column":53,"index":2039},"line":102,"code":"  it('should be correctly specify variable with value', function () {\n    checkVariables(isValue);\n  });","file":"unit/helpers/variableType.spec.js","skipped":false,"dir":"tests"},{"name":"should arrange texts one below another","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":118,"column":46,"index":2949},"line":118,"code":"    it('should arrange texts one below another', function () {\n      var desc = ['first paragraph', 'another paragraph'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert(pages[0].items[0].item.y < pages[0].items[1].item.y);\n      assert.equal(pages[0].items[0].item.y + pages[0].items[0].item.getHeight(), pages[0].items[1].item.y);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support text in nested object","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":125,"column":44,"index":3358},"line":125,"code":"    it('should support text in nested object', function () {\n      var desc = [{\n        text: {\n          text: {\n            text: 'hello, world'\n          }\n        }\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 1);\n      assert.equal(pages[0].items[0].item.inlines.length, 2);\n      assert.equal(pages[0].items[0].item.inlines[0].text, 'hello, ');\n      assert.equal(pages[0].items[0].item.inlines[1].text, 'world');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should split lines with new-line character (bugfix)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":140,"column":59,"index":3914},"line":140,"code":"    it('should split lines with new-line character (bugfix)', function () {\n      var desc = ['first paragraph\\nhaving two lines', 'another paragraph'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert(pages[0].items.length, 3);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should span text into lines if theres not enough horizontal space","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":146,"column":73,"index":4234},"line":146,"code":"    it('should span text into lines if theres not enough horizontal space', function () {\n      var desc = ['first paragraph', 'another paragraph, this time a little bit longer though, we want to force this line to be broken into several lines'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 6);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should respect maxHeight","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":152,"column":32,"index":4599},"line":152,"code":"    it('should respect maxHeight', function () {\n      var desc = [{\n        text: 'another paragraph, this time a little bit longer though, we want to force this line to be broken into several lines',\n        maxHeight: 15\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should add new pages when theres not enough space left on current page","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":161,"column":78,"index":5038},"line":161,"code":"    it('should add new pages when theres not enough space left on current page', function () {\n      var desc = ['first paragraph', 'another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items.length, 60);\n      assert.equal(pages[1].items.length, 11);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should be able to add more than 1 page if there is not enough space","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":168,"column":75,"index":7072},"line":168,"code":"    it('should be able to add more than 1 page if there is not enough space', function () {\n      var desc = ['first paragraph', 'another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 3);\n      assert.equal(pages[0].items.length, 60);\n      assert.equal(pages[1].items.length, 60);\n      assert.equal(pages[2].items.length, 21);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not assume there is enough space left if line boundary is exactly on the page boundary (bugfix)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":176,"column":110,"index":10883},"line":176,"code":"    it('should not assume there is enough space left if line boundary is exactly on the page boundary (bugfix)', function () {\n      var desc = [{\n        fontSize: 72,\n        stack: [{\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: 'paragraph',\n          noWrap: true\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support named styles","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":217,"column":35,"index":11831},"line":217,"code":"    it('should support named styles', function () {\n      var desc = ['paragraph', {\n        text: 'paragraph',\n        style: 'header',\n        noWrap: true\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 70\n        }\n      });\n      assert.equal(pages[0].items[0].item.getWidth(), 9 * 12);\n      assert.equal(pages[0].items[1].item.getWidth(), 9 * 70);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support arrays of inlines (as an alternative to simple strings)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":231,"column":78,"index":12306},"line":231,"code":"    it('should support arrays of inlines (as an alternative to simple strings)', function () {\n      var desc = ['paragraph', {\n        text: ['paragraph ', 'nextInline'],\n        style: 'header'\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 15\n        }\n      });\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 2);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support inline text in nested arrays","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":244,"column":51,"index":12706},"line":244,"code":"    it('should support inline text in nested arrays', function () {\n      var desc = [{\n        text: [{\n          text: 'a better '\n        }, {\n          text: [{\n            text: 'style '\n          }]\n        }, {\n          text: 'independently '\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {}, {\n        fontSize: 8\n      });\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 1);\n      assert.equal(pages[0].items[0].item.inlines.length, 4);\n      assert.equal(pages[0].items[0].item.inlines[0].text, 'a ');\n      assert.equal(pages[0].items[0].item.inlines[1].text, 'better ');\n      assert.equal(pages[0].items[0].item.inlines[2].text, 'style ');\n      assert.equal(pages[0].items[0].item.inlines[3].text, 'independently ');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support inline styling and style overrides","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":267,"column":57,"index":13525},"line":267,"code":"    it('should support inline styling and style overrides', function () {\n      var desc = ['paragraph', {\n        text: [{\n          text: 'paragraph',\n          noWrap: true\n        }, {\n          text: ' paragraph',\n          fontSize: 4\n        }],\n        style: 'header'\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 70\n        }\n      });\n      assert.equal(pages[0].items[0].item.getWidth(), 9 * 12);\n      assert.equal(pages[0].items[1].item.getWidth(), 9 * 70);\n      assert.equal(pages[0].items[2].item.getWidth(), 9 * 4);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support multiple styles (last property wins)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":287,"column":59,"index":14140},"line":287,"code":"    it('should support multiple styles (last property wins)', function () {\n      var desc = ['paragraph', {\n        text: 'paragraph',\n        style: ['header', 'small']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 70\n        },\n        small: {\n          fontSize: 35\n        }\n      });\n      assert.equal(pages[0].items[0].item.getWidth(), 9 * 12);\n      assert.equal(pages[0].items[1].item.getWidth(), 9 * 35);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support style-overrides","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":303,"column":38,"index":14615},"line":303,"code":"    it('should support style-overrides', function () {\n      var desc = ['paragraph', {\n        text: 'paragraph',\n        fontSize: 40,\n        noWrap: true\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 70\n        }\n      });\n      assert.equal(pages[0].items[0].item.getWidth(), 9 * 12);\n      assert.equal(pages[0].items[1].item.getWidth(), 9 * 40);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"style-overrides should take precedence over named styles","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":317,"column":64,"index":15073},"line":317,"code":"    it('style-overrides should take precedence over named styles', function () {\n      var desc = ['paragraph', {\n        text: 'paragraph',\n        fontSize: 40,\n        style: 'header',\n        noWrap: true\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 70\n        }\n      });\n      assert.equal(pages[0].items[1].item.getWidth(), 9 * 40);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support default style","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":331,"column":36,"index":15465},"line":331,"code":"    it('should support default style', function () {\n      var desc = ['text', 'text2'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {}, {\n        fontSize: 50\n      });\n      assert.equal(pages[0].items[0].item.getWidth(), 4 * 50);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support columns","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":338,"column":30,"index":15723},"line":338,"code":"    it('should support columns', function () {\n      var desc = [{\n        columns: [{\n          text: 'column 1'\n        }, {\n          text: 'column 2'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 200);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support fixed column widths","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":350,"column":42,"index":16087},"line":350,"code":"    it('should support fixed column widths', function () {\n      var desc = [{\n        columns: [{\n          text: 'col1',\n          width: 100\n        }, {\n          text: 'col2',\n          width: 150\n        }, {\n          text: 'col3',\n          width: 90\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert(pages[0].items.length, 3);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 100);\n      assert.equal(pages[0].items[2].item.x, 40 + 100 + 150);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support text-only column definitions","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":369,"column":51,"index":16660},"line":369,"code":"    it('should support text-only column definitions', function () {\n      var desc = [{\n        columns: ['column 1', 'column 2']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 200);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"column descriptor should support named style inheritance","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":377,"column":64,"index":16990},"line":377,"code":"    it('column descriptor should support named style inheritance', function () {\n      var desc = [{\n        style: 'header',\n        columns: [{\n          text: 'column 1'\n        }, {\n          text: 'column 2'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 20\n        }\n      });\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.getWidth(), 8 * 20);\n      assert.equal(pages[0].items[1].item.getWidth(), 8 * 20);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"column descriptor should support style overrides","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":395,"column":56,"index":17526},"line":395,"code":"    it('column descriptor should support style overrides', function () {\n      var desc = [{\n        fontSize: 8,\n        columns: [{\n          text: 'column 1'\n        }, {\n          text: 'column 2'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          fontSize: 20\n        }\n      });\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.getWidth(), 8 * 8);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support column gap","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":412,"column":33,"index":17971},"line":412,"code":"    it('should support column gap', function () {\n      var desc = [{\n        fontSize: 8,\n        columnGap: 23,\n        columns: [{\n          text: 'column 1',\n          width: 100\n        }, {\n          text: 'column 2',\n          width: 100\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 100 + 23);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support column gap inheritance","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":430,"column":45,"index":18519},"line":430,"code":"    it('should support column gap inheritance', function () {\n      var desc = [{\n        fontSize: 8,\n        columns: [{\n          text: 'column 1',\n          width: 100\n        }, {\n          text: 'column 2',\n          width: 100\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {}, {\n        columnGap: 25\n      });\n      assert.equal(pages[0].items[1].item.x, 40 + 100 + 25);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support fixed column widths","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":446,"column":42,"index":18945},"line":446,"code":"    it('should support fixed column widths', function () {\n      var desc = [{\n        columns: [{\n          text: 'col1',\n          width: 100\n        }, {\n          text: 'col2',\n          width: 150\n        }, {\n          text: 'col3',\n          width: 90\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert(pages[0].items.length, 3);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 100);\n      assert.equal(pages[0].items[2].item.x, 40 + 100 + 150);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support auto-width columns","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":465,"column":41,"index":19508},"line":465,"code":"    it('should support auto-width columns', function () {\n      var desc = [{\n        columns: [{\n          text: 'col1',\n          width: 'auto',\n          noWrap: true\n        }, {\n          text: 'column',\n          width: 'auto',\n          noWrap: true\n        }, {\n          text: 'col3',\n          width: 'auto',\n          noWrap: true\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert(pages[0].items.length, 3);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 4 * 12);\n      assert.equal(pages[0].items[2].item.x, 40 + 4 * 12 + 6 * 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support auto-width columns mixed with other types of columns","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":487,"column":75,"index":20198},"line":487,"code":"    it('should support auto-width columns mixed with other types of columns', function () {\n      var desc = [{\n        columns: [{\n          text: 'col1',\n          width: 'auto',\n          noWrap: true\n        }, {\n          text: 'column',\n          width: 58,\n          noWrap: true\n        }, {\n          text: 'column',\n          width: '*',\n          noWrap: true\n        }, {\n          text: 'column',\n          width: '*',\n          noWrap: true\n        }, {\n          text: 'col3',\n          width: 'auto',\n          noWrap: true\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items.length, 5);\n      var starWidth = (400 - 40 - 40 - 58 - 2 * 4 * 12) / 2;\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 4 * 12);\n      assert.equal(pages[0].items[2].item.x, 40 + 4 * 12 + 58);\n      assert.equal(pages[0].items[3].item.x, 40 + 4 * 12 + 58 + starWidth);\n      assert.equal(pages[0].items[4].item.x, 40 + 4 * 12 + 58 + 2 * starWidth);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support star columns and divide available width equally between all star columns","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":520,"column":95,"index":21291},"line":520,"code":"    it('should support star columns and divide available width equally between all star columns', function () {\n      var desc = [{\n        columns: [{\n          text: 'col1'\n        }, {\n          text: 'col2',\n          width: 50\n        }, {\n          text: 'col3'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      var pageSpace = 400 - 40 - 40;\n      var starWidth = (pageSpace - 50) / 2;\n      assert(pages[0].items.length, 3);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + starWidth);\n      assert.equal(pages[0].items[2].item.x, 40 + starWidth + 50);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should pass column widths to inner elements","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":539,"column":51,"index":21912},"line":539,"code":"    it('should pass column widths to inner elements', function () {\n      var desc = [{\n        fontSize: 8,\n        columns: [{\n          columns: [{\n            text: 'sample text here, should have maxWidth set to ((400 - 40 - 40 - 50)/2)/2'\n          }, {\n            text: 'second column'\n          }]\n        }, {\n          text: 'col2',\n          width: 50\n        }, {\n          text: 'col3'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n\n      // ((pageWidth - margins - fixed_column_width) / 2_columns) / 2_subcolumns\n      var maxWidth = (400 - 40 - 40 - 50) / 2 / 2;\n      assert.equal(pages[0].items[0].item.maxWidth, maxWidth);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support stack of paragraphs","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":561,"column":42,"index":22595},"line":561,"code":"    it('should support stack of paragraphs', function () {\n      var desc = [{\n        stack: ['paragraph1', 'paragraph2']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert(pages[0].items[0].item.getHeight() > 0);\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.y + pages[0].items[0].item.getHeight(), pages[0].items[1].item.y);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"stack of paragraphs should inherit styles and overriden properties from column descriptors","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":571,"column":98,"index":23106},"line":571,"code":"    it('stack of paragraphs should inherit styles and overriden properties from column descriptors', function () {\n      var desc = [{\n        style: 'header',\n        italics: false,\n        columns: [{\n          bold: true,\n          stack: ['paragraph', {\n            text: 'paragraph2'\n          }, {\n            text: 'paragraph3',\n            bold: false\n          }]\n        }, 'another column', {\n          text: 'third column'\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        header: {\n          italics: true,\n          fontSize: 50\n        }\n      });\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 5);\n      assert.equal(pages[0].items[0].item.x, pages[0].items[1].item.x);\n      assert.equal(pages[0].items[1].item.x, pages[0].items[2].item.x);\n      assert.equal(pages[0].items[0].item.y, pages[0].items[3].item.y);\n      assert.equal(pages[0].items[0].item.y, pages[0].items[4].item.y);\n      assert.equal(pages[0].items[0].item.inlines[0].width, 9 * 50 * 1.5);\n      assert.equal(pages[0].items[1].item.inlines[0].width, 10 * 50 * 1.5);\n      assert.equal(pages[0].items[2].item.inlines[0].width, 10 * 50);\n      assert.equal(pages[0].items[3].item.inlines[0].width, 8 * 50);\n      assert.equal(pages[0].items[4].item.inlines[0].width, 6 * 50);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support unordered lists","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":605,"column":38,"index":24396},"line":605,"code":"    it('should support unordered lists', function () {\n      var desc = ['paragraph', {\n        ul: ['item 1', 'item 2', 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 7);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"unordered lists should have circles to the left of each element","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":613,"column":71,"index":24729},"line":613,"code":"    it('unordered lists should have circles to the left of each element', function () {\n      var desc = ['paragraph', {\n        ul: ['item 1', 'item 2', 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 7);\n      for (var i = 1; i < 7; i += 2) {\n        var circle = pages[0].items[i + 1].item; // circle is added after line\n        var itemLine = pages[0].items[i].item;\n        assert(circle.x < itemLine.x);\n        assert(circle.y > itemLine.y && circle.y < itemLine.y + itemLine.getHeight());\n      }\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"circle radius for unordered lists should be based on fontSize","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":627,"column":69,"index":25359},"line":627,"code":"    it('circle radius for unordered lists should be based on fontSize', function () {\n      var desc = [{\n        fontSize: 10,\n        ul: ['item 1', 'item 2', 'item 3']\n      }, {\n        fontSize: 18,\n        ul: ['item 1', 'item 2', 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      // without Math.toFixed an AssertionError occurs: 1.7999999999999998 == 1.8\n      assert.equal((pages[0].items[7].item.r1 / pages[0].items[1].item.r1).toFixed(1), (18 / 10).toFixed(1));\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"unordered lists should support nested lists","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":639,"column":51,"index":25866},"line":639,"code":"    it('unordered lists should support nested lists', function () {\n      var desc = [{\n        fontSize: 10,\n        ul: ['item 1', {\n          ul: ['subitem 1', 'subitem 2', 'subitem 3']\n        }, 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items.length, 10);\n\n      // positioning\n      assert.equal(pages[0].items[0].item.x, pages[0].items[8].item.x);\n      assert.equal(pages[0].items[2].item.x, pages[0].items[4].item.x);\n      assert(pages[0].items[0].item.x < pages[0].items[2].item.x);\n\n      // circle positioning\n      var circle = pages[0].items[3].item;\n      var itemLine = pages[0].items[2].item;\n      assert(circle.x < itemLine.x);\n      assert(circle.y > itemLine.y && circle.y < itemLine.y + itemLine.getHeight());\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"if there is enough space left on the page for the circle but not enough for the following line of text, circle should be drawn on the next page, together with the text","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":660,"column":175,"index":26805},"line":660,"code":"    it('if there is enough space left on the page for the circle but not enough for the following line of text, circle should be drawn on the next page, together with the text', function () {\n      var desc = [{\n        fontSize: 72,\n        stack: ['paragraph', 'paragraph', 'paragraph', 'paragraph', 'paragraph', 'paragraph', 'paragraph', 'paragraph', 'paragraph'],\n        noWrap: true\n      }, {\n        fontSize: 90,\n        ul: [{\n          text: [{\n            text: 'line ',\n            noWrap: true\n          }, {\n            text: '1'\n          }]\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items.length, 9);\n      assert.equal(pages[1].items.length, 3);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support ordered lists","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":681,"column":36,"index":27450},"line":681,"code":"    it('should support ordered lists', function () {\n      var desc = ['paragraph', {\n        ol: ['item 1', 'item 2', 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 4 + 3);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered list should use list style, not item-level style (bugfix)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":689,"column":84,"index":27800},"line":689,"code":"    it('numbers in ordered list should use list style, not item-level style (bugfix)', function () {\n      var desc = [{\n        fontSize: 5,\n        ol: [{\n          text: 'item 1',\n          fontSize: 15\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.inlines[0].fontSize, 15);\n      assert.equal(pages[0].items[1].item.inlines[0].fontSize, 5);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered lists should be positioned to the left of each item","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":702,"column":78,"index":28278},"line":702,"code":"    it('numbers in ordered lists should be positioned to the left of each item', function () {\n      var desc = ['paragraph', {\n        ol: ['item 1', 'item 2', 'item 3']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 4 + 3);\n      for (var i = 0; i < 3; i++) {\n        var itemLine = pages[0].items[1 + 2 * i].item;\n        var numberLine = pages[0].items[2 + 2 * i].item;\n        assert(numberLine.x < itemLine.x);\n        assert(numberLine.x + numberLine.getWidth() <= itemLine.x);\n        assert(numberLine.y >= itemLine.y && numberLine.y <= itemLine.y + itemLine.getHeight());\n      }\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered lists should be positioned to the left of each item also in more complex cases","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":717,"column":105,"index":29013},"line":717,"code":"    it('numbers in ordered lists should be positioned to the left of each item also in more complex cases', function () {\n      var desc = ['paragraph', {\n        ol: ['item 1', {\n          fontSize: 40,\n          text: 'item 2'\n        }, {\n          text: ['item 3', {\n            text: 'next inline',\n            fontSize: 30\n          }]\n        }, 'item 4\\nhaving two lines', {\n          text: ['item 5', {\n            text: 'next inline\\nand next line',\n            fontSize: 30\n          }]\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      for (var i = 0; i < 3; i++) {\n        var paragraphLine = pages[0].items[1 + 2 * i].item;\n        var numberLine = pages[0].items[2 + 2 * i].item;\n        assert(numberLine.x < paragraphLine.x);\n        assert(numberLine.x + numberLine.getWidth() <= paragraphLine.x);\n      }\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered lists should be aligned (vertically) to the bottom of the first line of each item","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":743,"column":108,"index":29930},"line":743,"code":"    it('numbers in ordered lists should be aligned (vertically) to the bottom of the first line of each item', function () {\n      var desc = ['paragraph', {\n        ol: ['item 1', {\n          fontSize: 40,\n          text: 'item 2'\n        }, {\n          text: ['item 3', {\n            text: 'next inline',\n            fontSize: 30\n          }]\n        }, 'item 4\\nhaving two lines', {\n          text: ['item 5', {\n            text: 'next inline\\nand next line',\n            fontSize: 30\n          }]\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      for (var i = 0; i < 3; i++) {\n        var paragraphLine = pages[0].items[1 + 2 * i].item;\n        var numberLine = pages[0].items[2 + 2 * i].item;\n        assert.equal(numberLine.y + numberLine.getAscenderHeight(), paragraphLine.y + paragraphLine.getAscenderHeight());\n      }\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered list should be automatically incremented","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":768,"column":67,"index":30807},"line":768,"code":"    it('numbers in ordered list should be automatically incremented', function () {\n      var desc = [{\n        ol: ['item', 'item', 'item', 'item']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      for (var i = 0; i < 4; i++) {\n        var numberLine = pages[0].items[1 + 2 * i].item;\n        assert.equal(numberLine.inlines[0].text, (i + 1).toString() + '. ');\n      }\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"numbers in ordered sublist should have indepentend counters","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":778,"column":67,"index":31220},"line":778,"code":"    it('numbers in ordered sublist should have indepentend counters', function () {\n      var desc = [{\n        ol: ['item 1', 'item 2', {\n          ol: ['subitem 1', 'subitem 2', 'subitem 3']\n        }, 'item 3', 'item 4']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n\n      // item 2\n      assert.equal(pages[0].items[3].item.inlines[0].text, '2. ');\n      // item 3\n      assert.equal(pages[0].items[3 + 6].item.inlines[0].text, '3. ');\n\n      // subitem 1\n      assert.equal(pages[0].items[5].item.inlines[0].text, '1. ');\n      // subitem 2\n      assert.equal(pages[0].items[7].item.inlines[0].text, '2. ');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"ordered lists should not add an empty line below the number (bugfix)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":796,"column":76,"index":31883},"line":796,"code":"    it('ordered lists should not add an empty line below the number (bugfix)', function () {\n      var desc = [{\n        ol: ['item 1', 'item 2']\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items[0].item.y, 40);\n      assert.equal(pages[0].items[1].item.y, 40);\n      assert.equal(pages[0].items[2].item.y, 40 + 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support tables with fixed widths","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":805,"column":47,"index":32241},"line":805,"code":"    it('should support tables with fixed widths', function () {\n      var desc = [{\n        table: {\n          widths: [30, 50, 40],\n          body: [['a', 'b', 'c'], [{\n            text: 'aaa',\n            noWrap: true\n          }, {\n            text: 'bbb',\n            noWrap: true\n          }, {\n            text: 'ccc',\n            noWrap: true\n          }]]\n        },\n        layout: emptyTableLayout\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 6);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 30);\n      assert.equal(pages[0].items[2].item.x, 40 + 30 + 50);\n      assert.equal(pages[0].items[3].item.x, 40);\n      assert.equal(pages[0].items[4].item.x, 40 + 30);\n      assert.equal(pages[0].items[5].item.x, 40 + 30 + 50);\n      assert.equal(pages[0].items[0].item.y, 40);\n      assert.equal(pages[0].items[1].item.y, 40);\n      assert.equal(pages[0].items[2].item.y, 40);\n      assert.equal(pages[0].items[3].item.y, 40 + 12);\n      assert.equal(pages[0].items[4].item.y, 40 + 12);\n      assert.equal(pages[0].items[5].item.y, 40 + 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support tables with auto column widths","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":838,"column":53,"index":33469},"line":838,"code":"    it('should support tables with auto column widths', function () {\n      var desc = [{\n        table: {\n          widths: 'auto',\n          body: [['a', 'b', 'c'], ['aaa', 'bbb', 'ccc']]\n        },\n        layout: emptyTableLayout\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 6);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert.equal(pages[0].items[1].item.x, 40 + 3 * 12);\n      assert.equal(pages[0].items[2].item.x, 40 + 6 * 12);\n      assert.equal(pages[0].items[3].item.x, 40);\n      assert.equal(pages[0].items[4].item.x, 40 + 3 * 12);\n      assert.equal(pages[0].items[5].item.x, 40 + 6 * 12);\n      assert.equal(pages[0].items[0].item.y, 40);\n      assert.equal(pages[0].items[1].item.y, 40);\n      assert.equal(pages[0].items[2].item.y, 40);\n      assert.equal(pages[0].items[3].item.y, 40 + 12);\n      assert.equal(pages[0].items[4].item.y, 40 + 12);\n      assert.equal(pages[0].items[5].item.y, 40 + 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support tables spanning across pages","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":862,"column":51,"index":34521},"line":862,"code":"    it('should support tables spanning across pages', function () {\n      var desc = [{\n        table: {\n          widths: 'auto',\n          body: []\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 80; i++) {\n        desc[0].table.body.push(['a', 'b', 'c']);\n      }\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support table-cell spanning across pages","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":876,"column":55,"index":34937},"line":876,"code":"    it('should support table-cell spanning across pages', function () {\n      var desc = [{\n        table: {\n          widths: 'auto',\n          body: []\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 59; i++) {\n        desc[0].table.body.push(['a', 'b', 'c']);\n      }\n      desc[0].table.body.push(['a\\nb\\nc', 'a\\nb\\nc', 'a\\nb\\nc']);\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[1].items.length, 6);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not split table headers","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":892,"column":38,"index":35448},"line":892,"code":"    it('should not split table headers', function () {\n      var desc = [{\n        stack: []\n      }, {\n        table: {\n          headerRows: 1,\n          widths: 'auto',\n          body: [['a1\\na2', 'b1\\nb2', 'c1\\nc2'], ['a', 'b', 'c']]\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 59; i++) {\n        desc[0].stack.push('sample line');\n      }\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items.length, 59);\n      assert.equal(pages[1].items.length, 9);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not split multi-row headers","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":911,"column":42,"index":36038},"line":911,"code":"    it('should not split multi-row headers', function () {\n      var desc = [{\n        stack: []\n      }, {\n        table: {\n          headerRows: 2,\n          widths: 'auto',\n          body: [['a1', 'b1', 'c1'], ['a2', 'b2', 'c2'], ['a', 'b', 'c']]\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 59; i++) {\n        desc[0].stack.push('sample line');\n      }\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items.length, 59);\n      assert.equal(pages[1].items.length, 9);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should repeat table headers","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":930,"column":35,"index":36629},"line":930,"code":"    it('should repeat table headers', function () {\n      var desc = [{\n        table: {\n          headerRows: 1,\n          widths: 'auto',\n          body: [['h1', 'h2', 'h3']]\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 590; i++) {\n        desc[0].table.body.push(['a', 'b', 'c']);\n      }\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 10);\n      pages.forEach(function (page) {\n        assert.equal(page.items[0].item.inlines[0].text, 'h1');\n        assert.equal(page.items[0].item.y, 40);\n        assert.equal(page.items[0].item.x, 40);\n      });\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not change x positions of repeated table headers, if context.x has changed (bugfix)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":950,"column":98,"index":37341},"line":950,"code":"    it('should not change x positions of repeated table headers, if context.x has changed (bugfix)', function () {\n      var desc = [{\n        table: {\n          headerRows: 1,\n          widths: 'auto',\n          body: [['h1', 'h2', 'h3'], [{\n            ul: []\n          }, 'b', 'c']]\n        },\n        layout: emptyTableLayout\n      }];\n      for (var i = 0; i < 100; i++) {\n        desc[0].table.body[1][0].ul.push('item');\n      }\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items[0].item.x, 40);\n      assert(pages[0].items[4].item.x > 40);\n      assert.equal(pages[1].items[0].item.x, 40);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should throw an exception if unrecognized structure is detected","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":970,"column":71,"index":38008},"line":970,"code":"    it('should throw an exception if unrecognized structure is detected', function () {\n      assert.throws(function () {\n        builder.layoutDocument([{\n          ol: ['item', {\n            abc: 'test'\n          }]\n        }], sampleTestProvider);\n      });\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support a switch of page orientation within a document","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":979,"column":69,"index":38275},"line":979,"code":"    it('should support a switch of page orientation within a document', function () {\n      var desc = [{\n        text: 'Page 1, document orientation or default portrait'\n      }, {\n        text: 'Page 2, landscape',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].pageSize.orientation, 'portrait');\n      assert.equal(pages[1].pageSize.orientation, 'landscape');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support changing the page orientation to landscape consecutively","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":992,"column":79,"index":38818},"line":992,"code":"    it('should support changing the page orientation to landscape consecutively', function () {\n      var desc = [{\n        text: 'Page 1, document orientation or default portrait'\n      }, {\n        text: 'Page 2, landscape',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }, {\n        text: 'Page 3, landscape again',\n        pageBreak: 'after',\n        pageOrientation: 'landscape'\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 3);\n      assert.equal(pages[0].pageSize.orientation, 'portrait');\n      assert.equal(pages[1].pageSize.orientation, 'landscape');\n      assert.equal(pages[2].pageSize.orientation, 'landscape');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the absolutePosition attribute to position in absolute coordinates","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1010,"column":85,"index":39548},"line":1010,"code":"    it('should use the absolutePosition attribute to position in absolute coordinates', function () {\n      var desc = [{\n        columns: [{\n          text: 'text 1',\n          absolutePosition: {\n            x: 123,\n            y: 200\n          }\n        }, {\n          text: 'text 2',\n          absolutePosition: {\n            x: 0,\n            y: 0\n          }\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items[0].item.x, 123);\n      assert.equal(pages[0].items[0].item.y, 200);\n      assert.equal(pages[0].items[1].item.x, 0);\n      assert.equal(pages[0].items[1].item.y, 0);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the absolutePosition attribute without pagebreak in canvas","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1032,"column":77,"index":40202},"line":1032,"code":"    it('should use the absolutePosition attribute without pagebreak in canvas', function () {\n      var builderAP = new LayoutBuilder({\n        width: 841.89,\n        height: 555.28,\n        orientation: 'portrait'\n      }, {\n        left: 40,\n        right: 40,\n        top: 40,\n        bottom: 40\n      });\n      builderAP.pages = [];\n      builderAP.context = [{\n        page: -1,\n        availableWidth: 320,\n        availableHeight: 0\n      }];\n      builderAP.styleStack = new StyleContextStack();\n      var desc = [{\n        absolutePosition: {\n          x: 0,\n          y: 0\n        },\n        canvas: [{\n          type: 'polyline',\n          lineWidth: 0,\n          closePath: true,\n          color: '#fce5d4',\n          points: [{\n            x: 530,\n            y: 0\n          }, {\n            x: 650,\n            y: 0\n          }, {\n            x: 841.89,\n            y: 50\n          }, {\n            x: 841.89,\n            y: 270\n          }]\n        }, {\n          type: 'polyline',\n          lineWidth: 0,\n          closePath: true,\n          color: '#fce5d4',\n          points: [{\n            x: 0,\n            y: 400\n          }, {\n            x: 300,\n            y: 555.28\n          }, {\n            x: 200,\n            y: 555.28\n          }, {\n            x: 0,\n            y: 500\n          }]\n        }]\n      }];\n      var pages = builderAP.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the absolutePosition attribute without pagebreak in image","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1096,"column":76,"index":41650},"line":1096,"code":"    it('should use the absolutePosition attribute without pagebreak in image', function () {\n      var builderAP = new LayoutBuilder({\n        width: 841.89,\n        height: 555.28,\n        orientation: 'portrait'\n      }, {\n        left: 40,\n        right: 40,\n        top: 40,\n        bottom: 40\n      });\n      builderAP.pages = [];\n      builderAP.context = [{\n        page: -1,\n        availableWidth: 320,\n        availableHeight: 0\n      }];\n      builderAP.styleStack = new StyleContextStack();\n      var desc = [{\n        image: 'sampleImage.jpg',\n        width: 80,\n        absolutePosition: {\n          x: 250,\n          y: 500\n        }\n      }, {\n        image: 'sampleImage.jpg',\n        width: 80,\n        absolutePosition: {\n          x: 450,\n          y: 520\n        }\n      }];\n      var pages = builderAP.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the absolutePosition attribute without pagebreak in qr","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1132,"column":73,"index":42558},"line":1132,"code":"    it('should use the absolutePosition attribute without pagebreak in qr', function () {\n      var builderAP = new LayoutBuilder({\n        width: 841.89,\n        height: 555.28,\n        orientation: 'portrait'\n      }, {\n        left: 40,\n        right: 40,\n        top: 40,\n        bottom: 40\n      });\n      builderAP.pages = [];\n      builderAP.context = [{\n        page: -1,\n        availableWidth: 320,\n        availableHeight: 0\n      }];\n      builderAP.styleStack = new StyleContextStack();\n      var desc = [{\n        qr: 'pdfmake',\n        absolutePosition: {\n          x: 250,\n          y: 500\n        }\n      }, {\n        qr: 'pdfmake',\n        absolutePosition: {\n          x: 450,\n          y: 520\n        }\n      }];\n      var pages = builderAP.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the relativePosition attribute to position in relativePosition coordinates","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1166,"column":93,"index":43426},"line":1166,"code":"    it('should use the relativePosition attribute to position in relativePosition coordinates', function () {\n      var desc = [{\n        text: 'text 1',\n        relativePosition: {\n          x: 123,\n          y: 200\n        }\n      }, {\n        text: 'text 2',\n        relativePosition: {\n          x: 0,\n          y: 0\n        }\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items[0].item.x, 163);\n      assert.equal(pages[0].items[0].item.y, 240);\n      assert.equal(pages[0].items[1].item.x, 40);\n      assert.equal(pages[0].items[1].item.y, 40);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should use the relativePosition attribute to position in relativePosition coordinates in a table cell","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1186,"column":109,"index":44061},"line":1186,"code":"    it('should use the relativePosition attribute to position in relativePosition coordinates in a table cell', function () {\n      var desc = [{\n        table: {\n          widths: [200, 200],\n          body: [[{\n            text: 'text 1',\n            style: {\n              alignment: 'center'\n            },\n            relativePosition: {\n              x: 10,\n              y: 200\n            }\n          }, {\n            text: 'text 2',\n            relativePosition: {\n              x: 0,\n              y: 0\n            }\n          }]]\n        },\n        layout: emptyTableLayout\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {});\n      assert.equal(pages[0].items[0].item.x, 114);\n      assert.equal(pages[0].items[0].item.y, 240);\n      assert.equal(pages[0].items[1].item.x, 240);\n      assert.equal(pages[0].items[1].item.y, 40);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not break nodes across multiple pages when unbreakable attribute is passed","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1215,"column":89,"index":44919},"line":1215,"code":"    it('should not break nodes across multiple pages when unbreakable attribute is passed', function () {\n      var desc = [{\n        stack: [{\n          text: 'first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, first paragraph, this time long enough to be broken into several lines and then to break the containing block, '\n        }, {\n          text: 'beginning of another paragraph, this time long enough to be broken into several lines and then to break the containing blockanother paragraph, this time long enough to be broken into several lines and then to break the containing blockanother paragraph, this time long enough to be broken into several lines and then to break the containing blockanother paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block, another paragraph, this time long enough to be broken into several lines and then to break the containing block',\n          unbreakable: true\n        }]\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 2);\n      assert.equal(pages[0].items.length, 33);\n      assert.equal(pages[1].items.length, 53);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support wrap long word","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1229,"column":37,"index":47344},"line":1229,"code":"    it('should support wrap long word', function () {\n      var desc = ['abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890'];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items.length, 3);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support wrap long word with big font size","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1234,"column":56,"index":47624},"line":1234,"code":"    it('should support wrap long word with big font size', function () {\n      var desc = [{\n        text: 'abc',\n        fontSize: 200\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 3);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support wrap one big character with big font size","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1243,"column":64,"index":47937},"line":1243,"code":"    it('should support wrap one big character with big font size', function () {\n      var desc = [{\n        text: 'a',\n        fontSize: 200\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support disable wrap long word by noWrap","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1252,"column":55,"index":48239},"line":1252,"code":"    it('should support disable wrap long word by noWrap', function () {\n      var desc = [{\n        text: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890',\n        noWrap: true\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages[0].items.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support not line break if is text inlines (#975)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1260,"column":63,"index":48572},"line":1260,"code":"    it('should support not line break if is text inlines (#975)', function () {\n      var TEXT = [{\n        text: 'Celestial Circle'\n      }, {\n        text: 'The Faithful Ally',\n        style: 'styled'\n      }, {\n        text: ', '\n      }, {\n        text: 'Gift of Knowledge',\n        style: 'styled'\n      }, {\n        text: ', '\n      }, {\n        text: 'Servant of Infallible Locations',\n        style: 'styled'\n      }, {\n        text: ', '\n      }, {\n        text: 'Swift Spirit of Winged Transportation',\n        style: 'styled'\n      }, {\n        text: ', '\n      }, {\n        text: 'Warding the Created Mind',\n        style: 'styled'\n      }];\n      var TEXT2 = [{\n        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod '\n      }, {\n        text: 're'\n      }, {\n        text: 'mark',\n        style: 'styled'\n      }, {\n        text: 'able'\n      }];\n      var desc = [{\n        text: TEXT\n      }, {\n        text: TEXT2\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider, {\n        styled: {\n          color: 'dodgerblue'\n        }\n      }, {\n        fontSize: 16\n      });\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 16);\n      assert.equal(pages[0].items[5].item.inlines.length, 3);\n      assert.equal(pages[0].items[5].item.inlines[0].text, 'Locations');\n      assert.equal(pages[0].items[5].item.inlines[1].text, ', ');\n      assert.equal(pages[0].items[5].item.inlines[2].text, 'Swift ');\n      assert.equal(pages[0].items[15].item.inlines.length, 3);\n      assert.equal(pages[0].items[15].item.inlines[0].text, 're');\n      assert.equal(pages[0].items[15].item.inlines[1].text, 'mark');\n      assert.equal(pages[0].items[15].item.inlines[2].text, 'able');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support line break if is text inlines and is new line","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1320,"column":68,"index":50351},"line":1320,"code":"    it('should support line break if is text inlines and is new line', function () {\n      var desc = [{\n        text: 'First line.\\n'\n      }, {\n        text: 'Second line.'\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n      assert.equal(pages[0].items.length, 2);\n      assert.equal(pages[0].items[0].item.inlines.length, 2);\n      assert.equal(pages[0].items[0].item.inlines[0].text, 'First ');\n      assert.equal(pages[0].items[0].item.inlines[1].text, 'line.');\n      assert.equal(pages[0].items[1].item.inlines.length, 2);\n      assert.equal(pages[0].items[1].item.inlines[0].text, 'Second ');\n      assert.equal(pages[0].items[1].item.inlines[1].text, 'line.');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support images","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1336,"column":29,"index":51059},"line":1336,"code":"    it('should support images');","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should align image properly","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1337,"column":35,"index":51098},"line":1337,"code":"    it('should align image properly');","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should break pages if image cannot fit on current page","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1338,"column":62,"index":51164},"line":1338,"code":"    it('should break pages if image cannot fit on current page');","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should move images drawn inside unbreakable blocks properly to the next page","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1339,"column":84,"index":51252},"line":1339,"code":"    it('should move images drawn inside unbreakable blocks properly to the next page');","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should copy image if it's inside a repeatable block (ie. table header)","suites":["LayoutBuilder","processDocument"],"updatePoint":{"line":1340,"column":79,"index":51335},"line":1340,"code":"    it('should copy image if it\\'s inside a repeatable block (ie. table header)');","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should support block margins","suites":["LayoutBuilder","processDocument","TODO"],"line":1343,"code":"      it.skip('should support block margins');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support column spans","suites":["LayoutBuilder","processDocument","TODO"],"line":1344,"code":"      it.skip('should support column spans');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support row spans","suites":["LayoutBuilder","processDocument","TODO"],"line":1345,"code":"      it.skip('should support row spans');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector lines","suites":["LayoutBuilder","processDocument","TODO"],"line":1346,"code":"      it.skip('should support vector lines');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector paths","suites":["LayoutBuilder","processDocument","TODO"],"line":1347,"code":"      it.skip('should support vector paths');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector dashed lines","suites":["LayoutBuilder","processDocument","TODO"],"line":1348,"code":"      it.skip('should support vector dashed lines');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector line join styles","suites":["LayoutBuilder","processDocument","TODO"],"line":1349,"code":"      it.skip('should support vector line join styles');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector rectangles","suites":["LayoutBuilder","processDocument","TODO"],"line":1350,"code":"      it.skip('should support vector rectangles');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector rounded rectangles","suites":["LayoutBuilder","processDocument","TODO"],"line":1351,"code":"      it.skip('should support vector rounded rectangles');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector polygons","suites":["LayoutBuilder","processDocument","TODO"],"line":1352,"code":"      it.skip('should support vector polygons');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vector winding rules","suites":["LayoutBuilder","processDocument","TODO"],"line":1353,"code":"      it.skip('should support vector winding rules');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support colors","suites":["LayoutBuilder","processDocument","TODO"],"line":1354,"code":"      it.skip('should support colors');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support table styling","suites":["LayoutBuilder","processDocument","TODO"],"line":1355,"code":"      it.skip('should support table styling');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support subtables","suites":["LayoutBuilder","processDocument","TODO"],"line":1356,"code":"      it.skip('should support subtables');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support page headers","suites":["LayoutBuilder","processDocument","TODO"],"line":1357,"code":"      it.skip('should support page headers');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support page footers","suites":["LayoutBuilder","processDocument","TODO"],"line":1358,"code":"      it.skip('should support page footers');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support current page number","suites":["LayoutBuilder","processDocument","TODO"],"line":1359,"code":"      it.skip('should support current page number');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support images","suites":["LayoutBuilder","processDocument","TODO"],"line":1360,"code":"      it.skip('should support images');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support image scaling","suites":["LayoutBuilder","processDocument","TODO"],"line":1361,"code":"      it.skip('should support image scaling');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support various page sizes","suites":["LayoutBuilder","processDocument","TODO"],"line":1362,"code":"      it.skip('should support various page sizes');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support subtable headers","suites":["LayoutBuilder","processDocument","TODO"],"line":1367,"code":"      it.skip('should support subtable headers');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support tables with percentage column widths","suites":["LayoutBuilder","processDocument","TODO"],"line":1368,"code":"      it.skip('should support tables with percentage column widths');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support inline margins","suites":["LayoutBuilder","processDocument","TODO"],"line":1369,"code":"      it.skip('should support inline margins');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support padding","suites":["LayoutBuilder","processDocument","TODO"],"line":1370,"code":"      it.skip('should support padding');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support border styling","suites":["LayoutBuilder","processDocument","TODO"],"line":1371,"code":"      it.skip('should support border styling');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support subscript","suites":["LayoutBuilder","processDocument","TODO"],"line":1372,"code":"      it.skip('should support subscript');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support superscript","suites":["LayoutBuilder","processDocument","TODO"],"line":1373,"code":"      it.skip('should support superscript');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support vertical alignment inside cells","suites":["LayoutBuilder","processDocument","TODO"],"line":1374,"code":"      it.skip('should support vertical alignment inside cells');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support programmatic cell styling","suites":["LayoutBuilder","processDocument","TODO"],"line":1375,"code":"      it.skip('should support programmatic cell styling');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support non-breaking-spaces","suites":["LayoutBuilder","processDocument","TODO"],"line":1376,"code":"      it.skip('should support non-breaking-spaces');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support non-breaking-lines","suites":["LayoutBuilder","processDocument","TODO"],"line":1377,"code":"      it.skip('should support non-breaking-lines');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support page count","suites":["LayoutBuilder","processDocument","TODO"],"line":1378,"code":"      it.skip('should support page count');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support clipping","suites":["LayoutBuilder","processDocument","TODO"],"line":1379,"code":"      it.skip('should support clipping');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support absolute positioning","suites":["LayoutBuilder","processDocument","TODO"],"line":1380,"code":"      it.skip('should support absolute positioning');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support text continuations","suites":["LayoutBuilder","processDocument","TODO"],"line":1381,"code":"      it.skip('should support text continuations');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support line-height","suites":["LayoutBuilder","processDocument","TODO"],"line":1382,"code":"      it.skip('should support line-height');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support programmatic styling","suites":["LayoutBuilder","processDocument","TODO"],"line":1383,"code":"      it.skip('should support programmatic styling');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support line filling action","suites":["LayoutBuilder","processDocument","TODO"],"line":1384,"code":"      it.skip('should support line filling action');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should render lines to pdf in a single call if style is the same","suites":["LayoutBuilder","processDocument","TODO"],"line":1385,"code":"      it.skip('should render lines to pdf in a single call if style is the same');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support document encryption","suites":["LayoutBuilder","processDocument","TODO"],"line":1386,"code":"      it.skip('should support document encryption');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support document permissions","suites":["LayoutBuilder","processDocument","TODO"],"line":1387,"code":"      it.skip('should support document permissions');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support in-document-references","suites":["LayoutBuilder","processDocument","TODO"],"line":1388,"code":"      it.skip('should support in-document-references');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support uppercase text transforms","suites":["LayoutBuilder","processDocument","TODO"],"line":1389,"code":"      it.skip('should support uppercase text transforms');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should support lowercase text transforms","suites":["LayoutBuilder","processDocument","TODO"],"line":1390,"code":"      it.skip('should support lowercase text transforms');","file":"unit/LayoutBuilder.spec.js","skipped":true,"dir":"tests"},{"name":"should return an empty array if no page breaks occur","suites":["LayoutBuilder","processRow"],"updatePoint":{"line":1452,"column":60,"index":55459},"line":1452,"code":"    it('should return an empty array if no page breaks occur', function () {\n      var doc = createTable(1, 0);\n      var result = builder2.processRow(doc.table.body[0], doc.table.widths, doc._offsets.offsets, doc.table.body, 0);\n      assert(result.pageBreaks instanceof Array);\n      assert.equal(result.pageBreaks.length, 0);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"on page break should return an entry with ending/starting positions","suites":["LayoutBuilder","processRow"],"updatePoint":{"line":1458,"column":75,"index":55811},"line":1458,"code":"    it('on page break should return an entry with ending/starting positions', function () {\n      var doc = createTable(0, 1, 10, 5);\n      var result = builder2.processRow(doc.table.body[0], doc.table.widths, doc._offsets.offsets, doc.table.body, 0);\n      assert(result.pageBreaks instanceof Array);\n      assert.equal(result.pageBreaks.length, 1);\n      assert.equal(result.pageBreaks[0].prevPage, 0);\n      assert.equal(result.pageBreaks[0].prevY, 40 + 12 * 5);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"on multi-pass page break (columns or table columns) should treat bottom-most page-break as the ending position ","suites":["LayoutBuilder","processRow"],"updatePoint":{"line":1466,"column":119,"index":56329},"line":1466,"code":"    it('on multi-pass page break (columns or table columns) should treat bottom-most page-break as the ending position ', function () {\n      var doc = createTable(0, 1, 10, 5, 7);\n      var result = builder2.processRow(doc.table.body[0], doc.table.widths, doc._offsets.offsets, doc.table.body, 0);\n      assert.equal(result.pageBreaks[0].prevY, 40 + 12 * 7);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"on multiple page breaks (more than 2 pages), should return all entries with ending/starting positions","suites":["LayoutBuilder","processRow"],"updatePoint":{"line":1471,"column":109,"index":56687},"line":1471,"code":"    it('on multiple page breaks (more than 2 pages), should return all entries with ending/starting positions', function () {\n      var doc = createTable(0, 1, 100, 90);\n      var result = builder2.processRow(doc.table.body[0], doc.table.widths, doc._offsets.offsets, doc.table.body, 0);\n      assert(result.pageBreaks instanceof Array);\n      assert.equal(result.pageBreaks.length, 2);\n      assert.equal(result.pageBreaks[0].prevPage, 0);\n      assert.equal(result.pageBreaks[0].prevY, 40 + 60 * 12);\n      assert.equal(result.pageBreaks[1].prevPage, 1);\n      assert.equal(result.pageBreaks[1].prevY, 40 + (90 - 60) * 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"on multiple and multi-pass page breaks should calculate bottom-most endings for every page","suites":["LayoutBuilder","processRow"],"updatePoint":{"line":1481,"column":98,"index":57310},"line":1481,"code":"    it('on multiple and multi-pass page breaks should calculate bottom-most endings for every page', function () {\n      var doc = createTable(0, 1, 100, 90, 92);\n      var result = builder2.processRow(doc.table.body[0], doc.table.widths, doc._offsets.offsets, doc.table.body, 0);\n      assert(result.pageBreaks instanceof Array);\n      assert.equal(result.pageBreaks.length, 2);\n      assert.equal(result.pageBreaks[0].prevPage, 0);\n      assert.equal(result.pageBreaks[0].prevY, 40 + 60 * 12);\n      assert.equal(result.pageBreaks[1].prevPage, 1);\n      assert.equal(result.pageBreaks[1].prevY, 40 + (92 - 60) * 12);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the current page, page count and page size","suites":["LayoutBuilder","dynamic header/footer"],"updatePoint":{"line":1498,"column":65,"index":58195},"line":1498,"code":"    it('should provide the current page, page count and page size', function () {\n      docStructure = ['Text'];\n      header = sinon.spy();\n      footer = sinon.spy();\n      background = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      var pageSize = {\n        width: 400,\n        height: 800,\n        orientation: 'portrait'\n      };\n      assert.equal(header.getCall(0).args[0], 1);\n      assert.equal(header.getCall(0).args[1], 1);\n      assert.deepEqual(header.getCall(0).args[2], pageSize);\n      assert.equal(footer.getCall(0).args[0], 1);\n      assert.equal(footer.getCall(0).args[1], 1);\n      assert.deepEqual(footer.getCall(0).args[2], pageSize);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the current page and page size","suites":["LayoutBuilder","dynamic background"],"updatePoint":{"line":1523,"column":53,"index":59259},"line":1523,"code":"    it('should provide the current page and page size', function () {\n      docStructure = ['Text'];\n      background = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      var pageSize = {\n        width: 400,\n        height: 800,\n        orientation: 'portrait'\n      };\n      assert.equal(background.getCall(0).args[0], 1);\n      assert.deepEqual(background.getCall(0).args[1], pageSize);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should create a pageBreak before","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1542,"column":40,"index":60059},"line":1542,"code":"    it('should create a pageBreak before', function () {\n      docStructure = [{\n        text: 'Text 1',\n        id: 'text1'\n      }, {\n        text: 'Text 2',\n        id: 'text2'\n      }];\n      pageBreakBeforeFunction = function (node) {\n        return node.id === 'text1';\n      };\n      var pages = builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.equal(pages.length, 2);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should not check for page break if a page break is already specified","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1556,"column":76,"index":60589},"line":1556,"code":"    it('should not check for page break if a page break is already specified', function () {\n      docStructure = {\n        stack: [{\n          text: 'Text 1',\n          id: 'text1'\n        }, {\n          text: 'Text 2',\n          id: 'text2',\n          pageBreak: 'before'\n        }],\n        id: 'stack'\n      };\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert(pageBreakBeforeFunction.calledTwice);\n      assert.equal(pageBreakBeforeFunction.getCall(0).args[0].id, 'stack');\n      assert.deepEqual({\n        id: pageBreakBeforeFunction.getCall(1).args[0].id,\n        text: pageBreakBeforeFunction.getCall(1).args[0].text\n      }, {\n        id: 'text1',\n        text: 'Text 1'\n      });\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the list of following nodes on the same page","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1580,"column":67,"index":61438},"line":1580,"code":"    it('should provide the list of following nodes on the same page', function () {\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1'\n      }, {\n        text: 'Text 2 (Page 1)',\n        id: 'text2'\n      }, {\n        text: 'Text 3 (Page 1)',\n        id: 'text3'\n      }, {\n        text: 'Text 4 (Page 2)',\n        id: 'text4',\n        pageBreak: 'before'\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(1).args[1].getFollowingNodesOnPage().map(item => item.id), ['text2', 'text3']);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the list of nodes on the next page","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1599,"column":57,"index":62160},"line":1599,"code":"    it('should provide the list of nodes on the next page', function () {\n      docStructure = {\n        stack: [{\n          text: 'Text 1 (Page 1)',\n          id: 'text1',\n          pageBreak: 'after'\n        }, {\n          text: 'Text 2 (Page 1)',\n          id: 'text2'\n        }, {\n          text: 'Text 3 (Page 1)',\n          id: 'text3'\n        }, {\n          text: 'Text 4 (Page 1)',\n          id: 'text4'\n        }],\n        id: 'stack'\n      };\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(0).args[1].getNodesOnNextPage().map(item => item.id), ['text2', 'text3', 'text4']);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the list of previous nodes on the same page","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1621,"column":66,"index":62966},"line":1621,"code":"    it('should provide the list of previous nodes on the same page', function () {\n      docStructure = {\n        stack: [{\n          text: 'Text 1 (Page 1)',\n          id: 'text1',\n          pageBreak: 'after'\n        }, {\n          text: 'Text 2 (Page 1)',\n          id: 'text2'\n        }, {\n          text: 'Text 3 (Page 1)',\n          id: 'text3'\n        }, {\n          text: 'Text 4 (Page 1)',\n          id: 'text4'\n        }],\n        id: 'stack'\n      };\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(4).args[1].getPreviousNodesOnPage().map(item => item.id), ['stack', 'text2', 'text3']);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the pages of the node","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1643,"column":44,"index":63754},"line":1643,"code":"    it('should provide the pages of the node', function () {\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1'\n      }, {\n        text: 'Text 2 (Page 1)',\n        id: 'text2'\n      }, {\n        text: 'Text 3 (Page 1)',\n        id: 'text3'\n      }, {\n        text: 'Text 4 (Page 2)',\n        id: 'text4',\n        pageBreak: 'before'\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.equal(pageBreakBeforeFunction.getCall(0).args[0].pages, 2);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the headlineLevel of the node","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1662,"column":52,"index":64409},"line":1662,"code":"    it('should provide the headlineLevel of the node', function () {\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1',\n        headlineLevel: 6\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.equal(pageBreakBeforeFunction.getCall(1).args[0].headlineLevel, 6);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the position of the node","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1672,"column":47,"index":64872},"line":1672,"code":"    it('should provide the position of the node', function () {\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1'\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(0).args[0].startPosition, {\n        pageNumber: 1,\n        left: 40,\n        top: 40,\n        verticalRatio: 0,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 720,\n        pageInnerWidth: 320\n      });\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide the pageOrientation of the node","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1690,"column":54,"index":65535},"line":1690,"code":"    it('should provide the pageOrientation of the node', function () {\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1',\n        pageOrientation: 'landscape',\n        style: 'super-text'\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(1).args[0].pageOrientation, 'landscape');\n      assert.deepEqual(pageBreakBeforeFunction.getCall(1).args[0].style, 'super-text');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should work with all specified elements","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1702,"column":47,"index":66143},"line":1702,"code":"    it('should work with all specified elements', function () {\n      docStructure = [{\n        text: '',\n        id: 'not-called-because-empty'\n      }, {\n        text: 'Text 1 (Page 1)',\n        id: 'text'\n      }, {\n        id: 'table',\n        table: {\n          body: [[{\n            text: 'Column 1 (Page 1)'\n          }]]\n        }\n      }, {\n        id: 'ul',\n        ul: [{\n          text: 'ul Item',\n          id: 'ul-item'\n        }]\n      }, {\n        id: 'ol',\n        ol: [{\n          text: 'ol Item',\n          id: 'ol-item'\n        }]\n      }, {\n        id: 'image',\n        image: 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAABAAEDAREAAhEBAxEB/8QAFAABAAAAAAAAAAAAAAAAAAAACP/EABQBAQAAAAAAAAAAAAAAAAAAAAX/2gAMAwEAAhADEAAAATY4f//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAQUCf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Bf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Bf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEABj8Cf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8hf//aAAwDAQACAAMAAAAQn//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Qf//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Qf//EABQQAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQEAAT8Qf//Z'\n      }, {\n        id: 'qr',\n        qr: 'http://www.thoughtworks.com/join'\n      }, {\n        id: 'canvas',\n        canvas: [{\n          type: 'rect',\n          x: 0,\n          y: 0,\n          w: 10,\n          h: 10\n        }]\n      }, {\n        id: 'columns',\n        columns: [{\n          text: 'column item',\n          id: 'column-item'\n        }]\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      function validateCalled(callIndex, nodeType, id) {\n        var nodeInfo = pageBreakBeforeFunction.getCall(callIndex).args[0];\n        assert.equal(nodeInfo.id, id);\n        assert(nodeInfo[nodeType], 'node type accessor ' + nodeType + ' not defined');\n        assert(isObject(nodeInfo.startPosition), 'start position is not an object but ' + toString(nodeInfo.startPosition));\n        assert(isArray(nodeInfo.pageNumbers), 'page numbers is not an array but ' + toString(nodeInfo.pageNumbers));\n      }\n      var textIndex = 1;\n      validateCalled(textIndex, 'text', 'text');\n      var tableIndex = textIndex + 1;\n      validateCalled(tableIndex, 'table', 'table');\n      var ulIndex = tableIndex + 2;\n      validateCalled(ulIndex, 'ul', 'ul');\n      validateCalled(ulIndex + 1, 'text', 'ul-item');\n      var olIndex = ulIndex + 2;\n      validateCalled(olIndex, 'ol', 'ol');\n      validateCalled(olIndex + 1, 'text', 'ol-item');\n      var imageIndex = olIndex + 2;\n      validateCalled(imageIndex, 'image', 'image');\n      var qrIndex = imageIndex + 1;\n      validateCalled(qrIndex, 'qr', 'qr');\n      var canvasIndex = qrIndex + 1;\n      validateCalled(canvasIndex, 'canvas', 'canvas');\n      var columnIndex = canvasIndex + 1;\n      validateCalled(columnIndex, 'columns', 'columns');\n      validateCalled(columnIndex + 1, 'text', 'column-item');\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should provide all page numbers of the node","suites":["LayoutBuilder","dynamic page break control"],"updatePoint":{"line":1779,"column":51,"index":69412},"line":1779,"code":"    it('should provide all page numbers of the node', function () {\n      var eightyLineBreaks = new Array(80).join(\"\\n\");\n      docStructure = [{\n        text: 'Text 1 (Page 1)',\n        id: 'text1'\n      }, {\n        text: 'Text 2 (Page 1 & 2)' + eightyLineBreaks,\n        id: 'text2'\n      }, {\n        text: 'Text 3 (Page 2)',\n        id: 'text3'\n      }];\n      pageBreakBeforeFunction = sinon.spy();\n      builder.layoutDocument(docStructure, pdfDocument, styleDictionary, defaultStyle, background, header, footer, watermark, pageBreakBeforeFunction);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(1).args[0].pageNumbers, [1]);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(2).args[0].pageNumbers, [1, 2]);\n      assert.deepEqual(pageBreakBeforeFunction.getCall(3).args[0].pageNumbers, [2]);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should render empty ToC","suites":["LayoutBuilder","table of content"],"updatePoint":{"line":1799,"column":31,"index":70267},"line":1799,"code":"    it('should render empty ToC', function () {\n      var desc = [{\n        toc: {\n          title: {\n            text: 'INDEX'\n          }\n        }\n      }];\n      var pages = builder.layoutDocument(desc, sampleTestProvider);\n      assert.equal(pages.length, 1);\n    });","file":"unit/LayoutBuilder.spec.js","skipped":false,"dir":"tests"},{"name":"should set leadingCut when adding first inline","suites":["Line","addInline"],"updatePoint":{"line":7,"column":54,"index":216},"line":7,"code":"    it('should set leadingCut when adding first inline', function () {\n      var line = new Line(100);\n      assert.equal(line.leadingCut, 0);\n      line.addInline({\n        width: 30,\n        leadingCut: 20\n      });\n      assert.equal(line.leadingCut, 20);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should not set leadingCut when adding following inlines","suites":["Line","addInline"],"updatePoint":{"line":16,"column":63,"index":492},"line":16,"code":"    it('should not set leadingCut when adding following inlines', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30,\n        leadingCut: 20\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 20\n      });\n      assert.equal(line.leadingCut, 20);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set trailingCut everytime inline is added","suites":["Line","addInline"],"updatePoint":{"line":28,"column":56,"index":796},"line":28,"code":"    it('should set trailingCut everytime inline is added', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30,\n        trailingCut: 20\n      });\n      assert.equal(line.trailingCut, 20);\n      line.addInline({\n        width: 30,\n        trailingCut: 22\n      });\n      assert.equal(line.trailingCut, 22);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to 0 for first inline if there is no left-trimming (leadingCut)","suites":["Line","addInline"],"updatePoint":{"line":41,"column":84,"index":1173},"line":41,"code":"    it('should set x to 0 for first inline if there is no left-trimming (leadingCut)', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 0,\n        trailingCut: 20\n      });\n      assert.equal(line.inlines[0].x, 0);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to sum of preceding inline widths if there is no left-trimming","suites":["Line","addInline"],"updatePoint":{"line":50,"column":83,"index":1454},"line":50,"code":"    it('should set x to sum of preceding inline widths if there is no left-trimming', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 0,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 0,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 10,\n        leadingCut: 0,\n        trailingCut: 0\n      });\n      assert.equal(line.inlines[0].x, 0);\n      assert.equal(line.inlines[1].x, 40);\n      assert.equal(line.inlines[2].x, 80);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to -leadingCut for first inline when its left-trimmed","suites":["Line","addInline"],"updatePoint":{"line":71,"column":74,"index":2007},"line":71,"code":"    it('should set x to -leadingCut for first inline when its left-trimmed', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 10,\n        trailingCut: 20\n      });\n      assert.equal(line.inlines[0].x, -10);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to 0 for second inline if first inline is fully trimmed (cut)","suites":["Line","addInline"],"updatePoint":{"line":80,"column":82,"index":2290},"line":80,"code":"    it('should set x to 0 for second inline if first inline is fully trimmed (cut)', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 40,\n        trailingCut: 40\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 20,\n        trailingCut: 20\n      });\n      assert.equal(line.inlines[1].x, 0);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should set x to sum of preceding inline widths minus first inline leadingCut","suites":["Line","addInline"],"updatePoint":{"line":94,"column":84,"index":2673},"line":94,"code":"    it('should set x to sum of preceding inline widths minus first inline leadingCut', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 30,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 0,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 10,\n        leadingCut: 0,\n        trailingCut: 0\n      });\n      assert.equal(line.inlines[2].x, 80 - 30);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should not subtract leadingCuts other than from the first inline when setting x","suites":["Line","addInline"],"updatePoint":{"line":113,"column":87,"index":3160},"line":113,"code":"    it('should not subtract leadingCuts other than from the first inline when setting x', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 30,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 10,\n        trailingCut: 0\n      });\n      line.addInline({\n        width: 10,\n        leadingCut: 5,\n        trailingCut: 0\n      });\n      assert.equal(line.inlines[2].x, 80 - 30);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should ignore trailingCuts when setting x","suites":["Line","addInline"],"updatePoint":{"line":132,"column":49,"index":3610},"line":132,"code":"    it('should ignore trailingCuts when setting x', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        leadingCut: 30,\n        trailingCut: 10\n      });\n      line.addInline({\n        width: 40,\n        leadingCut: 10,\n        trailingCut: 10\n      });\n      line.addInline({\n        width: 20,\n        leadingCut: 5,\n        trailingCut: 5\n      });\n      assert.equal(line.inlines[2].x, 80 - 30);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should return sum of all inline widths","suites":["Line","getWidth"],"updatePoint":{"line":168,"column":46,"index":4407},"line":168,"code":"    it('should return sum of all inline widths', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30\n      });\n      line.addInline({\n        width: 20\n      });\n      line.addInline({\n        width: 5\n      });\n      assert.equal(line.getWidth(), 55);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should subtract first inline leadingCut (left-trimming) from total width","suites":["Line","getWidth"],"updatePoint":{"line":181,"column":80,"index":4737},"line":181,"code":"    it('should subtract first inline leadingCut (left-trimming) from total width', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30,\n        leadingCut: 20\n      });\n      line.addInline({\n        width: 20,\n        leadingCut: 10\n      });\n      line.addInline({\n        width: 5,\n        leadingCut: 3\n      });\n      assert.equal(line.getWidth(), 55 - 20);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should subtract last inline trailingCut (right-trimming) from total width","suites":["Line","getWidth"],"updatePoint":{"line":197,"column":81,"index":5144},"line":197,"code":"    it('should subtract last inline trailingCut (right-trimming) from total width', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30,\n        leadingCut: 20,\n        trailingCut: 5\n      });\n      line.addInline({\n        width: 20,\n        leadingCut: 10,\n        trailingCut: 3\n      });\n      line.addInline({\n        width: 5,\n        leadingCut: 3,\n        trailingCut: 1\n      });\n      assert.equal(line.getWidth(), 55 - 20 - 1);\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should return true if there is enough space left","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":222,"column":56,"index":5725},"line":222,"code":"    it('should return true if there is enough space left', function () {\n      var line = new Line(100);\n      assert(line.hasEnoughSpaceForInline({\n        width: 50\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should return true if line is empty, even if there is not enough space left","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":228,"column":83,"index":5938},"line":228,"code":"    it('should return true if line is empty, even if there is not enough space left', function () {\n      var line = new Line(100);\n      assert(line.hasEnoughSpaceForInline({\n        width: 170\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should return false if there is not enough space","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":234,"column":56,"index":6125},"line":234,"code":"    it('should return false if there is not enough space', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 70\n      });\n      assert(!line.hasEnoughSpaceForInline({\n        width: 40\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should take into account first inline leadingCut (left-trimming) when deciding if theres enough space","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":243,"column":109,"index":6416},"line":243,"code":"    it('should take into account first inline leadingCut (left-trimming) when deciding if theres enough space', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 70,\n        leadingCut: 20\n      });\n      assert(line.hasEnoughSpaceForInline({\n        width: 40\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should not take into account following inline leadingCuts (left-trimming) when deciding if theres enough space","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":253,"column":118,"index":6739},"line":253,"code":"    it('should not take into account following inline leadingCuts (left-trimming) when deciding if theres enough space', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 70,\n        leadingCut: 20\n      });\n      line.addInline({\n        width: 20,\n        leadingCut: 10\n      });\n      line.addInline({\n        width: 20,\n        leadingCut: 10\n      });\n      assert(!line.hasEnoughSpaceForInline({\n        width: 20,\n        leadingCut: 10\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should take into account last inline trailingCut (right-trimming) when deciding if theres enough space","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":272,"column":110,"index":7229},"line":272,"code":"    it('should take into account last inline trailingCut (right-trimming) when deciding if theres enough space', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 30\n      });\n      line.addInline({\n        width: 40\n      });\n      assert(line.hasEnoughSpaceForInline({\n        width: 50,\n        trailingCut: 20\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should not take into account previous inline trailingCuts (right-trimming) when deciding if theres enough space","suites":["Line","hasEnoughSpaceForInline"],"updatePoint":{"line":285,"column":119,"index":7605},"line":285,"code":"    it('should not take into account previous inline trailingCuts (right-trimming) when deciding if theres enough space', function () {\n      var line = new Line(100);\n      line.addInline({\n        width: 40,\n        trailingCut: 20\n      });\n      line.addInline({\n        width: 30,\n        trailingCut: 20\n      });\n      assert(!line.hasEnoughSpaceForInline({\n        width: 31\n      }));\n    });","file":"unit/Line.spec.js","skipped":false,"dir":"tests"},{"name":"should return buffer","suites":["Node interface","getBuffer"],"updatePoint":{"line":14,"column":28,"index":393},"line":14,"code":"    it('should return buffer', function () {\n      var docDefinition = {\n        content: ['First paragraph', 'Another paragraph, this time a little bit longer to make sure, this line will be divided into at least two lines']\n      };\n      var pdf = pdfmake.createPdf(docDefinition);\n      pdf.getBuffer().then(() => {\n        //\n      }, err => {\n        throw err;\n      });\n    });","file":"unit/Node-interface.spec.js","skipped":false,"dir":"tests"},{"name":"should add new lines if there's enough space left","suites":["PageElementWriter","addLine"],"updatePoint":{"line":94,"column":58,"index":2471},"line":94,"code":"    it('should add new lines if there\\'s enough space left', function () {\n      var position = addOneTenthLines(10);\n      assert.equal(ctx.pages.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 1,\n        left: MARGINS.left,\n        top: 9 / 10 * AVAILABLE_HEIGHT + MARGINS.top,\n        verticalRatio: 0.9,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add new pages if there's not enough space left","suites":["PageElementWriter","addLine"],"updatePoint":{"line":108,"column":62,"index":2944},"line":108,"code":"    it('should add new pages if there\\'s not enough space left', function () {\n      var position = addOneTenthLines(11);\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[0].items.length, 10);\n      assert.equal(ctx.pages[1].items.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 2,\n        left: MARGINS.left,\n        top: MARGINS.top,\n        verticalRatio: 0,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should subtract line height from availableHeight when adding a line and update current y position","suites":["PageElementWriter","addLine"],"updatePoint":{"line":124,"column":105,"index":3531},"line":124,"code":"    it('should subtract line height from availableHeight when adding a line and update current y position', function () {\n      pew.addLine(buildLine(40));\n      assert.equal(ctx.y, MARGINS.top + 40);\n      assert.equal(ctx.availableHeight, AVAILABLE_HEIGHT - 40);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add repeatable fragments if they exist and a new page is created before adding the line","suites":["PageElementWriter","addLine"],"updatePoint":{"line":129,"column":102,"index":3801},"line":129,"code":"    it('should add repeatable fragments if they exist and a new page is created before adding the line', function () {\n      addOneTenthLines(10);\n      assert.equal(ctx.pages.length, 1);\n      var rep = createRepeatable('rep', 30);\n      pew.repeatables.push(rep);\n      var anotherLine = buildLine(20);\n      anotherLine.marker = 'another';\n      pew.addLine(anotherLine);\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[1].items[0].item.marker, 'rep');\n      assert.equal(ctx.pages[1].items[1].item.marker, 'another');\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add the image image if something else exists on the page and there's enough space left","suites":["PageElementWriter","addImage"],"updatePoint":{"line":143,"column":102,"index":4396},"line":143,"code":"    it('should add the image image if something else exists on the page and there\\'s enough space left', function () {\n      var lineHeight = 400;\n      pew.addLine(buildLine(lineHeight));\n      var position = pew.addImage(buildImage(300));\n      assert.equal(ctx.pages.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 1,\n        left: MARGINS.left,\n        top: lineHeight + MARGINS.top,\n        verticalRatio: 0.4,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add a new page if something else exists on the page and there's not enough space left","suites":["PageElementWriter","addImage"],"updatePoint":{"line":159,"column":101,"index":4972},"line":159,"code":"    it('should add a new page if something else exists on the page and there\\'s not enough space left', function () {\n      var lineHeight = 900;\n      pew.addLine(buildLine(lineHeight));\n      var position = pew.addImage(buildImage(300));\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[0].items.length, 1);\n      assert.equal(ctx.pages[1].items.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 2,\n        left: MARGINS.left,\n        top: MARGINS.top,\n        verticalRatio: 0,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should write into the current page if it's a large image and nothing else exists on the page","suites":["PageElementWriter","addImage"],"updatePoint":{"line":177,"column":101,"index":5633},"line":177,"code":"    it('should write into the current page if it\\'s a large image and nothing else exists on the page', function () {\n      var position = pew.addImage(buildImage(2000));\n      assert.equal(ctx.pages.length, 1);\n      assert.equal(ctx.pages[0].items.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 1,\n        left: MARGINS.left,\n        top: MARGINS.top,\n        verticalRatio: 0,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should write into the a new page page if it's a large image and something else does exist on the page","suites":["PageElementWriter","addImage"],"updatePoint":{"line":192,"column":110,"index":6184},"line":192,"code":"    it('should write into the a new page page if it\\'s a large image and something else does exist on the page', function () {\n      pew.addLine(buildLine(1));\n      var position = pew.addImage(buildImage(2000));\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[0].items.length, 1);\n      assert.equal(ctx.pages[1].items.length, 1);\n      assert.deepEqual(position, {\n        pageNumber: 2,\n        left: MARGINS.left,\n        top: MARGINS.top,\n        verticalRatio: 0,\n        horizontalRatio: 0,\n        pageOrientation: 'portrait',\n        pageInnerHeight: 1000,\n        pageInnerWidth: 500\n      });\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should begin a new transaction only once","suites":["PageElementWriter","beginUnbreakableBlock"],"updatePoint":{"line":211,"column":48,"index":6812},"line":211,"code":"    it('should begin a new transaction only once', function () {\n      assert(pew.transactionLevel === 0);\n      pew.beginUnbreakableBlock();\n      var transactionCtx = pew.transactionContext;\n      pew.beginUnbreakableBlock();\n      assert.equal(transactionCtx, pew.transactionContext);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should make all further calls to addLine add lines to the transaction context instead of the page","suites":["PageElementWriter","beginUnbreakableBlock"],"updatePoint":{"line":218,"column":105,"index":7165},"line":218,"code":"    it('should make all further calls to addLine add lines to the transaction context instead of the page', function () {\n      pew.beginUnbreakableBlock();\n      pew.addLine(buildLine(30));\n      pew.addLine(buildLine(30));\n      var uCtx = pew.context();\n      assert.equal(ctx.pages.length, 1);\n      assert.equal(ctx.pages[0].items.length, 0);\n      assert.equal(uCtx.pages.length, 1);\n      assert.equal(uCtx.pages[0].items.length, 2);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should commit transaction if it was called exactly the same number of time as beginUnbreakableBlock","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":230,"column":107,"index":7673},"line":230,"code":"    it('should commit transaction if it was called exactly the same number of time as beginUnbreakableBlock', function () {\n      pew.beginUnbreakableBlock();\n      pew.beginUnbreakableBlock();\n      pew.addLine(buildLine(30));\n      pew.commitUnbreakableBlock();\n      assert.equal(ctx.pages.length, 1);\n      assert.equal(ctx.pages[0].items.length, 0);\n      pew.commitUnbreakableBlock();\n      assert.equal(ctx.pages[0].items.length, 1);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should copy all elements to the current page if there's enough space for the whole block","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":240,"column":97,"index":8112},"line":240,"code":"    it('should copy all elements to the current page if there\\'s enough space for the whole block', function () {\n      pew.addLine(buildLine(30));\n      pew.beginUnbreakableBlock();\n      pew.addLine(buildLine(30));\n      pew.addLine(buildLine(30));\n      assert.equal(ctx.pages[0].items.length, 1);\n      pew.commitUnbreakableBlock();\n      assert.equal(ctx.pages[0].items.length, 3);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add a new page and copy elements there if there's not enough space on the current page","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":249,"column":102,"index":8512},"line":249,"code":"    it('should add a new page and copy elements there if there\\'s not enough space on the current page', function () {\n      addOneTenthLines(8);\n      pew.beginUnbreakableBlock();\n      addOneTenthLines(3);\n      pew.commitUnbreakableBlock();\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[0].items.length, 8);\n      assert.equal(ctx.pages[1].items.length, 3);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should move elements to the top of the page if they are added to a new page","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":258,"column":83,"index":8886},"line":258,"code":"    it('should move elements to the top of the page if they are added to a new page', function () {\n      addOneTenthLines(8);\n      pew.beginUnbreakableBlock();\n      addOneTenthLines(3);\n      pew.commitUnbreakableBlock();\n      assert.equal(ctx.pages[1].items[0].item.x, MARGINS.left);\n      assert.equal(ctx.pages[1].items[0].item.y, MARGINS.top);\n      assert.equal(ctx.pages[1].items[1].item.x, MARGINS.left);\n      assert.equal(ctx.pages[1].items[1].item.y, MARGINS.top + AVAILABLE_HEIGHT / 10);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add lines below any repeatable fragments if they exist and a new page is created","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":268,"column":95,"index":9409},"line":268,"code":"    it('should add lines below any repeatable fragments if they exist and a new page is created', function () {\n      addOneTenthLines(10);\n      assert.equal(ctx.pages.length, 1);\n      var rep = createRepeatable('rep', 50);\n      pew.repeatables.push(rep);\n      var anotherLine = buildLine(20);\n      anotherLine.marker = 'another';\n      pew.addLine(anotherLine);\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[1].items[0].item.marker, 'rep');\n      assert.equal(ctx.pages[1].items[1].item.marker, 'another');\n      assert.equal(ctx.pages[1].items[1].item.x, MARGINS.left);\n      assert.equal(ctx.pages[1].items[1].item.y, MARGINS.top + 50);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should make all further calls to addLine add lines again to the page when transaction finishes","suites":["PageElementWriter","commitUnbreakableBlock"],"updatePoint":{"line":282,"column":102,"index":10093},"line":282,"code":"    it('should make all further calls to addLine add lines again to the page when transaction finishes', function () {\n      pew.beginUnbreakableBlock();\n      pew.commitUnbreakableBlock();\n      pew.addLine(buildLine(30));\n      assert.equal(ctx.pages.length, 1);\n      assert.equal(ctx.pages[0].items.length, 1);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should return a copy of all elements from unbreakableBlock","suites":["PageElementWriter","currentBlockToRepeatable"],"updatePoint":{"line":291,"column":66,"index":10439},"line":291,"code":"    it('should return a copy of all elements from unbreakableBlock', function () {\n      pew.beginUnbreakableBlock();\n      pew.addLine(buildLine(30));\n      pew.addLine(buildLine(30));\n      var rep = pew.currentBlockToRepeatable();\n      pew.pushToRepeatables(rep);\n      assert.equal(rep.items.length, 2);\n      pew.addLine(buildLine(30));\n      assert.equal(rep.items.length, 2);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add a repeatable fragment to the top","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":303,"column":51,"index":10870},"line":303,"code":"    it('should add a repeatable fragment to the top', function () {\n      addOneTenthLines(6);\n      pew.beginUnbreakableBlock();\n      var uCtx = pew.context();\n      addOneTenthLines(3);\n      uCtx.pages[0].items.forEach(function (item) {\n        item.item.marker = 'rep';\n      });\n      var rep = pew.currentBlockToRepeatable();\n      pew.pushToRepeatables(rep);\n      pew.commitUnbreakableBlock();\n      addOneTenthLines(3);\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[0].items.length, 10);\n      assert.equal(ctx.pages[0].items[6].item.marker, 'rep');\n      assert.equal(ctx.pages[0].items[7].item.marker, 'rep');\n      assert.equal(ctx.pages[0].items[8].item.marker, 'rep');\n      assert(!ctx.pages[0].items[9].item.marker);\n      assert.equal(ctx.pages[1].items[0].item.marker, 'rep');\n      assert.equal(ctx.pages[1].items[1].item.marker, 'rep');\n      assert.equal(ctx.pages[1].items[2].item.marker, 'rep');\n      assert.equal(ctx.pages[1].items[2].item.y, MARGINS.top + 2 * AVAILABLE_HEIGHT / 10);\n      assert(!ctx.pages[1].items[3].item.marker);\n      assert.equal(ctx.pages[1].items[3].item.y, ctx.pages[1].items[2].item.y + AVAILABLE_HEIGHT / 10);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add a repeatable fragment to the top when reusing page only once","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":328,"column":79,"index":12095},"line":328,"code":"    it('should add a repeatable fragment to the top when reusing page only once', function () {\n      // TODO\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should add repeatable fragments in the same order they have been added to the repeatable fragments collection","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":331,"column":117,"index":12251},"line":331,"code":"    it('should add repeatable fragments in the same order they have been added to the repeatable fragments collection', function () {\n      addOneTenthLines(9);\n      pew.repeatables.push(createRepeatable('rep1', 50));\n      pew.repeatables.push(createRepeatable('rep2', 60));\n      addOneTenthLines(2);\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.pages[1].items.length, 3);\n      assert.equal(ctx.pages[1].items[0].item.marker, 'rep1');\n      assert.equal(ctx.pages[1].items[0].item.y, MARGINS.top);\n      assert.equal(ctx.pages[1].items[1].item.marker, 'rep2');\n      assert.equal(ctx.pages[1].items[1].item.y, MARGINS.top + 50);\n      assert(!ctx.pages[1].items[2].item.marker);\n      assert.equal(ctx.pages[1].items[2].item.y, MARGINS.top + 50 + 60);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should switch width and height if page changes from portrait to landscape","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":345,"column":81,"index":12998},"line":345,"code":"    it('should switch width and height if page changes from portrait to landscape', function () {\n      addOneTenthLines(6);\n      assert.equal(ctx.getCurrentPage().pageSize.width, DOCUMENT_WIDTH);\n      assert.equal(ctx.getCurrentPage().pageSize.height, DOCUMENT_HEIGHT);\n      assert.equal(ctx.getCurrentPage().pageSize.orientation, DOCUMENT_ORIENTATION);\n      pew.moveToNextPage('landscape');\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.getCurrentPage().pageSize.width, DOCUMENT_HEIGHT);\n      assert.equal(ctx.getCurrentPage().pageSize.height, DOCUMENT_WIDTH);\n      assert.equal(ctx.getCurrentPage().pageSize.orientation, 'landscape');\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should switch width and height if page changes from landscape to portrait","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":356,"column":81,"index":13668},"line":356,"code":"    it('should switch width and height if page changes from landscape to portrait', function () {\n      ctx.getCurrentPage().pageSize.orientation = 'landscape';\n      ctx.getCurrentPage().pageSize.width = DOCUMENT_WIDTH;\n      ctx.getCurrentPage().pageSize.height = DOCUMENT_HEIGHT;\n      addOneTenthLines(6);\n      pew.moveToNextPage('portrait');\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.getCurrentPage().pageSize.width, DOCUMENT_HEIGHT);\n      assert.equal(ctx.getCurrentPage().pageSize.height, DOCUMENT_WIDTH);\n      assert.equal(ctx.getCurrentPage().pageSize.orientation, 'portrait');\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should not switch width and height if page changes from landscape to landscape","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":367,"column":86,"index":14293},"line":367,"code":"    it('should not switch width and height if page changes from landscape to landscape', function () {\n      ctx.pageOrientation = undefined;\n      addOneTenthLines(6);\n      pew.moveToNextPage('landscape');\n      pew.moveToNextPage('landscape');\n      assert.equal(ctx.pages.length, 3);\n      assert.equal(ctx.getCurrentPage().pageSize.width, DOCUMENT_HEIGHT);\n      assert.equal(ctx.getCurrentPage().pageSize.height, DOCUMENT_WIDTH);\n      assert.equal(ctx.getCurrentPage().pageSize.orientation, 'landscape');\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should create new page","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":377,"column":30,"index":14757},"line":377,"code":"    it('should create new page', function () {\n      addOneTenthLines(1);\n      pew.moveToNextPage();\n      assert.equal(ctx.pages.length, 2);\n      assert.equal(ctx.y, MARGINS.top);\n      assert.equal(ctx.availableHeight, AVAILABLE_HEIGHT);\n      assert.equal(ctx.availableWidth, AVAILABLE_WIDTH);\n      assert.equal(pew.emit.callCount, 2); // move to first page to write a line, and then move to next page\n      assert.deepEqual(pew.emit.getCall(1).args, ['pageChanged', {\n        prevPage: 0,\n        prevY: MARGINS.top + AVAILABLE_HEIGHT / 10,\n        y: MARGINS.top\n      }]);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"should use existing page","suites":["PageElementWriter","creating a new page"],"updatePoint":{"line":391,"column":32,"index":15349},"line":391,"code":"    it('should use existing page', function () {\n      addOneTenthLines(1);\n      ctx.pages.push({\n        items: [],\n        pageSize: pageSize\n      });\n      ctx.availableWidth = 'garbage';\n      ctx.availableHeight = 'garbage';\n      pew.moveToNextPage();\n      assert.equal(ctx.page, 1);\n      assert.equal(ctx.y, MARGINS.top);\n      assert.equal(ctx.availableHeight, AVAILABLE_HEIGHT);\n      assert.equal(ctx.availableWidth, AVAILABLE_WIDTH);\n      assert.equal(pew.emit.callCount, 2);\n      assert.deepEqual(pew.emit.getCall(1).args, ['pageChanged', {\n        prevPage: 0,\n        prevY: MARGINS.top + AVAILABLE_HEIGHT / 10,\n        y: MARGINS.top\n      }]);\n    });","file":"unit/PageElementWriter.spec.js","skipped":false,"dir":"tests"},{"name":"throws error when given font not present","suites":["PDFDocument","provideFont"],"updatePoint":{"line":19,"column":48,"index":602},"line":19,"code":"    it('throws error when given font not present', function () {\n      assert.throws(function () {\n        pdfDocument.provideFont('Arial', true, false);\n      }, function (error) {\n        assert.equal(error.message, `Font 'Arial' in style 'bold' is not defined in the font section of the document definition.`);\n        return true;\n      });\n    });","file":"unit/PDFDocument.spec.js","skipped":false,"dir":"tests"},{"name":"should provide normal Roboto font","suites":["PDFDocument","provideFont"],"updatePoint":{"line":27,"column":41,"index":948},"line":27,"code":"    it('should provide normal Roboto font', function () {\n      var result = pdfDocument.provideFont('Roboto', false, false);\n      assert.equal(result.font.postscriptName, 'Roboto-Regular');\n    });","file":"unit/PDFDocument.spec.js","skipped":false,"dir":"tests"},{"name":"should provide bold Roboto font","suites":["PDFDocument","provideFont"],"updatePoint":{"line":31,"column":39,"index":1146},"line":31,"code":"    it('should provide bold Roboto font', function () {\n      var result = pdfDocument.provideFont('Roboto', true, false);\n      assert.equal(result.font.postscriptName, 'Roboto-Medium');\n    });","file":"unit/PDFDocument.spec.js","skipped":false,"dir":"tests"},{"name":"should provide italics Roboto font","suites":["PDFDocument","provideFont"],"updatePoint":{"line":35,"column":42,"index":1345},"line":35,"code":"    it('should provide italics Roboto font', function () {\n      var result = pdfDocument.provideFont('Roboto', false, true);\n      assert.equal(result.font.postscriptName, 'Roboto-Italic');\n    });","file":"unit/PDFDocument.spec.js","skipped":false,"dir":"tests"},{"name":"should provide bold and italics Roboto font","suites":["PDFDocument","provideFont"],"updatePoint":{"line":39,"column":51,"index":1553},"line":39,"code":"    it('should provide bold and italics Roboto font', function () {\n      var result = pdfDocument.provideFont('Roboto', true, true);\n      assert.equal(result.font.postscriptName, 'Roboto-MediumItalic');\n    });","file":"unit/PDFDocument.spec.js","skipped":false,"dir":"tests"},{"name":"should pass switched width and height to pdfkit if page orientation changes from default portrait to landscape","suites":["Printer"],"updatePoint":{"line":19,"column":116,"index":632},"line":19,"code":"  it('should pass switched width and height to pdfkit if page orientation changes from default portrait to landscape', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageSize: {\n        width: SHORT_SIDE,\n        height: LONG_SIDE\n      },\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert(PDFDocument.prototype.addPage.callCount === 2);\n    assert.equal(PDFDocument.prototype.addPage.firstCall.args[0], undefined);\n    assert.deepEqual(PDFDocument.prototype.addPage.secondCall.args[0].size, [LONG_SIDE, SHORT_SIDE]);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should pass switched width and height to pdfkit if page orientation changes from portrait to landscape","suites":["Printer"],"updatePoint":{"line":39,"column":108,"index":1371},"line":39,"code":"  it('should pass switched width and height to pdfkit if page orientation changes from portrait to landscape', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageOrientation: 'portrait',\n      pageSize: {\n        width: SHORT_SIDE,\n        height: LONG_SIDE\n      },\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert(PDFDocument.prototype.addPage.callCount === 2);\n    assert.equal(PDFDocument.prototype.addPage.firstCall.args[0], undefined);\n    assert.deepEqual(PDFDocument.prototype.addPage.secondCall.args[0].size, [LONG_SIDE, SHORT_SIDE]);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should pass switched width and height to pdfkit if page orientation changes from landscape to portrait","suites":["Printer"],"updatePoint":{"line":60,"column":108,"index":2145},"line":60,"code":"  it('should pass switched width and height to pdfkit if page orientation changes from landscape to portrait', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageOrientation: 'landscape',\n      pageSize: {\n        width: SHORT_SIDE,\n        height: LONG_SIDE\n      },\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'portrait'\n      }, {\n        text: 'Page 3 still portrait',\n        pageBreak: 'before'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert(PDFDocument.prototype.addPage.callCount === 3);\n    assert.equal(PDFDocument.prototype.addPage.firstCall.args[0], undefined);\n    assert.deepEqual(PDFDocument.prototype.addPage.secondCall.args[0].size, [SHORT_SIDE, LONG_SIDE]);\n    assert.deepEqual(PDFDocument.prototype.addPage.thirdCall.args[0].size, [SHORT_SIDE, LONG_SIDE]);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should not switch width and height for pdfkit if page orientation changes from landscape to landscape","suites":["Printer"],"updatePoint":{"line":85,"column":107,"index":3097},"line":85,"code":"  it('should not switch width and height for pdfkit if page orientation changes from landscape to landscape', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageOrientation: 'portrait',\n      pageSize: {\n        width: SHORT_SIDE,\n        height: LONG_SIDE\n      },\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }, {\n        text: 'Page 3 landscape again',\n        pageOrientation: 'landscape',\n        pageBreak: 'after'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert.equal(PDFDocument.prototype.addPage.callCount, 3);\n    assert.equal(PDFDocument.prototype.addPage.firstCall.args[0], undefined);\n    assert.deepEqual(PDFDocument.prototype.addPage.secondCall.args[0].size, [LONG_SIDE, SHORT_SIDE]);\n    assert.deepEqual(PDFDocument.prototype.addPage.thirdCall.args[0].size, [LONG_SIDE, SHORT_SIDE]);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should print bullet vectors as ellipses","suites":["Printer"],"updatePoint":{"line":111,"column":45,"index":4028},"line":111,"code":"  it('should print bullet vectors as ellipses', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageOrientation: 'portrait',\n      pageSize: {\n        width: SHORT_SIDE,\n        height: LONG_SIDE\n      },\n      content: [{\n        \"stack\": [{\n          \"ul\": [{\n            \"text\": \"item1\"\n          }, {\n            \"text\": \"item2\"\n          }]\n        }]\n      }]\n    };\n    PDFDocument.prototype.ellipse = sinon.spy(PDFDocument.prototype.ellipse);\n    await printer.createPdfKitDocument(docDefinition);\n    function assertEllipse(ellipseCallArgs) {\n      var firstEllipse = {\n        x: ellipseCallArgs[0],\n        y: ellipseCallArgs[1],\n        r1: ellipseCallArgs[2],\n        r2: ellipseCallArgs[3]\n      };\n      assert(firstEllipse.x !== undefined);\n      assert(!isNaN(firstEllipse.x));\n      assert(firstEllipse.y !== undefined);\n      assert(!isNaN(firstEllipse.y));\n      assert(firstEllipse.r1 !== undefined);\n      assert(!isNaN(firstEllipse.r1));\n      assert(firstEllipse.r2 !== undefined);\n      assert(!isNaN(firstEllipse.r2));\n    }\n    assert.equal(PDFDocument.prototype.ellipse.callCount, 2);\n    assertEllipse(PDFDocument.prototype.ellipse.firstCall.args);\n    assertEllipse(PDFDocument.prototype.ellipse.secondCall.args);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should print only the require number of pages","suites":["Printer"],"updatePoint":{"line":151,"column":51,"index":5332},"line":151,"code":"  it('should print only the require number of pages', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageSize: 'A4',\n      maxPagesNumber: 1,\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert(PDFDocument.prototype.addPage.callCount === 1);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should print all pages when maxPagesNumber is undefined","suites":["Printer"],"updatePoint":{"line":167,"column":61,"index":5811},"line":167,"code":"  it('should print all pages when maxPagesNumber is undefined', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageSize: 'A4',\n      content: [{\n        text: 'Page 1'\n      }, {\n        text: 'Page 2',\n        pageBreak: 'before',\n        pageOrientation: 'landscape'\n      }, {\n        text: 'Page 3',\n        pageBreak: 'before'\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition);\n    assert(PDFDocument.prototype.addPage.callCount === 3);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should report progress on each rendered item when a progressCallback is passed","suites":["Printer"],"updatePoint":{"line":185,"column":84,"index":6351},"line":185,"code":"  it('should report progress on each rendered item when a progressCallback is passed', async function () {\n    printer = new Printer(fontDescriptors);\n    var progressCallback = sinon.spy(function () {});\n    var docDefinition = {\n      pageSize: 'A4',\n      content: [{\n        text: 'Text item 1'\n      }, {\n        image: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGAQMAAADNIO3CAAAAA1BMVEUAAN7GEcIJAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98DBREbA3IZ3d8AAAALSURBVAjXY2BABwAAEgAB74lUpAAAAABJRU5ErkJggg=='\n      }, {\n        text: 'Text item 2'\n      }, {\n        canvas: [{\n          type: 'rect',\n          x: 0,\n          y: 0,\n          w: 310,\n          h: 260\n        }]\n      }]\n    };\n    await printer.createPdfKitDocument(docDefinition, {\n      progressCallback: progressCallback\n    });\n    assert(progressCallback.withArgs(0.25).calledOnce);\n    assert(progressCallback.withArgs(0.5).calledOnce);\n    assert(progressCallback.withArgs(0.75).calledOnce);\n    assert(progressCallback.withArgs(1).calledOnce);\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should work without a progressCallback","suites":["Printer"],"updatePoint":{"line":214,"column":44,"index":7363},"line":214,"code":"  it('should work without a progressCallback', async function () {\n    printer = new Printer(fontDescriptors);\n    var docDefinition = {\n      pageSize: 'A4',\n      content: [{\n        text: 'Text item 1'\n      }]\n    };\n    assert.doesNotThrow(async function () {\n      await printer.createPdfKitDocument(docDefinition);\n    });\n  });","file":"unit/Printer.spec.js","skipped":false,"dir":"tests"},{"name":"should return null for an empty stack","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":36,"column":45,"index":844},"line":36,"code":"    it('should return null for an empty stack', function () {\n      assert(!new StyleContextStack().getProperty('fontSize'));\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return null if default style has been provided, but does not define the property","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":39,"column":95,"index":1028},"line":39,"code":"    it('should return null if default style has been provided, but does not define the property', function () {\n      assert(!stackWithDefaultStyle.getProperty('unknownProperty'));\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return property value from default style if found","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":42,"column":64,"index":1186},"line":42,"code":"    it('should return property value from default style if found', function () {\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 12);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return overriden property value from style overrides","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":45,"column":67,"index":1349},"line":45,"code":"    it('should return overriden property value from style overrides', function () {\n      stackWithDefaultStyle.push({\n        fontSize: 50\n      });\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 50);\n      stackWithDefaultStyle.pop();\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 12);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return latest overriden property value from style overrides if multiple style overrides have been provided","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":53,"column":121,"index":1738},"line":53,"code":"    it('should return latest overriden property value from style overrides if multiple style overrides have been provided', function () {\n      stackWithDefaultStyle.push({\n        fontSize: 50\n      });\n      stackWithDefaultStyle.push({\n        fontSize: 150\n      });\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 150);\n      stackWithDefaultStyle.pop();\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 50);\n      stackWithDefaultStyle.pop();\n      assert.equal(stackWithDefaultStyle.getProperty('fontSize'), 12);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return property value from named style","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":66,"column":53,"index":2233},"line":66,"code":"    it('should return property value from named style', function () {\n      fullStack.push('header');\n      assert.equal(fullStack.getProperty('fontSize'), 150);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should support named styles mixed with style overrides and obey their order","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":70,"column":83,"index":2433},"line":70,"code":"    it('should support named styles mixed with style overrides and obey their order', function () {\n      // default value\n      assert.equal(fullStack.getProperty('fontSize'), 12);\n\n      // named style value\n      fullStack.push('header');\n      assert.equal(fullStack.getProperty('fontSize'), 150);\n\n      // overriden value\n      fullStack.push({\n        fontSize: 50\n      });\n      assert.equal(fullStack.getProperty('fontSize'), 50);\n\n      // overriden second type with a named style\n      fullStack.push('small');\n      assert.equal(fullStack.getProperty('fontSize'), 8);\n\n      // taken from previous overrides (not found in latest overrides)\n      assert.equal(fullStack.getProperty('font'), 'Roboto');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"\"false\" boolean overrides (bold, italics, etc) should override inherited \"true\" values","suites":["StyleContextStack","getProperty"],"updatePoint":{"line":91,"column":94,"index":3166},"line":91,"code":"    it('\"false\" boolean overrides (bold, italics, etc) should override inherited \"true\" values', function () {\n      assert.equal(fullStack.getProperty('bold'), false);\n      fullStack.push('samplebold');\n      assert.equal(fullStack.getProperty('bold'), true);\n      fullStack.push({\n        bold: false\n      });\n      assert.equal(fullStack.getProperty('bold'), false);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should not push anything if no style nor style-property is defined","suites":["StyleContextStack","autopush"],"updatePoint":{"line":102,"column":74,"index":3570},"line":102,"code":"    it('should not push anything if no style nor style-property is defined', function () {\n      assert.equal(fullStack.autopush({\n        anotherProperty: 'test'\n      }), 0);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should push style name if object specifies it in the style property","suites":["StyleContextStack","autopush"],"updatePoint":{"line":107,"column":75,"index":3756},"line":107,"code":"    it('should push style name if object specifies it in the style property', function () {\n      assert.equal(fullStack.styleOverrides.length, 0);\n      assert.equal(fullStack.autopush({\n        anotherProperty: 'test',\n        style: 'header'\n      }), 1);\n      assert.equal(fullStack.styleOverrides.length, 1);\n      assert.equal(fullStack.styleOverrides[0], 'header');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should push all style names if object specifies them as an array in the style property","suites":["StyleContextStack","autopush"],"updatePoint":{"line":116,"column":94,"index":4157},"line":116,"code":"    it('should push all style names if object specifies them as an array in the style property', function () {\n      assert.equal(fullStack.styleOverrides.length, 0);\n      assert.equal(fullStack.autopush({\n        anotherProperty: 'test',\n        style: ['header', 'small']\n      }), 2);\n      assert.equal(fullStack.styleOverrides.length, 2);\n      assert.equal(fullStack.styleOverrides[0], 'header');\n      assert.equal(fullStack.styleOverrides[1], 'small');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should create a style-overrides-object from all styling properties and push it onto the stack","suites":["StyleContextStack","autopush"],"updatePoint":{"line":126,"column":101,"index":4634},"line":126,"code":"    it('should create a style-overrides-object from all styling properties and push it onto the stack', function () {\n      assert.equal(fullStack.styleOverrides.length, 0);\n      assert.equal(fullStack.autopush({\n        anotherProperty: 'test',\n        font: 'Helvetica',\n        fontSize: 123,\n        bold: false,\n        italics: true,\n        alignment: 'left'\n      }), 1);\n      assert.equal(fullStack.styleOverrides.length, 1);\n      assert.equal(fullStack.styleOverrides[0].font, 'Helvetica');\n      assert.equal(fullStack.styleOverrides[0].fontSize, 123);\n      assert.equal(fullStack.styleOverrides[0].bold, false);\n      assert.equal(fullStack.styleOverrides[0].italics, true);\n      assert.equal(fullStack.styleOverrides[0].alignment, 'left');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should support mixed styles and styling properties and also make sure the style-overrides-object is pushed as the last element","suites":["StyleContextStack","autopush"],"updatePoint":{"line":143,"column":134,"index":5433},"line":143,"code":"    it('should support mixed styles and styling properties and also make sure the style-overrides-object is pushed as the last element', function () {\n      assert.equal(fullStack.styleOverrides.length, 0);\n      assert.equal(fullStack.autopush({\n        anotherProperty: 'test',\n        font: 'Helvetica',\n        style: ['a', 'b', 'c'],\n        fontSize: 123\n      }), 4);\n      assert.equal(fullStack.styleOverrides.length, 4);\n      assert.equal(fullStack.styleOverrides[0], 'a');\n      assert.equal(fullStack.styleOverrides[1], 'b');\n      assert.equal(fullStack.styleOverrides[2], 'c');\n      assert.equal(fullStack.styleOverrides[3].font, 'Helvetica');\n      assert.equal(fullStack.styleOverrides[3].fontSize, 123);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return default property value","suites":["StyleContextStack","getStyleProperty"],"updatePoint":{"line":160,"column":44,"index":6125},"line":160,"code":"    it('should return default property value', function () {\n      assert.equal(StyleContextStack.getStyleProperty({}, null, 'font', 'Arial'), 'Arial');\n      assert.equal(StyleContextStack.getStyleProperty({}, styleStack, 'fontSize', 20), 20);\n      assert.equal(StyleContextStack.getStyleProperty({\n        bold: true\n      }, styleStack, 'fontSize', 20), 20);\n      assert.equal(StyleContextStack.getStyleProperty({\n        bold: true\n      }, null, 'fontSize', 20), 20);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return value from style stack","suites":["StyleContextStack","getStyleProperty"],"updatePoint":{"line":170,"column":44,"index":6608},"line":170,"code":"    it('should return value from style stack', function () {\n      assert.equal(StyleContextStack.getStyleProperty({}, styleStack, 'font', 'Arial'), 'Times New Roman');\n      assert.equal(StyleContextStack.getStyleProperty({\n        bold: true\n      }, styleStack, 'font', 'Arial'), 'Times New Roman');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should return value from node","suites":["StyleContextStack","getStyleProperty"],"updatePoint":{"line":176,"column":37,"index":6912},"line":176,"code":"    it('should return value from node', function () {\n      assert.equal(StyleContextStack.getStyleProperty({\n        font: 'ZapfDingbats'\n      }, styleStack, 'font', 'Arial'), 'ZapfDingbats');\n      assert.equal(StyleContextStack.getStyleProperty({\n        font: 'ZapfDingbats',\n        bold: true\n      }, null, 'font', 'Arial'), 'ZapfDingbats');\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should copy style from text node to new node","suites":["StyleContextStack","copyStyle"],"updatePoint":{"line":187,"column":52,"index":7329},"line":187,"code":"    it('should copy style from text node to new node', function () {\n      var sourceNode = {\n        text: 'text node',\n        font: 'Arial',\n        fontSize: 20,\n        bold: true\n      };\n      var result = StyleContextStack.copyStyle(sourceNode);\n      assert.equal(result.text, undefined);\n      assert.equal(result.font, 'Arial');\n      assert.equal(result.fontSize, 20);\n      assert.equal(result.bold, true);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"should copy style from text node to another node","suites":["StyleContextStack","copyStyle"],"updatePoint":{"line":200,"column":56,"index":7761},"line":200,"code":"    it('should copy style from text node to another node', function () {\n      var sourceNode = {\n        text: 'text node',\n        font: 'Arial',\n        fontSize: 20,\n        bold: true\n      };\n      var destinationNode = {\n        text: 'destination node',\n        font: 'Roboto',\n        italics: true\n      };\n      StyleContextStack.copyStyle(sourceNode, destinationNode);\n      assert.equal(destinationNode.text, 'destination node');\n      assert.equal(destinationNode.font, 'Arial');\n      assert.equal(destinationNode.fontSize, 20);\n      assert.equal(destinationNode.bold, true);\n      assert.equal(destinationNode.italics, true);\n    });","file":"unit/StyleContextStack.spec.js","skipped":false,"dir":"tests"},{"name":"returns correct dimensions for pts","suites":["SVGMeasure","measureSVG()"],"updatePoint":{"line":17,"column":42,"index":2123},"line":17,"code":"    it('returns correct dimensions for pts', function () {\n      var dimensions = svgMeasure.measureSVG(inputBasic);\n      assert.equal(typeof dimensions, 'object');\n      assert.equal(typeof dimensions.width, 'number');\n      assert.equal(typeof dimensions.height, 'number');\n      assert.equal(dimensions.width, 105);\n      assert.equal(dimensions.height, 222);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"correctly handles multi-line svg tags","suites":["SVGMeasure","measureSVG()"],"updatePoint":{"line":25,"column":45,"index":2498},"line":25,"code":"    it('correctly handles multi-line svg tags', function () {\n      var dimensions = svgMeasure.measureSVG(inputWithNewline);\n      assert.equal(typeof dimensions, 'object');\n      assert.equal(typeof dimensions.width, 'number');\n      assert.equal(typeof dimensions.height, 'number');\n      assert.equal(dimensions.width, 105);\n      assert.equal(dimensions.height, 222);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"ignores \"svg tags\" in comments (1)","suites":["SVGMeasure","measureSVG()"],"updatePoint":{"line":33,"column":42,"index":2876},"line":33,"code":"    it('ignores \"svg tags\" in comments (1)', function () {\n      var dimensions = svgMeasure.measureSVG(inputWithComment1);\n      assert.equal(typeof dimensions, 'object');\n      assert.equal(typeof dimensions.width, 'number');\n      assert.equal(typeof dimensions.height, 'number');\n      assert.equal(dimensions.width, 105);\n      assert.equal(dimensions.height, 222);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"ignores \"svg tags\" in comments (2)","suites":["SVGMeasure","measureSVG()"],"updatePoint":{"line":41,"column":42,"index":3255},"line":41,"code":"    it('ignores \"svg tags\" in comments (2)', function () {\n      var dimensions = svgMeasure.measureSVG(inputWithComment2);\n      assert.equal(typeof dimensions, 'object');\n      assert.equal(typeof dimensions.width, 'number');\n      assert.equal(typeof dimensions.height, 'number');\n      assert.equal(dimensions.width, 105);\n      assert.equal(dimensions.height, 222);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"updates dimensions","suites":["SVGMeasure","writeDimensions()"],"updatePoint":{"line":55,"column":26,"index":3749},"line":55,"code":"    it('updates dimensions', function () {\n      var updatedSVGString = svgMeasure.writeDimensions(inputBasic, replacementDimensions);\n      var updatedDimensions = svgMeasure.measureSVG(updatedSVGString);\n      assert.equal(updatedDimensions.width, 1984);\n      assert.equal(updatedDimensions.height, 2001);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"correctly ignores comments","suites":["SVGMeasure","writeDimensions()"],"updatePoint":{"line":61,"column":34,"index":4074},"line":61,"code":"    it('correctly ignores comments', function () {\n      var updatedSVGString = svgMeasure.writeDimensions(inputWithComment2, replacementDimensions);\n      var updatedDimensions = svgMeasure.measureSVG(updatedSVGString);\n      assert.equal(updatedDimensions.width, 1984);\n      assert.equal(updatedDimensions.height, 2001);\n    });","file":"unit/SVGMeasure.spec.js","skipped":false,"dir":"tests"},{"name":"should use the line colors function (regression #161)","suites":["TableProcessor"],"updatePoint":{"line":77,"column":59,"index":2239},"line":77,"code":"  it('should use the line colors function (regression #161)', function () {\n    writerFake.addVector = function (vector) {\n      assert.equal(vector.lineColor, 'nice shiny color');\n      addVectorCallCount++;\n    };\n    var tableNode = {\n      table: {\n        body: [['A1', 'A2'], ['B1', 'B2']]\n      }\n    };\n    var processor = new TableProcessor(tableNode);\n    defaultLayout.vLineColor = function () {\n      return 'nice shiny color';\n    };\n    defaultLayout.hLineColor = function () {\n      return 'nice shiny color';\n    };\n    processor.layout = defaultLayout;\n    processor.rowSpanData = [{\n      left: 0,\n      rowSpan: 0\n    }, {\n      left: 0,\n      rowSpan: 0\n    }];\n    processor.beginRow(0, writerFake);\n    processor.endRow(0, writerFake, []);\n    assert.equal(addVectorCallCount, 3);\n  });","file":"unit/TableProcessor.spec.js","skipped":false,"dir":"tests"},{"name":"should use the line colors constants (regression #161)","suites":["TableProcessor"],"updatePoint":{"line":106,"column":60,"index":3049},"line":106,"code":"  it('should use the line colors constants (regression #161)', function () {\n    writerFake.addVector = function (vector) {\n      assert.equal(vector.lineColor, 'nice shiny color');\n      addVectorCallCount++;\n    };\n    var tableNode = {\n      table: {\n        body: [['A1', 'A2'], ['B1', 'B2']]\n      }\n    };\n    var processor = new TableProcessor(tableNode);\n    defaultLayout.vLineColor = 'nice shiny color';\n    defaultLayout.hLineColor = 'nice shiny color';\n    processor.layout = defaultLayout;\n    processor.rowSpanData = [{\n      left: 0,\n      rowSpan: 0\n    }, {\n      left: 0,\n      rowSpan: 0\n    }];\n    processor.beginRow(0, writerFake);\n    processor.endRow(0, writerFake, []);\n    assert.equal(addVectorCallCount, 3);\n  });","file":"unit/TableProcessor.spec.js","skipped":false,"dir":"tests"},{"name":"should not remove the repeatable of the outer table when nested table ends","suites":["TableProcessor","header with nested table (issue #199)"],"updatePoint":{"line":132,"column":82,"index":3879},"line":132,"code":"    it('should not remove the repeatable of the outer table when nested table ends', function () {\n      var fakeTableNode = function () {\n        return {\n          table: {\n            // since extendTableWidths is not called from out tests\n            // we can't use the doc-definition syntax for widths\n            // so instead of '*' we\n            widths: [{\n              width: '*'\n            }]\n          },\n          _offsets: {\n            total: 56472\n          },\n          _layout: {\n            paddingLeft: function () {},\n            paddingRight: function () {},\n            paddingBottom: function () {},\n            paddingTop: function () {},\n            vLineWidth: function () {},\n            hLineWidth: function () {},\n            fillColor: function () {},\n            fillOpacity: function () {}\n          }\n        };\n      };\n      var header = {};\n      var nestedTableNode = fakeTableNode();\n      nestedTableNode.table.body = [['nested table cell']];\n      var tableNode = fakeTableNode();\n      tableNode.table.body = [['Header'], [nestedTableNode]];\n      tableNode.table.headerRows = 1;\n      var fakeWriter = {\n        context: function () {\n          return {\n            availableWidth: 56473,\n            moveDown: function () {}\n          };\n        },\n        repeatables: [],\n        removeListener: function () {},\n        addVector: function () {},\n        popFromRepeatables: sinon.spy(),\n        pushToRepeatables: function (repeatable) {\n          assert.equal(repeatable, header);\n        },\n        beginUnbreakableBlock: function () {},\n        currentBlockToRepeatable: function () {\n          return header;\n        },\n        commitUnbreakableBlock: function () {}\n      };\n      var pageBreaks = [];\n      var tableProcessor = new TableProcessor(tableNode);\n      tableProcessor.beginTable(fakeWriter);\n      tableProcessor.endRow(0, fakeWriter, pageBreaks);\n      var nestedTableProcessor = new TableProcessor(nestedTableNode);\n      nestedTableProcessor.beginTable(fakeWriter);\n      nestedTableProcessor.endRow(0, fakeWriter, pageBreaks);\n      nestedTableProcessor.endTable(fakeWriter);\n      assert.equal(fakeWriter.popFromRepeatables.callCount, 0);\n      tableProcessor.endTable(fakeWriter);\n      assert.equal(fakeWriter.popFromRepeatables.callCount, 1);\n    });","file":"unit/TableProcessor.spec.js","skipped":false,"dir":"tests"},{"name":"should do basic splitting","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":38,"column":33,"index":1279},"line":38,"code":"    it('should do basic splitting', function () {\n      var result = textBreaker.getBreaks(sampleText);\n      assert.equal(result.length, 8);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should not set lineEnd on inlines if there are no new-lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":42,"column":67,"index":1463},"line":42,"code":"    it('should not set lineEnd on inlines if there are no new-lines', function () {\n      var result = textBreaker.getBreaks(sampleText);\n      result.forEach(function (item) {\n        assert.notEqual(item.lineEnd, true);\n      });\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split into lines if there are new-line chars","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":48,"column":59,"index":1695},"line":48,"code":"    it('should split into lines if there are new-line chars', function () {\n      var result = textBreaker.getBreaks(sampleText2);\n      assert.equal(result.length, 14);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split properly when adjacent newlines appear","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":52,"column":59,"index":1873},"line":52,"code":"    it('should split properly when adjacent newlines appear', function () {\n      var result = textBreaker.getBreaks(sampleText2);\n      assert.equal(result[9].text.length, 0);\n      assert.equal(result[9].lineEnd, true);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support whitespace-only lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":57,"column":44,"index":2088},"line":57,"code":"    it('should support whitespace-only lines', function () {\n      var result = textBreaker.getBreaks(sampleText2);\n      assert.equal(result[6].text, ' ');\n      assert.equal(result[6].lineEnd, true);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split ZERO WIDTH SPACE character","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":62,"column":47,"index":2301},"line":62,"code":"    it('should split ZERO WIDTH SPACE character', function () {\n      var result = textBreaker.getBreaks('first line\\u200Bsecond line\\u200Bthird line');\n      assert.equal(result.length, 6);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split basic Chinese text","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":66,"column":39,"index":2492},"line":66,"code":"    it('should split basic Chinese text', function () {\n      var result = textBreaker.getBreaks('');\n      assert.equal(result.length, 10);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split Chinese text into lines if there are new-line chars","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":70,"column":72,"index":2686},"line":70,"code":"    it('should split Chinese text into lines if there are new-line chars', function () {\n      var result = textBreaker.getBreaks('\\n\\n');\n      assert.equal(result.length, 31);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should split an array of inline texts","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":74,"column":45,"index":2881},"line":74,"code":"    it('should split an array of inline texts', function () {\n      var arrayText = [{\n        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. '\n      }, {\n        text: 'Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.'\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 52);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support keep noWrap from style","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":83,"column":45,"index":3457},"line":83,"code":"    it('should support keep noWrap from style', function () {\n      var result = textBreaker.getBreaks([{\n        text: 'very long text'\n      }], styleStackNoWrap);\n      assert.equal(result.length, 1);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support disable noWrap in text","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":89,"column":45,"index":3669},"line":89,"code":"    it('should support disable noWrap in text', function () {\n      var result = textBreaker.getBreaks([{\n        text: 'very long text',\n        noWrap: false\n      }], styleStackNoWrap);\n      assert.equal(result.length, 3);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support enable noWrap in text","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":96,"column":44,"index":3903},"line":96,"code":"    it('should support enable noWrap in text', function () {\n      var result = textBreaker.getBreaks([{\n        text: 'very long text',\n        noWrap: true\n      }], styleStackWrap);\n      assert.equal(result.length, 1);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support not line break if is text inlines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":103,"column":56,"index":4146},"line":103,"code":"    it('should support not line break if is text inlines', function () {\n      var arrayText = [{\n        text: 'Celestial Circle'\n      }, {\n        text: 'The Faithful Ally'\n      }, {\n        text: ', '\n      }, {\n        text: 'Gift of Knowledge'\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 10);\n      assert.equal(result[5].text, 'Ally');\n      assert.equal(result[5].noNewLine, true);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support not line break if is text inlines as one word","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":118,"column":68,"index":4611},"line":118,"code":"    it('should support not line break if is text inlines as one word', function () {\n      var arrayText = [{\n        text: 're'\n      }, {\n        text: 'mark'\n      }, {\n        text: 'able'\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 3);\n      assert.equal(result[0].noNewLine, true);\n      assert.equal(result[1].noNewLine, true);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support line break if is text inlines and is new line on end","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":131,"column":75,"index":5014},"line":131,"code":"    it('should support line break if is text inlines and is new line on end', function () {\n      var arrayText = [{\n        text: 'First line.\\n'\n      }, {\n        text: 'Second line.'\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 4);\n      assert.equal(result[1].lineEnd, true);\n      assert.equal(result[1].noNewLine, undefined);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support line break if is text inlines and is new line on begin","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":142,"column":77,"index":5409},"line":142,"code":"    it('should support line break if is text inlines and is new line on begin', function () {\n      var arrayText = [{\n        text: 'First line.'\n      }, {\n        text: '\\nSecond line.'\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 5);\n      assert.equal(result[1].noNewLine, true);\n      assert.equal(result[2].lineEnd, true);\n      assert.equal(result[2].noNewLine, undefined);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support line break with noWrap","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":154,"column":45,"index":5819},"line":154,"code":"    it('should support line break with noWrap', function () {\n      var arrayText = [{\n        text: 'First line',\n        noWrap: true\n      }, {\n        text: 'second line',\n        noWrap: true\n      }];\n      var result = textBreaker.getBreaks(arrayText);\n      assert.equal(result.length, 2);\n      assert.equal(result[0].noNewLine, true);\n      assert.equal(result[1].noNewLine, undefined);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support no line break if is text inlines and is space on begin","suites":["TextBreaker","getBreaks"],"line":167,"code":"    it.skip('should support no line break if is text inlines and is space on begin', function () {","file":"unit/TextBreaker.spec.js","skipped":true,"dir":"tests"},{"name":"should support plain strings","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":183,"column":36,"index":6692},"line":183,"code":"    it('should support plain strings', function () {\n      var result = textBreaker.getBreaks(plainText);\n      assert.equal(result.length, 6);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support plain strings with new-lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":187,"column":51,"index":6859},"line":187,"code":"    it('should support plain strings with new-lines', function () {\n      var result = textBreaker.getBreaks(plainText);\n      assert(result[3].lineEnd);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support an array of plain strings","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":191,"column":48,"index":7018},"line":191,"code":"    it('should support an array of plain strings', function () {\n      var result = textBreaker.getBreaks(plainTextArray);\n      assert.equal(result.length, 8);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support an array of plain strings with new-lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":195,"column":63,"index":7202},"line":195,"code":"    it('should support an array of plain strings with new-lines', function () {\n      var result = textBreaker.getBreaks(plainTextArray);\n      assert.equal(result[5].lineEnd, true);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should support arrays with style definition","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":199,"column":51,"index":7381},"line":199,"code":"    it('should support arrays with style definition', function () {\n      var result = textBreaker.getBreaks(mixedTextArray);\n      assert.equal(result.length, 8);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should keep style definitions after splitting new-lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":203,"column":63,"index":7565},"line":203,"code":"    it('should keep style definitions after splitting new-lines', function () {\n      var result = textBreaker.getBreaks(mixedTextArray);\n      [0, 2, 3, 4, 5, 6].forEach(function (i) {\n        assert.equal(result[i].bold, true);\n      });\n      assert(!result[1].bold);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should keep unknown style fields after splitting new-lines","suites":["TextBreaker","getBreaks"],"updatePoint":{"line":210,"column":66,"index":7847},"line":210,"code":"    it('should keep unknown style fields after splitting new-lines', function () {\n      var result = textBreaker.getBreaks(mixedTextArrayWithUnknownStyleDefinitions);\n      assert.equal(result.length, 8);\n      assert.equal(result[5].unknownStyle, 123);\n      assert.equal(result[6].unknownStyle, 123);\n    });","file":"unit/TextBreaker.spec.js","skipped":false,"dir":"tests"},{"name":"should set width","suites":["TextInlines","buildInlines","width and positioning"],"updatePoint":{"line":66,"column":26,"index":2955},"line":66,"code":"      it('should set width', function () {\n        var result = textInlines.buildInlines(plainTextArray);\n        assert.notEqual(result, null);\n        assert.notEqual(result.items, null);\n        assert.notEqual(result.items.length, 0);\n        assert.notEqual(result.items[0].width, null);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should measure text widths","suites":["TextInlines","buildInlines","width and positioning"],"updatePoint":{"line":73,"column":36,"index":3268},"line":73,"code":"      it('should measure text widths', function () {\n        var result = textInlines.buildInlines(plainTextArray);\n        assert.equal(result.items[0].width, 72);\n        assert.equal(result.items[2].width, 36);\n        assert.equal(result.items[3].width, 108);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should calculate leading and trailing cuts","suites":["TextInlines","buildInlines","width and positioning"],"updatePoint":{"line":79,"column":52,"index":3558},"line":79,"code":"      it('should calculate leading and trailing cuts', function () {\n        var result = textInlines.buildInlines(plainTextArray);\n        assert.equal(result.items[0].trailingCut, 12);\n        assert.equal(result.items[0].leadingCut, 0);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set the same value for leading and trailing cuts for whitespace-only strings","suites":["TextInlines","buildInlines","width and positioning"],"updatePoint":{"line":84,"column":93,"index":3849},"line":84,"code":"      it('should set the same value for leading and trailing cuts for whitespace-only strings', function () {\n        var result = textInlines.buildInlines(plainTextArray);\n        assert.equal(result.items[2].trailingCut, 36);\n        assert.equal(result.items[2].leadingCut, 36);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set leading and trailing cuts to 0 if texts cannot be trimmed","suites":["TextInlines","buildInlines","width and positioning"],"updatePoint":{"line":89,"column":78,"index":4126},"line":89,"code":"      it('should set leading and trailing cuts to 0 if texts cannot be trimmed', function () {\n        var result = textInlines.buildInlines(plainTextArray);\n        assert.equal(result.items[7].trailingCut, 0);\n        assert.equal(result.items[7].leadingCut, 0);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should use default style","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":96,"column":34,"index":4403},"line":96,"code":"      it('should use default style', function () {\n        var result = textInlines.buildInlines('Imi', styleStack);\n        assert.equal(result.items[0].width, 4 * 15);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should use overriden styles from styleStack","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":100,"column":53,"index":4603},"line":100,"code":"      it('should use overriden styles from styleStack', function () {\n        styleStack.push('header');\n        var result = textInlines.buildInlines('Imi', styleStack);\n        assert.equal(result.items[0].width, 4 * 150);\n        styleStack.pop();\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should support style overrides at text definition level","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":106,"column":65,"index":4877},"line":106,"code":"      it('should support style overrides at text definition level', function () {\n        var result = textInlines.buildInlines([{\n          text: 'Imi',\n          fontSize: 20\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 20);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should support named styles at text definition level","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":113,"column":62,"index":5140},"line":113,"code":"      it('should support named styles at text definition level', function () {\n        var result = textInlines.buildInlines([{\n          text: 'Imi',\n          style: 'header'\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 150);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should support multiple named styles at text definition level","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":120,"column":71,"index":5416},"line":120,"code":"      it('should support multiple named styles at text definition level', function () {\n        var result = textInlines.buildInlines([{\n          text: 'Imi',\n          style: ['header', 'small']\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 8);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should obey named styles order","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":127,"column":40,"index":5670},"line":127,"code":"      it('should obey named styles order', function () {\n        var result = textInlines.buildInlines([{\n          text: 'Imi',\n          style: ['header', 'small']\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 8);\n        result = textInlines.buildInlines([{\n          text: 'Imi',\n          style: ['small', 'header']\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 150);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should not take values from named styles if style-overrides have been providede","suites":["TextInlines","buildInlines","styling"],"updatePoint":{"line":139,"column":89,"index":6158},"line":139,"code":"      it('should not take values from named styles if style-overrides have been providede', function () {\n        var result = textInlines.buildInlines([{\n          text: 'Imi',\n          fontSize: 123,\n          style: 'header'\n        }], styleStack);\n        assert.equal(result.items[0].width, 4 * 123);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should return an object containing a collection of inlines and calculated minWidth/maxWidth","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":149,"column":101,"index":6549},"line":149,"code":"      it('should return an object containing a collection of inlines and calculated minWidth/maxWidth', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLines);\n        assert(inlines.items);\n        assert(inlines.minWidth);\n        assert(inlines.maxWidth);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set minWidth to the largest inline width","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":155,"column":57,"index":6811},"line":155,"code":"      it('should set minWidth to the largest inline width', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLines);\n        assert.equal(inlines.minWidth, 11 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should take into account trimming when calculating minWidth","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":159,"column":69,"index":7035},"line":159,"code":"      it('should take into account trimming when calculating minWidth', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLinesWhichRequiresTrimming);\n        assert.equal(inlines.minWidth, 11 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set maxWidth to the sum of all widths if there is no trimming and no newlines","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":163,"column":94,"index":7305},"line":163,"code":"      it('should set maxWidth to the sum of all widths if there is no trimming and no newlines', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLines);\n        assert.equal(inlines.maxWidth, 52 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should take into account trimming when calculating maxWidth","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":167,"column":69,"index":7529},"line":167,"code":"      it('should take into account trimming when calculating maxWidth', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLinesWhichRequiresTrimming);\n        assert.equal(inlines.maxWidth, 52 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set maxWidth to the width of the largest line if there are new-lines","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":171,"column":85,"index":7790},"line":171,"code":"      it('should set maxWidth to the width of the largest line if there are new-lines', function () {\n        var inlines = textInlines.buildInlines(textArrayWithNewLines);\n        assert.equal(inlines.maxWidth, 21 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should take into account trimming at line level when calculating maxWidth","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":175,"column":83,"index":8020},"line":175,"code":"      it('should take into account trimming at line level when calculating maxWidth', function () {\n        var inlines = textInlines.buildInlines(textArrayWithNewLinesWhichRequiresTrimming);\n        assert.equal(inlines.maxWidth, 21 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set min width to max when nowrap style is specified","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":179,"column":68,"index":8256},"line":179,"code":"      it('should set min width to max when nowrap style is specified', function () {\n        var inlines = textInlines.buildInlines(plainTextArrayWithoutNewLines, styleStackNoWrap);\n        assert.equal(inlines.minWidth, 52 * 12);\n        assert.equal(inlines.maxWidth, 52 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set min width to longest when nowrap style is specified on longest segment","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":184,"column":91,"index":8569},"line":184,"code":"      it('should set min width to longest when nowrap style is specified on longest segment', function () {\n        var inlines = textInlines.buildInlines(mixedTextArrayWithoutNewLinesNoWrapLongest);\n        assert.equal(inlines.minWidth, 27 * 12);\n        assert.equal(inlines.maxWidth, 52 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set widths to normal when nowrap style is specified on shortest segment","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":189,"column":88,"index":8874},"line":189,"code":"      it('should set widths to normal when nowrap style is specified on shortest segment', function () {\n        var inlines = textInlines.buildInlines(mixedTextArrayWithoutNewLinesNoWrapShortest);\n        assert.equal(inlines.minWidth, 11 * 12);\n        assert.equal(inlines.maxWidth, 52 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should set set the leading indent only to the first line of a paragraph","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":194,"column":81,"index":9173},"line":194,"code":"      it('should set set the leading indent only to the first line of a paragraph', function () {\n        var inlines = textInlines.buildInlines(textWithLeadingIndent);\n        assert.equal(inlines.items[0].leadingCut, -10);\n        var countLeadingCut = 0;\n        inlines.items.forEach(function (item) {\n          countLeadingCut += item.leadingCut;\n        });\n        assert.equal(countLeadingCut, -10);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should preserve leading whitespaces when preserveLeadingSpaces is set","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":203,"column":79,"index":9589},"line":203,"code":"      it('should preserve leading whitespaces when preserveLeadingSpaces is set', function () {\n        var inlines = textInlines.buildInlines(textWithLeadingSpaces);\n        assert.equal(inlines.maxWidth, 23 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should preserve trailing whitespaces when preserveTrailingSpaces is set","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":207,"column":81,"index":9817},"line":207,"code":"      it('should preserve trailing whitespaces when preserveTrailingSpaces is set', function () {\n        var inlines = textInlines.buildInlines(textWithTrailingSpaces);\n        assert.equal(inlines.maxWidth, 23 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"},{"name":"should preserve leading and trailing whitespaces when preserveLeadingSpaces and preserveTrailingSpaces are set","suites":["TextInlines","buildInlines","minWidth and maxWidth"],"updatePoint":{"line":211,"column":120,"index":10085},"line":211,"code":"      it('should preserve leading and trailing whitespaces when preserveLeadingSpaces and preserveTrailingSpaces are set', function () {\n        var inlines = textInlines.buildInlines(textWithLeadingAndTrailingSpaces);\n        assert.equal(inlines.maxWidth, 27 * 12);\n      });","file":"unit/TextInlines.spec.js","skipped":false,"dir":"tests"}]}