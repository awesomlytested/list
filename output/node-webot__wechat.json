{
    "repo": "node-webot/wechat",
    "url": "https://github.com/node-webot/wechat",
    "branch": "master",
    "configs": [
        {
            "package": "wechat",
            "lang": "js",
            "dir": "test",
            "framework": "mocha",
            "pattern": "**/*[._-]{test,spec,unittest,unit}.{ts,js}"
        }
    ],
    "tests": [
        {
            "name": "add event should ok",
            "suites": [
                "events.js",
                "event"
            ],
            "updatePoint": {
                "line": 7,
                "column": 27
            },
            "line": 7,
            "code": "    it('add event should ok', function () {\n      var emitter = new Event();\n      emitter.add('pic_weixin', function (message, req, res, next) {// 弹出微信相册发图器的事件推送\n      });\n      emitter.events.should.have.property('pic_weixin');\n    });",
            "file": "events.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "_dispatch should ok",
            "suites": [
                "events.js",
                "event"
            ],
            "updatePoint": {
                "line": 13,
                "column": 27
            },
            "line": 13,
            "code": "    it('_dispatch should ok', function (done) {\n      var emitter = new Event();\n      var count = 0;\n      emitter.add('pic_weixin', function (message, req, res, next) {\n        // 弹出微信相册发图器的事件推送\n        count++;\n        next();\n      });\n      var message = {\n        Event: 'pic_weixin'\n      };\n\n      emitter._dispatch(message, {}, {}, function () {\n        count.should.have.be.equal(1);\n        done();\n      });\n    });",
            "file": "events.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "_dispatch miss should ok",
            "suites": [
                "events.js",
                "event"
            ],
            "updatePoint": {
                "line": 30,
                "column": 32
            },
            "line": 30,
            "code": "    it('_dispatch miss should ok', function (done) {\n      var emitter = new Event();\n      var count = 0;\n      var message = {\n        Event: 'pic_weixin'\n      };\n      emitter.add('hehe', function (message, req, res, next) {\n        count++;\n        next();\n      });\n\n      emitter._dispatch(message, {}, {}, function () {\n        count.should.have.be.equal(0);\n        done();\n      });\n    });",
            "file": "events.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "dispatch should ok",
            "suites": [
                "events.js",
                "event"
            ],
            "updatePoint": {
                "line": 46,
                "column": 26
            },
            "line": 46,
            "code": "    it('dispatch should ok', function (done) {\n      var emitter = new Event();\n      var count = 0;\n      var message = {\n        Event: 'pic_weixin'\n      };\n      emitter.add('pic_weixin', function (message, req, res, next) {\n        count++;\n        next();\n      });\n      var handle = Event.dispatch(emitter);\n      handle(message, {}, {}, function () {\n        count.should.have.be.equal(1);\n        done();\n      });\n    });",
            "file": "events.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should not error",
            "suites": [
                "getMessage"
            ],
            "updatePoint": {
                "line": 22,
                "column": 22
            },
            "line": 22,
            "code": "  it('should not error', function (done) {\n    var stream = new Counter();\n    getMessage(stream, function (err, xml) {\n      should.not.exist(err);\n      done();\n    });\n    stream.push(new Buffer('<xml>'));\n    stream.push(new Buffer('</xml>'));\n    stream.push(null);\n  });",
            "file": "get_message.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should exist error",
            "suites": [
                "getMessage"
            ],
            "updatePoint": {
                "line": 32,
                "column": 24
            },
            "line": 32,
            "code": "  it('should exist error', function (done) {\n    var stream = new Counter();\n    getMessage(stream, function (err, xml) {\n      should.exist(err);\n      done();\n    });\n    stream.emit('error', new Error('some error'));\n  });",
            "file": "get_message.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "list.js"
            ],
            "updatePoint": {
                "line": 6,
                "column": 15
            },
            "line": 6,
            "code": "  it('should ok', function () {\n    var common = [['选择{a}查看啥', function () {}], ['选择{b}查看啥', function () {}], ['选择{c}查看啥', function () {}]];\n    List.add('common', common);\n    var list = List.get('common');\n    list.description.should.be.equal('选择a查看啥\\n选择b查看啥\\n选择c查看啥');\n    list.get('a').should.be.equal(common[0][1]);\n    list.get('b').should.be.equal(common[1][1]);\n    list.get('c').should.be.equal(common[2][1]);\n  });",
            "file": "list.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when clear",
            "suites": [
                "list.js"
            ],
            "updatePoint": {
                "line": 15,
                "column": 26
            },
            "line": 15,
            "code": "  it('should ok when clear', function () {\n    var common = [['选择{a}查看啥', function () {}], ['选择{b}查看啥', function () {}], ['选择{c}查看啥', function () {}]];\n    List.add('common', common);\n    var list = List.get('common');\n    should.exist(list);\n    List.clear();\n    list = List.get('common');\n    should.not.exist(list);\n  });",
            "file": "list.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with string",
            "suites": [
                "list.js"
            ],
            "updatePoint": {
                "line": 24,
                "column": 27
            },
            "line": 24,
            "code": "  it('should ok with string', function () {\n    var common = [['welcome'], ['选择{a}查看啥', function () {}], ['选择{b}查看啥', function () {}], ['选择{c}查看啥', function () {}]];\n    List.add('welcome', common);\n    var list = List.get('welcome');\n    list.description.should.be.equal('welcome\\n选择a查看啥\\n选择b查看啥\\n选择c查看啥');\n    list.get('a').should.be.equal(common[1][1]);\n    list.get('b').should.be.equal(common[2][1]);\n    list.get('c').should.be.equal(common[3][1]);\n  });",
            "file": "list.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with body, foot, delimiter",
            "suites": [
                "list.js"
            ],
            "updatePoint": {
                "line": 33,
                "column": 42
            },
            "line": 33,
            "code": "  it('should ok with body, foot, delimiter', function () {\n    var common = [['选择{a}查看啥', function () {}], ['选择{b}查看啥', function () {}], ['选择{c}查看啥', function () {}]];\n    var head = '我是头';\n    var delimiter = '-------';\n    var foot = '我是小尾巴';\n    List.add('common', common, head, delimiter, foot);\n    var list = List.get('common');\n    list.description.should.be.equal(head + '\\n选择a查看啥\\n' + delimiter + '\\n选择b查看啥\\n' + delimiter + '\\n选择c查看啥\\n' + foot);\n    list.get('a').should.be.equal(common[0][1]);\n    list.get('b').should.be.equal(common[1][1]);\n    list.get('c').should.be.equal(common[2][1]);\n  });",
            "file": "list.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with list",
            "suites": [
                "list"
            ],
            "updatePoint": {
                "line": 33,
                "column": 25
            },
            "line": 33,
            "code": "  it('should ok with list', function (done) {\n    List.add('view', [['回复{c}查看我的性取向', '这样的事情怎么好意思告诉你啦- -']]);\n    var info = {\n      sp: 'test',\n      user: 'test',\n      type: 'text',\n      text: 'list'\n    };\n    request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n      if (err) {\n        return done(err);\n      }\n\n      info = {\n        sp: 'test',\n        user: 'test',\n        type: 'text',\n        text: 'c'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) {\n          return done(err);\n        }\n\n        var body = res.text.toString();\n        body.should.include('这样的事情怎么好意思告诉你啦');\n        done();\n      });\n    });\n  });",
            "file": "list2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "parse_xml.js"
            ],
            "updatePoint": {
                "line": 32,
                "column": 15
            },
            "line": 32,
            "code": "  it('should ok', function (done) {\n    var xml = '<xml><ToUserName><![CDATA[gh_d3e07d51b513]]></ToUserName><FromUserName><![CDATA[oPKu7jgOibOA-De4u8J2RuNKpZRw]]></FromUserName><CreateTime>1361374891</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[/:8-)]]></Content><MsgId>5847060634540564918</MsgId></xml>';\n    request(app).post('/wechat' + tail()).send(xml).expect(200).expect('hehe').end(done);\n  });",
            "file": "parse.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should not ok when bad xml",
            "suites": [
                "parse_xml.js"
            ],
            "updatePoint": {
                "line": 36,
                "column": 32
            },
            "line": 36,
            "code": "  it('should not ok when bad xml', function (done) {\n    var xml = '<xml><badToUserName><![CDATA[gh_d3e07d51b513]]></ToUserName><FromUserName><![CDATA[oPKu7jgOibOA-De4u8J2RuNKpZRw]]></FromUserName><CreateTime>1361374891</CreateTime><MsgType><![CDATA[text]]></MsgType><Content><![CDATA[/:8-)]]></Content><MsgId>5847060634540564918</MsgId></xml>';\n    request(app).post('/wechat' + tail()).send(xml).expect(500).expect('BadMessageError').end(done);\n  });",
            "file": "parse.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should return array when xml include repeat item",
            "suites": [
                "parse_xml.js"
            ],
            "updatePoint": {
                "line": 40,
                "column": 54
            },
            "line": 40,
            "code": "  it('should return array when xml include repeat item', function (done) {\n    var xml = '<xml><arraytest><item><![CDATA[item0]]></item><item><![CDATA[item1]]></item></arraytest></xml>';\n    xml2js.parseString(xml, {\n      trim: true\n    }, function (err, result) {\n      var xml = formatMessage(result.xml);\n      var items = xml['arraytest']['item'];\n      assert(items instanceof Array == true);\n\n      for (var i = 0; i < items.length; i++) {\n        assert(items[i] == \"item\" + i);\n      }\n\n      done();\n    });\n  });",
            "file": "parse.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply(\"text\") should ok",
            "suites": [
                "wechat.js",
                "reply text"
            ],
            "updatePoint": {
                "line": 9,
                "column": 31
            },
            "line": 9,
            "code": "    it('reply(\"text\") should ok', function () {\n      var result = reply('hello world', 'from', 'to');\n      result.should.be.include('<Content><![CDATA[hello world]]></Content>');\n      result.should.be.include('<MsgType><![CDATA[text]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply({type: \"text\", content: content}) should ok",
            "suites": [
                "wechat.js",
                "reply text"
            ],
            "updatePoint": {
                "line": 16,
                "column": 57
            },
            "line": 16,
            "code": "    it('reply({type: \"text\", content: content}) should ok', function () {\n      var result = reply({\n        type: 'text',\n        content: 'hello world'\n      }, 'from', 'to');\n      result.should.be.include('<Content><![CDATA[hello world]]></Content>');\n      result.should.be.include('<MsgType><![CDATA[text]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply(object) should ok",
            "suites": [
                "wechat.js",
                "reply music"
            ],
            "updatePoint": {
                "line": 28,
                "column": 31
            },
            "line": 28,
            "code": "    it('reply(object) should ok', function () {\n      var result = reply({\n        title: \"来段音乐吧\",\n        description: \"一无所有\",\n        musicUrl: \"http://mp3.com/xx.mp3\",\n        hqMusicUrl: \"http://mp3.com/xx.mp3\"\n      }, 'from', 'to');\n      result.should.be.include('<Title><![CDATA[来段音乐吧]]></Title>');\n      result.should.be.include('<MsgType><![CDATA[music]]></MsgType>');\n      result.should.be.include('<Description><![CDATA[一无所有]]></Description>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3]]></MusicUrl>');\n      result.should.be.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3]]></HQMusicUrl>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply(object) with type should ok",
            "suites": [
                "wechat.js",
                "reply music"
            ],
            "updatePoint": {
                "line": 43,
                "column": 41
            },
            "line": 43,
            "code": "    it('reply(object) with type should ok', function () {\n      var result = reply({\n        type: \"music\",\n        content: {\n          title: \"来段音乐吧\",\n          description: \"一无所有\",\n          musicUrl: \"http://mp3.com/xx.mp3\",\n          hqMusicUrl: \"http://mp3.com/xx.mp3\"\n        }\n      }, 'from', 'to');\n      result.should.be.include('<Title><![CDATA[来段音乐吧]]></Title>');\n      result.should.be.include('<MsgType><![CDATA[music]]></MsgType>');\n      result.should.be.include('<Description><![CDATA[一无所有]]></Description>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3]]></MusicUrl>');\n      result.should.be.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3]]></HQMusicUrl>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply(Array) should ok",
            "suites": [
                "wechat.js",
                "reply news"
            ],
            "updatePoint": {
                "line": 69,
                "column": 30
            },
            "line": 69,
            "code": "    it('reply(Array) should ok', function () {\n      var result = reply(news, 'from', 'to');\n      result.should.be.include('<ArticleCount>1</ArticleCount>');\n      result.should.be.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n      result.should.be.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n      result.should.be.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n      result.should.be.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n      result.should.be.include('<MsgType><![CDATA[news]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply({type: \"news\", content: news}) should ok",
            "suites": [
                "wechat.js",
                "reply news"
            ],
            "updatePoint": {
                "line": 80,
                "column": 54
            },
            "line": 80,
            "code": "    it('reply({type: \"news\", content: news}) should ok', function () {\n      var result = reply({\n        type: 'news',\n        content: news\n      }, 'from', 'to');\n      result.should.be.include('<ArticleCount>1</ArticleCount>');\n      result.should.be.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n      result.should.be.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n      result.should.be.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n      result.should.be.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n      result.should.be.include('<MsgType><![CDATA[news]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply({type: \"image\", content: image}) should ok",
            "suites": [
                "wechat.js",
                "reply image"
            ],
            "updatePoint": {
                "line": 99,
                "column": 56
            },
            "line": 99,
            "code": "    it('reply({type: \"image\", content: image}) should ok', function () {\n      var result = reply({\n        type: 'image',\n        content: image\n      }, 'from', 'to');\n      result.should.be.include('<Image><MediaId><![CDATA[mediaId]]></MediaId></Image>');\n      result.should.be.include('<MsgType><![CDATA[image]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply({type: \"voice\", content: voice}) should ok",
            "suites": [
                "wechat.js",
                "reply voice"
            ],
            "updatePoint": {
                "line": 114,
                "column": 56
            },
            "line": 114,
            "code": "    it('reply({type: \"voice\", content: voice}) should ok', function () {\n      var result = reply({\n        type: 'voice',\n        content: voice\n      }, 'from', 'to');\n      result.should.be.include('<Voice><MediaId><![CDATA[mediaId]]></MediaId></Voice>');\n      result.should.be.include('<MsgType><![CDATA[voice]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply({type: \"video\", content: video}) should ok",
            "suites": [
                "wechat.js",
                "reply video"
            ],
            "updatePoint": {
                "line": 130,
                "column": 56
            },
            "line": 130,
            "code": "    it('reply({type: \"video\", content: video}) should ok', function () {\n      var result = reply({\n        type: 'video',\n        content: video\n      }, 'from', 'to');\n      result.should.be.include('<Video><MediaId><![CDATA[mediaId]]></MediaId><Title><![CDATA[]]></Title><Description><![CDATA[]]></Description></Video>');\n      result.should.be.include('<MsgType><![CDATA[video]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply2CustomerService",
            "suites": [
                "wechat.js",
                "reply2CustomerService"
            ],
            "updatePoint": {
                "line": 142,
                "column": 29
            },
            "line": 142,
            "code": "    it('reply2CustomerService', function () {\n      var result = reply2CustomerService('from', 'to');\n      result.should.be.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.not.include('<KfAccount>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "reply2CustomerService with kfAccount",
            "suites": [
                "wechat.js",
                "reply2CustomerService"
            ],
            "updatePoint": {
                "line": 149,
                "column": 44
            },
            "line": 149,
            "code": "    it('reply2CustomerService with kfAccount', function () {\n      var result = reply2CustomerService('from', 'to', 'kf');\n      result.should.be.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.include('<KfAccount><![CDATA[kf]]></KfAccount>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "device text reply(\"hello from device\") should ok",
            "suites": [
                "wechat.js",
                "reply device text"
            ],
            "updatePoint": {
                "line": 158,
                "column": 56
            },
            "line": 158,
            "code": "    it('device text reply(\"hello from device\") should ok', function () {\n      var MsgType = 'device_text';\n      var DeviceType = 'to_user';\n      var DeviceID = 'device_id';\n      var SessionID = 709394;\n      var content = 'hello from device';\n      var message = {\n        MsgType: MsgType,\n        DeviceType: DeviceType,\n        DeviceID: DeviceID,\n        SessionID: SessionID\n      };\n      var result = reply(content, 'from', 'to', message);\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MsgType><![CDATA[' + MsgType + ']]></MsgType>');\n      result.should.be.include('<DeviceType><![CDATA[' + DeviceType + ']]></DeviceType>');\n      result.should.be.include('<DeviceID><![CDATA[' + DeviceID + ']]></DeviceID>');\n      result.should.be.include('<SessionID>' + SessionID + '</SessionID>');\n      result.should.be.include('<Content><![CDATA[' + new Buffer(String(content)).toString('base64') + ']]></Content>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "device binding event reply(\"bind\") should ok",
            "suites": [
                "wechat.js",
                "reply device binding event"
            ],
            "updatePoint": {
                "line": 181,
                "column": 52
            },
            "line": 181,
            "code": "    it('device binding event reply(\"bind\") should ok', function () {\n      var MsgType = 'device_event';\n      var Event = 'bind';\n      var DeviceType = 'to_user';\n      var DeviceID = 'device_id';\n      var SessionID = 709394;\n      var content = 'bind';\n      var message = {\n        MsgType: MsgType,\n        Event: Event,\n        DeviceType: DeviceType,\n        DeviceID: DeviceID,\n        SessionID: SessionID\n      };\n      var result = reply(content, 'from', 'to', message);\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MsgType><![CDATA[' + MsgType + ']]></MsgType>');\n      result.should.be.include('<Event><![CDATA[' + Event + ']]></Event>');\n      result.should.be.include('<DeviceType><![CDATA[' + DeviceType + ']]></DeviceType>');\n      result.should.be.include('<DeviceID><![CDATA[' + DeviceID + ']]></DeviceID>');\n      result.should.be.include('<SessionID>' + SessionID + '</SessionID>');\n      result.should.be.include('<Content><![CDATA[' + new Buffer(String(content)).toString('base64') + ']]></Content>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "WIFI device status reply(\"bind\") should ok",
            "suites": [
                "wechat.js",
                "reply WIFI device status"
            ],
            "updatePoint": {
                "line": 207,
                "column": 50
            },
            "line": 207,
            "code": "    it('WIFI device status reply(\"bind\") should ok', function () {\n      var MsgType = 'device_event';\n      var Event = 'subscribe_status';\n      var DeviceType = 'to_user';\n      var DeviceID = 'device_id';\n      var OpType = 0;\n      var OpenID = 'open_id';\n      var content = 0;\n      var message = {\n        MsgType: MsgType,\n        Event: Event,\n        DeviceType: DeviceType,\n        DeviceID: DeviceID,\n        OpType: OpType,\n        OpenID: OpenID\n      };\n      var result = reply(content, 'from', 'to', message);\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MsgType><![CDATA[device_status]]></MsgType>');\n      result.should.be.include('<DeviceStatus>' + content + '</DeviceStatus>');\n      result.should.be.include('<DeviceType><![CDATA[' + DeviceType + ']]></DeviceType>');\n      result.should.be.include('<DeviceID><![CDATA[' + DeviceID + ']]></DeviceID>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "social function reply({type: \"hardware\", HardWare: {MessageView: \"myrank\", MessageAction: \"ranklist\"}}) should ok",
            "suites": [
                "wechat.js",
                "reply social function"
            ],
            "updatePoint": {
                "line": 233,
                "column": 121
            },
            "line": 233,
            "code": "    it('social function reply({type: \"hardware\", HardWare: {MessageView: \"myrank\", MessageAction: \"ranklist\"}}) should ok', function () {\n      var MsgType = 'hardware';\n      var view = 'myrank';\n      var action = 'ranklist';\n      var content = {\n        type: MsgType,\n        HardWare: {\n          MessageView: view,\n          MessageAction: action\n        }\n      };\n      var result = reply(content, 'from', 'to');\n      result.should.be.include('<FromUserName><![CDATA[from]]></FromUserName>');\n      result.should.be.include('<ToUserName><![CDATA[to]]></ToUserName>');\n      result.should.be.include('<MsgType><![CDATA[' + MsgType + ']]></MsgType>');\n      result.should.be.include('<HardWare><MessageView><![CDATA[' + view + ']]></MessageView><MessageAction><![CDATA[' + action + ']]></MessageAction></HardWare>');\n      result.should.be.include('<FuncFlag>0</FuncFlag>');\n    });",
            "file": "reply.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "session"
            ],
            "updatePoint": {
                "line": 38,
                "column": 17
            },
            "line": 38,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '1'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[收到1]]></Content>');\n        done();\n      });\n    });",
            "file": "session.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "session"
            ],
            "updatePoint": {
                "line": 52,
                "column": 17
            },
            "line": 52,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '+'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[收到+]]></Content>');\n        done();\n      });\n    });",
            "file": "session.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "session"
            ],
            "updatePoint": {
                "line": 66,
                "column": 17
            },
            "line": 66,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '1'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[收到1]]></Content>');\n        done();\n      });\n    });",
            "file": "session.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "session"
            ],
            "updatePoint": {
                "line": 80,
                "column": 17
            },
            "line": 80,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '='\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[result: 2]]></Content>');\n        done();\n      });\n    });",
            "file": "session.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should destroy session",
            "suites": [
                "wechat.js",
                "session"
            ],
            "updatePoint": {
                "line": 94,
                "column": 30
            },
            "line": 94,
            "code": "    it('should destroy session', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'destroy'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[销毁会话]]></Content>');\n        var info = {\n          sp: 'nvshen',\n          user: 'diaosi',\n          type: 'text',\n          text: '='\n        };\n        request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n          if (err) return done(err);\n          var body = res.text.toString();\n          body.should.include('<Content><![CDATA[result: undefined]]></Content>');\n          done();\n        });\n      });\n    });",
            "file": "session.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply hehe when not trigger the list",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 48,
                "column": 51
            },
            "line": 48,
            "code": "    it('should reply hehe when not trigger the list', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'a'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply the list when trigger the list",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 62,
                "column": 51
            },
            "line": 62,
            "code": "    it('should reply the list when trigger the list', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'list'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[回复a查看我的性别\\n回复b查看我的年龄\\n回复c查看我的性取向\\n回复nowait退出问答]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply with list",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 76,
                "column": 30
            },
            "line": 76,
            "code": "    it('should reply with list', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'a'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[我是个妹纸哟]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply with list also",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 90,
                "column": 35
            },
            "line": 90,
            "code": "    it('should reply with list also', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'b'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[我今年18岁]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply with text",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 104,
                "column": 30
            },
            "line": 104,
            "code": "    it('should reply with text', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'c'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[这样的事情怎么好意思告诉你啦- -]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply with default handle",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 118,
                "column": 40
            },
            "line": 118,
            "code": "    it('should reply with default handle', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'd'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply 500 when undefined list",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 132,
                "column": 44
            },
            "line": 132,
            "code": "    it('should reply 500 when undefined list', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'undefinedlist'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(500).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('UndefinedListError');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should reply thanks when nowait",
            "suites": [
                "wechat.js",
                "talk"
            ],
            "updatePoint": {
                "line": 146,
                "column": 39
            },
            "line": 146,
            "code": "    it('should reply thanks when nowait', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: 'nowait'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('thanks');\n        done();\n      });\n    });",
            "file": "talk.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat_encrypted.js",
                "get"
            ],
            "updatePoint": {
                "line": 67,
                "column": 17
            },
            "line": 67,
            "code": "    it('should ok', function (done) {\n      var echoStr = 'node rock';\n\n      var _tail = tail(cfg.token, cryptor.encrypt(echoStr), true);\n\n      request(app).get('/wechat?' + _tail).expect(200).expect(echoStr, done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should not ok",
            "suites": [
                "wechat_encrypted.js",
                "get"
            ],
            "updatePoint": {
                "line": 74,
                "column": 21
            },
            "line": 74,
            "code": "    it('should not ok', function (done) {\n      var echoStr = 'node rock';\n\n      var _tail = tail('fake_token', cryptor.encrypt(echoStr), true);\n\n      request(app).get('/wechat?' + _tail).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 500",
            "suites": [
                "wechat_encrypted.js",
                "post"
            ],
            "updatePoint": {
                "line": 83,
                "column": 18
            },
            "line": 83,
            "code": "    it('should 500', function (done) {\n      request(app).post('/wechat?' + tail(cfg.token, cryptor.encrypt(''), false)).expect(500).expect(/body is empty/, done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat_encrypted.js",
                "post"
            ],
            "updatePoint": {
                "line": 86,
                "column": 36
            },
            "line": 86,
            "code": "    it('should 401 invalid signature', function (done) {\n      var xml = '<xml></xml>';\n      var data = postData('fake_token', cryptor.encrypt(xml));\n      request(app).post('/wechat?' + data.querystring).send(data.xml).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat_encrypted.js",
                "post"
            ],
            "updatePoint": {
                "line": 91,
                "column": 18
            },
            "line": 91,
            "code": "    it('should 200', function (done) {\n      var xml = '<xml></xml>';\n      var data = postData(cfg.token, cryptor.encrypt(xml));\n      request(app).post('/wechat?' + data.querystring).send(data.xml).expect(200, done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 500",
            "suites": [
                "wechat_encrypted.js",
                "put"
            ],
            "updatePoint": {
                "line": 98,
                "column": 18
            },
            "line": 98,
            "code": "    it('should 500', function (done) {\n      request(app).put('/wechat?' + tail(cfg.token, cryptor.encrypt(''), false)).expect(501).expect(/Not Implemented/, done);\n    });",
            "file": "wechat_encrypted.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "multi wechat should ok",
            "suites": [
                "wechat.js"
            ],
            "updatePoint": {
                "line": 21,
                "column": 28
            },
            "line": 21,
            "code": "  it('multi wechat should ok', function (done) {\n    var q = {\n      timestamp: new Date().getTime(),\n      nonce: parseInt(Math.random() * 10e10, 10)\n    };\n    var s = ['some token', q.timestamp, q.nonce].sort().join('');\n    q.signature = require('crypto').createHash('sha1').update(s).digest('hex');\n    q.echostr = 'hehe';\n    request(app).get('/wechat?' + querystring.stringify(q)).expect(200).expect('hehe', done);\n  });",
            "file": "wechat_multi.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "no handler",
                "respond"
            ],
            "updatePoint": {
                "line": 23,
                "column": 17
            },
            "line": 23,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'hehe',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) {\n          return done(err);\n        }\n\n        var body = res.text.toString();\n        body.should.include('next');\n        done();\n      });\n    });",
            "file": "wechat_nohandle.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat_nosignaturecheck.js",
                "valid GET"
            ],
            "updatePoint": {
                "line": 79,
                "column": 18
            },
            "line": 79,
            "code": "    it('should 200', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(200).expect('hehe', done);\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 89,
                "column": 17
            },
            "line": 89,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with req.rawBody",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 107,
                "column": 34
            },
            "line": 107,
            "code": "    it('should ok with req.rawBody', function (done) {\n      request(app).post('/wechat' + tail(false) + \"&rawBody=true\").send('').expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with text type object",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 119,
                "column": 39
            },
            "line": 119,
            "code": "    it('should ok with text type object', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'test',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[test]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[text object]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with news",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 137,
                "column": 27
            },
            "line": 137,
            "code": "    it('should ok with news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[gaofushuai]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with music",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 159,
                "column": 28
            },
            "line": 159,
            "code": "    it('should ok with music', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[hehe]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Music>');\n        body.should.include('</Music>');\n        body.should.include('<Title><![CDATA[来段音乐吧<]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有>]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3?a=b&c=d]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3?foo=bar]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with event location_select",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 182,
                "column": 44
            },
            "line": 182,
            "code": "    it('should ok with event location_select', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'ls',\n        type: 'event',\n        xPos: '80',\n        yPos: '70',\n        label: 'alibaba',\n        event: 'location_select',\n        eventKey: 'sendLocation',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[ls]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[sendLocation]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with event pic_weixin",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 205,
                "column": 39
            },
            "line": 205,
            "code": "    it('should ok with event pic_weixin', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'pic_weixin',\n        type: 'event',\n        event: 'pic_weixin',\n        eventKey: 'sendPic',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[pic_weixin]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[sendPic]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with customer service",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 225,
                "column": 39
            },
            "line": 225,
            "code": "    it('should ok with customer service', function (done) {\n      var info = {\n        sp: 'gaofushuai',\n        user: 'cs',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[cs]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[gaofushuai]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with transfer info to kfAccount",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 242,
                "column": 49
            },
            "line": 242,
            "code": "    it('should ok with transfer info to kfAccount', function (done) {\n      var info = {\n        sp: 'zhong',\n        user: 'kf',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[kf]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[zhong]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n        body.should.include('<KfAccount><![CDATA[test1@test]]></KfAccount>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with empty message",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 260,
                "column": 36
            },
            "line": 260,
            "code": "    it('should ok with empty message', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'empty',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.match('');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with web wechat message",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 274,
                "column": 41
            },
            "line": 274,
            "code": "    it('should ok with web wechat message', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'web',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[web]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[web message ok]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should pass to next",
            "suites": [
                "wechat_nosignaturecheck.js",
                "respond"
            ],
            "updatePoint": {
                "line": 292,
                "column": 27
            },
            "line": 292,
            "code": "    it('should pass to next', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'next',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail(false)).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[hehe]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Music>');\n        body.should.include('</Music>');\n        body.should.include('<Title><![CDATA[来段音乐吧<]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有>]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3?a=b&c=d]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3?foo=bar]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat_nosignaturecheck.js",
                "exception"
            ],
            "updatePoint": {
                "line": 327,
                "column": 17
            },
            "line": 327,
            "code": "    it('should ok', function () {\n      request(app).post('/wechat' + tail(false)).send(xml).expect(200).end(function (err, res) {\n        if (err) return done(err);\n      });\n    });",
            "file": "wechat_nosignature.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js",
                "valid GET"
            ],
            "updatePoint": {
                "line": 75,
                "column": 18
            },
            "line": 75,
            "code": "    it('should 401', function (done) {\n      request(app).get('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat.js",
                "valid GET"
            ],
            "updatePoint": {
                "line": 78,
                "column": 18
            },
            "line": 78,
            "code": "    it('should 200', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      var s = ['some token', q.timestamp, q.nonce].sort().join('');\n      q.signature = require('crypto').createHash('sha1').update(s).digest('hex');\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(200).expect('hehe', done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js",
                "valid GET"
            ],
            "updatePoint": {
                "line": 88,
                "column": 36
            },
            "line": 88,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js",
                "valid POST"
            ],
            "updatePoint": {
                "line": 99,
                "column": 18
            },
            "line": 99,
            "code": "    it('should 401', function (done) {\n      request(app).post('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js",
                "valid POST"
            ],
            "updatePoint": {
                "line": 102,
                "column": 36
            },
            "line": 102,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).post('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat.js",
                "valid other method"
            ],
            "updatePoint": {
                "line": 113,
                "column": 18
            },
            "line": 113,
            "code": "    it('should 200', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      var s = ['some token', q.timestamp, q.nonce].sort().join('');\n      q.signature = require('crypto').createHash('sha1').update(s).digest('hex');\n      q.echostr = 'hehe';\n      request(app).head('/wechat?' + querystring.stringify(q)).expect(501, done);\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 125,
                "column": 17
            },
            "line": 125,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with req.rawBody",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 143,
                "column": 34
            },
            "line": 143,
            "code": "    it('should ok with req.rawBody', function (done) {\n      request(app).post('/wechat' + tail() + \"&rawBody=true\").send('').expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with text type object",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 155,
                "column": 39
            },
            "line": 155,
            "code": "    it('should ok with text type object', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'test',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[test]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[text object]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with news",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 173,
                "column": 27
            },
            "line": 173,
            "code": "    it('should ok with news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[gaofushuai]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with music",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 195,
                "column": 28
            },
            "line": 195,
            "code": "    it('should ok with music', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[hehe]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Music>');\n        body.should.include('</Music>');\n        body.should.include('<Title><![CDATA[来段音乐吧<]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有>]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3?a=b&c=d]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3?foo=bar]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with event location_select",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 218,
                "column": 44
            },
            "line": 218,
            "code": "    it('should ok with event location_select', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'ls',\n        type: 'event',\n        xPos: '80',\n        yPos: '70',\n        label: 'alibaba',\n        event: 'location_select',\n        eventKey: 'sendLocation',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[ls]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[sendLocation]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with event pic_weixin",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 241,
                "column": 39
            },
            "line": 241,
            "code": "    it('should ok with event pic_weixin', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'pic_weixin',\n        type: 'event',\n        event: 'pic_weixin',\n        eventKey: 'sendPic',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[pic_weixin]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[sendPic]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with customer service",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 261,
                "column": 39
            },
            "line": 261,
            "code": "    it('should ok with customer service', function (done) {\n      var info = {\n        sp: 'gaofushuai',\n        user: 'cs',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[cs]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[gaofushuai]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with transfer info to kfAccount",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 278,
                "column": 49
            },
            "line": 278,
            "code": "    it('should ok with transfer info to kfAccount', function (done) {\n      var info = {\n        sp: 'zhong',\n        user: 'kf',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[kf]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[zhong]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[transfer_customer_service]]></MsgType>');\n        body.should.include('<KfAccount><![CDATA[test1@test]]></KfAccount>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with empty message",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 296,
                "column": 36
            },
            "line": 296,
            "code": "    it('should ok with empty message', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'empty',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.match('');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with web wechat message",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 310,
                "column": 41
            },
            "line": 310,
            "code": "    it('should ok with web wechat message', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'web',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[web]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[web message ok]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should pass to next",
            "suites": [
                "wechat.js",
                "respond"
            ],
            "updatePoint": {
                "line": 328,
                "column": 27
            },
            "line": 328,
            "code": "    it('should pass to next', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'next',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[hehe]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Music>');\n        body.should.include('</Music>');\n        body.should.include('<Title><![CDATA[来段音乐吧<]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有>]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3?a=b&c=d]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3?foo=bar]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js",
                "exception"
            ],
            "updatePoint": {
                "line": 363,
                "column": 17
            },
            "line": 363,
            "code": "    it('should ok', function () {\n      request(app).post('/wechat' + tail()).send(xml).expect(200).end(function (err, res) {\n        if (err) return done(err);\n      });\n    });",
            "file": "wechat.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js 0.2.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 52,
                "column": 18
            },
            "line": 52,
            "code": "    it('should 401', function (done) {\n      request(app).get('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat.js 0.2.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 55,
                "column": 18
            },
            "line": 55,
            "code": "    it('should 200', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      var s = ['some token', q.timestamp, q.nonce].sort().join('');\n      q.signature = require('crypto').createHash('sha1').update(s).digest('hex');\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(200).expect('hehe', done);\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js 0.2.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 65,
                "column": 36
            },
            "line": 65,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js 0.2.0",
                "valid POST"
            ],
            "updatePoint": {
                "line": 76,
                "column": 18
            },
            "line": 76,
            "code": "    it('should 401', function (done) {\n      request(app).post('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js 0.2.0",
                "valid POST"
            ],
            "updatePoint": {
                "line": 79,
                "column": 36
            },
            "line": 79,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).post('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 90,
                "column": 17
            },
            "line": 90,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with news",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 108,
                "column": 27
            },
            "line": 108,
            "code": "    it('should ok with news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[gaofushuai]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when image",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 130,
                "column": 28
            },
            "line": 130,
            "code": "    it('should ok when image', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'image',\n        pic: 'http://mmsns.qpic.cn/mmsns/bfc815ygvIWcaaZlEXJV7NzhmA3Y2fc4eBOxLjpPI60Q1Q6ibYicwg/0'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[image]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when location",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 148,
                "column": 31
            },
            "line": 148,
            "code": "    it('should ok when location', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'location',\n        xPos: 'xPos',\n        yPos: 'yPos',\n        scale: '100',\n        label: 'label'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[location]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when voice",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 169,
                "column": 28
            },
            "line": 169,
            "code": "    it('should ok when voice', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'voice',\n        mediaId: 'id',\n        format: 'format'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[voice]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when link",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 188,
                "column": 27
            },
            "line": 188,
            "code": "    it('should ok when link', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'link',\n        title: 'good link',\n        description: '1024',\n        url: 'http://where.is.caoliu/'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[link]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when event location",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 208,
                "column": 37
            },
            "line": 208,
            "code": "    it('should ok when event location', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'event',\n        event: 'LOCATION',\n        latitude: '23.137466',\n        longitude: '113.352425',\n        precision: '119.385040'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[event]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when event enter",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 229,
                "column": 34
            },
            "line": 229,
            "code": "    it('should ok when event enter', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'event',\n        event: 'ENTER'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[event]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply text",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 247,
                "column": 28
            },
            "line": 247,
            "code": "    it('should ok reply text', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply news",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 262,
                "column": 28
            },
            "line": 262,
            "code": "    it('should ok reply news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply music",
            "suites": [
                "wechat.js 0.2.0",
                "respond"
            ],
            "updatePoint": {
                "line": 281,
                "column": 29
            },
            "line": 281,
            "code": "    it('should ok reply music', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Title><![CDATA[来段音乐吧]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat2.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js 0.3.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 51,
                "column": 18
            },
            "line": 51,
            "code": "    it('should 401', function (done) {\n      request(app).get('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 200",
            "suites": [
                "wechat.js 0.3.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 54,
                "column": 18
            },
            "line": 54,
            "code": "    it('should 200', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      var s = ['some token', q.timestamp, q.nonce].sort().join('');\n      q.signature = require('crypto').createHash('sha1').update(s).digest('hex');\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(200).expect('hehe', done);\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js 0.3.0",
                "valid GET"
            ],
            "updatePoint": {
                "line": 64,
                "column": 36
            },
            "line": 64,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).get('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401",
            "suites": [
                "wechat.js 0.3.0",
                "valid POST"
            ],
            "updatePoint": {
                "line": 75,
                "column": 18
            },
            "line": 75,
            "code": "    it('should 401', function (done) {\n      request(app).post('/wechat').expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should 401 invalid signature",
            "suites": [
                "wechat.js 0.3.0",
                "valid POST"
            ],
            "updatePoint": {
                "line": 78,
                "column": 36
            },
            "line": 78,
            "code": "    it('should 401 invalid signature', function (done) {\n      var q = {\n        timestamp: new Date().getTime(),\n        nonce: parseInt(Math.random() * 10e10, 10)\n      };\n      q.signature = 'invalid_signature';\n      q.echostr = 'hehe';\n      request(app).post('/wechat?' + querystring.stringify(q)).expect(401).expect('Invalid signature', done);\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 89,
                "column": 17
            },
            "line": 89,
            "code": "    it('should ok', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok with news",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 107,
                "column": 27
            },
            "line": 107,
            "code": "    it('should ok with news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[gaofushuai]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when image",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 129,
                "column": 28
            },
            "line": 129,
            "code": "    it('should ok when image', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'image',\n        pic: 'http://mmsns.qpic.cn/mmsns/bfc815ygvIWcaaZlEXJV7NzhmA3Y2fc4eBOxLjpPI60Q1Q6ibYicwg/0'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[image]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when location",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 147,
                "column": 31
            },
            "line": 147,
            "code": "    it('should ok when location', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'location',\n        xPos: 'xPos',\n        yPos: 'yPos',\n        scale: '100',\n        label: 'label'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[location]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when voice",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 168,
                "column": 28
            },
            "line": 168,
            "code": "    it('should ok when voice', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'voice',\n        mediaId: 'id',\n        format: 'format'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[voice]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when link",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 187,
                "column": 27
            },
            "line": 187,
            "code": "    it('should ok when link', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'link',\n        title: 'good link',\n        description: '1024',\n        url: 'http://where.is.caoliu/'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[link]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when event location",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 207,
                "column": 37
            },
            "line": 207,
            "code": "    it('should ok when event location', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'event',\n        event: 'LOCATION',\n        latitude: '23.137466',\n        longitude: '113.352425',\n        precision: '119.385040'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[event]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok when event enter",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 228,
                "column": 34
            },
            "line": 228,
            "code": "    it('should ok when event enter', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'event',\n        event: 'ENTER'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<ToUserName><![CDATA[diaosi]]></ToUserName>');\n        body.should.include('<FromUserName><![CDATA[nvshen]]></FromUserName>');\n        body.should.match(/<CreateTime>\\d{13}<\\/CreateTime>/);\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[event]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply text",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 246,
                "column": 28
            },
            "line": 246,
            "code": "    it('should ok reply text', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'diaosi',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[text]]></MsgType>');\n        body.should.include('<Content><![CDATA[hehe]]></Content>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply news",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 261,
                "column": 28
            },
            "line": 261,
            "code": "    it('should ok reply news', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'gaofushuai',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[news]]></MsgType>');\n        body.should.include('<ArticleCount>1</ArticleCount>');\n        body.should.include('<Title><![CDATA[你来我家接我吧]]></Title>');\n        body.should.include('<Description><![CDATA[这是女神与高富帅之间的对话]]></Description>');\n        body.should.include('<PicUrl><![CDATA[http://nodeapi.cloudfoundry.com/qrcode.jpg]]></PicUrl>');\n        body.should.include('<Url><![CDATA[http://nodeapi.cloudfoundry.com/]]></Url>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        },
        {
            "name": "should ok reply music",
            "suites": [
                "wechat.js 0.3.0",
                "respond"
            ],
            "updatePoint": {
                "line": 280,
                "column": 29
            },
            "line": 280,
            "code": "    it('should ok reply music', function (done) {\n      var info = {\n        sp: 'nvshen',\n        user: 'hehe',\n        type: 'text',\n        text: '测试中'\n      };\n      request(app).post('/wechat' + tail()).send(template(info)).expect(200).end(function (err, res) {\n        if (err) return done(err);\n        var body = res.text.toString();\n        body.should.include('<MsgType><![CDATA[music]]></MsgType>');\n        body.should.include('<Title><![CDATA[来段音乐吧]]></Title>');\n        body.should.include('<Description><![CDATA[一无所有]]></Description>');\n        body.should.include('<MusicUrl><![CDATA[http://mp3.com/xx.mp3]]></MusicUrl>');\n        body.should.include('<HQMusicUrl><![CDATA[http://mp3.com/xx.mp3]]></HQMusicUrl>');\n        done();\n      });\n    });",
            "file": "wechat3.test.js",
            "skipped": false,
            "dir": "test"
        }
    ],
    "badge": "node-webot__wechat.svg"
}