{"repo":"typeorm/typeorm","url":"https://github.com/typeorm/typeorm","branch":"master","configs":[{"package":"typeorm","lang":"js","dir":"test","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"test if DataSource calls `useDataSource` of the provided entities","suites":["base entity"],"updatePoint":{"line":7,"column":71,"index":315},"line":7,"code":"  it(\"test if DataSource calls `useDataSource` of the provided entities\", async () => {\n    const dataSourceOptions = setupTestingConnections({\n      entities: [User],\n      enabledDrivers: [\"sqlite\"]\n    });\n    if (!dataSourceOptions.length) return;\n    const dataSource = new DataSource(dataSourceOptions[0]);\n    await dataSource.initialize();\n    await dataSource.synchronize(true);\n    await User.save({\n      name: \"Timber Saw\"\n    });\n    const timber = await User.findOneByOrFail({\n      name: \"Timber Saw\"\n    });\n    expect(timber).to.be.eql({\n      id: 1,\n      name: \"Timber Saw\"\n    });\n  });","file":"functional/base-entity/base-entity.test.ts","skipped":false,"dir":"test"},{"name":"withRepository must work properly in transactions","suites":["custom repository"],"updatePoint":{"line":13,"column":55,"index":580},"line":13,"code":"  it(\"withRepository must work properly in transactions\", () => Promise.all(dataSources.map(async dataSource => {\n    const CustomRepository = dataSource.getRepository(User).extend({\n      findOneByName(name) {\n        return this.findOneBy({\n          name\n        });\n      }\n\n    }); // check if custom repository function works\n\n    await CustomRepository.save({\n      name: \"Timber Saw\"\n    });\n    const user = await CustomRepository.findOneByName(\"Timber Saw\");\n    expect(user).to.be.eql({\n      id: 1,\n      name: \"Timber Saw\"\n    }); // now check it in the transaction\n\n    await dataSource.manager.transaction(async transactionalManager => {\n      const transactionalCustomRepository = await transactionalManager.withRepository(CustomRepository);\n      await CustomRepository.save({\n        name: \"Natures Prophet\"\n      });\n      const user = await transactionalCustomRepository.findOneByName(\"Natures Prophet\");\n      expect(user).to.be.eql({\n        id: 2,\n        name: \"Natures Prophet\"\n      });\n    });\n  })));","file":"functional/custom-repository/custom-repository.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in regular arrays","suites":["find options > find operators > ArrayContainedBy"],"updatePoint":{"line":43,"column":43,"index":1471},"line":43,"code":"  it(\"should find entries in regular arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayContainedBy([\"dmitry\", \"olimjon\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayContainedBy([\"olimjon\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n  })));","file":"functional/find-options/array-contained-by-operator/array-contained-by-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in jsonb","suites":["find options > find operators > ArrayContainedBy"],"updatePoint":{"line":102,"column":34,"index":2849},"line":102,"code":"  it(\"should find entries in jsonb\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayContainedBy([{\n          name: \"typescript\"\n        }, {\n          name: \"programming\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayContainedBy([{\n          name: \"programming\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n  })));","file":"functional/find-options/array-contained-by-operator/array-contained-by-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in enum arrays","suites":["find options > find operators > ArrayContainedBy"],"updatePoint":{"line":167,"column":40,"index":4335},"line":167,"code":"  it(\"should find entries in enum arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayContainedBy([PostStatus.draft, PostStatus.published])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayContainedBy([PostStatus.published])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }, {\n      id: 3,\n      title: \"Post #3\",\n      authors: [],\n      categories: [],\n      statuses: []\n    }]);\n  })));","file":"functional/find-options/array-contained-by-operator/array-contained-by-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in regular arrays","suites":["find options > find operators > ArrayContains"],"updatePoint":{"line":43,"column":43,"index":1462},"line":43,"code":"  it(\"should find entries in regular arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayContains([\"dmitry\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayContains([\"olimjon\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-contains-operator/array-contains-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in jsonb","suites":["find options > find operators > ArrayContains"],"updatePoint":{"line":92,"column":34,"index":2677},"line":92,"code":"  it(\"should find entries in jsonb\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayContains([{\n          name: \"typescript\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayContains([{\n          name: \"programming\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-contains-operator/array-contains-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in enum arrays","suites":["find options > find operators > ArrayContains"],"updatePoint":{"line":145,"column":40,"index":3968},"line":145,"code":"  it(\"should find entries in enum arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayContains([PostStatus.draft])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayContains([PostStatus.published])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-contains-operator/array-contains-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in regular arrays","suites":["find options > find operators > ArrayOverlap"],"updatePoint":{"line":43,"column":43,"index":1459},"line":43,"code":"  it(\"should find entries in regular arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayOverlap([\"dmitry\", \"umed\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        authors: ArrayOverlap([\"olimjon\", \"umed\"])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-overlap/array-overlap-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in jsonb","suites":["find options > find operators > ArrayOverlap"],"updatePoint":{"line":92,"column":34,"index":2688},"line":92,"code":"  it(\"should find entries in jsonb\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayOverlap([{\n          name: \"typescript\"\n        }, {\n          name: \"python\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        categories: ArrayOverlap([{\n          name: \"programming\"\n        }, {\n          name: \"python\"\n        }])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-overlap/array-overlap-operator.test.ts","skipped":false,"dir":"test"},{"name":"should find entries in enum arrays","suites":["find options > find operators > ArrayOverlap"],"updatePoint":{"line":149,"column":40,"index":4053},"line":149,"code":"  it(\"should find entries in enum arrays\", () => Promise.all(connections.map(async connection => {\n    await prepareData(connection.manager);\n    const loadedPost1 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayOverlap([PostStatus.draft, PostStatus.unknown])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost1.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }]);\n    const loadedPost2 = await connection.manager.find(Post, {\n      where: {\n        statuses: ArrayOverlap([PostStatus.published, PostStatus.unknown])\n      },\n      order: {\n        id: \"asc\"\n      }\n    });\n    loadedPost2.should.be.eql([{\n      id: 1,\n      title: \"Post #1\",\n      authors: [\"dmitry\", \"olimjon\"],\n      categories: [{\n        name: \"typescript\"\n      }, {\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.draft, PostStatus.published]\n    }, {\n      id: 2,\n      title: \"Post #2\",\n      authors: [\"olimjon\"],\n      categories: [{\n        name: \"programming\"\n      }],\n      statuses: [PostStatus.published]\n    }]);\n  })));","file":"functional/find-options/array-overlap/array-overlap-operator.test.ts","skipped":false,"dir":"test"},{"name":"should work without errors","suites":["indices > basic unique index test","unique index"],"updatePoint":{"line":13,"column":34,"index":644},"line":13,"code":"    it(\"should work without errors\", () => Promise.all(connections.map(async connection => {\n      const customer = new Customer();\n      customer.nameEnglish = \"Umed\";\n      customer.nameHebrew = \"Uma\";\n      await connection.manager.save(customer);\n    })));","file":"functional/indices/basic-unique-index-test/basic-unique-index-test.ts","skipped":false,"dir":"test"},{"name":"should work without errors","suites":["indices > embeds index test","embeddeds index"],"updatePoint":{"line":14,"column":34,"index":685},"line":14,"code":"    it(\"should work without errors\", () => Promise.all(connections.map(async connection => {\n      const customer = new Customer();\n      customer.nameEnglish = \"Umed\";\n      customer.nameHebrew = \"Uma\";\n      customer.profile = new Profile();\n      customer.profile.job = \"Developer\";\n      customer.profile.address = \"Anywhere\";\n      await connection.manager.save(customer);\n    })));","file":"functional/indices/embeddeds-index-test/embeddeds-unique-index-test.ts","skipped":false,"dir":"test"}]}