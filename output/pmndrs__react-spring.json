{"repo":"pmndrs/react-spring","url":"https://github.com/pmndrs/react-spring","branch":"master","configs":[{"package":"react-spring--root","lang":"js","dir":"cypress","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@react-spring/core","lang":"ts","dir":"packages/core/test","framework":"jest","pattern":"**/*.{js,ts}"},{"package":"@react-spring/parallax","lang":"ts","dir":"packages/parallax/test","framework":"jest","pattern":"**/*.{js,ts}"}],"tests":[{"name":"should translate layers as expected","suites":["Parallax - vertical"],"updatePoint":{"line":8,"column":41,"index":265},"line":8,"code":"  it('should translate layers as expected', () => {\n    // initial snapshot\n    console.log(HEIGHT, WIDTH);\n    cy.findByTestId('container').matchImageSnapshot('vertical #1', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // initial layer positions\n    cy.findByTestId('default-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, ${HEIGHT * 2}px, 0px)`));\n    cy.findByTestId('opposite-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(${HEIGHT * 2}px, 0px, 0px)`));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'absolute').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, ${HEIGHT}px, 0px)`));\n\n    // scroll to next page\n    cy.findByTestId('container').scrollTo(0, HEIGHT);\n    // wait for animation to finish\n    cy.wait(ANIMATION_WAIT);\n\n    // halfway snapshot\n    cy.findByTestId('container').matchImageSnapshot('vertical #2', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // halfway layer positions\n    cy.findByTestId('default-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, ${HEIGHT}px, 0px)`));\n    cy.findByTestId('opposite-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(${HEIGHT}px, 0px, 0px)`));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'sticky').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, 0px, 0px)`));\n\n    // scroll to last page\n    cy.findByTestId('container').scrollTo('bottom');\n    // wait for animation again\n    cy.wait(ANIMATION_WAIT);\n\n    // final snapshot\n    cy.findByTestId('container').matchImageSnapshot('vertical #3', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // final layer positions\n    cy.findAllByTestId(/-layer/).each(layer => expect(layer[0].style.transform).to.equal('translate3d(0px, 0px, 0px)'));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'sticky');\n  });","file":"integration/parallax.spec.js","skipped":false,"dir":"cypress"},{"name":"should scroll to the correct page with scrollTo","suites":["Parallax - vertical"],"updatePoint":{"line":64,"column":53,"index":2593},"line":64,"code":"  it('should scroll to the correct page with scrollTo', () => {\n    cy.findByRole('button').click();\n    cy.findByTestId('container').invoke('scrollTop').should('equal', HEIGHT);\n  });","file":"integration/parallax.spec.js","skipped":false,"dir":"cypress"},{"name":"should translate layers as expected","suites":["Parallax - horizontal"],"updatePoint":{"line":75,"column":41,"index":2968},"line":75,"code":"  it('should translate layers as expected', () => {\n    // initial snapshot\n    cy.findByTestId('container').matchImageSnapshot('horizontal #1', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // initial layer positions\n    cy.findByTestId('default-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(${WIDTH * 2}px, 0px, 0px)`));\n    cy.findByTestId('opposite-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, ${WIDTH * 2}px, 0px)`));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'absolute').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(${WIDTH}px, 0px, 0px)`));\n\n    // scroll to next page\n    cy.findByTestId('container').scrollTo(WIDTH, 0);\n    // wait for animation to finish\n    cy.wait(ANIMATION_WAIT);\n\n    // halfway snapshot\n    cy.findByTestId('container').matchImageSnapshot('horizontal #2', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // halfway layer positions\n    cy.findByTestId('default-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(${WIDTH}px, 0px, 0px)`));\n    cy.findByTestId('opposite-layer').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, ${WIDTH}px, 0px)`));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'sticky').then(layer => layer[0].style.transform).then(transform => expect(transform).to.equal(`translate3d(0px, 0px, 0px)`));\n\n    // a possible bug in cypress causes this to fail with `yarn cypress` (`cypress open`)\n    // but will pass with `yarn test` (`cypress run`)\n    cy.findByTestId('container').scrollTo('right');\n    // wait for animation again\n    cy.wait(ANIMATION_WAIT);\n\n    // final snapshot\n    cy.findByTestId('container').matchImageSnapshot('horizontal #3', {\n      clip: {\n        x: 0,\n        y: 0,\n        width: WIDTH,\n        height: HEIGHT\n      }\n    });\n\n    // final layer positions\n    cy.findAllByTestId(/-layer/).each(layer => expect(layer[0].style.transform).to.equal('translate3d(0px, 0px, 0px)'));\n    cy.findByTestId('sticky-layer').should('have.css', 'position', 'sticky');\n  });","file":"integration/parallax.spec.js","skipped":false,"dir":"cypress"},{"name":"should scroll to the correct page with scrollTo","suites":["Parallax - horizontal"],"updatePoint":{"line":131,"column":53,"index":5380},"line":131,"code":"  it('should scroll to the correct page with scrollTo', () => {\n    cy.findByRole('button').click();\n    cy.findByTestId('container').invoke('scrollLeft').should('equal', WIDTH);\n  });","file":"integration/parallax.spec.js","skipped":false,"dir":"cypress"}]}