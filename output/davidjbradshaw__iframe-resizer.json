{"repo":"davidjbradshaw/iframe-resizer","url":"https://github.com/davidjbradshaw/iframe-resizer","branch":"master","configs":[{"package":"iframe-resizer","lang":"js","dir":"spec","framework":"jasmine","pattern":"**/*.{js,ts}"}],"tests":[{"name":"should add an ID","suites":["iFrame init"],"line":30,"updatePoint":{"line":30,"column":24},"code":"    it('should add an ID', function () {\n      expect(iframe.id.split('-')[0]).toBe(id);\n    });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init","methods"],"line":34,"updatePoint":{"line":34,"column":44},"code":"      it('should create iFrameResizer object', function () {\n        expect(iframe.iFrameResizer).toBeDefined();\n      });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"should create a close method","suites":["iFrame init","methods"],"line":37,"updatePoint":{"line":37,"column":38},"code":"      it('should create a close method', function () {\n        expect(iframe.iFrameResizer.close).toBeDefined();\n      });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"should create a resize method","suites":["iFrame init","methods"],"line":40,"updatePoint":{"line":40,"column":39},"code":"      it('should create a resize method', function () {\n        expect(iframe.iFrameResizer.resize).toBeDefined();\n      });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"should create a moveToAnchor method","suites":["iFrame init","methods"],"line":43,"updatePoint":{"line":43,"column":45},"code":"      it('should create a moveToAnchor method', function () {\n        expect(iframe.iFrameResizer.moveToAnchor).toBeDefined();\n      });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"should create a sendMessage method","suites":["iFrame init","methods"],"line":46,"updatePoint":{"line":46,"column":44},"code":"      it('should create a sendMessage method', function () {\n        expect(iframe.iFrameResizer.sendMessage).toBeDefined();\n      });","file":"_initSpec.js","skipped":false,"dir":"spec"},{"name":"requested from host page","suites":["jump to anchor"],"line":12,"updatePoint":{"line":12,"column":32},"code":"    it('requested from host page', function (done) {\n      var iframe1 = iFrameResize({\n        log: log,\n        id: 'anchor1'\n      })[0];\n      spyOnIFramePostMessage(iframe1);\n      setTimeout(function () {\n        iframe1.iFrameResizer.moveToAnchor('testAnchor');\n        expect(iframe1.contentWindow.postMessage).toHaveBeenCalledWith('[iFrameSizer]moveToAnchor:testAnchor', getTarget(iframe1));\n        tearDown(iframe1);\n        done();\n      }, 100);\n    });","file":"anchorSpec.js","skipped":false,"dir":"spec"},{"name":"mock incoming message","suites":["jump to anchor"],"line":25,"updatePoint":{"line":25,"column":29},"code":"    it('mock incoming message', function (done) {\n      iframe2 = iFrameResize({\n        log: log,\n        id: 'anchor2',\n        onScroll: function (position) {\n          expect(position.x).toBe(8);\n          expect(position.y).toBeGreaterThan(8);\n          done();\n        }\n      })[0];\n      mockMsgFromIFrame(iframe2, 'inPageLink:#anchorParentTest');\n    });","file":"anchorSpec.js","skipped":false,"dir":"spec"},{"name":"mock incoming message to parent","suites":["jump to anchor"],"line":37,"updatePoint":{"line":37,"column":39},"code":"    it('mock incoming message to parent', function (done) {\n      iframe3 = iFrameResize({\n        log: log,\n        id: 'anchor3'\n      })[0];\n      window.parentIFrame = {\n        moveToAnchor: function () {\n          done();\n        }\n      };\n      mockMsgFromIFrame(iframe3, 'inPageLink:#anchorParentTest2');\n    });","file":"anchorSpec.js","skipped":false,"dir":"spec"},{"name":"autoResize","suites":["ParentIFrame methods: "],"line":46,"updatePoint":{"line":46,"column":18},"code":"    it('autoResize', function () {\n      win.parentIFrame.autoResize(true);\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Animation Start');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Animation Iteration');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Animation End');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Orientation Change');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Input');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Print');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Transition End');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Mouse Up');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: Mouse Down');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Add event listener: IFrame Resized');\n      win.parentIFrame.autoResize(false);\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Animation Start');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Animation Iteration');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Animation End');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Orientation Change');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Input');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Print');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Transition End');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Mouse Up');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: Mouse Down');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Remove event listener: IFrame Resized');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"Get ID of iFrame is same as iFrame","suites":["ParentIFrame methods: "],"line":70,"updatePoint":{"line":70,"column":42},"code":"    it('Get ID of iFrame is same as iFrame', function () {\n      expect(win.parentIFrame.getId()).toBe(id);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"move to anchor","suites":["ParentIFrame methods: "],"line":73,"updatePoint":{"line":73,"column":22},"code":"    it('move to anchor', function () {\n      win.parentIFrame.moveToAnchor('foo');\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:inPageLink:#foo', '*');\n      win.parentIFrame.moveToAnchor('bar');\n      expect(msgObject.source.postMessage.calls.argsFor(1)[0]).toContain(':scrollToOffset');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"reset","suites":["ParentIFrame methods: "],"line":79,"updatePoint":{"line":79,"column":13},"code":"    it('reset', function () {\n      win.parentIFrame.reset();\n      expect(msgObject.source.postMessage.calls.argsFor(0)[0]).toContain(':reset');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"getPageInfo","suites":["ParentIFrame methods: "],"line":83,"updatePoint":{"line":83,"column":19},"code":"    it('getPageInfo', function (done) {\n      win.parentIFrame.getPageInfo(function (pageInfo) {\n        expect(pageInfo.iframeHeight).toBe(500);\n        expect(pageInfo.iframeWidth).toBe(300);\n        expect(pageInfo.offsetLeft).toBe(20);\n        expect(pageInfo.offsetTop).toBe(85);\n        expect(pageInfo.scrollTop).toBe(0);\n        expect(pageInfo.scrollLeft).toBe(0);\n        expect(pageInfo.documentHeight).toBe(645);\n        expect(pageInfo.documentWidth).toBe(1295);\n        expect(pageInfo.windowHeight).toBe(645);\n        expect(pageInfo.windowWidth).toBe(1295);\n        expect(pageInfo.clientHeight).toBe(645);\n        expect(pageInfo.clientWidth).toBe(1295);\n        done();\n      });\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:pageInfo', '*');\n      mockMsgListener(createMsg('pageInfo:{\"iframeHeight\":500,\"iframeWidth\":300,\"clientHeight\":645,' + '\"clientWidth\":1295,\"offsetLeft\":20,\"offsetTop\":85,\"scrollLeft\":0,' + '\"scrollTop\":0,\"documentHeight\":645,\"documentWidth\":1295,' + '\"windowHeight\":645,\"windowWidth\":1295}'));\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"getPageInfoStop","suites":["ParentIFrame methods: "],"line":102,"updatePoint":{"line":102,"column":23},"code":"    it('getPageInfoStop', function () {\n      win.parentIFrame.getPageInfo();\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:pageInfoStop', '*');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"scrollTo","suites":["ParentIFrame methods: "],"line":106,"updatePoint":{"line":106,"column":16},"code":"    it('scrollTo', function () {\n      win.parentIFrame.scrollTo(10, 10);\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:10:10:scrollTo', '*');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"scrollToOffset","suites":["ParentIFrame methods: "],"line":110,"updatePoint":{"line":110,"column":22},"code":"    it('scrollToOffset', function () {\n      win.parentIFrame.scrollToOffset(10, 10);\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:10:10:scrollToOffset', '*');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"sendMessage (string)","suites":["ParentIFrame methods: "],"line":114,"updatePoint":{"line":114,"column":28},"code":"    it('sendMessage (string)', function () {\n      win.parentIFrame.sendMessage('foo:bar');\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:message:\"foo:bar\"', '*');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"sendMessage (object)","suites":["ParentIFrame methods: "],"line":118,"updatePoint":{"line":118,"column":28},"code":"    it('sendMessage (object)', function () {\n      win.parentIFrame.sendMessage({\n        foo: 'bar'\n      }, 'http://foo.bar:1337');\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:message:{\"foo\":\"bar\"}', 'http://foo.bar:1337');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"setTargetOrigin","suites":["ParentIFrame methods: "],"line":124,"updatePoint":{"line":124,"column":24},"skipped":true,"code":"    xit('setTargetOrigin', function () {\n      var targetOrigin = 'http://foo.bar:1337';\n      win.parentIFrame.setTargetOrigin(targetOrigin);\n      win.parentIFrame.size(10, 10);\n      win.parentIFrame.setTargetOrigin('*');\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:10:10:size', targetOrigin);\n    });","file":"childSpec.js","dir":"spec"},{"name":"readyCallack","suites":["inbound message: "],"line":133,"updatePoint":{"line":133,"column":20},"code":"    it('readyCallack', function () {\n      expect(window.readyCalled).toEqual(true);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"message (String)","suites":["inbound message: "],"line":136,"updatePoint":{"line":136,"column":24},"code":"    it('message (String)', function () {\n      var msg = 'foo';\n      mockMsgListener(createMsg('message:' + JSON.stringify(msg)));\n      expect(msgCalled).toBe(msg);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"message (Object)","suites":["inbound message: "],"line":141,"updatePoint":{"line":141,"column":24},"code":"    it('message (Object)', function () {\n      var msg = {\n        foo: 'bar'\n      };\n      mockMsgListener(createMsg('message:' + JSON.stringify(msg)));\n      expect(msgCalled.foo).toBe('bar');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"reset","suites":["inbound message: "],"line":148,"updatePoint":{"line":148,"column":14},"skipped":true,"code":"    xit('reset', function (done) {\n      // timing issue in Chrome\n      setTimeout(function () {\n        //Wait for init lock to clear\n        mockMsgListener(createMsg('reset'));\n        console.log('>> ', msgObject.source.postMessage.calls.argsFor(0));\n        expect(msgObject.source.postMessage.calls.argsFor(0)[0]).toContain(':reset');\n        done();\n      }, 200);\n    });","file":"childSpec.js","dir":"spec"},{"name":"resize(max)","suites":["inbound message: "],"line":158,"updatePoint":{"line":158,"column":19},"code":"    it('resize(max)', function () {\n      win.parentIFrame.setHeightCalculationMethod('max');\n      mockMsgListener(createMsg('resize'));\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Trigger event: Parent window requested size check');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"resize(lowestElement)","suites":["inbound message: "],"line":163,"updatePoint":{"line":163,"column":29},"code":"    it('resize(lowestElement)', function () {\n      win.parentIFrame.setHeightCalculationMethod('lowestElement');\n      mockMsgListener(createMsg('resize'));\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Trigger event: Parent window requested size check');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"resize(rightMostElement)","suites":["inbound message: "],"line":168,"updatePoint":{"line":168,"column":32},"code":"    it('resize(rightMostElement)', function () {\n      win.parentIFrame.setWidthCalculationMethod('rightMostElement');\n      mockMsgListener(createMsg('resize'));\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Trigger event: Parent window requested size check');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"move to anchor","suites":["inbound message: "],"line":173,"updatePoint":{"line":173,"column":22},"code":"    it('move to anchor', function () {\n      mockMsgListener(createMsg('moveToAnchor:foo'));\n      expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:0:0:inPageLink:#foo', '*');\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"unexpected message","suites":["inbound message: "],"line":177,"updatePoint":{"line":177,"column":27},"skipped":true,"code":"    xit('unexpected message', function () {\n      mockMsgListener(createMsg('foo'));\n      expect(console.warn).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] Unexpected message ([iFrameSizer]foo)');\n    });","file":"childSpec.js","dir":"spec"},{"name":"trottles","suites":["performance: "],"line":183,"updatePoint":{"line":183,"column":16},"code":"    it('trottles', function (done) {\n      win.parentIFrame.size(10, 10);\n      win.parentIFrame.size(20, 10);\n      win.parentIFrame.size(30, 10);\n      win.parentIFrame.size(40, 10);\n      win.parentIFrame.size(50, 10);\n      win.parentIFrame.size(60, 10);\n      setTimeout(function () {\n        // expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:10:10:size', '*');\n        expect(msgObject.source.postMessage).not.toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:20:10:size', '*');\n        expect(msgObject.source.postMessage).not.toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:30:10:size', '*');\n        expect(msgObject.source.postMessage).not.toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:40:10:size', '*');\n        expect(msgObject.source.postMessage).not.toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:50:10:size', '*');\n        expect(msgObject.source.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentIFrameTests:60:10:size', '*');\n        done();\n      }, 17);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"invalid","suites":["height calculation methods: "],"line":202,"updatePoint":{"line":202,"column":15},"code":"    it('invalid', function () {\n      win.parentIFrame.setHeightCalculationMethod('foo');\n      expect(console.warn).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] foo is not a valid option for heightCalculationMethod.');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] height calculation method set to \"bodyOffset\"');\n      win.parentIFrame.size();\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"bodyOffset","suites":["height calculation methods: "],"line":208,"updatePoint":{"line":208,"column":18},"code":"    it('bodyOffset', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('bodyOffset');\n        win.parentIFrame.size();\n        done();\n      }, 10);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"offset","suites":["height calculation methods: "],"line":215,"updatePoint":{"line":215,"column":14},"code":"    it('offset', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('offset');\n        win.parentIFrame.size();\n        done();\n      }, 20);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"bodyScroll","suites":["height calculation methods: "],"line":222,"updatePoint":{"line":222,"column":18},"code":"    it('bodyScroll', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('bodyScroll');\n        win.parentIFrame.size();\n        done();\n      }, 30);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"documentElementOffset","suites":["height calculation methods: "],"line":229,"updatePoint":{"line":229,"column":29},"code":"    it('documentElementOffset', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('documentElementOffset');\n        win.parentIFrame.size();\n        done();\n      }, 40);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"documentElementScroll","suites":["height calculation methods: "],"line":236,"updatePoint":{"line":236,"column":29},"code":"    it('documentElementScroll', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('documentElementScroll');\n        win.parentIFrame.size();\n        done();\n      }, 50);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"max","suites":["height calculation methods: "],"line":243,"updatePoint":{"line":243,"column":11},"code":"    it('max', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('max');\n        win.parentIFrame.size();\n        done();\n      }, 60);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"min","suites":["height calculation methods: "],"line":250,"updatePoint":{"line":250,"column":11},"code":"    it('min', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('min');\n        win.parentIFrame.size();\n        done();\n      }, 70);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"grow","suites":["height calculation methods: "],"line":257,"updatePoint":{"line":257,"column":12},"code":"    it('grow', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('grow');\n        win.parentIFrame.size();\n        done();\n      }, 80);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"lowestElement","suites":["height calculation methods: "],"line":264,"updatePoint":{"line":264,"column":21},"code":"    it('lowestElement', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('lowestElement');\n        win.parentIFrame.size();\n        done();\n      }, 90);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"taggedElement","suites":["height calculation methods: "],"line":271,"updatePoint":{"line":271,"column":21},"code":"    it('taggedElement', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setHeightCalculationMethod('taggedElement');\n        win.parentIFrame.size();\n        done();\n      }, 100);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"invalid","suites":["width calculation methods: "],"line":280,"updatePoint":{"line":280,"column":15},"code":"    it('invalid', function () {\n      win.parentIFrame.setWidthCalculationMethod('foo');\n      expect(console.warn).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] foo is not a valid option for widthCalculationMethod.');\n      expect(console.log).toHaveBeenCalledWith('[iFrameSizer][parentIFrameTests] width calculation method set to \"scroll\"');\n      win.parentIFrame.size();\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"bodyOffset","suites":["width calculation methods: "],"line":286,"updatePoint":{"line":286,"column":18},"code":"    it('bodyOffset', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('bodyOffset');\n        win.parentIFrame.size();\n        done();\n      }, 110);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"bodyScroll","suites":["width calculation methods: "],"line":293,"updatePoint":{"line":293,"column":18},"code":"    it('bodyScroll', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('bodyScroll');\n        win.parentIFrame.size();\n        done();\n      }, 120);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"documentElementOffset","suites":["width calculation methods: "],"line":300,"updatePoint":{"line":300,"column":29},"code":"    it('documentElementOffset', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('documentElementOffset');\n        win.parentIFrame.size();\n        done();\n      }, 130);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"documentElementScroll:","suites":["width calculation methods: "],"line":307,"updatePoint":{"line":307,"column":30},"code":"    it('documentElementScroll:', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('documentElementScroll:');\n        win.parentIFrame.size();\n        done();\n      }, 140);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"scroll","suites":["width calculation methods: "],"line":314,"updatePoint":{"line":314,"column":14},"code":"    it('scroll', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('scroll');\n        win.parentIFrame.size();\n        done();\n      }, 150);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"max","suites":["width calculation methods: "],"line":321,"updatePoint":{"line":321,"column":11},"code":"    it('max', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('max');\n        win.parentIFrame.size();\n        done();\n      }, 160);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"min","suites":["width calculation methods: "],"line":328,"updatePoint":{"line":328,"column":11},"code":"    it('min', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('min');\n        win.parentIFrame.size();\n        done();\n      }, 170);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"leftMostElement","suites":["width calculation methods: "],"line":335,"updatePoint":{"line":335,"column":23},"code":"    it('leftMostElement', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('leftMostElement');\n        win.parentIFrame.size();\n        done();\n      }, 180);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"taggedElement","suites":["width calculation methods: "],"line":342,"updatePoint":{"line":342,"column":21},"code":"    it('taggedElement', function (done) {\n      setTimeout(function () {\n        win.parentIFrame.setWidthCalculationMethod('taggedElement');\n        win.parentIFrame.size();\n        done();\n      }, 190);\n    });","file":"childSpec.js","skipped":false,"dir":"spec"},{"name":"closes from parent","suites":["Close iFrame"],"line":7,"updatePoint":{"line":7,"column":26},"code":"    it('closes from parent', function (done) {\n      var evtCounter = 0;\n      iframe = iFrameResize({\n        log: LOG,\n        id: 'close1',\n        onClosed: function () {\n          setTimeout(done, 0);\n        }\n      })[0];\n      setTimeout(iframe.iFrameResizer.close, 1);\n    });","file":"closeSpecSpec.js","skipped":false,"dir":"spec"},{"name":"closes from iframe","suites":["Close iFrame"],"line":18,"updatePoint":{"line":18,"column":26},"code":"    it('closes from iframe', function (done) {\n      var evtCounter = 0;\n      iframe = iFrameResize({\n        log: LOG,\n        id: 'close2',\n        onClosed: function () {\n          setTimeout(done, 0);\n        },\n        onInit: function (iframe) {\n          iframe.iFrameResizer.sendMessage('close');\n        }\n      })[0];\n      mockMsgFromIFrame(iframe, 'close');\n    });","file":"closeSpecSpec.js","skipped":false,"dir":"spec"},{"name":"requested from iFrame","suites":["Get Page info"],"line":8,"updatePoint":{"line":8,"column":29},"code":"    it('requested from iFrame', function (done) {\n      var iframe1 = iFrameResize({\n        log: log,\n        id: 'getPageInfo'\n      })[0];\n      spyOn(iframe1.contentWindow, 'postMessage').and.callFake(function (msg) {\n        if (0 !== msg.indexOf('pageInfo')) {\n          expect(msg.indexOf('\"offsetTop\":0,\"offsetLeft\":0,\"scrollTop\":0,\"scrollLeft\":0')).not.toEqual(0);\n        }\n\n        if (0 !== msg.indexOf('pageInfoStop')) {\n          tearDown(iframe1);\n          done();\n        }\n      });\n      mockMsgFromIFrame(iframe1, 'pageInfo');\n      mockMsgFromIFrame(iframe1, 'pageInfoStop');\n    });","file":"getPageInfoSpec.js","skipped":false,"dir":"spec"},{"name":"must send pageInfo to second frame","suites":["Get Page info with multiple frames"],"line":32,"updatePoint":{"line":32,"column":43},"skipped":true,"code":"    xit('must send pageInfo to second frame', function (done) {\n      var iframes = iFrameResize({\n        log: log,\n        id: '#frame1,#frame2',\n        onInit: function (iframe) {\n          iframe.iFrameResizer.sendMessage('getPageInfo');\n        }\n      });\n      var iframe1 = iframes[0],\n          iframe2 = iframes[1];\n      setTimeout(function () {\n        var counter = 0,\n            frame1Called = false,\n            frame2Called = false;\n\n        function checkCounter() {\n          if (counter === 2) {\n            expect(frame1Called && frame2Called).toBeTruthy();\n            tearDown(iframe1);\n            tearDown(iframe2);\n            done();\n          }\n        }\n\n        iframe1.contentWindow.postMessage = function (msg) {\n          if (0 < msg.indexOf('pageInfo')) {\n            frame1Called = true;\n            counter++;\n            checkCounter();\n          }\n        };\n\n        iframe2.contentWindow.postMessage = function (msg) {\n          if (0 < msg.indexOf('pageInfo')) {\n            frame2Called = true;\n            counter++;\n            checkCounter();\n          }\n        };\n\n        window.dispatchEvent(new Event('resize'));\n      }, 200);\n    });","file":"getPageInfoSpec.js","dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init(CSS Selector)"],"line":19,"updatePoint":{"line":19,"column":42},"code":"    it('should create iFrameResizer object', function () {\n      expect(iframe.iFrameResizer).toBeDefined();\n    });","file":"initCssSpec.js","skipped":false,"dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init(DOM Object)"],"line":16,"updatePoint":{"line":16,"column":42},"code":"    it('should create iFrameResizer object', function () {\n      expect(iframe.iFrameResizer).toBeDefined();\n    });","file":"initDomSpec.js","skipped":false,"dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init(Double)"],"line":13,"updatePoint":{"line":13,"column":42},"code":"    it('should create iFrameResizer object', function () {\n      window.parentIFrame = {\n        getId: function () {\n          return 'getIdTest';\n        }\n      };\n      iframe = iFrameResize({\n        log: LOG\n      }, '#doubleTest')[0];\n      iFrameResize({\n        log: LOG\n      }, '#doubleTest');\n      expect(iframe.iFrameResizer).toBeDefined();\n      expect(console.warn).toHaveBeenCalled();\n      delete window.parentIFrame;\n    });","file":"initDoubleCallSpec.js","skipped":false,"dir":"spec"},{"name":"min > max","suites":["Setup error"],"line":8,"updatePoint":{"line":8,"column":17},"code":"    it('min > max', function () {\n      expect(function () {\n        iFrameResize({\n          log: log,\n          id: 'error1',\n          maxHeight: 100,\n          minHeight: 999\n        });\n      }).toThrow(new Error('Value for minHeight can not be greater than maxHeight'));\n    });","file":"initErrorSpec.js","skipped":false,"dir":"spec"},{"name":"Unexpected data type","suites":["Setup error"],"line":18,"updatePoint":{"line":18,"column":28},"code":"    it('Unexpected data type', function () {\n      expect(function () {\n        iFrameResize({\n          log: log,\n          id: 'error2'\n        }, 1);\n      }).toThrow(new TypeError('Unexpected data type (number)'));\n    });","file":"initErrorSpec.js","skipped":false,"dir":"spec"},{"name":"Expected <IFRAME> tag","suites":["Setup error"],"line":26,"updatePoint":{"line":26,"column":29},"code":"    it('Expected <IFRAME> tag', function () {\n      expect(function () {\n        iFrameResize({\n          log: log,\n          id: 'error3'\n        }, 'div');\n      }).toThrow(new TypeError('Expected <IFRAME> tag, found <DIV>'));\n    });","file":"initErrorSpec.js","skipped":false,"dir":"spec"},{"name":"Object is not a valid DOM element","suites":["Setup error"],"line":34,"updatePoint":{"line":34,"column":41},"code":"    it('Object is not a valid DOM element', function () {\n      expect(function () {\n        iFrameResize({\n          log: log,\n          id: 'error4'\n        }, {});\n      }).toThrow(new TypeError('Object is not a valid DOM element'));\n    });","file":"initErrorSpec.js","skipped":false,"dir":"spec"},{"name":"Options is not an object","suites":["Setup error"],"line":42,"updatePoint":{"line":42,"column":32},"code":"    it('Options is not an object', function () {\n      expect(function () {\n        iFrameResize('ERROR');\n      }).toThrow(new TypeError('Options is not an object'));\n    });","file":"initErrorSpec.js","skipped":false,"dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init(jQuery)"],"line":15,"updatePoint":{"line":15,"column":42},"code":"    it('should create iFrameResizer object', function () {\n      expect(iframe.iFrameResizer).toBeDefined();\n    });","file":"initJQuerySpec.js","skipped":false,"dir":"spec"},{"name":"should create iFrameResizer object","suites":["iFrame init(DOM Object)"],"line":14,"updatePoint":{"line":14,"column":42},"code":"    it('should create iFrameResizer object', function () {\n      expect(iframe.iFrameResizer).toBeDefined();\n    });","file":"initUndefinedDomSpec.js","skipped":false,"dir":"spec"},{"name":"receive message","suites":["Parent Page","default resize"],"line":23,"updatePoint":{"line":23,"column":25},"code":"      it('receive message', function () {\n        expect(ready).toBe(true);\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"receive message","suites":["Parent Page","reset Page"],"line":43,"updatePoint":{"line":43,"column":25},"code":"      it('receive message', function () {\n        expect(iframe.contentWindow.postMessage).toHaveBeenCalledWith('[iFrameSizer]reset', 'http://localhost:9876');\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"receive message","suites":["Parent Page","late load msg received"],"line":63,"updatePoint":{"line":63,"column":25},"code":"      it('receive message', function () {\n        expect(iframe.contentWindow.postMessage).toHaveBeenCalledWith('[iFrameSizer]parentPage2:8:false:true:32:true:true:null:bodyOffset:null:null:0:false:parent:scroll:true', 'http://localhost:9876');\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"includes padding and borders from \"px\" units in height when CSS \"box-sizing\" is set to \"border-box\"","suites":["Parent Page","resize height"],"line":95,"updatePoint":{"line":95,"column":109},"code":"      it('includes padding and borders from \"px\" units in height when CSS \"box-sizing\" is set to \"border-box\"', done => {\n        setUp('border-box', 'px'); // timeout needed because of requestAnimationFrame and must be more than window.postMessage in setUp\n\n        setTimeout(() => {\n          expect(iframe.offsetHeight).toBe(HEIGHT + extraHeights.reduce((a, b) => a + b, 0));\n          done();\n        }, 100);\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"includes padding and borders from \"rem\" units in height when CSS \"box-sizing\" is set to \"border-box\"","suites":["Parent Page","resize height"],"line":103,"updatePoint":{"line":103,"column":110},"code":"      it('includes padding and borders from \"rem\" units in height when CSS \"box-sizing\" is set to \"border-box\"', done => {\n        const REM = 14; // changes the rem units of the doc so we can test accurately\n\n        document.querySelector('html').style.fontSize = `${REM}px`;\n        setUp('border-box', 'rem'); // timeout needed because of requestAnimationFrame and must be more than window.postMessage in setUp\n\n        setTimeout(() => {\n          expect(iframe.offsetHeight).toBe(HEIGHT + extraHeights.reduce((a, b) => a + b * REM, 0));\n          done();\n        }, 100);\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"includes padding and borders from \"px\" units in height when CSS \"box-sizing\" is set to \"content-box\"","suites":["Parent Page","resize height"],"line":114,"updatePoint":{"line":114,"column":110},"code":"      it('includes padding and borders from \"px\" units in height when CSS \"box-sizing\" is set to \"content-box\"', done => {\n        setUp('content-box', 'px'); // timeout needed because of requestAnimationFrame and must be more than window.postMessage in setUp\n\n        setTimeout(() => {\n          expect(iframe.offsetHeight).toBe(HEIGHT + extraHeights.reduce((a, b) => a + b, 0));\n          done();\n        }, 100);\n      });","file":"parentSpec.js","skipped":false,"dir":"spec"},{"name":"mock incoming message","suites":["Scroll Page"],"line":11,"updatePoint":{"line":11,"column":29},"code":"    it('mock incoming message', function (done) {\n      iframe = iFrameResize({\n        log: log,\n        id: 'scroll1'\n      })[0];\n      window.parentIFrame = {\n        scrollTo: function (x, y) {\n          expect(x).toBe(0);\n          expect(y).toBe(0);\n          done();\n        }\n      };\n      mockMsgFromIFrame(iframe, 'scrollTo');\n    });","file":"scrollSpec.js","skipped":false,"dir":"spec"},{"name":"mock incoming message","suites":["Scroll Page"],"line":25,"updatePoint":{"line":25,"column":29},"code":"    it('mock incoming message', function (done) {\n      iframe = iFrameResize({\n        log: log,\n        id: 'scroll2'\n      })[0];\n      window.parentIFrame = {\n        scrollToOffset: function (x, y) {\n          expect(x).toBe(8);\n          expect(y).toBe(8);\n          done();\n        }\n      };\n      mockMsgFromIFrame(iframe, 'scrollToOffset');\n    });","file":"scrollSpec.js","skipped":false,"dir":"spec"},{"name":"send message to iframe","suites":["Send Message from Host Page"],"line":11,"updatePoint":{"line":11,"column":30},"code":"    it('send message to iframe', function (done) {\n      var iframe1 = iFrameResize({\n        log: log,\n        id: 'sendMessage1'\n      })[0];\n      spyOnIFramePostMessage(iframe1);\n      setTimeout(function () {\n        iframe1.iFrameResizer.sendMessage('chkSendMsg:test');\n        expect(iframe1.contentWindow.postMessage).toHaveBeenCalledWith('[iFrameSizer]message:\"chkSendMsg:test\"', getTarget(iframe1));\n        tearDown(iframe1);\n        done();\n      }, 100);\n    });","file":"sendMessageSpec.js","skipped":false,"dir":"spec"},{"name":"mock incoming message","suites":["Send Message from Host Page"],"line":24,"updatePoint":{"line":24,"column":29},"code":"    it('mock incoming message', function (done) {\n      iframe = iFrameResize({\n        log: log,\n        id: 'sendMessage2',\n        onMessage: function (messageData) {\n          expect(messageData.message).toBe('test:test');\n          done();\n        }\n      })[0];\n      mockMsgFromIFrame(iframe, 'message:\"test:test\"');\n    });","file":"sendMessageSpec.js","skipped":false,"dir":"spec"},{"name":"send message and get response","suites":["Send Message from Host Page"],"line":35,"updatePoint":{"line":35,"column":37},"code":"    it('send message and get response', function (done) {\n      iframe = iFrameResize({\n        log: log,\n        id: 'sendMessage3',\n        onInit: function (iframe) {\n          iframe.iFrameResizer.sendMessage('chkSendMsg');\n        },\n        onMessage: function (messageData) {\n          expect(messageData.message).toBe('message: test string');\n          done();\n        }\n      })[0];\n    });","file":"sendMessageSpec.js","skipped":false,"dir":"spec"}]}