{
    "repo": "rrweb-io/rrweb",
    "url": "https://github.com/rrweb-io/rrweb",
    "branch": "master",
    "configs": [
        {
            "package": "rrweb-snapshot",
            "lang": "ts",
            "dir": "packages/rrweb-snapshot/test",
            "framework": "jest",
            "pattern": "**/*[._-]{test,spec,unittest,unit}.{ts,js}"
        },
        {
            "package": "rrweb",
            "lang": "ts",
            "dir": "packages/rrweb/test",
            "framework": "jest",
            "pattern": "**/*[._-]{test,spec,unittest,unit}.{ts,js}"
        }
    ],
    "tests": [
        {
            "name": "should save the filename and source",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 4,
                "column": 41
            },
            "line": 4,
            "code": "  it('should save the filename and source', () => {\n    const css = 'booty {\\n  size: large;\\n}\\n';\n    const ast = parse(css, {\n      source: 'booty.css',\n    });\n\n    expect(ast.stylesheet!.source).toEqual('booty.css');\n\n    const position = ast.stylesheet!.rules[0].position!;\n    expect(position.start).toBeTruthy();\n    expect(position.end).toBeTruthy();\n    expect(position.source).toEqual('booty.css');\n    expect(position.content).toEqual(css);\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should throw when a selector is missing",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 19,
                "column": 45
            },
            "line": 19,
            "code": "  it('should throw when a selector is missing', () => {\n    expect(() => {\n      parse('{size: large}');\n    }).toThrow();\n\n    expect(() => {\n      parse('b { color: red; }\\n{ color: green; }\\na { color: blue; }');\n    }).toThrow();\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should throw when a broken comment is found",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 29,
                "column": 49
            },
            "line": 29,
            "code": "  it('should throw when a broken comment is found', () => {\n    expect(() => {\n      parse('thing { color: red; } /* b { color: blue; }');\n    }).toThrow();\n\n    expect(() => {\n      parse('/*');\n    }).toThrow();\n\n    /* Nested comments should be fine */\n    expect(() => {\n      parse('/* /* */');\n    }).not.toThrow();\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should allow empty property value",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 44,
                "column": 39
            },
            "line": 44,
            "code": "  it('should allow empty property value', () => {\n    expect(() => {\n      parse('p { color:; }');\n    }).not.toThrow();\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should not throw with silent option",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 50,
                "column": 41
            },
            "line": 50,
            "code": "  it('should not throw with silent option', () => {\n    expect(() => {\n      parse('thing { color: red; } /* b { color: blue; }', { silent: true });\n    }).not.toThrow();\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should list the parsing errors and continue parsing",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 56,
                "column": 57
            },
            "line": 56,
            "code": "  it('should list the parsing errors and continue parsing', () => {\n    const result = parse(\n      'foo { color= red; } bar { color: blue; } baz {}} boo { display: none}',\n      {\n        silent: true,\n        source: 'foo.css',\n      },\n    );\n\n    const rules = result.stylesheet!.rules;\n    expect(rules.length).toBeGreaterThan(2);\n\n    const errors = result.stylesheet!.parsingErrors!;\n    expect(errors.length).toEqual(2);\n\n    expect(errors[0]).toHaveProperty('message');\n    expect(errors[0]).toHaveProperty('reason');\n    expect(errors[0]).toHaveProperty('filename');\n    expect(errors[0]).toHaveProperty('line');\n    expect(errors[0]).toHaveProperty('column');\n    expect(errors[0]).toHaveProperty('source');\n    expect(errors[0].filename).toEqual('foo.css');\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should set parent property",
            "suites": [
                "css parser"
            ],
            "updatePoint": {
                "line": 80,
                "column": 32
            },
            "line": 80,
            "code": "  it('should set parent property', () => {\n    const result = parse(\n      'thing { test: value; }\\n' +\n        '@media (min-width: 100px) { thing { test: value; } }',\n    );\n\n    expect(result.parent).toEqual(null);\n\n    const rules = result.stylesheet!.rules;\n    expect(rules.length).toEqual(2);\n\n    let rule = rules[0] as Rule;\n    expect(rule.parent).toEqual(result);\n    expect(rule.declarations!.length).toEqual(1);\n\n    let decl = rule.declarations![0];\n    expect(decl.parent).toEqual(rule);\n\n    const media = rules[1] as Media;\n    expect(media.parent).toEqual(result);\n    expect(media.rules!.length).toEqual(1);\n\n    rule = media.rules![0] as Rule;\n    expect(rule.parent).toEqual(media);\n\n    expect(rule.declarations!.length).toEqual(1);\n    decl = rule.declarations![0];\n    expect(decl.parent).toEqual(rule);\n  });",
            "file": "css.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "correctly triggers backCompat mode and rendering",
            "suites": [
                "integration tests"
            ],
            "updatePoint": {
                "line": 146,
                "column": 54
            },
            "line": 146,
            "code": "  it('correctly triggers backCompat mode and rendering', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    // console for debug\n    // tslint:disable-next-line: no-console\n    page.on('console', (msg) => console.log(msg.text()));\n\n    await page.goto('http://localhost:3030/html/compat-mode.html', {\n      waitUntil: 'load',\n    });\n    const compatMode = await page.evaluate('document.compatMode');\n    assert(\n      compatMode === 'BackCompat',\n      compatMode +\n        ' for compat-mode.html should be BackCompat as DOCTYPE is deliberately omitted',\n    );\n    const renderedHeight = await page.evaluate(\n      'document.querySelector(\"center\").clientHeight',\n    );\n    // can remove following assertion if dimensions of page change\n    assert(\n      renderedHeight < 400,\n      `pre-check: images will be rendered ~326px high in BackCompat mode, and ~588px in CSS1Compat mode; getting: ${renderedHeight}px`,\n    );\n    const rebuildRenderedHeight = await page.evaluate(`${code}\nconst [snap] = rrweb.snapshot(document);\nconst iframe = document.createElement('iframe');\niframe.setAttribute('width', document.body.clientWidth)\niframe.setAttribute('height', document.body.clientHeight)\niframe.style.transform = 'scale(0.3)'; // mini-me\ndocument.body.appendChild(iframe);\n// magic here! rebuild in a new iframe\nconst rebuildNode = rrweb.rebuild(snap, { doc: iframe.contentDocument })[0];\niframe.contentDocument.querySelector('center').clientHeight\n`);\n    const rebuildCompatMode = await page.evaluate(\n      'document.querySelector(\"iframe\").contentDocument.compatMode',\n    );\n    assert(\n      rebuildCompatMode === 'BackCompat',\n      \"rebuilt compatMode should match source compatMode, but doesn't: \" +\n        rebuildCompatMode,\n    );\n    assert(\n      rebuildRenderedHeight === renderedHeight,\n      'rebuilt height (${rebuildRenderedHeight}) should equal original height (${renderedHeight})',\n    );\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "snapshot async iframes",
            "suites": [
                "iframe integration tests"
            ],
            "updatePoint": {
                "line": 225,
                "column": 28
            },
            "line": 225,
            "code": "  it('snapshot async iframes', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    // console for debug\n    // tslint:disable-next-line: no-console\n    page.on('console', (msg) => console.log(msg.text()));\n    await page.goto(`http://localhost:3030/iframe-html/main.html`, {\n      waitUntil: 'load',\n    });\n    const snapshotResult = JSON.stringify(\n      await page.evaluate(`${code};\n      rrweb.snapshot(document)[0];\n    `),\n      null,\n      2,\n    );\n    expect(snapshotResult).toMatchSnapshot();\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "snapshot shadow DOM",
            "suites": [
                "shadow DOM integration tests"
            ],
            "updatePoint": {
                "line": 274,
                "column": 25
            },
            "line": 274,
            "code": "  it('snapshot shadow DOM', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    // console for debug\n    // tslint:disable-next-line: no-console\n    page.on('console', (msg) => console.log(msg.text()));\n    await page.goto(`http://localhost:3030/html/shadow-dom.html`, {\n      waitUntil: 'load',\n    });\n    const snapshotResult = JSON.stringify(\n      await page.evaluate(`${code};\n      rrweb.snapshot(document)[0];\n    `),\n      null,\n      2,\n    );\n    expect(snapshotResult).toMatchSnapshot();\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "will do nothing to css text without :hover",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 17,
                "column": 48
            },
            "line": 17,
            "code": "  it('will do nothing to css text without :hover', () => {\n    const cssText = 'body { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(cssText);\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can add hover class to css text",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 22,
                "column": 37
            },
            "line": 22,
            "code": "  it('can add hover class to css text', () => {\n    const cssText = '.a:hover { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(\n      '.a:hover, .a.\\\\:hover { color: white }',\n    );\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can add hover class when there is multi selector",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 29,
                "column": 54
            },
            "line": 29,
            "code": "  it('can add hover class when there is multi selector', () => {\n    const cssText = '.a, .b:hover, .c { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(\n      '.a, .b:hover, .b.\\\\:hover, .c { color: white }',\n    );\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can add hover class when there is a multi selector with the same prefix",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 36,
                "column": 77
            },
            "line": 36,
            "code": "  it('can add hover class when there is a multi selector with the same prefix', () => {\n    const cssText = '.a:hover, .a:hover::after { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(\n      '.a:hover, .a.\\\\:hover, .a:hover::after, .a.\\\\:hover::after { color: white }',\n    );\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can add hover class when :hover is not the end of selector",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 43,
                "column": 64
            },
            "line": 43,
            "code": "  it('can add hover class when :hover is not the end of selector', () => {\n    const cssText = 'div:hover::after { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(\n      'div:hover::after, div.\\\\:hover::after { color: white }',\n    );\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can add hover class when the selector has multi :hover",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 50,
                "column": 60
            },
            "line": 50,
            "code": "  it('can add hover class when the selector has multi :hover', () => {\n    const cssText = 'a:hover b:hover { color: white }';\n    expect(addHoverClass(cssText, cache)).toEqual(\n      'a:hover b:hover, a.\\\\:hover b.\\\\:hover { color: white }',\n    );\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "will ignore :hover in css value",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 57,
                "column": 37
            },
            "line": 57,
            "code": "  it('will ignore :hover in css value', () => {\n    const cssText = '.a::after { content: \":hover\" }';\n    expect(addHoverClass(cssText, cache)).toEqual(cssText);\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "benchmark",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 62,
                "column": 15
            },
            "line": 62,
            "code": "  it('benchmark', () => {\n    const cssText = fs.readFileSync(\n      path.resolve(__dirname, './css/benchmark.css'),\n      'utf8',\n    );\n    const start = process.hrtime();\n    addHoverClass(cssText, cache);\n    const end = process.hrtime(start);\n    const duration = getDuration(end);\n    expect(duration).toBeLessThan(100);\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "should be a lot faster to add a hover class to a previously processed css string",
            "suites": [
                "add hover class to hover selector related rules"
            ],
            "updatePoint": {
                "line": 74,
                "column": 86
            },
            "line": 74,
            "code": "  it('should be a lot faster to add a hover class to a previously processed css string', () => {\n    const factor = 100;\n\n    let cssText = fs.readFileSync(\n      path.resolve(__dirname, './css/benchmark.css'),\n      'utf8',\n    );\n\n    const start = process.hrtime();\n    addHoverClass(cssText, cache);\n    const end = process.hrtime(start);\n\n    const cachedStart = process.hrtime();\n    addHoverClass(cssText, cache);\n    const cachedEnd = process.hrtime(cachedStart);\n\n    expect(getDuration(cachedEnd) * factor).toBeLessThan(getDuration(end));\n  });",
            "file": "rebuild.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle relative path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 7,
                "column": 30
            },
            "line": 7,
            "code": "  it('can handle relative path', () => {\n    expect(absoluteToStylesheet('url(a.jpg)', href)).toEqual(\n      `url(http://localhost/css/a.jpg)`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle same level path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 13,
                "column": 32
            },
            "line": 13,
            "code": "  it('can handle same level path', () => {\n    expect(absoluteToStylesheet('url(\"./a.jpg\")', href)).toEqual(\n      `url(\"http://localhost/css/a.jpg\")`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle parent level path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 19,
                "column": 34
            },
            "line": 19,
            "code": "  it('can handle parent level path', () => {\n    expect(absoluteToStylesheet('url(\"../a.jpg\")', href)).toEqual(\n      `url(\"http://localhost/a.jpg\")`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle absolute path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 25,
                "column": 30
            },
            "line": 25,
            "code": "  it('can handle absolute path', () => {\n    expect(absoluteToStylesheet('url(\"/a.jpg\")', href)).toEqual(\n      `url(\"http://localhost/a.jpg\")`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle external path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 31,
                "column": 30
            },
            "line": 31,
            "code": "  it('can handle external path', () => {\n    expect(absoluteToStylesheet('url(\"http://localhost/a.jpg\")', href)).toEqual(\n      `url(\"http://localhost/a.jpg\")`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle single quote path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 37,
                "column": 34
            },
            "line": 37,
            "code": "  it('can handle single quote path', () => {\n    expect(absoluteToStylesheet(`url('./a.jpg')`, href)).toEqual(\n      `url('http://localhost/css/a.jpg')`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle no quote path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 43,
                "column": 30
            },
            "line": 43,
            "code": "  it('can handle no quote path', () => {\n    expect(absoluteToStylesheet('url(./a.jpg)', href)).toEqual(\n      `url(http://localhost/css/a.jpg)`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle multiple no quote paths",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 49,
                "column": 40
            },
            "line": 49,
            "code": "  it('can handle multiple no quote paths', () => {\n    expect(\n      absoluteToStylesheet(\n        'background-image: url(images/b.jpg);background: #aabbcc url(images/a.jpg) 50% 50% repeat;',\n        href,\n      ),\n    ).toEqual(\n      `background-image: url(http://localhost/css/images/b.jpg);` +\n        `background: #aabbcc url(http://localhost/css/images/a.jpg) 50% 50% repeat;`,\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle data url image",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 61,
                "column": 31
            },
            "line": 61,
            "code": "  it('can handle data url image', () => {\n    expect(\n      absoluteToStylesheet('url(data:image/gif;base64,ABC)', href),\n    ).toEqual('url(data:image/gif;base64,ABC)');\n    expect(\n      absoluteToStylesheet(\n        'url(data:application/font-woff;base64,d09GMgABAAAAAAm)',\n        href,\n      ),\n    ).toEqual('url(data:application/font-woff;base64,d09GMgABAAAAAAm)');\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "preserves quotes around inline svgs with spaces",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 73,
                "column": 53
            },
            "line": 73,
            "code": "  it('preserves quotes around inline svgs with spaces', () => {\n    expect(\n      absoluteToStylesheet(\n        \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3E%3Cpath fill='%2328a745' d='M3'/%3E%3C/svg%3E\\\")\",\n        href,\n      ),\n    ).toEqual(\n      \"url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3E%3Cpath fill='%2328a745' d='M3'/%3E%3C/svg%3E\\\")\",\n    );\n    expect(\n      absoluteToStylesheet(\n        'url(\\'data:image/svg+xml;utf8,<svg width=\"28\" height=\"32\" viewBox=\"0 0 28 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M27 14C28\" fill=\"white\"/></svg>\\')',\n        href,\n      ),\n    ).toEqual(\n      'url(\\'data:image/svg+xml;utf8,<svg width=\"28\" height=\"32\" viewBox=\"0 0 28 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M27 14C28\" fill=\"white\"/></svg>\\')',\n    );\n    expect(\n      absoluteToStylesheet(\n        'url(\"data:image/svg+xml;utf8,<svg width=\"28\" height=\"32\" viewBox=\"0 0 28 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M27 14C28\" fill=\"white\"/></svg>\")',\n        href,\n      ),\n    ).toEqual(\n      'url(\"data:image/svg+xml;utf8,<svg width=\"28\" height=\"32\" viewBox=\"0 0 28 32\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M27 14C28\" fill=\"white\"/></svg>\")',\n    );\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle empty path",
            "suites": [
                "absolute url to stylesheet"
            ],
            "updatePoint": {
                "line": 99,
                "column": 27
            },
            "line": 99,
            "code": "  it('can handle empty path', () => {\n    expect(absoluteToStylesheet(`url('')`, href)).toEqual(`url('')`);\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can handle empty elements",
            "suites": [
                "isBlockedElement()"
            ],
            "updatePoint": {
                "line": 111,
                "column": 31
            },
            "line": 111,
            "code": "  it('can handle empty elements', () => {\n    expect(subject('<div />')).toEqual(false);\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "blocks prohibited className",
            "suites": [
                "isBlockedElement()"
            ],
            "updatePoint": {
                "line": 115,
                "column": 33
            },
            "line": 115,
            "code": "  it('blocks prohibited className', () => {\n    expect(subject('<div class=\"foo rr-block bar\" />')).toEqual(true);\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "does not block random data selector",
            "suites": [
                "isBlockedElement()"
            ],
            "updatePoint": {
                "line": 119,
                "column": 41
            },
            "line": 119,
            "code": "  it('does not block random data selector', () => {\n    expect(subject('<div data-rr-block />')).toEqual(false);\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "blocks blocked selector",
            "suites": [
                "isBlockedElement()"
            ],
            "updatePoint": {
                "line": 123,
                "column": 29
            },
            "line": 123,
            "code": "  it('blocks blocked selector', () => {\n    expect(\n      subject('<div data-rr-block />', { blockSelector: '[data-rr-block]' }),\n    ).toEqual(true);\n  });",
            "file": "snapshot.test.ts",
            "skipped": false,
            "dir": "packages/rrweb-snapshot/test"
        },
        {
            "name": "can record form interactions",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 109,
                "column": 34
            },
            "line": 109,
            "code": "  it('can record form interactions', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'form.html'));\n\n    await page.type('input[type=\"text\"]', 'test');\n    await page.click('input[type=\"radio\"]');\n    await page.click('input[type=\"checkbox\"]');\n    await page.type('textarea', 'textarea test');\n    await page.select('select', '1');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can record childList mutations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 124,
                "column": 36
            },
            "line": 124,
            "code": "  it('can record childList mutations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const li = document.createElement('li');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      ul.appendChild(li);\n      document.body.removeChild(ul);\n      const p = document.querySelector('p') as HTMLParagraphElement;\n      p.appendChild(document.createElement('span'));\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can record character data muatations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 142,
                "column": 42
            },
            "line": 142,
            "code": "  it('can record character data muatations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const li = document.createElement('li');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      ul.appendChild(li);\n      li.innerText = 'new list item';\n      li.innerText = 'new list item edit';\n      document.body.removeChild(ul);\n      const p = document.querySelector('p') as HTMLParagraphElement;\n      p.innerText = 'mutated';\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can record attribute mutation",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 162,
                "column": 35
            },
            "line": 162,
            "code": "  it('can record attribute mutation', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const li = document.createElement('li');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      ul.appendChild(li);\n      li.setAttribute('foo', 'bar');\n      document.body.removeChild(ul);\n      document.body.setAttribute('test', 'true');\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can record node mutations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 180,
                "column": 31
            },
            "line": 180,
            "code": "  it('can record node mutations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'select2.html'), {\n      waitUntil: 'networkidle0',\n    });\n\n    // toggle the select box\n    await page.click('.select2-container', { clickCount: 2, delay: 100 });\n    // test storage of !important style\n    await page.evaluate(\n      'document.getElementById(\"select2-drop\").setAttribute(\"style\", document.getElementById(\"select2-drop\").style.cssText + \"color:black !important\")',\n    );\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can freeze mutations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 197,
                "column": 26
            },
            "line": 197,
            "code": "  it('can freeze mutations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const li = document.createElement('li');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      ul.appendChild(li);\n      li.setAttribute('foo', 'bar');\n      document.body.setAttribute('test', 'true');\n    });\n    await page.evaluate('rrweb.freezePage()');\n    await page.evaluate(() => {\n      document.body.setAttribute('test', 'bad');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      const li = document.createElement('li');\n      li.setAttribute('bad-attr', 'bad');\n      li.innerText = 'bad text';\n      ul.appendChild(li);\n      document.body.removeChild(ul);\n    });\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should not record input events on ignored elements",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 223,
                "column": 56
            },
            "line": 223,
            "code": "  it('should not record input events on ignored elements', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'ignore.html'));\n\n    await page.type('.rr-ignore', 'secret');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should not record input values if maskAllInputs is enabled",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 234,
                "column": 64
            },
            "line": 234,
            "code": "  it('should not record input values if maskAllInputs is enabled', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'form.html', { maskAllInputs: true }),\n    );\n\n    await page.type('input[type=\"text\"]', 'test');\n    await page.click('input[type=\"radio\"]');\n    await page.click('input[type=\"checkbox\"]');\n    await page.type('input[type=\"password\"]', 'password');\n    await page.type('textarea', 'textarea test');\n    await page.select('select', '1');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can use maskInputOptions to configure which type of inputs should be masked",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 252,
                "column": 81
            },
            "line": 252,
            "code": "  it('can use maskInputOptions to configure which type of inputs should be masked', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'form.html', {\n        maskInputOptions: {\n          text: false,\n          textarea: false,\n          password: true,\n        },\n      }),\n    );\n\n    await page.type('input[type=\"text\"]', 'test');\n    await page.click('input[type=\"radio\"]');\n    await page.click('input[type=\"checkbox\"]');\n    await page.type('textarea', 'textarea test');\n    await page.type('input[type=\"password\"]', 'password');\n    await page.select('select', '1');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should mask value attribute with maskInputOptions",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 276,
                "column": 55
            },
            "line": 276,
            "code": "  it('should mask value attribute with maskInputOptions', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'password.html', {\n        maskInputOptions: {\n          password: true,\n        },\n      }),\n    );\n\n    await page.type('input[type=\"password\"]', 'secr3t');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record input userTriggered values if userTriggeredOnInput is enabled",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 293,
                "column": 81
            },
            "line": 293,
            "code": "  it('should record input userTriggered values if userTriggeredOnInput is enabled', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'form.html', { userTriggeredOnInput: true }),\n    );\n\n    await page.type('input[type=\"text\"]', 'test');\n    await page.click('input[type=\"radio\"]');\n    await page.click('input[type=\"checkbox\"]');\n    await page.type('input[type=\"password\"]', 'password');\n    await page.type('textarea', 'textarea test');\n    await page.select('select', '1');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should not record blocked elements and its child nodes",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 311,
                "column": 60
            },
            "line": 311,
            "code": "  it('should not record blocked elements and its child nodes', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'block.html'));\n\n    await page.type('input', 'should not be record');\n    await page.evaluate(`document.getElementById('text').innerText = '1'`);\n    await page.click('#text');\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should not record blocked elements dynamically added",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 324,
                "column": 58
            },
            "line": 324,
            "code": "  it('should not record blocked elements dynamically added', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'block.html'));\n\n    await page.evaluate(() => {\n      const el = document.createElement('button');\n      el.className = 'rr-block';\n      el.style.width = '100px';\n      el.style.height = '100px';\n      el.innerText = 'Should not be recorded';\n\n      const nextElement = document.querySelector('.rr-block')!;\n      nextElement.parentNode!.insertBefore(el, nextElement);\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record DOM node movement 1",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 344,
                "column": 39
            },
            "line": 344,
            "code": "  it('should record DOM node movement 1', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'move-node.html'));\n\n    await page.evaluate(() => {\n      const div = document.querySelector('div')!;\n      const p = document.querySelector('p')!;\n      const span = document.querySelector('span')!;\n      document.body.removeChild(span);\n      p.appendChild(span);\n      p.removeChild(span);\n      div.appendChild(span);\n    });\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record DOM node movement 2",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 362,
                "column": 39
            },
            "line": 362,
            "code": "  it('should record DOM node movement 2', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'move-node.html'));\n\n    await page.evaluate(() => {\n      const div = document.createElement('div');\n      const span = document.querySelector('span')!;\n      document.body.appendChild(div);\n      div.appendChild(span);\n    });\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record dynamic CSS changes",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 377,
                "column": 39
            },
            "line": 377,
            "code": "  it('should record dynamic CSS changes', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'react-styled-components.html'));\n    await page.click('.toggle');\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record canvas mutations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 386,
                "column": 36
            },
            "line": 386,
            "code": "  it('should record canvas mutations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'canvas.html', {\n        recordCanvas: true,\n      }),\n    );\n    await page.waitForTimeout(50);\n    const snapshots = await page.evaluate('window.snapshots');\n    for (const event of snapshots) {\n      if (event.type === EventType.FullSnapshot) {\n        visitSnapshot(event.data.node, (n) => {\n          if (n.type === NodeType.Element && n.attributes.rr_dataURL) {\n            n.attributes.rr_dataURL = `LOOKS LIKE WE COULD NOT GET STABLE BASE64 FROM SAME IMAGE.`;\n          }\n        });\n      }\n    }\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will serialize node before record",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 408,
                "column": 39
            },
            "line": 408,
            "code": "  it('will serialize node before record', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      let count = 3;\n      while (count > 0) {\n        count--;\n        const li = document.createElement('li');\n        ul.appendChild(li);\n      }\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will defer missing next node mutation",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 427,
                "column": 43
            },
            "line": 427,
            "code": "  it('will defer missing next node mutation', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'shuffle.html'));\n\n    const text = await page.evaluate(() => {\n      const els = Array.prototype.slice.call(document.querySelectorAll('li'));\n      const parent = document.querySelector('ul')!;\n      parent.removeChild(els[3]);\n      parent.removeChild(els[2]);\n      parent.removeChild(els[1]);\n      parent.removeChild(els[0]);\n      parent.insertBefore(els[3], els[4]);\n      parent.insertBefore(els[2], els[4]);\n      parent.insertBefore(els[1], els[4]);\n      parent.insertBefore(els[0], els[4]);\n      return parent.innerText;\n    });\n\n    expect(text).toEqual('4\\n3\\n2\\n1\\n5');\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record console messages",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 449,
                "column": 36
            },
            "line": 449,
            "code": "  it('should record console messages', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'log.html', {\n        plugins: '[rrwebConsoleRecord.getRecordConsolePlugin()]',\n      }),\n    );\n\n    await page.evaluate(() => {\n      console.assert(0 === 0, 'assert');\n      console.count('count');\n      console.countReset('count');\n      console.debug('debug');\n      console.dir('dir');\n      console.dirxml('dirxml');\n      console.group();\n      console.groupCollapsed();\n      console.info('info');\n      console.log('log');\n      console.table('table');\n      console.time();\n      console.timeEnd();\n      console.timeLog();\n      console.trace('trace');\n      console.warn('warn');\n      console.clear();\n      const iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n    });\n\n    await page.frames()[1].evaluate(() => {\n      console.log('from iframe');\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should nest record iframe",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 488,
                "column": 31
            },
            "line": 488,
            "code": "  it('should nest record iframe', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto(`http://localhost:3030/html`);\n    await page.setContent(getHtml.call(this, 'main.html'));\n\n    await page.waitForTimeout(500);\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should record shadow DOM",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 498,
                "column": 30
            },
            "line": 498,
            "code": "  it('should record shadow DOM', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'shadow-dom.html'));\n\n    await page.evaluate(() => {\n      const sleep = (ms: number) =>\n        new Promise((resolve) => setTimeout(resolve, ms));\n\n      const el = document.querySelector('.my-element') as HTMLDivElement;\n      const shadowRoot = el.shadowRoot as ShadowRoot;\n      shadowRoot.appendChild(document.createElement('p'));\n      sleep(1)\n        .then(() => {\n          shadowRoot.lastChild!.appendChild(document.createElement('p'));\n          return sleep(1);\n        })\n        .then(() => {\n          const firstP = shadowRoot.querySelector('p') as HTMLParagraphElement;\n          shadowRoot.removeChild(firstP);\n          return sleep(1);\n        })\n        .then(() => {\n          (shadowRoot.lastChild!.childNodes[0] as HTMLElement).innerText = 'hi';\n          return sleep(1);\n        })\n        .then(() => {\n          (shadowRoot.lastChild!.childNodes[0] as HTMLElement).innerText =\n            '123';\n        });\n    });\n    await page.waitForTimeout(50);\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should mask texts",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 535,
                "column": 23
            },
            "line": 535,
            "code": "  it('should mask texts', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'mask-text.html', {\n        maskTextSelector: '[data-masking=\"true\"]',\n      }),\n    );\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should mask texts using maskTextFn",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 548,
                "column": 40
            },
            "line": 548,
            "code": "  it('should mask texts using maskTextFn', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(\n      getHtml.call(this, 'mask-text.html', {\n        maskTextSelector: '[data-masking=\"true\"]',\n        maskTextFn: (t: string) => t.replace(/[a-z]/g, '*'),\n      }),\n    );\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can mask character data mutations",
            "suites": [
                "record integration tests"
            ],
            "updatePoint": {
                "line": 562,
                "column": 39
            },
            "line": 562,
            "code": "  it('can mask character data mutations', async () => {\n    const page: puppeteer.Page = await browser.newPage();\n    await page.goto('about:blank');\n    await page.setContent(getHtml.call(this, 'mutation-observer.html'));\n\n    await page.evaluate(() => {\n      const li = document.createElement('li');\n      const ul = document.querySelector('ul') as HTMLUListElement;\n      const p = document.querySelector('p') as HTMLParagraphElement;\n      [li, p].forEach((element) => {\n        element.className = 'rr-mask';\n      });\n      ul.appendChild(li);\n      li.innerText = 'new list item';\n      p.innerText = 'mutated';\n    });\n\n    const snapshots = await page.evaluate('window.snapshots');\n    assertSnapshot(snapshots);\n  });",
            "file": "integration.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will return all the events when there is only one session",
            "suites": [
                "get last session"
            ],
            "updatePoint": {
                "line": 18,
                "column": 63
            },
            "line": 18,
            "code": "  it('will return all the events when there is only one session', () => {\n    expect(discardPriorSnapshots(events, events[0].timestamp)).toEqual(events);\n  });",
            "file": "machine.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will return last session when there is more than one in the events",
            "suites": [
                "get last session"
            ],
            "updatePoint": {
                "line": 22,
                "column": 72
            },
            "line": 22,
            "code": "  it('will return last session when there is more than one in the events', () => {\n    const multiple = events.concat(nextEvents).concat(nextNextEvents);\n    expect(\n      discardPriorSnapshots(\n        multiple,\n        nextNextEvents[nextNextEvents.length - 1].timestamp,\n      ),\n    ).toEqual(nextNextEvents);\n  });",
            "file": "machine.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will return last session when baseline time is future time",
            "suites": [
                "get last session"
            ],
            "updatePoint": {
                "line": 32,
                "column": 64
            },
            "line": 32,
            "code": "  it('will return last session when baseline time is future time', () => {\n    const multiple = events.concat(nextEvents).concat(nextNextEvents);\n    expect(\n      discardPriorSnapshots(\n        multiple,\n        nextNextEvents[nextNextEvents.length - 1].timestamp + 1000,\n      ),\n    ).toEqual(nextNextEvents);\n  });",
            "file": "machine.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will return all sessions when baseline time is prior time",
            "suites": [
                "get last session"
            ],
            "updatePoint": {
                "line": 42,
                "column": 63
            },
            "line": 42,
            "code": "  it('will return all sessions when baseline time is prior time', () => {\n    expect(discardPriorSnapshots(events, events[0].timestamp - 1000)).toEqual(\n      events,\n    );\n  });",
            "file": "machine.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can pack event",
            "suites": [
                "pack"
            ],
            "updatePoint": {
                "line": 12,
                "column": 20
            },
            "line": 12,
            "code": "  it('can pack event', () => {\n    const packedData = pack(event);\n    expect(packedData).toMatchSnapshot();\n  });",
            "file": "packer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "is compatible with unpacked data 1",
            "suites": [
                "unpack"
            ],
            "updatePoint": {
                "line": 19,
                "column": 40
            },
            "line": 19,
            "code": "  it('is compatible with unpacked data 1', () => {\n    const result = unpack((event as unknown) as string);\n    expect(result).toEqual(event);\n  });",
            "file": "packer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "is compatible with unpacked data 2",
            "suites": [
                "unpack"
            ],
            "updatePoint": {
                "line": 24,
                "column": 40
            },
            "line": 24,
            "code": "  it('is compatible with unpacked data 2', () => {\n    const result = unpack(JSON.stringify(event));\n    expect(result).toEqual(event);\n  });",
            "file": "packer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "stop on unknown data format",
            "suites": [
                "unpack"
            ],
            "updatePoint": {
                "line": 29,
                "column": 33
            },
            "line": 29,
            "code": "  it('stop on unknown data format', () => {\n    expect(() => unpack('[\"\"]')).toThrow('');\n  });",
            "file": "packer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can unpack packed data",
            "suites": [
                "unpack"
            ],
            "updatePoint": {
                "line": 33,
                "column": 28
            },
            "line": 33,
            "code": "  it('can unpack packed data', () => {\n    const packedData = pack(event);\n    const result = unpack(packedData);\n    expect(result).toEqual({\n      ...event,\n      v: MARK,\n    });\n  });",
            "file": "packer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will only have one full snapshot without checkout config",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 85,
                "column": 62
            },
            "line": 85,
            "code": "  it('will only have one full snapshot without checkout config', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n      });\n    });\n    let count = 30;\n    while (count--) {\n      await ctx.page.type('input', 'a');\n    }\n    await ctx.page.waitForTimeout(10);\n    expect(ctx.events.length).toEqual(33);\n    expect(\n      ctx.events.filter((event: eventWithTime) => event.type === EventType.Meta)\n        .length,\n    ).toEqual(1);\n    expect(\n      ctx.events.filter(\n        (event: eventWithTime) => event.type === EventType.FullSnapshot,\n      ).length,\n    ).toEqual(1);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can checkout full snapshot by count",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 109,
                "column": 41
            },
            "line": 109,
            "code": "  it('can checkout full snapshot by count', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n        checkoutEveryNth: 10,\n      });\n    });\n    let count = 30;\n    while (count--) {\n      await ctx.page.type('input', 'a');\n    }\n    await ctx.page.waitForTimeout(10);\n    expect(ctx.events.length).toEqual(39);\n    expect(\n      ctx.events.filter((event: eventWithTime) => event.type === EventType.Meta)\n        .length,\n    ).toEqual(4);\n    expect(\n      ctx.events.filter(\n        (event: eventWithTime) => event.type === EventType.FullSnapshot,\n      ).length,\n    ).toEqual(4);\n    expect(ctx.events[1].type).toEqual(EventType.FullSnapshot);\n    expect(ctx.events[13].type).toEqual(EventType.FullSnapshot);\n    expect(ctx.events[25].type).toEqual(EventType.FullSnapshot);\n    expect(ctx.events[37].type).toEqual(EventType.FullSnapshot);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can checkout full snapshot by time",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 138,
                "column": 40
            },
            "line": 138,
            "code": "  it('can checkout full snapshot by time', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n        checkoutEveryNms: 500,\n      });\n    });\n    let count = 30;\n    while (count--) {\n      await ctx.page.type('input', 'a');\n    }\n    await ctx.page.waitForTimeout(300);\n    expect(ctx.events.length).toEqual(33); // before first automatic snapshot\n    await ctx.page.waitForTimeout(200); // could be 33 or 35 events by now depending on speed of test env\n    await ctx.page.type('input', 'a');\n    await ctx.page.waitForTimeout(10);\n    expect(ctx.events.length).toEqual(36); // additionally includes the 2 checkout events\n    expect(\n      ctx.events.filter((event: eventWithTime) => event.type === EventType.Meta)\n        .length,\n    ).toEqual(2);\n    expect(\n      ctx.events.filter(\n        (event: eventWithTime) => event.type === EventType.FullSnapshot,\n      ).length,\n    ).toEqual(2);\n    expect(ctx.events[1].type).toEqual(EventType.FullSnapshot);\n    expect(ctx.events[35].type).toEqual(EventType.FullSnapshot);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "is safe to checkout during async callbacks",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 169,
                "column": 48
            },
            "line": 169,
            "code": "  it('is safe to checkout during async callbacks', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n        checkoutEveryNth: 2,\n      });\n      const p = document.createElement('p');\n      const span = document.createElement('span');\n      setTimeout(() => {\n        document.body.appendChild(p);\n        p.appendChild(span);\n        document.body.removeChild(document.querySelector('input')!);\n      }, 0);\n      setTimeout(() => {\n        span.innerText = 'test';\n      }, 10);\n      setTimeout(() => {\n        p.removeChild(span);\n        document.body.appendChild(span);\n      }, 10);\n    });\n    await ctx.page.waitForTimeout(100);\n    assertSnapshot(ctx.events);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can add custom event",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 195,
                "column": 26
            },
            "line": 195,
            "code": "  it('can add custom event', async () => {\n    await ctx.page.evaluate(() => {\n      const { record, addCustomEvent } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n      });\n      addCustomEvent<number>('tag1', 1);\n      addCustomEvent<{ a: string }>('tag2', {\n        a: 'b',\n      });\n    });\n    await ctx.page.waitForTimeout(50);\n    assertSnapshot(ctx.events);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures stylesheet rules",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 210,
                "column": 31
            },
            "line": 210,
            "code": "  it('captures stylesheet rules', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n      });\n\n      const styleElement = document.createElement('style');\n      document.head.appendChild(styleElement);\n\n      const styleSheet = <CSSStyleSheet>styleElement.sheet;\n      // begin: pre-serialization\n      const ruleIdx0 = styleSheet.insertRule('body { background: #000; }');\n      const ruleIdx1 = styleSheet.insertRule('body { background: #111; }');\n      styleSheet.deleteRule(ruleIdx1);\n      // end: pre-serialization\n      setTimeout(() => {\n        styleSheet.insertRule('body { color: #fff; }');\n      }, 0);\n      setTimeout(() => {\n        styleSheet.deleteRule(ruleIdx0);\n      }, 5);\n      setTimeout(() => {\n        styleSheet.insertRule('body { color: #ccc; }');\n      }, 10);\n    });\n    await ctx.page.waitForTimeout(50);\n    const styleSheetRuleEvents = ctx.events.filter(\n      (e) =>\n        e.type === EventType.IncrementalSnapshot &&\n        e.data.source === IncrementalSource.StyleSheetRule,\n    );\n    const addRules = styleSheetRuleEvents.filter((e) =>\n      Boolean((e.data as styleSheetRuleData).adds),\n    );\n    const removeRuleCount = styleSheetRuleEvents.filter((e) =>\n      Boolean((e.data as styleSheetRuleData).removes),\n    ).length;\n    // pre-serialization insert/delete should be ignored\n    expect(addRules.length).toEqual(2);\n    expect((addRules[0].data as styleSheetRuleData).adds).toEqual([\n      {\n        rule: 'body { color: #fff; }',\n      },\n    ]);\n    expect(removeRuleCount).toEqual(1);\n    assertSnapshot(ctx.events);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures nested stylesheet rules",
            "suites": [
                "record"
            ],
            "updatePoint": {
                "line": 305,
                "column": 38
            },
            "line": 305,
            "code": "  it('captures nested stylesheet rules', captureNestedStylesheetRulesTest);",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures nested stylesheet rules",
            "suites": [
                "record",
                "without CSSGroupingRule support"
            ],
            "updatePoint": {
                "line": 318,
                "column": 40
            },
            "line": 318,
            "code": "    it('captures nested stylesheet rules', captureNestedStylesheetRulesTest);",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures style property changes",
            "suites": [
                "record",
                "without CSSGroupingRule support"
            ],
            "updatePoint": {
                "line": 321,
                "column": 37
            },
            "line": 321,
            "code": "  it('captures style property changes', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n      });\n\n      const styleElement = document.createElement('style');\n      document.head.appendChild(styleElement);\n\n      const styleSheet = <CSSStyleSheet>styleElement.sheet;\n      styleSheet.insertRule('body { background: #000; }');\n      setTimeout(() => {\n        (styleSheet.cssRules[0] as CSSStyleRule).style.setProperty(\n          'color',\n          'green',\n        );\n        (styleSheet.cssRules[0] as CSSStyleRule).style.removeProperty(\n          'background',\n        );\n      }, 0);\n    });\n    await ctx.page.waitForTimeout(50);\n    assertSnapshot(ctx.events);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures iframe content in correct order",
            "suites": [
                "record iframes"
            ],
            "updatePoint": {
                "line": 364,
                "column": 46
            },
            "line": 364,
            "code": "  it('captures iframe content in correct order', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        emit: ((window as unknown) as IWindow).emit,\n      });\n    });\n    await ctx.page.waitForTimeout(10);\n    // console.log(JSON.stringify(ctx.events));\n\n    expect(ctx.events.length).toEqual(3);\n    const eventTypes = ctx.events\n      .filter(\n        (e) =>\n          e.type === EventType.IncrementalSnapshot ||\n          e.type === EventType.FullSnapshot,\n      )\n      .map((e) => e.type);\n    expect(eventTypes).toEqual([\n      EventType.FullSnapshot,\n      EventType.IncrementalSnapshot,\n    ]);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "captures stylesheet mutations in iframes",
            "suites": [
                "record iframes"
            ],
            "updatePoint": {
                "line": 388,
                "column": 46
            },
            "line": 388,
            "code": "  it('captures stylesheet mutations in iframes', async () => {\n    await ctx.page.evaluate(() => {\n      const { record } = ((window as unknown) as IWindow).rrweb;\n      record({\n        // need to reference window.top for when we are in an iframe!\n        emit: ((window.top as unknown) as IWindow).emit,\n      });\n\n      const iframe = document.querySelector('iframe');\n      // outer timeout is needed to wait for initStyleSheetObserver on iframe to be set up\n      setTimeout(() => {\n        const idoc = (iframe as HTMLIFrameElement).contentDocument!;\n        const styleElement = idoc.createElement('style');\n\n        idoc.head.appendChild(styleElement);\n\n        const styleSheet = <CSSStyleSheet>styleElement.sheet;\n        styleSheet.insertRule('@media {}');\n        const atMediaRule = styleSheet.cssRules[0] as CSSMediaRule;\n        const atRuleIdx0 = atMediaRule.insertRule(\n          'body { background: #000; }',\n          0,\n        );\n        const ruleIdx0 = styleSheet.insertRule('body { background: #000; }'); // inserted before above\n        // pre-serialization insert/delete above should be ignored\n        setTimeout(() => {\n          styleSheet.insertRule('body { color: #fff; }');\n          atMediaRule.insertRule('body { color: #ccc; }', 0);\n        }, 0);\n        setTimeout(() => {\n          styleSheet.deleteRule(ruleIdx0);\n          (styleSheet.cssRules[0] as CSSStyleRule).style.setProperty(\n            'color',\n            'green',\n          );\n        }, 5);\n        setTimeout(() => {\n          atMediaRule.deleteRule(atRuleIdx0);\n        }, 10);\n      }, 10);\n    });\n    await ctx.page.waitForTimeout(50);\n    const styleRelatedEvents = ctx.events.filter(\n      (e) =>\n        e.type === EventType.IncrementalSnapshot &&\n        (e.data.source === IncrementalSource.StyleSheetRule ||\n          e.data.source === IncrementalSource.StyleDeclaration),\n    );\n    const addRuleCount = styleRelatedEvents.filter((e) =>\n      Boolean((e.data as styleSheetRuleData).adds),\n    ).length;\n    const removeRuleCount = styleRelatedEvents.filter((e) =>\n      Boolean((e.data as styleSheetRuleData).removes),\n    ).length;\n    expect(styleRelatedEvents.length).toEqual(5);\n    expect(addRuleCount).toEqual(2);\n    expect(removeRuleCount).toEqual(2);\n    assertSnapshot(ctx.events);\n  });",
            "file": "record.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should insert rule at index 0 in empty sheet",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 10,
                "column": 52
            },
            "line": 10,
            "code": "    it('should insert rule at index 0 in empty sheet', () => {\n      const dom = new JSDOM(`\n        <style></style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const cssText = '.added-rule {border: 1px solid yellow;}';\n\n      const virtualStyleRules: VirtualStyleRules = [\n        { cssText, index: 0, type: StyleRuleType.Insert },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(styleEl.sheet?.cssRules?.length).toEqual(1);\n      expect(styleEl.sheet?.cssRules[0].cssText).toEqual(cssText);\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should insert rule at index 0 and keep exsisting rules",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 27,
                "column": 62
            },
            "line": 27,
            "code": "    it('should insert rule at index 0 and keep exsisting rules', () => {\n      const dom = new JSDOM(`\n        <style>\n          a {color: blue}\n          div {color: black}\n        </style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const cssText = '.added-rule {border: 1px solid yellow;}';\n      const virtualStyleRules: VirtualStyleRules = [\n        { cssText, index: 0, type: StyleRuleType.Insert },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(styleEl.sheet?.cssRules?.length).toEqual(3);\n      expect(styleEl.sheet?.cssRules[0].cssText).toEqual(cssText);\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should delete rule at index 0",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 46,
                "column": 37
            },
            "line": 46,
            "code": "    it('should delete rule at index 0', () => {\n      const dom = new JSDOM(`\n        <style>\n          a {color: blue;}\n          div {color: black;}\n        </style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const virtualStyleRules: VirtualStyleRules = [\n        { index: 0, type: StyleRuleType.Remove },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(styleEl.sheet?.cssRules?.length).toEqual(1);\n      expect(styleEl.sheet?.cssRules[0].cssText).toEqual('div {color: black;}');\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should restore a snapshot by inserting missing rules",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 64,
                "column": 60
            },
            "line": 64,
            "code": "    it('should restore a snapshot by inserting missing rules', () => {\n      const dom = new JSDOM(`\n        <style>\n          a {color: blue;}\n          .deleted-rule {color: pink;}\n          div {color: black;}\n        </style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const virtualStyleRules: VirtualStyleRules = [\n        {\n          cssTexts: ['a {color: blue;}', 'div {color: black;}'],\n          type: StyleRuleType.Snapshot,\n        },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(styleEl.sheet?.cssRules?.length).toEqual(2);\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should restore a snapshot by fixing order of rules",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 85,
                "column": 58
            },
            "line": 85,
            "code": "    it('should restore a snapshot by fixing order of rules', () => {\n      const dom = new JSDOM(`\n        <style>\n          div {color: black;}\n          a {color: blue;}\n        </style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const cssTexts = ['a {color: blue;}', 'div {color: black;}'];\n\n      const virtualStyleRules: VirtualStyleRules = [\n        {\n          cssTexts,\n          type: StyleRuleType.Snapshot,\n        },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(styleEl.sheet?.cssRules?.length).toEqual(2);\n      expect(\n        Array.from(styleEl.sheet?.cssRules || []).map((rule) => rule.cssText),\n      ).toEqual(cssTexts);\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should insert rule at index [0,0] and keep exsisting rules",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "line": 112,
            "code": "    it.skip('should insert rule at index [0,0] and keep exsisting rules', () => {",
            "file": "replay/virtual-styles.test.ts",
            "skipped": true,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should delete rule at index [0,1]",
            "suites": [
                "virtual styles",
                "applyVirtualStyleRulesToNode"
            ],
            "updatePoint": {
                "line": 141,
                "column": 41
            },
            "line": 141,
            "code": "    it('should delete rule at index [0,1]', () => {\n      const dom = new JSDOM(`\n        <style>\n          @media {\n            a {color: blue;}\n            div {color: black;}\n          }\n        </style>\n      `);\n      const styleEl = dom.window.document.getElementsByTagName('style')[0];\n\n      const virtualStyleRules: VirtualStyleRules = [\n        { index: [0, 1], type: StyleRuleType.Remove },\n      ];\n      applyVirtualStyleRulesToNode(virtualStyleRules, styleEl);\n\n      expect(\n        (styleEl.sheet?.cssRules[0] as CSSMediaRule).cssRules?.length,\n      ).toEqual(1);\n      expect(\n        (styleEl.sheet?.cssRules[0] as CSSMediaRule).cssRules[0].cssText,\n      ).toEqual('a {color: blue;}');\n    });",
            "file": "replay/virtual-styles.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can get meta data",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 52,
                "column": 23
            },
            "line": 52,
            "code": "  it('can get meta data', async () => {\n    const meta = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.getMetaData();\n    `);\n    expect(meta).toEqual({\n      startTime: events[0].timestamp,\n      endTime: events[events.length - 1].timestamp,\n      totalTime: events[events.length - 1].timestamp - events[0].timestamp,\n    });\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will start actions when play",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 65,
                "column": 34
            },
            "line": 65,
            "code": "  it('will start actions when play', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play();\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(events.length);\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "will clean actions when pause",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 75,
                "column": 35
            },
            "line": 75,
            "code": "  it('will clean actions when pause', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play();\n      replayer.pause();\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(0);\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can play at any time offset",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 86,
                "column": 33
            },
            "line": 86,
            "code": "  it('can play at any time offset', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play(1500);\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(\n      events.filter((e) => e.timestamp - events[0].timestamp >= 1500).length,\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can play a second time in the future",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 98,
                "column": 42
            },
            "line": 98,
            "code": "  it('can play a second time in the future', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play(500);\n      replayer.play(1500);\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(\n      events.filter((e) => e.timestamp - events[0].timestamp >= 1500).length,\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can play a second time to the past",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 111,
                "column": 40
            },
            "line": 111,
            "code": "  it('can play a second time to the past', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play(1500);\n      replayer.play(500);\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(\n      events.filter((e) => e.timestamp - events[0].timestamp >= 500).length,\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can pause at any time offset",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 124,
                "column": 34
            },
            "line": 124,
            "code": "  it('can pause at any time offset', async () => {\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.pause(2500);\n      replayer['timer']['actions'].length;\n    `);\n    const currentTime = await page.evaluate(`\n      replayer.getCurrentTime();\n    `);\n    const currentState = await page.evaluate(`\n      replayer['service']['state']['value'];\n    `);\n    expect(actionLength).toEqual(0);\n    expect(currentTime).toEqual(2500);\n    expect(currentState).toEqual('paused');\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can fast forward past StyleSheetRule changes on virtual elements",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 142,
                "column": 70
            },
            "line": 142,
            "code": "  it('can fast forward past StyleSheetRule changes on virtual elements', async () => {\n    await page.evaluate(`events = ${JSON.stringify(styleSheetRuleEvents)}`);\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play(1500);\n      replayer['timer']['actions'].length;\n    `);\n\n    expect(actionLength).toEqual(\n      styleSheetRuleEvents.filter(\n        (e) => e.timestamp - styleSheetRuleEvents[0].timestamp >= 1500,\n      ).length,\n    );\n\n    await assertDomSnapshot(\n      page,\n      __filename,\n      'style-sheet-rule-events-play-at-1500',\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should apply fast forwarded StyleSheetRules that where added",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 164,
                "column": 66
            },
            "line": 164,
            "code": "  it('should apply fast forwarded StyleSheetRules that where added', async () => {\n    await page.evaluate(`events = ${JSON.stringify(styleSheetRuleEvents)}`);\n    const result = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.pause(1500);\n      const rules = [...replayer.iframe.contentDocument.styleSheets].map(\n        (sheet) => [...sheet.rules],\n      ).flat();\n      rules.some((x) => x.selectorText === '.css-added-at-1000-deleted-at-2500');\n    `);\n\n    expect(result).toEqual(true);\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can handle removing style elements",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 179,
                "column": 40
            },
            "line": 179,
            "code": "  it('can handle removing style elements', async () => {\n    await page.evaluate(`events = ${JSON.stringify(stylesheetRemoveEvents)}`);\n    const actionLength = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play(2500);\n      replayer['timer']['actions'].length;\n    `);\n    expect(actionLength).toEqual(\n      stylesheetRemoveEvents.filter(\n        (e) => e.timestamp - stylesheetRemoveEvents[0].timestamp >= 2500,\n      ).length,\n    );\n\n    await assertDomSnapshot(\n      page,\n      __filename,\n      'style-sheet-remove-events-play-at-2500',\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can fast forward past StyleSheetRule deletion on virtual elements",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 200,
                "column": 71
            },
            "line": 200,
            "code": "  it('can fast forward past StyleSheetRule deletion on virtual elements', async () => {\n    await page.evaluate(`events = ${JSON.stringify(styleSheetRuleEvents)}`);\n\n    await assertDomSnapshot(\n      page,\n      __filename,\n      'style-sheet-rule-events-play-at-2500',\n    );\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "should delete fast forwarded StyleSheetRules that where removed",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 210,
                "column": 69
            },
            "line": 210,
            "code": "  it('should delete fast forwarded StyleSheetRules that where removed', async () => {\n    await page.evaluate(`events = ${JSON.stringify(styleSheetRuleEvents)}`);\n    const result = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.pause(3000);\n      const rules = [...replayer.iframe.contentDocument.styleSheets].map(\n        (sheet) => [...sheet.rules],\n      ).flat();\n      rules.some((x) => x.selectorText === '.css-added-at-1000-deleted-at-2500');\n    `);\n\n    expect(result).toEqual(false);\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "can stream events in live mode",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 225,
                "column": 36
            },
            "line": 225,
            "code": "  it('can stream events in live mode', async () => {\n    const status = await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events, {\n        liveMode: true\n      });\n      replayer.startLive();\n      replayer.service.state.value;\n    `);\n    expect(status).toEqual('live');\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "replays same timestamp events in correct order",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 237,
                "column": 52
            },
            "line": 237,
            "code": "  it('replays same timestamp events in correct order', async () => {\n    await page.evaluate(`events = ${JSON.stringify(orderingEvents)}`);\n    await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events);\n      replayer.play();\n    `);\n    await page.waitForTimeout(50);\n\n    await assertDomSnapshot(page, __filename, 'ordering-events');\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        },
        {
            "name": "replays same timestamp events in correct order (with addAction)",
            "suites": [
                "replayer"
            ],
            "updatePoint": {
                "line": 249,
                "column": 69
            },
            "line": 249,
            "code": "  it('replays same timestamp events in correct order (with addAction)', async () => {\n    await page.evaluate(`events = ${JSON.stringify(orderingEvents)}`);\n    await page.evaluate(`\n      const { Replayer } = rrweb;\n      const replayer = new Replayer(events.slice(0, events.length-2));\n      replayer.play();\n      replayer.addEvent(events[events.length-2]);\n      replayer.addEvent(events[events.length-1]);\n    `);\n    await page.waitForTimeout(50);\n\n    await assertDomSnapshot(page, __filename, 'ordering-events');\n  });",
            "file": "replayer.test.ts",
            "skipped": false,
            "dir": "packages/rrweb/test"
        }
    ],
    "badge": "rrweb-io__rrweb.svg"
}