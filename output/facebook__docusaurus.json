{"repo":"facebook/docusaurus","url":"https://github.com/facebook/docusaurus","branch":"main","configs":[{"package":"root","lang":"ts","dir":"__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/logger","lang":"ts","dir":"packages/docusaurus-logger/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/migrate","lang":"ts","dir":"packages/docusaurus-migrate/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/plugin-client-redirects","lang":"ts","dir":"packages/docusaurus-plugin-client-redirects/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/plugin-content-blog","lang":"ts","dir":"packages/docusaurus-plugin-content-blog/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/plugin-content-docs","lang":"ts","dir":"packages/docusaurus-plugin-content-docs/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/plugin-content-pages","lang":"ts","dir":"packages/docusaurus-plugin-content-pages/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/plugin-sitemap","lang":"ts","dir":"packages/docusaurus-plugin-sitemap/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/remark-plugin-npm2yarn","lang":"ts","dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/theme-classic","lang":"ts","dir":"packages/docusaurus-theme-classic/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/theme-live-codeblock","lang":"ts","dir":"packages/docusaurus-theme-live-codeblock/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/theme-search-algolia","lang":"js","dir":"packages/docusaurus-theme-search-algolia/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/theme-translations","lang":"ts","dir":"packages/docusaurus-theme-translations/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/utils-common","lang":"ts","dir":"packages/docusaurus-utils-common/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/utils-validation","lang":"ts","dir":"packages/docusaurus-utils-validation/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/utils","lang":"ts","dir":"packages/docusaurus-utils/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"@docusaurus/lqip-loader","lang":"ts","dir":"packages/lqip-loader/src/__tests__","framework":"jest","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"stylelint-copyright","lang":"js","dir":"packages/stylelint-copyright/__tests__","framework":"jest","pattern":"**/*.{js,ts}"}],"tests":[{"name":"are found","suites":["packages"],"updatePoint":{"line":40,"column":15},"line":40,"code":"  it('are found', async () => {\n    const packageJsonFiles = await getPackagesJsonFiles();\n    expect(packageJsonFiles.length).toBeGreaterThan(0);\n  });","file":"validate-package-json.test.ts","skipped":false,"dir":"__tests__"},{"name":"contain repository and directory","suites":["packages"],"updatePoint":{"line":45,"column":38},"line":45,"code":"  it('contain repository and directory', async () => {\n    const packageJsonFiles = await getPackagesJsonFiles();\n\n    packageJsonFiles\n      .filter((packageJsonFile) => !packageJsonFile.content.private)\n      .forEach((packageJsonFile) => {\n        expect(packageJsonFile.content.repository).toEqual({\n          type: 'git',\n          url: 'https://github.com/facebook/docusaurus.git',\n          directory: packageJsonFile.file.replace(/\\/package\\.json$/, ''),\n        });\n      });\n  });","file":"validate-package-json.test.ts","skipped":false,"dir":"__tests__"},{"name":"have publishConfig.access: \"public\" when name starts with @","suites":["packages"],"updatePoint":{"line":65,"column":65},"line":65,"code":"  it('have publishConfig.access: \"public\" when name starts with @', async () => {\n    const packageJsonFiles = await getPackagesJsonFiles();\n\n    packageJsonFiles\n      .filter((packageJsonFile) =>\n        packageJsonFile.content.name?.startsWith('@'),\n      )\n      .forEach((packageJsonFile) => {\n        // Unfortunately jest custom message do not exist in loops,\n        // so using an exception instead to show failing package file\n        // (see https://github.com/facebook/jest/issues/3293)\n        // expect(packageJsonFile.content.publishConfig?.access)\n        //  .toEqual('public');\n        if (packageJsonFile.content.publishConfig?.access !== 'public') {\n          throw new Error(\n            `Package ${packageJsonFile.file} does not have publishConfig.access: 'public'`,\n          );\n        }\n      });\n  });","file":"validate-package-json.test.ts","skipped":false,"dir":"__tests__"},{"name":"contain all required fields","suites":["tsconfig files"],"updatePoint":{"line":57,"column":33},"line":57,"code":"  it('contain all required fields', async () => {\n    const tsconfigFiles = await getTsconfigFiles();\n    tsconfigFiles.forEach((file) => {\n      try {\n        Joi.attempt(file.content, tsconfigSchema);\n      } catch (e) {\n        (\n          e as Error\n        ).message += `\\n${file.file} does not match the required schema.`;\n        throw e;\n      }\n    });\n  });","file":"validate-tsconfig.test.ts","skipped":false,"dir":"__tests__"},{"name":"path","suites":["formatters"],"updatePoint":{"line":14,"column":10},"line":14,"code":"  it('path', () => {\n    expect(logger.path('keepAnsi')).toMatchInlineSnapshot(`\"\u001b[36m\u001b[4m\"keepAnsi\"\u001b[24m\u001b[39m\"`);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"url","suites":["formatters"],"updatePoint":{"line":17,"column":9},"line":17,"code":"  it('url', () => {\n    expect(logger.url('https://docusaurus.io/keepAnsi')).toMatchInlineSnapshot(\n      `\"\u001b[36m\u001b[4mhttps://docusaurus.io/keepAnsi\u001b[24m\u001b[39m\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"id","suites":["formatters"],"updatePoint":{"line":22,"column":8},"line":22,"code":"  it('id', () => {\n    expect(logger.name('keepAnsi')).toMatchInlineSnapshot(`\"\u001b[34m\u001b[1mkeepAnsi\u001b[22m\u001b[39m\"`);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"code","suites":["formatters"],"updatePoint":{"line":25,"column":10},"line":25,"code":"  it('code', () => {\n    expect(logger.code('keepAnsi')).toMatchInlineSnapshot(`\"\u001b[36m\\`keepAnsi\\`\u001b[39m\"`);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"subdue","suites":["formatters"],"updatePoint":{"line":28,"column":12},"line":28,"code":"  it('subdue', () => {\n    expect(logger.subdue('keepAnsi')).toMatchInlineSnapshot(`\"\u001b[90mkeepAnsi\u001b[39m\"`);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"formats text with variables & arrays","suites":["interpolate"],"updatePoint":{"line":34,"column":42},"line":34,"code":"  it('formats text with variables & arrays', () => {\n    const name = 'Josh';\n    const items = [1, 'hi', 'Hmmm'];\n    expect(\n      logger.interpolate`(keepAnsi) Hello ${name}! Here are your goodies:${items}`,\n    ).toMatchInlineSnapshot(`\n      \"(keepAnsi) Hello Josh! Here are your goodies:\n      - 1\n      - hi\n      - Hmmm\"\n    `);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"recognizes valid flags","suites":["interpolate"],"updatePoint":{"line":46,"column":28},"line":46,"code":"  it('recognizes valid flags', () => {\n    expect(\n      logger.interpolate`(keepAnsi) The package at path=${'packages/docusaurus'} has number=${10} files. name=${'Babel'} is exported here subdue=${'(as a preset)'} that you can with code=${\"require.resolve('@docusaurus/core/lib/babel/preset')\"}`,\n    ).toMatchInlineSnapshot(\n      `\"(keepAnsi) The package at \u001b[36m\u001b[4m\"packages/docusaurus\"\u001b[24m\u001b[39m has \u001b[33m10\u001b[39m files. \u001b[34m\u001b[1mBabel\u001b[22m\u001b[39m is exported here \u001b[90m(as a preset)\u001b[39m that you can with \u001b[36m\\`require.resolve('@docusaurus/core/lib/babel/preset')\\`\u001b[39m\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"interpolates arrays with flags","suites":["interpolate"],"updatePoint":{"line":53,"column":36},"line":53,"code":"  it('interpolates arrays with flags', () => {\n    expect(\n      logger.interpolate`(keepAnsi) The following commands are available:code=${[\n        'docusaurus start',\n        'docusaurus build',\n        'docusaurus deploy',\n      ]}`,\n    ).toMatchInlineSnapshot(`\n      \"(keepAnsi) The following commands are available:\n      - \u001b[36m\\`docusaurus start\\`\u001b[39m\n      - \u001b[36m\\`docusaurus build\\`\u001b[39m\n      - \u001b[36m\\`docusaurus deploy\\`\u001b[39m\"\n    `);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"prints detached flags as-is","suites":["interpolate"],"updatePoint":{"line":67,"column":33},"line":67,"code":"  it('prints detached flags as-is', () => {\n    expect(\n      logger.interpolate`(keepAnsi) You can use placeholders like code= ${'and it will'} be replaced with the succeeding arguments`,\n    ).toMatchInlineSnapshot(\n      `\"(keepAnsi) You can use placeholders like code= and it will be replaced with the succeeding arguments\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"throws with bad flags","suites":["interpolate"],"updatePoint":{"line":74,"column":27},"line":74,"code":"  it('throws with bad flags', () => {\n    expect(\n      () =>\n        logger.interpolate`(keepAnsi) I mistyped this: cde=${'this code'} and I will be damned`,\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"Bad Docusaurus logging message. This is likely an internal bug, please report it.\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"prints objects","suites":["info"],"updatePoint":{"line":86,"column":20},"line":86,"code":"  it('prints objects', () => {\n    logger.info({a: 1});\n    logger.info(undefined);\n    logger.info([1, 2, 3]);\n    logger.info(new Date(2021, 10, 13));\n    expect(consoleMock.mock.calls).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"prints objects","suites":["warn"],"updatePoint":{"line":97,"column":20},"line":97,"code":"  it('prints objects', () => {\n    logger.warn({a: 1});\n    logger.warn(undefined);\n    logger.warn([1, 2, 3]);\n    logger.warn(new Date(2021, 10, 13));\n    expect(consoleMock.mock.calls).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"prints objects","suites":["error"],"updatePoint":{"line":108,"column":20},"line":108,"code":"  it('prints objects', () => {\n    logger.error({a: 1});\n    logger.error(undefined);\n    logger.error([1, 2, 3]);\n    logger.error(new Date(2021, 10, 13));\n    expect(consoleMock.mock.calls).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"prints objects","suites":["success"],"updatePoint":{"line":119,"column":20},"line":119,"code":"  it('prints objects', () => {\n    logger.success({a: 1});\n    logger.success(undefined);\n    logger.success([1, 2, 3]);\n    logger.success(new Date(2021, 10, 13));\n    expect(consoleMock.mock.calls).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-logger/src/__tests__"},{"name":"works","suites":["shouldQuotifyFrontMatter"],"updatePoint":{"line":11,"column":11},"line":11,"code":"  it('works', () => {\n    expect(shouldQuotifyFrontMatter(['id', 'value'])).toBe(false);\n    expect(\n      shouldQuotifyFrontMatter([\n        'title',\n        // cSpell:ignore sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ\n        \"Some title front matter with allowed special chars like sàáâãäåçèéêëìíîïðòóôõöùúûüýÿ!;,=+-_?'`&#()[]§%€$\",\n      ]),\n    ).toBe(false);\n\n    expect(shouldQuotifyFrontMatter(['title', 'Special char :'])).toBe(true);\n\n    expect(shouldQuotifyFrontMatter(['title', 'value!'])).toBe(false);\n    expect(shouldQuotifyFrontMatter(['title', '!value'])).toBe(true);\n\n    expect(shouldQuotifyFrontMatter(['tags', '[tag1, tag2]'])).toBe(false);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-migrate/src/__tests__"},{"name":"migrates simple website","suites":["migration CLI"],"updatePoint":{"line":48,"column":29},"line":48,"code":"  it('migrates simple website', async () => {\n    const siteDir = path.join(fixtureDir, 'simple_website', 'website');\n    const newDir = path.join(fixtureDir, 'migrated_simple_site');\n    await testMigration(siteDir, newDir);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-migrate/src/__tests__"},{"name":"migrates complex website","suites":["migration CLI"],"updatePoint":{"line":54,"column":30},"line":54,"code":"  it('migrates complex website', async () => {\n    const siteDir = path.join(fixtureDir, 'complex_website', 'website');\n    const newDir = path.join(fixtureDir, 'migrated_complex_site');\n    await testMigration(siteDir, newDir);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-migrate/src/__tests__"},{"name":"migrates missing versions","suites":["migration CLI"],"updatePoint":{"line":60,"column":31},"line":60,"code":"  it('migrates missing versions', async () => {\n    const siteDir = path.join(fixtureDir, 'missing_version_website', 'website');\n    const newDir = path.join(fixtureDir, 'migrated_missing_version_site');\n    await testMigration(siteDir, newDir);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-migrate/src/__tests__"},{"name":"simple test","suites":["create config"],"updatePoint":{"line":13,"column":17},"line":13,"code":"  it('simple test', () => {\n    const v1Config: VersionOneConfig = importFresh(\n      `${__dirname}/__fixtures__/sourceSiteConfig.js`,\n    );\n    const siteDir = 'website';\n    const newDir = 'websiteMigrated';\n\n    const result = createConfigFile({v1Config, siteDir, newDir});\n\n    const output = importFresh(\n      `${__dirname}/__fixtures__/expectedSiteConfig.js`,\n    );\n    expect(result).toEqual(output);\n  });","file":"migrationConfig.test.ts","skipped":false,"dir":"packages/docusaurus-migrate/src/__tests__"},{"name":"collects no redirect for undefined config","suites":["collectRedirects"],"updatePoint":{"line":28,"column":47},"line":28,"code":"  it('collects no redirect for undefined config', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(undefined, ['/', '/path']),\n        undefined,\n      ),\n    ).toEqual([]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects no redirect for empty config","suites":["collectRedirects"],"updatePoint":{"line":37,"column":43},"line":37,"code":"  it('collects no redirect for empty config', () => {\n    expect(collectRedirects(createTestPluginContext({}), undefined)).toEqual(\n      [],\n    );\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects from html/exe extension","suites":["collectRedirects"],"updatePoint":{"line":43,"column":48},"line":43,"code":"  it('collects redirects from html/exe extension', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            fromExtensions: ['html', 'exe'],\n          },\n          ['/', '/somePath', '/otherPath.html'],\n        ),\n        undefined,\n      ),\n    ).toEqual([\n      {\n        from: '/somePath.html',\n        to: '/somePath',\n      },\n      {\n        from: '/somePath.exe',\n        to: '/somePath',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects to html/exe extension","suites":["collectRedirects"],"updatePoint":{"line":66,"column":46},"line":66,"code":"  it('collects redirects to html/exe extension', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            toExtensions: ['html', 'exe'],\n          },\n          ['/', '/somePath', '/otherPath.html'],\n        ),\n        undefined,\n      ),\n    ).toEqual([\n      {\n        from: '/otherPath',\n        to: '/otherPath.html',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects from plugin option redirects","suites":["collectRedirects"],"updatePoint":{"line":85,"column":53},"line":85,"code":"  it('collects redirects from plugin option redirects', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            redirects: [\n              {\n                from: '/someLegacyPath',\n                to: '/somePath',\n              },\n              {\n                from: ['/someLegacyPathArray1', '/someLegacyPathArray2'],\n                to: '/',\n              },\n            ],\n          },\n          ['/', '/somePath'],\n        ),\n        undefined,\n      ),\n    ).toEqual([\n      {\n        from: '/someLegacyPath',\n        to: '/somePath',\n      },\n      {\n        from: '/someLegacyPathArray1',\n        to: '/',\n      },\n      {\n        from: '/someLegacyPathArray2',\n        to: '/',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects from plugin option redirects with trailingSlash=true","suites":["collectRedirects"],"updatePoint":{"line":121,"column":77},"line":121,"code":"  it('collects redirects from plugin option redirects with trailingSlash=true', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            redirects: [\n              {\n                from: '/someLegacyPath',\n                to: '/somePath',\n              },\n              {\n                from: ['/someLegacyPathArray1', '/someLegacyPathArray2'],\n                to: '/',\n              },\n            ],\n          },\n          ['/', '/somePath/'],\n        ),\n        true,\n      ),\n    ).toEqual([\n      {\n        from: '/someLegacyPath',\n        to: '/somePath/',\n      },\n      {\n        from: '/someLegacyPathArray1',\n        to: '/',\n      },\n      {\n        from: '/someLegacyPathArray2',\n        to: '/',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects from plugin option redirects with trailingSlash=false","suites":["collectRedirects"],"updatePoint":{"line":157,"column":78},"line":157,"code":"  it('collects redirects from plugin option redirects with trailingSlash=false', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            redirects: [\n              {\n                from: '/someLegacyPath',\n                to: '/somePath/',\n              },\n              {\n                from: ['/someLegacyPathArray1', '/someLegacyPathArray2'],\n                to: '/',\n              },\n            ],\n          },\n          ['/', '/somePath'],\n        ),\n        false,\n      ),\n    ).toEqual([\n      {\n        from: '/someLegacyPath',\n        to: '/somePath',\n      },\n      {\n        from: '/someLegacyPathArray1',\n        to: '/',\n      },\n      {\n        from: '/someLegacyPathArray2',\n        to: '/',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"throw if plugin option redirects contain invalid to paths","suites":["collectRedirects"],"updatePoint":{"line":193,"column":63},"line":193,"code":"  it('throw if plugin option redirects contain invalid to paths', () => {\n    expect(() =>\n      collectRedirects(\n        createTestPluginContext(\n          {\n            redirects: [\n              {\n                from: '/someLegacyPath',\n                to: '/',\n              },\n              {\n                from: '/someLegacyPath',\n                to: '/this/path/does/not/exist2',\n              },\n              {\n                from: '/someLegacyPath',\n                to: '/this/path/does/not/exist2',\n              },\n            ],\n          },\n          ['/', '/someExistingPath', '/anotherExistingPath'],\n        ),\n        undefined,\n      ),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"collects redirects with custom redirect creator","suites":["collectRedirects"],"updatePoint":{"line":220,"column":53},"line":220,"code":"  it('collects redirects with custom redirect creator', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            createRedirects: (routePath) => [\n              `${removeTrailingSlash(routePath)}/some/path/suffix1`,\n              `${removeTrailingSlash(routePath)}/some/other/path/suffix2`,\n            ],\n          },\n          ['/', '/testPath', '/otherPath.html'],\n        ),\n        undefined,\n      ),\n    ).toEqual([\n      {\n        from: '/some/path/suffix1',\n        to: '/',\n      },\n      {\n        from: '/some/other/path/suffix2',\n        to: '/',\n      },\n\n      {\n        from: '/testPath/some/path/suffix1',\n        to: '/testPath',\n      },\n      {\n        from: '/testPath/some/other/path/suffix2',\n        to: '/testPath',\n      },\n\n      {\n        from: '/otherPath.html/some/path/suffix1',\n        to: '/otherPath.html',\n      },\n      {\n        from: '/otherPath.html/some/other/path/suffix2',\n        to: '/otherPath.html',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"allows returning string / undefined","suites":["collectRedirects"],"updatePoint":{"line":264,"column":41},"line":264,"code":"  it('allows returning string / undefined', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            createRedirects: (routePath) => {\n              if (routePath === '/') {\n                return `${routePath}foo`;\n              }\n              return undefined;\n            },\n          },\n          ['/', '/testPath', '/otherPath.html'],\n        ),\n        undefined,\n      ),\n    ).toEqual([{from: '/foo', to: '/'}]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"throws if redirect creator creates invalid redirects","suites":["collectRedirects"],"updatePoint":{"line":283,"column":58},"line":283,"code":"  it('throws if redirect creator creates invalid redirects', () => {\n    expect(() =>\n      collectRedirects(\n        createTestPluginContext(\n          {\n            createRedirects: (routePath) => {\n              if (routePath === '/') {\n                return [\n                  `https://google.com/`,\n                  `//abc`,\n                  `/def?queryString=toto`,\n                ];\n              }\n              return undefined;\n            },\n          },\n          ['/'],\n        ),\n        undefined,\n      ),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"throws if redirect creator creates array of array redirect","suites":["collectRedirects"],"updatePoint":{"line":306,"column":64},"line":306,"code":"  it('throws if redirect creator creates array of array redirect', () => {\n    expect(() =>\n      collectRedirects(\n        createTestPluginContext(\n          {\n            createRedirects: (routePath) => {\n              if (routePath === '/') {\n                return [[`/fromPath`]] as unknown as string;\n              }\n              return undefined;\n            },\n          },\n          ['/'],\n        ),\n        undefined,\n      ),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"filters unwanted redirects","suites":["collectRedirects"],"updatePoint":{"line":325,"column":32},"line":325,"code":"  it('filters unwanted redirects', () => {\n    expect(\n      collectRedirects(\n        createTestPluginContext(\n          {\n            fromExtensions: ['html', 'exe'],\n            toExtensions: ['html', 'exe'],\n          },\n          [\n            '/',\n            '/somePath',\n            '/somePath.html',\n            '/somePath.exe',\n            '/fromShouldWork.html',\n            '/toShouldWork',\n          ],\n        ),\n        undefined,\n      ),\n    ).toEqual([\n      {\n        from: '/toShouldWork.html',\n        to: '/toShouldWork',\n      },\n      {\n        from: '/toShouldWork.exe',\n        to: '/toShouldWork',\n      },\n      {\n        from: '/fromShouldWork',\n        to: '/fromShouldWork.html',\n      },\n    ]);\n  });","file":"collectRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"works","suites":["createRedirectPageContent"],"updatePoint":{"line":11,"column":11},"line":11,"code":"  it('works', () => {\n    expect(\n      createRedirectPageContent({toUrl: 'https://docusaurus.io/'}),\n    ).toMatchSnapshot();\n  });","file":"createRedirectPageContent.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"encodes uri special chars","suites":["createRedirectPageContent"],"updatePoint":{"line":17,"column":31},"line":17,"code":"  it('encodes uri special chars', () => {\n    const result = createRedirectPageContent({\n      toUrl: 'https://docusaurus.io/gr/σελιδας/',\n    });\n    expect(result).toContain(\n      'https://docusaurus.io/gr/%CF%83%CE%B5%CE%BB%CE%B9%CE%B4%CE%B1%CF%82/',\n    );\n    expect(result).toMatchSnapshot();\n  });","file":"createRedirectPageContent.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects empty extensions","suites":["createToExtensionsRedirects"],"updatePoint":{"line":14,"column":30},"line":14,"code":"  it('rejects empty extensions', () => {\n    expect(() => {\n      createToExtensionsRedirects(['/'], ['']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \"\" is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with \".\"","suites":["createToExtensionsRedirects"],"updatePoint":{"line":23,"column":33},"line":23,"code":"  it('rejects extensions with \".\"', () => {\n    expect(() => {\n      createToExtensionsRedirects(['/'], ['.html']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \".html\" contains a \".\" (dot) which is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with /","suites":["createToExtensionsRedirects"],"updatePoint":{"line":32,"column":31},"line":32,"code":"  it('rejects extensions with /', () => {\n    expect(() => {\n      createToExtensionsRedirects(['/'], ['ht/ml']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \"ht/ml\" contains a \"/\" (slash) which is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with illegal url char","suites":["createToExtensionsRedirects"],"updatePoint":{"line":41,"column":46},"line":41,"code":"  it('rejects extensions with illegal url char', () => {\n    expect(() => {\n      createToExtensionsRedirects(['/'], [',']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \",\" contains invalid URI characters.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates redirects from html/htm extensions","suites":["createToExtensionsRedirects"],"updatePoint":{"line":50,"column":48},"line":50,"code":"  it('creates redirects from html/htm extensions', () => {\n    const ext = ['html', 'htm'];\n    expect(createToExtensionsRedirects([''], ext)).toEqual([]);\n    expect(createToExtensionsRedirects(['/'], ext)).toEqual([]);\n    expect(createToExtensionsRedirects(['/abc.html'], ext)).toEqual([\n      {from: '/abc', to: '/abc.html'},\n    ]);\n    expect(createToExtensionsRedirects(['/abc.htm'], ext)).toEqual([\n      {from: '/abc', to: '/abc.htm'},\n    ]);\n    expect(createToExtensionsRedirects(['/abc.xyz'], ext)).toEqual([]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates \"to\" redirects when relativeRoutesPath contains a prefix","suites":["createToExtensionsRedirects"],"updatePoint":{"line":63,"column":70},"line":63,"code":"  it('creates \"to\" redirects when relativeRoutesPath contains a prefix', () => {\n    expect(\n      createToExtensionsRedirects(['/prefix/file.html'], ['html']),\n    ).toEqual([{from: '/prefix/file', to: '/prefix/file.html'}]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"does not create redirection for an empty extension array","suites":["createToExtensionsRedirects"],"updatePoint":{"line":69,"column":62},"line":69,"code":"  it('does not create redirection for an empty extension array', () => {\n    const ext: string[] = [];\n    expect(createToExtensionsRedirects([''], ext)).toEqual([]);\n    expect(createToExtensionsRedirects(['/'], ext)).toEqual([]);\n    expect(createToExtensionsRedirects(['/abc.html'], ext)).toEqual([]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects empty extensions","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":78,"column":30},"line":78,"code":"  it('rejects empty extensions', () => {\n    expect(() => {\n      createFromExtensionsRedirects(['/'], ['.html']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \".html\" contains a \".\" (dot) which is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with \".\"","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":87,"column":33},"line":87,"code":"  it('rejects extensions with \".\"', () => {\n    expect(() => {\n      createFromExtensionsRedirects(['/'], ['.html']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \".html\" contains a \".\" (dot) which is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with /","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":96,"column":31},"line":96,"code":"  it('rejects extensions with /', () => {\n    expect(() => {\n      createFromExtensionsRedirects(['/'], ['ht/ml']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \"ht/ml\" contains a \"/\" (slash) which is not allowed.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects extensions with illegal url char","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":105,"column":46},"line":105,"code":"  it('rejects extensions with illegal url char', () => {\n    expect(() => {\n      createFromExtensionsRedirects(['/'], [',']);\n    }).toThrowErrorMatchingInlineSnapshot(`\n      \"Extension \",\" contains invalid URI characters.\n      If the redirect extension system is not good enough for your use case, you can create redirects yourself with the \"createRedirects\" plugin option.\"\n    `);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates redirects from html/htm extensions","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":114,"column":48},"line":114,"code":"  it('creates redirects from html/htm extensions', () => {\n    const ext = ['html', 'htm'];\n    expect(createFromExtensionsRedirects([''], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/'], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/abc'], ext)).toEqual([\n      {from: '/abc.html', to: '/abc'},\n      {from: '/abc.htm', to: '/abc'},\n    ]);\n    expect(createFromExtensionsRedirects(['/def.html'], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/def/'], ext)).toEqual([\n      {from: '/def.html/', to: '/def/'},\n      {from: '/def.htm/', to: '/def/'},\n    ]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates \"from\" redirects when relativeRoutesPath contains a prefix","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":129,"column":72},"line":129,"code":"  it('creates \"from\" redirects when relativeRoutesPath contains a prefix', () => {\n    expect(createFromExtensionsRedirects(['/prefix/file'], ['html'])).toEqual([\n      {from: '/prefix/file.html', to: '/prefix/file'},\n    ]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"does not create redirection for an empty extension array","suites":["createFromExtensionsRedirects"],"updatePoint":{"line":135,"column":62},"line":135,"code":"  it('does not create redirection for an empty extension array', () => {\n    const ext: string[] = [];\n    expect(createFromExtensionsRedirects([''], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/'], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/abc'], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/def.html'], ext)).toEqual([]);\n    expect(createFromExtensionsRedirects(['/def/'], ext)).toEqual([]);\n  });","file":"extensionRedirects.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"returns default options for undefined user options","suites":["normalizePluginOptions"],"updatePoint":{"line":17,"column":56},"line":17,"code":"  it('returns default options for undefined user options', () => {\n    expect(testValidate(undefined)).toEqual({\n      ...DEFAULT_OPTIONS,\n      id: 'default',\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"returns default options for empty user options","suites":["normalizePluginOptions"],"updatePoint":{"line":24,"column":52},"line":24,"code":"  it('returns default options for empty user options', () => {\n    expect(testValidate({})).toEqual({...DEFAULT_OPTIONS, id: 'default'});\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"overrides one default options with valid user options","suites":["normalizePluginOptions"],"updatePoint":{"line":28,"column":59},"line":28,"code":"  it('overrides one default options with valid user options', () => {\n    expect(\n      testValidate({\n        toExtensions: ['html'],\n      }),\n    ).toEqual({...DEFAULT_OPTIONS, id: 'default', toExtensions: ['html']});\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"overrides all default options with valid user options","suites":["normalizePluginOptions"],"updatePoint":{"line":36,"column":59},"line":36,"code":"  it('overrides all default options with valid user options', () => {\n    const createRedirects: Options['createRedirects'] = () => [];\n    expect(\n      testValidate({\n        fromExtensions: ['exe', 'zip'],\n        toExtensions: ['html'],\n        createRedirects,\n        redirects: [{from: '/x', to: '/y'}],\n      }),\n    ).toEqual({\n      id: 'default',\n      fromExtensions: ['exe', 'zip'],\n      toExtensions: ['html'],\n      createRedirects,\n      redirects: [{from: '/x', to: '/y'}],\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects bad fromExtensions user inputs","suites":["normalizePluginOptions"],"updatePoint":{"line":54,"column":44},"line":54,"code":"  it('rejects bad fromExtensions user inputs', () => {\n    expect(() =>\n      testValidate({\n        // @ts-expect-error: for test\n        fromExtensions: [null, undefined, 123, true],\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects bad toExtensions user inputs","suites":["normalizePluginOptions"],"updatePoint":{"line":63,"column":42},"line":63,"code":"  it('rejects bad toExtensions user inputs', () => {\n    expect(() =>\n      testValidate({\n        // @ts-expect-error: for test\n        toExtensions: [null, undefined, 123, true],\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"rejects bad createRedirects user inputs","suites":["normalizePluginOptions"],"updatePoint":{"line":72,"column":45},"line":72,"code":"  it('rejects bad createRedirects user inputs', () => {\n    expect(() =>\n      testValidate({\n        // @ts-expect-error: for test\n        createRedirects: ['bad', 'value'],\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"validate good redirects without throwing","suites":["validateRedirect"],"updatePoint":{"line":11,"column":46},"line":11,"code":"  it('validate good redirects without throwing', () => {\n    expect(() => {\n      validateRedirect({\n        from: '/fromSomePath',\n        to: '/toSomePath',\n      });\n      validateRedirect({\n        from: '/from/Some/Path',\n        to: '/toSomePath',\n      });\n      validateRedirect({\n        from: '/fromSomePath',\n        to: '/toSomePath',\n      });\n      validateRedirect({\n        from: '/fromSomePath',\n        to: '/to/Some/Path',\n      });\n    }).not.toThrow();\n  });","file":"redirectValidation.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"throw for bad redirects","suites":["validateRedirect"],"updatePoint":{"line":32,"column":29},"line":32,"code":"  it('throw for bad redirects', () => {\n    expect(() =>\n      validateRedirect({\n        from: 'https://fb.com/fromSomePath',\n        to: '/toSomePath',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n\n    expect(() =>\n      validateRedirect({\n        from: '/fromSomePath',\n        to: 'https://fb.com/toSomePath',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n\n    expect(() =>\n      validateRedirect({\n        from: '/fromSomePath',\n        to: '/toSomePath?queryString=xyz',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n\n    expect(() =>\n      validateRedirect({\n        from: null as unknown as string,\n        to: '/toSomePath?queryString=xyz',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n\n    expect(() =>\n      validateRedirect({\n        from: ['hey'] as unknown as string,\n        to: '/toSomePath?queryString=xyz',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"redirectValidation.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate redirect urls","suites":["createToUrl"],"updatePoint":{"line":20,"column":39},"line":20,"code":"  it('creates appropriate redirect urls', () => {\n    expect(createToUrl('/', '/docs/something/else')).toBe(\n      '/docs/something/else',\n    );\n    expect(createToUrl('/', '/docs/something/else/')).toBe(\n      '/docs/something/else/',\n    );\n    expect(createToUrl('/', 'docs/something/else')).toBe(\n      '/docs/something/else',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate redirect urls with baseUrl","suites":["createToUrl"],"updatePoint":{"line":32,"column":52},"line":32,"code":"  it('creates appropriate redirect urls with baseUrl', () => {\n    expect(createToUrl('/baseUrl/', '/docs/something/else')).toBe(\n      '/baseUrl/docs/something/else',\n    );\n    expect(createToUrl('/baseUrl/', '/docs/something/else/')).toBe(\n      '/baseUrl/docs/something/else/',\n    );\n    expect(createToUrl('/baseUrl/', 'docs/something/else')).toBe(\n      '/baseUrl/docs/something/else',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate metadata trailingSlash=undefined","suites":["toRedirectFilesMetadata"],"updatePoint":{"line":46,"column":58},"line":46,"code":"  it('creates appropriate metadata trailingSlash=undefined', () => {\n    const pluginContext = {\n      outDir: '/tmp/someFixedOutDir',\n      baseUrl: 'https://docusaurus.io',\n    };\n\n    const redirectFiles = toRedirectFilesMetadata(\n      [\n        {from: '/abc.html', to: '/abc'},\n        {from: '/def', to: '/def.html'},\n        {from: '/xyz', to: '/'},\n      ],\n      pluginContext,\n      undefined,\n    );\n\n    expect(redirectFiles.map((f) => f.fileAbsolutePath)).toEqual([\n      path.join(pluginContext.outDir, '/abc.html/index.html'),\n      path.join(pluginContext.outDir, '/def/index.html'),\n      path.join(pluginContext.outDir, '/xyz/index.html'),\n    ]);\n\n    expect(redirectFiles.map((f) => f.fileContent)).toMatchSnapshot(\n      'fileContent',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate metadata trailingSlash=true","suites":["toRedirectFilesMetadata"],"updatePoint":{"line":73,"column":53},"line":73,"code":"  it('creates appropriate metadata trailingSlash=true', () => {\n    const pluginContext = {\n      outDir: '/tmp/someFixedOutDir',\n      baseUrl: 'https://docusaurus.io',\n    };\n\n    const redirectFiles = toRedirectFilesMetadata(\n      [\n        {from: '/abc.html', to: '/abc'},\n        {from: '/def', to: '/def.html'},\n        {from: '/xyz', to: '/'},\n      ],\n      pluginContext,\n      true,\n    );\n\n    expect(redirectFiles.map((f) => f.fileAbsolutePath)).toEqual([\n      path.join(pluginContext.outDir, '/abc.html/index.html'),\n      path.join(pluginContext.outDir, '/def/index.html'),\n      path.join(pluginContext.outDir, '/xyz/index.html'),\n    ]);\n\n    expect(redirectFiles.map((f) => f.fileContent)).toMatchSnapshot(\n      'fileContent',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate metadata trailingSlash=false","suites":["toRedirectFilesMetadata"],"updatePoint":{"line":100,"column":54},"line":100,"code":"  it('creates appropriate metadata trailingSlash=false', () => {\n    const pluginContext = {\n      outDir: '/tmp/someFixedOutDir',\n      baseUrl: 'https://docusaurus.io',\n    };\n\n    const redirectFiles = toRedirectFilesMetadata(\n      [\n        {from: '/abc.html', to: '/abc'},\n        {from: '/def', to: '/def.html'},\n        {from: '/xyz', to: '/'},\n      ],\n      pluginContext,\n      false,\n    );\n\n    expect(redirectFiles.map((f) => f.fileAbsolutePath)).toEqual([\n      // Can't be used because /abc.html already exists, and file/folder can't\n      // share same name on Unix!\n      // path.join(pluginContext.outDir, '/abc.html/index.html'),\n      path.join(pluginContext.outDir, '/abc.html.html'), // Weird but on purpose!\n      path.join(pluginContext.outDir, '/def/index.html'),\n      path.join(pluginContext.outDir, '/xyz/index.html'),\n    ]);\n\n    expect(redirectFiles.map((f) => f.fileContent)).toMatchSnapshot(\n      'fileContent',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate metadata for root baseUrl","suites":["toRedirectFilesMetadata"],"updatePoint":{"line":130,"column":51},"line":130,"code":"  it('creates appropriate metadata for root baseUrl', () => {\n    const pluginContext = {\n      outDir: '/tmp/someFixedOutDir',\n      baseUrl: '/',\n    };\n    const redirectFiles = toRedirectFilesMetadata(\n      [{from: '/abc.html', to: '/abc'}],\n      pluginContext,\n      undefined,\n    );\n    expect(redirectFiles.map((f) => f.fileContent)).toMatchSnapshot(\n      'fileContent baseUrl=/',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"creates appropriate metadata for empty baseUrl","suites":["toRedirectFilesMetadata"],"updatePoint":{"line":145,"column":52},"line":145,"code":"  it('creates appropriate metadata for empty baseUrl', () => {\n    const pluginContext = {\n      outDir: '/tmp/someFixedOutDir',\n      baseUrl: '',\n    };\n    const redirectFiles = toRedirectFilesMetadata(\n      [{from: '/abc.html', to: '/abc'}],\n      pluginContext,\n      undefined,\n    );\n    expect(redirectFiles.map((f) => f.fileContent)).toMatchSnapshot(\n      'fileContent baseUrl=empty',\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"write the files","suites":["writeRedirectFiles"],"updatePoint":{"line":162,"column":21},"line":162,"code":"  it('write the files', async () => {\n    const outDir = `/tmp/docusaurus_tests_${Math.random()}`;\n\n    const filesMetadata = [\n      {\n        fileAbsolutePath: path.join(outDir, 'someFileName'),\n        fileContent: 'content 1',\n      },\n      {\n        fileAbsolutePath: path.join(outDir, '/some/nested/filename'),\n        fileContent: 'content 2',\n      },\n    ];\n\n    await writeRedirectFiles(filesMetadata);\n\n    await expect(\n      fs.readFile(filesMetadata[0]!.fileAbsolutePath, 'utf8'),\n    ).resolves.toBe('content 1');\n\n    await expect(\n      fs.readFile(filesMetadata[1]!.fileAbsolutePath, 'utf8'),\n    ).resolves.toBe('content 2');\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"avoid overwriting existing files","suites":["writeRedirectFiles"],"updatePoint":{"line":187,"column":38},"line":187,"code":"  it('avoid overwriting existing files', async () => {\n    const outDir = `/tmp/docusaurus_tests_${Math.random()}`;\n\n    const filesMetadata = [\n      {\n        fileAbsolutePath: path.join(outDir, 'someFileName/index.html'),\n        fileContent: 'content 1',\n      },\n    ];\n\n    await fs.outputFile(\n      filesMetadata[0]!.fileAbsolutePath,\n      'file already exists!',\n    );\n\n    await expect(\n      writeRedirectFiles(filesMetadata),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"The redirect plugin is not supposed to override existing files.\"`,\n    );\n  });","file":"writeRedirectFiles.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-client-redirects/src/__tests__"},{"name":"can read no authors","suites":["getBlogPostAuthors"],"updatePoint":{"line":17,"column":25},"line":17,"code":"  it('can read no authors', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {},\n        authorsMap: undefined,\n      }),\n    ).toEqual([]);\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [],\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read author from legacy front matter","suites":["getBlogPostAuthors"],"updatePoint":{"line":34,"column":46},"line":34,"code":"  it('can read author from legacy front matter', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          author: 'Sébastien Lorber',\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([{name: 'Sébastien Lorber'}]);\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authorTitle: 'maintainer',\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([{title: 'maintainer'}]);\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authorImageURL: 'https://github.com/slorber.png',\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([{imageURL: 'https://github.com/slorber.png'}]);\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          author: 'Sébastien Lorber',\n          author_title: 'maintainer1',\n          authorTitle: 'maintainer2',\n          author_image_url: 'https://github.com/slorber1.png',\n          authorImageURL: 'https://github.com/slorber2.png',\n          author_url: 'https://github.com/slorber1',\n          authorURL: 'https://github.com/slorber2',\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([\n      {\n        name: 'Sébastien Lorber',\n        title: 'maintainer1',\n        imageURL: 'https://github.com/slorber1.png',\n        url: 'https://github.com/slorber1',\n      },\n    ]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read authors string","suites":["getBlogPostAuthors"],"updatePoint":{"line":82,"column":29},"line":82,"code":"  it('can read authors string', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: 'slorber',\n        },\n        authorsMap: {slorber: {name: 'Sébastien Lorber'}},\n      }),\n    ).toEqual([{key: 'slorber', name: 'Sébastien Lorber'}]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read authors string[]","suites":["getBlogPostAuthors"],"updatePoint":{"line":93,"column":31},"line":93,"code":"  it('can read authors string[]', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: ['slorber', 'yangshun'],\n        },\n        authorsMap: {\n          slorber: {name: 'Sébastien Lorber', title: 'maintainer'},\n          yangshun: {name: 'Yangshun Tay'},\n        },\n      }),\n    ).toEqual([\n      {key: 'slorber', name: 'Sébastien Lorber', title: 'maintainer'},\n      {key: 'yangshun', name: 'Yangshun Tay'},\n    ]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read authors Author","suites":["getBlogPostAuthors"],"updatePoint":{"line":110,"column":29},"line":110,"code":"  it('can read authors Author', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: {name: 'Sébastien Lorber', title: 'maintainer'},\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([{name: 'Sébastien Lorber', title: 'maintainer'}]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read authors Author[]","suites":["getBlogPostAuthors"],"updatePoint":{"line":121,"column":31},"line":121,"code":"  it('can read authors Author[]', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [\n            {name: 'Sébastien Lorber', title: 'maintainer'},\n            {name: 'Yangshun Tay'},\n          ],\n        },\n        authorsMap: undefined,\n      }),\n    ).toEqual([\n      {name: 'Sébastien Lorber', title: 'maintainer'},\n      {name: 'Yangshun Tay'},\n    ]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can read authors complex (string | Author)[] setup with keys and local overrides","suites":["getBlogPostAuthors"],"updatePoint":{"line":138,"column":86},"line":138,"code":"  it('can read authors complex (string | Author)[] setup with keys and local overrides', () => {\n    expect(\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [\n            'slorber',\n            {\n              key: 'yangshun',\n              title: 'Yangshun title local override',\n              extra: 42,\n            },\n            {name: 'Alexey'},\n          ],\n        },\n        authorsMap: {\n          slorber: {name: 'Sébastien Lorber', title: 'maintainer'},\n          yangshun: {name: 'Yangshun Tay', title: 'Yangshun title original'},\n        },\n      }),\n    ).toEqual([\n      {key: 'slorber', name: 'Sébastien Lorber', title: 'maintainer'},\n      {\n        key: 'yangshun',\n        name: 'Yangshun Tay',\n        title: 'Yangshun title local override',\n        extra: 42,\n      },\n      {name: 'Alexey'},\n    ]);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when using author key with no authorsMap","suites":["getBlogPostAuthors"],"updatePoint":{"line":169,"column":52},"line":169,"code":"  it('throw when using author key with no authorsMap', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: 'slorber',\n        },\n        authorsMap: undefined,\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"Can't reference blog post authors by a key (such as 'slorber') because no authors map file could be loaded.\n      Please double-check your blog plugin config (in particular 'authorsMapPath'), ensure the file exists at the configured path, is not empty, and is valid!\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when using author key with empty authorsMap","suites":["getBlogPostAuthors"],"updatePoint":{"line":183,"column":55},"line":183,"code":"  it('throw when using author key with empty authorsMap', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: 'slorber',\n        },\n        authorsMap: {},\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"Can't reference blog post authors by a key (such as 'slorber') because no authors map file could be loaded.\n      Please double-check your blog plugin config (in particular 'authorsMapPath'), ensure the file exists at the configured path, is not empty, and is valid!\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when using bad author key in string","suites":["getBlogPostAuthors"],"updatePoint":{"line":197,"column":47},"line":197,"code":"  it('throw when using bad author key in string', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: 'slorber',\n        },\n\n        authorsMap: {\n          yangshun: {name: 'Yangshun Tay'},\n          jmarcey: {name: 'Joel Marcey'},\n        },\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"Blog author with key \"slorber\" not found in the authors map file.\n      Valid author keys are:\n      - yangshun\n      - jmarcey\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when using bad author key in string[]","suites":["getBlogPostAuthors"],"updatePoint":{"line":217,"column":49},"line":217,"code":"  it('throw when using bad author key in string[]', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: ['yangshun', 'jmarcey', 'slorber'],\n        },\n\n        authorsMap: {\n          yangshun: {name: 'Yangshun Tay'},\n          jmarcey: {name: 'Joel Marcey'},\n        },\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"Blog author with key \"slorber\" not found in the authors map file.\n      Valid author keys are:\n      - yangshun\n      - jmarcey\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when using bad author key in Author[].key","suites":["getBlogPostAuthors"],"updatePoint":{"line":237,"column":53},"line":237,"code":"  it('throw when using bad author key in Author[].key', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [{key: 'yangshun'}, {key: 'jmarcey'}, {key: 'slorber'}],\n        },\n\n        authorsMap: {\n          yangshun: {name: 'Yangshun Tay'},\n          jmarcey: {name: 'Joel Marcey'},\n        },\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"Blog author with key \"slorber\" not found in the authors map file.\n      Valid author keys are:\n      - yangshun\n      - jmarcey\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw when mixing legacy/new authors front matter","suites":["getBlogPostAuthors"],"updatePoint":{"line":257,"column":55},"line":257,"code":"  it('throw when mixing legacy/new authors front matter', () => {\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [{name: 'Sébastien Lorber'}],\n          author: 'Yangshun Tay',\n        },\n        authorsMap: undefined,\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"To declare blog post authors, use the 'authors' front matter in priority.\n      Don't mix 'authors' with other existing 'author_*' front matter. Choose one or the other, not both at the same time.\"\n    `);\n\n    expect(() =>\n      getBlogPostAuthors({\n        frontMatter: {\n          authors: [{key: 'slorber'}],\n          author_title: 'legacy title',\n        },\n        authorsMap: {slorber: {name: 'Sébastien Lorber'}},\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"To declare blog post authors, use the 'authors' front matter in priority.\n      Don't mix 'authors' with other existing 'author_*' front matter. Choose one or the other, not both at the same time.\"\n    `);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"getAuthorsMap can read yml file","suites":["getAuthorsMap"],"updatePoint":{"line":293,"column":37},"line":293,"code":"  it('getAuthorsMap can read yml file', async () => {\n    await expect(\n      getAuthorsMap({\n        contentPaths,\n        authorsMapPath: 'authors.yml',\n      }),\n    ).resolves.toBeDefined();\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"getAuthorsMap can read json file","suites":["getAuthorsMap"],"updatePoint":{"line":302,"column":38},"line":302,"code":"  it('getAuthorsMap can read json file', async () => {\n    await expect(\n      getAuthorsMap({\n        contentPaths,\n        authorsMapPath: 'authors.json',\n      }),\n    ).resolves.toBeDefined();\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"getAuthorsMap can return undefined if yaml file not found","suites":["getAuthorsMap"],"updatePoint":{"line":311,"column":63},"line":311,"code":"  it('getAuthorsMap can return undefined if yaml file not found', async () => {\n    await expect(\n      getAuthorsMap({\n        contentPaths,\n        authorsMapPath: 'authors_does_not_exist.yml',\n      }),\n    ).resolves.toBeUndefined();\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accept valid authors map","suites":["validateAuthorsMap"],"updatePoint":{"line":322,"column":30},"line":322,"code":"  it('accept valid authors map', () => {\n    const authorsMap: AuthorsMap = {\n      slorber: {\n        name: 'Sébastien Lorber',\n        title: 'maintainer',\n        url: 'https://sebastienlorber.com',\n        imageURL: 'https://github.com/slorber.png',\n      },\n      yangshun: {\n        name: 'Yangshun Tay',\n        imageURL: 'https://github.com/yangshun.png',\n        randomField: 42,\n      },\n      jmarcey: {\n        name: 'Joel',\n        title: 'creator of Docusaurus',\n        hello: new Date(),\n      },\n    };\n    expect(validateAuthorsMap(authorsMap)).toEqual(authorsMap);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"rename snake case image_url to camelCase imageURL","suites":["validateAuthorsMap"],"updatePoint":{"line":344,"column":55},"line":344,"code":"  it('rename snake case image_url to camelCase imageURL', () => {\n    const authorsMap: AuthorsMap = {\n      slorber: {\n        name: 'Sébastien Lorber',\n        image_url: 'https://github.com/slorber.png',\n      },\n    };\n    expect(validateAuthorsMap(authorsMap)).toEqual({\n      slorber: {\n        name: 'Sébastien Lorber',\n        imageURL: 'https://github.com/slorber.png',\n      },\n    });\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accept author with only image","suites":["validateAuthorsMap"],"updatePoint":{"line":359,"column":35},"line":359,"code":"  it('accept author with only image', () => {\n    const authorsMap: AuthorsMap = {\n      slorber: {\n        imageURL: 'https://github.com/slorber.png',\n        url: 'https://github.com/slorber',\n      },\n    };\n    expect(validateAuthorsMap(authorsMap)).toEqual(authorsMap);\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject author without name or image","suites":["validateAuthorsMap"],"updatePoint":{"line":369,"column":41},"line":369,"code":"  it('reject author without name or image', () => {\n    const authorsMap: AuthorsMap = {\n      slorber: {\n        title: 'foo',\n      },\n    };\n    expect(() =>\n      validateAuthorsMap(authorsMap),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"slorber\" must contain at least one of [name, imageURL]\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject undefined author","suites":["validateAuthorsMap"],"updatePoint":{"line":382,"column":29},"line":382,"code":"  it('reject undefined author', () => {\n    expect(() =>\n      validateAuthorsMap({\n        slorber: undefined,\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"slorber\" cannot be undefined. It should be an author object containing properties like name, title, and imageURL.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject null author","suites":["validateAuthorsMap"],"updatePoint":{"line":392,"column":24},"line":392,"code":"  it('reject null author', () => {\n    expect(() =>\n      validateAuthorsMap({\n        slorber: null,\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"slorber\" should be an author object containing properties like name, title, and imageURL.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject array author","suites":["validateAuthorsMap"],"updatePoint":{"line":402,"column":25},"line":402,"code":"  it('reject array author', () => {\n    expect(() =>\n      validateAuthorsMap({slorber: []}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"slorber\" should be an author object containing properties like name, title, and imageURL.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject array content","suites":["validateAuthorsMap"],"updatePoint":{"line":410,"column":26},"line":410,"code":"  it('reject array content', () => {\n    expect(() => validateAuthorsMap([])).toThrowErrorMatchingInlineSnapshot(\n      `\"The authors map file should contain an object where each entry contains an author key and the corresponding author's data.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject flat author","suites":["validateAuthorsMap"],"updatePoint":{"line":416,"column":24},"line":416,"code":"  it('reject flat author', () => {\n    expect(() =>\n      validateAuthorsMap({name: 'Sébastien'}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"name\" should be an author object containing properties like name, title, and imageURL.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reject non-map author","suites":["validateAuthorsMap"],"updatePoint":{"line":424,"column":27},"line":424,"code":"  it('reject non-map author', () => {\n    const authorsMap: AuthorsMap = {\n      // @ts-expect-error: for tests\n      slorber: [],\n    };\n    expect(() =>\n      validateAuthorsMap(authorsMap),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"slorber\" should be an author object containing properties like name, title, and imageURL.\"`,\n    );\n  });","file":"authors.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"truncates texts","suites":["truncate"],"updatePoint":{"line":23,"column":21},"line":23,"code":"  it('truncates texts', () => {\n    expect(\n      truncate('aaa\\n<!-- truncate -->\\nbbb\\n ccc', /<!-- truncate -->/),\n    ).toBe('aaa\\n');\n    expect(\n      truncate('\\n<!-- truncate -->\\nbbb\\n ccc', /<!-- truncate -->/),\n    ).toBe('\\n');\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"leaves texts without markers","suites":["truncate"],"updatePoint":{"line":32,"column":34},"line":32,"code":"  it('leaves texts without markers', () => {\n    expect(truncate('aaa\\nbbb\\n ccc', /<!-- truncate -->/)).toBe(\n      'aaa\\nbbb\\n ccc',\n    );\n    expect(truncate('', /<!-- truncate -->/)).toBe('');\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"generates right pages","suites":["paginateBlogPosts"],"updatePoint":{"line":41,"column":27},"line":41,"code":"  it('generates right pages', () => {\n    const blogPosts = [\n      {id: 'post1', metadata: {}, content: 'Foo 1'},\n      {id: 'post2', metadata: {}, content: 'Foo 2'},\n      {id: 'post3', metadata: {}, content: 'Foo 3'},\n      {id: 'post4', metadata: {}, content: 'Foo 4'},\n      {id: 'post5', metadata: {}, content: 'Foo 5'},\n    ] as BlogPost[];\n    expect(\n      paginateBlogPosts({\n        blogPosts,\n        basePageUrl: '/blog',\n        blogTitle: 'Blog Title',\n        blogDescription: 'Blog Description',\n        postsPerPageOption: 2,\n      }),\n    ).toMatchSnapshot();\n    expect(\n      paginateBlogPosts({\n        blogPosts,\n        basePageUrl: '/',\n        blogTitle: 'Blog Title',\n        blogDescription: 'Blog Description',\n        postsPerPageOption: 2,\n      }),\n    ).toMatchSnapshot();\n    expect(\n      paginateBlogPosts({\n        blogPosts,\n        basePageUrl: '/',\n        blogTitle: 'Blog Title',\n        blogDescription: 'Blog Description',\n        postsPerPageOption: 10,\n      }),\n    ).toMatchSnapshot();\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses file","suites":["parseBlogFileName"],"updatePoint":{"line":80,"column":17},"line":80,"code":"  it('parses file', () => {\n    expect(parseBlogFileName('some-post.md')).toEqual({\n      date: undefined,\n      text: 'some-post',\n      slug: '/some-post',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses folder","suites":["parseBlogFileName"],"updatePoint":{"line":88,"column":19},"line":88,"code":"  it('parses folder', () => {\n    expect(parseBlogFileName('some-post/index.md')).toEqual({\n      date: undefined,\n      text: 'some-post',\n      slug: '/some-post',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses nested file","suites":["parseBlogFileName"],"updatePoint":{"line":96,"column":24},"line":96,"code":"  it('parses nested file', () => {\n    expect(parseBlogFileName('some-post/some-file.md')).toEqual({\n      date: undefined,\n      text: 'some-post/some-file',\n      slug: '/some-post/some-file',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses nested folder","suites":["parseBlogFileName"],"updatePoint":{"line":104,"column":26},"line":104,"code":"  it('parses nested folder', () => {\n    expect(parseBlogFileName('some-post/some-subfolder/index.md')).toEqual({\n      date: undefined,\n      text: 'some-post/some-subfolder',\n      slug: '/some-post/some-subfolder',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses file respecting date convention","suites":["parseBlogFileName"],"updatePoint":{"line":112,"column":44},"line":112,"code":"  it('parses file respecting date convention', () => {\n    expect(\n      parseBlogFileName('2021-05-12-announcing-docusaurus-two-beta.md'),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses folder name respecting date convention","suites":["parseBlogFileName"],"updatePoint":{"line":122,"column":51},"line":122,"code":"  it('parses folder name respecting date convention', () => {\n    expect(\n      parseBlogFileName('2021-05-12-announcing-docusaurus-two-beta/index.md'),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses folder tree respecting date convention","suites":["parseBlogFileName"],"updatePoint":{"line":132,"column":51},"line":132,"code":"  it('parses folder tree respecting date convention', () => {\n    expect(\n      parseBlogFileName('2021/05/12/announcing-docusaurus-two-beta/index.md'),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses folder name/tree (mixed) respecting date convention","suites":["parseBlogFileName"],"updatePoint":{"line":142,"column":64},"line":142,"code":"  it('parses folder name/tree (mixed) respecting date convention', () => {\n    expect(\n      parseBlogFileName('2021/05-12-announcing-docusaurus-two-beta/index.md'),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses nested folder tree respecting date convention","suites":["parseBlogFileName"],"updatePoint":{"line":152,"column":58},"line":152,"code":"  it('parses nested folder tree respecting date convention', () => {\n    expect(\n      parseBlogFileName(\n        '2021/05/12/announcing-docusaurus-two-beta/subfolder/file.md',\n      ),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta/subfolder/file',\n      slug: '/2021/05/12/announcing-docusaurus-two-beta/subfolder/file',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses date in the middle of path","suites":["parseBlogFileName"],"updatePoint":{"line":164,"column":39},"line":164,"code":"  it('parses date in the middle of path', () => {\n    expect(\n      parseBlogFileName('team-a/2021/05/12/announcing-docusaurus-two-beta.md'),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/team-a/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"parses date in the middle of a folder name","suites":["parseBlogFileName"],"updatePoint":{"line":174,"column":48},"line":174,"code":"  it('parses date in the middle of a folder name', () => {\n    expect(\n      parseBlogFileName(\n        'team-a-2021-05-12-hey/announcing-docusaurus-two-beta.md',\n      ),\n    ).toEqual({\n      date: new Date('2021-05-12Z'),\n      text: 'hey/announcing-docusaurus-two-beta',\n      slug: '/2021/05/12/team-a-hey/announcing-docusaurus-two-beta',\n    });\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"transforms to correct link","suites":["linkify"],"updatePoint":{"line":240,"column":32},"line":240,"code":"  it('transforms to correct link', async () => {\n    const post = path.join(contentPaths.contentPath, 'post.md');\n    const [content, transformedContent] = await transform(post);\n    expect(transformedContent).toMatchSnapshot();\n    expect(transformedContent).toContain(\n      '](/blog/2018/12/14/Happy-First-Birthday-Slash',\n    );\n    expect(transformedContent).not.toContain(\n      '](2018-12-14-Happy-First-Birthday-Slash.md)',\n    );\n    expect(content).not.toEqual(transformedContent);\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"reports broken markdown links","suites":["linkify"],"updatePoint":{"line":253,"column":35},"line":253,"code":"  it('reports broken markdown links', async () => {\n    const filePath = 'post-with-broken-links.md';\n    const folderPath = contentPaths.contentPath;\n    const postWithBrokenLinks = path.join(folderPath, filePath);\n    const onBrokenMarkdownLink = jest.fn();\n    const [, transformedContent] = await transform(postWithBrokenLinks, {\n      onBrokenMarkdownLink,\n    });\n    expect(transformedContent).toMatchSnapshot();\n    expect(onBrokenMarkdownLink).toHaveBeenCalledTimes(2);\n    expect(onBrokenMarkdownLink).toHaveBeenNthCalledWith(1, {\n      filePath: path.resolve(folderPath, filePath),\n      contentPaths,\n      link: 'postNotExist1.md',\n    } as BlogBrokenMarkdownLink);\n    expect(onBrokenMarkdownLink).toHaveBeenNthCalledWith(2, {\n      filePath: path.resolve(folderPath, filePath),\n      contentPaths,\n      link: './postNotExist2.mdx',\n    } as BlogBrokenMarkdownLink);\n  });","file":"blogUtils.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"%s","suites":[],"line":63,"code":"describe.each(['atom', 'rss', 'json'])('%s', (feedType) => {\n  const fsMock = jest.spyOn(fs, 'outputFile').mockImplementation(() => {});\n\n  it('does not get generated without posts', async () => {\n    const siteDir = __dirname;\n    const siteConfig = {\n      title: 'Hello',\n      baseUrl: '/',\n      url: 'https://docusaurus.io',\n      favicon: 'image/favicon.ico',\n    };\n    const outDir = path.join(siteDir, 'build-snap');\n\n    await testGenerateFeeds(\n      {\n        siteDir,\n        siteConfig,\n        i18n: DefaultI18N,\n        outDir,\n      } as LoadContext,\n      {\n        path: 'invalid-blog-path',\n        routeBasePath: 'blog',\n        tagsBasePath: 'tags',\n        authorsMapPath: 'authors.yml',\n        include: ['*.md', '*.mdx'],\n        feedOptions: {\n          type: [feedType],\n          copyright: 'Copyright',\n        },\n        readingTime: ({content, defaultReadingTime}) =>\n          defaultReadingTime({content}),\n        truncateMarker: /<!--\\s*truncate\\s*-->/,\n      } as PluginOptions,\n    );\n\n    expect(fsMock).toBeCalledTimes(0);\n    fsMock.mockClear();\n  });\n\n  it('has feed item for each post', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const outDir = path.join(siteDir, 'build-snap');\n    const siteConfig = {\n      title: 'Hello',\n      baseUrl: '/myBaseUrl/',\n      url: 'https://docusaurus.io',\n      favicon: 'image/favicon.ico',\n    };\n\n    // Build is quite difficult to mock, so we built the blog beforehand and\n    // copied the output to the fixture...\n    await testGenerateFeeds(\n      {\n        siteDir,\n        siteConfig,\n        i18n: DefaultI18N,\n        outDir,\n      } as LoadContext,\n      {\n        path: 'blog',\n        routeBasePath: 'blog',\n        tagsBasePath: 'tags',\n        authorsMapPath: 'authors.yml',\n        include: DEFAULT_OPTIONS.include,\n        exclude: DEFAULT_OPTIONS.exclude,\n        feedOptions: {\n          type: [feedType],\n          copyright: 'Copyright',\n        },\n        readingTime: ({content, defaultReadingTime}) =>\n          defaultReadingTime({content}),\n        truncateMarker: /<!--\\s*truncate\\s*-->/,\n      } as PluginOptions,\n    );\n\n    expect(\n      fsMock.mock.calls.map((call) => call[1] as string),\n    ).toMatchSnapshot();\n    fsMock.mockClear();\n  });\n});","file":"feed.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"does not get generated without posts","suites":[],"updatePoint":{"line":66,"column":42},"line":66,"code":"  it('does not get generated without posts', async () => {\n    const siteDir = __dirname;\n    const siteConfig = {\n      title: 'Hello',\n      baseUrl: '/',\n      url: 'https://docusaurus.io',\n      favicon: 'image/favicon.ico',\n    };\n    const outDir = path.join(siteDir, 'build-snap');\n\n    await testGenerateFeeds(\n      {\n        siteDir,\n        siteConfig,\n        i18n: DefaultI18N,\n        outDir,\n      } as LoadContext,\n      {\n        path: 'invalid-blog-path',\n        routeBasePath: 'blog',\n        tagsBasePath: 'tags',\n        authorsMapPath: 'authors.yml',\n        include: ['*.md', '*.mdx'],\n        feedOptions: {\n          type: [feedType],\n          copyright: 'Copyright',\n        },\n        readingTime: ({content, defaultReadingTime}) =>\n          defaultReadingTime({content}),\n        truncateMarker: /<!--\\s*truncate\\s*-->/,\n      } as PluginOptions,\n    );\n\n    expect(fsMock).toBeCalledTimes(0);\n    fsMock.mockClear();\n  });","file":"feed.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"has feed item for each post","suites":[],"updatePoint":{"line":103,"column":33},"line":103,"code":"  it('has feed item for each post', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const outDir = path.join(siteDir, 'build-snap');\n    const siteConfig = {\n      title: 'Hello',\n      baseUrl: '/myBaseUrl/',\n      url: 'https://docusaurus.io',\n      favicon: 'image/favicon.ico',\n    };\n\n    // Build is quite difficult to mock, so we built the blog beforehand and\n    // copied the output to the fixture...\n    await testGenerateFeeds(\n      {\n        siteDir,\n        siteConfig,\n        i18n: DefaultI18N,\n        outDir,\n      } as LoadContext,\n      {\n        path: 'blog',\n        routeBasePath: 'blog',\n        tagsBasePath: 'tags',\n        authorsMapPath: 'authors.yml',\n        include: DEFAULT_OPTIONS.include,\n        exclude: DEFAULT_OPTIONS.exclude,\n        feedOptions: {\n          type: [feedType],\n          copyright: 'Copyright',\n        },\n        readingTime: ({content, defaultReadingTime}) =>\n          defaultReadingTime({content}),\n        truncateMarker: /<!--\\s*truncate\\s*-->/,\n      } as PluginOptions,\n    );\n\n    expect(\n      fsMock.mock.calls.map((call) => call[1] as string),\n    ).toMatchSnapshot();\n    fsMock.mockClear();\n  });","file":"feed.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accept valid values","suites":["\"\" field"],"updatePoint":{"line":27,"column":27},"line":27,"code":"    it('accept valid values', () => {\n      params.validFrontMatters.forEach((frontMatter) => {\n        expect(validateBlogPostFrontMatter(frontMatter)).toEqual(frontMatter);\n      });\n    });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"convert valid values","suites":["\"\" field"],"updatePoint":{"line":33,"column":28},"line":33,"code":"    it('convert valid values', () => {\n      params.convertibleFrontMatter?.forEach(\n        ([convertibleFrontMatter, convertedFrontMatter]) => {\n          expect(validateBlogPostFrontMatter(convertibleFrontMatter)).toEqual(\n            convertedFrontMatter,\n          );\n        },\n      );\n    });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throw error for values","suites":["\"\" field"],"updatePoint":{"line":43,"column":30},"line":43,"code":"    it('throw error for values', () => {\n      params.invalidFrontMatters?.forEach(([frontMatter, message]) => {\n        try {\n          validateBlogPostFrontMatter(frontMatter);\n          // eslint-disable-next-line jest/no-jasmine-globals\n          fail(\n            new Error(\n              `Blog front matter is expected to be rejected, but was accepted successfully:\\n ${JSON.stringify(\n                frontMatter,\n                null,\n                2,\n              )}`,\n            ),\n          );\n        } catch (err) {\n          // eslint-disable-next-line jest/no-conditional-expect\n          expect((err as Error).message).toMatch(\n            new RegExp(escapeStringRegexp(message)),\n          );\n        }\n      });\n    });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accept empty object","suites":["validateBlogPostFrontMatter"],"updatePoint":{"line":69,"column":25},"line":69,"code":"  it('accept empty object', () => {\n    const frontMatter = {};\n    expect(validateBlogPostFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accept unknown field","suites":["validateBlogPostFrontMatter"],"updatePoint":{"line":74,"column":26},"line":74,"code":"  it('accept unknown field', () => {\n    const frontMatter = {abc: '1'};\n    expect(validateBlogPostFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"allow legacy author front matter","suites":["validateBlogPostFrontMatter handles legacy/new author front matter"],"updatePoint":{"line":111,"column":38},"line":111,"code":"  it('allow legacy author front matter', () => {\n    const frontMatter: BlogPostFrontMatter = {\n      author: 'Sebastien',\n      author_url: 'https://sebastienlorber.com',\n      author_title: 'maintainer',\n      author_image_url: 'https://github.com/slorber.png',\n    };\n    expect(validateBlogPostFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"allow new authors front matter","suites":["validateBlogPostFrontMatter handles legacy/new author front matter"],"updatePoint":{"line":121,"column":36},"line":121,"code":"  it('allow new authors front matter', () => {\n    const frontMatter: BlogPostFrontMatter = {\n      authors: [\n        'slorber',\n        {name: 'Yangshun'},\n        {key: 'JMarcey', title: 'creator', random: '42'},\n      ],\n    };\n    expect(validateBlogPostFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"getPathsToWatch returns right files","suites":["blog plugin"],"updatePoint":{"line":120,"column":41},"line":120,"code":"  it('getPathsToWatch returns right files', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const plugin = await getPlugin(siteDir);\n    const pathsToWatch = plugin.getPathsToWatch!();\n    const relativePathsToWatch = pathsToWatch.map((p) =>\n      posixPath(path.relative(siteDir, p)),\n    );\n    expect(relativePathsToWatch).toEqual([\n      'i18n/en/docusaurus-plugin-content-blog/authors.yml',\n      'i18n/en/docusaurus-plugin-content-blog/**/*.{md,mdx}',\n      'blog/**/*.{md,mdx}',\n    ]);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"builds a simple website","suites":["blog plugin"],"updatePoint":{"line":134,"column":29},"line":134,"code":"  it('builds a simple website', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const blogPosts = await getBlogPosts(siteDir);\n\n    expect({\n      ...getByTitle(blogPosts, 'date-matter').metadata,\n      ...{prevItem: undefined},\n    }).toEqual({\n      editUrl: `${BaseEditUrl}/blog/date-matter.md`,\n      permalink: '/blog/date-matter',\n      readingTime: 0.02,\n      source: path.posix.join('@site', PluginPath, 'date-matter.md'),\n      title: 'date-matter',\n      description: `date inside front matter`,\n      authors: [],\n      date: new Date('2019-01-01'),\n      formattedDate: 'January 1, 2019',\n      frontMatter: {\n        date: new Date('2019-01-01'),\n        tags: ['date'],\n      },\n      prevItem: undefined,\n      tags: [\n        {\n          label: 'date',\n          permalink: '/blog/tags/date',\n        },\n      ],\n      nextItem: {\n        permalink: '/blog/2018/12/14/Happy-First-Birthday-Slash',\n        title: 'Happy 1st Birthday Slash! (translated)',\n      },\n      truncated: false,\n    });\n\n    expect(\n      getByTitle(blogPosts, 'Happy 1st Birthday Slash! (translated)').metadata,\n    ).toEqual({\n      editUrl: `${BaseEditUrl}/blog/2018-12-14-Happy-First-Birthday-Slash.md`,\n      permalink: '/blog/2018/12/14/Happy-First-Birthday-Slash',\n      readingTime: 0.015,\n      source: path.posix.join(\n        '@site',\n        path.posix.join('i18n', 'en', 'docusaurus-plugin-content-blog'),\n        '2018-12-14-Happy-First-Birthday-Slash.md',\n      ),\n      title: 'Happy 1st Birthday Slash! (translated)',\n      description: `Happy birthday! (translated)`,\n      authors: [\n        {\n          name: 'Yangshun Tay (translated)',\n        },\n        {\n          email: 'lorber.sebastien@gmail.com',\n          key: 'slorber',\n          name: 'Sébastien Lorber (translated)',\n          title: 'Docusaurus maintainer (translated)',\n        },\n      ],\n      date: new Date('2018-12-14'),\n      formattedDate: 'December 14, 2018',\n      frontMatter: {\n        authors: [\n          {\n            name: 'Yangshun Tay (translated)',\n          },\n          'slorber',\n        ],\n        title: 'Happy 1st Birthday Slash! (translated)',\n      },\n      tags: [],\n      prevItem: {\n        permalink: '/blog/date-matter',\n        title: 'date-matter',\n      },\n      truncated: false,\n    });\n\n    expect({\n      ...getByTitle(blogPosts, 'Complex Slug').metadata,\n      ...{prevItem: undefined},\n    }).toEqual({\n      editUrl: `${BaseEditUrl}/blog/complex-slug.md`,\n      permalink: '/blog/hey/my super path/héllô',\n      readingTime: 0.015,\n      source: path.posix.join('@site', PluginPath, 'complex-slug.md'),\n      title: 'Complex Slug',\n      description: `complex url slug`,\n      authors: [],\n      prevItem: undefined,\n      nextItem: {\n        permalink: '/blog/simple/slug',\n        title: 'Simple Slug',\n      },\n      date: new Date('2020-08-16'),\n      formattedDate: 'August 16, 2020',\n      frontMatter: {\n        date: '2020/08/16',\n        slug: '/hey/my super path/héllô',\n        title: 'Complex Slug',\n        tags: ['date', 'complex'],\n      },\n      tags: [\n        {\n          label: 'date',\n          permalink: '/blog/tags/date',\n        },\n        {\n          label: 'complex',\n          permalink: '/blog/tags/complex',\n        },\n      ],\n      truncated: false,\n    });\n\n    expect({\n      ...getByTitle(blogPosts, 'Simple Slug').metadata,\n      ...{prevItem: undefined},\n    }).toEqual({\n      editUrl: `${BaseEditUrl}/blog/simple-slug.md`,\n      permalink: '/blog/simple/slug',\n      readingTime: 0.015,\n      source: path.posix.join('@site', PluginPath, 'simple-slug.md'),\n      title: 'Simple Slug',\n      description: `simple url slug`,\n      authors: [\n        {\n          name: 'Sébastien Lorber',\n          title: 'Docusaurus maintainer',\n          url: 'https://sebastienlorber.com',\n          imageURL: undefined,\n        },\n      ],\n      prevItem: undefined,\n      nextItem: {\n        permalink: '/blog/draft',\n        title: 'draft',\n      },\n      date: new Date('2020-08-15'),\n      formattedDate: 'August 15, 2020',\n      frontMatter: {\n        author: 'Sébastien Lorber',\n        author_title: 'Docusaurus maintainer',\n        author_url: 'https://sebastienlorber.com',\n        date: new Date('2020-08-15'),\n        slug: '/simple/slug',\n        title: 'Simple Slug',\n      },\n      tags: [],\n      truncated: false,\n    });\n\n    expect({\n      ...getByTitle(blogPosts, 'some heading').metadata,\n      prevItem: undefined,\n    }).toEqual({\n      editUrl: `${BaseEditUrl}/blog/heading-as-title.md`,\n      permalink: '/blog/heading-as-title',\n      readingTime: 0,\n      source: path.posix.join('@site', PluginPath, 'heading-as-title.md'),\n      title: 'some heading',\n      description: '',\n      authors: [],\n      date: new Date('2019-01-02'),\n      formattedDate: 'January 2, 2019',\n      frontMatter: {\n        date: new Date('2019-01-02'),\n      },\n      prevItem: undefined,\n      tags: [],\n      nextItem: {\n        permalink: '/blog/date-matter',\n        title: 'date-matter',\n      },\n      truncated: false,\n    });\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"builds simple website blog with localized dates","suites":["blog plugin"],"updatePoint":{"line":312,"column":53},"line":312,"code":"  it('builds simple website blog with localized dates', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const blogPostsFrench = await getBlogPosts(siteDir, {}, getI18n('fr'));\n    expect(blogPostsFrench).toHaveLength(8);\n    expect(blogPostsFrench[0]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"6 mars 2021\"`,\n    );\n    expect(blogPostsFrench[1]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"5 mars 2021\"`,\n    );\n    expect(blogPostsFrench[2]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"16 août 2020\"`,\n    );\n    expect(blogPostsFrench[3]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"15 août 2020\"`,\n    );\n    expect(blogPostsFrench[4]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"27 février 2020\"`,\n    );\n    expect(blogPostsFrench[5]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"2 janvier 2019\"`,\n    );\n    expect(blogPostsFrench[6]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"1 janvier 2019\"`,\n    );\n    expect(blogPostsFrench[7]!.metadata.formattedDate).toMatchInlineSnapshot(\n      `\"14 décembre 2018\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"handles edit URL with editLocalizedBlogs: true","suites":["blog plugin"],"updatePoint":{"line":342,"column":52},"line":342,"code":"  it('handles edit URL with editLocalizedBlogs: true', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const blogPosts = await getBlogPosts(siteDir, {editLocalizedFiles: true});\n\n    const localizedBlogPost = blogPosts.find(\n      (v) => v.metadata.title === 'Happy 1st Birthday Slash! (translated)',\n    )!;\n\n    expect(localizedBlogPost.metadata.editUrl).toBe(\n      `${BaseEditUrl}/i18n/en/docusaurus-plugin-content-blog/2018-12-14-Happy-First-Birthday-Slash.md`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"handles edit URL with editUrl function","suites":["blog plugin"],"updatePoint":{"line":355,"column":44},"line":355,"code":"  it('handles edit URL with editUrl function', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n\n    const hardcodedEditUrl = 'hardcoded-edit-url';\n    const editUrlFunction: EditUrlFunction = jest.fn(() => hardcodedEditUrl);\n\n    const blogPosts = await getBlogPosts(siteDir, {editUrl: editUrlFunction});\n\n    blogPosts.forEach((blogPost) => {\n      expect(blogPost.metadata.editUrl).toEqual(hardcodedEditUrl);\n    });\n\n    expect(editUrlFunction).toHaveBeenCalledTimes(8);\n\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'date-matter.md',\n      permalink: '/blog/date-matter',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'draft.md',\n      permalink: '/blog/draft',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'mdx-blog-post.mdx',\n      permalink: '/blog/mdx-blog-post',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'mdx-require-blog-post.mdx',\n      permalink: '/blog/mdx-require-blog-post',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'complex-slug.md',\n      permalink: '/blog/hey/my super path/héllô',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'simple-slug.md',\n      permalink: '/blog/simple/slug',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'i18n/en/docusaurus-plugin-content-blog',\n      blogPath: '2018-12-14-Happy-First-Birthday-Slash.md',\n      permalink: '/blog/2018/12/14/Happy-First-Birthday-Slash',\n      locale: 'en',\n    });\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      blogDirPath: 'blog',\n      blogPath: 'heading-as-title.md',\n      locale: 'en',\n      permalink: '/blog/heading-as-title',\n    });\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"excludes draft blog post from production build","suites":["blog plugin"],"updatePoint":{"line":419,"column":52},"line":419,"code":"  it('excludes draft blog post from production build', async () => {\n    const originalEnv = process.env;\n    jest.resetModules();\n    process.env = {...originalEnv, NODE_ENV: 'production'};\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const blogPosts = await getBlogPosts(siteDir);\n\n    expect(blogPosts.find((v) => v.metadata.title === 'draft')).toBeUndefined();\n    process.env = originalEnv;\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"creates blog post without date","suites":["blog plugin"],"updatePoint":{"line":430,"column":36},"line":430,"code":"  it('creates blog post without date', async () => {\n    const siteDir = path.join(\n      __dirname,\n      '__fixtures__',\n      'website-blog-without-date',\n    );\n    const blogPosts = await getBlogPosts(siteDir);\n    const noDateSource = path.posix.join('@site', PluginPath, 'no date.md');\n    const noDateSourceFile = path.posix.join(siteDir, PluginPath, 'no date.md');\n    // We know the file exists and we know we have git\n    const result = getFileCommitDate(noDateSourceFile, {age: 'oldest'});\n    const noDateSourceTime = result.date;\n    const formattedDate = Intl.DateTimeFormat('en', {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n    }).format(noDateSourceTime);\n\n    expect({\n      ...getByTitle(blogPosts, 'no date').metadata,\n      ...{prevItem: undefined},\n    }).toEqual({\n      editUrl: `${BaseEditUrl}/blog/no date.md`,\n      permalink: '/blog/no date',\n      readingTime: 0.01,\n      source: noDateSource,\n      title: 'no date',\n      description: `no date`,\n      authors: [],\n      date: noDateSourceTime,\n      formattedDate,\n      frontMatter: {},\n      tags: [],\n      prevItem: undefined,\n      nextItem: undefined,\n      truncated: false,\n    });\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"can sort blog posts in ascending order","suites":["blog plugin"],"updatePoint":{"line":469,"column":44},"line":469,"code":"  it('can sort blog posts in ascending order', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const normalOrder = await getBlogPosts(siteDir);\n    const reversedOrder = await getBlogPosts(siteDir, {\n      sortPosts: 'ascending',\n    });\n    expect(normalOrder.reverse().map((x) => x.metadata.date)).toEqual(\n      reversedOrder.map((x) => x.metadata.date),\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"works with blog tags","suites":["blog plugin"],"updatePoint":{"line":480,"column":26},"line":480,"code":"  it('works with blog tags', async () => {\n    const siteDir = path.join(\n      __dirname,\n      '__fixtures__',\n      'website-blog-with-tags',\n    );\n    const blogTags = await getBlogTags(siteDir, {\n      postsPerPage: 2,\n    });\n\n    expect(Object.keys(blogTags)).toHaveLength(2);\n    expect(blogTags).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"works on blog tags without pagination","suites":["blog plugin"],"updatePoint":{"line":494,"column":43},"line":494,"code":"  it('works on blog tags without pagination', async () => {\n    const siteDir = path.join(\n      __dirname,\n      '__fixtures__',\n      'website-blog-with-tags',\n    );\n    const blogTags = await getBlogTags(siteDir, {\n      postsPerPage: 'ALL',\n    });\n\n    expect(blogTags).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"returns default options for undefined user options","suites":["validateOptions"],"updatePoint":{"line":30,"column":56},"line":30,"code":"  it('returns default options for undefined user options', () => {\n    expect(testValidate(undefined)).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"returns default options for empty user options","suites":["validateOptions"],"updatePoint":{"line":34,"column":52},"line":34,"code":"  it('returns default options for empty user options', () => {\n    expect(testValidate({})).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts correctly defined user options","suites":["validateOptions"],"updatePoint":{"line":38,"column":44},"line":38,"code":"  it('accepts correctly defined user options', () => {\n    const userOptions = {\n      ...defaultOptions,\n      feedOptions: {type: 'rss' as const, title: 'myTitle'},\n      path: 'not_blog',\n      routeBasePath: 'myBlog',\n      postsPerPage: 5,\n      include: ['api/*', 'docs/*'],\n    };\n    expect(testValidate(userOptions)).toEqual({\n      ...userOptions,\n      feedOptions: {type: ['rss'], title: 'myTitle', copyright: ''},\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts valid user options","suites":["validateOptions"],"updatePoint":{"line":53,"column":32},"line":53,"code":"  it('accepts valid user options', () => {\n    const userOptions: Options = {\n      ...defaultOptions,\n      routeBasePath: 'myBlog',\n      beforeDefaultRemarkPlugins: [],\n      beforeDefaultRehypePlugins: [markdownPluginsFunctionStub],\n      remarkPlugins: [[markdownPluginsFunctionStub, {option1: '42'}]],\n      rehypePlugins: [\n        // @ts-expect-error: it seems to work in practice\n        markdownPluginsObjectStub,\n        [markdownPluginsFunctionStub, {option1: '42'}],\n      ],\n    };\n    expect(testValidate(userOptions)).toEqual(userOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throws Error in case of invalid options","suites":["validateOptions"],"updatePoint":{"line":69,"column":45},"line":69,"code":"  it('throws Error in case of invalid options', () => {\n    expect(() =>\n      testValidate({\n        path: 'not_blog',\n        postsPerPage: -1,\n        include: ['api/*', 'docs/*'],\n        routeBasePath: 'not_blog',\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"throws Error in case of invalid feed type","suites":["validateOptions"],"updatePoint":{"line":80,"column":47},"line":80,"code":"  it('throws Error in case of invalid feed type', () => {\n    expect(() =>\n      testValidate({\n        feedOptions: {\n          // @ts-expect-error: test\n          type: 'none',\n        },\n      }),\n    ).toThrowErrorMatchingSnapshot();\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"converts all feed type to array with other feed type","suites":["validateOptions"],"updatePoint":{"line":91,"column":58},"line":91,"code":"  it('converts all feed type to array with other feed type', () => {\n    expect(\n      testValidate({\n        feedOptions: {type: 'all'},\n      }),\n    ).toEqual({\n      ...defaultOptions,\n      feedOptions: {type: ['rss', 'atom', 'json'], copyright: ''},\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts null type and return same","suites":["validateOptions"],"updatePoint":{"line":102,"column":39},"line":102,"code":"  it('accepts null type and return same', () => {\n    expect(\n      testValidate({\n        feedOptions: {type: null},\n      }),\n    ).toEqual({\n      ...defaultOptions,\n      feedOptions: {type: null},\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"contains array with rss + atom for missing feed type","suites":["validateOptions"],"updatePoint":{"line":113,"column":58},"line":113,"code":"  it('contains array with rss + atom for missing feed type', () => {\n    expect(\n      testValidate({\n        feedOptions: {},\n      }),\n    ).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"has array with rss + atom, title for missing feed type","suites":["validateOptions"],"updatePoint":{"line":121,"column":60},"line":121,"code":"  it('has array with rss + atom, title for missing feed type', () => {\n    expect(\n      testValidate({\n        feedOptions: {title: 'title'},\n      }),\n    ).toEqual({\n      ...defaultOptions,\n      feedOptions: {type: ['rss', 'atom'], title: 'title', copyright: ''},\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts 0 sidebar count","suites":["validateOptions"],"updatePoint":{"line":132,"column":29},"line":132,"code":"  it('accepts 0 sidebar count', () => {\n    const userOptions = {blogSidebarCount: 0};\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts \"ALL\" sidebar count","suites":["validateOptions"],"updatePoint":{"line":140,"column":33},"line":140,"code":"  it('accepts \"ALL\" sidebar count', () => {\n    const userOptions = {blogSidebarCount: 'ALL' as const};\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"rejects \"abcdef\" sidebar count","suites":["validateOptions"],"updatePoint":{"line":148,"column":36},"line":148,"code":"  it('rejects \"abcdef\" sidebar count', () => {\n    const userOptions = {blogSidebarCount: 'abcdef'};\n    // @ts-expect-error: test\n    expect(() => testValidate(userOptions)).toThrowErrorMatchingInlineSnapshot(\n      `\"\"blogSidebarCount\" must be one of [ALL, number]\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"accepts \"all posts\" sidebar title","suites":["validateOptions"],"updatePoint":{"line":156,"column":39},"line":156,"code":"  it('accepts \"all posts\" sidebar title', () => {\n    const userOptions = {blogSidebarTitle: 'all posts'};\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"rejects 42 sidebar title","suites":["validateOptions"],"updatePoint":{"line":164,"column":30},"line":164,"code":"  it('rejects 42 sidebar title', () => {\n    const userOptions = {blogSidebarTitle: 42};\n    // @ts-expect-error: test\n    expect(() => testValidate(userOptions)).toThrowErrorMatchingInlineSnapshot(\n      `\"\"blogSidebarTitle\" must be a string\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"returns translation files matching snapshot","suites":["getContentTranslationFiles"],"updatePoint":{"line":80,"column":49},"line":80,"code":"  it('returns translation files matching snapshot', () => {\n    expect(getSampleTranslationFiles()).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"falls back when translation is incomplete","suites":["translateContent"],"updatePoint":{"line":86,"column":47},"line":86,"code":"  it('falls back when translation is incomplete', () => {\n    expect(\n      translateContent(sampleBlogContent, [{path: 'foo', content: {}}]),\n    ).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"does not translate anything if translation files are untranslated","suites":["translateContent"],"updatePoint":{"line":92,"column":71},"line":92,"code":"  it('does not translate anything if translation files are untranslated', () => {\n    const translationFiles = getSampleTranslationFiles();\n    expect(translateContent(sampleBlogContent, translationFiles)).toEqual(\n      sampleBlogContent,\n    );\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"returns translated loaded","suites":["translateContent"],"updatePoint":{"line":99,"column":31},"line":99,"code":"  it('returns translated loaded', () => {\n    const translationFiles = getSampleTranslationFilesTranslated();\n    expect(\n      translateContent(sampleBlogContent, translationFiles),\n    ).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-blog/src/__tests__"},{"name":"no version tag provided","suites":["docsVersion"],"updatePoint":{"line":35,"column":29},"line":35,"code":"  it('no version tag provided', async () => {\n    await expect(() =>\n      cliDocsVersionCommand(null, DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Versions should be strings. Found type \"object\" for version null.\"`,\n    );\n    await expect(() =>\n      cliDocsVersionCommand(undefined, DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Versions should be strings. Found type \"undefined\" for version undefined.\"`,\n    );\n    await expect(() =>\n      cliDocsVersionCommand('', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"\": version name must contain at least one non-whitespace character.\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"version tag should not have slash","suites":["docsVersion"],"updatePoint":{"line":59,"column":39},"line":59,"code":"  it('version tag should not have slash', async () => {\n    await expect(() =>\n      cliDocsVersionCommand('foo/bar', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowError(\n      'Invalid version name \"foo/bar\": version name should not include slash (/) or backslash (\\\\).',\n    );\n    await expect(() =>\n      cliDocsVersionCommand('foo\\\\bar', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowError(\n      'Invalid version name \"foo\\\\bar\": version name should not include slash (/) or backslash (\\\\).',\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"version tag should not be too long","suites":["docsVersion"],"updatePoint":{"line":76,"column":40},"line":76,"code":"  it('version tag should not be too long', async () => {\n    await expect(() =>\n      cliDocsVersionCommand('a'.repeat(255), DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\": version name cannot be longer than 32 characters.\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"version tag should not be a dot or two dots","suites":["docsVersion"],"updatePoint":{"line":86,"column":49},"line":86,"code":"  it('version tag should not be a dot or two dots', async () => {\n    await expect(() =>\n      cliDocsVersionCommand('..', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"..\": version name should not be \".\" or \"..\".\"`,\n    );\n    await expect(() =>\n      cliDocsVersionCommand('.', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \".\": version name should not be \".\" or \"..\".\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"version tag should be a valid pathname","suites":["docsVersion"],"updatePoint":{"line":103,"column":44},"line":103,"code":"  it('version tag should be a valid pathname', async () => {\n    await expect(() =>\n      cliDocsVersionCommand('<foo|bar>', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"<foo|bar>\": version name should be a valid file path.\"`,\n    );\n    await expect(() =>\n      cliDocsVersionCommand('foo\\x00bar', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"foo\u0000bar\": version name should be a valid file path.\"`,\n    );\n    await expect(() =>\n      cliDocsVersionCommand('foo:bar', DEFAULT_OPTIONS, {\n        siteDir: simpleSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Invalid version name \"foo:bar\": version name should be a valid file path.\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"version tag already exist","suites":["docsVersion"],"updatePoint":{"line":127,"column":31},"line":127,"code":"  it('version tag already exist', async () => {\n    await expect(() =>\n      cliDocsVersionCommand('1.0.0', DEFAULT_OPTIONS, {\n        siteDir: versionedSiteDir,\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"[docs]: this version already exists! Use a version tag that does not already exist.\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"no docs file to version","suites":["docsVersion"],"updatePoint":{"line":137,"column":29},"line":137,"code":"  it('no docs file to version', async () => {\n    const emptySiteDir = path.join(fixtureDir, 'empty-site');\n    await expect(() =>\n      cliDocsVersionCommand('1.0.0', DEFAULT_OPTIONS, {\n        siteDir: emptySiteDir,\n        i18n: {locales: ['en', 'zh-Hans'], defaultLocale: 'en'},\n      } as LoadContext),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"[docs]: no docs found in \"<PROJECT_ROOT>/packages/docusaurus-plugin-content-docs/src/__tests__/__fixtures__/empty-site/docs\".\"`,\n    );\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"first time versioning","suites":["docsVersion"],"updatePoint":{"line":149,"column":27},"line":149,"code":"  it('first time versioning', async () => {\n    const copyMock = jest.spyOn(fs, 'copy').mockImplementation(() => {});\n    const writeMock = jest.spyOn(fs, 'outputFile');\n    let versionedSidebar!: unknown;\n    let versionedSidebarPath!: string;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionedSidebarPath = filepath;\n      versionedSidebar = JSON.parse(content);\n    });\n    let versionsPath!: string;\n    let versions!: unknown;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionsPath = filepath;\n      versions = JSON.parse(content);\n    });\n    const consoleMock = jest.spyOn(console, 'log').mockImplementation(() => {});\n    const options = {\n      ...DEFAULT_OPTIONS,\n      sidebarPath: path.join(simpleSiteDir, 'sidebars.json'),\n    };\n    await cliDocsVersionCommand('1.0.0', options, {\n      siteDir: simpleSiteDir,\n      i18n: {locales: ['en', 'zh-Hans'], defaultLocale: 'en'},\n    } as LoadContext);\n    expect(copyMock).toHaveBeenCalledWith(\n      path.join(simpleSiteDir, options.path),\n      getVersionDocsDirPath(simpleSiteDir, DEFAULT_PLUGIN_ID, '1.0.0'),\n    );\n    expect(copyMock).toHaveBeenCalledWith(\n      path.join(\n        simpleSiteDir,\n        'i18n/zh-Hans/docusaurus-plugin-content-docs/current',\n      ),\n      path.join(\n        simpleSiteDir,\n        'i18n/zh-Hans/docusaurus-plugin-content-docs/version-1.0.0',\n      ),\n    );\n    expect(versionedSidebar).toMatchSnapshot();\n    expect(versionedSidebarPath).toEqual(\n      getVersionSidebarsPath(simpleSiteDir, DEFAULT_PLUGIN_ID, '1.0.0'),\n    );\n    expect(versionsPath).toEqual(\n      getVersionsFilePath(simpleSiteDir, DEFAULT_PLUGIN_ID),\n    );\n    expect(versions).toEqual(['1.0.0']);\n    expect(consoleMock).toHaveBeenCalledWith(\n      expect.stringMatching(\n        /.*\\[SUCCESS\\].*\\[docs\\].*: version .*1\\.0\\.0.* created!.*/,\n      ),\n    );\n\n    copyMock.mockRestore();\n    writeMock.mockRestore();\n    consoleMock.mockRestore();\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"not the first time versioning","suites":["docsVersion"],"updatePoint":{"line":206,"column":35},"line":206,"code":"  it('not the first time versioning', async () => {\n    const copyMock = jest.spyOn(fs, 'copy').mockImplementation(() => {});\n    const writeMock = jest.spyOn(fs, 'outputFile');\n    let versionedSidebar!: unknown;\n    let versionedSidebarPath!: string;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionedSidebarPath = filepath;\n      versionedSidebar = JSON.parse(content);\n    });\n    let versionsPath!: string;\n    let versions!: unknown;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionsPath = filepath;\n      versions = JSON.parse(content);\n    });\n    const consoleMock = jest.spyOn(console, 'log').mockImplementation(() => {});\n    const warnMock = jest.spyOn(console, 'warn').mockImplementation(() => {});\n    const options = {\n      ...DEFAULT_OPTIONS,\n      sidebarPath: path.join(versionedSiteDir, 'sidebars.json'),\n    };\n    await cliDocsVersionCommand('2.0.0', options, {\n      siteDir: versionedSiteDir,\n      i18n: {locales: ['en', 'zh-Hans'], defaultLocale: 'en'},\n    } as LoadContext);\n    expect(copyMock).toHaveBeenCalledWith(\n      path.join(versionedSiteDir, options.path),\n      getVersionDocsDirPath(versionedSiteDir, DEFAULT_PLUGIN_ID, '2.0.0'),\n    );\n    expect(versionedSidebar).toMatchSnapshot();\n    expect(versionedSidebarPath).toEqual(\n      getVersionSidebarsPath(versionedSiteDir, DEFAULT_PLUGIN_ID, '2.0.0'),\n    );\n    expect(versionsPath).toEqual(\n      getVersionsFilePath(versionedSiteDir, DEFAULT_PLUGIN_ID),\n    );\n    expect(versions).toEqual(['2.0.0', '1.0.1', '1.0.0', 'withSlugs']);\n    expect(consoleMock).toHaveBeenCalledWith(\n      expect.stringMatching(\n        /.*\\[SUCCESS\\].*\\[docs\\].*: version .*2\\.0\\.0.* created!.*/,\n      ),\n    );\n    expect(warnMock.mock.calls[0]![0]).toMatchInlineSnapshot(\n      `\"[WARNING] [docs]: no docs found in \"<PROJECT_ROOT>/packages/docusaurus-plugin-content-docs/src/__tests__/__fixtures__/versioned-site/i18n/zh-Hans/docusaurus-plugin-content-docs/current\". Skipping.\"`,\n    );\n\n    warnMock.mockRestore();\n    copyMock.mockRestore();\n    writeMock.mockRestore();\n    consoleMock.mockRestore();\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"second docs instance versioning","suites":["docsVersion"],"updatePoint":{"line":258,"column":37},"line":258,"code":"  it('second docs instance versioning', async () => {\n    const pluginId = 'community';\n\n    const copyMock = jest.spyOn(fs, 'copy').mockImplementation(() => {});\n    const writeMock = jest.spyOn(fs, 'outputFile');\n    let versionedSidebar!: unknown;\n    let versionedSidebarPath!: string;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionedSidebarPath = filepath;\n      versionedSidebar = JSON.parse(content);\n    });\n    let versionsPath!: string;\n    let versions!: unknown;\n    writeMock.mockImplementationOnce((filepath, content: string) => {\n      versionsPath = filepath;\n      versions = JSON.parse(content);\n    });\n    const consoleMock = jest.spyOn(console, 'log').mockImplementation(() => {});\n    const options = {\n      ...DEFAULT_OPTIONS,\n      id: pluginId,\n      path: 'community',\n      sidebarPath: path.join(versionedSiteDir, 'community_sidebars.json'),\n    };\n    await cliDocsVersionCommand('2.0.0', options, {\n      siteDir: versionedSiteDir,\n      i18n: {locales: ['en', 'fr'], defaultLocale: 'en'},\n    } as LoadContext);\n    expect(copyMock).toHaveBeenCalledWith(\n      path.join(versionedSiteDir, options.path),\n      getVersionDocsDirPath(versionedSiteDir, pluginId, '2.0.0'),\n    );\n    expect(copyMock).toHaveBeenCalledWith(\n      path.join(\n        versionedSiteDir,\n        'i18n/fr/docusaurus-plugin-content-docs-community/current',\n      ),\n      path.join(\n        versionedSiteDir,\n        'i18n/fr/docusaurus-plugin-content-docs-community/version-2.0.0',\n      ),\n    );\n    expect(versionedSidebar).toMatchSnapshot();\n    expect(versionedSidebarPath).toEqual(\n      getVersionSidebarsPath(versionedSiteDir, pluginId, '2.0.0'),\n    );\n    expect(versionsPath).toEqual(\n      getVersionsFilePath(versionedSiteDir, pluginId),\n    );\n    expect(versions).toEqual(['2.0.0', '1.0.0']);\n    expect(consoleMock).toHaveBeenCalledWith(\n      expect.stringMatching(\n        /.*\\[SUCCESS\\].*\\[community\\].*: version .*2.0.0.* created!.*/,\n      ),\n    );\n\n    copyMock.mockRestore();\n    writeMock.mockRestore();\n    consoleMock.mockRestore();\n  });","file":"cli.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"readVersionDocs","suites":["simple site"],"updatePoint":{"line":219,"column":21},"line":219,"code":"  it('readVersionDocs', async () => {\n    const {options, currentVersion} = await loadSite();\n    const docs = await readVersionDocs(currentVersion, options);\n    expect(docs.map((doc) => doc.source).sort()).toEqual(\n      [\n        'hello.md',\n        'ipsum.md',\n        'lorem.md',\n        'rootAbsoluteSlug.md',\n        'rootRelativeSlug.md',\n        'rootResolvedSlug.md',\n        'rootTryToEscapeSlug.md',\n        'headingAsTitle.md',\n        'doc with space.md',\n        'doc-draft.md',\n        'customLastUpdate.md',\n        'lastUpdateAuthorOnly.md',\n        'lastUpdateDateOnly.md',\n        'foo/bar.md',\n        'foo/baz.md',\n        'slugs/absoluteSlug.md',\n        'slugs/relativeSlug.md',\n        'slugs/resolvedSlug.md',\n        'slugs/tryToEscapeSlug.md',\n      ].sort(),\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"normal docs","suites":["simple site"],"updatePoint":{"line":247,"column":17},"line":247,"code":"  it('normal docs', async () => {\n    const {defaultTestUtils} = await loadSite();\n    await defaultTestUtils.testMeta(path.join('foo', 'bar.md'), {\n      version: 'current',\n      id: 'foo/bar',\n      unversionedId: 'foo/bar',\n      sourceDirName: 'foo',\n      permalink: '/docs/foo/bar',\n      slug: '/foo/bar',\n      title: 'Bar',\n      description: 'This is custom description',\n      frontMatter: {\n        description: 'This is custom description',\n        id: 'bar',\n        title: 'Bar',\n        pagination_next: null,\n        pagination_prev: null,\n      },\n      tags: [],\n    });\n    await defaultTestUtils.testMeta(path.join('hello.md'), {\n      version: 'current',\n      id: 'hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/',\n      slug: '/',\n      title: 'Hello, World !',\n      description: `Hi, Endilie here :)`,\n      frontMatter: {\n        id: 'hello',\n        title: 'Hello, World !',\n        sidebar_label: 'Hello sidebar_label',\n        slug: '/',\n        tags: ['tag-1', 'tag 3'],\n      },\n      tags: [\n        {\n          label: 'tag-1',\n          permalink: '/docs/tags/tag-1',\n        },\n        {\n          label: 'tag 3',\n          permalink: '/docs/tags/tag-3',\n        },\n      ],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with editUrl","suites":["simple site"],"updatePoint":{"line":296,"column":23},"line":296,"code":"  it('docs with editUrl', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          editUrl: 'https://github.com/facebook/docusaurus/edit/main/website',\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta(path.join('foo', 'baz.md'), {\n      version: 'current',\n      id: 'foo/baz',\n      unversionedId: 'foo/baz',\n      sourceDirName: 'foo',\n      permalink: '/docs/foo/bazSlug.html',\n      slug: '/foo/bazSlug.html',\n      title: 'baz',\n      editUrl:\n        'https://github.com/facebook/docusaurus/edit/main/website/docs/foo/baz.md',\n      description: 'Images',\n      frontMatter: {\n        id: 'baz',\n        slug: 'bazSlug.html',\n        title: 'baz',\n        pagination_label: 'baz pagination_label',\n        tags: [\n          'tag 1',\n          'tag-1',\n          {label: 'tag 2', permalink: 'tag2-custom-permalink'},\n        ],\n      },\n      tags: [\n        {\n          label: 'tag 1',\n          permalink: '/docs/tags/tag-1',\n        },\n        {\n          label: 'tag 2',\n          permalink: '/docs/tags/tag2-custom-permalink',\n        },\n      ],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with custom editUrl & unrelated frontMatter","suites":["simple site"],"updatePoint":{"line":346,"column":54},"line":346,"code":"  it('docs with custom editUrl & unrelated frontMatter', async () => {\n    const {defaultTestUtils} = await loadSite();\n\n    await defaultTestUtils.testMeta('lorem.md', {\n      version: 'current',\n      id: 'lorem',\n      unversionedId: 'lorem',\n      sourceDirName: '.',\n      permalink: '/docs/lorem',\n      slug: '/lorem',\n      title: 'lorem',\n      editUrl: 'https://github.com/customUrl/docs/lorem.md',\n      description: 'Lorem ipsum.',\n      frontMatter: {\n        custom_edit_url: 'https://github.com/customUrl/docs/lorem.md',\n        unrelated_front_matter: \"won't be part of metadata\",\n      },\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with function editUrl","suites":["simple site"],"updatePoint":{"line":367,"column":32},"line":367,"code":"  it('docs with function editUrl', async () => {\n    const hardcodedEditUrl = 'hardcoded-edit-url';\n\n    const editUrlFunction: EditUrlFunction = jest.fn(() => hardcodedEditUrl);\n\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          editUrl: editUrlFunction,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta(path.join('foo', 'baz.md'), {\n      version: 'current',\n      id: 'foo/baz',\n      unversionedId: 'foo/baz',\n      sourceDirName: 'foo',\n      permalink: '/docs/foo/bazSlug.html',\n      slug: '/foo/bazSlug.html',\n      title: 'baz',\n      editUrl: hardcodedEditUrl,\n      description: 'Images',\n      frontMatter: {\n        id: 'baz',\n        slug: 'bazSlug.html',\n        title: 'baz',\n        pagination_label: 'baz pagination_label',\n        tags: [\n          'tag 1',\n          'tag-1',\n          {label: 'tag 2', permalink: 'tag2-custom-permalink'},\n        ],\n      },\n      tags: [\n        {\n          label: 'tag 1',\n          permalink: '/docs/tags/tag-1',\n        },\n        {\n          label: 'tag 2',\n          permalink: '/docs/tags/tag2-custom-permalink',\n        },\n      ],\n    });\n\n    expect(editUrlFunction).toHaveBeenCalledTimes(1);\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      version: 'current',\n      versionDocsDirPath: 'docs',\n      docPath: path.posix.join('foo', 'baz.md'),\n      permalink: '/docs/foo/bazSlug.html',\n      locale: 'en',\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with last update time and author","suites":["simple site"],"updatePoint":{"line":429,"column":43},"line":429,"code":"  it('docs with last update time and author', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          showLastUpdateAuthor: true,\n          showLastUpdateTime: true,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta('lorem.md', {\n      version: 'current',\n      id: 'lorem',\n      unversionedId: 'lorem',\n      sourceDirName: '.',\n      permalink: '/docs/lorem',\n      slug: '/lorem',\n      title: 'lorem',\n      editUrl: 'https://github.com/customUrl/docs/lorem.md',\n      description: 'Lorem ipsum.',\n      frontMatter: {\n        custom_edit_url: 'https://github.com/customUrl/docs/lorem.md',\n        unrelated_front_matter: \"won't be part of metadata\",\n      },\n      lastUpdatedAt: 1539502055,\n      formattedLastUpdatedAt: '10/14/2018',\n      lastUpdatedBy: 'Author',\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with draft frontmatter","suites":["simple site"],"updatePoint":{"line":466,"column":33},"line":466,"code":"  it('docs with draft frontmatter', async () => {\n    const {createTestUtilsPartial} = await loadSite();\n\n    const testUtilsProd = createTestUtilsPartial({\n      env: 'production',\n    });\n    await expect(\n      testUtilsProd.processDocFile('doc-draft.md'),\n    ).resolves.toMatchObject({\n      draft: true,\n    });\n\n    const testUtilsDev = createTestUtilsPartial({\n      env: 'development',\n    });\n    await expect(\n      testUtilsDev.processDocFile('doc-draft.md'),\n    ).resolves.toMatchObject({\n      draft: false,\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with last_update front matter","suites":["simple site"],"updatePoint":{"line":488,"column":40},"line":488,"code":"  it('docs with last_update front matter', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          showLastUpdateAuthor: true,\n          showLastUpdateTime: true,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta('customLastUpdate.md', {\n      version: 'current',\n      id: 'customLastUpdate',\n      unversionedId: 'customLastUpdate',\n      sourceDirName: '.',\n      permalink: '/docs/customLastUpdate',\n      slug: '/customLastUpdate',\n      title: 'Custom Last Update',\n      description: 'Custom last update',\n      frontMatter: {\n        last_update: {\n          author: 'Custom Author',\n          date: '1/1/2000',\n        },\n        title: 'Custom Last Update',\n      },\n      lastUpdatedAt: new Date('1/1/2000').getTime() / 1000,\n      formattedLastUpdatedAt: '1/1/2000',\n      lastUpdatedBy: 'Custom Author',\n      sidebarPosition: undefined,\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with only last_update author front matter","suites":["simple site"],"updatePoint":{"line":528,"column":52},"line":528,"code":"  it('docs with only last_update author front matter', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          showLastUpdateAuthor: true,\n          showLastUpdateTime: true,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta('lastUpdateAuthorOnly.md', {\n      version: 'current',\n      id: 'lastUpdateAuthorOnly',\n      unversionedId: 'lastUpdateAuthorOnly',\n      sourceDirName: '.',\n      permalink: '/docs/lastUpdateAuthorOnly',\n      slug: '/lastUpdateAuthorOnly',\n      title: 'Last Update Author Only',\n      description: 'Only custom author, so it will still use the date from Git',\n      frontMatter: {\n        last_update: {\n          author: 'Custom Author',\n        },\n        title: 'Last Update Author Only',\n      },\n      lastUpdatedAt: 1539502055,\n      formattedLastUpdatedAt: '10/14/2018',\n      lastUpdatedBy: 'Custom Author',\n      sidebarPosition: undefined,\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with only last_update date front matter","suites":["simple site"],"updatePoint":{"line":567,"column":50},"line":567,"code":"  it('docs with only last_update date front matter', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          showLastUpdateAuthor: true,\n          showLastUpdateTime: true,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta('lastUpdateDateOnly.md', {\n      version: 'current',\n      id: 'lastUpdateDateOnly',\n      unversionedId: 'lastUpdateDateOnly',\n      sourceDirName: '.',\n      permalink: '/docs/lastUpdateDateOnly',\n      slug: '/lastUpdateDateOnly',\n      title: 'Last Update Date Only',\n      description: 'Only custom date, so it will still use the author from Git',\n      frontMatter: {\n        last_update: {\n          date: '1/1/2000',\n        },\n        title: 'Last Update Date Only',\n      },\n      lastUpdatedAt: new Date('1/1/2000').getTime() / 1000,\n      formattedLastUpdatedAt: '1/1/2000',\n      lastUpdatedBy: 'Author',\n      sidebarPosition: undefined,\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with last_update front matter disabled","suites":["simple site"],"updatePoint":{"line":606,"column":49},"line":606,"code":"  it('docs with last_update front matter disabled', async () => {\n    const {siteDir, context, options, currentVersion, createTestUtilsPartial} =\n      await loadSite({\n        options: {\n          showLastUpdateAuthor: false,\n          showLastUpdateTime: false,\n        },\n      });\n\n    const testUtilsLocal = createTestUtilsPartial({\n      siteDir,\n      context,\n      options,\n      versionMetadata: currentVersion,\n    });\n\n    await testUtilsLocal.testMeta('customLastUpdate.md', {\n      version: 'current',\n      id: 'customLastUpdate',\n      unversionedId: 'customLastUpdate',\n      sourceDirName: '.',\n      permalink: '/docs/customLastUpdate',\n      slug: '/customLastUpdate',\n      title: 'Custom Last Update',\n      description: 'Custom last update',\n      frontMatter: {\n        last_update: {\n          author: 'Custom Author',\n          date: '1/1/2000',\n        },\n        title: 'Custom Last Update',\n      },\n      lastUpdatedAt: undefined,\n      formattedLastUpdatedAt: undefined,\n      lastUpdatedBy: undefined,\n      sidebarPosition: undefined,\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with slugs","suites":["simple site"],"updatePoint":{"line":646,"column":21},"line":646,"code":"  it('docs with slugs', async () => {\n    const {defaultTestUtils} = await loadSite();\n\n    await defaultTestUtils.testSlug(\n      path.join('rootRelativeSlug.md'),\n      '/docs/rootRelativeSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('rootAbsoluteSlug.md'),\n      '/docs/rootAbsoluteSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('rootResolvedSlug.md'),\n      '/docs/hey/rootResolvedSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('rootTryToEscapeSlug.md'),\n      '/docs/rootTryToEscapeSlug',\n    );\n\n    await defaultTestUtils.testSlug(\n      path.join('slugs', 'absoluteSlug.md'),\n      '/docs/absoluteSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('slugs', 'relativeSlug.md'),\n      '/docs/slugs/relativeSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('slugs', 'resolvedSlug.md'),\n      '/docs/slugs/hey/resolvedSlug',\n    );\n    await defaultTestUtils.testSlug(\n      path.join('slugs', 'tryToEscapeSlug.md'),\n      '/docs/tryToEscapeSlug',\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs with invalid id","suites":["simple site"],"updatePoint":{"line":684,"column":26},"line":684,"code":"  it('docs with invalid id', async () => {\n    const {defaultTestUtils} = await loadSite();\n    await expect(async () =>\n      defaultTestUtils.processDocFile(\n        createFakeDocFile({\n          source: 'some/fake/path',\n          frontMatter: {\n            id: 'Hello/world',\n          },\n        }),\n      ),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Document id \"Hello/world\" cannot include slash.\"`,\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"custom pagination","suites":["simple site"],"updatePoint":{"line":700,"column":23},"line":700,"code":"  it('custom pagination', async () => {\n    const {defaultTestUtils, options, versionsMetadata} = await loadSite();\n    const docs = await readVersionDocs(versionsMetadata[0]!, options);\n    await expect(\n      defaultTestUtils.generateNavigation(docs),\n    ).resolves.toMatchSnapshot();\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"bad pagination","suites":["simple site"],"updatePoint":{"line":708,"column":20},"line":708,"code":"  it('bad pagination', async () => {\n    const {defaultTestUtils, options, versionsMetadata} = await loadSite();\n    const docs = await readVersionDocs(versionsMetadata[0]!, options);\n    docs.push(\n      createFakeDocFile({\n        source: 'bad',\n        frontMatter: {pagination_prev: 'nonexistent'},\n      }),\n    );\n    await expect(\n      defaultTestUtils.generateNavigation(docs),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Error when loading bad in .: the pagination_prev front matter points to a non-existent ID nonexistent.\"`,\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"next docs","suites":["versioned site"],"updatePoint":{"line":792,"column":15},"line":792,"code":"  it('next docs', async () => {\n    const {currentVersionTestUtils} = await loadSite();\n\n    await currentVersionTestUtils.testMeta(path.join('foo', 'bar.md'), {\n      id: 'foo/bar',\n      version: 'current',\n      unversionedId: 'foo/bar',\n      sourceDirName: 'foo',\n      permalink: '/docs/next/foo/barSlug',\n      slug: '/foo/barSlug',\n      title: 'bar',\n      description: 'This is next version of bar.',\n      frontMatter: {\n        slug: 'barSlug',\n        tags: [\n          'barTag 1',\n          'barTag-2',\n          {\n            label: 'barTag 3',\n            permalink: 'barTag-3-permalink',\n          },\n        ],\n      },\n      tags: [\n        {\n          label: 'barTag 1',\n          permalink: '/docs/next/tags/bar-tag-1',\n        },\n        {\n          label: 'barTag-2',\n          permalink: '/docs/next/tags/bar-tag-2',\n        },\n        {\n          label: 'barTag 3',\n          permalink: '/docs/next/tags/barTag-3-permalink',\n        },\n      ],\n    });\n    await currentVersionTestUtils.testMeta(path.join('hello.md'), {\n      id: 'hello',\n      version: 'current',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/next/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello next !',\n      frontMatter: {\n        slug: '/',\n      },\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"versioned docs","suites":["versioned site"],"updatePoint":{"line":846,"column":20},"line":846,"code":"  it('versioned docs', async () => {\n    const {version101TestUtils, version100TestUtils} = await loadSite();\n\n    await version100TestUtils.testMeta(path.join('foo', 'bar.md'), {\n      id: 'version-1.0.0/foo/bar',\n      unversionedId: 'foo/bar',\n      sourceDirName: 'foo',\n      permalink: '/docs/1.0.0/foo/barSlug',\n      slug: '/foo/barSlug',\n      title: 'bar',\n      description: 'Bar 1.0.0 !',\n      frontMatter: {slug: 'barSlug'},\n      version: '1.0.0',\n      tags: [],\n    });\n    await version100TestUtils.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated en)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/en/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      tags: [],\n    });\n    await version101TestUtils.testMeta(path.join('foo', 'bar.md'), {\n      id: 'version-1.0.1/foo/bar',\n      unversionedId: 'foo/bar',\n      sourceDirName: 'foo',\n      permalink: '/docs/foo/bar',\n      slug: '/foo/bar',\n      title: 'bar',\n      description: 'Bar 1.0.1 !',\n      version: '1.0.1',\n      frontMatter: {},\n      tags: [],\n    });\n    await version101TestUtils.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.1/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.1 !',\n      version: '1.0.1',\n      frontMatter: {\n        slug: '/',\n      },\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"next doc slugs","suites":["versioned site"],"updatePoint":{"line":905,"column":20},"line":905,"code":"  it('next doc slugs', async () => {\n    const {currentVersionTestUtils} = await loadSite();\n\n    await currentVersionTestUtils.testSlug(\n      path.join('slugs', 'absoluteSlug.md'),\n      '/docs/next/absoluteSlug',\n    );\n    await currentVersionTestUtils.testSlug(\n      path.join('slugs', 'relativeSlug.md'),\n      '/docs/next/slugs/relativeSlug',\n    );\n    await currentVersionTestUtils.testSlug(\n      path.join('slugs', 'resolvedSlug.md'),\n      '/docs/next/slugs/hey/resolvedSlug',\n    );\n    await currentVersionTestUtils.testSlug(\n      path.join('slugs', 'tryToEscapeSlug.md'),\n      '/docs/next/tryToEscapeSlug',\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"versioned doc slugs","suites":["versioned site"],"updatePoint":{"line":926,"column":25},"line":926,"code":"  it('versioned doc slugs', async () => {\n    const {versionWithSlugsTestUtils} = await loadSite();\n\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('rootAbsoluteSlug.md'),\n      '/docs/withSlugs/rootAbsoluteSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('rootRelativeSlug.md'),\n      '/docs/withSlugs/rootRelativeSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('rootResolvedSlug.md'),\n      '/docs/withSlugs/hey/rootResolvedSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('rootTryToEscapeSlug.md'),\n      '/docs/withSlugs/rootTryToEscapeSlug',\n    );\n\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('slugs', 'absoluteSlug.md'),\n      '/docs/withSlugs/absoluteSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('slugs', 'relativeSlug.md'),\n      '/docs/withSlugs/slugs/relativeSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('slugs', 'resolvedSlug.md'),\n      '/docs/withSlugs/slugs/hey/resolvedSlug',\n    );\n    await versionWithSlugsTestUtils.testSlug(\n      path.join('slugs', 'tryToEscapeSlug.md'),\n      '/docs/withSlugs/tryToEscapeSlug',\n    );\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"doc with editUrl function","suites":["versioned site"],"updatePoint":{"line":964,"column":31},"line":964,"code":"  it('doc with editUrl function', async () => {\n    const hardcodedEditUrl = 'hardcoded-edit-url';\n\n    const editUrlFunction: EditUrlFunction = jest.fn(() => hardcodedEditUrl);\n\n    const {siteDir, context, options, version100} = await loadSite({\n      options: {\n        editUrl: editUrlFunction,\n      },\n    });\n\n    const testUtilsLocal = createTestUtils({\n      siteDir,\n      context,\n      options,\n      versionMetadata: version100,\n    });\n\n    await testUtilsLocal.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated en)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/en/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      editUrl: hardcodedEditUrl,\n      tags: [],\n    });\n\n    expect(editUrlFunction).toHaveBeenCalledTimes(1);\n    expect(editUrlFunction).toHaveBeenCalledWith({\n      version: '1.0.0',\n      versionDocsDirPath: 'versioned_docs/version-1.0.0',\n      docPath: path.join('hello.md'),\n      permalink: '/docs/1.0.0/',\n      locale: 'en',\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"translated doc with editUrl","suites":["versioned site"],"updatePoint":{"line":1010,"column":33},"line":1010,"code":"  it('translated doc with editUrl', async () => {\n    const {siteDir, context, options, version100} = await loadSite({\n      options: {\n        editUrl: 'https://github.com/facebook/docusaurus/edit/main/website',\n      },\n    });\n\n    const testUtilsLocal = createTestUtils({\n      siteDir,\n      context,\n      options,\n      versionMetadata: version100,\n    });\n\n    await testUtilsLocal.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated en)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/en/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      editUrl:\n        'https://github.com/facebook/docusaurus/edit/main/website/versioned_docs/version-1.0.0/hello.md',\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"translated en doc with editUrl and editCurrentVersion=true","suites":["versioned site"],"updatePoint":{"line":1044,"column":64},"line":1044,"code":"  it('translated en doc with editUrl and editCurrentVersion=true', async () => {\n    const {siteDir, context, options, version100} = await loadSite({\n      options: {\n        editUrl: 'https://github.com/facebook/docusaurus/edit/main/website',\n        editCurrentVersion: true,\n      },\n    });\n\n    const testUtilsLocal = createTestUtils({\n      siteDir,\n      context,\n      options,\n      versionMetadata: version100,\n    });\n\n    await testUtilsLocal.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated en)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/en/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      editUrl:\n        'https://github.com/facebook/docusaurus/edit/main/website/docs/hello.md',\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"translated fr doc with editUrl and editLocalizedFiles=true","suites":["versioned site"],"updatePoint":{"line":1079,"column":64},"line":1079,"code":"  it('translated fr doc with editUrl and editLocalizedFiles=true', async () => {\n    const {siteDir, context, options, version100} = await loadSite({\n      options: {\n        editUrl: 'https://github.com/facebook/docusaurus/edit/main/website',\n        editLocalizedFiles: true,\n      },\n      locale: 'fr',\n    });\n\n    const testUtilsLocal = createTestUtils({\n      siteDir,\n      context,\n      options,\n      versionMetadata: version100,\n    });\n\n    await testUtilsLocal.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/fr/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated fr)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/fr/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      editUrl:\n        'https://github.com/facebook/docusaurus/edit/main/website/i18n/fr/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"translated fr doc with editUrl and editLocalizedFiles=true + editCurrentVersion=true","suites":["versioned site"],"updatePoint":{"line":1115,"column":90},"line":1115,"code":"  it('translated fr doc with editUrl and editLocalizedFiles=true + editCurrentVersion=true', async () => {\n    const {siteDir, context, options, version100} = await loadSite({\n      options: {\n        editUrl: 'https://github.com/facebook/docusaurus/edit/main/website',\n        editCurrentVersion: true,\n        editLocalizedFiles: true,\n      },\n      locale: 'fr',\n    });\n\n    const testUtilsLocal = createTestUtils({\n      siteDir,\n      context,\n      options,\n      versionMetadata: version100,\n    });\n\n    await testUtilsLocal.testMeta(path.join('hello.md'), {\n      id: 'version-1.0.0/hello',\n      unversionedId: 'hello',\n      sourceDirName: '.',\n      permalink: '/fr/docs/1.0.0/',\n      slug: '/',\n      title: 'hello',\n      description: 'Hello 1.0.0 ! (translated fr)',\n      frontMatter: {\n        slug: '/',\n      },\n      version: '1.0.0',\n      source:\n        '@site/i18n/fr/docusaurus-plugin-content-docs/version-1.0.0/hello.md',\n      editUrl:\n        'https://github.com/facebook/docusaurus/edit/main/website/i18n/fr/docusaurus-plugin-content-docs/current/hello.md',\n      tags: [],\n    });\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"supports readme","suites":["isConventionalDocIndex"],"updatePoint":{"line":1154,"column":21},"line":1154,"code":"  it('supports readme', () => {\n    expect(\n      isCategoryIndex({\n        fileName: 'readme',\n        directories: ['doesNotMatter'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'readme',\n        directories: ['doesNotMatter'],\n        extension: '.mdx',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'README',\n        directories: ['doesNotMatter'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'ReAdMe',\n        directories: ['doesNotMatter'],\n        extension: '',\n      }),\n    ).toBe(true);\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"supports index","suites":["isConventionalDocIndex"],"updatePoint":{"line":1185,"column":20},"line":1185,"code":"  it('supports index', () => {\n    expect(\n      isCategoryIndex({\n        fileName: 'index',\n        directories: ['doesNotMatter'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'index',\n        directories: ['doesNotMatter'],\n        extension: '.mdx',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'INDEX',\n        directories: ['doesNotMatter'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'InDeX',\n        directories: ['doesNotMatter'],\n        extension: '',\n      }),\n    ).toBe(true);\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"supports <categoryName>/<categoryName>.md","suites":["isConventionalDocIndex"],"updatePoint":{"line":1216,"column":47},"line":1216,"code":"  it('supports <categoryName>/<categoryName>.md', () => {\n    expect(\n      isCategoryIndex({\n        fileName: 'someCategory',\n        directories: ['someCategory', 'doesNotMatter'],\n        extension: '',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'someCategory',\n        directories: ['someCategory'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'someCategory',\n        directories: ['someCategory'],\n        extension: '.mdx',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'SOME_CATEGORY',\n        directories: ['some_category'],\n        extension: '.md',\n      }),\n    ).toBe(true);\n    expect(\n      isCategoryIndex({\n        fileName: 'some_category',\n        directories: ['some_category'],\n        extension: '',\n      }),\n    ).toBe(true);\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"reject other cases","suites":["isConventionalDocIndex"],"updatePoint":{"line":1254,"column":24},"line":1254,"code":"  it('reject other cases', () => {\n    expect(\n      isCategoryIndex({\n        fileName: 'some_Category',\n        directories: ['someCategory'],\n        extension: '',\n      }),\n    ).toBe(false);\n    expect(\n      isCategoryIndex({\n        fileName: 'read_me',\n        directories: ['doesNotMatter'],\n        extension: '',\n      }),\n    ).toBe(false);\n    expect(\n      isCategoryIndex({\n        fileName: 'the index',\n        directories: ['doesNotMatter'],\n        extension: '',\n      }),\n    ).toBe(false);\n  });","file":"docs.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"[] accept valid values","suites":[],"updatePoint":{"line":25,"column":46},"line":25,"code":"  test(`[${params.prefix}] accept valid values`, () => {\n    params.validFrontMatters.forEach((frontMatter) => {\n      expect(validateDocFrontMatter(frontMatter)).toEqual(frontMatter);\n    });\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"[] convert valid values","suites":[],"updatePoint":{"line":32,"column":47},"line":32,"code":"  test(`[${params.prefix}] convert valid values`, () => {\n    params.convertibleFrontMatter?.forEach(\n      ([convertibleFrontMatter, convertedFrontMatter]) => {\n        expect(validateDocFrontMatter(convertibleFrontMatter)).toEqual(\n          convertedFrontMatter,\n        );\n      },\n    );\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"[] throw error for values","suites":[],"updatePoint":{"line":43,"column":49},"line":43,"code":"  test(`[${params.prefix}] throw error for values`, () => {\n    params.invalidFrontMatters?.forEach(([frontMatter, message]) => {\n      try {\n        validateDocFrontMatter(frontMatter);\n        // eslint-disable-next-line jest/no-jasmine-globals\n        fail(\n          new Error(\n            `Doc front matter is expected to be rejected, but was accepted successfully:\\n ${JSON.stringify(\n              frontMatter,\n              null,\n              2,\n            )}`,\n          ),\n        );\n      } catch (err) {\n        // eslint-disable-next-line jest/no-conditional-expect\n        expect((err as Error).message).toMatch(\n          new RegExp(escapeStringRegexp(message)),\n        );\n      }\n    });\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts empty object","suites":["doc front matter schema"],"updatePoint":{"line":68,"column":26},"line":68,"code":"  it('accepts empty object', () => {\n    const frontMatter: DocFrontMatter = {};\n    expect(validateDocFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts unknown field","suites":["doc front matter schema"],"updatePoint":{"line":73,"column":27},"line":73,"code":"  it('accepts unknown field', () => {\n    const frontMatter = {abc: '1'};\n    expect(validateDocFrontMatter(frontMatter)).toEqual(frontMatter);\n  });","file":"frontMatter.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"generates the right docs, sidebars, and metadata","suites":["toGlobalDataVersion"],"updatePoint":{"line":15,"column":54},"line":15,"code":"  it('generates the right docs, sidebars, and metadata', () => {\n    const docs = [\n      {\n        unversionedId: 'main',\n        permalink: '/current/main',\n        sidebar: 'tutorial',\n        frontMatter: {},\n      },\n      {\n        unversionedId: 'doc',\n        permalink: '/current/doc',\n        sidebar: 'tutorial',\n        frontMatter: {},\n      },\n    ] as DocMetadata[];\n    const sidebars: Sidebars = {\n      tutorial: [\n        {\n          type: 'doc',\n          id: 'main',\n        },\n        {\n          type: 'category',\n          label: 'Generated',\n          link: {\n            type: 'generated-index',\n            permalink: '/current/generated',\n            slug: '/current/generated',\n          },\n          items: [\n            {\n              type: 'doc',\n              id: 'doc',\n            },\n          ],\n          collapsed: false,\n          collapsible: true,\n        },\n      ],\n      links: [\n        {\n          type: 'link',\n          href: 'foo',\n          label: 'Foo',\n        },\n        {\n          type: 'link',\n          href: 'bar',\n          label: 'Bar',\n        },\n      ],\n      another: [\n        {\n          type: 'category',\n          label: 'Generated',\n          link: {\n            type: 'generated-index',\n            permalink: '/current/generated-2',\n            slug: '/current/generated-2',\n          },\n          items: [\n            {\n              type: 'doc',\n              id: 'doc',\n            },\n          ],\n          collapsed: false,\n          collapsible: true,\n        },\n      ],\n    };\n    const sidebarsUtils = createSidebarsUtils(sidebars);\n    expect(\n      toGlobalDataVersion({\n        versionName: 'current',\n        label: 'Label',\n        isLast: true,\n        path: '/current',\n        docs,\n        drafts: [\n          {\n            unversionedId: 'some-draft-id',\n            permalink: '/current/draft',\n            sidebar: undefined,\n          },\n        ] as DocMetadata[],\n        sidebars,\n        categoryGeneratedIndices: getCategoryGeneratedIndexMetadataList({\n          docs,\n          sidebarsUtils,\n        }),\n        sidebarsUtils,\n        banner: 'unreleased',\n        badge: true,\n        className: 'current-cls',\n        tagsPath: '/current/tags',\n        contentPath: '',\n        contentPathLocalized: '',\n        sidebarFilePath: '',\n        routePriority: 0.5,\n      }),\n    ).toMatchSnapshot();\n  });","file":"globalData.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"site with wrong sidebar content","suites":["sidebar"],"updatePoint":{"line":132,"column":37},"line":132,"code":"  it('site with wrong sidebar content', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'simple-site');\n    const context = await loadContext({siteDir});\n    const sidebarPath = path.join(siteDir, 'wrong-sidebars.json');\n    const plugin = await pluginContentDocs(\n      context,\n      validateOptions({\n        validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n        options: {\n          sidebarPath,\n        },\n      }),\n    );\n    await expect(plugin.loadContent!()).rejects.toThrowErrorMatchingSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"site with wrong sidebar file path","suites":["sidebar"],"updatePoint":{"line":148,"column":39},"line":148,"code":"  it('site with wrong sidebar file path', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'site-with-doc-label');\n    const context = await loadContext({siteDir});\n\n    await expect(async () => {\n      const plugin = await pluginContentDocs(\n        context,\n        validateOptions({\n          validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n          options: {\n            sidebarPath: 'wrong-path-sidebar.json',\n          },\n        }),\n      );\n\n      await plugin.loadContent!();\n    }).rejects.toThrowErrorMatchingInlineSnapshot(`\n            \"The path to the sidebar file does not exist at \"wrong-path-sidebar.json\".\n            Please set the docs \"sidebarPath\" field in your config file to:\n            - a sidebars path that exists\n            - false: to disable the sidebar\n            - undefined: for Docusaurus to generate it automatically\"\n          `);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"site with undefined sidebar","suites":["sidebar"],"updatePoint":{"line":173,"column":33},"line":173,"code":"  it('site with undefined sidebar', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'site-with-doc-label');\n    const context = await loadContext({siteDir});\n    const plugin = await pluginContentDocs(\n      context,\n      validateOptions({\n        validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n        options: {\n          sidebarPath: undefined,\n        },\n      }),\n    );\n    const result = await plugin.loadContent!();\n\n    expect(result.loadedVersions).toHaveLength(1);\n    expect(result.loadedVersions[0]!.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"site with disabled sidebar","suites":["sidebar"],"updatePoint":{"line":191,"column":32},"line":191,"code":"  it('site with disabled sidebar', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'site-with-doc-label');\n    const context = await loadContext({siteDir});\n    const plugin = await pluginContentDocs(\n      context,\n      validateOptions({\n        validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n        options: {\n          sidebarPath: false,\n        },\n      }),\n    );\n    const result = await plugin.loadContent!();\n\n    expect(result.loadedVersions).toHaveLength(1);\n    expect(result.loadedVersions[0]!.sidebars).toEqual(DisabledSidebars);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"no files in docs folder","suites":["empty/no docs website"],"updatePoint":{"line":213,"column":29},"line":213,"code":"  it('no files in docs folder', async () => {\n    const context = await loadContext({siteDir});\n    await fs.ensureDir(path.join(siteDir, 'docs'));\n    const plugin = await pluginContentDocs(\n      context,\n      validateOptions({\n        validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n        options: {},\n      }),\n    );\n    await expect(\n      plugin.loadContent!(),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Docs version \"current\" has no docs! At least one doc should exist at \"docs\".\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs folder does not exist","suites":["empty/no docs website"],"updatePoint":{"line":230,"column":32},"line":230,"code":"  it('docs folder does not exist', async () => {\n    const context = await loadContext({siteDir});\n    await expect(\n      pluginContentDocs(\n        context,\n        validateOptions({\n          validate: normalizePluginOptions as Validate<Options, PluginOptions>,\n          options: {\n            path: 'path/does/not/exist',\n          },\n        }),\n      ),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"The docs folder does not exist for version \"current\". A docs folder is expected to be found at path/does/not/exist.\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"extendCli - docsVersion","suites":["simple website"],"updatePoint":{"line":266,"column":29},"line":266,"code":"  it('extendCli - docsVersion', async () => {\n    const {plugin, options, context} = await loadSite();\n    const mock = jest\n      .spyOn(cliDocs, 'cliDocsVersionCommand')\n      .mockImplementation(async () => {});\n    const cli = new commander.Command();\n    // @ts-expect-error: in actual usage, we pass the static commander instead\n    // of the new command\n    plugin.extendCli!(cli);\n    cli.parse(['node', 'test', 'docs:version', '1.0.0']);\n    expect(mock).toHaveBeenCalledTimes(1);\n    expect(mock).toHaveBeenCalledWith('1.0.0', options, context);\n    mock.mockRestore();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"getPathToWatch","suites":["simple website"],"updatePoint":{"line":281,"column":20},"line":281,"code":"  it('getPathToWatch', async () => {\n    const {siteDir, plugin} = await loadSite();\n\n    const pathToWatch = plugin.getPathsToWatch!();\n    const matchPattern = pathToWatch.map((filepath) =>\n      posixPath(path.relative(siteDir, filepath)),\n    );\n    expect(matchPattern).toMatchSnapshot();\n    expect(isMatch('docs/hello.md', matchPattern)).toBe(true);\n    expect(isMatch('docs/hello.mdx', matchPattern)).toBe(true);\n    expect(isMatch('docs/foo/bar.md', matchPattern)).toBe(true);\n    expect(isMatch('docs/hello.js', matchPattern)).toBe(false);\n    expect(isMatch('docs/super.mdl', matchPattern)).toBe(false);\n    expect(isMatch('docs/mdx', matchPattern)).toBe(false);\n    expect(isMatch('docs/headingAsTitle.md', matchPattern)).toBe(true);\n    expect(isMatch('sidebars.json', matchPattern)).toBe(true);\n    expect(isMatch('versioned_docs/hello.md', matchPattern)).toBe(false);\n    expect(isMatch('hello.md', matchPattern)).toBe(false);\n    expect(isMatch('super/docs/hello.md', matchPattern)).toBe(false);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"configureWebpack","suites":["simple website"],"updatePoint":{"line":302,"column":22},"line":302,"code":"  it('configureWebpack', async () => {\n    const {plugin} = await loadSite();\n\n    const content = await plugin.loadContent?.();\n\n    const config = applyConfigureWebpack(\n      plugin.configureWebpack as NonNullable<Plugin['configureWebpack']>,\n      {\n        entry: './src/index.js',\n        output: {\n          filename: 'main.js',\n          path: path.resolve(__dirname, 'dist'),\n        },\n      },\n      false,\n      undefined,\n      content,\n    );\n    const errors = webpack.validate(config);\n    expect(errors).toBeUndefined();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"content","suites":["simple website"],"updatePoint":{"line":324,"column":13},"line":324,"code":"  it('content', async () => {\n    const {plugin, pluginContentDir} = await loadSite();\n    const content = await plugin.loadContent!();\n    expect(content.loadedVersions).toHaveLength(1);\n    const [currentVersion] = content.loadedVersions;\n\n    expect(findDocById(currentVersion, 'foo/baz')).toMatchSnapshot();\n\n    expect(findDocById(currentVersion, 'hello')).toMatchSnapshot();\n\n    expect(getDocById(currentVersion, 'foo/bar')).toMatchSnapshot();\n\n    expect(currentVersion!.sidebars).toMatchSnapshot();\n\n    const {actions, utils} = createFakeActions(pluginContentDir);\n\n    await plugin.contentLoaded!({\n      content,\n      actions,\n      allContent: {},\n    });\n\n    utils.checkVersionMetadataPropCreated(currentVersion);\n\n    utils.expectSnapshot();\n\n    expect(utils.getGlobalData()).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"extendCli - docsVersion","suites":["versioned website"],"updatePoint":{"line":380,"column":29},"line":380,"code":"  it('extendCli - docsVersion', async () => {\n    const {plugin, context, options} = await loadSite();\n    const mock = jest\n      .spyOn(cliDocs, 'cliDocsVersionCommand')\n      .mockImplementation(async () => {});\n    const cli = new commander.Command();\n    // @ts-expect-error: in actual usage, we pass the static commander instead\n    // of the new command\n    plugin.extendCli!(cli);\n    cli.parse(['node', 'test', 'docs:version', '2.0.0']);\n    expect(mock).toHaveBeenCalledTimes(1);\n    expect(mock).toHaveBeenCalledWith('2.0.0', options, context);\n    mock.mockRestore();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"getPathToWatch","suites":["versioned website"],"updatePoint":{"line":395,"column":20},"line":395,"code":"  it('getPathToWatch', async () => {\n    const {siteDir, plugin} = await loadSite();\n    const pathToWatch = plugin.getPathsToWatch!();\n    const matchPattern = pathToWatch.map((filepath) =>\n      posixPath(path.relative(siteDir, filepath)),\n    );\n    expect(matchPattern).not.toEqual([]);\n    expect(matchPattern).toMatchSnapshot();\n    expect(isMatch('docs/hello.md', matchPattern)).toBe(true);\n    expect(isMatch('docs/hello.mdx', matchPattern)).toBe(true);\n    expect(isMatch('docs/foo/bar.md', matchPattern)).toBe(true);\n    expect(isMatch('sidebars.json', matchPattern)).toBe(true);\n    expect(isMatch('versioned_docs/version-1.0.0/hello.md', matchPattern)).toBe(\n      true,\n    );\n    expect(\n      isMatch('versioned_docs/version-1.0.0/foo/bar.md', matchPattern),\n    ).toBe(true);\n    expect(\n      isMatch('versioned_sidebars/version-1.0.0-sidebars.json', matchPattern),\n    ).toBe(true);\n\n    // Non existing version\n    expect(\n      isMatch('versioned_docs/version-2.0.0/foo/bar.md', matchPattern),\n    ).toBe(false);\n    expect(isMatch('versioned_docs/version-2.0.0/hello.md', matchPattern)).toBe(\n      false,\n    );\n    expect(\n      isMatch('versioned_sidebars/version-2.0.0-sidebars.json', matchPattern),\n    ).toBe(false);\n\n    expect(isMatch('docs/hello.js', matchPattern)).toBe(false);\n    expect(isMatch('docs/super.mdl', matchPattern)).toBe(false);\n    expect(isMatch('docs/mdx', matchPattern)).toBe(false);\n    expect(isMatch('hello.md', matchPattern)).toBe(false);\n    expect(isMatch('super/docs/hello.md', matchPattern)).toBe(false);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"content","suites":["versioned website"],"updatePoint":{"line":435,"column":13},"line":435,"code":"  it('content', async () => {\n    const {plugin, pluginContentDir} = await loadSite();\n    const content = await plugin.loadContent!();\n    expect(content.loadedVersions).toHaveLength(4);\n    const [currentVersion, version101, version100, versionWithSlugs] =\n      content.loadedVersions;\n\n    // foo/baz.md only exists in version -1.0.0\n    expect(findDocById(currentVersion, 'foo/baz')).toBeUndefined();\n    expect(findDocById(version101, 'foo/baz')).toBeUndefined();\n    expect(findDocById(versionWithSlugs, 'foo/baz')).toBeUndefined();\n\n    expect(getDocById(currentVersion, 'foo/bar')).toMatchSnapshot();\n    expect(getDocById(version101, 'foo/bar')).toMatchSnapshot();\n\n    expect(getDocById(currentVersion, 'hello')).toMatchSnapshot();\n    expect(getDocById(version101, 'hello')).toMatchSnapshot();\n    expect(getDocById(version100, 'foo/baz')).toMatchSnapshot();\n\n    expect(currentVersion!.sidebars).toMatchSnapshot(\n      'current version sidebars',\n    );\n    expect(version101!.sidebars).toMatchSnapshot('101 version sidebars');\n    expect(version100!.sidebars).toMatchSnapshot('100 version sidebars');\n    expect(versionWithSlugs!.sidebars).toMatchSnapshot(\n      'withSlugs version sidebars',\n    );\n\n    const {actions, utils} = createFakeActions(pluginContentDir);\n    await plugin.contentLoaded!({\n      content,\n      actions,\n      allContent: {},\n    });\n\n    utils.checkVersionMetadataPropCreated(currentVersion);\n    utils.checkVersionMetadataPropCreated(version101);\n    utils.checkVersionMetadataPropCreated(version100);\n    utils.checkVersionMetadataPropCreated(versionWithSlugs);\n\n    utils.expectSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"extendCli - docsVersion","suites":["versioned website (community)"],"updatePoint":{"line":509,"column":29},"line":509,"code":"  it('extendCli - docsVersion', async () => {\n    const {pluginId, plugin, options, context} = await loadSite();\n    const mock = jest\n      .spyOn(cliDocs, 'cliDocsVersionCommand')\n      .mockImplementation(async () => {});\n    const cli = new commander.Command();\n    // @ts-expect-error: in actual usage, we pass the static commander instead\n    // of the new command\n    plugin.extendCli!(cli);\n    cli.parse(['node', 'test', `docs:version:${pluginId}`, '2.0.0']);\n    expect(mock).toHaveBeenCalledTimes(1);\n    expect(mock).toHaveBeenCalledWith('2.0.0', options, context);\n    mock.mockRestore();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"getPathToWatch","suites":["versioned website (community)"],"updatePoint":{"line":524,"column":20},"line":524,"code":"  it('getPathToWatch', async () => {\n    const {siteDir, plugin} = await loadSite();\n    const pathToWatch = plugin.getPathsToWatch!();\n    const matchPattern = pathToWatch.map((filepath) =>\n      posixPath(path.relative(siteDir, filepath)),\n    );\n    expect(matchPattern).not.toEqual([]);\n    expect(matchPattern).toMatchSnapshot();\n    expect(isMatch('community/team.md', matchPattern)).toBe(true);\n    expect(\n      isMatch('community_versioned_docs/version-1.0.0/team.md', matchPattern),\n    ).toBe(true);\n\n    // Non existing version\n    expect(\n      isMatch('community_versioned_docs/version-2.0.0/team.md', matchPattern),\n    ).toBe(false);\n    expect(\n      isMatch(\n        'community_versioned_sidebars/version-2.0.0-sidebars.json',\n        matchPattern,\n      ),\n    ).toBe(false);\n\n    expect(isMatch('community/team.js', matchPattern)).toBe(false);\n    expect(\n      isMatch('community_versioned_docs/version-1.0.0/team.js', matchPattern),\n    ).toBe(false);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"content","suites":["versioned website (community)"],"updatePoint":{"line":554,"column":13},"line":554,"code":"  it('content', async () => {\n    const {plugin, pluginContentDir} = await loadSite();\n    const content = await plugin.loadContent!();\n    expect(content.loadedVersions).toHaveLength(2);\n    const [currentVersion, version100] = content.loadedVersions;\n\n    expect(getDocById(currentVersion, 'team')).toMatchSnapshot();\n    expect(getDocById(version100, 'team')).toMatchSnapshot();\n\n    expect(currentVersion!.sidebars).toMatchSnapshot(\n      'current version sidebars',\n    );\n    expect(version100!.sidebars).toMatchSnapshot('100 version sidebars');\n\n    const {actions, utils} = createFakeActions(pluginContentDir);\n    await plugin.contentLoaded!({\n      content,\n      actions,\n      allContent: {},\n    });\n\n    utils.checkVersionMetadataPropCreated(currentVersion);\n    utils.checkVersionMetadataPropCreated(version100);\n\n    utils.expectSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"label in sidebar.json is used","suites":["site with doc label"],"updatePoint":{"line":603,"column":35},"line":603,"code":"  it('label in sidebar.json is used', async () => {\n    const {content} = await loadSite();\n    const loadedVersion = content.loadedVersions[0]!;\n    const sidebarProps = toSidebarsProp(loadedVersion);\n\n    expect((sidebarProps.docs![0] as PropSidebarItemLink).label).toBe(\n      'Hello One',\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebar_label in doc has higher precedence over label in sidebar.json","suites":["site with doc label"],"updatePoint":{"line":613,"column":75},"line":613,"code":"  it('sidebar_label in doc has higher precedence over label in sidebar.json', async () => {\n    const {content} = await loadSite();\n    const loadedVersion = content.loadedVersions[0]!;\n    const sidebarProps = toSidebarsProp(loadedVersion);\n\n    expect((sidebarProps.docs![1] as PropSidebarItemLink).label).toBe(\n      'Hello 2 From Doc',\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebar is fully autogenerated","suites":["site with full autogenerated sidebar"],"updatePoint":{"line":647,"column":36},"line":647,"code":"  it('sidebar is fully autogenerated', async () => {\n    const {content} = await loadSite();\n    const version = content.loadedVersions[0]!;\n\n    expect(version.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs in fully generated sidebar have correct metadata","suites":["site with full autogenerated sidebar"],"updatePoint":{"line":654,"column":59},"line":654,"code":"  it('docs in fully generated sidebar have correct metadata', async () => {\n    const {content} = await loadSite();\n    const version = content.loadedVersions[0]!;\n\n    expect(getDocById(version, 'getting-started')).toMatchSnapshot();\n    expect(getDocById(version, 'installation')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide1')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide2')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide2.5')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide3')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide4')).toMatchSnapshot();\n    expect(getDocById(version, 'Guides/guide5')).toMatchSnapshot();\n    expect(getDocById(version, 'API/api-overview')).toMatchSnapshot();\n    expect(getDocById(version, 'API/Core APIs/Client API')).toMatchSnapshot();\n    expect(getDocById(version, 'API/Core APIs/Server API')).toMatchSnapshot();\n    expect(\n      getDocById(version, 'API/Extension APIs/Plugin API'),\n    ).toMatchSnapshot();\n    expect(\n      getDocById(version, 'API/Extension APIs/Theme API'),\n    ).toMatchSnapshot();\n    expect(getDocById(version, 'API/api-end')).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebar is partially autogenerated","suites":["site with partial autogenerated sidebars"],"updatePoint":{"line":708,"column":40},"line":708,"code":"  it('sidebar is partially autogenerated', async () => {\n    const {content} = await loadSite();\n    const version = content.loadedVersions[0]!;\n\n    expect(version.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"docs in partially generated sidebar have correct metadata","suites":["site with partial autogenerated sidebars"],"updatePoint":{"line":715,"column":63},"line":715,"code":"  it('docs in partially generated sidebar have correct metadata', async () => {\n    const {content} = await loadSite();\n    const version = content.loadedVersions[0]!;\n\n    // Only looking at the docs of the autogen sidebar, others metadata should\n    // not be affected\n\n    expect(getDocById(version, 'API/api-end')).toMatchSnapshot();\n    expect(getDocById(version, 'API/api-overview')).toMatchSnapshot();\n    expect(\n      getDocById(version, 'API/Extension APIs/Plugin API'),\n    ).toMatchSnapshot();\n    expect(\n      getDocById(version, 'API/Extension APIs/Theme API'),\n    ).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebar is partially autogenerated","suites":["site with partial autogenerated sidebars 2 (fix #4638)"],"updatePoint":{"line":764,"column":40},"line":764,"code":"  it('sidebar is partially autogenerated', async () => {\n    const {content} = await loadSite();\n    const version = content.loadedVersions[0]!;\n\n    expect(version.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebarItemsGenerator is called with appropriate data","suites":["site with custom sidebar items generator"],"updatePoint":{"line":794,"column":59},"line":794,"code":"  it('sidebarItemsGenerator is called with appropriate data', async () => {\n    const customSidebarItemsGeneratorMock = jest.fn(async () => []);\n    const {siteDir} = await loadSite(customSidebarItemsGeneratorMock);\n\n    const generatorArg = (\n      customSidebarItemsGeneratorMock.mock\n        .calls[0] as unknown as Parameters<SidebarItemsGeneratorOption>\n    )[0];\n\n    // Make test pass even if docs are in different order and paths are\n    // absolutes\n    function makeDeterministic(\n      arg: Parameters<SidebarItemsGeneratorOption>[0],\n    ): Parameters<SidebarItemsGeneratorOption>[0] {\n      return {\n        ...arg,\n        docs: _.orderBy(arg.docs, 'id'),\n        version: {\n          ...arg.version,\n          contentPath: path.relative(siteDir, arg.version.contentPath),\n        },\n      };\n    }\n\n    expect(makeDeterministic(generatorArg)).toMatchSnapshot();\n    expect(generatorArg.defaultSidebarItemsGenerator).toEqual(\n      DefaultSidebarItemsGenerator,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebar is autogenerated according to a custom sidebarItemsGenerator","suites":["site with custom sidebar items generator"],"updatePoint":{"line":824,"column":74},"line":824,"code":"  it('sidebar is autogenerated according to a custom sidebarItemsGenerator', async () => {\n    const customSidebarItemsGenerator: SidebarItemsGeneratorOption =\n      async () => [\n        {type: 'doc', id: 'API/api-overview'},\n        {type: 'doc', id: 'API/api-end'},\n      ];\n\n    const {content} = await loadSite(customSidebarItemsGenerator);\n    const version = content.loadedVersions[0];\n\n    expect(version!.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"sidebarItemsGenerator can wrap/enhance/sort/reverse the default sidebar generator","suites":["site with custom sidebar items generator"],"updatePoint":{"line":837,"column":87},"line":837,"code":"  it('sidebarItemsGenerator can wrap/enhance/sort/reverse the default sidebar generator', async () => {\n    function reverseSidebarItems(items: NormalizedSidebar): NormalizedSidebar {\n      const result: NormalizedSidebar = items.map((item) => {\n        if (item.type === 'category') {\n          return {...item, items: reverseSidebarItems(item.items)};\n        }\n        return item;\n      });\n      result.reverse();\n      return result;\n    }\n\n    const reversedSidebarItemsGenerator: SidebarItemsGeneratorOption = async ({\n      defaultSidebarItemsGenerator,\n      ...args\n    }) => {\n      const sidebarItems = await defaultSidebarItemsGenerator(args);\n      return reverseSidebarItems(sidebarItems);\n    };\n\n    const {content} = await loadSite(reversedSidebarItemsGenerator);\n    const version = content.loadedVersions[0]!;\n\n    expect(version.sidebars).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"existing test file in repository with Git timestamp","suites":["getFileLastUpdate"],"updatePoint":{"line":21,"column":57},"line":21,"code":"  it('existing test file in repository with Git timestamp', async () => {\n    const lastUpdateData = await getFileLastUpdate(existingFilePath);\n    expect(lastUpdateData).not.toBeNull();\n\n    const {author, timestamp} = lastUpdateData;\n    expect(author).not.toBeNull();\n    expect(typeof author).toBe('string');\n\n    expect(timestamp).not.toBeNull();\n    expect(typeof timestamp).toBe('number');\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"existing test file with spaces in path","suites":["getFileLastUpdate"],"updatePoint":{"line":33,"column":44},"line":33,"code":"  it('existing test file with spaces in path', async () => {\n    const filePathWithSpace = path.join(\n      __dirname,\n      '__fixtures__/simple-site/docs/doc with space.md',\n    );\n    const lastUpdateData = await getFileLastUpdate(filePathWithSpace);\n    expect(lastUpdateData).not.toBeNull();\n\n    const {author, timestamp} = lastUpdateData;\n    expect(author).not.toBeNull();\n    expect(typeof author).toBe('string');\n\n    expect(timestamp).not.toBeNull();\n    expect(typeof timestamp).toBe('number');\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"non-existing file","suites":["getFileLastUpdate"],"updatePoint":{"line":49,"column":23},"line":49,"code":"  it('non-existing file', async () => {\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    const nonExistingFileName = '.nonExisting';\n    const nonExistingFilePath = path.join(\n      __dirname,\n      '__fixtures__',\n      nonExistingFileName,\n    );\n    await expect(getFileLastUpdate(nonExistingFilePath)).resolves.toBeNull();\n    expect(consoleMock).toHaveBeenCalledTimes(1);\n    expect(consoleMock).toHaveBeenLastCalledWith(\n      expect.stringMatching(/because the file does not exist./),\n    );\n    await expect(getFileLastUpdate(null)).resolves.toBeNull();\n    await expect(getFileLastUpdate(undefined)).resolves.toBeNull();\n    consoleMock.mockRestore();\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"temporary created file that is not tracked by git","suites":["getFileLastUpdate"],"updatePoint":{"line":69,"column":55},"line":69,"code":"  it('temporary created file that is not tracked by git', async () => {\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    const {repoDir} = createTempRepo();\n    const tempFilePath = path.join(repoDir, 'file.md');\n    await fs.writeFile(tempFilePath, 'Lorem ipsum :)');\n    await expect(getFileLastUpdate(tempFilePath)).resolves.toBeNull();\n    expect(consoleMock).toHaveBeenCalledTimes(1);\n    expect(consoleMock).toHaveBeenLastCalledWith(\n      expect.stringMatching(/not tracked by git./),\n    );\n    await fs.unlink(tempFilePath);\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"multiple files not tracked by git","suites":["getFileLastUpdate"],"updatePoint":{"line":84,"column":39},"line":84,"code":"  it('multiple files not tracked by git', async () => {\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    const {repoDir} = createTempRepo();\n    const tempFilePath1 = path.join(repoDir, 'file1.md');\n    const tempFilePath2 = path.join(repoDir, 'file2.md');\n    await fs.writeFile(tempFilePath1, 'Lorem ipsum :)');\n    await fs.writeFile(tempFilePath2, 'Lorem ipsum :)');\n    await expect(getFileLastUpdate(tempFilePath1)).resolves.toBeNull();\n    await expect(getFileLastUpdate(tempFilePath2)).resolves.toBeNull();\n    expect(consoleMock).toHaveBeenCalledTimes(1);\n    expect(consoleMock).toHaveBeenLastCalledWith(\n      expect.stringMatching(/not tracked by git./),\n    );\n    await fs.unlink(tempFilePath1);\n    await fs.unlink(tempFilePath2);\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"git does not exist","suites":["getFileLastUpdate"],"updatePoint":{"line":103,"column":24},"line":103,"code":"  it('git does not exist', async () => {\n    const mock = jest.spyOn(shell, 'which').mockImplementationOnce(() => null);\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    const lastUpdateData = await getFileLastUpdate(existingFilePath);\n    expect(lastUpdateData).toBeNull();\n    expect(consoleMock).toHaveBeenLastCalledWith(\n      expect.stringMatching(\n        /.*\\[WARNING\\].* Sorry, the docs plugin last update options require Git\\..*/,\n      ),\n    );\n\n    consoleMock.mockRestore();\n    mock.mockRestore();\n  });","file":"lastUpdate.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"strips number prefix if present","suites":["stripNumberPrefix"],"updatePoint":{"line":72,"column":37},"line":72,"code":"  it('strips number prefix if present', () => {\n    expect(stripNumberPrefixDefault('1-My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('01-My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001-My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001 - My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001      -    My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('999      -        My Doc')).toBe('My Doc');\n    //\n    expect(stripNumberPrefixDefault('1---My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('01---My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001---My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001 --- My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001      ---    My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('999      ---        My Doc')).toBe(\n      'My Doc',\n    );\n    //\n    expect(stripNumberPrefixDefault('1___My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('01___My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001___My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001 ___ My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001      ___    My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('999      ___        My Doc')).toBe(\n      'My Doc',\n    );\n    //\n    expect(stripNumberPrefixDefault('1.My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('01.My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001.My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001 . My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('001      .    My Doc')).toBe('My Doc');\n    expect(stripNumberPrefixDefault('999      .       My Doc')).toBe('My Doc');\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"does not strip number prefix if pattern does not match","suites":["stripNumberPrefix"],"updatePoint":{"line":106,"column":60},"line":106,"code":"  it('does not strip number prefix if pattern does not match', () => {\n    IgnoredNumberPrefixPatterns.forEach((badPattern) => {\n      expect(stripNumberPrefixDefault(badPattern)).toEqual(badPattern);\n    });\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"strips number prefixes in paths","suites":["stripPathNumberPrefix"],"updatePoint":{"line":114,"column":37},"line":114,"code":"  it('strips number prefixes in paths', () => {\n    expect(\n      stripPathNumberPrefixes(\n        '0-MyRootFolder0/1 - MySubFolder1/2.  MyDeepFolder2/3 _MyDoc3',\n        DefaultNumberPrefixParser,\n      ),\n    ).toBe('MyRootFolder0/MySubFolder1/MyDeepFolder2/MyDoc3');\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"strips number prefixes in paths with custom parser","suites":["stripPathNumberPrefix"],"updatePoint":{"line":123,"column":56},"line":123,"code":"  it('strips number prefixes in paths with custom parser', () => {\n    function stripPathNumberPrefixCustom(str: string) {\n      return {\n        filename: str.substring(1, str.length),\n        numberPrefix: 0,\n      };\n    }\n\n    expect(\n      stripPathNumberPrefixes('aaaa/bbbb/cccc', stripPathNumberPrefixCustom),\n    ).toBe('aaa/bbb/ccc');\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"does not strip number prefixes in paths with disabled parser","suites":["stripPathNumberPrefix"],"updatePoint":{"line":136,"column":66},"line":136,"code":"  it('does not strip number prefixes in paths with disabled parser', () => {\n    expect(\n      stripPathNumberPrefixes(\n        '0-MyRootFolder0/1 - MySubFolder1/2.  MyDeepFolder2/3 _MyDoc3',\n        DisabledNumberPrefixParser,\n      ),\n    ).toBe('0-MyRootFolder0/1 - MySubFolder1/2.  MyDeepFolder2/3 _MyDoc3');\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"extracts number prefix if present","suites":["DefaultNumberPrefixParser"],"updatePoint":{"line":147,"column":39},"line":147,"code":"  it('extracts number prefix if present', () => {\n    expect(DefaultNumberPrefixParser('0-My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 0,\n    });\n    expect(DefaultNumberPrefixParser('1-My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 1,\n    });\n    expect(DefaultNumberPrefixParser('01-My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 1,\n    });\n    expect(DefaultNumberPrefixParser('001-My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 1,\n    });\n    expect(DefaultNumberPrefixParser('001 - My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 1,\n    });\n    expect(DefaultNumberPrefixParser('001      -    My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 1,\n    });\n    expect(DefaultNumberPrefixParser('999      -        My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 999,\n    });\n\n    expect(DefaultNumberPrefixParser('0046036 - My Doc')).toEqual({\n      filename: 'My Doc',\n      numberPrefix: 46036,\n    });\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"does not extract number prefix if pattern does not match","suites":["DefaultNumberPrefixParser"],"updatePoint":{"line":183,"column":62},"line":183,"code":"  it('does not extract number prefix if pattern does not match', () => {\n    IgnoredNumberPrefixPatterns.forEach((badPattern) => {\n      expect(DefaultNumberPrefixParser(badPattern)).toEqual({\n        filename: badPattern,\n        numberPrefix: undefined,\n      });\n    });\n  });","file":"numberPrefix.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"returns default options for undefined user options","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":38,"column":56},"line":38,"code":"  it('returns default options for undefined user options', () => {\n    expect(testValidate({})).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts correctly defined user options","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":42,"column":44},"line":42,"code":"  it('accepts correctly defined user options', () => {\n    const userOptions: Options = {\n      path: 'my-docs', // Path to data on filesystem, relative to site dir.\n      routeBasePath: 'my-docs', // URL Route.\n      tagsBasePath: 'tags', // URL Tags Route.\n      include: ['**/*.{md,mdx}'], // Extensions to include.\n      exclude: GlobExcludeDefault,\n      sidebarPath: 'my-sidebar', // Path to sidebar configuration for showing a list of markdown pages.\n      sidebarItemsGenerator: DefaultSidebarItemsGenerator,\n      numberPrefixParser: DefaultNumberPrefixParser,\n      docLayoutComponent: '@theme/DocPage',\n      docItemComponent: '@theme/DocItem',\n      docTagDocListComponent: '@theme/DocTagDocListPage',\n      docTagsListComponent: '@theme/DocTagsListPage',\n      docCategoryGeneratedIndexComponent:\n        '@theme/DocCategoryGeneratedIndexPage',\n      // @ts-expect-error: it seems to work in practice?\n      remarkPlugins: [markdownPluginsObjectStub],\n      rehypePlugins: [markdownPluginsFunctionStub],\n      beforeDefaultRehypePlugins: [],\n      beforeDefaultRemarkPlugins: [],\n      breadcrumbs: true,\n      showLastUpdateTime: true,\n      showLastUpdateAuthor: true,\n      admonitions: {},\n      includeCurrentVersion: false,\n      disableVersioning: true,\n      editCurrentVersion: true,\n      editLocalizedFiles: true,\n      versions: {\n        current: {\n          path: 'next',\n          label: 'next',\n        },\n        version1: {\n          path: 'hello',\n          label: 'world',\n        },\n      },\n      sidebarCollapsible: false,\n      sidebarCollapsed: false,\n    };\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n      remarkPlugins: [...userOptions.remarkPlugins!, expect.any(Array)],\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts correctly defined remark and rehype plugin options","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":91,"column":64},"line":91,"code":"  it('accepts correctly defined remark and rehype plugin options', () => {\n    const userOptions: Options = {\n      beforeDefaultRemarkPlugins: [],\n      beforeDefaultRehypePlugins: [markdownPluginsFunctionStub],\n      remarkPlugins: [[markdownPluginsFunctionStub, {option1: '42'}]],\n      rehypePlugins: [\n        // @ts-expect-error: it seems to work in practice\n        markdownPluginsObjectStub,\n        [markdownPluginsFunctionStub, {option1: '42'}],\n      ],\n    };\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n      remarkPlugins: [...userOptions.remarkPlugins!, expect.any(Array)],\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts admonitions false","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":109,"column":31},"line":109,"code":"  it('accepts admonitions false', () => {\n    const admonitionsFalse: Options = {\n      admonitions: false,\n    };\n    expect(testValidate(admonitionsFalse)).toEqual({\n      ...defaultOptions,\n      ...admonitionsFalse,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects admonitions true","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":119,"column":30},"line":119,"code":"  it('rejects admonitions true', () => {\n    const admonitionsTrue: Options = {\n      admonitions: true,\n    };\n    expect(() =>\n      testValidate(admonitionsTrue),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"admonitions\" contains an invalid value\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts numberPrefixParser function","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":130,"column":41},"line":130,"code":"  it('accepts numberPrefixParser function', () => {\n    function customNumberPrefixParser() {}\n    expect(\n      testValidate({\n        numberPrefixParser:\n          customNumberPrefixParser as unknown as Options['numberPrefixParser'],\n      }),\n    ).toEqual({\n      ...defaultOptions,\n      numberPrefixParser: customNumberPrefixParser,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts numberPrefixParser false","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":143,"column":38},"line":143,"code":"  it('accepts numberPrefixParser false', () => {\n    expect(testValidate({numberPrefixParser: false})).toEqual({\n      ...defaultOptions,\n      numberPrefixParser: DisabledNumberPrefixParser,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"accepts numberPrefixParser true","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":150,"column":37},"line":150,"code":"  it('accepts numberPrefixParser true', () => {\n    expect(testValidate({numberPrefixParser: true})).toEqual({\n      ...defaultOptions,\n      numberPrefixParser: DefaultNumberPrefixParser,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects invalid remark plugin options","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":157,"column":43},"line":157,"code":"  it('rejects invalid remark plugin options', () => {\n    expect(() =>\n      testValidate({\n        // @ts-expect-error: test\n        remarkPlugins: [[{option1: '42'}, markdownPluginsFunctionStub]],\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"\"remarkPlugins[0]\" does not look like a valid MDX plugin config. A plugin config entry should be one of:\n      - A tuple, like \\`[require(\"rehype-katex\"), { strict: false }]\\`, or\n      - A simple module, like \\`require(\"remark-math\")\\`\"\n    `);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects invalid rehype plugin options","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":170,"column":43},"line":170,"code":"  it('rejects invalid rehype plugin options', () => {\n    expect(() =>\n      testValidate({\n        rehypePlugins: [\n          // @ts-expect-error: test\n          [\n            markdownPluginsFunctionStub,\n            {option1: '42'},\n            markdownPluginsFunctionStub,\n          ],\n        ],\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"\"rehypePlugins[0]\" does not look like a valid MDX plugin config. A plugin config entry should be one of:\n      - A tuple, like \\`[require(\"rehype-katex\"), { strict: false }]\\`, or\n      - A simple module, like \\`require(\"remark-math\")\\`\"\n    `);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad path inputs","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":189,"column":29},"line":189,"code":"  it('rejects bad path inputs', () => {\n    // @ts-expect-error: test\n    expect(() => testValidate({path: 2})).toThrowErrorMatchingInlineSnapshot(\n      `\"\"path\" must be a string\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad include inputs","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":196,"column":32},"line":196,"code":"  it('rejects bad include inputs', () => {\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({include: '**/*.{md,mdx}'}),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"include\" must be an array\"`);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad showLastUpdateTime inputs","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":203,"column":43},"line":203,"code":"  it('rejects bad showLastUpdateTime inputs', () => {\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({showLastUpdateTime: 'true'}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"showLastUpdateTime\" must be a boolean\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad remarkPlugins input","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":212,"column":37},"line":212,"code":"  it('rejects bad remarkPlugins input', () => {\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({remarkPlugins: 'remark-math'}),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"remarkPlugins\" must be an array\"`);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad lastVersion","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":219,"column":29},"line":219,"code":"  it('rejects bad lastVersion', () => {\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({lastVersion: false}),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"lastVersion\" must be a string\"`);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"rejects bad versions","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":226,"column":26},"line":226,"code":"  it('rejects bad versions', () => {\n    expect(() =>\n      testValidate({\n        versions: {\n          current: {\n            // @ts-expect-error: test\n            hey: 3,\n          },\n\n          version1: {\n            path: 'hello',\n            label: 'world',\n          },\n        },\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"versions.current.hey\" is not allowed\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"handles sidebarCollapsed option inconsistencies","suites":["normalizeDocsPluginOptions"],"updatePoint":{"line":246,"column":53},"line":246,"code":"  it('handles sidebarCollapsed option inconsistencies', () => {\n    expect(\n      testValidate({\n        sidebarCollapsible: true,\n        sidebarCollapsed: undefined,\n      }).sidebarCollapsed,\n    ).toBe(true);\n\n    expect(\n      testValidate({\n        sidebarCollapsible: false,\n        sidebarCollapsed: undefined,\n      }).sidebarCollapsed,\n    ).toBe(false);\n\n    expect(\n      testValidate({\n        sidebarCollapsible: false,\n        sidebarCollapsed: true,\n      }).sidebarCollapsed,\n    ).toBe(false);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"works","suites":["toTagDocListProp"],"updatePoint":{"line":17,"column":11},"line":17,"code":"  it('works', () => {\n    const tag: Tag = {\n      label: 'tag1',\n      permalink: '/tag1',\n      docIds: ['id1', 'id3'],\n    };\n\n    const doc1 = {\n      id: 'id1',\n      title: 'ZZZ 1',\n      description: 'Description 1',\n      permalink: '/doc1',\n    } as Doc;\n    const doc2 = {\n      id: 'id2',\n      title: 'XXX 2',\n      description: 'Description 2',\n      permalink: '/doc2',\n    } as Doc;\n    const doc3 = {\n      id: 'id3',\n      title: 'AAA 3',\n      description: 'Description 3',\n      permalink: '/doc3',\n    } as Doc;\n    const doc4 = {\n      id: 'id4',\n      title: 'UUU 4',\n      description: 'Description 4',\n      permalink: '/doc4',\n    } as Doc;\n\n    const result = toTagDocListProp({\n      allTagsPath,\n      tag,\n      docs: [doc1, doc2, doc3, doc4],\n    });\n\n    expect(result).toEqual({\n      allTagsPath,\n      count: 2,\n      label: tag.label,\n      permalink: tag.permalink,\n      items: [doc3, doc1], // Docs sorted by title, ignore \"id5\" absence\n    });\n  });","file":"props.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"defaults to dirname/id","suites":["getSlug"],"updatePoint":{"line":11,"column":28},"line":11,"code":"  it('defaults to dirname/id', () => {\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/doc.md',\n        sourceDirName: '/dir',\n      }),\n    ).toBe('/dir/doc');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/doc.md',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/doc');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"handles conventional doc indexes","suites":["getSlug"],"updatePoint":{"line":28,"column":38},"line":28,"code":"  it('handles conventional doc indexes', () => {\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/index.md',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/inDEx.mdx',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/readme.md',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/reADMe.mdx',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/subdir.md',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/suBDir.mdx',\n        sourceDirName: '/dir/subdir',\n      }),\n    ).toBe('/dir/subdir/');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"ignores conventional doc index when explicit slug front matter is provided","suites":["getSlug"],"updatePoint":{"line":73,"column":80},"line":73,"code":"  it('ignores conventional doc index when explicit slug front matter is provided', () => {\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/dir/subdir/index.md',\n        sourceDirName: '/dir/subdir',\n        frontMatterSlug: '/my/frontMatterSlug',\n      }),\n    ).toBe('/my/frontMatterSlug');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"can strip dir number prefixes","suites":["getSlug"],"updatePoint":{"line":84,"column":35},"line":84,"code":"  it('can strip dir number prefixes', () => {\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/001-dir1/002-dir2/doc.md',\n        sourceDirName: '/001-dir1/002-dir2',\n        stripDirNumberPrefixes: true,\n      }),\n    ).toBe('/dir1/dir2/doc');\n    expect(\n      getSlug({\n        baseID: 'doc',\n        source: '@site/docs/001-dir1/002-dir2/doc.md',\n        sourceDirName: '/001-dir1/002-dir2',\n        stripDirNumberPrefixes: false,\n      }),\n    ).toBe('/001-dir1/002-dir2/doc');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"handles special chars in doc path","suites":["getSlug"],"updatePoint":{"line":104,"column":39},"line":104,"code":"  it('handles special chars in doc path', () => {\n    expect(\n      getSlug({\n        baseID: 'my dôc',\n        source: '@site/docs/dir with spâce/hey $hello/doc.md',\n        sourceDirName: '/dir with spâce/hey $hello',\n      }),\n    ).toBe('/dir with spâce/hey $hello/my dôc');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"throws for invalid routes","suites":["getSlug"],"updatePoint":{"line":114,"column":31},"line":114,"code":"  it('throws for invalid routes', () => {\n    expect(() =>\n      getSlug({\n        baseID: 'my dôc',\n        source: '@site/docs/dir with spâce/hey $hello/doc.md',\n        sourceDirName: '/dir with spâce/hey $hello',\n        frontMatterSlug: '//',\n      }),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"We couldn't compute a valid slug for document with ID \"my dôc\" in \"/dir with spâce/hey $hello\" directory.\n      The slug we computed looks invalid: //.\n      Maybe your slug front matter is incorrect or there are special characters in the file path?\n      By using front matter to set a custom slug, you should be able to fix this error:\n\n      ---\n      slug: /my/customDocPath\n      ---\n      \"\n    `);\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"handles current dir","suites":["getSlug"],"updatePoint":{"line":135,"column":25},"line":135,"code":"  it('handles current dir', () => {\n    expect(\n      getSlug({baseID: 'doc', source: '@site/docs/doc.md', sourceDirName: '.'}),\n    ).toBe('/doc');\n    expect(\n      getSlug({baseID: 'doc', source: '@site/docs/doc.md', sourceDirName: '/'}),\n    ).toBe('/doc');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"resolves absolute slug front matter","suites":["getSlug"],"updatePoint":{"line":144,"column":41},"line":144,"code":"  it('resolves absolute slug front matter', () => {\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/doc.md',\n        sourceDirName: '.',\n        frontMatterSlug: '/abc/def',\n      }),\n    ).toBe('/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/any/doc.md',\n        sourceDirName: './any',\n        frontMatterSlug: '/abc/def',\n      }),\n    ).toBe('/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/any/any/doc.md',\n        sourceDirName: './any/any',\n        frontMatterSlug: '/abc/def',\n      }),\n    ).toBe('/abc/def');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"resolves relative slug front matter","suites":["getSlug"],"updatePoint":{"line":171,"column":41},"line":171,"code":"  it('resolves relative slug front matter', () => {\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/doc.md',\n        sourceDirName: '.',\n        frontMatterSlug: 'abc/def',\n      }),\n    ).toBe('/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/doc.md',\n        sourceDirName: '/dir',\n        frontMatterSlug: 'abc/def',\n      }),\n    ).toBe('/dir/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/nonSlashedDir/doc.md',\n        sourceDirName: 'nonSlashedDir',\n        frontMatterSlug: 'abc/def',\n      }),\n    ).toBe('/nonSlashedDir/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/subdir/doc.md',\n        sourceDirName: 'dir/subdir',\n        frontMatterSlug: 'abc/def',\n      }),\n    ).toBe('/dir/subdir/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/doc.md',\n        sourceDirName: '/dir',\n        frontMatterSlug: './abc/def',\n      }),\n    ).toBe('/dir/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/doc.md',\n        sourceDirName: '/dir',\n        frontMatterSlug: './abc/../def',\n      }),\n    ).toBe('/dir/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/subdir/doc.md',\n        sourceDirName: '/dir/subdir',\n        frontMatterSlug: '../abc/def',\n      }),\n    ).toBe('/dir/abc/def');\n    expect(\n      getSlug({\n        baseID: 'any',\n        source: '@site/docs/dir/subdirDoc.md',\n        sourceDirName: '/dir/subdir',\n        frontMatterSlug: '../../../../../abc/../def',\n      }),\n    ).toBe('/def');\n  });","file":"slug.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"returns translation files","suites":["getLoadedContentTranslationFiles"],"updatePoint":{"line":149,"column":31},"line":149,"code":"  it('returns translation files', () => {\n    expect(getSampleTranslationFiles()).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"does not translate anything if translation files are untranslated","suites":["translateLoadedContent"],"updatePoint":{"line":155,"column":71},"line":155,"code":"  it('does not translate anything if translation files are untranslated', () => {\n    const translationFiles = getSampleTranslationFiles();\n    expect(\n      translateLoadedContent(SampleLoadedContent, translationFiles),\n    ).toEqual(SampleLoadedContent);\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"returns translated loaded content","suites":["translateLoadedContent"],"updatePoint":{"line":162,"column":39},"line":162,"code":"  it('returns translated loaded content', () => {\n    const translationFiles = getSampleTranslationFilesTranslated();\n    expect(\n      translateLoadedContent(SampleLoadedContent, translationFiles),\n    ).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-docs/src/__tests__"},{"name":"loads simple pages","suites":["docusaurus-plugin-content-pages"],"updatePoint":{"line":16,"column":24},"line":16,"code":"  it('loads simple pages', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const context = await loadContext({siteDir});\n    const plugin = pluginContentPages(\n      context,\n      validateOptions({\n        validate: normalizePluginOptions,\n        options: {\n          path: 'src/pages',\n        },\n      }),\n    );\n    const pagesMetadata = await plugin.loadContent!();\n\n    expect(pagesMetadata).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"loads simple pages with french translations","suites":["docusaurus-plugin-content-pages"],"updatePoint":{"line":33,"column":49},"line":33,"code":"  it('loads simple pages with french translations', async () => {\n    const siteDir = path.join(__dirname, '__fixtures__', 'website');\n    const context = await loadContext({siteDir});\n    const plugin = pluginContentPages(\n      {\n        ...context,\n        i18n: {\n          ...context.i18n,\n          currentLocale: 'fr',\n        },\n      },\n      validateOptions({\n        validate: normalizePluginOptions,\n        options: {\n          path: 'src/pages',\n        },\n      }),\n    );\n    const pagesMetadata = await plugin.loadContent!();\n\n    expect(pagesMetadata).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"returns default options for undefined user options","suites":["normalizePagesPluginOptions"],"updatePoint":{"line":22,"column":56},"line":22,"code":"  it('returns default options for undefined user options', () => {\n    expect(testValidate({})).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"fills in default options for partially defined user options","suites":["normalizePagesPluginOptions"],"updatePoint":{"line":26,"column":65},"line":26,"code":"  it('fills in default options for partially defined user options', () => {\n    expect(testValidate({path: 'src/foo'})).toEqual({\n      ...defaultOptions,\n      path: 'src/foo',\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"accepts correctly defined user options","suites":["normalizePagesPluginOptions"],"updatePoint":{"line":33,"column":44},"line":33,"code":"  it('accepts correctly defined user options', () => {\n    const userOptions = {\n      path: 'src/my-pages',\n      routeBasePath: 'my-pages',\n      include: ['**/*.{js,jsx,ts,tsx}'],\n      exclude: ['**/$*/'],\n    };\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"rejects bad path inputs","suites":["normalizePagesPluginOptions"],"updatePoint":{"line":46,"column":29},"line":46,"code":"  it('rejects bad path inputs', () => {\n    expect(() => {\n      testValidate({\n        // @ts-expect-error: bad attribute\n        path: 42,\n      });\n    }).toThrowErrorMatchingInlineSnapshot(`\"\"path\" must be a string\"`);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-content-pages/src/__tests__"},{"name":"simple site","suites":["createSitemap"],"updatePoint":{"line":15,"column":17},"line":15,"code":"  it('simple site', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n      } as DocusaurusConfig,\n      ['/', '/test'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n        filename: 'sitemap.xml',\n      },\n    );\n    expect(sitemap).toContain(\n      `<urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\" xmlns:news=\"http://www.google.com/schemas/sitemap-news/0.9\" xmlns:xhtml=\"http://www.w3.org/1999/xhtml\" xmlns:image=\"http://www.google.com/schemas/sitemap-image/1.1\" xmlns:video=\"http://www.google.com/schemas/sitemap-video/1.1\">`,\n    );\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"empty site","suites":["createSitemap"],"updatePoint":{"line":34,"column":16},"line":34,"code":"  it('empty site', () =>\n    expect(async () => {\n      // @ts-expect-error: test\n      await createSitemap({}, [], {}, {} as PluginOptions);\n    }).rejects.toThrow(\n      'URL in docusaurus.config.js cannot be empty/undefined.',\n    ));","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"exclusion of 404 page","suites":["createSitemap"],"updatePoint":{"line":42,"column":27},"line":42,"code":"  it('exclusion of 404 page', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n      } as DocusaurusConfig,\n      ['/', '/404.html', '/my-page'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n        filename: 'sitemap.xml',\n      },\n    );\n    expect(sitemap).not.toContain('404');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"excludes patterns configured to be ignored","suites":["createSitemap"],"updatePoint":{"line":59,"column":48},"line":59,"code":"  it('excludes patterns configured to be ignored', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n      } as DocusaurusConfig,\n      ['/', '/search/', '/tags/', '/search/foo', '/tags/foo/bar'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [\n          // Shallow ignore\n          '/search/',\n          // Deep ignore\n          '/tags/**',\n        ],\n        filename: 'sitemap.xml',\n      },\n    );\n    expect(sitemap).not.toContain('/search/</loc>');\n    expect(sitemap).toContain('/search/foo');\n    expect(sitemap).not.toContain('/tags');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"keep trailing slash unchanged","suites":["createSitemap"],"updatePoint":{"line":83,"column":35},"line":83,"code":"  it('keep trailing slash unchanged', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n        trailingSlash: undefined,\n      } as DocusaurusConfig,\n      ['/', '/test', '/nested/test', '/nested/test2/'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n        filename: 'sitemap.xml',\n      },\n    );\n\n    expect(sitemap).toContain('<loc>https://example.com/</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/test</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test2/</loc>');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"add trailing slash","suites":["createSitemap"],"updatePoint":{"line":105,"column":24},"line":105,"code":"  it('add trailing slash', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n        trailingSlash: true,\n      } as DocusaurusConfig,\n      ['/', '/test', '/nested/test', '/nested/test2/'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n        filename: 'sitemap.xml',\n      },\n    );\n\n    expect(sitemap).toContain('<loc>https://example.com/</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/test/</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test/</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test2/</loc>');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"remove trailing slash","suites":["createSitemap"],"updatePoint":{"line":127,"column":27},"line":127,"code":"  it('remove trailing slash', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n        trailingSlash: false,\n      } as DocusaurusConfig,\n      ['/', '/test', '/nested/test', '/nested/test2/'],\n      {},\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n        filename: 'sitemap.xml',\n      },\n    );\n\n    expect(sitemap).toContain('<loc>https://example.com/</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/test</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test</loc>');\n    expect(sitemap).toContain('<loc>https://example.com/nested/test2</loc>');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"filters pages with noindex","suites":["createSitemap"],"updatePoint":{"line":149,"column":32},"line":149,"code":"  it('filters pages with noindex', async () => {\n    const sitemap = await createSitemap(\n      {\n        url: 'https://example.com',\n        trailingSlash: false,\n      } as DocusaurusConfig,\n      ['/', '/noindex', '/nested/test', '/nested/test2/'],\n      {\n        '/noindex': {\n          meta: {\n            // @ts-expect-error: bad lib def\n            toComponent: () => [\n              React.createElement('meta', {name: 'robots', content: 'noindex'}),\n            ],\n          },\n        },\n      },\n      {\n        changefreq: EnumChangefreq.DAILY,\n        priority: 0.7,\n        ignorePatterns: [],\n      },\n    );\n\n    expect(sitemap).not.toContain('/noindex');\n  });","file":"createSitemap.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"returns default values for empty user options","suites":["validateOptions"],"updatePoint":{"line":31,"column":51},"line":31,"code":"  it('returns default values for empty user options', () => {\n    expect(testValidate({})).toEqual(defaultOptions);\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"accepts correctly defined user options","suites":["validateOptions"],"updatePoint":{"line":35,"column":44},"line":35,"code":"  it('accepts correctly defined user options', () => {\n    const userOptions: Options = {\n      changefreq: 'yearly' as EnumChangefreq,\n      priority: 0.9,\n      ignorePatterns: ['/search/**'],\n    };\n    expect(testValidate(userOptions)).toEqual({\n      ...defaultOptions,\n      ...userOptions,\n    });\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"rejects out-of-range priority inputs","suites":["validateOptions"],"updatePoint":{"line":47,"column":42},"line":47,"code":"  it('rejects out-of-range priority inputs', () => {\n    expect(() =>\n      testValidate({priority: 2}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"priority\" must be less than or equal to 1\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"rejects bad changefreq inputs","suites":["validateOptions"],"updatePoint":{"line":55,"column":35},"line":55,"code":"  it('rejects bad changefreq inputs', () => {\n    expect(() =>\n      testValidate({changefreq: 'annually' as EnumChangefreq}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"changefreq\" must be one of [daily, monthly, always, hourly, weekly, yearly, never]\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"rejects bad ignorePatterns inputs","suites":["validateOptions"],"updatePoint":{"line":63,"column":39},"line":63,"code":"  it('rejects bad ignorePatterns inputs', () => {\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({ignorePatterns: '/search'}),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"ignorePatterns\" must be an array\"`);\n    expect(() =>\n      // @ts-expect-error: test\n      testValidate({ignorePatterns: [/^\\/search/]}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"ignorePatterns[0]\" must be a string\"`,\n    );\n  });","file":"options.test.ts","skipped":false,"dir":"packages/docusaurus-plugin-sitemap/src/__tests__"},{"name":"works on installation file","suites":["npm2yarn plugin"],"updatePoint":{"line":23,"column":32},"line":23,"code":"  it('works on installation file', async () => {\n    const result = await processFixture('installation');\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"works on plugin file","suites":["npm2yarn plugin"],"updatePoint":{"line":29,"column":26},"line":29,"code":"  it('works on plugin file', async () => {\n    const result = await processFixture('plugin');\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"works with sync option","suites":["npm2yarn plugin"],"updatePoint":{"line":35,"column":28},"line":35,"code":"  it('works with sync option', async () => {\n    const result = await processFixture('plugin', {sync: true});\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"does not work when language is not set","suites":["npm2yarn plugin"],"updatePoint":{"line":41,"column":44},"line":41,"code":"  it('does not work when language is not set', async () => {\n    const result = await processFixture('syntax-not-properly-set');\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"does not re-import tabs components when already imported above","suites":["npm2yarn plugin"],"updatePoint":{"line":47,"column":68},"line":47,"code":"  it('does not re-import tabs components when already imported above', async () => {\n    const result = await processFixture('import-tabs-above');\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"does not re-import tabs components when already imported below","suites":["npm2yarn plugin"],"updatePoint":{"line":53,"column":68},"line":53,"code":"  it('does not re-import tabs components when already imported below', async () => {\n    const result = await processFixture('import-tabs-below');\n\n    expect(result).toMatchSnapshot();\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-remark-plugin-npm2yarn/src/__tests__"},{"name":"returns translation files matching snapshot","suites":["getTranslationFiles"],"updatePoint":{"line":81,"column":49},"line":81,"code":"  it('returns translation files matching snapshot', () => {\n    expect(getSampleTranslationFiles(ThemeConfigSample)).toMatchSnapshot();\n    expect(\n      getSampleTranslationFiles(ThemeConfigSampleSimpleFooter),\n    ).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"does not translate anything if translation files are untranslated","suites":["translateThemeConfig"],"updatePoint":{"line":90,"column":71},"line":90,"code":"  it('does not translate anything if translation files are untranslated', () => {\n    expect(\n      translateThemeConfig({\n        themeConfig: ThemeConfigSample,\n        translationFiles: getSampleTranslationFiles(ThemeConfigSample),\n      }),\n    ).toEqual(ThemeConfigSample);\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"returns translated themeConfig","suites":["translateThemeConfig"],"updatePoint":{"line":99,"column":36},"line":99,"code":"  it('returns translated themeConfig', () => {\n    expect(\n      translateThemeConfig({\n        themeConfig: ThemeConfigSample,\n        translationFiles:\n          getSampleTranslationFilesTranslated(ThemeConfigSample),\n      }),\n    ).toMatchSnapshot();\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"is verified for sample","suites":["getTranslationFiles and translateThemeConfig isomorphism"],"updatePoint":{"line":119,"column":28},"line":119,"code":"  it('is verified for sample', () => {\n    verifyIsomorphism(ThemeConfigSample);\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"is verified for sample with simple footer","suites":["getTranslationFiles and translateThemeConfig isomorphism"],"updatePoint":{"line":123,"column":47},"line":123,"code":"  it('is verified for sample with simple footer', () => {\n    verifyIsomorphism(ThemeConfigSampleSimpleFooter);\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"is verified for sample without footer","suites":["getTranslationFiles and translateThemeConfig isomorphism"],"updatePoint":{"line":129,"column":43},"line":129,"code":"  it('is verified for sample without footer', () => {\n    verifyIsomorphism({...ThemeConfigSample, footer: undefined});\n  });","file":"translations.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts valid theme config","suites":["themeConfig"],"updatePoint":{"line":33,"column":32},"line":33,"code":"  it('accepts valid theme config', () => {\n    const userConfig = {\n      prism: {\n        theme,\n        darkTheme,\n        defaultLanguage: 'javascript',\n        additionalLanguages: ['kotlin', 'java'],\n        magicComments: [\n          {\n            className: 'theme-code-block-highlighted-line',\n            line: 'highlight-next-line',\n            block: {start: 'highlight-start', end: 'highlight-end'},\n          },\n        ],\n      },\n      docs: {\n        versionPersistence: 'localStorage',\n        sidebar: {\n          hideable: true,\n          autoCollapseCategories: false,\n        },\n      },\n      announcementBar: {\n        id: 'supports',\n        content: 'pls support',\n        backgroundColor: '#fff',\n        textColor: '#000',\n        isCloseable: true,\n      },\n      image: 'img/docusaurus-soc.png',\n      navbar: {\n        style: 'primary',\n        hideOnScroll: true,\n        title: 'Docusaurus',\n        logo: {\n          alt: 'Docusaurus Logo',\n          src: 'img/docusaurus.svg',\n          srcDark: 'img/docusaurus_keytar.svg',\n        },\n        items: [\n          {\n            type: 'docsVersionDropdown',\n            position: 'left',\n            dropdownItemsBefore: [],\n            dropdownItemsAfter: [],\n          },\n          {\n            to: 'docs/next/support',\n            label: 'Community',\n            position: 'left',\n            activeBaseRegex: `docs/next/(support|team|resources)`,\n            'aria-label': 'Community',\n          },\n        ],\n      },\n      footer: {\n        style: 'dark',\n        links: [\n          {\n            title: 'Learn',\n            items: [\n              {\n                label: 'Introduction',\n                to: 'docs',\n              },\n            ],\n          },\n        ],\n        logo: {\n          alt: 'Facebook Open Source Logo',\n          src: 'img/oss_logo.png',\n          href: 'https://opensource.facebook.com',\n        },\n        copyright: `Copyright © ${new Date().getFullYear()} Facebook, Inc. Built with Docusaurus.`,\n      },\n      tableOfContents: {\n        minHeadingLevel: 2,\n        maxHeadingLevel: 5,\n      },\n    };\n    expect(testValidateThemeConfig(userConfig)).toEqual({\n      ...DEFAULT_CONFIG,\n      ...userConfig,\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects outdated sidebar options","suites":["themeConfig"],"updatePoint":{"line":119,"column":38},"line":119,"code":"  it('rejects outdated sidebar options', () => {\n    expect(() =>\n      testValidateThemeConfig({hideableSidebar: true}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"themeConfig.hideableSidebar has been moved to themeConfig.docs.sidebar.hideable.\"`,\n    );\n    expect(() =>\n      testValidateThemeConfig({autoCollapseSidebarCategories: true}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"themeConfig.autoCollapseSidebarCategories has been moved to themeConfig.docs.sidebar.autoCollapseCategories.\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows possible types of navbar items","suites":["themeConfig"],"updatePoint":{"line":132,"column":43},"line":132,"code":"  it('allows possible types of navbar items', () => {\n    const config = {\n      navbar: {\n        items: [\n          // Doc link\n          {\n            type: 'doc',\n            position: 'left',\n            docId: 'intro',\n            label: 'Introduction',\n          },\n          // Doc link with HTML as label\n          {\n            type: 'doc',\n            position: 'left',\n            docId: 'intro',\n            html: '<b>Introduction</b>',\n          },\n          // Regular link\n          {\n            to: '/guide/',\n            label: 'Guide',\n            position: 'left',\n            activeBaseRegex: '/guide/',\n          },\n          // Regular link with HTML as label\n          {\n            to: '/guide/',\n            html: '<b>Guide</b>',\n            position: 'left',\n            activeBaseRegex: '/guide/',\n          },\n          // Regular dropdown\n          {\n            label: 'Community',\n            position: 'right',\n            items: [\n              {\n                label: 'Facebook',\n                href: 'https://.facebook.com/',\n                target: '_self',\n              },\n              {\n                label: 'GitHub',\n                href: 'https://github.com/facebook/docusaurus',\n                className: 'github-link',\n              },\n            ],\n          },\n          // HTML-only\n          {\n            type: 'html',\n            position: 'right',\n            value: '<button>Give feedback</button>',\n          },\n          // Dropdown with label as HTML\n          {\n            type: 'dropdown',\n            label: 'Tools <sup>new</sup>',\n            position: 'left',\n            items: [\n              {\n                type: 'html',\n                value: '<b>Supported package managers</b>',\n              },\n              {\n                type: 'doc',\n                docId: 'npm',\n                label: 'npm',\n              },\n              {\n                to: '/yarn',\n                label: 'Yarn',\n              },\n            ],\n          },\n          // Doc version dropdown\n          {\n            type: 'docsVersionDropdown',\n            position: 'right',\n            dropdownActiveClassDisabled: true,\n            dropdownItemsBefore: [\n              {\n                href: 'https://www.npmjs.com/package/docusaurus?activeTab=versions',\n                label: 'Versions on npm',\n                className: 'npm-styled',\n                target: '_self',\n              },\n            ],\n            dropdownItemsAfter: [\n              {\n                type: 'html',\n                value: '<hr/>',\n              },\n              {\n                to: '/versions',\n                label: 'All versions',\n                className: 'all_vers',\n              },\n            ],\n          },\n          // External link with custom data attribute\n          {\n            href: 'https://github.com/facebook/docusaurus',\n            position: 'right',\n            className: 'header-github-link',\n            'aria-label': 'GitHub repository',\n          },\n          // Docs version\n          {\n            type: 'docsVersion',\n            position: 'left',\n            label: 'Current version',\n          },\n          // Search with className\n          {\n            type: 'search',\n            position: 'right',\n            className: 'search-bar-wrapper',\n          },\n        ],\n      },\n    };\n    expect(testValidateThemeConfig(config)).toEqual({\n      ...DEFAULT_CONFIG,\n      navbar: {\n        ...DEFAULT_CONFIG.navbar,\n        ...config.navbar,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accept \"custom-\" prefixed custom navbar item type","suites":["themeConfig"],"updatePoint":{"line":264,"column":55},"line":264,"code":"  it('accept \"custom-\" prefixed custom navbar item type', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            type: 'custom-x',\n            position: 'left',\n            xyz: 42,\n          },\n          {\n            label: 'Dropdown with custom item',\n            position: 'right',\n            items: [\n              {\n                label: 'Facebook',\n                href: 'https://.facebook.com/',\n                target: '_self',\n              },\n              {\n                type: 'custom-y',\n                any: new Date(),\n                prop: 42,\n                isAccepted: true,\n              },\n            ],\n          },\n        ],\n      },\n    };\n    expect(testValidateThemeConfig(config)).toEqual({\n      ...DEFAULT_CONFIG,\n      navbar: {\n        ...DEFAULT_CONFIG.navbar,\n        ...config.navbar,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects unknown navbar item type","suites":["themeConfig"],"updatePoint":{"line":302,"column":38},"line":302,"code":"  it('rejects unknown navbar item type', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            type: 'joke',\n            position: 'left',\n            label: 'hahaha',\n          },\n        ],\n      },\n    };\n    expect(() =>\n      testValidateThemeConfig(config),\n    ).toThrowErrorMatchingInlineSnapshot(`\"Bad navbar item type joke\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects nested dropdowns","suites":["themeConfig"],"updatePoint":{"line":319,"column":30},"line":319,"code":"  it('rejects nested dropdowns', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            position: 'left',\n            label: 'Nested',\n            items: [\n              {\n                label: 'Still a dropdown',\n                items: [\n                  {\n                    label: 'Should reject this',\n                    to: '/rejected',\n                  },\n                ],\n              },\n            ],\n          },\n        ],\n      },\n    };\n    expect(() =>\n      testValidateThemeConfig(config),\n    ).toThrowErrorMatchingInlineSnapshot(`\"Nested dropdowns are not allowed\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects nested dropdowns 2","suites":["themeConfig"],"updatePoint":{"line":346,"column":32},"line":346,"code":"  it('rejects nested dropdowns 2', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            position: 'left',\n            label: 'Nested',\n            items: [{type: 'docsVersionDropdown'}],\n          },\n        ],\n      },\n    };\n    expect(() =>\n      testValidateThemeConfig(config),\n    ).toThrowErrorMatchingInlineSnapshot(`\"Nested dropdowns are not allowed\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects position attribute within dropdown","suites":["themeConfig"],"updatePoint":{"line":363,"column":48},"line":363,"code":"  it('rejects position attribute within dropdown', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            position: 'left',\n            label: 'Dropdown',\n            items: [\n              {\n                label: 'Hi',\n                position: 'left',\n                to: '/link',\n              },\n            ],\n          },\n        ],\n      },\n    };\n    expect(() =>\n      testValidateThemeConfig(config),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"navbar.items[0].items[0].position\" is not allowed\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"gives friendly error when href and to coexist","suites":["themeConfig"],"updatePoint":{"line":388,"column":51},"line":388,"code":"  it('gives friendly error when href and to coexist', () => {\n    const config = {\n      navbar: {\n        items: [\n          {\n            position: 'left',\n            label: 'Nested',\n            to: '/link',\n            href: 'http://example.com/link',\n          },\n        ],\n      },\n    };\n    expect(() =>\n      testValidateThemeConfig(config),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"One and only one between \"to\" and \"href\" should be provided\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows empty alt tags for the logo image in the header","suites":["themeConfig"],"updatePoint":{"line":408,"column":60},"line":408,"code":"  it('allows empty alt tags for the logo image in the header', () => {\n    const altTagConfig = {\n      navbar: {\n        logo: {\n          alt: '',\n          src: '/arbitrary-logo.png',\n        },\n        hideOnScroll: false,\n      },\n    };\n    expect(testValidateThemeConfig(altTagConfig)).toEqual({\n      ...DEFAULT_CONFIG,\n      navbar: {\n        ...DEFAULT_CONFIG.navbar,\n        ...altTagConfig.navbar,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows empty alt tags for the logo image in the footer","suites":["themeConfig"],"updatePoint":{"line":427,"column":60},"line":427,"code":"  it('allows empty alt tags for the logo image in the footer', () => {\n    const partialConfig = {\n      footer: {\n        logo: {\n          alt: '',\n          src: '/arbitrary-logo.png',\n        },\n      },\n    };\n    const normalizedConfig = testValidateThemeConfig(partialConfig);\n\n    expect(normalizedConfig).toEqual({\n      ...normalizedConfig,\n      footer: {\n        ...normalizedConfig.footer,\n        ...partialConfig.footer,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows simple links in footer","suites":["themeConfig"],"updatePoint":{"line":447,"column":35},"line":447,"code":"  it('allows simple links in footer', () => {\n    const partialConfig = {\n      footer: {\n        links: [\n          {\n            label: 'Privacy',\n            href: 'https://opensource.facebook.com/legal/privacy/',\n          },\n          {\n            label: 'Terms',\n            href: 'https://opensource.facebook.com/legal/terms/',\n          },\n          {\n            label: 'Data Policy',\n            href: 'https://opensource.facebook.com/legal/data-policy/',\n          },\n          {\n            label: 'Cookie Policy',\n            href: 'https://opensource.facebook.com/legal/cookie-policy/',\n          },\n        ],\n      },\n    };\n    const normalizedConfig = testValidateThemeConfig(partialConfig);\n\n    expect(normalizedConfig).toEqual({\n      ...normalizedConfig,\n      footer: {\n        ...normalizedConfig.footer,\n        ...partialConfig.footer,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows footer column with no title","suites":["themeConfig"],"updatePoint":{"line":481,"column":40},"line":481,"code":"  it('allows footer column with no title', () => {\n    const partialConfig = {\n      footer: {\n        links: [\n          {\n            items: [\n              {\n                label: 'Data Policy',\n                href: 'https://opensource.facebook.com/legal/data-policy/',\n              },\n              {\n                label: 'Cookie Policy',\n                href: 'https://opensource.facebook.com/legal/cookie-policy/',\n              },\n            ],\n          },\n        ],\n      },\n    };\n    const normalizedConfig = testValidateThemeConfig(partialConfig);\n\n    expect(normalizedConfig).toEqual({\n      ...normalizedConfig,\n      footer: {\n        ...normalizedConfig.footer,\n        ...partialConfig.footer,\n        links: [\n          {\n            title: null, // Default value is important to distinguish simple footer from multi-column footer\n            items: partialConfig.footer.links[0]!.items,\n          },\n        ],\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects mix of simple and multi-column links in footer","suites":["themeConfig"],"updatePoint":{"line":517,"column":60},"line":517,"code":"  it('rejects mix of simple and multi-column links in footer', () => {\n    const partialConfig = {\n      footer: {\n        links: [\n          {\n            title: 'Learn',\n            items: [\n              {\n                label: 'Introduction',\n                to: 'docs',\n              },\n            ],\n          },\n          {\n            label: 'Privacy',\n            href: 'https://opensource.facebook.com/legal/privacy/',\n          },\n        ],\n      },\n    };\n\n    expect(() =>\n      testValidateThemeConfig(partialConfig),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"The footer must be either simple or multi-column, and not a mix of the two. See: https://docusaurus.io/docs/api/themes/configuration#footer-links\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"allows width and height specification for logo","suites":["themeConfig"],"updatePoint":{"line":545,"column":52},"line":545,"code":"  it('allows width and height specification for logo', () => {\n    const altTagConfig = {\n      navbar: {\n        logo: {\n          alt: '',\n          src: '/arbitrary-logo.png',\n          srcDark: '/arbitrary-dark-logo.png',\n          width: '20px',\n          height: '20%',\n        },\n      },\n    };\n    expect(testValidateThemeConfig(altTagConfig)).toEqual({\n      ...DEFAULT_CONFIG,\n      navbar: {\n        ...DEFAULT_CONFIG.navbar,\n        ...altTagConfig.navbar,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts a range of magic comments","suites":["themeConfig","prism config"],"updatePoint":{"line":567,"column":41},"line":567,"code":"    it('accepts a range of magic comments', () => {\n      const prismConfig = {\n        prism: {\n          additionalLanguages: ['kotlin', 'java'],\n          theme: darkTheme,\n          magicComments: [],\n        },\n      };\n      expect(testValidateThemeConfig(prismConfig)).toEqual({\n        ...DEFAULT_CONFIG,\n        ...prismConfig,\n      });\n      const prismConfig2 = {\n        prism: {\n          additionalLanguages: [],\n          theme: darkTheme,\n          magicComments: [\n            {\n              className: 'a',\n              line: 'a-next-line',\n            },\n          ],\n        },\n      };\n      expect(testValidateThemeConfig(prismConfig2)).toEqual({\n        ...DEFAULT_CONFIG,\n        ...prismConfig2,\n      });\n      const prismConfig3 = {\n        prism: {\n          additionalLanguages: [],\n          theme: darkTheme,\n          magicComments: [\n            {\n              className: 'a',\n              block: {start: 'a-start', end: 'a-end'},\n            },\n          ],\n        },\n      };\n      expect(testValidateThemeConfig(prismConfig3)).toEqual({\n        ...DEFAULT_CONFIG,\n        ...prismConfig3,\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects incomplete magic comments","suites":["themeConfig","prism config"],"updatePoint":{"line":613,"column":41},"line":613,"code":"    it('rejects incomplete magic comments', () => {\n      expect(() =>\n        testValidateThemeConfig({\n          prism: {\n            magicComments: [{className: 'a'}],\n          },\n        }),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"prism.magicComments[0]\" must contain at least one of [line, block]\"`,\n      );\n      expect(() =>\n        testValidateThemeConfig({\n          prism: {\n            magicComments: [{className: 'a', block: {start: 'start'}}],\n          },\n        }),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"prism.magicComments[0].block.end\" is required\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts customCss undefined","suites":["themeConfig","customCss config"],"updatePoint":{"line":636,"column":35},"line":636,"code":"    it('accepts customCss undefined', () => {\n      testOk({\n        customCss: undefined,\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts customCss string","suites":["themeConfig","customCss config"],"updatePoint":{"line":642,"column":32},"line":642,"code":"    it('accepts customCss string', () => {\n      testOk({\n        customCss: './path/to/cssFile.css',\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts customCss string array","suites":["themeConfig","customCss config"],"updatePoint":{"line":648,"column":38},"line":648,"code":"    it('accepts customCss string array', () => {\n      testOk({\n        customCss: ['./path/to/cssFile.css', './path/to/cssFile2.css'],\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects customCss number","suites":["themeConfig","customCss config"],"updatePoint":{"line":654,"column":32},"line":654,"code":"    it('rejects customCss number', () => {\n      expect(() =>\n        testValidateThemeConfig({\n          customCss: 42,\n        }),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"customCss\" must be one of [array, string]\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"switch config","suites":["themeConfig","color mode config"],"updatePoint":{"line":669,"column":21},"line":669,"code":"    it('switch config', () => {\n      const colorMode = {\n        switchConfig: {\n          darkIcon: '🌙',\n        },\n      };\n      expect(() =>\n        testValidateThemeConfig({colorMode}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"colorMode.switchConfig is deprecated. If you want to customize the icons for light and dark mode, swizzle IconLightMode, IconDarkMode, or ColorModeToggle instead.\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"max config","suites":["themeConfig","color mode config"],"updatePoint":{"line":682,"column":18},"line":682,"code":"    it('max config', () => {\n      const colorMode: ThemeConfig['colorMode'] = {\n        defaultMode: 'dark',\n        disableSwitch: false,\n        respectPrefersColorScheme: true,\n      };\n      expect(testValidateThemeConfig({colorMode})).toEqual({\n        ...DEFAULT_CONFIG,\n        colorMode: withDefaultValues(colorMode),\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"undefined config","suites":["themeConfig","color mode config"],"updatePoint":{"line":694,"column":24},"line":694,"code":"    it('undefined config', () => {\n      const colorMode = undefined;\n      expect(testValidateThemeConfig({colorMode})).toEqual({\n        ...DEFAULT_CONFIG,\n        colorMode: withDefaultValues(colorMode),\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"empty config","suites":["themeConfig","color mode config"],"updatePoint":{"line":702,"column":20},"line":702,"code":"    it('empty config', () => {\n      const colorMode = {};\n      expect(testValidateThemeConfig({colorMode})).toEqual({\n        ...DEFAULT_CONFIG,\n        colorMode: {\n          ...DEFAULT_CONFIG.colorMode,\n          ...colorMode,\n        },\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts undefined","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":715,"column":25},"line":715,"code":"    it('accepts undefined', () => {\n      const tableOfContents = undefined;\n      expect(testValidateThemeConfig({tableOfContents})).toEqual({\n        ...DEFAULT_CONFIG,\n        tableOfContents: {\n          minHeadingLevel: DEFAULT_CONFIG.tableOfContents.minHeadingLevel,\n          maxHeadingLevel: DEFAULT_CONFIG.tableOfContents.maxHeadingLevel,\n        },\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts empty","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":726,"column":21},"line":726,"code":"    it('accepts empty', () => {\n      const tableOfContents = {};\n      expect(testValidateThemeConfig({tableOfContents})).toEqual({\n        ...DEFAULT_CONFIG,\n        tableOfContents: {\n          minHeadingLevel: DEFAULT_CONFIG.tableOfContents.minHeadingLevel,\n          maxHeadingLevel: DEFAULT_CONFIG.tableOfContents.maxHeadingLevel,\n        },\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts min","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":737,"column":19},"line":737,"code":"    it('accepts min', () => {\n      const tableOfContents = {\n        minHeadingLevel: 3,\n      };\n      expect(testValidateThemeConfig({tableOfContents})).toEqual({\n        ...DEFAULT_CONFIG,\n        tableOfContents: {\n          minHeadingLevel: 3,\n          maxHeadingLevel: DEFAULT_CONFIG.tableOfContents.maxHeadingLevel,\n        },\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"accepts max","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":750,"column":19},"line":750,"code":"    it('accepts max', () => {\n      const tableOfContents = {\n        maxHeadingLevel: 5,\n      };\n      expect(testValidateThemeConfig({tableOfContents})).toEqual({\n        ...DEFAULT_CONFIG,\n        tableOfContents: {\n          minHeadingLevel: DEFAULT_CONFIG.tableOfContents.minHeadingLevel,\n          maxHeadingLevel: 5,\n        },\n      });\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects min 2.5","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":763,"column":23},"line":763,"code":"    it('rejects min 2.5', () => {\n      const tableOfContents = {\n        minHeadingLevel: 2.5,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.minHeadingLevel\" must be an integer\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects max 2.5","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":774,"column":23},"line":774,"code":"    it('rejects max 2.5', () => {\n      const tableOfContents = {\n        maxHeadingLevel: 2.5,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.maxHeadingLevel\" must be an integer\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects min 1","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":785,"column":21},"line":785,"code":"    it('rejects min 1', () => {\n      const tableOfContents = {\n        minHeadingLevel: 1,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.minHeadingLevel\" must be greater than or equal to 2\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects min 7","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":796,"column":21},"line":796,"code":"    it('rejects min 7', () => {\n      const tableOfContents = {\n        minHeadingLevel: 7,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.minHeadingLevel\" must be less than or equal to ref:maxHeadingLevel\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects max 1","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":807,"column":21},"line":807,"code":"    it('rejects max 1', () => {\n      const tableOfContents = {\n        maxHeadingLevel: 1,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.maxHeadingLevel\" must be greater than or equal to 2\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects max 7","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":818,"column":21},"line":818,"code":"    it('rejects max 7', () => {\n      const tableOfContents = {\n        maxHeadingLevel: 7,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.maxHeadingLevel\" must be less than or equal to 6\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"rejects min 5 + max 3","suites":["themeConfig","tableOfContents"],"updatePoint":{"line":829,"column":29},"line":829,"code":"    it('rejects min 5 + max 3', () => {\n      const tableOfContents = {\n        minHeadingLevel: 5,\n        maxHeadingLevel: 3,\n      };\n      expect(() =>\n        testValidateThemeConfig({tableOfContents}),\n      ).toThrowErrorMatchingInlineSnapshot(\n        `\"\"tableOfContents.minHeadingLevel\" must be less than or equal to ref:maxHeadingLevel\"`,\n      );\n    });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-classic/src/__tests__"},{"name":"undefined config","suites":["validateThemeConfig"],"updatePoint":{"line":29,"column":22},"line":29,"code":"  it('undefined config', () => {\n    const liveCodeBlock = undefined;\n    expect(testValidateThemeConfig({liveCodeBlock})).toEqual({\n      liveCodeBlock: {\n        ...DEFAULT_CONFIG,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"nonexistent config","suites":["validateThemeConfig"],"updatePoint":{"line":38,"column":24},"line":38,"code":"  it('nonexistent config', () => {\n    expect(testValidateThemeConfig({})).toEqual({\n      liveCodeBlock: {\n        ...DEFAULT_CONFIG,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"empty config","suites":["validateThemeConfig"],"updatePoint":{"line":46,"column":18},"line":46,"code":"  it('empty config', () => {\n    const liveCodeBlock = {};\n    expect(testValidateThemeConfig({liveCodeBlock})).toEqual({\n      liveCodeBlock: {\n        ...DEFAULT_CONFIG,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"playgroundPosition top","suites":["validateThemeConfig"],"updatePoint":{"line":55,"column":28},"line":55,"code":"  it('playgroundPosition top', () => {\n    const liveCodeBlock = {\n      playgroundPosition: 'top',\n    };\n    expect(testValidateThemeConfig({liveCodeBlock})).toEqual({\n      liveCodeBlock: {\n        ...DEFAULT_CONFIG,\n        ...liveCodeBlock,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"playgroundPosition bottom","suites":["validateThemeConfig"],"updatePoint":{"line":67,"column":31},"line":67,"code":"  it('playgroundPosition bottom', () => {\n    const liveCodeBlock = {\n      playgroundPosition: 'bottom',\n    };\n    expect(testValidateThemeConfig({liveCodeBlock})).toEqual({\n      liveCodeBlock: {\n        ...DEFAULT_CONFIG,\n        ...liveCodeBlock,\n      },\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"playgroundPosition invalid string","suites":["validateThemeConfig"],"updatePoint":{"line":79,"column":39},"line":79,"code":"  it('playgroundPosition invalid string', () => {\n    const liveCodeBlock = {playgroundPosition: 'invalid'};\n    expect(() =>\n      testValidateThemeConfig({liveCodeBlock}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"liveCodeBlock.playgroundPosition\" must be one of [top, bottom]\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"playgroundPosition invalid boolean","suites":["validateThemeConfig"],"updatePoint":{"line":87,"column":40},"line":87,"code":"  it('playgroundPosition invalid boolean', () => {\n    const liveCodeBlock = {playgroundPosition: true};\n    expect(() =>\n      testValidateThemeConfig({liveCodeBlock}),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"\"liveCodeBlock.playgroundPosition\" must be one of [top, bottom]\"`,\n    );\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-live-codeblock/src/__tests__"},{"name":"minimal config","suites":["validateThemeConfig"],"updatePoint":{"line":32,"column":20,"index":646},"line":32,"code":"  it('minimal config', () => {\n    const algolia = {\n      indexName: 'index',\n      apiKey: 'apiKey',\n      appId: 'BH4D9OD16A'\n    };\n    expect(testValidateThemeConfig({\n      algolia\n    })).toEqual({\n      algolia: { ...DEFAULT_CONFIG,\n        ...algolia\n      }\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"unknown attributes","suites":["validateThemeConfig"],"updatePoint":{"line":46,"column":24,"index":932},"line":46,"code":"  it('unknown attributes', () => {\n    const algolia = {\n      indexName: 'index',\n      apiKey: 'apiKey',\n      unknownKey: 'unknownKey',\n      appId: 'BH4D9OD16A'\n    };\n    expect(testValidateThemeConfig({\n      algolia\n    })).toEqual({\n      algolia: { ...DEFAULT_CONFIG,\n        ...algolia\n      }\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"undefined config","suites":["validateThemeConfig"],"updatePoint":{"line":61,"column":22,"index":1248},"line":61,"code":"  it('undefined config', () => {\n    const algolia = undefined;\n    expect(() => testValidateThemeConfig({\n      algolia\n    })).toThrowErrorMatchingInlineSnapshot(`\"\"themeConfig.algolia\" is required\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"undefined config 2","suites":["validateThemeConfig"],"updatePoint":{"line":67,"column":24,"index":1460},"line":67,"code":"  it('undefined config 2', () => {\n    expect(() => testValidateThemeConfig({})).toThrowErrorMatchingInlineSnapshot(`\"\"themeConfig.algolia\" is required\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"missing indexName config","suites":["validateThemeConfig"],"updatePoint":{"line":70,"column":30,"index":1628},"line":70,"code":"  it('missing indexName config', () => {\n    const algolia = {\n      apiKey: 'apiKey',\n      appId: 'BH4D9OD16A'\n    };\n    expect(() => testValidateThemeConfig({\n      algolia\n    })).toThrowErrorMatchingInlineSnapshot(`\"\"algolia.indexName\" is required\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"missing apiKey config","suites":["validateThemeConfig"],"updatePoint":{"line":79,"column":27,"index":1889},"line":79,"code":"  it('missing apiKey config', () => {\n    const algolia = {\n      indexName: 'indexName',\n      appId: 'BH4D9OD16A'\n    };\n    expect(() => testValidateThemeConfig({\n      algolia\n    })).toThrowErrorMatchingInlineSnapshot(`\"\"algolia.apiKey\" is required\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"missing appId config","suites":["validateThemeConfig"],"updatePoint":{"line":88,"column":26,"index":2152},"line":88,"code":"  it('missing appId config', () => {\n    const algolia = {\n      indexName: 'indexName',\n      apiKey: 'apiKey'\n    };\n    expect(() => testValidateThemeConfig({\n      algolia\n    })).toThrowErrorMatchingInlineSnapshot(`\"\"algolia.appId\" is required. If you haven't migrated to the new DocSearch infra, please refer to the blog post for instructions: https://docusaurus.io/blog/2021/11/21/algolia-docsearch-migration\"`);\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"contextualSearch config","suites":["validateThemeConfig"],"updatePoint":{"line":97,"column":29,"index":2581},"line":97,"code":"  it('contextualSearch config', () => {\n    const algolia = {\n      appId: 'BH4D9OD16A',\n      indexName: 'index',\n      apiKey: 'apiKey',\n      contextualSearch: true\n    };\n    expect(testValidateThemeConfig({\n      algolia\n    })).toEqual({\n      algolia: { ...DEFAULT_CONFIG,\n        ...algolia\n      }\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"externalUrlRegex config","suites":["validateThemeConfig"],"updatePoint":{"line":112,"column":29,"index":2902},"line":112,"code":"  it('externalUrlRegex config', () => {\n    const algolia = {\n      appId: 'BH4D9OD16A',\n      indexName: 'index',\n      apiKey: 'apiKey',\n      externalUrlRegex: 'http://external-domain.com'\n    };\n    expect(testValidateThemeConfig({\n      algolia\n    })).toEqual({\n      algolia: { ...DEFAULT_CONFIG,\n        ...algolia\n      }\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"searchParameters.facetFilters search config","suites":["validateThemeConfig"],"updatePoint":{"line":127,"column":49,"index":3267},"line":127,"code":"  it('searchParameters.facetFilters search config', () => {\n    const algolia = {\n      appId: 'BH4D9OD16A',\n      indexName: 'index',\n      apiKey: 'apiKey',\n      searchParameters: {\n        facetFilters: ['version:1.0']\n      }\n    };\n    expect(testValidateThemeConfig({\n      algolia\n    })).toEqual({\n      algolia: { ...DEFAULT_CONFIG,\n        ...algolia\n      }\n    });\n  });","file":"validateThemeConfig.test.ts","skipped":false,"dir":"packages/docusaurus-theme-search-algolia/src/__tests__"},{"name":"returns appropriate locale lists","suites":["codeTranslationLocalesToTry"],"updatePoint":{"line":16,"column":38},"line":16,"code":"  it('returns appropriate locale lists', () => {\n    expect(codeTranslationLocalesToTry('fr')).toEqual([\n      'fr',\n      'fr-FR',\n      'fr-Latn',\n      'fr',\n    ]);\n    expect(codeTranslationLocalesToTry('fr-FR')).toEqual([\n      'fr-FR',\n      'fr-FR',\n      'fr-Latn',\n      'fr',\n    ]);\n    // Note: \"pt\" is expanded into \"pt-BR\", not \"pt-PT\", as \"pt-BR\" is more\n    // widely used! See https://github.com/facebook/docusaurus/pull/4536#issuecomment-810088783\n    expect(codeTranslationLocalesToTry('pt')).toEqual([\n      'pt',\n      'pt-BR',\n      'pt-Latn',\n      'pt',\n    ]);\n    expect(codeTranslationLocalesToTry('pt-BR')).toEqual([\n      'pt-BR',\n      'pt-BR',\n      'pt-Latn',\n      'pt',\n    ]);\n    expect(codeTranslationLocalesToTry('pt-PT')).toEqual([\n      'pt-PT',\n      'pt-PT',\n      'pt-Latn',\n      'pt',\n    ]);\n    expect(codeTranslationLocalesToTry('zh')).toEqual([\n      'zh',\n      'zh-CN',\n      'zh-Hans',\n      'zh',\n    ]);\n    expect(codeTranslationLocalesToTry('zh-cn')).toEqual([\n      'zh-cn',\n      'zh-CN',\n      'zh-Hans',\n      'zh',\n    ]);\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for empty locale","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":78,"column":22},"line":78,"code":"  it('for empty locale', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        name: 'default',\n        locale: '',\n        dirPath,\n      }),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"First argument to Intl.Locale constructor can't be empty or missing\"`,\n    );\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for nonexistent locale","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":90,"column":28},"line":90,"code":"  it('for nonexistent locale', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'es',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual({});\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for fr but bad folder","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":100,"column":27},"line":100,"code":"  it('for fr but bad folder', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'fr',\n        dirPath: __dirname,\n        name,\n      }),\n    ).resolves.toEqual({});\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for fr","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":110,"column":12},"line":110,"code":"  it('for fr', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'fr',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual(await readAsJSON('fr'));\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for fr-FR","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":120,"column":15},"line":120,"code":"  it('for fr-FR', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'fr-FR',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual(await readAsJSON('fr-FR'));\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for en","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":130,"column":12},"line":130,"code":"  it('for en', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'en',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual(await readAsJSON('en'));\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for en-US","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":140,"column":15},"line":140,"code":"  it('for en-US', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'en-US',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual(await readAsJSON('en'));\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"for en-WHATEVER","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":150,"column":21},"line":150,"code":"  it('for en-WHATEVER', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'en-WHATEVER',\n        dirPath,\n        name,\n      }),\n    ).resolves.toEqual(await readAsJSON('en'));\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"default locale","suites":["readDefaultCodeTranslationMessages"],"updatePoint":{"line":160,"column":20},"line":160,"code":"  it('default locale', async () => {\n    await expect(\n      readDefaultCodeTranslationMessages({\n        locale: 'zh',\n        name: 'plugin-pwa',\n      }),\n    ).resolves.toEqual({\n      'theme.PwaReloadPopup.closeButtonAriaLabel': '关闭',\n      'theme.PwaReloadPopup.info': '有可用的新版本',\n      'theme.PwaReloadPopup.refreshButtonText': '刷新',\n    });\n  });","file":"index.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"throws with invalid syntax","suites":["extractThemeCodeMessages"],"updatePoint":{"line":12,"column":32},"line":12,"code":"  it('throws with invalid syntax', async () => {\n    await expect(() =>\n      extractThemeCodeMessages([path.join(__dirname, '__fixtures__/theme')]),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(`\n            \"\n            Please make sure all theme translations are static!\n            Some warnings were found!\n\n            Translate content could not be extracted. It has to be a static string and use optional but static props, like <Translate id=\"my-id\" description=\"my-description\">text</Translate>.\n            File: packages/docusaurus-theme-translations/src/__tests__/__fixtures__/theme/index.js at line 4\n            Full code: <Translate>{index}</Translate>\n            \"\n          `);\n  });","file":"utils.test.ts","skipped":false,"dir":"packages/docusaurus-theme-translations/src/__tests__"},{"name":"applies to empty","suites":["applyTrailingSlash"],"updatePoint":{"line":20,"column":22},"line":20,"code":"  it('applies to empty', () => {\n    expect(applyTrailingSlash('', params(true))).toBe('/');\n    expect(applyTrailingSlash('', params(false))).toBe('');\n    expect(applyTrailingSlash('', params(undefined))).toBe('');\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"does not apply to /","suites":["applyTrailingSlash"],"updatePoint":{"line":26,"column":25},"line":26,"code":"  it('does not apply to /', () => {\n    expect(applyTrailingSlash('/', params(true))).toBe('/');\n    expect(applyTrailingSlash('/', params(false))).toBe('/');\n    expect(applyTrailingSlash('/', params(undefined))).toBe('/');\n\n    expect(applyTrailingSlash('/?query#anchor', params(true))).toBe(\n      '/?query#anchor',\n    );\n    expect(applyTrailingSlash('/?query#anchor', params(false))).toBe(\n      '/?query#anchor',\n    );\n    expect(applyTrailingSlash('/?query#anchor', params(undefined))).toBe(\n      '/?query#anchor',\n    );\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"does not apply to /baseUrl/","suites":["applyTrailingSlash"],"updatePoint":{"line":42,"column":33},"line":42,"code":"  it('does not apply to /baseUrl/', () => {\n    const baseUrl = '/baseUrl/';\n    expect(applyTrailingSlash('/baseUrl/', params(true, baseUrl))).toBe(\n      '/baseUrl/',\n    );\n    expect(applyTrailingSlash('/baseUrl/', params(false, baseUrl))).toBe(\n      '/baseUrl/',\n    );\n    expect(applyTrailingSlash('/baseUrl/', params(undefined, baseUrl))).toBe(\n      '/baseUrl/',\n    );\n\n    expect(\n      applyTrailingSlash('/baseUrl/?query#anchor', params(true, baseUrl)),\n    ).toBe('/baseUrl/?query#anchor');\n    expect(\n      applyTrailingSlash('/baseUrl/?query#anchor', params(false, baseUrl)),\n    ).toBe('/baseUrl/?query#anchor');\n    expect(\n      applyTrailingSlash('/baseUrl/?query#anchor', params(undefined, baseUrl)),\n    ).toBe('/baseUrl/?query#anchor');\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"does not apply to #anchor links","suites":["applyTrailingSlash"],"updatePoint":{"line":65,"column":37},"line":65,"code":"  it('does not apply to #anchor links', () => {\n    expect(applyTrailingSlash('#', params(true))).toBe('#');\n    expect(applyTrailingSlash('#', params(false))).toBe('#');\n    expect(applyTrailingSlash('#', params(undefined))).toBe('#');\n    expect(applyTrailingSlash('#anchor', params(true))).toBe('#anchor');\n    expect(applyTrailingSlash('#anchor', params(false))).toBe('#anchor');\n    expect(applyTrailingSlash('#anchor', params(undefined))).toBe('#anchor');\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"applies to simple paths","suites":["applyTrailingSlash"],"updatePoint":{"line":74,"column":29},"line":74,"code":"  it('applies to simple paths', () => {\n    expect(applyTrailingSlash('abc', params(true))).toBe('abc/');\n    expect(applyTrailingSlash('abc', params(false))).toBe('abc');\n    expect(applyTrailingSlash('abc', params(undefined))).toBe('abc');\n    expect(applyTrailingSlash('abc/', params(true))).toBe('abc/');\n    expect(applyTrailingSlash('abc/', params(false))).toBe('abc');\n    expect(applyTrailingSlash('abc/', params(undefined))).toBe('abc/');\n    expect(applyTrailingSlash('/abc', params(true))).toBe('/abc/');\n    expect(applyTrailingSlash('/abc', params(false))).toBe('/abc');\n    expect(applyTrailingSlash('/abc', params(undefined))).toBe('/abc');\n    expect(applyTrailingSlash('/abc/', params(true))).toBe('/abc/');\n    expect(applyTrailingSlash('/abc/', params(false))).toBe('/abc');\n    expect(applyTrailingSlash('/abc/', params(undefined))).toBe('/abc/');\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"applies to path with #anchor","suites":["applyTrailingSlash"],"updatePoint":{"line":89,"column":34},"line":89,"code":"  it('applies to path with #anchor', () => {\n    expect(applyTrailingSlash('/abc#anchor', params(true))).toBe(\n      '/abc/#anchor',\n    );\n    expect(applyTrailingSlash('/abc#anchor', params(false))).toBe(\n      '/abc#anchor',\n    );\n    expect(applyTrailingSlash('/abc#anchor', params(undefined))).toBe(\n      '/abc#anchor',\n    );\n    expect(applyTrailingSlash('/abc/#anchor', params(true))).toBe(\n      '/abc/#anchor',\n    );\n    expect(applyTrailingSlash('/abc/#anchor', params(false))).toBe(\n      '/abc#anchor',\n    );\n    expect(applyTrailingSlash('/abc/#anchor', params(undefined))).toBe(\n      '/abc/#anchor',\n    );\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"applies to path with ?search","suites":["applyTrailingSlash"],"updatePoint":{"line":110,"column":34},"line":110,"code":"  it('applies to path with ?search', () => {\n    expect(applyTrailingSlash('/abc?search', params(true))).toBe(\n      '/abc/?search',\n    );\n    expect(applyTrailingSlash('/abc?search', params(false))).toBe(\n      '/abc?search',\n    );\n    expect(applyTrailingSlash('/abc?search', params(undefined))).toBe(\n      '/abc?search',\n    );\n    expect(applyTrailingSlash('/abc/?search', params(true))).toBe(\n      '/abc/?search',\n    );\n    expect(applyTrailingSlash('/abc/?search', params(false))).toBe(\n      '/abc?search',\n    );\n    expect(applyTrailingSlash('/abc/?search', params(undefined))).toBe(\n      '/abc/?search',\n    );\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"applies to path with ?search#anchor","suites":["applyTrailingSlash"],"updatePoint":{"line":131,"column":41},"line":131,"code":"  it('applies to path with ?search#anchor', () => {\n    expect(applyTrailingSlash('/abc?search#anchor', params(true))).toBe(\n      '/abc/?search#anchor',\n    );\n    expect(applyTrailingSlash('/abc?search#anchor', params(false))).toBe(\n      '/abc?search#anchor',\n    );\n    expect(applyTrailingSlash('/abc?search#anchor', params(undefined))).toBe(\n      '/abc?search#anchor',\n    );\n    expect(applyTrailingSlash('/abc/?search#anchor', params(true))).toBe(\n      '/abc/?search#anchor',\n    );\n    expect(applyTrailingSlash('/abc/?search#anchor', params(false))).toBe(\n      '/abc?search#anchor',\n    );\n    expect(applyTrailingSlash('/abc/?search#anchor', params(undefined))).toBe(\n      '/abc/?search#anchor',\n    );\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"applies to fully qualified urls","suites":["applyTrailingSlash"],"updatePoint":{"line":152,"column":37},"line":152,"code":"  it('applies to fully qualified urls', () => {\n    expect(\n      applyTrailingSlash('https://xyz.com/abc?search#anchor', params(true)),\n    ).toBe('https://xyz.com/abc/?search#anchor');\n    expect(\n      applyTrailingSlash('https://xyz.com/abc?search#anchor', params(false)),\n    ).toBe('https://xyz.com/abc?search#anchor');\n    expect(\n      applyTrailingSlash(\n        'https://xyz.com/abc?search#anchor',\n        params(undefined),\n      ),\n    ).toBe('https://xyz.com/abc?search#anchor');\n    expect(\n      applyTrailingSlash('https://xyz.com/abc/?search#anchor', params(true)),\n    ).toBe('https://xyz.com/abc/?search#anchor');\n    expect(\n      applyTrailingSlash('https://xyz.com/abc/?search#anchor', params(false)),\n    ).toBe('https://xyz.com/abc?search#anchor');\n    expect(\n      applyTrailingSlash(\n        'https://xyz.com/abc/?search#anchor',\n        params(undefined),\n      ),\n    ).toBe('https://xyz.com/abc/?search#anchor');\n  });","file":"applyTrailingSlash.test.ts","skipped":false,"dir":"packages/docusaurus-utils-common/src/__tests__"},{"name":"pluginIdSchema","suites":["validation schemas"],"updatePoint":{"line":65,"column":20},"line":65,"code":"  it('pluginIdSchema', () => {\n    const {testOK, testFail} = createTestHelpers({\n      schema: PluginIdSchema,\n      defaultValue: 'default',\n    });\n\n    testOK(undefined);\n    testOK('docs');\n    testOK('default');\n    testOK('plugin-id_with-simple-special-chars');\n    testOK('doc1');\n\n    testFail('/docs');\n    testFail('docs/');\n    testFail('do/cs');\n    testFail('do cs');\n    testFail(null);\n    testFail(3);\n    testFail(true);\n    testFail([]);\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"admonitionsSchema","suites":["validation schemas"],"updatePoint":{"line":87,"column":23},"line":87,"code":"  it('admonitionsSchema', () => {\n    const {testOK, testFail} = createTestHelpers({\n      schema: AdmonitionsSchema,\n      defaultValue: {},\n    });\n\n    testOK(undefined);\n    testOK({});\n    testOK({attr: 'val'});\n\n    testFail(null);\n    testFail(3);\n    testFail(true);\n    testFail([]);\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"remarkPluginsSchema","suites":["validation schemas"],"updatePoint":{"line":103,"column":25},"line":103,"code":"  it('remarkPluginsSchema', () => {\n    testMarkdownPluginSchemas(RemarkPluginsSchema);\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"rehypePluginsSchema","suites":["validation schemas"],"updatePoint":{"line":107,"column":25},"line":107,"code":"  it('rehypePluginsSchema', () => {\n    testMarkdownPluginSchemas(RehypePluginsSchema);\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"uRISchema","suites":["validation schemas"],"updatePoint":{"line":111,"column":15},"line":111,"code":"  it('uRISchema', () => {\n    const {testFail, testOK} = createTestHelpers({schema: URISchema});\n\n    const validURL = 'https://docusaurus.io';\n    const doubleHash = 'https://docusaurus.io#github#/:';\n    const invalidURL = 'spaces are invalid in a URL';\n    const relativeURL = 'relativeURL';\n    const relativeURLWithParent = '../relativeURLWithParent';\n    const urlFromIssue = 'https://riot.im/app/#/room/#ligo-public:matrix.org';\n    testOK(validURL);\n    testOK(doubleHash);\n    testFail(invalidURL);\n    testOK(relativeURL);\n    testOK(relativeURLWithParent);\n    testOK(urlFromIssue);\n\n    const protocolRelativeUrl1 = '//docusaurus.io/path';\n    const protocolRelativeUrl2 = '//docusaurus.io/docs/doc1#hash';\n    testOK(protocolRelativeUrl1);\n    testOK(protocolRelativeUrl2);\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"pathnameSchema","suites":["validation schemas"],"updatePoint":{"line":133,"column":20},"line":133,"code":"  it('pathnameSchema', () => {\n    const {testFail, testOK} = createTestHelpers({schema: PathnameSchema});\n\n    testOK('/foo');\n    testFail('foo');\n    testFail('https://github.com/foo');\n  });","file":"validationSchemas.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"always adds an \"id\" field","suites":["normalizePluginOptions"],"updatePoint":{"line":18,"column":31},"line":18,"code":"  it('always adds an \"id\" field', () => {\n    const options = {id: 'a'};\n    expect(\n      normalizePluginOptions(\n        // \"Malicious\" schema that tries to forbid \"id\"\n        Joi.object({id: Joi.any().forbidden()}),\n        options,\n      ),\n    ).toEqual(options);\n    expect(\n      normalizePluginOptions(Joi.object({foo: Joi.string()}), undefined),\n    ).toEqual({id: 'default'});\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"normalizes plugin options","suites":["normalizePluginOptions"],"updatePoint":{"line":32,"column":31},"line":32,"code":"  it('normalizes plugin options', () => {\n    const options = {};\n    expect(\n      normalizePluginOptions(\n        Joi.object({foo: Joi.string().default('a')}),\n        options,\n      ),\n    ).toEqual({foo: 'a', id: 'default'});\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"throws for invalid options","suites":["normalizePluginOptions"],"updatePoint":{"line":42,"column":32},"line":42,"code":"  it('throws for invalid options', () => {\n    const options = {foo: 1};\n    expect(() =>\n      normalizePluginOptions(Joi.object<object>({foo: Joi.string()}), options),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"foo\" must be a string\"`);\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"warns","suites":["normalizePluginOptions"],"updatePoint":{"line":49,"column":11},"line":49,"code":"  it('warns', () => {\n    const options = {foo: 'a'};\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    expect(\n      normalizePluginOptions(\n        Joi.object({foo: Joi.string().warning('deprecated', {})}).messages({\n          deprecated: '{#label} deprecated',\n        }),\n        options,\n      ),\n    ).toEqual({foo: 'a', id: 'default'});\n    expect(consoleMock).toBeCalledWith(\n      expect.stringMatching(/\"foo\" deprecated/),\n    );\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"always allows unknown attributes","suites":["normalizeThemeConfig"],"updatePoint":{"line":69,"column":38},"line":69,"code":"  it('always allows unknown attributes', () => {\n    const themeConfig = {foo: 'a', bar: 1};\n    expect(\n      normalizeThemeConfig(\n        // \"Malicious\" schema that tries to forbid extra properties\n        Joi.object({foo: Joi.string()}).unknown(false),\n        themeConfig,\n      ),\n    ).toEqual(themeConfig);\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"normalizes theme config","suites":["normalizeThemeConfig"],"updatePoint":{"line":80,"column":29},"line":80,"code":"  it('normalizes theme config', () => {\n    const themeConfig = {bar: 1};\n    expect(\n      normalizeThemeConfig(\n        Joi.object({foo: Joi.string().default('a')}),\n        themeConfig,\n      ),\n    ).toEqual({bar: 1, foo: 'a'});\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"throws for invalid options","suites":["normalizeThemeConfig"],"updatePoint":{"line":90,"column":32},"line":90,"code":"  it('throws for invalid options', () => {\n    const themeConfig = {foo: 1, bar: 1};\n    expect(() =>\n      normalizeThemeConfig(\n        Joi.object<object>({foo: Joi.string()}),\n        themeConfig,\n      ),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"foo\" must be a string\"`);\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"warns","suites":["normalizeThemeConfig"],"updatePoint":{"line":100,"column":11},"line":100,"code":"  it('warns', () => {\n    const themeConfig = {foo: 'a', bar: 1};\n    const consoleMock = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    expect(\n      normalizeThemeConfig(\n        Joi.object({foo: Joi.string().warning('deprecated', {})}).messages({\n          deprecated: '{#label} deprecated',\n        }),\n        themeConfig,\n      ),\n    ).toEqual(themeConfig);\n    expect(consoleMock).toBeCalledWith(\n      expect.stringMatching(/\"foo\" deprecated/),\n    );\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"accepts good values","suites":["validateFrontMatter"],"updatePoint":{"line":120,"column":25},"line":120,"code":"  it('accepts good values', () => {\n    const schema = Joi.object<{test: string}>({\n      test: Joi.string(),\n    });\n    const frontMatter = {\n      test: 'hello',\n    };\n    expect(validateFrontMatter(frontMatter, schema)).toEqual(frontMatter);\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"rejects bad values","suites":["validateFrontMatter"],"updatePoint":{"line":130,"column":24},"line":130,"code":"  it('rejects bad values', () => {\n    const consoleError = jest\n      .spyOn(console, 'error')\n      .mockImplementation(() => {});\n    const schema = Joi.object<{test: string}>({\n      test: Joi.string(),\n    });\n    const frontMatter = {\n      test: true,\n    };\n    expect(() =>\n      validateFrontMatter(frontMatter, schema),\n    ).toThrowErrorMatchingInlineSnapshot(`\"\"test\" must be a string\"`);\n    expect(consoleError).toHaveBeenCalledWith(\n      expect.stringContaining('The following front matter'),\n    );\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"does not convert simple values","suites":["validateFrontMatter"],"updatePoint":{"line":148,"column":36},"line":148,"code":"  it('does not convert simple values', () => {\n    const schema = Joi.object({\n      test: JoiFrontMatter.string(),\n    });\n    const frontMatter = {\n      test: 'foo',\n      tags: ['foo', 'bar'],\n    };\n    expect(validateFrontMatter(frontMatter, schema)).toEqual(frontMatter);\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"converts number values to string when string schema","suites":["validateFrontMatter"],"updatePoint":{"line":162,"column":57},"line":162,"code":"  it('converts number values to string when string schema', () => {\n    const schema = Joi.object<{test: string}>({\n      test: JoiFrontMatter.string(),\n    });\n    const frontMatter = {\n      test: 42,\n    };\n    expect(validateFrontMatter(frontMatter, schema)).toEqual({test: '42'});\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"converts date values when string schema","suites":["validateFrontMatter"],"updatePoint":{"line":175,"column":45},"line":175,"code":"  it('converts date values when string schema', () => {\n    const schema = Joi.object<{test: string}>({\n      test: JoiFrontMatter.string(),\n    });\n    const date = new Date();\n    const frontMatter = {\n      test: date,\n    };\n    expect(validateFrontMatter(frontMatter, schema)).toEqual({\n      test: date.toString(),\n    });\n  });","file":"validationUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils-validation/src/__tests__"},{"name":"getDataFilePath returns localized Yml path in priority","suites":["getDataFilePath"],"updatePoint":{"line":25,"column":60},"line":25,"code":"  it('getDataFilePath returns localized Yml path in priority', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.yml',\n        contentPaths: {\n          contentPathLocalized: contentPathYml1,\n          contentPath: contentPathYml2,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathYml1, 'authors.yml'));\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.yml',\n        contentPaths: {\n          contentPathLocalized: contentPathYml2,\n          contentPath: contentPathYml1,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathYml2, 'authors.yml'));\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"getDataFilePath returns localized Json path in priority","suites":["getDataFilePath"],"updatePoint":{"line":46,"column":61},"line":46,"code":"  it('getDataFilePath returns localized Json path in priority', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.json',\n        contentPaths: {\n          contentPathLocalized: contentPathJson1,\n          contentPath: contentPathJson2,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathJson1, 'authors.json'));\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.json',\n        contentPaths: {\n          contentPathLocalized: contentPathJson2,\n          contentPath: contentPathJson1,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathJson2, 'authors.json'));\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"getDataFilePath returns unlocalized Yml path as fallback","suites":["getDataFilePath"],"updatePoint":{"line":67,"column":62},"line":67,"code":"  it('getDataFilePath returns unlocalized Yml path as fallback', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.yml',\n        contentPaths: {\n          contentPathLocalized: contentPathEmpty,\n          contentPath: contentPathYml2,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathYml2, 'authors.yml'));\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"getDataFilePath returns unlocalized Json path as fallback","suites":["getDataFilePath"],"updatePoint":{"line":79,"column":63},"line":79,"code":"  it('getDataFilePath returns unlocalized Json path as fallback', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.json',\n        contentPaths: {\n          contentPathLocalized: contentPathEmpty,\n          contentPath: contentPathJson1,\n        },\n      }),\n    ).resolves.toEqual(path.join(contentPathJson1, 'authors.json'));\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"getDataFilePath can return undefined (file not found)","suites":["getDataFilePath"],"updatePoint":{"line":91,"column":59},"line":91,"code":"  it('getDataFilePath can return undefined (file not found)', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.json',\n        contentPaths: {\n          contentPathLocalized: contentPathEmpty,\n          contentPath: contentPathYml1,\n        },\n      }),\n    ).resolves.toBeUndefined();\n    await expect(\n      getDataFilePath({\n        filePath: 'authors.yml',\n        contentPaths: {\n          contentPathLocalized: contentPathEmpty,\n          contentPath: contentPathJson1,\n        },\n      }),\n    ).resolves.toBeUndefined();\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"getDataFilePath can return nested path","suites":["getDataFilePath"],"updatePoint":{"line":112,"column":44},"line":112,"code":"  it('getDataFilePath can return nested path', async () => {\n    await expect(\n      getDataFilePath({\n        filePath: 'sub/folder/authors.yml',\n        contentPaths: {\n          contentPathLocalized: contentPathEmpty,\n          contentPath: contentPathNestedYml,\n        },\n      }),\n    ).resolves.toEqual(\n      path.join(contentPathNestedYml, 'sub/folder/authors.yml'),\n    );\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns undefined for nonexistent file","suites":["getDataFileData"],"updatePoint":{"line":146,"column":44},"line":146,"code":"  it('returns undefined for nonexistent file', async () => {\n    await expect(readDataFile('nonexistent.yml')).resolves.toBeUndefined();\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"read valid yml author file","suites":["getDataFileData"],"updatePoint":{"line":150,"column":32},"line":150,"code":"  it('read valid yml author file', async () => {\n    await expect(readDataFile('valid.yml')).resolves.toEqual({a: 1});\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"read valid json author file","suites":["getDataFileData"],"updatePoint":{"line":154,"column":33},"line":154,"code":"  it('read valid json author file', async () => {\n    await expect(readDataFile('valid.json')).resolves.toEqual({a: 1});\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"fail to read invalid yml","suites":["getDataFileData"],"updatePoint":{"line":158,"column":30},"line":158,"code":"  it('fail to read invalid yml', async () => {\n    await expect(\n      readDataFile('bad.yml'),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(`\"Nope\"`);\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"fail to read invalid json","suites":["getDataFileData"],"updatePoint":{"line":164,"column":31},"line":164,"code":"  it('fail to read invalid json', async () => {\n    await expect(\n      readDataFile('bad.json'),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(`\"Nope\"`);\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"find appropriate folder","suites":["findFolderContainingFile"],"updatePoint":{"line":172,"column":29},"line":172,"code":"  it('find appropriate folder', async () => {\n    await expect(\n      findFolderContainingFile(\n        ['/foo', '/baz', __dirname, '/bar'],\n        'dataFileUtils.test.ts',\n      ),\n    ).resolves.toEqual(__dirname);\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"return undefined if no folder contain such file","suites":["findFolderContainingFile"],"updatePoint":{"line":181,"column":53},"line":181,"code":"  it('return undefined if no folder contain such file', async () => {\n    await expect(\n      findFolderContainingFile(['/foo', '/bar', '/baz'], 'index.test.ts'),\n    ).resolves.toBeUndefined();\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"get appropriate folder","suites":["getFolderContainingFile"],"updatePoint":{"line":189,"column":28},"line":189,"code":"  it('get appropriate folder', async () => {\n    await expect(\n      getFolderContainingFile(\n        ['/foo', '/baz', __dirname, '/bar'],\n        'dataFileUtils.test.ts',\n      ),\n    ).resolves.toEqual(__dirname);\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throw if no folder contain such file","suites":["getFolderContainingFile"],"updatePoint":{"line":198,"column":42},"line":198,"code":"  it('throw if no folder contain such file', async () => {\n    await expect(\n      getFolderContainingFile(\n        ['/foo', '/bar', '/baz'],\n        'dataFileUtils.test.ts',\n      ),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(`\n            \"File \"dataFileUtils.test.ts\" does not exist in any of these folders:\n            - /foo\n            - /bar\n            - /baz\"\n          `);\n  });","file":"dataFileUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"reads both files with trailing slash undefined","suites":["readOutputHTMLFile"],"updatePoint":{"line":14,"column":52},"line":14,"code":"  it('reads both files with trailing slash undefined', async () => {\n    await expect(\n      readOutputHTMLFile(\n        '/file',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        undefined,\n      ).then(String),\n    ).resolves.toBe('file\\n');\n    await expect(\n      readOutputHTMLFile(\n        '/folder',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        undefined,\n      ).then(String),\n    ).resolves.toBe('folder\\n');\n    await expect(\n      readOutputHTMLFile(\n        '/file/',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        undefined,\n      ).then(String),\n    ).resolves.toBe('file\\n');\n    await expect(\n      readOutputHTMLFile(\n        '/folder/',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        undefined,\n      ).then(String),\n    ).resolves.toBe('folder\\n');\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"reads only folder with trailing slash true","suites":["readOutputHTMLFile"],"updatePoint":{"line":44,"column":48},"line":44,"code":"  it('reads only folder with trailing slash true', async () => {\n    await expect(\n      readOutputHTMLFile(\n        '/folder',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        true,\n      ).then(String),\n    ).resolves.toBe('folder\\n');\n    await expect(\n      readOutputHTMLFile(\n        '/folder/',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        true,\n      ).then(String),\n    ).resolves.toBe('folder\\n');\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"reads only file trailing slash false","suites":["readOutputHTMLFile"],"updatePoint":{"line":60,"column":42},"line":60,"code":"  it('reads only file trailing slash false', async () => {\n    await expect(\n      readOutputHTMLFile(\n        '/file',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        false,\n      ).then(String),\n    ).resolves.toBe('file\\n');\n    await expect(\n      readOutputHTMLFile(\n        '/file/',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        false,\n      ).then(String),\n    ).resolves.toBe('file\\n');\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throws if file does not exist","suites":["readOutputHTMLFile"],"updatePoint":{"line":77,"column":35},"line":77,"code":"  it('throws if file does not exist', async () => {\n    await expect(\n      readOutputHTMLFile(\n        '/nonExistent',\n        path.join(__dirname, '__fixtures__/build-snap'),\n        undefined,\n      ).then(String),\n    ).rejects.toThrowErrorMatchingInlineSnapshot(\n      `\"Expected output HTML file to be found at <PROJECT_ROOT>/packages/docusaurus-utils/src/__tests__/__fixtures__/build-snap/nonExistent/index.html.\"`,\n    );\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works with no file and no cache","suites":["generate"],"updatePoint":{"line":95,"column":37},"line":95,"code":"  it('works with no file and no cache', async () => {\n    existsMock.mockImplementationOnce(() => false);\n    await generate(__dirname, 'foo', 'bar');\n    expect(writeMock).toHaveBeenNthCalledWith(\n      1,\n      path.join(__dirname, 'foo'),\n      'bar',\n    );\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works with existing cache","suites":["generate"],"updatePoint":{"line":105,"column":31},"line":105,"code":"  it('works with existing cache', async () => {\n    await generate(__dirname, 'foo', 'bar');\n    expect(writeMock).toBeCalledTimes(1);\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works with existing file but no cache","suites":["generate"],"updatePoint":{"line":110,"column":43},"line":110,"code":"  it('works with existing file but no cache', async () => {\n    existsMock.mockImplementationOnce(() => true);\n    // @ts-expect-error: seems the typedef doesn't understand overload\n    readMock.mockImplementationOnce(() => Promise.resolve('bar'));\n    await generate(__dirname, 'baz', 'bar');\n    expect(writeMock).toBeCalledTimes(1);\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works when force skipping cache","suites":["generate"],"updatePoint":{"line":118,"column":37},"line":118,"code":"  it('works when force skipping cache', async () => {\n    await generate(__dirname, 'foo', 'bar', true);\n    expect(writeMock).toHaveBeenNthCalledWith(\n      2,\n      path.join(__dirname, 'foo'),\n      'bar',\n    );\n  });","file":"emitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns earliest commit date","suites":["getFileCommitDate"],"updatePoint":{"line":49,"column":34},"line":49,"code":"  it('returns earliest commit date', async () => {\n    expect(getFileCommitDate(path.join(repoDir, 'test.txt'), {})).toEqual({\n      date: new Date('2020-06-19'),\n      timestamp: new Date('2020-06-19').getTime() / 1000,\n    });\n    expect(getFileCommitDate(path.join(repoDir, 'dest.txt'), {})).toEqual({\n      date: new Date('2020-09-13'),\n      timestamp: new Date('2020-09-13').getTime() / 1000,\n    });\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns latest commit date","suites":["getFileCommitDate"],"updatePoint":{"line":59,"column":32},"line":59,"code":"  it('returns latest commit date', async () => {\n    expect(\n      getFileCommitDate(path.join(repoDir, 'test.txt'), {age: 'newest'}),\n    ).toEqual({\n      date: new Date('2020-09-13'),\n      timestamp: new Date('2020-09-13').getTime() / 1000,\n    });\n    expect(\n      getFileCommitDate(path.join(repoDir, 'dest.txt'), {age: 'newest'}),\n    ).toEqual({\n      date: new Date('2020-11-13'),\n      timestamp: new Date('2020-11-13').getTime() / 1000,\n    });\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns latest commit date with author","suites":["getFileCommitDate"],"updatePoint":{"line":73,"column":44},"line":73,"code":"  it('returns latest commit date with author', async () => {\n    expect(\n      getFileCommitDate(path.join(repoDir, 'test.txt'), {\n        age: 'oldest',\n        includeAuthor: true,\n      }),\n    ).toEqual({\n      date: new Date('2020-06-19'),\n      timestamp: new Date('2020-06-19').getTime() / 1000,\n      author: 'Caroline',\n    });\n    expect(\n      getFileCommitDate(path.join(repoDir, 'dest.txt'), {\n        age: 'oldest',\n        includeAuthor: true,\n      }),\n    ).toEqual({\n      date: new Date('2020-09-13'),\n      timestamp: new Date('2020-09-13').getTime() / 1000,\n      author: 'Caroline',\n    });\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns earliest commit date with author","suites":["getFileCommitDate"],"updatePoint":{"line":95,"column":46},"line":95,"code":"  it('returns earliest commit date with author', async () => {\n    expect(\n      getFileCommitDate(path.join(repoDir, 'test.txt'), {\n        age: 'newest',\n        includeAuthor: true,\n      }),\n    ).toEqual({\n      date: new Date('2020-09-13'),\n      timestamp: new Date('2020-09-13').getTime() / 1000,\n      author: 'Caroline',\n    });\n    expect(\n      getFileCommitDate(path.join(repoDir, 'dest.txt'), {\n        age: 'newest',\n        includeAuthor: true,\n      }),\n    ).toEqual({\n      date: new Date('2020-11-13'),\n      timestamp: new Date('2020-11-13').getTime() / 1000,\n      author: 'Josh-Cena',\n    });\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throws custom error when file is not tracked","suites":["getFileCommitDate"],"updatePoint":{"line":117,"column":50},"line":117,"code":"  it('throws custom error when file is not tracked', async () => {\n    expect(() =>\n      getFileCommitDate(path.join(repoDir, 'untracked.txt'), {\n        age: 'newest',\n        includeAuthor: true,\n      }),\n    ).toThrowError(FileNotTrackedError);\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throws when file not found","suites":["getFileCommitDate"],"updatePoint":{"line":125,"column":32},"line":125,"code":"  it('throws when file not found', async () => {\n    expect(() =>\n      getFileCommitDate(path.join(repoDir, 'nonexistent.txt'), {\n        age: 'newest',\n        includeAuthor: true,\n      }),\n    ).toThrowError(\n      /Failed to retrieve git history for \".*nonexistent.txt\" because the file does not exist./,\n    );\n  });","file":"gitUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"match default exclude MD/MDX partials correctly","suites":["createMatcher"],"updatePoint":{"line":15,"column":53},"line":15,"code":"  it('match default exclude MD/MDX partials correctly', () => {\n    const matcher = createMatcher(GlobExcludeDefault);\n    expect(matcher('doc.md')).toBe(false);\n    expect(matcher('category/doc.md')).toBe(false);\n    expect(matcher('category/subcategory/doc.md')).toBe(false);\n    //\n    expect(matcher('doc.mdx')).toBe(false);\n    expect(matcher('category/doc.mdx')).toBe(false);\n    expect(matcher('category/subcategory/doc.mdx')).toBe(false);\n    //\n    expect(matcher('_doc.md')).toBe(true);\n    expect(matcher('category/_doc.md')).toBe(true);\n    expect(matcher('category/subcategory/_doc.md')).toBe(true);\n    expect(matcher('_category/doc.md')).toBe(true);\n    expect(matcher('_category/subcategory/doc.md')).toBe(true);\n    expect(matcher('category/_subcategory/doc.md')).toBe(true);\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"match default exclude tests correctly","suites":["createMatcher"],"updatePoint":{"line":33,"column":43},"line":33,"code":"  it('match default exclude tests correctly', () => {\n    const matcher = createMatcher(GlobExcludeDefault);\n    expect(matcher('xyz.js')).toBe(false);\n    expect(matcher('xyz.ts')).toBe(false);\n    expect(matcher('xyz.jsx')).toBe(false);\n    expect(matcher('xyz.tsx')).toBe(false);\n    expect(matcher('folder/xyz.js')).toBe(false);\n    expect(matcher('folder/xyz.ts')).toBe(false);\n    expect(matcher('folder/xyz.jsx')).toBe(false);\n    expect(matcher('folder/xyz.tsx')).toBe(false);\n    //\n    expect(matcher('xyz.test.js')).toBe(true);\n    expect(matcher('xyz.test.ts')).toBe(true);\n    expect(matcher('xyz.test.jsx')).toBe(true);\n    expect(matcher('xyz.test.tsx')).toBe(true);\n    expect(matcher('folder/xyz.test.js')).toBe(true);\n    expect(matcher('folder/xyz.test.ts')).toBe(true);\n    expect(matcher('folder/xyz.test.jsx')).toBe(true);\n    expect(matcher('folder/xyz.test.tsx')).toBe(true);\n    expect(matcher('folder/subfolder/xyz.test.js')).toBe(true);\n    expect(matcher('folder/subfolder/xyz.test.ts')).toBe(true);\n    expect(matcher('folder/subfolder/xyz.test.jsx')).toBe(true);\n    expect(matcher('folder/subfolder/xyz.test.tsx')).toBe(true);\n    //\n    expect(matcher('__tests__/subfolder/xyz.js')).toBe(true);\n    expect(matcher('__tests__/subfolder/xyz.ts')).toBe(true);\n    expect(matcher('__tests__/subfolder/xyz.jsx')).toBe(true);\n    expect(matcher('__tests__/subfolder/xyz.tsx')).toBe(true);\n    expect(matcher('folder/__tests__/xyz.js')).toBe(true);\n    expect(matcher('folder/__tests__/xyz.ts')).toBe(true);\n    expect(matcher('folder/__tests__/xyz.jsx')).toBe(true);\n    expect(matcher('folder/__tests__/xyz.tsx')).toBe(true);\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"matches nothing given nothing","suites":["createMatcher"],"updatePoint":{"line":67,"column":35},"line":67,"code":"  it('matches nothing given nothing', () => {\n    const matcher = createMatcher([]);\n    expect(matcher('foo')).toBe(false);\n    expect(matcher('')).toBe(false);\n    expect(matcher('we/are/the/champions')).toBe(false);\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"match default exclude MD/MDX partials correctly","suites":["createAbsoluteFilePathMatcher"],"updatePoint":{"line":83,"column":53},"line":83,"code":"  it('match default exclude MD/MDX partials correctly', () => {\n    expect(matcher('/_root/docs/myDoc.md')).toBe(false);\n    expect(matcher('/_root/docs/myDoc.mdx')).toBe(false);\n    expect(matcher('/root/_docs/myDoc.md')).toBe(false);\n    expect(matcher('/root/_docs/myDoc.mdx')).toBe(false);\n    expect(matcher('/_root/docs/category/myDoc.md')).toBe(false);\n    expect(matcher('/_root/docs/category/myDoc.mdx')).toBe(false);\n    expect(matcher('/root/_docs/category/myDoc.md')).toBe(false);\n    expect(matcher('/root/_docs/category/myDoc.mdx')).toBe(false);\n    //\n    expect(matcher('/_root/docs/_myDoc.md')).toBe(true);\n    expect(matcher('/_root/docs/_myDoc.mdx')).toBe(true);\n    expect(matcher('/root/_docs/_myDoc.md')).toBe(true);\n    expect(matcher('/root/_docs/_myDoc.mdx')).toBe(true);\n    expect(matcher('/_root/docs/_category/myDoc.md')).toBe(true);\n    expect(matcher('/_root/docs/_category/myDoc.mdx')).toBe(true);\n    expect(matcher('/root/_docs/_category/myDoc.md')).toBe(true);\n    expect(matcher('/root/_docs/_category/myDoc.mdx')).toBe(true);\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"match default exclude tests correctly","suites":["createAbsoluteFilePathMatcher"],"updatePoint":{"line":103,"column":43},"line":103,"code":"  it('match default exclude tests correctly', () => {\n    expect(matcher('/__test__/website/src/xyz.js')).toBe(false);\n    expect(matcher('/__test__/website/src/__test__/xyz.js')).toBe(true);\n    expect(matcher('/__test__/website/src/xyz.test.js')).toBe(true);\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throw if file is not contained in any root doc","suites":["createAbsoluteFilePathMatcher"],"updatePoint":{"line":109,"column":52},"line":109,"code":"  it('throw if file is not contained in any root doc', () => {\n    expect(() =>\n      matcher('/bad/path/myDoc.md'),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"createAbsoluteFilePathMatcher unexpected error, absoluteFilePath=/bad/path/myDoc.md was not contained in any of the root folders: /_root/docs, /root/_docs/, /__test__/website/src\"`,\n    );\n  });","file":"globUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"simpleHash","suites":["hashUtils"],"updatePoint":{"line":11,"column":16},"line":11,"code":"  it('simpleHash', () => {\n    const asserts: {[key: string]: string} = {\n      '': 'd41',\n      '/foo-bar': '096',\n      '/foo/bar': '1df',\n      '/endi/lie': '9fa',\n      '/endi-lie': 'fd3',\n      '/yangshun/tay': '48d',\n      '/yangshun-tay': 'f3b',\n      '/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar':\n        'd46',\n      '/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/test1-test2':\n        '787',\n    };\n    Object.keys(asserts).forEach((str) => {\n      expect(simpleHash(str, 3)).toBe(asserts[str]);\n    });\n  });","file":"hashUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"docuHash works","suites":["docuHash"],"updatePoint":{"line":32,"column":20},"line":32,"code":"  it('docuHash works', () => {\n    const asserts: {[key: string]: string} = {\n      '': '-d41',\n      '/': 'index',\n      '/foo-bar': 'foo-bar-096',\n      '/foo/bar': 'foo-bar-1df',\n      '/endi/lie': 'endi-lie-9fa',\n      '/endi-lie': 'endi-lie-fd3',\n      '/yangshun/tay': 'yangshun-tay-48d',\n      '/yangshun-tay': 'yangshun-tay-f3b',\n      '/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar':\n        'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo--d46',\n      '/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/foo/bar/test1-test2':\n        'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-test-1-test--787',\n    };\n    Object.keys(asserts).forEach((file) => {\n      expect(docuHash(file)).toBe(asserts[file]);\n    });\n  });","file":"hashUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["mergeTranslations"],"updatePoint":{"line":17,"column":11},"line":17,"code":"  it('works', () => {\n    expect(\n      mergeTranslations([\n        {\n          T1: {message: 'T1 message', description: 'T1 desc'},\n          T2: {message: 'T2 message', description: 'T2 desc'},\n          T3: {message: 'T3 message', description: 'T3 desc'},\n        },\n        {\n          T4: {message: 'T4 message', description: 'T4 desc'},\n        },\n        {T2: {message: 'T2 message 2', description: 'T2 desc 2'}},\n      ]),\n    ).toEqual({\n      T1: {message: 'T1 message', description: 'T1 desc'},\n      T2: {message: 'T2 message 2', description: 'T2 desc 2'},\n      T3: {message: 'T3 message', description: 'T3 desc'},\n      T4: {message: 'T4 message', description: 'T4 desc'},\n    });\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["updateTranslationFileMessages"],"updatePoint":{"line":40,"column":11},"line":40,"code":"  it('works', () => {\n    expect(\n      updateTranslationFileMessages(\n        {\n          path: 'abc',\n          content: {\n            t1: {message: 't1 message', description: 't1 desc'},\n            t2: {message: 't2 message', description: 't2 desc'},\n            t3: {message: 't3 message', description: 't3 desc'},\n          },\n        },\n        (message) => `prefix ${message} suffix`,\n      ),\n    ).toEqual({\n      path: 'abc',\n      content: {\n        t1: {message: 'prefix t1 message suffix', description: 't1 desc'},\n        t2: {message: 'prefix t2 message suffix', description: 't2 desc'},\n        t3: {message: 'prefix t3 message suffix', description: 't3 desc'},\n      },\n    });\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"gets correct path","suites":["getPluginI18nPath"],"updatePoint":{"line":65,"column":23},"line":65,"code":"  it('gets correct path', () => {\n    expect(\n      getPluginI18nPath({\n        siteDir: __dirname,\n        locale: 'zh-Hans',\n        pluginName: 'plugin-content-docs',\n        pluginId: 'community',\n        subPaths: ['foo'],\n      }),\n    ).toMatchInlineSnapshot(\n      `\"<PROJECT_ROOT>/packages/docusaurus-utils/src/__tests__/i18n/zh-Hans/plugin-content-docs-community/foo\"`,\n    );\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"gets correct path for default plugin","suites":["getPluginI18nPath"],"updatePoint":{"line":78,"column":42},"line":78,"code":"  it('gets correct path for default plugin', () => {\n    expect(\n      getPluginI18nPath({\n        siteDir: __dirname,\n        locale: 'zh-Hans',\n        pluginName: 'plugin-content-docs',\n        subPaths: ['foo'],\n      }).replace(__dirname, ''),\n    ).toMatchInlineSnapshot(`\"/i18n/zh-Hans/plugin-content-docs/foo\"`);\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"gets correct path when no sub-paths","suites":["getPluginI18nPath"],"updatePoint":{"line":88,"column":41},"line":88,"code":"  it('gets correct path when no sub-paths', () => {\n    expect(\n      getPluginI18nPath({\n        siteDir: __dirname,\n        locale: 'zh-Hans',\n        pluginName: 'plugin-content-docs',\n      }).replace(__dirname, ''),\n    ).toMatchInlineSnapshot(`\"/i18n/zh-Hans/plugin-content-docs\"`);\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"localizes url path with current locale","suites":["localizePath"],"updatePoint":{"line":100,"column":44},"line":100,"code":"  it('localizes url path with current locale', () => {\n    expect(\n      localizePath({\n        pathType: 'url',\n        path: '/baseUrl',\n        i18n: {\n          defaultLocale: 'en',\n          locales: ['en', 'fr'],\n          currentLocale: 'fr',\n          localeConfigs: {},\n        },\n        options: {localizePath: true},\n      }),\n    ).toBe('/baseUrl/fr/');\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"localizes fs path with current locale","suites":["localizePath"],"updatePoint":{"line":116,"column":43},"line":116,"code":"  it('localizes fs path with current locale', () => {\n    expect(\n      localizePath({\n        pathType: 'fs',\n        path: '/baseFsPath',\n        i18n: {\n          defaultLocale: 'en',\n          locales: ['en', 'fr'],\n          currentLocale: 'fr',\n          localeConfigs: {},\n        },\n        options: {localizePath: true},\n      }),\n    ).toBe(`${path.sep}baseFsPath${path.sep}fr`);\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"localizes path for default locale, if requested","suites":["localizePath"],"updatePoint":{"line":132,"column":53},"line":132,"code":"  it('localizes path for default locale, if requested', () => {\n    expect(\n      localizePath({\n        pathType: 'url',\n        path: '/baseUrl/',\n        i18n: {\n          defaultLocale: 'en',\n          locales: ['en', 'fr'],\n          currentLocale: 'en',\n          localeConfigs: {},\n        },\n        options: {localizePath: true},\n      }),\n    ).toBe('/baseUrl/en/');\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not localize path for default locale by default","suites":["localizePath"],"updatePoint":{"line":148,"column":58},"line":148,"code":"  it('does not localize path for default locale by default', () => {\n    expect(\n      localizePath({\n        pathType: 'url',\n        path: '/baseUrl/',\n        i18n: {\n          defaultLocale: 'en',\n          locales: ['en', 'fr'],\n          currentLocale: 'en',\n          localeConfigs: {},\n        },\n      }),\n    ).toBe('/baseUrl/');\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"localizes path for non-default locale by default","suites":["localizePath"],"updatePoint":{"line":163,"column":54},"line":163,"code":"  it('localizes path for non-default locale by default', () => {\n    expect(\n      localizePath({\n        pathType: 'url',\n        path: '/baseUrl/',\n        i18n: {\n          defaultLocale: 'en',\n          locales: ['en', 'fr'],\n          currentLocale: 'en',\n          localeConfigs: {},\n        },\n      }),\n    ).toBe('/baseUrl/');\n  });","file":"i18nUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"is no-op when suffix doesn't exist","suites":["removeSuffix"],"updatePoint":{"line":19,"column":40},"line":19,"code":"  it(\"is no-op when suffix doesn't exist\", () => {\n    expect(removeSuffix('abcdef', 'ijk')).toBe('abcdef');\n    expect(removeSuffix('abcdef', 'abc')).toBe('abcdef');\n    expect(removeSuffix('abcdef', '')).toBe('abcdef');\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"removes suffix","suites":["removeSuffix"],"updatePoint":{"line":24,"column":20},"line":24,"code":"  it('removes suffix', () => {\n    expect(removeSuffix('abcdef', 'ef')).toBe('abcd');\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"is no-op when prefix doesn't exist","suites":["removePrefix"],"updatePoint":{"line":30,"column":40},"line":30,"code":"  it(\"is no-op when prefix doesn't exist\", () => {\n    expect(removePrefix('abcdef', 'ijk')).toBe('abcdef');\n    expect(removePrefix('abcdef', 'def')).toBe('abcdef');\n    expect(removePrefix('abcdef', '')).toBe('abcdef');\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"removes prefix","suites":["removePrefix"],"updatePoint":{"line":35,"column":20},"line":35,"code":"  it('removes prefix', () => {\n    expect(removePrefix('prefix', 'pre')).toBe('fix');\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"maps sequentially","suites":["mapAsyncSequential"],"updatePoint":{"line":47,"column":23},"line":47,"code":"  it('maps sequentially', async () => {\n    const itemToTimeout: {[key: string]: number} = {\n      '1': 200,\n      '2': 600,\n      '3': 400,\n    };\n    const items = Object.keys(itemToTimeout);\n\n    const itemMapStartsAt: {[key: string]: number} = {};\n    const itemMapEndsAt: {[key: string]: number} = {};\n\n    const timeBefore = Date.now();\n    await expect(\n      mapAsyncSequential(items, async (item) => {\n        const itemTimeout = itemToTimeout[item]!;\n        itemMapStartsAt[item] = Date.now();\n        await sleep(itemTimeout);\n        itemMapEndsAt[item] = Date.now();\n        return `${item} mapped`;\n      }),\n    ).resolves.toEqual(['1 mapped', '2 mapped', '3 mapped']);\n    const timeAfter = Date.now();\n\n    const timeTotal = timeAfter - timeBefore;\n\n    const totalTimeouts = _.sum(Object.values(itemToTimeout));\n    expect(timeTotal).toBeGreaterThanOrEqual(totalTimeouts - 100);\n\n    expect(itemMapStartsAt[1]).toBeGreaterThanOrEqual(0);\n    expect(itemMapStartsAt[2]).toBeGreaterThanOrEqual(itemMapEndsAt[1]! - 100);\n    expect(itemMapStartsAt['3']).toBeGreaterThanOrEqual(\n      itemMapEndsAt[2]! - 100,\n    );\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"finds sequentially","suites":["findAsyncSequential"],"updatePoint":{"line":90,"column":24},"line":90,"code":"  it('finds sequentially', async () => {\n    const items = ['1', '2', '3'];\n\n    const findFn = jest.fn(async (item: string) => {\n      await sleep(400);\n      return item === '2';\n    });\n\n    const timeBefore = Date.now();\n    await expect(findAsyncSequential(items, findFn)).resolves.toBe('2');\n    const timeAfter = Date.now();\n\n    expect(findFn).toHaveBeenCalledTimes(2);\n    expect(findFn).toHaveBeenNthCalledWith(1, '1');\n    expect(findFn).toHaveBeenNthCalledWith(2, '2');\n\n    const timeTotal = timeAfter - timeBefore;\n    expect(timeTotal).toBeGreaterThanOrEqual(600);\n    expect(timeTotal).toBeLessThan(1000);\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works with all severities","suites":["reportMessage"],"updatePoint":{"line":113,"column":31},"line":113,"code":"  it('works with all severities', () => {\n    const consoleLog = jest.spyOn(console, 'info').mockImplementation(() => {});\n    const consoleWarn = jest\n      .spyOn(console, 'warn')\n      .mockImplementation(() => {});\n    const consoleError = jest\n      .spyOn(console, 'error')\n      .mockImplementation(() => {});\n    reportMessage('hey', 'ignore');\n    reportMessage('hey', 'log');\n    reportMessage('hey', 'warn');\n    reportMessage('hey', 'error');\n    expect(() =>\n      reportMessage('hey', 'throw'),\n    ).toThrowErrorMatchingInlineSnapshot(`\"hey\"`);\n    expect(() =>\n      // @ts-expect-error: for test\n      reportMessage('hey', 'foo'),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"Unexpected \"reportingSeverity\" value: foo.\"`,\n    );\n    expect(consoleLog).toBeCalledTimes(1);\n    expect(consoleLog).toBeCalledWith(\n      expect.stringMatching(/.*\\[INFO\\].* hey/),\n    );\n    expect(consoleWarn).toBeCalledTimes(1);\n    expect(consoleWarn).toBeCalledWith(\n      expect.stringMatching(/.*\\[WARNING\\].* hey/),\n    );\n    expect(consoleError).toBeCalledTimes(1);\n    expect(consoleError).toBeCalledWith(\n      expect.stringMatching(/.*\\[ERROR\\].* hey/),\n    );\n  });","file":"jsUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does basic replace","suites":["replaceMarkdownLinks"],"updatePoint":{"line":11,"column":24},"line":11,"code":"  it('does basic replace', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n          '@site/docs/foo.md': '/doc/foo',\n          '@site/docs/bar/baz.md': '/doc/baz',\n          '@site/docs/http.foo.md': '/doc/http',\n        },\n        fileString: `\n[foo](./foo.md)\n[baz](./bar/baz.md)\n[foo](foo.md)\n[http](http://github.com/facebook/docusaurus/README.md)\n[https](https://github.com/facebook/docusaurus/README.md)\n[asset](./foo.js)\n[asset as well](@site/docs/_partial.md)\n[looks like http...](http.foo.md)\n[nonexistent](hmmm.md)\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"replaces two links on the same line","suites":["replaceMarkdownLinks"],"updatePoint":{"line":41,"column":41},"line":41,"code":"  it('replaces two links on the same line', () => {\n    // cSpell:ignore Goooooooooo\n    // This is a very arcane bug: if we continue matching using the previous\n    // matching index (as is the behavior of RegExp#exec), it will go right over\n    // the next Markdown link and fail to match the \"Go\" link. This only happens\n    // when: (1) the replaced link is much shorter than the Markdown path, (2)\n    // the next link is very close to the current one (e.g. here if it's not\n    // \"Go\" but \"Goooooooooo\", or if every link has the /docs/ prefix, the bug\n    // will not trigger because it won't overshoot)\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/',\n          '@site/docs/programming-languages/typescript/typescript.md':\n            '/programming-languages/typescript/',\n          '@site/docs/programming-languages/go/go.md':\n            '/programming-languages/go/',\n        },\n        fileString: `[TypeScript](programming-languages/typescript/typescript.md) and [Go](programming-languages/go/go.md)`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"replaces reference style Markdown links","suites":["replaceMarkdownLinks"],"updatePoint":{"line":70,"column":45},"line":70,"code":"  it('replaces reference style Markdown links', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n\n        sourceToPermalink: {\n          '@site/docs/intro/intro.md': '/docs/intro',\n          '@site/docs/api/classes/divine_uri.URI.md': '/docs/api/classes/uri',\n        },\n\n        fileString: `\nThe following operations are defined for [URI]s:\n\n* [info]: Returns metadata about the resource,\n* [list]: Returns metadata about the resource's children (like getting the content of a local directory).\n\n[URI]:    ../api/classes/divine_uri.URI.md\n[info]:   ../api/classes/divine_uri.URI.md#info\n[list]:   ../api/classes/divine_uri.URI.md#list\n      `,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"resolves absolute and relative links differently","suites":["replaceMarkdownLinks"],"updatePoint":{"line":99,"column":54},"line":99,"code":"  it('resolves absolute and relative links differently', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n\n        sourceToPermalink: {\n          '@site/docs/intro/intro.md': '/docs/intro',\n          '@site/docs/intro/another.md': '/docs/another',\n          '@site/docs/api/classes/divine_uri.URI.md': '/docs/api/classes/uri',\n        },\n\n        fileString: `\n[Relative link](./another.md)\n[Relative link 2](../api/classes/divine_uri.URI.md)\n[Relative link that should be absolute](./api/classes/divine_uri.URI.md)\n[Absolute link](/api/classes/divine_uri.URI.md)\n[Absolute link from site dir](/docs/api/classes/divine_uri.URI.md)\n[Absolute link that should be relative](/another.md)\n[Relative link that acts as absolute](api/classes/divine_uri.URI.md)\n[Relative link that acts as relative](another.md)\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"ignores links in HTML comments","suites":["replaceMarkdownLinks"],"updatePoint":{"line":130,"column":36},"line":130,"code":"  it('ignores links in HTML comments', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n        },\n        fileString: `\n<!-- [foo](./foo.md) -->\n<!--\n[foo](./foo.md)\n-->\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"ignores links in fenced blocks","suites":["replaceMarkdownLinks"],"updatePoint":{"line":152,"column":36},"line":152,"code":"  it('ignores links in fenced blocks', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n        },\n        fileString: `\n\\`\\`\\`\n[foo](foo.md)\n\\`\\`\\`\n\n\\`\\`\\`\\`js\n[foo](foo.md)\n\\`\\`\\`\n[foo](foo.md)\n\\`\\`\\`\n[foo](foo.md)\n\\`\\`\\`\\`\n\n\\`\\`\\`\\`js\n[foo](foo.md)\n\\`\\`\\`\n[foo](foo.md)\n\\`\\`\\`\\`\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"ignores links in inline code","suites":["replaceMarkdownLinks"],"updatePoint":{"line":188,"column":34},"line":188,"code":"  it('ignores links in inline code', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n        },\n        fileString: `\n\\`[foo](foo.md)\\`\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"replaces links with same title as URL","suites":["replaceMarkdownLinks"],"updatePoint":{"line":207,"column":43},"line":207,"code":"  it('replaces links with same title as URL', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n          '@site/docs/foo.md': '/docs/foo',\n        },\n        fileString: `\n[foo.md](foo.md)\n[./foo.md](./foo.md)\n[foo.md](./foo.md)\n[./foo.md](foo.md)\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"replaces multiple links on same line","suites":["replaceMarkdownLinks"],"updatePoint":{"line":230,"column":42},"line":230,"code":"  it('replaces multiple links on same line', () => {\n    expect(\n      replaceMarkdownLinks({\n        siteDir: '.',\n        filePath: 'docs/intro.md',\n        contentPaths: {\n          contentPath: 'docs',\n          contentPathLocalized: 'i18n/docs-localized',\n        },\n        sourceToPermalink: {\n          '@site/docs/intro.md': '/docs/intro',\n          '@site/docs/a.md': '/docs/a',\n          '@site/docs/b.md': '/docs/b',\n          '@site/docs/c.md': '/docs/c',\n        },\n        fileString: `\n[a](a.md), [a](a.md), [b](b.md), [c](c.md)\n`,\n      }),\n    ).toMatchSnapshot();\n  });","file":"markdownLinks.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for text-only content","suites":["createExcerpt"],"updatePoint":{"line":18,"column":43},"line":18,"code":"  it('creates excerpt for text-only content', () => {\n    expect(\n      createExcerpt(dedent`\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe(\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for regular content with regular title","suites":["createExcerpt"],"updatePoint":{"line":30,"column":60},"line":30,"code":"  it('creates excerpt for regular content with regular title', () => {\n    expect(\n      createExcerpt(dedent`\n\n          # Markdown Regular Title\n\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe(\n      // H1 title is skipped on purpose, because we don't want the page to have\n      // SEO metadata title === description\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for regular content with alternate title","suites":["createExcerpt"],"updatePoint":{"line":47,"column":62},"line":47,"code":"  it('creates excerpt for regular content with alternate title', () => {\n    expect(\n      createExcerpt(dedent`\n\n          Markdown Alternate Title\n          ================\n\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe(\n      // H1 title is skipped on purpose, because we don't want the page to have\n      // SEO metadata title === description\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content with h2 heading","suites":["createExcerpt"],"updatePoint":{"line":65,"column":49},"line":65,"code":"  it('creates excerpt for content with h2 heading', () => {\n    expect(\n      createExcerpt(dedent`\n          ## Lorem ipsum dolor sit amet\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe('Lorem ipsum dolor sit amet');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content beginning with blockquote","suites":["createExcerpt"],"updatePoint":{"line":75,"column":59},"line":75,"code":"  it('creates excerpt for content beginning with blockquote', () => {\n    expect(\n      createExcerpt(dedent`\n          > Lorem ipsum dolor sit amet\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe('Lorem ipsum dolor sit amet');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content beginning with image (eg. blog post)","suites":["createExcerpt"],"updatePoint":{"line":85,"column":70},"line":85,"code":"  it('creates excerpt for content beginning with image (eg. blog post)', () => {\n    expect(\n      createExcerpt(dedent`\n          ![Lorem ipsum](/img/lorem-ipsum.svg)\n        `),\n    ).toBe('Lorem ipsum');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content beginning with admonitions","suites":["createExcerpt"],"updatePoint":{"line":93,"column":60},"line":93,"code":"  it('creates excerpt for content beginning with admonitions', () => {\n    expect(\n      createExcerpt(dedent`\n          import Component from '@site/src/components/Component'\n\n          :::caution\n\n          Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n\n          :::\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe('Lorem ipsum dolor sit amet, consectetur adipiscing elit.');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content with imports/exports declarations and Markdown markup, as well as Emoji","suites":["createExcerpt"],"updatePoint":{"line":109,"column":105},"line":109,"code":"  it('creates excerpt for content with imports/exports declarations and Markdown markup, as well as Emoji', () => {\n    expect(\n      createExcerpt(dedent`\n          import Component from '@site/src/components/Component';\n          import Component from '@site/src/components/Component'\n          import './styles.css';\n\n          export function ItemCol(props) {\n            return <Item {...props} className={'col col--6 margin-bottom--lg'}/>\n          }\n\n          export function ItemCol(props) {\n            return <Item {...props} className={'col col--6 margin-bottom--lg'}/>\n          };\n\n          Lorem **ipsum** dolor sit \\`amet\\`[^1], consectetur _adipiscing_ elit. [**Vestibulum**](https://wiktionary.org/wiki/vestibulum) ex urna[^note], ~~molestie~~ et sagittis ut, varius ac justo :wink:.\n\n          Nunc porttitor libero nec vulputate venenatis. Nam nec rhoncus mauris. Morbi tempus est et nibh maximus, tempus venenatis arcu lobortis.\n        `),\n    ).toBe(\n      'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum ex urna, molestie et sagittis ut, varius ac justo.',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for heading specified with anchor-id syntax","suites":["createExcerpt"],"updatePoint":{"line":133,"column":65},"line":133,"code":"  it('creates excerpt for heading specified with anchor-id syntax', () => {\n    expect(\n      createExcerpt(dedent`\n          ## Markdown title {#my-anchor-id}\n        `),\n    ).toBe('Markdown title');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt for content with various code blocks","suites":["createExcerpt"],"updatePoint":{"line":141,"column":58},"line":141,"code":"  it('creates excerpt for content with various code blocks', () => {\n    expect(\n      createExcerpt(dedent`\n          \\`\\`\\`jsx\n          import React from 'react';\n          import Layout from '@theme/Layout';\n          \\`\\`\\`\n\n          Lorem \\`ipsum\\` dolor sit amet, consectetur \\`adipiscing elit\\`.\n        `),\n    ).toBe('Lorem ipsum dolor sit amet, consectetur adipiscing elit.');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"creates excerpt after multi-line imports","suites":["createExcerpt"],"updatePoint":{"line":154,"column":46},"line":154,"code":"  it('creates excerpt after multi-line imports', () => {\n    expect(\n      createExcerpt(dedent`\n          import React, {\n            type ReactNode,\n          } from 'react';\n\n          Lorem \\`ipsum\\` dolor sit amet, consectetur \\`adipiscing elit\\`.\n        `),\n    ).toBe('Lorem ipsum dolor sit amet, consectetur adipiscing elit.');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title at the top","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":168,"column":41},"line":168,"code":"  it('parses markdown h1 title at the top', () => {\n    const markdown = dedent`\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title at the top and remove it","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":182,"column":55},"line":182,"code":"  it('parses markdown h1 title at the top and remove it', () => {\n    const markdown = dedent`\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n    expect(\n      parseMarkdownContentTitle(markdown, {removeContentTitle: true}),\n    ).toEqual({\n      content: 'Lorem Ipsum',\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title at the top and unwrap inline code block","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":198,"column":70},"line":198,"code":"  it('parses markdown h1 title at the top and unwrap inline code block', () => {\n    const markdown = dedent`\n\n          # \\`Markdown Title\\`\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title and trim content","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":212,"column":47},"line":212,"code":"  it('parses markdown h1 title and trim content', () => {\n    const markdown = `\n\n# Markdown Title\n\nLorem Ipsum\n\n\n\n`;\n\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown.trim(),\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses not parse markdown h1 title and trim content","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":229,"column":57},"line":229,"code":"  it('parses not parse markdown h1 title and trim content', () => {\n    const markdown = `\n\nLorem Ipsum\n\n`;\n\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown.trim(),\n      contentTitle: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title with fixed anchor-id syntax","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":242,"column":58},"line":242,"code":"  it('parses markdown h1 title with fixed anchor-id syntax', () => {\n    const markdown = dedent`\n\n          # Markdown Title {#my-anchor-id}\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title with CRLF break","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":256,"column":46},"line":256,"code":"  it('parses markdown h1 title with CRLF break', () => {\n    const markdown = `# Markdown Title\\r\\n\\r\\nLorem Ipsum`;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 setext title with CRLF break","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":264,"column":53},"line":264,"code":"  it('parses markdown h1 setext title with CRLF break', () => {\n    const markdown = `Markdown Title\\r\\n=====\\r\\n\\r\\nLorem Ipsum`;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title at the top (atx style with closing #)","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":272,"column":68},"line":272,"code":"  it('parses markdown h1 title at the top (atx style with closing #)', () => {\n    const markdown = dedent`\n\n          # Markdown Title #\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title at the top followed by h2 title","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":286,"column":62},"line":286,"code":"  it('parses markdown h1 title at the top followed by h2 title', () => {\n    const markdown = dedent`\n\n          # Markdown Title\n\n          ## Heading 2\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses only first h1 title","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":302,"column":32},"line":302,"code":"  it('parses only first h1 title', () => {\n    const markdown = dedent`\n\n          # Markdown Title\n\n          # Markdown Title 2\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not parse title that is not at the top","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":318,"column":49},"line":318,"code":"  it('does not parse title that is not at the top', () => {\n    const markdown = dedent`\n\n          Lorem Ipsum\n\n          # Markdown Title 2\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 alternate title","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":334,"column":40},"line":334,"code":"  it('parses markdown h1 alternate title', () => {\n    const markdown = dedent`\n\n          Markdown Title\n          ================\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 alternate title and remove it","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":349,"column":54},"line":349,"code":"  it('parses markdown h1 alternate title and remove it', () => {\n    const markdown = dedent`\n\n          Markdown Title\n          ================\n\n          Lorem Ipsum\n\n        `;\n    expect(\n      parseMarkdownContentTitle(markdown, {removeContentTitle: true}),\n    ).toEqual({\n      content: 'Lorem Ipsum',\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title placed after import declarations","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":366,"column":63},"line":366,"code":"  it('parses markdown h1 title placed after import declarations', () => {\n    const markdown = dedent`\n          import Component1 from '@site/src/components/Component1';\n\n          import Component2 from '@site/src/components/Component2'\n          import Component3 from '@site/src/components/Component3'\n          import './styles.css';\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n\n    // Remove the useless line breaks? Does not matter too much\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title placed after various import declarations","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":387,"column":71},"line":387,"code":"  it('parses markdown h1 title placed after various import declarations', () => {\n    const markdown = `\nimport DefaultComponent from '@site/src/components/Component1';\nimport DefaultComponent2 from '../relative/path/Component2';\nimport * as EntireComponent from './relative/path/Component3';\n\nimport { Component4 }   from    \"double-quote-module-name\";\nimport { Component51,   Component52, \\n Component53, \\n\\t\\t Component54 } from \"double-quote-module-name\";\nimport { Component6 as AliasComponent6 } from \"module-name\";\nimport DefaultComponent8,   { DefaultComponent81 ,\\nDefaultComponent82 } from \"module-name\";\nimport DefaultComponent9,    * as EntireComponent9 from \"module-name\";\nimport {Component71,\\nComponent72 as AliasComponent72,\\nComponent73\\n} \\nfrom \"module-name\";\n\nimport './styles.css';\nimport _ from 'underscore';\nimport \"module-name\"\n\n# Markdown Title\n\nLorem Ipsum\n`;\n\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown.trim(),\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title placed after various import declarations and remove it","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":415,"column":85},"line":415,"code":"  it('parses markdown h1 title placed after various import declarations and remove it', () => {\n    const markdown = `\nimport DefaultComponent from '@site/src/components/Component1';\nimport DefaultComponent2 from '../relative/path/Component2';\nimport * as EntireComponent from './relative/path/Component3';\n\nimport { Component4 }   from    \"double-quote-module-name\";\nimport { Component51,   Component52, \\n Component53, \\n\\t\\t Component54 } from \"double-quote-module-name\";\nimport { Component6 as AliasComponent6 } from \"module-name\";\nimport DefaultComponent8,   { DefaultComponent81 ,\\nDefaultComponent82 } from \"module-name\";\nimport DefaultComponent9,    * as EntireComponent9 from \"module-name\";\nimport {Component71,\\nComponent72 as AliasComponent72,\\nComponent73\\n} \\nfrom \"module-name\";\n\nimport './styles.css';\nimport _ from 'underscore';\nimport \"module-name\"\n\n# Markdown Title\n\nLorem Ipsum\n`;\n\n    expect(\n      parseMarkdownContentTitle(markdown, {removeContentTitle: true}),\n    ).toEqual({\n      content: markdown.trim().replace('# Markdown Title\\n', ''),\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 alternate title placed after import declarations","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":445,"column":73},"line":445,"code":"  it('parses markdown h1 alternate title placed after import declarations', () => {\n    const markdown = dedent`\n\n          import Component from '@site/src/components/Component';\n          import Component from '@site/src/components/Component'\n          import './styles.css';\n\n          Markdown Title\n          ==============\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 alternate title placed after import declarations and remove it","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":464,"column":87},"line":464,"code":"  it('parses markdown h1 alternate title placed after import declarations and remove it', () => {\n    const markdown = dedent`\n\n          import Component from '@site/src/components/Component';\n          import Component from '@site/src/components/Component'\n          import './styles.css';\n\n          Markdown Title\n          ==============\n\n          Lorem Ipsum\n\n        `;\n    expect(\n      parseMarkdownContentTitle(markdown, {removeContentTitle: true}),\n    ).toEqual({\n      content: markdown.replace('Markdown Title\\n==============\\n', ''),\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses title-only","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":485,"column":23},"line":485,"code":"  it('parses title-only', () => {\n    const markdown = '# Document With Only A Title';\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Document With Only A Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not parse markdown h1 title in the middle of a doc","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":493,"column":61},"line":493,"code":"  it('does not parse markdown h1 title in the middle of a doc', () => {\n    const markdown = dedent`\n\n          Lorem Ipsum\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not parse markdown h1 alternate title in the middle of the doc","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":509,"column":73},"line":509,"code":"  it('does not parse markdown h1 alternate title in the middle of the doc', () => {\n    const markdown = dedent`\n\n          Lorem Ipsum\n\n          Markdown Title\n          ================\n\n          Lorem Ipsum\n\n        `;\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title placed after multiple import declarations","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":526,"column":72},"line":526,"code":"  it('parses markdown h1 title placed after multiple import declarations', () => {\n    const markdown = dedent`\n          import Component1 from '@site/src/components/Component1';\n          import Component2 from '@site/src/components/Component2';\n          import Component3 from '@site/src/components/Component3';\n          import Component4 from '@site/src/components/Component4';\n          import Component5 from '@site/src/components/Component5';\n          import Component6 from '@site/src/components/Component6';\n          import Component7 from '@site/src/components/Component7';\n          import Component8 from '@site/src/components/Component8';\n          import Component9 from '@site/src/components/Component9';\n          import Component10 from '@site/src/components/Component10';\n          import Component11 from '@site/src/components/Component11';\n          import Component12 from '@site/src/components/Component12';\n          import Component13 from '@site/src/components/Component13';\n          import Component14 from '@site/src/components/Component14';\n          import Component15 from '@site/src/components/Component15';\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n\n    expect(parseMarkdownContentTitle(markdown)).toEqual({\n      content: markdown,\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses markdown h1 title placed after multiple import declarations and remove it","suites":["parseMarkdownContentTitle"],"updatePoint":{"line":556,"column":86},"line":556,"code":"  it('parses markdown h1 title placed after multiple import declarations and remove it', () => {\n    const markdown = dedent`\n          import Component1 from '@site/src/components/Component1';\n          import Component2 from '@site/src/components/Component2';\n          import Component3 from '@site/src/components/Component3';\n          import Component4 from '@site/src/components/Component4';\n          import Component5 from '@site/src/components/Component5';\n          import Component6 from '@site/src/components/Component6';\n          import Component7 from '@site/src/components/Component7';\n          import Component8 from '@site/src/components/Component8';\n          import Component9 from '@site/src/components/Component9';\n          import Component10 from '@site/src/components/Component10';\n          import Component11 from '@site/src/components/Component11';\n          import Component12 from '@site/src/components/Component12';\n          import Component13 from '@site/src/components/Component13';\n          import Component14 from '@site/src/components/Component14';\n          import Component15 from '@site/src/components/Component15';\n\n          # Markdown Title\n\n          Lorem Ipsum\n\n        `;\n\n    expect(\n      parseMarkdownContentTitle(markdown, {removeContentTitle: true}),\n    ).toEqual({\n      content: markdown.replace('# Markdown Title\\n', ''),\n      contentTitle: 'Markdown Title',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parse markdown with front matter","suites":["parseMarkdownString"],"updatePoint":{"line":590,"column":38},"line":590,"code":"  it('parse markdown with front matter', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: Frontmatter title\n        ---\n\n        Some text\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses first heading as contentTitle","suites":["parseMarkdownString"],"updatePoint":{"line":602,"column":42},"line":602,"code":"  it('parses first heading as contentTitle', () => {\n    expect(\n      parseMarkdownString(dedent`\n        # Markdown Title\n\n        Some text\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"warns about duplicate titles (front matter + markdown)","suites":["parseMarkdownString"],"updatePoint":{"line":612,"column":60},"line":612,"code":"  it('warns about duplicate titles (front matter + markdown)', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: Frontmatter title\n        ---\n\n        # Markdown Title\n\n        Some text\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"warns about duplicate titles (front matter + markdown alternate)","suites":["parseMarkdownString"],"updatePoint":{"line":626,"column":70},"line":626,"code":"  it('warns about duplicate titles (front matter + markdown alternate)', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: Frontmatter title\n        ---\n\n        Markdown Title alternate\n        ================\n\n        Some text\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not warn for duplicate title if markdown title is not at the top","suites":["parseMarkdownString"],"updatePoint":{"line":641,"column":75},"line":641,"code":"  it('does not warn for duplicate title if markdown title is not at the top', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: Frontmatter title\n        ---\n\n        foo\n\n        # Markdown Title\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"deletes only first heading","suites":["parseMarkdownString"],"updatePoint":{"line":655,"column":32},"line":655,"code":"  it('deletes only first heading', () => {\n    expect(\n      parseMarkdownString(dedent`\n        # Markdown Title\n\n        test test test # test bar\n\n        # Markdown Title 2\n\n        ### Markdown Title h3\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses front-matter and ignore h2","suites":["parseMarkdownString"],"updatePoint":{"line":669,"column":39},"line":669,"code":"  it('parses front-matter and ignore h2', () => {\n    expect(\n      parseMarkdownString(\n        dedent`\n          ---\n          title: Frontmatter title\n          ---\n          ## test\n          `,\n      ),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"reads front matter only","suites":["parseMarkdownString"],"updatePoint":{"line":682,"column":29},"line":682,"code":"  it('reads front matter only', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: test\n        ---\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses title only","suites":["parseMarkdownString"],"updatePoint":{"line":692,"column":23},"line":692,"code":"  it('parses title only', () => {\n    expect(parseMarkdownString('# test')).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"parses title only alternate","suites":["parseMarkdownString"],"updatePoint":{"line":696,"column":33},"line":696,"code":"  it('parses title only alternate', () => {\n    expect(\n      parseMarkdownString(dedent`\n        test\n        ===\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"warns about duplicate titles","suites":["parseMarkdownString"],"updatePoint":{"line":705,"column":34},"line":705,"code":"  it('warns about duplicate titles', () => {\n    expect(\n      parseMarkdownString(dedent`\n        ---\n        title: Frontmatter title\n        ---\n        # test\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"ignores markdown title if its not a first text","suites":["parseMarkdownString"],"updatePoint":{"line":716,"column":52},"line":716,"code":"  it('ignores markdown title if its not a first text', () => {\n    expect(\n      parseMarkdownString(dedent`\n        foo\n        # test\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"deletes only first heading 2","suites":["parseMarkdownString"],"updatePoint":{"line":725,"column":34},"line":725,"code":"  it('deletes only first heading 2', () => {\n    expect(\n      parseMarkdownString(dedent`\n        # test\n\n        test test test test test test\n        test test test # test bar\n        # test2\n        ### test\n        test3\n        `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"handles code blocks","suites":["parseMarkdownString"],"updatePoint":{"line":739,"column":25},"line":739,"code":"  it('handles code blocks', () => {\n    expect(\n      parseMarkdownString(dedent`\n        \\`\\`\\`js\n        code\n        \\`\\`\\`\n\n        Content\n      `),\n    ).toMatchSnapshot();\n    expect(\n      parseMarkdownString(dedent`\n        \\`\\`\\`\\`js\n        Foo\n        \\`\\`\\`diff\n        code\n        \\`\\`\\`\n        Bar\n        \\`\\`\\`\\`\n\n        Content\n      `),\n    ).toMatchSnapshot();\n    expect(\n      parseMarkdownString(dedent`\n        \\`\\`\\`\\`js\n        Foo\n        \\`\\`\\`diff\n        code\n        \\`\\`\\`\\`\n\n        Content\n      `),\n    ).toMatchSnapshot();\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"throws for invalid front matter","suites":["parseMarkdownString"],"updatePoint":{"line":775,"column":37},"line":775,"code":"  it('throws for invalid front matter', () => {\n    expect(() =>\n      parseMarkdownString(dedent`\n      ---\n      foo: f: a\n      ---\n      `),\n    ).toThrowErrorMatchingInlineSnapshot(`\n      \"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line at line 2, column 7:\n          foo: f: a\n                ^\"\n    `);\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse simple heading without id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":791,"column":41},"line":791,"code":"  it('can parse simple heading without id', () => {\n    expect(parseMarkdownHeadingId('## Some heading')).toEqual({\n      text: '## Some heading',\n      id: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse simple heading with id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":798,"column":38},"line":798,"code":"  it('can parse simple heading with id', () => {\n    expect(parseMarkdownHeadingId('## Some heading {#custom-_id}')).toEqual({\n      text: '## Some heading',\n      id: 'custom-_id',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse heading not ending with the id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":805,"column":46},"line":805,"code":"  it('can parse heading not ending with the id', () => {\n    expect(parseMarkdownHeadingId('## {#custom-_id} Some heading')).toEqual({\n      text: '## {#custom-_id} Some heading',\n      id: undefined,\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse heading with multiple id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":812,"column":40},"line":812,"code":"  it('can parse heading with multiple id', () => {\n    expect(parseMarkdownHeadingId('## Some heading {#id1} {#id2}')).toEqual({\n      text: '## Some heading {#id1}',\n      id: 'id2',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse heading with link and id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":819,"column":40},"line":819,"code":"  it('can parse heading with link and id', () => {\n    expect(\n      parseMarkdownHeadingId(\n        '## Some heading [facebook](https://facebook.com) {#id}',\n      ),\n    ).toEqual({\n      text: '## Some heading [facebook](https://facebook.com)',\n      id: 'id',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can parse heading with only id","suites":["parseMarkdownHeadingId"],"updatePoint":{"line":830,"column":36},"line":830,"code":"  it('can parse heading with only id', () => {\n    expect(parseMarkdownHeadingId('## {#id}')).toEqual({\n      text: '##',\n      id: 'id',\n    });\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works for simple level-2 heading","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":839,"column":38},"line":839,"code":"  it('works for simple level-2 heading', () => {\n    expect(writeMarkdownHeadingId('## ABC')).toBe('## ABC {#abc}');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works for simple level-3 heading","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":843,"column":38},"line":843,"code":"  it('works for simple level-3 heading', () => {\n    expect(writeMarkdownHeadingId('### ABC')).toBe('### ABC {#abc}');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works for simple level-4 heading","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":847,"column":38},"line":847,"code":"  it('works for simple level-4 heading', () => {\n    expect(writeMarkdownHeadingId('#### ABC')).toBe('#### ABC {#abc}');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"unwraps markdown links","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":851,"column":28},"line":851,"code":"  it('unwraps markdown links', () => {\n    const input = `## hello [facebook](https://facebook.com) [crowdin](https://crowdin.com/translate/docusaurus-v2/126/en-fr?filter=basic&value=0)`;\n    expect(writeMarkdownHeadingId(input)).toBe(\n      `${input} {#hello-facebook-crowdin}`,\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can slugify complex headings","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":858,"column":34},"line":858,"code":"  it('can slugify complex headings', () => {\n    const input = '## abc [Hello] How are you %Sébastien_-_$)( ## -56756';\n    expect(writeMarkdownHeadingId(input)).toBe(\n      // cSpell:ignore ébastien\n      `${input} {#abc-hello-how-are-you-sébastien_-_---56756}`,\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not duplicate duplicate id","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":866,"column":37},"line":866,"code":"  it('does not duplicate duplicate id', () => {\n    expect(writeMarkdownHeadingId('## hello world {#hello-world}')).toBe(\n      '## hello world {#hello-world}',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"respects existing heading","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":872,"column":31},"line":872,"code":"  it('respects existing heading', () => {\n    expect(writeMarkdownHeadingId('## New heading {#old-heading}')).toBe(\n      '## New heading {#old-heading}',\n    );\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"overwrites heading ID when asked to","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":878,"column":41},"line":878,"code":"  it('overwrites heading ID when asked to', () => {\n    expect(\n      writeMarkdownHeadingId('## New heading {#old-heading}', {\n        overwrite: true,\n      }),\n    ).toBe('## New heading {#new-heading}');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"maintains casing when asked to","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":886,"column":36},"line":886,"code":"  it('maintains casing when asked to', () => {\n    expect(\n      writeMarkdownHeadingId('## getDataFromAPI()', {\n        maintainCase: true,\n      }),\n    ).toBe('## getDataFromAPI() {#getDataFromAPI}');\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"transform the headings","suites":["writeMarkdownHeadingId"],"updatePoint":{"line":894,"column":28},"line":894,"code":"  it('transform the headings', () => {\n    const input = `\n\n# Ignored title\n\n## abc\n\n### Hello world\n\n\\`\\`\\`\n# Heading in code block\n\\`\\`\\`\n\n## Hello world\n\n    \\`\\`\\`\n    # Heading in escaped code block\n    \\`\\`\\`\n\n### abc {#abc}\n\n    `;\n\n    const expected = `\n\n# Ignored title\n\n## abc {#abc-1}\n\n### Hello world {#hello-world}\n\n\\`\\`\\`\n# Heading in code block\n\\`\\`\\`\n\n## Hello world {#hello-world-1}\n\n    \\`\\`\\`\n    # Heading in escaped code block\n    \\`\\`\\`\n\n### abc {#abc}\n\n    `;\n\n    expect(writeMarkdownHeadingId(input)).toEqual(expected);\n  });","file":"markdownUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["isNameTooLong"],"updatePoint":{"line":21,"column":11},"line":21,"code":"  it('works', () => {\n    const asserts = {\n      '': false,\n      'foo-bar-096': false,\n      'foo-bar-1df': false,\n      'endi-lie-9fa': false,\n      'endi-lie-fd3': false,\n      'yangshun-tay-48d': false,\n      'yangshun-tay-f3b': false,\n      'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-d46':\n        true,\n      'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-test-1-test-2-787':\n        true,\n      // Every Han zi is three bytes\n      字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字:\n        {apfs: false, xfs: true},\n    };\n    const oldProcessPlatform = process.platform;\n    Object.defineProperty(process, 'platform', {value: 'darwin'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(isNameTooLong(file)).toBe(\n        typeof expected === 'boolean' ? expected : expected.apfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: 'win32'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(isNameTooLong(file)).toBe(\n        typeof expected === 'boolean' ? expected : expected.apfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: 'android'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(isNameTooLong(file)).toBe(\n        typeof expected === 'boolean' ? expected : expected.xfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: oldProcessPlatform});\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["shortName"],"updatePoint":{"line":65,"column":11},"line":65,"code":"  it('works', () => {\n    const asserts = {\n      '': '',\n      'foo-bar': 'foo-bar',\n      'endi-lie': 'endi-lie',\n      'yangshun-tay': 'yangshun-tay',\n      'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar':\n        'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-',\n      'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-test-1-test-2':\n        'foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-foo-bar-test-1-test-',\n      字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字:\n        {\n          apfs: '字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字',\n          // This is pretty bad (a character clipped in half), but I doubt if it\n          // ever happens\n          xfs: '字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字字�',\n        },\n    };\n    const oldProcessPlatform = process.platform;\n    Object.defineProperty(process, 'platform', {value: 'darwin'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(shortName(file)).toBe(\n        typeof expected === 'string' ? expected : expected.apfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: 'win32'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(shortName(file)).toBe(\n        typeof expected === 'string' ? expected : expected.apfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: 'android'});\n    (Object.keys(asserts) as (keyof typeof asserts)[]).forEach((file) => {\n      const expected = asserts[file];\n      expect(shortName(file)).toBe(\n        typeof expected === 'string' ? expected : expected.xfs,\n      );\n    });\n    Object.defineProperty(process, 'platform', {value: oldProcessPlatform});\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"truncates long paths correctly","suites":["shortName"],"updatePoint":{"line":114,"column":36},"line":114,"code":"  it('truncates long paths correctly', () => {\n    const truncatedPathLatin = shortName(VERY_LONG_PATH);\n    const truncatedPathNonLatin = shortName(VERY_LONG_PATH_NON_LATIN);\n    expect(truncatedPathLatin.length).toBeLessThanOrEqual(255);\n    expect(truncatedPathNonLatin.length).toBeLessThanOrEqual(255);\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not truncate short paths","suites":["shortName"],"updatePoint":{"line":121,"column":35},"line":121,"code":"  it('does not truncate short paths', () => {\n    const truncatedPath = shortName(SHORT_PATH);\n    expect(truncatedPath).toEqual(SHORT_PATH);\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["toMessageRelativeFilePath"],"updatePoint":{"line":128,"column":11},"line":128,"code":"  it('works', () => {\n    jest\n      .spyOn(process, 'cwd')\n      .mockImplementationOnce(() => path.join(__dirname, '..'));\n    expect(toMessageRelativeFilePath(path.join(__dirname, 'foo/bar.js'))).toBe(\n      '__tests__/foo/bar.js',\n    );\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["escapePath"],"updatePoint":{"line":139,"column":11},"line":139,"code":"  it('works', () => {\n    const asserts: {[key: string]: string} = {\n      'c:/aaaa\\\\bbbb': 'c:/aaaa\\\\\\\\bbbb',\n      'c:\\\\aaaa\\\\bbbb\\\\★': 'c:\\\\\\\\aaaa\\\\\\\\bbbb\\\\\\\\★',\n      '\\\\\\\\?\\\\c:\\\\aaaa\\\\bbbb': '\\\\\\\\\\\\\\\\?\\\\\\\\c:\\\\\\\\aaaa\\\\\\\\bbbb',\n      'c:\\\\aaaa\\\\bbbb': 'c:\\\\\\\\aaaa\\\\\\\\bbbb',\n      'foo\\\\bar': 'foo\\\\\\\\bar',\n      'foo\\\\bar/lol': 'foo\\\\\\\\bar/lol',\n      'website\\\\docs/**/*.{md,mdx}': 'website\\\\\\\\docs/**/*.{md,mdx}',\n    };\n    Object.keys(asserts).forEach((file) => {\n      expect(escapePath(file)).toBe(asserts[file]);\n    });\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["posixPath"],"updatePoint":{"line":156,"column":11},"line":156,"code":"  it('works', () => {\n    const asserts: {[key: string]: string} = {\n      'c:/aaaa\\\\bbbb': 'c:/aaaa/bbbb',\n      'c:\\\\aaaa\\\\bbbb\\\\★': 'c:\\\\aaaa\\\\bbbb\\\\★',\n      '\\\\\\\\?\\\\c:\\\\aaaa\\\\bbbb': '\\\\\\\\?\\\\c:\\\\aaaa\\\\bbbb',\n      'c:\\\\aaaa\\\\bbbb': 'c:/aaaa/bbbb',\n      'foo\\\\bar': 'foo/bar',\n      'foo\\\\bar/lol': 'foo/bar/lol',\n      'website\\\\docs/**/*.{md,mdx}': 'website/docs/**/*.{md,mdx}',\n    };\n    Object.keys(asserts).forEach((file) => {\n      expect(posixPath(file)).toBe(asserts[file]);\n    });\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["aliasedSitePath"],"updatePoint":{"line":173,"column":11},"line":173,"code":"  it('works', () => {\n    const asserts: {[key: string]: string} = {\n      'user/website/docs/asd.md': '@site/docs/asd.md',\n      'user/website/versioned_docs/foo/bar.md':\n        '@site/versioned_docs/foo/bar.md',\n      'user/docs/test.md': '@site/../docs/test.md',\n    };\n    Object.keys(asserts).forEach((file) => {\n      expect(posixPath(aliasedSitePath(file, 'user/website'))).toBe(\n        asserts[file],\n      );\n    });\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["addTrailingPathSeparator"],"updatePoint":{"line":189,"column":11},"line":189,"code":"  it('works', () => {\n    expect(addTrailingPathSeparator('foo')).toEqual(\n      process.platform === 'win32' ? 'foo\\\\' : 'foo/',\n    );\n    expect(addTrailingPathSeparator('foo/')).toEqual(\n      process.platform === 'win32' ? 'foo\\\\' : 'foo/',\n    );\n  });","file":"pathUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"escapeShellArg","suites":["shellUtils"],"updatePoint":{"line":11,"column":20},"line":11,"code":"  it('escapeShellArg', () => {\n    expect(escapeShellArg('hello')).toBe(\"'hello'\");\n    expect(escapeShellArg('*')).toBe(\"'*'\");\n    expect(escapeShellArg('hello world')).toBe(\"'hello world'\");\n    expect(escapeShellArg(\"'hello'\")).toBe(\"\\\\''hello'\\\\'\");\n    expect(escapeShellArg('$(pwd)')).toBe(\"'$(pwd)'\");\n    expect(escapeShellArg('hello$(pwd)')).toBe(\"'hello$(pwd)'\");\n  });","file":"shellUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can create unique slugs","suites":["createSlugger"],"updatePoint":{"line":11,"column":29},"line":11,"code":"  it('can create unique slugs', () => {\n    const slugger = createSlugger();\n    // cSpell:ignore somevalue\n    expect(slugger.slug('Some$/vaLue$!^')).toBe('somevalue');\n    expect(slugger.slug('Some$/vaLue$!^')).toBe('somevalue-1');\n    expect(slugger.slug('Some$/vaLue$!^')).toBe('somevalue-2');\n    expect(slugger.slug('Some$/vaLue$!^-1')).toBe('somevalue-1-1');\n  });","file":"slugger.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"can create unique slugs respecting case","suites":["createSlugger"],"updatePoint":{"line":20,"column":45},"line":20,"code":"  it('can create unique slugs respecting case', () => {\n    const slugger = createSlugger();\n    const opt = {maintainCase: true};\n    expect(slugger.slug('Some$/vaLue$!^', opt)).toBe('SomevaLue');\n    expect(slugger.slug('Some$/vaLue$!^', opt)).toBe('SomevaLue-1');\n    expect(slugger.slug('Some$/vaLue$!^', opt)).toBe('SomevaLue-2');\n    expect(slugger.slug('Some$/vaLue$!^-1', opt)).toBe('SomevaLue-1-1');\n  });","file":"slugger.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes simple string tag","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":11,"column":34},"line":11,"code":"  it('normalizes simple string tag', () => {\n    const tagsPath = '/all/tags';\n    const input = 'tag';\n    const expectedOutput = {\n      label: 'tag',\n      permalink: `${tagsPath}/tag`,\n    };\n    expect(normalizeFrontMatterTags(tagsPath, [input])).toEqual([\n      expectedOutput,\n    ]);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes complex string tag","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":23,"column":35},"line":23,"code":"  it('normalizes complex string tag', () => {\n    const tagsPath = '/all/tags';\n    const input = 'some more Complex_tag';\n    const expectedOutput = {\n      label: 'some more Complex_tag',\n      permalink: `${tagsPath}/some-more-complex-tag`,\n    };\n    expect(normalizeFrontMatterTags(tagsPath, [input])).toEqual([\n      expectedOutput,\n    ]);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes simple object tag","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":35,"column":34},"line":35,"code":"  it('normalizes simple object tag', () => {\n    const tagsPath = '/all/tags';\n    const input = {label: 'tag', permalink: 'tagPermalink'};\n    const expectedOutput = {\n      label: 'tag',\n      permalink: `${tagsPath}/tagPermalink`,\n    };\n    expect(normalizeFrontMatterTags(tagsPath, [input])).toEqual([\n      expectedOutput,\n    ]);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes complex string tag with object tag","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":47,"column":51},"line":47,"code":"  it('normalizes complex string tag with object tag', () => {\n    const tagsPath = '/all/tags';\n    const input = {\n      label: 'tag complex Label',\n      permalink: '/MoreComplex/Permalink',\n    };\n    const expectedOutput = {\n      label: 'tag complex Label',\n      permalink: `${tagsPath}/MoreComplex/Permalink`,\n    };\n    expect(normalizeFrontMatterTags(tagsPath, [input])).toEqual([\n      expectedOutput,\n    ]);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes string list","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":65,"column":28},"line":65,"code":"  it('normalizes string list', () => {\n    const tagsPath = '/all/tags';\n    const input: Input = ['tag 1', 'tag-1', 'tag 3', 'tag1', 'tag-2'];\n    // Keep user input order but remove tags that lead to same permalink\n    const expectedOutput: Output = [\n      {\n        label: 'tag 1',\n        permalink: `${tagsPath}/tag-1`,\n      },\n      {\n        label: 'tag 3',\n        permalink: `${tagsPath}/tag-3`,\n      },\n      {\n        label: 'tag-2',\n        permalink: `${tagsPath}/tag-2`,\n      },\n    ];\n    expect(normalizeFrontMatterTags(tagsPath, input)).toEqual(expectedOutput);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"succeeds for empty list","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":86,"column":29},"line":86,"code":"  it('succeeds for empty list', () => {\n    expect(normalizeFrontMatterTags('/foo')).toEqual([]);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes complex mixed list","suites":["normalizeFrontMatterTags"],"updatePoint":{"line":90,"column":35},"line":90,"code":"  it('normalizes complex mixed list', () => {\n    const tagsPath = '/all/tags';\n    const input: Input = [\n      'tag 1',\n      {label: 'tag-1', permalink: '/tag-1'},\n      'tag 3',\n      'tag1',\n      {label: 'tag 4', permalink: '/tag4Permalink'},\n    ];\n    // Keep user input order but remove tags that lead to same permalink\n    const expectedOutput: Output = [\n      {\n        label: 'tag 1',\n        permalink: `${tagsPath}/tag-1`,\n      },\n      {\n        label: 'tag 3',\n        permalink: `${tagsPath}/tag-3`,\n      },\n      {\n        label: 'tag 4',\n        permalink: `${tagsPath}/tag4Permalink`,\n      },\n    ];\n    expect(normalizeFrontMatterTags(tagsPath, input)).toEqual(expectedOutput);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"groups items by tag permalink","suites":["groupTaggedItems"],"updatePoint":{"line":132,"column":35},"line":132,"code":"  it('groups items by tag permalink', () => {\n    const tagGuide = {label: 'Guide', permalink: '/guide'};\n    const tagTutorial = {label: 'Tutorial', permalink: '/tutorial'};\n    const tagAPI = {label: 'API', permalink: '/api'};\n\n    // This one will be grouped under same permalink and label is ignored\n    const tagTutorialOtherLabel = {\n      label: 'TutorialOtherLabel',\n      permalink: '/tutorial',\n    };\n\n    const item1: SomeTaggedItem = {\n      id: '1',\n      nested: {\n        tags: [\n          tagGuide,\n          tagTutorial,\n          tagAPI,\n          // Add some duplicates on purpose: they should be filtered\n          tagGuide,\n          tagTutorialOtherLabel,\n        ],\n      },\n    };\n    const item2: SomeTaggedItem = {\n      id: '2',\n      nested: {\n        tags: [tagAPI],\n      },\n    };\n    const item3: SomeTaggedItem = {\n      id: '3',\n      nested: {\n        tags: [tagTutorial],\n      },\n    };\n    const item4: SomeTaggedItem = {\n      id: '4',\n      nested: {\n        tags: [tagTutorialOtherLabel],\n      },\n    };\n\n    const input: Input = [item1, item2, item3, item4];\n\n    const expectedOutput: Output = {\n      '/guide': {tag: tagGuide, items: [item1]},\n      '/tutorial': {tag: tagTutorial, items: [item1, item3, item4]},\n      '/api': {tag: tagAPI, items: [item1, item2]},\n    };\n\n    expect(groupItems(input)).toEqual(expectedOutput);\n  });","file":"tags.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"normalizes urls correctly","suites":["normalizeUrl"],"updatePoint":{"line":24,"column":31},"line":24,"code":"  it('normalizes urls correctly', () => {\n    const asserts = [\n      {\n        input: [],\n        output: '',\n      },\n      {\n        input: ['/', ''],\n        output: '/',\n      },\n      {\n        input: ['', '/'],\n        output: '/',\n      },\n      {\n        input: ['/'],\n        output: '/',\n      },\n      {\n        input: [''],\n        output: '',\n      },\n      {\n        input: ['/', '/'],\n        output: '/',\n      },\n      {\n        input: ['/', 'docs'],\n        output: '/docs',\n      },\n      {\n        input: ['/', 'docs', 'en', 'next', 'blog'],\n        output: '/docs/en/next/blog',\n      },\n      {\n        input: ['/test/', '/docs', 'ro', 'doc1'],\n        output: '/test/docs/ro/doc1',\n      },\n      {\n        input: ['/test/', '/', 'ro', 'doc1'],\n        output: '/test/ro/doc1',\n      },\n      {\n        input: ['/', '/', '2020/02/29/leap-day'],\n        output: '/2020/02/29/leap-day',\n      },\n      {\n        input: ['', '/', 'ko', 'hello'],\n        output: '/ko/hello',\n      },\n      {\n        input: ['hello', 'world'],\n        output: 'hello/world',\n      },\n      {\n        input: ['http://www.google.com/', 'foo/bar', '?test=123'],\n        output: 'http://www.google.com/foo/bar?test=123',\n      },\n      {\n        input: ['http:', 'www.google.com///', 'foo/bar', '?test=123'],\n        output: 'http://www.google.com/foo/bar?test=123',\n      },\n      {\n        input: ['http://foobar.com', '', 'test'],\n        output: 'http://foobar.com/test',\n      },\n      {\n        input: ['http://foobar.com', '', 'test', '/'],\n        output: 'http://foobar.com/test/',\n      },\n      {\n        input: ['/', '', 'hello', '', '/', '/', '', '/', '/world'],\n        output: '/hello/world',\n      },\n      {\n        input: ['', '', '/tt', 'ko', 'hello'],\n        output: '/tt/ko/hello',\n      },\n      {\n        input: ['', '///hello///', '', '///world'],\n        output: '/hello/world',\n      },\n      {\n        input: ['', '/hello/', ''],\n        output: '/hello/',\n      },\n      {\n        input: ['', '/', ''],\n        output: '/',\n      },\n      {\n        input: ['///', '///'],\n        output: '/',\n      },\n      {\n        input: ['/', '/hello/world/', '///'],\n        output: '/hello/world/',\n      },\n      {\n        input: ['file://', '//hello/world/'],\n        output: 'file:///hello/world/',\n      },\n      {\n        input: ['file:', '/hello/world/'],\n        output: 'file:///hello/world/',\n      },\n      {\n        input: ['file://', '/hello/world/'],\n        output: 'file:///hello/world/',\n      },\n      {\n        input: ['file:', 'hello/world/'],\n        output: 'file://hello/world/',\n      },\n    ];\n    asserts.forEach((testCase) => {\n      expect(normalizeUrl(testCase.input)).toBe(testCase.output);\n    });\n\n    expect(() =>\n      // @ts-expect-error undefined for test\n      normalizeUrl(['http:example.com', undefined]),\n    ).toThrowErrorMatchingInlineSnapshot(\n      `\"Url must be a string. Received undefined\"`,\n    );\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns right path","suites":["getEditUrl"],"updatePoint":{"line":153,"column":24},"line":153,"code":"  it('returns right path', () => {\n    expect(\n      getEditUrl('foo/bar.md', 'https://github.com/facebook/docusaurus'),\n    ).toBe('https://github.com/facebook/docusaurus/foo/bar.md');\n    expect(\n      getEditUrl('foo/你好.md', 'https://github.com/facebook/docusaurus'),\n    ).toBe('https://github.com/facebook/docusaurus/foo/你好.md');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"always returns valid URL","suites":["getEditUrl"],"updatePoint":{"line":161,"column":30},"line":161,"code":"  it('always returns valid URL', () => {\n    expect(\n      getEditUrl('foo\\\\你好.md', 'https://github.com/facebook/docusaurus'),\n    ).toBe('https://github.com/facebook/docusaurus/foo/你好.md');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"returns undefined for undefined","suites":["getEditUrl"],"updatePoint":{"line":166,"column":37},"line":166,"code":"  it('returns undefined for undefined', () => {\n    expect(getEditUrl('foo/bar.md')).toBeUndefined();\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["fileToPath"],"updatePoint":{"line":172,"column":11},"line":172,"code":"  it('works', () => {\n    const asserts: {[key: string]: string} = {\n      'index.md': '/',\n      'hello/index.md': '/hello/',\n      'foo.md': '/foo',\n      'foo/bar.md': '/foo/bar',\n      'index.js': '/',\n      'hello/index.js': '/hello/',\n      'foo.js': '/foo',\n      'foo/bar.js': '/foo/bar',\n    };\n    Object.keys(asserts).forEach((file) => {\n      expect(fileToPath(file)).toBe(asserts[file]);\n    });\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["isValidPathname"],"updatePoint":{"line":190,"column":11},"line":190,"code":"  it('works', () => {\n    expect(isValidPathname('/')).toBe(true);\n    expect(isValidPathname('/hey')).toBe(true);\n    expect(isValidPathname('/hey/ho')).toBe(true);\n    expect(isValidPathname('/hey/ho/')).toBe(true);\n    expect(isValidPathname('/hey/h%C3%B4/')).toBe(true);\n    expect(isValidPathname('/hey///ho///')).toBe(true); // Unexpected but valid\n    expect(isValidPathname('/hey/héllô you')).toBe(true);\n\n    expect(isValidPathname('')).toBe(false);\n    expect(isValidPathname('hey')).toBe(false);\n    expect(isValidPathname('/hey?qs=ho')).toBe(false);\n    expect(isValidPathname('https://fb.com/hey')).toBe(false);\n    expect(isValidPathname('//hey')).toBe(false);\n    expect(isValidPathname('////')).toBe(false);\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"is no-op for path with trailing slash","suites":["addTrailingSlash"],"updatePoint":{"line":209,"column":43},"line":209,"code":"  it('is no-op for path with trailing slash', () => {\n    expect(addTrailingSlash('/abcd/')).toBe('/abcd/');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"adds / for path without trailing slash","suites":["addTrailingSlash"],"updatePoint":{"line":212,"column":44},"line":212,"code":"  it('adds / for path without trailing slash', () => {\n    expect(addTrailingSlash('/abcd')).toBe('/abcd/');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"is no-op for path with leading slash","suites":["addLeadingSlash"],"updatePoint":{"line":218,"column":42},"line":218,"code":"  it('is no-op for path with leading slash', () => {\n    expect(addLeadingSlash('/abc')).toBe('/abc');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"adds / for path without leading slash","suites":["addLeadingSlash"],"updatePoint":{"line":221,"column":43},"line":221,"code":"  it('adds / for path without leading slash', () => {\n    expect(addLeadingSlash('abc')).toBe('/abc');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"is no-op for path without trailing slash","suites":["removeTrailingSlash"],"updatePoint":{"line":227,"column":46},"line":227,"code":"  it('is no-op for path without trailing slash', () => {\n    expect(removeTrailingSlash('/abcd')).toBe('/abcd');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"removes / for path with trailing slash","suites":["removeTrailingSlash"],"updatePoint":{"line":230,"column":44},"line":230,"code":"  it('removes / for path with trailing slash', () => {\n    expect(removeTrailingSlash('/abcd/')).toBe('/abcd');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["resolvePathname"],"updatePoint":{"line":236,"column":11},"line":236,"code":"  it('works', () => {\n    // These tests are directly copied from https://github.com/mjackson/resolve-pathname/blob/master/modules/__tests__/resolvePathname-test.js\n    // Maybe we want to wrap that logic in the future?\n    expect(resolvePathname('c')).toBe('c');\n    expect(resolvePathname('c', 'a/b')).toBe('a/c');\n    expect(resolvePathname('/c', '/a/b')).toBe('/c');\n    expect(resolvePathname('', '/a/b')).toBe('/a/b');\n    expect(resolvePathname('../c', '/a/b')).toBe('/c');\n    expect(resolvePathname('c', '/a/b')).toBe('/a/c');\n    expect(resolvePathname('c', '/a/')).toBe('/a/c');\n    expect(resolvePathname('..', '/a/b')).toBe('/');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"works","suites":["encodePath"],"updatePoint":{"line":251,"column":11},"line":251,"code":"  it('works', () => {\n    expect(encodePath('a/foo/')).toBe('a/foo/');\n    // cSpell:ignore cfoo\n    expect(encodePath('a/<foo>/')).toBe('a/%3Cfoo%3E/');\n    expect(encodePath('a/你好/')).toBe('a/%E4%BD%A0%E5%A5%BD/');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"builds a normal ssh url","suites":["buildSshUrl"],"updatePoint":{"line":260,"column":29},"line":260,"code":"  it('builds a normal ssh url', () => {\n    const url = buildSshUrl('github.com', 'facebook', 'docusaurus');\n    expect(url).toBe('git@github.com:facebook/docusaurus.git');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"builds a ssh url with port","suites":["buildSshUrl"],"updatePoint":{"line":264,"column":32},"line":264,"code":"  it('builds a ssh url with port', () => {\n    const url = buildSshUrl('github.com', 'facebook', 'docusaurus', '422');\n    expect(url).toBe('ssh://git@github.com:422/facebook/docusaurus.git');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"builds a normal http url","suites":["buildHttpsUrl"],"updatePoint":{"line":271,"column":30},"line":271,"code":"  it('builds a normal http url', () => {\n    const url = buildHttpsUrl(\n      'user:pass',\n      'github.com',\n      'facebook',\n      'docusaurus',\n    );\n    expect(url).toBe('https://user:pass@github.com/facebook/docusaurus.git');\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"builds a normal http url with port","suites":["buildHttpsUrl"],"updatePoint":{"line":280,"column":40},"line":280,"code":"  it('builds a normal http url with port', () => {\n    const url = buildHttpsUrl(\n      'user:pass',\n      'github.com',\n      'facebook',\n      'docusaurus',\n      '5433',\n    );\n    expect(url).toBe(\n      'https://user:pass@github.com:5433/facebook/docusaurus.git',\n    );\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"recognizes explicit SSH protocol","suites":["hasSSHProtocol"],"updatePoint":{"line":295,"column":38},"line":295,"code":"  it('recognizes explicit SSH protocol', () => {\n    const url = 'ssh://git@github.com:422/facebook/docusaurus.git';\n    expect(hasSSHProtocol(url)).toBe(true);\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"recognizes implied SSH protocol","suites":["hasSSHProtocol"],"updatePoint":{"line":300,"column":37},"line":300,"code":"  it('recognizes implied SSH protocol', () => {\n    const url = 'git@github.com:facebook/docusaurus.git';\n    expect(hasSSHProtocol(url)).toBe(true);\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not recognize HTTPS with credentials","suites":["hasSSHProtocol"],"updatePoint":{"line":305,"column":47},"line":305,"code":"  it('does not recognize HTTPS with credentials', () => {\n    const url = 'https://user:pass@github.com/facebook/docusaurus.git';\n    expect(hasSSHProtocol(url)).toBe(false);\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"does not recognize plain HTTPS URL","suites":["hasSSHProtocol"],"updatePoint":{"line":310,"column":40},"line":310,"code":"  it('does not recognize plain HTTPS URL', () => {\n    const url = 'https://github.com:5433/facebook/docusaurus.git';\n    expect(hasSSHProtocol(url)).toBe(false);\n  });","file":"urlUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"plugin svgo/removeViewBox and removeTitle should be disabled","suites":["getFileLoaderUtils()"],"updatePoint":{"line":11,"column":66},"line":11,"code":"  it('plugin svgo/removeViewBox and removeTitle should be disabled', () => {\n    const {oneOf} = getFileLoaderUtils().rules.svg();\n    expect(oneOf![0]!.use).toContainEqual(\n      expect.objectContaining({\n        loader: require.resolve('@svgr/webpack'),\n        options: expect.objectContaining({\n          svgoConfig: {\n            plugins: [\n              {\n                name: 'preset-default',\n                params: {\n                  overrides: {\n                    removeTitle: false,\n                    removeViewBox: false,\n                  },\n                },\n              },\n            ],\n          },\n        }),\n      }),\n    );\n  });","file":"webpackUtils.test.ts","skipped":false,"dir":"packages/docusaurus-utils/src/__tests__"},{"name":"rejects unknown or unsupported file format","suites":["base64"],"updatePoint":{"line":15,"column":48},"line":15,"code":"  it('rejects unknown or unsupported file format', async () => {\n    await expect(base64(invalidPath)).rejects.toThrow(\n      /Error: Input file is missing or uses unsupported image format, lqip v.*/,\n    );\n  });","file":"lqip.test.ts","skipped":false,"dir":"packages/lqip-loader/src/__tests__"},{"name":"generates a valid base64","suites":["base64"],"updatePoint":{"line":21,"column":30},"line":21,"code":"  it('generates a valid base64', async () => {\n    const expectedBase64 = 'data:image/jpeg;base64,/9j/2wBDA';\n    await expect(base64(imgPath)).resolves.toContain(expectedBase64);\n  });","file":"lqip.test.ts","skipped":false,"dir":"packages/lqip-loader/src/__tests__"}]}