{"repo":"sideway/joi","url":"https://github.com/sideway/joi","branch":"master","configs":[{"lang":"js","dir":"browser/tests","framework":"mocha","pattern":"**/*.{js,ts}"},{"package":"joi","lang":"ts","dir":"test","framework":"mocha","pattern":"**/*.{js,ts}"}],"tests":[{"name":"should be able to create schemas","suites":["Joi"],"updatePoint":{"line":6,"column":38,"index":129},"line":6,"code":"  it('should be able to create schemas', () => {\n    Joi.string().min(5);\n  });","file":"index.js","skipped":false,"dir":"browser/tests"},{"name":"should be able to validate data","suites":["Joi"],"updatePoint":{"line":9,"column":37,"index":208},"line":9,"code":"  it('should be able to validate data', () => {\n    const schema = Joi.string().min(5);\n    Assert.ok(!schema.validate('123456').error);\n    Assert.ok(schema.validate('123').error);\n  });","file":"index.js","skipped":false,"dir":"browser/tests"},{"name":"fails using binary","suites":["Joi"],"updatePoint":{"line":14,"column":24,"index":383},"line":14,"code":"  it('fails using binary', () => {\n    Assert.throws(() => Joi.binary().min(1));\n    Assert.strictEqual(Joi.binary, undefined);\n  });","file":"index.js","skipped":false,"dir":"browser/tests"},{"name":"validates email","suites":["Joi"],"updatePoint":{"line":18,"column":21,"index":514},"line":18,"code":"  it('validates email', () => {\n    const schema = Joi.string().email({\n      tlds: false\n    }).required();\n    Assert.ok(!schema.validate('test@example.com').error);\n    Assert.ok(schema.validate('test@example.com ').error);\n    Assert.ok(!schema.validate('伊昭傑@郵件.商務').error);\n  });","file":"index.js","skipped":false,"dir":"browser/tests"},{"name":"should throw an exception if arguments were passed.","suites":["any"],"updatePoint":{"line":19,"column":59},"line":19,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.any('invalid argument.')).to.throw('The any type does not allow arguments');\n    });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows valid values to be set","suites":["any","allow()"],"updatePoint":{"line":26,"column":41},"line":26,"code":"        it('allows valid values to be set', () => {\n\n            const schema = Joi.any().allow(true, 1, 'hello', new Date());\n            Helper.validate(schema, [\n                [true, true],\n                [1, true],\n                ['hello', true],\n                [new Date(), true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides previous values","suites":["any","allow()"],"updatePoint":{"line":37,"column":37},"line":37,"code":"        it('overrides previous values', () => {\n\n            const schema = Joi.object().allow(1).allow(Joi.override, 2);\n            Helper.validate(schema, [\n                [1, false, '\"value\" must be of type object'],\n                [2, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"clears previous values","suites":["any","allow()"],"updatePoint":{"line":46,"column":34},"line":46,"code":"        it('clears previous values', () => {\n\n            const schema = Joi.object().allow(1).allow(Joi.override);\n            Helper.validate(schema, [\n                [1, false, '\"value\" must be of type object'],\n                [2, false, '\"value\" must be of type object'],\n                [{}, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"ignores empty override","suites":["any","allow()"],"updatePoint":{"line":56,"column":34},"line":56,"code":"        it('ignores empty override', () => {\n\n            const schema = Joi.allow(Joi.override);\n            expect(schema._valids).to.be.null();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when passed undefined","suites":["any","allow()"],"updatePoint":{"line":62,"column":40},"line":62,"code":"        it('throws when passed undefined', () => {\n\n            expect(() => Joi.any().allow(undefined)).to.throw('Cannot call allow/valid/invalid with undefined');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when override is not first item","suites":["any","allow()"],"updatePoint":{"line":67,"column":50},"line":67,"code":"        it('throws when override is not first item', () => {\n\n            expect(() => Joi.any().allow(1, Joi.override)).to.throw('Override must be the first value');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid argument","suites":["any","alter()"],"updatePoint":{"line":75,"column":38},"line":75,"code":"        it('errors on invalid argument', () => {\n\n            expect(() => Joi.number().alter()).to.throw('Invalid targets argument');\n            expect(() => Joi.number().alter('x')).to.throw('Invalid targets argument');\n            expect(() => Joi.number().alter([])).to.throw('Invalid targets argument');\n\n            expect(() => Joi.number().alter({ xx: 'x' })).to.throw('Alteration adjuster for xx must be a function');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"returns matching artifacts","suites":["any","artifact()"],"updatePoint":{"line":87,"column":38},"line":87,"code":"        it('returns matching artifacts', async () => {\n\n            const sym = Symbol('3');\n            const schema = Joi.object({\n                a: [\n                    Joi.string().artifact(1),\n                    Joi.number().artifact('2')\n                ],\n                b: Joi.boolean().artifact(sym),\n                c: {\n                    d: {\n                        e: Joi.any().artifact(4)\n                    }\n                },\n                f: Joi.array().items(Joi.string(), Joi.number().artifact(0))\n            });\n\n            Helper.validate(schema, [\n                [{ a: '5', b: true, c: { d: { e: {} } } }, true, { a: '5', b: true, c: { d: { e: {} } } }]\n            ]);\n\n            expect(schema.validate({ a: '5', b: true, c: { d: { e: {} } } }).artifacts).to.equal(new Map([[1, [['a']]], [sym, [['b']]], [4, [['c', 'd', 'e']]]]));\n            expect(schema.validate({ a: 5, c: { d: { e: {} } } }).artifacts).to.equal(new Map([['2', [['a']]], [4, [['c', 'd', 'e']]]]));\n\n            expect((await schema.validateAsync({ a: 5 })).artifacts).to.not.exist();\n            expect((await schema.validateAsync({ a: 5 }, { artifacts: true })).artifacts).to.equal(new Map([['2', [['a']]]]));\n            expect((await schema.validateAsync({ f: [5, 'x', 6] }, { artifacts: true })).artifacts).to.equal(new Map([[0, [['f', 0], ['f', 2]]]]));\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"cancels cast","suites":["any","cast()"],"updatePoint":{"line":119,"column":24},"line":119,"code":"        it('cancels cast', () => {\n\n            const schema = Joi.number().cast('string').cast(false);\n            Helper.validate(schema, [\n                ['123', true, 123]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when schema is not any","suites":["any","concat()"],"updatePoint":{"line":130,"column":41},"line":130,"code":"        it('throws when schema is not any', () => {\n\n            expect(() => Joi.string().concat(Joi.number())).to.throw('Cannot merge type string with another type: number');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when schema is missing","suites":["any","concat()"],"updatePoint":{"line":135,"column":41},"line":135,"code":"        it('throws when schema is missing', () => {\n\n            expect(() => Joi.string().concat()).to.throw('Invalid schema object');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when schema is invalid","suites":["any","concat()"],"updatePoint":{"line":140,"column":41},"line":140,"code":"        it('throws when schema is invalid', () => {\n\n            expect(() => Joi.string().concat(1)).to.throw('Invalid schema object');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (settings)","suites":["any","concat()"],"updatePoint":{"line":145,"column":41},"line":145,"code":"        it('merges two schemas (settings)', () => {\n\n            const a = Joi.number().prefs({ convert: true });\n            const b = Joi.prefs({ convert: false });\n\n            Helper.validate(a, [\n                [1, true],\n                ['1', true, 1]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [1, true],\n                ['1', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: '1' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (valid)","suites":["any","concat()"],"updatePoint":{"line":166,"column":38},"line":166,"code":"        it('merges two schemas (valid)', () => {\n\n            const a = Joi.string().valid('a');\n            const b = Joi.string().valid('b');\n\n            Helper.validate(a, [\n                ['a', true],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                ['b', true],\n                ['a', false, {\n                    message: '\"value\" must be [b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['b'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                ['a', true],\n                ['b', true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (invalid)","suites":["any","concat()"],"updatePoint":{"line":197,"column":40},"line":197,"code":"        it('merges two schemas (invalid)', () => {\n\n            const a = Joi.string().invalid('a');\n            const b = Joi.invalid('b');\n\n            Helper.validate(a, [\n                ['b', true],\n                ['a', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'a', invalids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                ['a', true],\n                ['b', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b', invalids: ['b'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                ['a', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'a', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b', invalids: ['a', 'b'], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (valid/invalid)","suites":["any","concat()"],"updatePoint":{"line":238,"column":46},"line":238,"code":"        it('merges two schemas (valid/invalid)', () => {\n\n            const a = Joi.string().valid('a').invalid('b');\n            const b = Joi.string().valid('b').invalid('a');\n\n            Helper.validate(a, [\n                ['a', true],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                ['b', true],\n                ['a', false, {\n                    message: '\"value\" must be [b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['b'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                ['b', true],\n                ['a', false, {\n                    message: '\"value\" must be [b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['b'], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (tests)","suites":["any","concat()"],"updatePoint":{"line":274,"column":38},"line":274,"code":"        it('merges two schemas (tests)', () => {\n\n            const a = Joi.number().min(5);\n            const b = Joi.number().max(10);\n\n            Helper.validate(a, [\n                [4, false, {\n                    message: '\"value\" must be greater than or equal to 5',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 5, value: 4, label: 'value' }\n                }],\n                [11, true]\n            ]);\n\n            Helper.validate(b, [\n                [6, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [4, false, {\n                    message: '\"value\" must be greater than or equal to 5',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 5, value: 4, label: 'value' }\n                }],\n                [6, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (overlap rules)","suites":["any","concat()"],"updatePoint":{"line":316,"column":46},"line":316,"code":"        it('merges two schemas (overlap rules)', () => {\n\n            const a = Joi.number().min(5);\n            const b = Joi.number().min(10);\n\n            Helper.validate(a.concat(b), [\n                [11, true],\n                [4, false, {\n                    message: '\"value\" must be greater than or equal to 10',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 10, value: 4, label: 'value' }\n                }],\n                [6, false, {\n                    message: '\"value\" must be greater than or equal to 10',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 10, value: 6, label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (flags)","suites":["any","concat()"],"updatePoint":{"line":338,"column":38},"line":338,"code":"        it('merges two schemas (flags)', () => {\n\n            const a = Joi.string().valid('a');\n            const b = Joi.string().insensitive();\n\n            Helper.validate(a, [\n                ['a', true],\n                ['A', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'A', valids: ['a'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                ['a', true, 'a'],\n                ['A', true, 'a'],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (flags with empty on both sides)","suites":["any","concat()"],"updatePoint":{"line":371,"column":63},"line":371,"code":"        it('merges two schemas (flags with empty on both sides)', () => {\n\n            const a = Joi.string().valid('a').empty('');\n            const b = Joi.string().insensitive().empty(' ');\n\n            Helper.validate(a, [\n                ['a', true],\n                ['A', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'A', valids: ['a'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }],\n                ['', true, undefined],\n                [' ', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: ' ', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            const ab = a.concat(b);\n            Helper.validate(ab, [\n                ['a', true, 'a'],\n                ['A', true, 'a'],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }],\n                ['', true, undefined],\n                [' ', true, undefined]\n            ]);\n\n            expect(ab.describe()).to.equal({\n                type: 'string',\n                flags: {\n                    only: true,\n                    empty: {\n                        type: 'any',\n                        flags: { only: true },\n                        allow: ['', ' ']\n                    },\n                    insensitive: true\n                },\n                allow: ['a']\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two schemas (flags with empty on one side)","suites":["any","concat()"],"updatePoint":{"line":428,"column":61},"line":428,"code":"        it('merges two schemas (flags with empty on one side)', () => {\n\n            const a = Joi.string().valid('a').empty('');\n            const b = Joi.string().insensitive();\n\n            Helper.validate(a, [\n                ['a', true],\n                ['A', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'A', valids: ['a'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }],\n                ['', true, undefined],\n                [' ', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: ' ', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            const ab = a.concat(b);\n            Helper.validate(ab, [\n                ['a', true, 'a'],\n                ['A', true, 'a'],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }],\n                ['', true, undefined],\n                [' ', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: ' ', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            expect(ab.describe()).to.equal({\n                type: 'string',\n                flags: {\n                    only: true,\n                    empty: {\n                        type: 'any',\n                        flags: { only: true },\n                        allow: ['']\n                    },\n                    insensitive: true\n                },\n                allow: ['a']\n            });\n\n            const ba = b.concat(a);\n            Helper.validate(ba, [\n                ['a', true, 'a'],\n                ['A', true, 'a'],\n                ['b', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'b', valids: ['a'], label: 'value' }\n                }],\n                ['', true, undefined],\n                [' ', false, {\n                    message: '\"value\" must be [a]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: ' ', valids: ['a'], label: 'value' }\n                }]\n            ]);\n\n            expect(ba.describe()).to.equal({\n                type: 'string',\n                flags: {\n                    only: true,\n                    empty: {\n                        type: 'any',\n                        flags: { only: true },\n                        allow: ['']\n                    },\n                    insensitive: true\n                },\n                allow: ['a']\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides and append information","suites":["any","concat()"],"updatePoint":{"line":523,"column":44},"line":523,"code":"        it('overrides and append information', () => {\n\n            const a = Joi.any().description('a').unit('a').tag('a').example('a');\n            const b = Joi.any().description('b').unit('b').tag('b').example('b');\n\n            const desc = a.concat(b).describe();\n            expect(desc).to.equal({\n                type: 'any',\n                tags: ['a', 'b'],\n                examples: ['a', 'b'],\n                flags: {\n                    description: 'b',\n                    unit: 'b'\n                }\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (any key + specific key)","suites":["any","concat()"],"updatePoint":{"line":540,"column":55},"line":540,"code":"        it('merges two objects (any key + specific key)', () => {\n\n            const a = Joi.object();\n            const b = Joi.object({ b: 1 });\n\n            Helper.validate(a, [\n                [{ b: 1 }, true],\n                [{ b: 2 }, true]\n            ]);\n\n            Helper.validate(b, [\n                [{ b: 1 }, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [{ b: 1 }, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(b.concat(a), [\n                [{ b: 1 }, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (no key + any key)","suites":["any","concat()"],"updatePoint":{"line":581,"column":49},"line":581,"code":"        it('merges two objects (no key + any key)', () => {\n\n            const a = Joi.object({});\n            const b = Joi.object();\n\n            Helper.validate(a, [\n                [{}, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 2 }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{}, true],\n                [{ b: 2 }, true]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [{}, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 2 }\n                }]\n            ]);\n\n            Helper.validate(b.concat(a), [\n                [{}, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 2 }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (key + key)","suites":["any","concat()"],"updatePoint":{"line":622,"column":42},"line":622,"code":"        it('merges two objects (key + key)', () => {\n\n            const a = Joi.object({ a: 1 });\n            const b = Joi.object({ b: 2 });\n\n            Helper.validate(a, [\n                [{ a: 1 }, true],\n                [{ b: 2 }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 2 }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{ a: 1 }, false, {\n                    message: '\"a\" is not allowed',\n                    path: ['a'],\n                    type: 'object.unknown',\n                    context: { child: 'a', label: 'a', key: 'a', value: 1 }\n                }],\n                [{ b: 2 }, true]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [{ a: 1 }, true],\n                [{ b: 2 }, true]\n            ]);\n\n            Helper.validate(b.concat(a), [\n                [{ a: 1 }, true],\n                [{ b: 2 }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (renames)","suites":["any","concat()"],"updatePoint":{"line":658,"column":40},"line":658,"code":"        it('merges two objects (renames)', () => {\n\n            const a = Joi.object({ a: 1 }).rename('c', 'a');\n            const b = Joi.object({ b: 2 }).rename('d', 'b');\n\n            const schema = a.concat(b);\n            Helper.validate(schema, [\n                [{ c: 1, d: 2 }, true, { a: 1, b: 2 }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (deps)","suites":["any","concat()"],"updatePoint":{"line":669,"column":37},"line":669,"code":"        it('merges two objects (deps)', () => {\n\n            const a = Joi.object({ a: 1 });\n            const b = Joi.object({ b: 2 }).and('b', 'a');\n\n            const schema = a.concat(b);\n            Helper.validate(schema, [\n                [{ a: 1, b: 2 }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (same key)","suites":["any","concat()"],"updatePoint":{"line":680,"column":41},"line":680,"code":"        it('merges two objects (same key)', () => {\n\n            const a = Joi.object({ a: Joi.valid(1), b: Joi.valid(2), c: Joi.valid(3) });\n            const b = Joi.object({ b: Joi.valid(1), c: Joi.valid(2), a: Joi.valid(3) });\n\n            const ab = a.concat(b);\n\n            Helper.validate(a, [\n                [{ a: 1, b: 2, c: 3 }, true],\n                [{ a: 3, b: 1, c: 2 }, false, {\n                    message: '\"a\" must be [1]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [1], label: 'a', key: 'a' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{ a: 1, b: 2, c: 3 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 3, b: 1, c: 2 }, true]\n            ]);\n\n            Helper.validate(ab, [\n                [{ a: 1, b: 2, c: 3 }, true],\n                [{ a: 3, b: 1, c: 2 }, true],\n                [{ a: 1, b: 2, c: 2 }, true],\n                [{ a: 1, b: 2, c: 4 }, false, {\n                    message: '\"c\" must be one of [3, 2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 4, valids: [3, 2], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (same key, implicit override)","suites":["any","concat()"],"updatePoint":{"line":720,"column":60},"line":720,"code":"        it('merges two objects (same key, implicit override)', () => {\n\n            const a = Joi.object({ a: 1, b: 2, c: 3 });\n            const b = Joi.object({ b: 1, c: 2, a: 3 });\n\n            const ab = a.concat(b);\n\n            Helper.validate(a, [\n                [{ a: 1, b: 2, c: 3 }, true],\n                [{ a: 3, b: 1, c: 2 }, false, {\n                    message: '\"a\" must be [1]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [1], label: 'a', key: 'a' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{ a: 3, b: 1, c: 2 }, true],\n                [{ a: 1, b: 2, c: 3 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(ab, [\n                [{ a: 3, b: 1, c: 2 }, true],\n                [{ b: 2, c: 3 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 2, c: 3 }, false, {\n                    message: '\"a\" must be [3]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 1, valids: [3], label: 'a', key: 'a' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two objects (same key, explicit override)","suites":["any","concat()"],"updatePoint":{"line":764,"column":60},"line":764,"code":"        it('merges two objects (same key, explicit override)', () => {\n\n            const a = Joi.object({ a: Joi.valid(Joi.override, 1), b: Joi.valid(Joi.override, 2), c: Joi.valid(Joi.override, 3) });\n            const b = Joi.object({ b: Joi.valid(Joi.override, 1), c: Joi.valid(Joi.override, 2), a: Joi.valid(Joi.override, 3) });\n\n            const ab = a.concat(b);\n\n            Helper.validate(a, [\n                [{ a: 1, b: 2, c: 3 }, true],\n                [{ a: 3, b: 1, c: 2 }, false, {\n                    message: '\"a\" must be [1]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [1], label: 'a', key: 'a' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{ a: 3, b: 1, c: 2 }, true],\n                [{ a: 1, b: 2, c: 3 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(ab, [\n                [{ a: 3, b: 1, c: 2 }, true],\n                [{ b: 2, c: 3 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 2, c: 3 }, false, {\n                    message: '\"a\" must be [3]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 1, valids: [3], label: 'a', key: 'a' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when schema key types do not match","suites":["any","concat()"],"updatePoint":{"line":808,"column":53},"line":808,"code":"        it('throws when schema key types do not match', () => {\n\n            const a = Joi.object({ a: Joi.number() });\n            const b = Joi.object({ a: Joi.string() });\n\n            expect(() => a.concat(b)).to.throw('Cannot merge type number with another type: string');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges two alternatives with references","suites":["any","concat()"],"updatePoint":{"line":816,"column":51},"line":816,"code":"        it('merges two alternatives with references', () => {\n\n            const ref1 = Joi.ref('a.c');\n            const ref2 = Joi.ref('c');\n            const schema = Joi.object({\n                a: { c: Joi.number() },\n                b: Joi.alternatives(ref1).concat(Joi.alternatives(ref2)),\n                c: Joi.number()\n            });\n\n            Helper.validate(schema, [\n                [{ a: {} }, true],\n                [{ a: { c: '5' }, b: 5 }, true, { a: { c: 5 }, b: 5 }],\n                [{ a: { c: '5' }, b: 6, c: '6' }, true, { a: { c: 5 }, b: 6, c: 6 }],\n                [{ a: { c: '5' }, b: 7, c: '6' }, false, {\n                    message: '\"b\" must be one of [ref:a.c, ref:c]',\n                    type: 'alternatives.types',\n                    path: ['b'],\n                    context: {\n                        key: 'b',\n                        label: 'b',\n                        value: 7,\n                        types: [ref1, ref2]\n                    }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges meta properly","suites":["any","concat()"],"updatePoint":{"line":844,"column":32},"line":844,"code":"        it('merges meta properly', () => {\n\n            const metaA = { a: 1 };\n            const metaB = { b: 1 };\n            const a = Joi.any().meta(metaA);\n            const b = Joi.any().meta(metaB);\n            const c = Joi.any();\n            const d = Joi.any();\n\n            expect(a.concat(b).describe().metas).to.equal([{ a: 1 }, { b: 1 }]);\n            expect(a.concat(c).describe().metas).to.equal([metaA]);\n            expect(b.concat(c).describe().metas).to.equal([metaB]);\n            expect(c.concat(d).describe().metas).to.not.exist();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges into an any","suites":["any","concat()"],"updatePoint":{"line":859,"column":30},"line":859,"code":"        it('merges into an any', () => {\n\n            const a = Joi.any().required();\n            const b = Joi.number().valid(0);\n\n            expect(() => a.concat(b)).to.not.throw();\n\n            const schema = a.concat(b);\n            Helper.validate(schema, [\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }],\n                [1, false, {\n                    message: '\"value\" must be [0]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 1, valids: [0], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the value","suites":["any","default()"],"updatePoint":{"line":886,"column":26},"line":886,"code":"        it('sets the value', () => {\n\n            const schema = Joi.object({ foo: Joi.string().default('test') });\n            Helper.validate(schema, [\n                [{}, true, { foo: 'test' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows passing description as a property of a default method","suites":["any","default()"],"updatePoint":{"line":894,"column":72},"line":894,"code":"        it('allows passing description as a property of a default method', () => {\n\n            const defaultFn = function () {\n\n                return 'test';\n            };\n\n            defaultFn.description = 'test';\n\n            expect(() => Joi.object({ foo: Joi.string().default(defaultFn) })).to.not.throw();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the value when passing a method","suites":["any","default()"],"updatePoint":{"line":906,"column":48},"line":906,"code":"        it('sets the value when passing a method', () => {\n\n            const schema = Joi.object({\n                foo: Joi.string().default(() => {\n\n                    return 'test';\n                })\n            });\n\n            Helper.validate(schema, [\n                [{}, true, { foo: 'test' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"executes the default method each time validate is called","suites":["any","default()"],"updatePoint":{"line":920,"column":68},"line":920,"code":"        it('executes the default method each time validate is called', () => {\n\n            let count = 0;\n            const schema = Joi.object({\n                foo: Joi.number().default(() => ++count)\n            });\n\n            const input = {};\n            expect(schema.validate(input)).to.equal({ value: { foo: 1 } });\n            expect(schema.validate(input)).to.equal({ value: { foo: 2 } });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"passes a clone of the parent if the default method accepts an argument","suites":["any","default()"],"updatePoint":{"line":932,"column":82},"line":932,"code":"        it('passes a clone of the parent if the default method accepts an argument', () => {\n\n            const schema = Joi.object({\n                foo: Joi.string().default((parent, { prefs }) => {\n\n                    expect(prefs.abortEarly).to.be.true();\n                    return parent.bar + 'ing';\n                }),\n                bar: Joi.string()\n            });\n\n            Helper.validate(schema, [\n                [{ bar: 'test' }, true, { bar: 'test', foo: 'testing' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not modify the original object when modifying the clone in a default method","suites":["any","default()"],"updatePoint":{"line":948,"column":92},"line":948,"code":"        it('does not modify the original object when modifying the clone in a default method', () => {\n\n            const defaultFn = function (parent) {\n\n                parent.bar = 'broken';\n                return 'test';\n            };\n\n            defaultFn.description = 'testing';\n\n            const schema = Joi.object({\n                foo: Joi.string().default(defaultFn),\n                bar: Joi.string()\n            });\n\n            Helper.validate(schema, [\n                [{ bar: 'test' }, true, { bar: 'test', foo: 'test' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"passes undefined as the parent if the default method has no parent","suites":["any","default()"],"updatePoint":{"line":968,"column":78},"line":968,"code":"        it('passes undefined as the parent if the default method has no parent', () => {\n\n            let c;\n            let methodCalled = false;\n            const schema = Joi.string().default((parent) => {\n\n                methodCalled = true;\n                c = parent;\n                return 'test';\n            });\n\n            Helper.validate(schema, [\n                [undefined, true, 'test']\n            ]);\n\n            expect(methodCalled).to.equal(true);\n            expect(c).to.equal(undefined);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets literal function default","suites":["any","default()"],"updatePoint":{"line":987,"column":41},"line":987,"code":"        it('sets literal function default', () => {\n\n            const func = () => 'just a function';\n            const schema = Joi.function().default(func, { literal: true });\n\n            Helper.validate(schema, [\n                [undefined, true, func]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows passing a method that generates a default method when validating a function","suites":["any","default()"],"updatePoint":{"line":997,"column":94},"line":997,"code":"        it('allows passing a method that generates a default method when validating a function', () => {\n\n            const defaultFn = function () {\n\n                return 'just a function';\n            };\n\n            const defaultGeneratorFn = function () {\n\n                return defaultFn;\n            };\n\n            const schema = Joi.function().default(defaultGeneratorFn);\n            Helper.validate(schema, [[undefined, true, defaultFn]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows passing a ref as a default without a description","suites":["any","default()"],"updatePoint":{"line":1013,"column":67},"line":1013,"code":"        it('allows passing a ref as a default without a description', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.string().default(Joi.ref('a'))\n            });\n\n            Helper.validate(schema, [[{ a: 'test' }, true, { a: 'test', b: 'test' }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"ignores description when passing a ref as a default","suites":["any","default()"],"updatePoint":{"line":1023,"column":63},"line":1023,"code":"        it('ignores description when passing a ref as a default', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.string().default(Joi.ref('a'))\n            });\n\n            Helper.validate(schema, [[{ a: 'test' }, true, { a: 'test', b: 'test' }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"catches errors in default methods","suites":["any","default()"],"updatePoint":{"line":1033,"column":45},"line":1033,"code":"        it('catches errors in default methods', () => {\n\n            const error = new Error('boom');\n            const defaultFn = function () {\n\n                throw error;\n            };\n\n            defaultFn.description = 'broken method';\n\n            const schema = Joi.string().default(defaultFn);\n\n            Helper.validate(schema, [\n                [undefined, false, {\n                    message: '\"value\" threw an error when running default method',\n                    path: [],\n                    type: 'any.default',\n                    context: { error, label: 'value', value: null }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should not overide a value when value is given","suites":["any","default()"],"updatePoint":{"line":1055,"column":58},"line":1055,"code":"        it('should not overide a value when value is given', () => {\n\n            const schema = Joi.object({ foo: Joi.string().default('bar') });\n            const input = { foo: 'test' };\n            Helper.validate(schema, [[input, true, { foo: 'test' }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on condition (outer)","suites":["any","default()"],"updatePoint":{"line":1062,"column":49},"line":1062,"code":"        it('sets value based on condition (outer)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean()\n                    .default(false)\n                    .when('a', { is: true, then: Joi.required(), otherwise: Joi.forbidden() })\n            });\n\n            Helper.validate(schema, [[{ a: false }, true, { a: false, b: false }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on condition (inner)","suites":["any","default()"],"updatePoint":{"line":1074,"column":49},"line":1074,"code":"        it('sets value based on condition (inner)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean().when('a', { is: true, then: Joi.any().default(false), otherwise: Joi.forbidden() })\n            });\n\n            Helper.validate(schema, [[{ a: true }, true, { a: true, b: false }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"creates deep defaults","suites":["any","default()"],"updatePoint":{"line":1084,"column":33},"line":1084,"code":"        it('creates deep defaults', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().default(42),\n                b: Joi.object({\n                    c: Joi.boolean().default(true),\n                    d: Joi.string()\n                })\n                    .default()\n            })\n                .default();\n\n            Helper.validate(schema, [\n                [undefined, true, { a: 42, b: { c: true } }],\n                [{ a: 24 }, true, { a: 24, b: { c: true } }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors when missing value on non-object schemas","suites":["any","default()"],"updatePoint":{"line":1102,"column":59},"line":1102,"code":"        it('errors when missing value on non-object schemas', () => {\n\n            expect(() => Joi.number().default()).to.throw('Missing default value');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should set default value as a clone","suites":["any","default()"],"updatePoint":{"line":1107,"column":47},"line":1107,"code":"        it('should set default value as a clone', () => {\n\n            const defaultValue = { bar: 'val' };\n            const schema = Joi.object({ foo: Joi.object().default(defaultValue) });\n            const input = {};\n\n            const value = schema.validate(input).value;\n            expect(value.foo).to.not.shallow.equal(defaultValue);\n            expect(value.foo).to.only.include({ bar: 'val' });\n\n            value.foo.bar = 'mutated';\n\n            const value2 = schema.validate(input).value;\n            expect(value2.foo).to.not.shallow.equal(defaultValue);\n            expect(value2.foo).to.only.include({ bar: 'val' });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should not apply default values if the noDefaults option is enquire","suites":["any","default()"],"updatePoint":{"line":1124,"column":79},"line":1124,"code":"        it('should not apply default values if the noDefaults option is enquire', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().default('foo'),\n                b: Joi.number()\n            });\n\n            const input = { b: 42 };\n            Helper.validate(schema, { noDefaults: true }, [[input, true, { b: 42 }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should not apply default values from functions if the noDefaults option is enquire","suites":["any","default()"],"updatePoint":{"line":1135,"column":94},"line":1135,"code":"        it('should not apply default values from functions if the noDefaults option is enquire', () => {\n\n            const func = function () {\n\n                return 'foo';\n            };\n\n            func.description = 'test parameter';\n\n            const schema = Joi.object({\n                a: Joi.string().default(func),\n                b: Joi.number()\n            });\n\n            const input = { b: 42 };\n            Helper.validate(schema, { noDefaults: true }, [[input, true, { b: 42 }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should not apply default values from references if the noDefaults option is enquire","suites":["any","default()"],"updatePoint":{"line":1153,"column":95},"line":1153,"code":"        it('should not apply default values from references if the noDefaults option is enquire', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().default(Joi.ref('b')),\n                b: Joi.number()\n            });\n\n            const input = { b: 42 };\n            Helper.validate(schema, { noDefaults: true }, [[input, true, { b: 42 }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should be able to support both empty and noDefaults","suites":["any","default()"],"updatePoint":{"line":1164,"column":63},"line":1164,"code":"        it('should be able to support both empty and noDefaults', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().empty('foo').default('bar'),\n                b: Joi.number()\n            });\n\n            const input = { a: 'foo', b: 42 };\n            Helper.validate(schema, { noDefaults: true }, [[input, true, { b: 42 }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the description","suites":["any","description()"],"updatePoint":{"line":1178,"column":32},"line":1178,"code":"        it('sets the description', () => {\n\n            const b = Joi.any().description('my description');\n            expect(b.describe().flags.description).to.equal('my description');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when description is missing","suites":["any","description()"],"updatePoint":{"line":1184,"column":46},"line":1184,"code":"        it('throws when description is missing', () => {\n\n            expect(() => Joi.any().description()).to.throw('Description must be a non-empty string');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should void values when considered empty","suites":["any","empty()"],"updatePoint":{"line":1192,"column":52},"line":1192,"code":"        it('should void values when considered empty', () => {\n\n            const schema = Joi.string().empty('');\n            Helper.validate(schema, [\n                [undefined, true, undefined],\n                ['abc', true, 'abc'],\n                ['', true, undefined]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should void values with trim","suites":["any","empty()"],"updatePoint":{"line":1202,"column":40},"line":1202,"code":"        it('should void values with trim', () => {\n\n            const schema = Joi.string().empty('').trim();\n            Helper.validate(schema, [\n                [undefined, true, undefined],\n                ['abc', true, 'abc'],\n                ['', true, undefined],\n                [' ', true, undefined],\n                ['       ', true, undefined],\n                [42, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 42, label: 'value' }\n                }]\n            ]);\n\n            Helper.validate(schema.trim(false), [\n                [undefined, true, undefined],\n                ['abc', true, 'abc'],\n                ['', true, undefined],\n                [' ', true, ' ']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should override any previous empty","suites":["any","empty()"],"updatePoint":{"line":1227,"column":46},"line":1227,"code":"        it('should override any previous empty', () => {\n\n            const schema = Joi.string().empty('').empty('abc');\n            Helper.validate(schema, [\n                [undefined, true, undefined],\n                ['abc', true, undefined],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                ['def', true, 'def']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should be possible to reset the empty value","suites":["any","empty()"],"updatePoint":{"line":1243,"column":55},"line":1243,"code":"        it('should be possible to reset the empty value', () => {\n\n            const schema = Joi.string().empty('').empty();\n            Helper.validate(schema, [\n                [undefined, true, undefined],\n                ['abc', true, 'abc'],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should have no effect if only reset is used","suites":["any","empty()"],"updatePoint":{"line":1258,"column":55},"line":1258,"code":"        it('should have no effect if only reset is used', () => {\n\n            const schema = Joi.string().empty();\n            Helper.validate(schema, [\n                [undefined, true, undefined],\n                ['abc', true, 'abc'],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should remove empty flag if only reset is used","suites":["any","empty()"],"updatePoint":{"line":1273,"column":58},"line":1273,"code":"        it('should remove empty flag if only reset is used', () => {\n\n            const schema = Joi.string().empty('').empty();\n            expect(schema._flags.empty).to.not.exist();\n            expect(schema.describe().flags).to.not.exist();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should work with dependencies","suites":["any","empty()"],"updatePoint":{"line":1280,"column":41},"line":1280,"code":"        it('should work with dependencies', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().empty(''),\n                b: Joi.string().empty('')\n            }).or('a', 'b');\n\n            Helper.validate(schema, [\n                [{}, false, {\n                    message: '\"value\" must contain at least one of [a, b]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['a', 'b'],\n                        peersWithLabels: ['a', 'b'],\n                        label: 'value',\n                        value: {}\n                    }\n                }],\n                [{ a: '' }, false, {\n                    message: '\"value\" must contain at least one of [a, b]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['a', 'b'],\n                        peersWithLabels: ['a', 'b'],\n                        label: 'value',\n                        value: {}\n                    }\n                }],\n                [{ a: 'a' }, true, { a: 'a' }],\n                [{ a: '', b: 'b' }, true, { b: 'b' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports references","suites":["any","empty()"],"updatePoint":{"line":1315,"column":31},"line":1315,"code":"        it('supports references', () => {\n\n            const schema = Joi.object({\n                empty: Joi.string(),\n                a: Joi.string().empty(Joi.ref('empty'))\n            });\n\n            Helper.validate(schema, [\n                [{ empty: 'x', a: 'x' }, true, { empty: 'x' }],\n                [{ empty: 'y', a: 'x' }, true, { empty: 'y', a: 'x' }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates valid values","suites":["any","equal()"],"updatePoint":{"line":1331,"column":34},"line":1331,"code":"        it('validates valid values', () => {\n\n            Helper.validate(Joi.equal(4), [\n                [4, true],\n                [5, false, {\n                    message: '\"value\" must be [4]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 5, valids: [4], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"returns custom error","suites":["any","error()"],"updatePoint":{"line":1347,"column":32},"line":1347,"code":"        it('returns custom error', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: {\n                    c: Joi.number().strict().error(new Error('Really wanted a number!'))\n                }\n            });\n\n            const err = schema.validate({ a: 'abc', b: { c: 'x' } }).error;\n            expect(err.isJoi).to.not.exist();\n            expect(err.message).to.equal('Really wanted a number!');\n            expect(err.details).to.not.exist();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"returns first custom error with multiple errors","suites":["any","error()"],"updatePoint":{"line":1362,"column":59},"line":1362,"code":"        it('returns first custom error with multiple errors', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: {\n                    c: Joi.number().error(new Error('Really wanted a number!'))\n                }\n            }).prefs({ abortEarly: false });\n\n            const err = schema.validate({ a: 22, b: { c: 'x' } }).error;\n            expect(err.isJoi).to.not.exist();\n            expect(err.message).to.equal('Really wanted a number!');\n            expect(err.details).to.not.exist();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"returns first error with multiple errors (first not custom)","suites":["any","error()"],"updatePoint":{"line":1377,"column":71},"line":1377,"code":"        it('returns first error with multiple errors (first not custom)', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: {\n                    c: Joi.number().error(new Error('Really wanted a number!'))\n                }\n            });\n\n            const err = schema.validate({ a: 22, b: { c: 'x' } }).error;\n            expect(err.isJoi).to.be.true();\n            expect(err.message).to.equal('\"a\" must be a string');\n            expect(err.details).to.equal([{\n                message: '\"a\" must be a string',\n                path: ['a'],\n                type: 'string.base',\n                context: { value: 22, label: 'a', key: 'a' }\n            }]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid error option","suites":["any","error()"],"updatePoint":{"line":1397,"column":42},"line":1397,"code":"        it('errors on invalid error option', () => {\n\n            expect(() => {\n\n                Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().error('Really wanted a number!')\n                    }\n                });\n            }).to.throw('Must provide a valid Error object or a function');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on missing error option","suites":["any","error()"],"updatePoint":{"line":1410,"column":42},"line":1410,"code":"        it('errors on missing error option', () => {\n\n            expect(() => {\n\n                Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().error()\n                    }\n                });\n            }).to.throw('Missing error');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"replaces the error message with an error","suites":["any","error()","with a function"],"updatePoint":{"line":1425,"column":56},"line":1425,"code":"            it('replaces the error message with an error', () => {\n\n                const schema = Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().strict().error(() => new Error('Really wanted a number!'))\n                    }\n                });\n\n                const err = schema.validate({ a: 'abc', b: { c: 'x' } }).error;\n                expect(err.isJoi).to.not.exist();\n                expect(err.message).to.equal('Really wanted a number!');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"should be able to combine several error messages","suites":["any","error()","with a function"],"updatePoint":{"line":1439,"column":64},"line":1439,"code":"            it('should be able to combine several error messages', () => {\n\n                const schema = Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().min(0).integer().strict().error((errors) => {\n\n                            return new Error(errors.join(' and ')); // Automatic toString() of each error on join\n                        })\n                    }\n                });\n\n                const err = schema.validate({ a: 'abc', b: { c: -1.5 } }, { abortEarly: false }).error;\n                expect(err.isJoi).to.not.exist();\n                expect(err.message).to.equal('\"b.c\" must be greater than or equal to 0 and \"b.c\" must be an integer');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"caches report message string","suites":["any","error()","with a function"],"updatePoint":{"line":1456,"column":44},"line":1456,"code":"            it('caches report message string', () => {\n\n                const schema = Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().min(0).integer().strict().error((errors) => {\n\n                            for (const err of errors) {\n                                err.toString();\n                                err.message += '!';\n                            }\n\n                            return new Error(errors.join(' and ')); // Automatic toString() of each error on join\n                        })\n                    }\n                });\n\n                const err = schema.validate({ a: 'abc', b: { c: -1.5 } }, { abortEarly: false }).error;\n                expect(err.isJoi).to.not.exist();\n                expect(err.message).to.equal('\"b.c\" must be greater than or equal to 0! and \"b.c\" must be an integer!');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"uses selected date format","suites":["any","error()","with a function"],"updatePoint":{"line":1478,"column":41},"line":1478,"code":"            it('uses selected date format', () => {\n\n                const min = new Date('1974-05-07');\n\n                const schema = Joi.object({\n                    a: Joi.date().min(min).greater(min).error((errors) => {\n\n                        return new Error(errors.join(' and ')); // Automatic toString() of each error on join\n                    })\n                });\n\n                const err = schema.validate({ a: new Date('1973-01-01') }, { dateFormat: 'date', abortEarly: false }).error;\n                expect(err.isJoi).to.not.exist();\n                expect(err.message).to.equal(`\"a\" must be greater than or equal to \"${min.toDateString()}\" and \"a\" must be greater than \"${min.toDateString()}\"`);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"should be able to combine several error messages using context","suites":["any","error()","with a function"],"updatePoint":{"line":1494,"column":78},"line":1494,"code":"            it('should be able to combine several error messages using context', () => {\n\n                const schema = Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().min(0).integer().strict().error((errors) => {\n\n                            const message = errors.reduce((memo, error) => {\n\n                                let text = memo ? ' && ' : '';\n                                switch (error.code) {\n                                    case 'number.base':\n                                        text += `\"${error.local.key}\" ∈ ℝ`;\n                                        break;\n                                    case 'number.min':\n                                        text += `\"${error.local.key}\" > ${error.local.limit}`;\n                                        break;\n                                    case 'number.integer':\n                                        text += `\"${error.local.key}\" ∈ ℤ`;\n                                        break;\n                                }\n\n                                return memo + text;\n                            }, '');\n\n                            return new Error(message);\n                        })\n                    }\n                });\n\n                const err = schema.validate({ a: 'abc', b: { c: -1.5 } }, { abortEarly: false }).error;\n                expect(err.isJoi).to.not.exist();\n                expect(err.message).to.equal('\"c\" > 0 && \"c\" ∈ ℤ');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"should be able to return a javascript Error","suites":["any","error()","with a function"],"updatePoint":{"line":1529,"column":59},"line":1529,"code":"            it('should be able to return a javascript Error', () => {\n\n                const schema = Joi.object({\n                    a: Joi.string(),\n                    b: {\n                        c: Joi.number().min(0).integer().strict().error((errors) => new Error(`error of type ${errors[0].code}`))\n                    }\n                });\n\n                const err = schema.validate({ a: 'abc', b: { c: -1.5 } }, { abortEarly: false }).error;\n                expect(err).to.be.an.error('error of type number.min');\n                expect(err.isJoi).to.not.exist();\n                expect(err.details).to.not.exist();\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"handles multiple errors return value","suites":["any","error()","with a function"],"updatePoint":{"line":1544,"column":52},"line":1544,"code":"            it('handles multiple errors return value', () => {\n\n                const item = Joi.string()\n                    .trim()\n                    .regex(/^\\w*$/)\n                    .error((errors) => {\n\n                        const error = errors[0];\n                        if (error.code === 'string.pattern.base') {\n                            error.message = 'my new error message';\n                        }\n\n                        return errors;\n                    });\n\n                const schema = Joi.object({\n                    a: Joi.array().items(item.min(2).max(64)),\n                    b: item\n                });\n\n                expect(schema.validate({ a: [' xx', 'yy'], b: ' x' }).value).to.equal({ a: ['xx', 'yy'], b: 'x' });\n\n                const result1 = schema.validate({ a: [' xx', 'yy'], b: ' x?' });\n                expect(result1.value).to.equal({ a: ['xx', 'yy'], b: ' x?' });\n                expect(result1.error).to.be.an.error('my new error message');\n\n                const result2 = schema.validate({ a: [' xx', 'yy?'], b: ' x' });\n                expect(result2.value).to.equal({ a: [' xx', 'yy?'], b: ' x' });\n                expect(result2.error).to.be.an.error('my new error message');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid error function","suites":["any","error()","with a function"],"updatePoint":{"line":1575,"column":48},"line":1575,"code":"            it('errors on invalid error function', () => {\n\n                const schema = Joi.number().error(() => 'not an Error');\n\n                expect(() => schema.validate('x')).to.throw('error() must return an Error object');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets an example","suites":["any","example()"],"updatePoint":{"line":1586,"column":27},"line":1586,"code":"        it('sets an example', () => {\n\n            const schema = Joi.valid(5, 6, 7).example(5);\n            expect(schema.describe().examples).to.equal([5]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"appends examples","suites":["any","example()"],"updatePoint":{"line":1592,"column":28},"line":1592,"code":"        it('appends examples', () => {\n\n            const schema = Joi.valid(5, 6, 7).example(4).example(5);\n            expect(schema.describe().examples).to.equal([4, 5]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides example","suites":["any","example()"],"updatePoint":{"line":1598,"column":29},"line":1598,"code":"        it('overrides example', () => {\n\n            const schema = Joi.valid(5, 6, 7).example(4).example(5, { override: true });\n            expect(schema.describe().examples).to.equal([5]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not flatten examples","suites":["any","example()"],"updatePoint":{"line":1604,"column":37},"line":1604,"code":"        it('does not flatten examples', () => {\n\n            const schema = Joi.array().items(5, 6, 7).example([5, 6]);\n            expect(schema.describe().examples).to.equal([[5, 6]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when examples are missing","suites":["any","example()"],"updatePoint":{"line":1610,"column":44},"line":1610,"code":"        it('throws when examples are missing', () => {\n\n            expect(() => Joi.any().example()).to.throw('Missing example');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates required values","suites":["any","exist()"],"updatePoint":{"line":1618,"column":37},"line":1618,"code":"        it('validates required values', () => {\n\n            Helper.validate(Joi.exist(), [\n                [0, true],\n                [null, true],\n                ['', true],\n                [false, true],\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid arguments","suites":["any","external()"],"updatePoint":{"line":1637,"column":39},"line":1637,"code":"        it('errors on invalid arguments', () => {\n\n            const method = () => null;\n            expect(() => Joi.any().external(method, '')).to.throw('Description must be a non-empty string');\n            expect(() => Joi.any().external(method, 0)).to.throw('Description must be a non-empty string');\n            expect(() => Joi.any().external(method, [])).to.throw('Description must be a non-empty string');\n            expect(() => Joi.any().external({ method }, 'text')).to.throw('Cannot combine options with description');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"includes description in manifest","suites":["any","external()"],"updatePoint":{"line":1646,"column":44},"line":1646,"code":"        it('includes description in manifest', () => {\n\n            const method = () => null;\n            const schema = Joi.any().external(method, 'some description');\n            expect(schema.describe()).to.equal({\n                type: 'any',\n                externals: [\n                    {\n                        description: 'some description',\n                        method\n                    }\n                ]\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value on error","suites":["any","failover()"],"updatePoint":{"line":1664,"column":31},"line":1664,"code":"        it('sets value on error', () => {\n\n            const schema = Joi.object({ x: Joi.number().default(1).failover(2) });\n\n            Helper.validate(schema, [\n                [{}, true, { x: 1 }],\n                [{ x: 3 }, true, { x: 3 }],\n                [{ x: [] }, true, { x: 2 }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates forbidden","suites":["any","forbidden()"],"updatePoint":{"line":1678,"column":31},"line":1678,"code":"        it('validates forbidden', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.forbidden()\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5 }, true],\n                [{ a: 5, b: 6 }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'any.unknown',\n                    context: { label: 'b', key: 'b', value: 6 }\n                }],\n                [{ a: 'a' }, false, {\n                    message: '\"a\" must be a number',\n                    path: ['a'],\n                    type: 'number.base',\n                    context: { label: 'a', key: 'a', value: 'a' }\n                }],\n                [{}, true],\n                [{ b: undefined }, true],\n                [{ b: null }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'any.unknown',\n                    context: { label: 'b', key: 'b', value: null }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["any","forbidden()"],"updatePoint":{"line":1710,"column":56},"line":1710,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.any().forbidden();\n            expect(schema.forbidden()).to.shallow.equal(schema);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows invalid values to be set","suites":["any","invalid()"],"updatePoint":{"line":1719,"column":43},"line":1719,"code":"        it('allows invalid values to be set', () => {\n\n            expect(() => Joi.any().valid(true, 1, 'hello', new Date(), Symbol('foo'))).not.to.throw();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when passed undefined","suites":["any","invalid()"],"updatePoint":{"line":1724,"column":40},"line":1724,"code":"        it('throws when passed undefined', () => {\n\n            expect(() => {\n\n                Joi.any().invalid(undefined);\n            }).to.throw('Cannot call allow/valid/invalid with undefined');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"preserves passed value when cloned","suites":["any","invalid()"],"updatePoint":{"line":1732,"column":46},"line":1732,"code":"        it('preserves passed value when cloned', () => {\n\n            const o = {};\n            Helper.validate(Joi.object().invalid(o).clone(), [[o, false, '\"value\" contains an invalid value']]);\n            Helper.validate(Joi.object().invalid({}).clone(), [[{}, false, '\"value\" contains an invalid value']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on blocked schema","suites":["any","invalid()"],"updatePoint":{"line":1739,"column":36},"line":1739,"code":"        it('errors on blocked schema', () => {\n\n            expect(() => Joi.any().valid(1).invalid(1)).to.throw('Setting invalid value 1 leaves schema rejecting all values due to previous valid rule');\n            expect(() => Joi.any().allow(1).invalid(1)).to.not.throw();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"appends invalid values","suites":["any","invalid()"],"updatePoint":{"line":1745,"column":34},"line":1745,"code":"        it('appends invalid values', () => {\n\n            const schema = Joi.any().invalid(1).invalid(2);\n            expect(schema.describe()).to.equal({ type: 'any', invalid: [1, 2] });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when override is not first item","suites":["any","invalid()"],"updatePoint":{"line":1751,"column":50},"line":1751,"code":"        it('throws when override is not first item', () => {\n\n            expect(() => Joi.any().invalid(1, Joi.override)).to.throw('Override must be the first value');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides previous values","suites":["any","invalid()"],"updatePoint":{"line":1756,"column":37},"line":1756,"code":"        it('overrides previous values', () => {\n\n            const schema = Joi.number().invalid(2).invalid(Joi.override, 1);\n            Helper.validate(schema, [\n                [1, false, '\"value\" contains an invalid value'],\n                [2, true, 2]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"cancels previous values","suites":["any","invalid()"],"updatePoint":{"line":1765,"column":35},"line":1765,"code":"        it('cancels previous values', () => {\n\n            const schema = Joi.number().invalid(2).invalid(Joi.override);\n            Helper.validate(schema, [\n                [1, true, 1],\n                [2, true, 2]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"ignores empty override","suites":["any","invalid()"],"updatePoint":{"line":1774,"column":34},"line":1774,"code":"        it('ignores empty override', () => {\n\n            const schema = Joi.invalid(Joi.override);\n            expect(schema._invalids).to.be.null();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"retains both unique rule instances","suites":["any","keep()"],"updatePoint":{"line":1783,"column":46},"line":1783,"code":"        it('retains both unique rule instances', () => {\n\n            const schema = Joi.number()\n                .min(10).keep()\n                .min(100);\n\n            Helper.validate(schema, { abortEarly: false }, [[1, false, '\"value\" must be greater than or equal to 10. \"value\" must be greater than or equal to 100']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"retains both unique rule instances in concat","suites":["any","keep()"],"updatePoint":{"line":1792,"column":56},"line":1792,"code":"        it('retains both unique rule instances in concat', () => {\n\n            const schema = Joi.number()\n                .min(10).keep()\n                .concat(Joi.number().min(100));\n\n            Helper.validate(schema, { abortEarly: false }, [[1, false, '\"value\" must be greater than or equal to 10. \"value\" must be greater than or equal to 100']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"adds to existing options","suites":["any","label()"],"updatePoint":{"line":1804,"column":36},"line":1804,"code":"        it('adds to existing options', () => {\n\n            const schema = Joi.object({ b: Joi.string().email().label('Custom label') });\n            const input = { b: 'not_a_valid_email' };\n            Helper.validate(schema, [[input, false, {\n                message: '\"Custom label\" must be a valid email',\n                path: ['b'],\n                type: 'string.email',\n                context: { value: 'not_a_valid_email', invalids: ['not_a_valid_email'], label: 'Custom label', key: 'b' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when label is missing","suites":["any","label()"],"updatePoint":{"line":1816,"column":40},"line":1816,"code":"        it('throws when label is missing', () => {\n\n            expect(() => {\n\n                Joi.any().label();\n            }).to.throw('Label name must be a non-empty string');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"can describe a label","suites":["any","label()"],"updatePoint":{"line":1824,"column":32},"line":1824,"code":"        it('can describe a label', () => {\n\n            const schema = Joi.object().label('lbl').describe();\n            expect(schema).to.equal({ type: 'object', flags: { label: 'lbl' } });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not leak into sub objects","suites":["any","label()"],"updatePoint":{"line":1830,"column":42},"line":1830,"code":"        it('does not leak into sub objects', () => {\n\n            const schema = Joi.object({ a: Joi.number() }).label('foo');\n            Helper.validate(schema, [[{ a: 'a' }, false, {\n                message: '\"a\" must be a number',\n                path: ['a'],\n                type: 'number.base',\n                context: { label: 'a', key: 'a', value: 'a' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not leak into sub objects from an array","suites":["any","label()"],"updatePoint":{"line":1841,"column":56},"line":1841,"code":"        it('does not leak into sub objects from an array', () => {\n\n            const schema = Joi.array().items(\n                Joi.object({ a: Joi.number() }).label('foo')\n            ).label('bar');\n\n            Helper.validate(schema, [[[{ a: 'a' }], false, {\n                message: '\"[0].a\" must be a number',\n                path: [0, 'a'],\n                type: 'number.base',\n                context: { label: '[0].a', key: 'a', value: 'a' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not leak into unknown keys","suites":["any","label()"],"updatePoint":{"line":1855,"column":43},"line":1855,"code":"        it('does not leak into unknown keys', () => {\n\n            const schema = Joi.object({ a: Joi.number() }).label('foo');\n            Helper.validate(schema, [[{ b: 'a' }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b', value: 'a' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"applies only to hierarchy edge","suites":["any","label()"],"updatePoint":{"line":1866,"column":42},"line":1866,"code":"        it('applies only to hierarchy edge', () => {\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    b: Joi.object({\n                        c: Joi.number().label('C')\n                    }).label('B')\n                }).label('A')\n            });\n\n            Helper.validate(schema, [[{ a: { b: { c: 'x' } } }, false, {\n                message: '\"C\" must be a number',\n                path: ['a', 'b', 'c'],\n                type: 'number.base',\n                context: { label: 'C', value: 'x', key: 'c' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message","suites":["any","message()"],"updatePoint":{"line":1887,"column":29},"line":1887,"code":"        it('overrides message', () => {\n\n            const schema = Joi.number()\n                .min(10).message('way too small')\n                .max(100).message('way too big');\n\n            Helper.validate(schema, [\n                [1, false, 'way too small'],\n                [1000, false, 'way too big']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message with template","suites":["any","message()"],"updatePoint":{"line":1899,"column":43},"line":1899,"code":"        it('overrides message with template', () => {\n\n            const schema = Joi.number()\n                .min(10).message(Joi.x('way too small'));\n\n            Helper.validate(schema, [[1, false, 'way too small']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message in multiple language","suites":["any","message()"],"updatePoint":{"line":1907,"column":50},"line":1907,"code":"        it('overrides message in multiple language', () => {\n\n            const messages = {\n                english: {\n                    root: 'value',\n                    'number.min': '{#label} too small'\n                },\n                latin: {\n                    root: 'valorem',\n                    'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n                }\n            };\n\n            const schema = Joi.number().min(10).message(messages);\n\n            expect(schema.validate(1, { errors: { language: 'english' } }).error).to.be.an.error('\"value\" too small');\n            expect(schema.validate(1, { errors: { language: 'latin' } }).error).to.be.an.error('\"valorem\" angustus');\n            expect(schema.validate(1, { errors: { language: 'unknown' } }).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n            expect(schema.label('special').validate(1, { errors: { language: 'english' } }).error).to.be.an.error('\"special\" too small');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides wildcard message in specific language","suites":["any","message()"],"updatePoint":{"line":1928,"column":59},"line":1928,"code":"        it('overrides wildcard message in specific language', () => {\n\n            const messages = {\n                english: {\n                    root: 'value',\n                    'number.min': '{#label} too small',\n                    '*': '{#label} is something else'\n                }\n            };\n\n            const schema = Joi.number().min(10).max(11).messages(messages);\n\n            expect(schema.validate(1, { errors: { language: 'english' } }).error).to.be.an.error('\"value\" too small');\n            expect(schema.validate(12, { errors: { language: 'english' } }).error).to.be.an.error('\"value\" is something else');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides wildcard message","suites":["any","message()"],"updatePoint":{"line":1944,"column":38},"line":1944,"code":"        it('overrides wildcard message', () => {\n\n            const messages = {\n                root: 'value',\n                'number.min': '{#label} too small',\n                '*': '{#label} is something else'\n            };\n\n            const schema = Joi.number().min(10).max(11).messages(messages);\n\n            expect(schema.validate(1).error).to.be.an.error('\"value\" too small');\n            expect(schema.validate(12).error).to.be.an.error('\"value\" is something else');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message in multiple language (nested)","suites":["any","message()"],"updatePoint":{"line":1958,"column":59},"line":1958,"code":"        it('overrides message in multiple language (nested)', () => {\n\n            const messages = {\n                english: {\n                    root: 'value',\n                    'number.min': '{#label} too small'\n                },\n                latin: {\n                    root: 'valorem',\n                    'number.min': '{#label} angustus'\n                }\n            };\n\n            const schema = Joi.object({ a: Joi.number().min(10).message(messages) });\n\n            expect(schema.validate({ a: 1 }, { errors: { language: 'english' } }).error).to.be.an.error('\"a\" too small');\n            expect(schema.validate({ a: 1 }, { errors: { language: 'latin' } }).error).to.be.an.error('\"a\" angustus');\n            expect(schema.validate({ a: 1 }, { errors: { language: 'unknown' } }).error).to.be.an.error('\"a\" must be greater than or equal to 10');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message in multiple language (flat)","suites":["any","message()"],"updatePoint":{"line":1978,"column":57},"line":1978,"code":"        it('overrides message in multiple language (flat)', () => {\n\n            const messages = {\n                root: 'valorem',\n                'number.min': '{#label} angustus'\n            };\n\n            const schema = Joi.object({ a: Joi.number().min(10).message(messages) });\n            Helper.validate(schema, [[{ a: 1 }, false, '\"a\" angustus']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message in multiple language (flat template)","suites":["any","message()"],"updatePoint":{"line":1989,"column":66},"line":1989,"code":"        it('overrides message in multiple language (flat template)', () => {\n\n            const messages = {\n                root: 'valorem',\n                'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n            };\n\n            const schema = Joi.object({ a: Joi.number().min(10).message(messages) });\n            Helper.validate(schema, [[{ a: 1 }, false, '\"a\" angustus']]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid message value","suites":["any","message()"],"updatePoint":{"line":2000,"column":43},"line":2000,"code":"        it('errors on invalid message value', () => {\n\n            expect(() => Joi.number().min(10).message(12)).to.throw('Invalid message options');\n            expect(() => Joi.number().min(10).message({ 'number.min': 12 })).to.throw('Invalid message for number.min');\n            expect(() => Joi.number().min(10).message({ english: { 'number.min': 12 } })).to.throw('Invalid message for number.min in english');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the meta","suites":["any","meta()"],"updatePoint":{"line":2010,"column":25},"line":2010,"code":"        it('sets the meta', () => {\n\n            const meta = { prop: 'val', prop2: 3 };\n            let b = Joi.any().meta(meta);\n            expect(b.describe().metas).to.equal([meta]);\n\n            b = b.meta({ other: true });\n            expect(b.describe().metas).to.equal([meta, {\n                other: true\n            }]);\n\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when meta is missing","suites":["any","meta()"],"updatePoint":{"line":2023,"column":39},"line":2023,"code":"        it('throws when meta is missing', () => {\n\n            expect(() => Joi.any().meta()).to.throw('Meta cannot be undefined');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates invalid values","suites":["any","not()"],"updatePoint":{"line":2031,"column":36},"line":2031,"code":"        it('validates invalid values', () => {\n\n            Helper.validate(Joi.not(5), [\n                [4, true],\n                [5, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 5, invalids: [5], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets notes","suites":["any","note()"],"updatePoint":{"line":2047,"column":22},"line":2047,"code":"        it('sets notes', () => {\n\n            const b = Joi.any().note('a').note('my notes');\n            expect(b.describe().notes).to.equal(['a', 'my notes']);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when notes are missing","suites":["any","note()"],"updatePoint":{"line":2053,"column":41},"line":2053,"code":"        it('throws when notes are missing', () => {\n\n            expect(() => Joi.any().note()).to.throw('Missing notes');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when notes are invalid","suites":["any","note()"],"updatePoint":{"line":2058,"column":41},"line":2058,"code":"        it('throws when notes are invalid', () => {\n\n            expect(() => Joi.any().note(5)).to.throw('Notes must be non-empty strings');\n            expect(() => Joi.any().note('')).to.throw('Notes must be non-empty strings');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows only allowed values","suites":["any","only()"],"updatePoint":{"line":2067,"column":38},"line":2067,"code":"        it('allows only allowed values', () => {\n\n            const schema = Joi.number().allow(1, 'x').only();\n\n            Helper.validate(schema, [\n                [1, true],\n                ['x', true],\n                [2, false, '\"value\" must be one of [1, x]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates optional with default required","suites":["any","optional()"],"updatePoint":{"line":2081,"column":52},"line":2081,"code":"        it('validates optional with default required', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.any(),\n                c: {\n                    d: Joi.any()\n                }\n            }).prefs({ presence: 'required' });\n\n            Helper.validate(schema, [\n                [{ a: 5 }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { label: 'b', key: 'b' }\n                }],\n                [{ a: 5, b: 6 }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { label: 'c', key: 'c' }\n                }],\n                [{ a: 5, b: 6, c: {} }, false, {\n                    message: '\"c.d\" is required',\n                    path: ['c', 'd'],\n                    type: 'any.required',\n                    context: { label: 'c.d', key: 'd' }\n                }],\n                [{ a: 5, b: 6, c: { d: 7 } }, true],\n                [{}, false, {\n                    message: '\"a\" is required',\n                    path: ['a'],\n                    type: 'any.required',\n                    context: { label: 'a', key: 'a' }\n                }],\n                [{ b: 5 }, false, {\n                    message: '\"a\" is required',\n                    path: ['a'],\n                    type: 'any.required',\n                    context: { label: 'a', key: 'a' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["any","optional()"],"updatePoint":{"line":2126,"column":56},"line":2126,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.any().optional();\n            expect(schema.optional()).to.shallow.equal(schema);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not modify provided options","suites":["any","options()"],"updatePoint":{"line":2135,"column":44},"line":2135,"code":"        it('does not modify provided options', () => {\n\n            const options = { convert: true };\n            const schema = Joi.object().prefs(options);\n            schema.validate({});\n            expect(options).to.equal({ convert: true });\n\n            const options2 = { convert: false };\n            schema.validate({}, options2);\n            expect(options).to.equal({ convert: true });\n            expect(options2).to.equal({ convert: false });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"adds to existing options","suites":["any","options()"],"updatePoint":{"line":2148,"column":36},"line":2148,"code":"        it('adds to existing options', () => {\n\n            const schema = Joi.object({ b: Joi.number().strict().prefs({ convert: true }) });\n            const input = { b: '2' };\n            Helper.validate(schema, [[input, true, { b: 2 }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws with an invalid option","suites":["any","options()"],"updatePoint":{"line":2155,"column":41},"line":2155,"code":"        it('throws with an invalid option', () => {\n\n            expect(() => Joi.any().prefs({ foo: 'bar' })).to.throw('\"foo\" is not allowed');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws with an invalid option type","suites":["any","options()"],"updatePoint":{"line":2160,"column":46},"line":2160,"code":"        it('throws with an invalid option type', () => {\n\n            expect(() => Joi.any().prefs({ convert: 'yes' })).to.throw('\"convert\" must be a boolean');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws with an invalid option value","suites":["any","options()"],"updatePoint":{"line":2165,"column":47},"line":2165,"code":"        it('throws with an invalid option value', () => {\n\n            expect(() => Joi.any().prefs({ presence: 'yes' })).to.throw('\"presence\" must be one of [required, optional, forbidden]');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"does not throw with multiple options including presence key","suites":["any","options()"],"updatePoint":{"line":2170,"column":71},"line":2170,"code":"        it('does not throw with multiple options including presence key', () => {\n\n            expect(() => Joi.any().prefs({ presence: 'optional', noDefaults: true })).to.not.throw();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"describes a schema with options","suites":["any","options()"],"updatePoint":{"line":2175,"column":43},"line":2175,"code":"        it('describes a schema with options', () => {\n\n            const schema = Joi.any().prefs({ abortEarly: false, convert: false });\n            expect(schema.describe()).to.equal({ type: 'any', preferences: { abortEarly: false, convert: false } });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"merges options properly","suites":["any","options()"],"updatePoint":{"line":2181,"column":35},"line":2181,"code":"        it('merges options properly', () => {\n\n            const baseSchema = Joi.any();\n            expect(baseSchema.describe().preferences).to.be.undefined();\n\n            const languageSchema = baseSchema.prefs({ messages: { 'type.foo': 'foo' } });\n            expect(languageSchema.describe().preferences).to.equal({ messages: { 'type.foo': 'foo' } });\n\n            const normalOptionSchema = baseSchema.prefs({ abortEarly: true });\n            expect(normalOptionSchema.describe().preferences).to.equal({ abortEarly: true });\n\n            const normalOptionsOverLanguageSchema = languageSchema.prefs({ abortEarly: true });\n            expect(normalOptionsOverLanguageSchema.describe().preferences).to.equal({\n                abortEarly: true,\n                messages: {\n                    'type.foo': 'foo'\n                }\n            });\n\n            const languageOptionsOverNormalOptionsSchema = normalOptionSchema.prefs({ messages: { 'type.foo': 'foo' } });\n            expect(languageOptionsOverNormalOptionsSchema.describe().preferences).to.equal({\n                abortEarly: true,\n                messages: {\n                    'type.foo': 'foo'\n                }\n            });\n\n            const languageOptionsOverLanguageOptionsSchema = languageSchema.prefs({\n                messages: {\n                    'type.bar': 'bar',\n                    'type2.foo': 'foo'\n                }\n            });\n            expect(languageOptionsOverLanguageOptionsSchema.describe().preferences).to.equal({\n                messages: {\n                    'type.foo': 'foo',\n                    'type.bar': 'bar',\n                    'type2.foo': 'foo'\n                }\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"gives the raw input","suites":["any","raw()"],"updatePoint":{"line":2226,"column":31},"line":2226,"code":"        it('gives the raw input', () => {\n\n            const tests = [\n                [Joi.binary(), 'abc'],\n                [Joi.boolean(), false],\n                [Joi.date(), '1970/01/01'],\n                [Joi.number(), '12'],\n                [Joi.any().strict(), 'abc']\n            ];\n\n            for (const test of tests) {\n                const input = test[1];\n                const schema = test[0].raw();\n                Helper.validate(schema.raw(), [[input, true, input]]);\n            }\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"cancels raw mode","suites":["any","raw()"],"updatePoint":{"line":2243,"column":28},"line":2243,"code":"        it('cancels raw mode', () => {\n\n            const schema = Joi.number().raw().raw(false);\n            Helper.validate(schema, [['123', true, 123]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["any","raw()"],"updatePoint":{"line":2249,"column":56},"line":2249,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.any().raw();\n            expect(schema.raw()).to.shallow.equal(schema);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["any","required"],"updatePoint":{"line":2258,"column":56},"line":2258,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.any().required();\n            expect(schema.required()).to.shallow.equal(schema);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws on empty ruleset","suites":["any","rule()"],"updatePoint":{"line":2267,"column":35},"line":2267,"code":"        it('throws on empty ruleset', () => {\n\n            expect(() => Joi.number().min(10).rule({})).to.not.throw();\n            expect(() => Joi.number().ruleset.min(10).rule({})).to.not.throw();\n            expect(() => Joi.number().$.min(10).rule({})).to.not.throw();\n            expect(() => Joi.number().$.min(10).rule({}).max(11).rule({})).to.not.throw();\n            expect(() => Joi.string().trim().min(1)._ruleRemove('trim').rule({})).to.not.throw();\n            expect(() => Joi.string().trim().$.min(1)._ruleRemove('trim').rule({})).to.not.throw();\n\n            expect(() => Joi.number().ruleset.min(10).concat(Joi.any())).to.throw('Cannot concatenate onto a schema with open ruleset');\n            expect(() => Joi.number().concat(Joi.number().min(10)).rule({})).to.throw('Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n            expect(() => Joi.number().concat(Joi.number().$.min(10))).to.throw('Cannot concatenate a schema with open ruleset');\n\n            expect(() => Joi.any().ruleset.rule({})).to.throw('Cannot apply rules to empty ruleset');\n            expect(() => Joi.any().rule({})).to.throw('Cannot apply rules to empty ruleset');\n            expect(() => Joi.number().min(10).rule({}).rule({})).to.throw('Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n            expect(() => Joi.string().ruleset.trim()._ruleRemove('trim').rule({})).to.throw('Cannot apply rules to empty ruleset');\n            expect(() => Joi.string().trim()._ruleRemove('trim').rule({})).to.throw('Cannot apply rules to empty ruleset');\n\n            expect(() => Joi.number().ruleset.min(10).concat(Joi.any().ruleset).rule({})).to.throw('Cannot concatenate onto a schema with open ruleset');\n            expect(() => Joi.number().min(10).concat(Joi.number().$.max(11).rule({})).rule({})).to.throw('Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n\n            expect(() => Joi.string().insensitive().rule({})).to.throw('Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n            expect(() => Joi.string().lowercase().insensitive().rule({})).to.throw('Cannot apply rules to empty ruleset or the last rule added does not support rule properties');\n            expect(() => Joi.string().$.lowercase().insensitive()).to.throw('Cannot set flag inside a ruleset');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"retains both unique rule instances","suites":["any","rule()","keep"],"updatePoint":{"line":2296,"column":50},"line":2296,"code":"            it('retains both unique rule instances', () => {\n\n                const schema = Joi.number()\n                    .min(10).rule({ message: 'way too small', keep: true })\n                    .min(100).message('still too small');\n\n                Helper.validate(schema, [\n                    [1, false, 'way too small'],\n                    [90, false, 'still too small']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides message","suites":["any","rule()","message"],"updatePoint":{"line":2311,"column":33},"line":2311,"code":"            it('overrides message', () => {\n\n                expect(Joi.number().min(10).rule({ message: 'way too small' }).validate(1).error).to.be.an.error('way too small');\n                expect(Joi.number().min(10).rule({ message: { 'number.min': 'way too small' } }).validate(1).error).to.be.an.error('way too small');\n                expect(Joi.number().min(10).rule({ message: { 'number.max': 'way too big' } }).validate(1).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides ruleset with single message","suites":["any","rule()","message"],"updatePoint":{"line":2318,"column":53},"line":2318,"code":"            it('overrides ruleset with single message', () => {\n\n                const schema = Joi.number().$.max(100).min(10).rule({ message: 'number out of bound' });\n                Helper.validate(schema, [\n                    [1, false, 'number out of bound'],\n                    [101, false, 'number out of bound']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides ruleset messages","suites":["any","rule()","message"],"updatePoint":{"line":2327,"column":42},"line":2327,"code":"            it('overrides ruleset messages', () => {\n\n                const schema = Joi.number().$.max(100).min(10).rule({ message: { 'number.max': 'way too big', 'number.min': 'way too small' } });\n                Helper.validate(schema, [\n                    [1, false, 'way too small'],\n                    [101, false, 'way too big']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides template","suites":["any","rule()","message"],"updatePoint":{"line":2336,"column":34},"line":2336,"code":"            it('overrides template', () => {\n\n                expect(Joi.number().min(10).rule({ message: '{{#label}} way too small' }).validate(1).error).to.be.an.error('\"value\" way too small');\n                expect(Joi.number().min(10).rule({ message: { 'number.min': '{{#label}} way too small' } }).validate(1).error).to.be.an.error('\"value\" way too small');\n                expect(Joi.number().min(10).rule({ message: { 'number.max': '{{#label}} way too big' } }).validate(1).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides ruleset with single template","suites":["any","rule()","message"],"updatePoint":{"line":2343,"column":54},"line":2343,"code":"            it('overrides ruleset with single template', () => {\n\n                const schema = Joi.number().$.max(100).min(10).rule({ message: '{{#label}} number out of bound' });\n                Helper.validate(schema, [\n                    [1, false, '\"value\" number out of bound'],\n                    [101, false, '\"value\" number out of bound']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides ruleset templates","suites":["any","rule()","message"],"updatePoint":{"line":2352,"column":43},"line":2352,"code":"            it('overrides ruleset templates', () => {\n\n                const schema = Joi.number().$.max(100).min(10).rule({ message: { 'number.max': '{{#label}} way too big', 'number.min': '{{#label}} way too small' } });\n                Helper.validate(schema, [\n                    [1, false, '\"value\" way too small'],\n                    [101, false, '\"value\" way too big']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"overrides ruleset with both message and template","suites":["any","rule()","message"],"updatePoint":{"line":2361,"column":64},"line":2361,"code":"            it('overrides ruleset with both message and template', () => {\n\n                const schema = Joi.number().$.max(100).min(10).rule({ message: { 'number.max': 'way too big', 'number.min': '{{#label}} way too small' } });\n                Helper.validate(schema, [\n                    [1, false, '\"value\" way too small'],\n                    [101, false, 'way too big']\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates without converting","suites":["any","strict()"],"updatePoint":{"line":2374,"column":40},"line":2374,"code":"        it('validates without converting', () => {\n\n            const schema = Joi.object({\n                array: Joi.array().items(Joi.string().min(5), Joi.number().min(3))\n            }).strict();\n\n            Helper.validate(schema, [\n                [{ array: ['12345'] }, true],\n                [{ array: ['1'] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: '1', label: 'array[0]', key: 0 }\n                }],\n                [{ array: [3] }, true],\n                [{ array: ['12345', 3] }, true],\n                [{ array: ['3'] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: '3', label: 'array[0]', key: 0 }\n                }],\n                [{ array: [1] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: 1, label: 'array[0]', key: 0 }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"can be disabled","suites":["any","strict()"],"updatePoint":{"line":2405,"column":27},"line":2405,"code":"        it('can be disabled', () => {\n\n            const schema = Joi.object({\n                array: Joi.array().items(Joi.string().min(5), Joi.number().min(3))\n            }).strict().strict(false);\n\n            Helper.validate(schema, [\n                [{ array: ['12345'] }, true],\n                [{ array: ['1'] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: '1', label: 'array[0]', key: 0 }\n                }],\n                [{ array: [3] }, true],\n                [{ array: ['12345', 3] }, true],\n                [{ array: ['3'] }, true, { array: [3] }],\n                [{ array: [1] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: 1, label: 'array[0]', key: 0 }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"adds to existing options","suites":["any","strict()"],"updatePoint":{"line":2431,"column":36},"line":2431,"code":"        it('adds to existing options', () => {\n\n            const schema = Joi.object({ b: Joi.number().prefs({ convert: true }).strict() });\n            const input = { b: '2' };\n            Helper.validate(schema, [[input, false, {\n                message: '\"b\" must be a number',\n                path: ['b'],\n                type: 'number.base',\n                context: { label: 'b', key: 'b', value: '2' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates and returns undefined","suites":["any","strip()"],"updatePoint":{"line":2446,"column":43},"line":2446,"code":"        it('validates and returns undefined', () => {\n\n            const schema = Joi.string().strip();\n            Helper.validate(schema, [['test', true, undefined]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates and returns an error","suites":["any","strip()"],"updatePoint":{"line":2452,"column":42},"line":2452,"code":"        it('validates and returns an error', () => {\n\n            const schema = Joi.string().strip();\n\n            Helper.validate(schema, [[1, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 1, label: 'value' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["any","strip()"],"updatePoint":{"line":2464,"column":56},"line":2464,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.strip();\n            expect(schema.strip()).to.shallow.equal(schema);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"cancels strip","suites":["any","strip()"],"updatePoint":{"line":2470,"column":25},"line":2470,"code":"        it('cancels strip', () => {\n\n            const schema = Joi.strip().strip(false);\n            expect(schema._flags.result).to.not.exist();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"strips item inside array item","suites":["any","strip()"],"updatePoint":{"line":2476,"column":41},"line":2476,"code":"        it('strips item inside array item', () => {\n\n            const schema = Joi.array().items(\n                Joi.array().items(\n                    Joi.number(),\n                    Joi.strip()\n                ),\n                Joi.strip()\n            );\n\n            Helper.validate(schema, [\n                [['x', ['x']], true, [[]]],\n                [[1, 2, [1, 2, 'x']], true, [[1, 2]]]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"strips nested keys","suites":["any","strip()"],"updatePoint":{"line":2492,"column":30},"line":2492,"code":"        it('strips nested keys', () => {\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    x: Joi.any(),\n                    y: Joi.strip()\n                })\n                    .strip(),\n\n                b: Joi.ref('a.y')\n            });\n\n            Helper.validate(schema, [\n                [{}, true, {}],\n                [{ a: { x: 1 } }, true, {}],\n                [{ a: { x: 1, y: 2 } }, true, {}],\n                [{ a: { x: 1, y: 2 }, b: 2 }, true, { b: 2 }],\n                [{ a: { x: 1, y: 2 }, b: 3 }, false, '\"b\" must be [ref:a.y]'],\n                [{ b: 1 }, false, '\"b\" must be [ref:a.y]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"references validated stripped value (after child already stripped)","suites":["any","strip()"],"updatePoint":{"line":2514,"column":78},"line":2514,"code":"        it('references validated stripped value (after child already stripped)', () => {\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    x: Joi.any(),\n                    y: Joi.strip()\n                })\n                    .strip(),\n\n                b: Joi.ref('a')\n            });\n\n            Helper.validate(schema, [\n                [{}, true, {}],\n                [{ a: { x: 1, y: 2 } }, true, {}],\n                [{ a: { x: 1, y: 2 }, b: { x: 1 } }, true, { b: { x: 1 } }],\n                [{ a: { x: 1, y: 2 }, b: { x: 1, y: 2 } }, false, '\"b\" must be [ref:a]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"strips key nested in alternative","suites":["any","strip()"],"updatePoint":{"line":2534,"column":44},"line":2534,"code":"        it('strips key nested in alternative', () => {\n\n            const schema = Joi.object({\n                a: Joi.alternatives([\n                    Joi.object({\n                        x: Joi.number().strip(),\n                        y: Joi.any()\n                    }),\n                    Joi.object({\n                        x: Joi.any(),\n                        z: Joi.any()\n                    })\n                ]),\n\n                b: Joi.ref('a.x')\n            });\n\n            Helper.validate(schema, [\n                [{}, true, {}],\n                [{ a: { x: 1, y: 1 } }, true, { a: { y: 1 } }],\n                [{ a: { x: 1, z: 1 } }, true],\n                [{ a: { x: 1, z: 1 }, b: 1 }, true],\n                [{ a: { x: 1, z: 1 }, b: 2 }, false, '\"b\" must be [ref:a.x]'],\n                [{ a: { x: '2', z: 1 }, b: 2 }, false, '\"b\" must be [ref:a.x]'],\n                [{ a: { x: '2', z: 1 }, b: '2' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"strips key in array item","suites":["any","strip()"],"updatePoint":{"line":2562,"column":36},"line":2562,"code":"        it('strips key in array item', () => {\n\n            const schema = Joi.array()\n                .items(\n                    Joi.object({\n                        a: Joi.number().strip(),\n                        b: Joi.ref('a')\n                    }),\n                    Joi.object({\n                        a: Joi.string(),\n                        b: Joi.ref('a')\n                    })\n                );\n\n            Helper.validate(schema, [\n                [[], true],\n                [[{ a: 'x', b: 'x' }], true],\n                [[{ a: 1, b: 1 }], true, [{ b: 1 }]],\n                [[{ a: 'x', b: 'x' }, { a: 1, b: 1 }], true, [{ a: 'x', b: 'x' }, { b: 1 }]],\n                [[{ a: '1', b: '1' }], true, [{ a: '1', b: '1' }]]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"ignored in matches","suites":["any","strip()"],"updatePoint":{"line":2585,"column":30},"line":2585,"code":"        it('ignored in matches', () => {\n\n            const schema = Joi.array()\n                .items(Joi.object({\n                    a: {\n                        b: Joi.number().strip(),\n                        c: Joi.number()\n                    }\n                }))\n                .has(Joi.object({\n                    a: {\n                        b: Joi.number().min(10),\n                        c: Joi.boolean().truthy(30).strip()         // Does not affect result\n                    }\n                }));\n\n            Helper.validate(schema, [\n                [[{ a: { b: '20', c: '30' } }], true, [{ a: { c: 30 } }]]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"retains shadow after match","suites":["any","strip()"],"updatePoint":{"line":2606,"column":38},"line":2606,"code":"        it('retains shadow after match', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().strip()\n            })\n                .assert('.a', Joi.number().cast('string').strip().required(), 'error 1')\n                .assert('.a', Joi.number().strict().required(), 'error 2');\n\n            Helper.validate(schema, [\n                [{ a: '1' }, true, {}]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"revers match changes when shadow exists","suites":["any","strip()"],"updatePoint":{"line":2619,"column":51},"line":2619,"code":"        it('revers match changes when shadow exists', () => {\n\n            const schema = Joi.object({\n                x: Joi.strip(),\n                y: Joi.object({\n                    z: Joi.when('$x', { otherwise: Joi.strip() })\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ x: 1, y: { z: 'x' } }, true, { y: {} }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the tags","suites":["any","tag()"],"updatePoint":{"line":2636,"column":25},"line":2636,"code":"        it('sets the tags', () => {\n\n            const b = Joi.any().tag('tag1', 'tag2').tag('tag3');\n            expect(b.describe().tags).to.include('tag1');\n            expect(b.describe().tags).to.include('tag2');\n            expect(b.describe().tags).to.include('tag3');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when tags are missing","suites":["any","tag()"],"updatePoint":{"line":2644,"column":40},"line":2644,"code":"        it('throws when tags are missing', () => {\n\n            expect(() => Joi.any().tag()).to.throw('Missing tags');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when tags are invalid","suites":["any","tag()"],"updatePoint":{"line":2649,"column":40},"line":2649,"code":"        it('throws when tags are invalid', () => {\n\n            expect(() => Joi.any().tag(5)).to.throw('Tags must be non-empty strings');\n            expect(() => Joi.any().tag('')).to.throw('Tags must be non-empty strings');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"customizes root schema","suites":["any","tailor()"],"updatePoint":{"line":2658,"column":34},"line":2658,"code":"        it('customizes root schema', () => {\n\n            const alterations = {\n                x: (s) => s.min(10),\n                y: (s) => s.max(50),\n                z: (s) => s.integer()\n            };\n\n            const before = Joi.number().alter(alterations);\n\n            const first = before.tailor('x');\n            const after1 = Joi.number().min(10).alter(alterations);\n\n            Helper.equal(first, after1);\n            expect(first.describe()).to.equal(after1.describe());\n\n            const second = first.tailor(['y', 'z']);\n            const after2 = Joi.number().min(10).max(50).integer().alter(alterations);\n\n            Helper.equal(second, after2);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"customizes root schema (multiple alter calls)","suites":["any","tailor()"],"updatePoint":{"line":2680,"column":57},"line":2680,"code":"        it('customizes root schema (multiple alter calls)', () => {\n\n            const alter1 = {\n                x: (s) => s.min(10)\n            };\n\n            const alter2 = {\n                y: (s) => s.max(50),\n                z: (s) => s.integer()\n            };\n\n            const before = Joi.number().alter(alter1).alter(alter2);\n\n            const first = before.tailor('x');\n            const after1 = Joi.number().min(10).alter(alter1).alter(alter2);\n\n            Helper.equal(first, after1);\n            expect(first.describe()).to.equal(after1.describe());\n\n            const second = first.tailor(['y', 'z']);\n            const after2 = Joi.number().min(10).max(50).integer().alter(alter1).alter(alter2);\n\n            Helper.equal(second, after2);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"customizes nested schema","suites":["any","tailor()"],"updatePoint":{"line":2705,"column":36},"line":2705,"code":"        it('customizes nested schema', () => {\n\n            const alterations = {\n                x: (s) => s.min(10),\n                y: (s) => s.max(50)\n            };\n\n            const number = Joi.number().alter(alterations);\n\n            const before = Joi.object({\n                a: number,\n                b: {\n                    c: number\n                },\n                d: Joi.object()\n                    .pattern(/.*/, number)\n            });\n\n            const tailored = before.tailor(['x', 'y']);\n\n            const numberxy = number.min(10).max(50);\n            const after = Joi.object({\n                a: numberxy,\n                b: {\n                    c: numberxy\n                },\n                d: Joi.object()\n                    .pattern(/.*/, numberxy)\n            });\n\n            Helper.equal(tailored, after);\n            expect(tailored.describe()).to.equal(after.describe());\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets the unit","suites":["any","unit()"],"updatePoint":{"line":2742,"column":25},"line":2742,"code":"        it('sets the unit', () => {\n\n            const b = Joi.any().unit('milliseconds');\n            expect(b.describe().flags.unit).to.equal('milliseconds');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when unit is missing","suites":["any","unit()"],"updatePoint":{"line":2748,"column":39},"line":2748,"code":"        it('throws when unit is missing', () => {\n\n            expect(() => Joi.any().unit()).to.throw('Unit name must be a non-empty string');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"allows valid values to be set","suites":["any","valid()"],"updatePoint":{"line":2756,"column":41},"line":2756,"code":"        it('allows valid values to be set', () => {\n\n            expect(() => {\n\n                Joi.any().valid(true, 1, 'hello', new Date(), Symbol('foo'), () => { }, {});\n            }).not.to.throw();\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when passed undefined","suites":["any","valid()"],"updatePoint":{"line":2764,"column":40},"line":2764,"code":"        it('throws when passed undefined', () => {\n\n            expect(() => {\n\n                Joi.any().valid(undefined);\n            }).to.throw(Error, 'Cannot call allow/valid/invalid with undefined');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates different types of values","suites":["any","valid()"],"updatePoint":{"line":2772,"column":47},"line":2772,"code":"        it('validates different types of values', () => {\n\n            Helper.validate(Joi.valid(1), [[1, true]]);\n            Helper.validate(Joi.valid(1), [[2, false, '\"value\" must be [1]']]);\n\n            const d = new Date();\n            Helper.validate(Joi.valid(d), [\n                [new Date(d.getTime()), true],\n                [new Date(d.getTime() + 1), false, {\n                    message: `\"value\" must be [${d.toISOString()}]`,\n                    path: [],\n                    type: 'any.only',\n                    context: { value: new Date(d.getTime() + 1), valids: [d], label: 'value' }\n                }]\n            ]);\n            Helper.validate(Joi.valid(Joi.ref('$a')), { context: { a: new Date(d.getTime()) } }, [[d, true]]);\n            Helper.validate(Joi.object({ a: Joi.date(), b: Joi.valid(Joi.ref('a')) }), [[{ a: d, b: d }, true]]);\n            Helper.validate(Joi.object({ a: Joi.array().items(Joi.date()).single(), b: Joi.valid(Joi.in('a')) }), [[{ a: [d], b: d }, true, { a: [d], b: d }]]);\n            Helper.validate(Joi.object({ a: Joi.array().items(Joi.date()).single(), b: Joi.valid(Joi.in('a')) }), [[{ a: [new Date(0)], b: d }, false, '\"b\" must be [ref:a]']]);\n\n            const str = 'foo';\n            Helper.validate(Joi.valid(str), [\n                [str, true],\n                ['foobar', false, {\n                    message: '\"value\" must be [foo]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'foobar', valids: [str], label: 'value' }\n                }]\n            ]);\n\n            const s = Symbol('foo');\n            const otherSymbol = Symbol('foo');\n            Helper.validate(Joi.valid(s), [\n                [s, true],\n                [otherSymbol, false, {\n                    message: '\"value\" must be [Symbol(foo)]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: otherSymbol, valids: [s], label: 'value' }\n                }]\n            ]);\n\n            const o = {};\n            Helper.validate(Joi.valid(o), [\n                [o, true],\n                [{}, true],\n                [{ x: 1 }, false, {\n                    message: '\"value\" must be [[object Object]]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: { x: 1 }, valids: [o], label: 'value' }\n                }]\n            ]);\n\n            const f = () => { };\n            const otherFunction = () => { };\n            Helper.validate(Joi.valid(f), [\n                [f, true],\n                [otherFunction, false, {\n                    message: '\"value\" must be [() => { }]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: otherFunction, valids: [f], label: 'value' }\n                }]\n            ]);\n\n            const b = Buffer.from('foo');\n            Helper.validate(Joi.valid(b), [\n                [b, true],\n                [Buffer.from('foobar'), false, {\n                    message: '\"value\" must be [foo]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: Buffer.from('foobar'), valids: [b], label: 'value' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports templates","suites":["any","valid()"],"updatePoint":{"line":2851,"column":30},"line":2851,"code":"        it('supports templates', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.valid(Joi.x('{a + 1}'))\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 6 }, true],\n                [{ a: 5, b: 5 }, false, '\"b\" must be [{a + 1}]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports templates with literals","suites":["any","valid()"],"updatePoint":{"line":2864,"column":44},"line":2864,"code":"        it('supports templates with literals', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.valid(Joi.x('x{a + 1}'))\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x6' }, true],\n                [{ a: 5, b: 'x5' }, false, '\"b\" must be [x{a + 1}]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports pure literal templates","suites":["any","valid()"],"updatePoint":{"line":2877,"column":43},"line":2877,"code":"        it('supports pure literal templates', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.valid(Joi.x('x'))\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x' }, true],\n                [{ a: 5, b: 'y' }, false, '\"b\" must be [x]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports templates with functions","suites":["any","valid()"],"updatePoint":{"line":2890,"column":45},"line":2890,"code":"        it('supports templates with functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.boolean(),\n                c: Joi.valid(Joi.x('{if(a == 5 && b == true, a * 2, null)}'))\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: true, c: 10 }, true],\n                [{ a: 5, b: false, c: null }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"looks up values in array (from single value)","suites":["any","valid()"],"updatePoint":{"line":2904,"column":56},"line":2904,"code":"        it('looks up values in array (from single value)', () => {\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.string()),\n                b: Joi.in('a')\n            });\n\n            Helper.validate(schema, [\n                [{ a: ['1', '2'], b: '2' }, true],\n                [{ a: ['1', '2'], b: '3' }, false, '\"b\" must be [ref:a]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"looks up values in array (from array value)","suites":["any","valid()"],"updatePoint":{"line":2917,"column":55},"line":2917,"code":"        it('looks up values in array (from array value)', () => {\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.string()),\n                b: Joi.array().valid(Joi.ref('a'))\n            });\n\n            Helper.validate(schema, [\n                [{ a: ['1', '2'], b: ['1', '2'] }, true],\n                [{ a: ['1', '2'], b: ['1'] }, false, '\"b\" must be [ref:a]']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"checks value after conversion","suites":["any","$_validate()"],"updatePoint":{"line":2933,"column":41},"line":2933,"code":"        it('checks value after conversion', () => {\n\n            const schema = Joi.number().invalid(2);\n            Helper.validate(schema, { abortEarly: false }, [['2', false, {\n                message: '\"value\" contains an invalid value',\n                details: [{\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 2, invalids: [2], label: 'value' }\n                }]\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"accepts only value (sync way)","suites":["any","validate()"],"updatePoint":{"line":2950,"column":41},"line":2950,"code":"        it('accepts only value (sync way)', () => {\n\n            const schema = Joi.number();\n            Helper.validate(schema, [['2', true, 2]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"accepts value and options","suites":["any","validate()"],"updatePoint":{"line":2956,"column":37},"line":2956,"code":"        it('accepts value and options', () => {\n\n            const schema = Joi.number();\n            Helper.validate(schema, { convert: false }, [['2', false, {\n                message: '\"value\" must be a number',\n                path: [],\n                type: 'number.base',\n                context: { label: 'value', value: '2' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"accepts value, options and callback","suites":["any","validate()"],"updatePoint":{"line":2967,"column":47},"line":2967,"code":"        it('accepts value, options and callback', () => {\n\n            const schema = Joi.number();\n            Helper.validate(schema, { convert: false }, [['2', false, {\n                message: '\"value\" must be a number',\n                path: [],\n                type: 'number.base',\n                context: { label: 'value', value: '2' }\n            }]]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"turns error into warning","suites":["any","warn"],"updatePoint":{"line":2981,"column":36},"line":2981,"code":"        it('turns error into warning', () => {\n\n            const schema = Joi.string().min(10).warn();\n            const { value, error, warning } = schema.validate('abc');\n            expect(value).to.equal('abc');\n            expect(error).to.not.exist();\n            expect(warning).to.equal({\n                message: '\"value\" length must be at least 10 characters long',\n                details: [\n                    {\n                        message: '\"value\" length must be at least 10 characters long',\n                        path: [],\n                        type: 'string.min',\n                        context: {\n                            encoding: undefined,\n                            label: 'value',\n                            limit: 10,\n                            value: 'abc'\n                        }\n                    }\n                ]\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when options are invalid","suites":["any","when()"],"updatePoint":{"line":3008,"column":43},"line":3008,"code":"        it('throws when options are invalid', () => {\n\n            expect(() => Joi.when('a', 4)).to.throw('Options must be of type object');\n            expect(() => Joi.when('a')).to.throw('Missing options');\n            expect(() => Joi.when(0)).to.throw('Missing options');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when break used with then and otherwise","suites":["any","when()"],"updatePoint":{"line":3015,"column":58},"line":3015,"code":"        it('throws when break used with then and otherwise', () => {\n\n            expect(() => Joi.when('a', { then: 1, otherwise: 2, break: true })).to.throw('Cannot specify then, otherwise, and break all together');\n            expect(() => Joi.when('a', { switch: [{ is: true, then: 1, otherwise: 2 }], break: true })).to.throw('Cannot specify both otherwise and break');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates multiple conditions","suites":["any","when()"],"updatePoint":{"line":3021,"column":41},"line":3021,"code":"        it('validates multiple conditions', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.number()\n                    .when('a', { is: true, then: Joi.number().max(100) })\n                    .when('b', { is: true, then: Joi.number().min(10) })\n            });\n\n            Helper.validate(schema, [\n                [{ c: 0 }, true],\n                [{ c: 10 }, true],\n                [{ c: 100 }, true],\n                [{ c: 50 }, true],\n                [{ c: 101 }, true],\n                [{ a: true, c: 0 }, true],\n                [{ a: true, c: 100 }, true],\n                [{ a: true, c: 101 }, false, {\n                    message: '\"c\" must be less than or equal to 100',\n                    path: ['c'],\n                    type: 'number.max',\n                    context: { value: 101, label: 'c', key: 'c', limit: 100 }\n                }],\n                [{ b: true, c: 10 }, true],\n                [{ b: true, c: 50 }, true],\n                [{ b: true, c: 101 }, true],\n                [{ b: true, c: 0 }, false, {\n                    message: '\"c\" must be greater than or equal to 10',\n                    path: ['c'],\n                    type: 'number.min',\n                    context: { value: 0, label: 'c', key: 'c', limit: 10 }\n                }],\n                [{ a: true, b: true, c: 10 }, true],\n                [{ a: true, b: true, c: 100 }, true],\n                [{ a: true, b: true, c: 50 }, true],\n                [{ a: true, b: true, c: 0 }, false, {\n                    message: '\"c\" must be greater than or equal to 10',\n                    path: ['c'],\n                    type: 'number.min',\n                    context: { value: 0, label: 'c', key: 'c', limit: 10 }\n                }],\n                [{ a: true, b: true, c: 101 }, false, {\n                    message: '\"c\" must be less than or equal to 100',\n                    path: ['c'],\n                    type: 'number.max',\n                    context: { value: 101, label: 'c', key: 'c', limit: 100 }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates multiple conditions (implicit valids)","suites":["any","when()"],"updatePoint":{"line":3072,"column":59},"line":3072,"code":"        it('validates multiple conditions (implicit valids)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.number()\n                    .when('a', { is: true, then: 1 })\n                    .when('b', { is: true, then: 2 })\n            });\n\n            Helper.validate(schema, [\n                [{ c: 0 }, true],\n                [{ c: 1 }, true],\n                [{ c: 2 }, true],\n                [{ a: true, c: 1 }, true],\n                [{ a: true, c: 2 }, false, {\n                    message: '\"c\" must be [1]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 2, label: 'c', key: 'c', valids: [1] }\n                }],\n                [{ b: true, c: 2 }, true],\n                [{ b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }],\n                [{ a: true, b: true, c: 2 }, true],\n                [{ a: true, b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports implicit this","suites":["any","when()"],"updatePoint":{"line":3110,"column":34},"line":3110,"code":"        it('supports implicit this', () => {\n\n            const schema = Joi.object({\n                c: Joi.number()\n                    .when({ is: 1, then: Joi.strip() })\n            });\n\n            Helper.validate(schema, [\n                [{ c: 0 }, true],\n                [{ c: 1 }, true, {}]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"supports not","suites":["any","when()"],"updatePoint":{"line":3123,"column":24},"line":3123,"code":"        it('supports not', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.number()\n                    .when('a', { not: false, then: 1 })\n                    .when('b', { not: false, then: 2 })\n            });\n\n            Helper.validate(schema, [\n                [{ c: 0 }, true],\n                [{ c: 1 }, true],\n                [{ c: 2 }, true],\n                [{ a: true, c: 1 }, true],\n                [{ a: true, c: 2 }, false, {\n                    message: '\"c\" must be [1]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 2, label: 'c', key: 'c', valids: [1] }\n                }],\n                [{ b: true, c: 2 }, true],\n                [{ b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }],\n                [{ a: true, b: true, c: 2 }, true],\n                [{ a: true, b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"defaults is to truthy","suites":["any","when()"],"updatePoint":{"line":3161,"column":33},"line":3161,"code":"        it('defaults is to truthy', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.number()\n                    .when('a', { then: 1, otherwise: 2 })\n            });\n\n            Helper.validate(schema, [\n                [{ b: 2 }, true],\n                [{ a: 1, b: 1 }, true],\n                [{ b: 1 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'b', key: 'b', valids: [2] }\n                }],\n                [{ a: 0, b: 1 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'b', key: 'b', valids: [2] }\n                }],\n                [{ a: '', b: 1 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'b', key: 'b', valids: [2] }\n                }],\n                [{ a: false, b: 1 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'b', key: 'b', valids: [2] }\n                }],\n                [{ a: null, b: 1 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'b', key: 'b', valids: [2] }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets type whens","suites":["any","when()"],"updatePoint":{"line":3205,"column":27},"line":3205,"code":"        it('sets type whens', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.string().valid('x').when('a', { is: 5, then: Joi.valid('y'), otherwise: Joi.valid('z') })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x' }, true],\n                [{ a: 5, b: 'y' }, true],\n                [{ a: 5, b: 'z' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'x' }, true],\n                [{ a: 1, b: 'y' }, false, {\n                    message: '\"b\" must be one of [x, z]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'y', valids: ['x', 'z'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'z' }, true],\n                [{ a: 5, b: 'a' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" must be one of [x, z]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x', 'z'], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets type whens (only then)","suites":["any","when()"],"updatePoint":{"line":3244,"column":39},"line":3244,"code":"        it('sets type whens (only then)', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.string().valid('x').when('a', { is: 5, then: Joi.valid('y') })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x' }, true],\n                [{ a: 5, b: 'y' }, true],\n                [{ a: 5, b: 'z' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'x' }, true],\n                [{ a: 1, b: 'y' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'y', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'z' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 5, b: 'a' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x'], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets type whens (only otherwise)","suites":["any","when()"],"updatePoint":{"line":3288,"column":44},"line":3288,"code":"        it('sets type whens (only otherwise)', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.string().valid('x').when('a', { is: 5, otherwise: Joi.valid('z') })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x' }, true],\n                [{ a: 5, b: 'y' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'y', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 5, b: 'z' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'x' }, true],\n                [{ a: 1, b: 'y' }, false, {\n                    message: '\"b\" must be one of [x, z]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'y', valids: ['x', 'z'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'z' }, true],\n                [{ a: 5, b: 'a' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" must be one of [x, z]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x', 'z'], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets type whens (with is as a schema)","suites":["any","when()"],"updatePoint":{"line":3332,"column":49},"line":3332,"code":"        it('sets type whens (with is as a schema)', () => {\n\n            const schema = Joi.object({\n                a: Joi.any(),\n                b: Joi.string().valid('x').when('a', { is: Joi.number().valid(5).required(), then: Joi.valid('y') })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 5, b: 'x' }, true],\n                [{ a: 5, b: 'y' }, true],\n                [{ a: 5, b: 'z' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'x' }, true],\n                [{ a: 1, b: 'y' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'y', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 'z' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'z', valids: ['x'], label: 'b', key: 'b' }\n                }],\n                [{ a: 5, b: 'a' }, false, {\n                    message: '\"b\" must be one of [x, y]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x', 'y'], label: 'b', key: 'b' }\n                }],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" must be [x]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 'a', valids: ['x'], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"makes peer required","suites":["any","when()"],"updatePoint":{"line":3376,"column":31},"line":3376,"code":"        it('makes peer required', () => {\n\n            const schema = Joi.object({\n                a: Joi.when('b', { is: 5, then: Joi.required() }),\n                b: Joi.any()\n            });\n\n            Helper.validate(schema, [\n                [{ b: 5 }, false, {\n                    message: '\"a\" is required',\n                    path: ['a'],\n                    type: 'any.required',\n                    context: { label: 'a', key: 'a' }\n                }],\n                [{ b: 6 }, true],\n                [{ a: 'b' }, true],\n                [{ b: 5, a: 'x' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"makes peer required (is ref)","suites":["any","when()"],"updatePoint":{"line":3396,"column":40},"line":3396,"code":"        it('makes peer required (is ref)', () => {\n\n            const schema = Joi.object({\n                a: Joi.when('b', { is: Joi.ref('c'), then: Joi.required() }),\n                b: Joi.any(),\n                c: Joi.any()\n            });\n\n            Helper.validate(schema, [\n                [{ b: 5, c: 5 }, false, {\n                    message: '\"a\" is required',\n                    path: ['a'],\n                    type: 'any.required',\n                    context: { label: 'a', key: 'a' }\n                }],\n                [{ b: 6, c: 5 }, true],\n                [{ a: 'b' }, true],\n                [{ b: 5, a: 'x' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"makes peer required (switch is ref)","suites":["any","when()"],"updatePoint":{"line":3417,"column":47},"line":3417,"code":"        it('makes peer required (switch is ref)', () => {\n\n            const schema = Joi.object({\n                a: Joi.when('b', [\n                    { is: Joi.ref('c'), then: Joi.required() },\n                    { is: 10, then: Joi.forbidden() }\n                ]),\n                b: Joi.any(),\n                c: Joi.any()\n            });\n\n            Helper.validate(schema, [\n                [{ b: 5, c: 5 }, false, {\n                    message: '\"a\" is required',\n                    path: ['a'],\n                    type: 'any.required',\n                    context: { label: 'a', key: 'a' }\n                }],\n                [{ b: 6, c: 5 }, true],\n                [{ a: 'b' }, true],\n                [{ b: 5, a: 'x' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"breaks early","suites":["any","when()"],"updatePoint":{"line":3441,"column":24},"line":3441,"code":"        it('breaks early', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.number()\n                    .when('d', { then: 0, break: true })\n                    .when('a', { then: 1, break: true })\n                    .when('b', { then: 2 })\n            });\n\n            Helper.validate(schema, [\n                [{ a: true, b: true, c: 1 }, true],\n                [{ a: false, b: true, c: 2 }, true],\n                [{ a: false, b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"breaks early (otherwise)","suites":["any","when()"],"updatePoint":{"line":3464,"column":36},"line":3464,"code":"        it('breaks early (otherwise)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.number()\n                    .when('a', { otherwise: 2, break: true })\n                    .when('b', { then: 1 })\n            });\n\n            Helper.validate(schema, [\n                [{ a: true, b: true, c: 1 }, true],\n                [{ a: false, b: true, c: 2 }, true],\n                [{ a: false, b: true, c: 1 }, false, {\n                    message: '\"c\" must be [2]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 1, label: 'c', key: 'c', valids: [2] }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"works with prefs()","suites":["any","when()"],"updatePoint":{"line":3486,"column":30},"line":3486,"code":"        it('works with prefs()', () => {\n\n            const schema = Joi.number()\n                .prefs({ errors: { label: 'key' } })\n                .when('$x', { then: Joi.number().min(1) });\n\n            Helper.validate(schema, { context: { x: true } }, [\n                [1, true],\n                [0, false, '\"value\" must be greater than or equal to 1']\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"describes the base schema","suites":["any","when()"],"updatePoint":{"line":3498,"column":37},"line":3498,"code":"        it('describes the base schema', () => {\n\n            const schema = Joi.number()\n                .min(10)\n                .when('a', {\n                    is: 5,\n                    then: Joi.number().max(20).required()\n                });\n\n            expect(schema.describe()).to.equal({\n                type: 'number',\n                rules: [\n                    { args: { limit: 10 }, name: 'min' }\n                ],\n                whens: [{\n                    ref: { path: ['a'] },\n                    is: {\n                        type: 'any',\n                        flags: {\n                            only: true,\n                            presence: 'required'\n                        },\n                        allow: [{ override: true }, 5]\n                    },\n                    then: {\n                        type: 'number',\n                        flags: {\n                            presence: 'required'\n                        },\n                        rules: [{ name: 'max', args: { limit: 20 } }]\n                    }\n                }]\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"can describe as the original object (with a schema as a condition)","suites":["any","when()"],"updatePoint":{"line":3533,"column":78},"line":3533,"code":"        it('can describe as the original object (with a schema as a condition)', () => {\n\n            const schema = Joi.number()\n                .min(10)\n                .when(Joi.number().min(5), { then: Joi.number().max(20).required() });\n\n            expect(schema.describe()).to.equal({\n                type: 'number',\n                rules: [{ args: { limit: 10 }, name: 'min' }],\n                whens: [{\n                    is: {\n                        type: 'number',\n                        rules: [{ name: 'min', args: { limit: 5 } }]\n                    },\n                    then: {\n                        type: 'number',\n                        flags: { presence: 'required' },\n                        rules: [{ name: 'max', args: { limit: 20 } }]\n                    }\n                }]\n            });\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on multiple conditions","suites":["any","when()"],"updatePoint":{"line":3556,"column":51},"line":3556,"code":"        it('sets value based on multiple conditions', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number()\n                    .when('a', [\n                        { is: 0, then: Joi.valid(1) },\n                        { is: 1, then: Joi.valid(2) },\n                        { is: 2, then: Joi.valid(3) }\n                    ])\n            });\n\n            Helper.validate(schema, [\n                [{ a: 0, b: 1 }, true],\n                [{ a: 0, b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 2 }, true],\n                [{ a: 1, b: 3 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [2], label: 'b', key: 'b' }\n                }],\n                [{ a: 2, b: 3 }, true],\n                [{ a: 2, b: 4 }, false, {\n                    message: '\"b\" must be [3]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 4, valids: [3], label: 'b', key: 'b' }\n                }],\n                [{ a: 42, b: 128 }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on multiple conditions with otherwise","suites":["any","when()"],"updatePoint":{"line":3594,"column":66},"line":3594,"code":"        it('sets value based on multiple conditions with otherwise', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number()\n                    .when('a', {\n                        switch: [\n                            { is: 0, then: Joi.valid(1) },\n                            { is: 1, then: Joi.valid(2) },\n                            { is: 2, then: Joi.valid(3) }\n                        ],\n                        otherwise: Joi.valid(4)\n                    })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 0, b: 1 }, true],\n                [{ a: 0, b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 2 }, true],\n                [{ a: 1, b: 3 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [2], label: 'b', key: 'b' }\n                }],\n                [{ a: 2, b: 3 }, true],\n                [{ a: 2, b: 2 }, false, {\n                    message: '\"b\" must be [3]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [3], label: 'b', key: 'b' }\n                }],\n                [{ a: 42, b: 4 }, true],\n                [{ a: 42, b: 128 }, false, {\n                    message: '\"b\" must be [4]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 128, valids: [4], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on multiple conditions with otherwise (short)","suites":["any","when()"],"updatePoint":{"line":3641,"column":74},"line":3641,"code":"        it('sets value based on multiple conditions with otherwise (short)', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number()\n                    .when('a', [\n                        { is: 0, then: 1 },\n                        { is: 1, then: 2 },\n                        { is: 2, then: 3, otherwise: 4 }\n                    ])\n            });\n\n            Helper.validate(schema, [\n                [{ a: 0, b: 1 }, true],\n                [{ a: 0, b: 2 }, false, {\n                    message: '\"b\" must be [1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 2 }, true],\n                [{ a: 1, b: 3 }, false, {\n                    message: '\"b\" must be [2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [2], label: 'b', key: 'b' }\n                }],\n                [{ a: 2, b: 3 }, true],\n                [{ a: 2, b: 2 }, false, {\n                    message: '\"b\" must be [3]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [3], label: 'b', key: 'b' }\n                }],\n                [{ a: 42, b: 4 }, true],\n                [{ a: 42, b: 128 }, false, {\n                    message: '\"b\" must be [4]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 128, valids: [4], label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"sets value based on multiple conditions (with base rules)","suites":["any","when()"],"updatePoint":{"line":3685,"column":69},"line":3685,"code":"        it('sets value based on multiple conditions (with base rules)', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number().valid(10)\n                    .when('a', [\n                        { is: 0, then: Joi.valid(1) },\n                        { is: 1, then: Joi.valid(2) },\n                        { is: 2, then: Joi.valid(3) }\n                    ])\n            });\n\n            Helper.validate(schema, [\n                [{ a: 0, b: 1 }, true],\n                [{ a: 0, b: 2 }, false, {\n                    message: '\"b\" must be one of [10, 1]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [10, 1], label: 'b', key: 'b' }\n                }],\n                [{ a: 0, b: 10 }, true],\n                [{ a: 1, b: 2 }, true],\n                [{ a: 1, b: 3 }, false, {\n                    message: '\"b\" must be one of [10, 2]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 3, valids: [10, 2], label: 'b', key: 'b' }\n                }],\n                [{ a: 1, b: 10 }, true],\n                [{ a: 2, b: 3 }, true],\n                [{ a: 2, b: 4 }, false, {\n                    message: '\"b\" must be one of [10, 3]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 4, valids: [10, 3], label: 'b', key: 'b' }\n                }],\n                [{ a: 2, b: 10 }, true],\n                [{ a: 42, b: 128 }, false, {\n                    message: '\"b\" must be [10]',\n                    path: ['b'],\n                    type: 'any.only',\n                    context: { value: 128, valids: [10], label: 'b', key: 'b' }\n                }],\n                [{ a: 42, b: 10 }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"caches partials using variations in sub when conditions","suites":["any","when()"],"updatePoint":{"line":3732,"column":67},"line":3732,"code":"        it('caches partials using variations in sub when conditions', () => {\n\n            const sub = Joi.when('b', { is: true, then: 2, otherwise: 3 });\n            const schema = Joi.object({\n                a: Joi.boolean().required(),\n                b: Joi.boolean().required(),\n                c: Joi.number()\n                    .when('a', { is: true, then: 1, otherwise: sub })\n            });\n\n            Helper.validate(schema, [\n                [{ a: true, b: true, c: 1 }, true],\n                [{ a: false, b: true, c: 2 }, true],\n                [{ a: false, b: false, c: 3 }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates conditional whens (self reference, explicit)","suites":["any","when()"],"updatePoint":{"line":3749,"column":66},"line":3749,"code":"        it('validates conditional whens (self reference, explicit)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean().required()\n            })\n                .when(Joi.ref('a', { ancestor: 0 }), {\n                    is: true,\n                    then: {\n                        b: Joi.string().required()\n                    },\n                    otherwise: {\n                        c: Joi.string().required()\n                    }\n                });\n\n            Helper.validate(schema, [\n                [{ a: true, b: 'x' }, true],\n                [{ a: true, b: 5 }, false, {\n                    message: '\"b\" must be a string',\n                    path: ['b'],\n                    type: 'string.base',\n                    context: { value: 5, key: 'b', label: 'b' }\n                }],\n                [{ a: true }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n                [{ a: true, c: 5 }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n                [{ a: true, c: 'x' }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n\n                [{ a: false, b: 'x' }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false, b: 5 }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false, c: 5 }, false, {\n                    message: '\"c\" must be a string',\n                    path: ['c'],\n                    type: 'string.base',\n                    context: { value: 5, key: 'c', label: 'c' }\n                }],\n                [{ a: false, c: 'x' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates conditional whens (self reference, implicit)","suites":["any","when()"],"updatePoint":{"line":3819,"column":66},"line":3819,"code":"        it('validates conditional whens (self reference, implicit)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean().required()\n            })\n                .when('.a', {\n                    is: true,\n                    then: {\n                        b: Joi.string().required()\n                    },\n                    otherwise: {\n                        c: Joi.string().required()\n                    }\n                });\n\n            Helper.validate(schema, [\n                [{ a: true, b: 'x' }, true],\n                [{ a: true, b: 5 }, false, {\n                    message: '\"b\" must be a string',\n                    path: ['b'],\n                    type: 'string.base',\n                    context: { value: 5, key: 'b', label: 'b' }\n                }],\n                [{ a: true }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n                [{ a: true, c: 5 }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n                [{ a: true, c: 'x' }, false, {\n                    message: '\"b\" is required',\n                    path: ['b'],\n                    type: 'any.required',\n                    context: { key: 'b', label: 'b' }\n                }],\n                [{ a: false, b: 'x' }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false, b: 5 }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false }, false, {\n                    message: '\"c\" is required',\n                    path: ['c'],\n                    type: 'any.required',\n                    context: { key: 'c', label: 'c' }\n                }],\n                [{ a: false, c: 5 }, false, {\n                    message: '\"c\" must be a string',\n                    path: ['c'],\n                    type: 'string.base',\n                    context: { value: 5, key: 'c', label: 'c' }\n                }],\n                [{ a: false, c: 'x' }, true]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"validates with nested whens","suites":["any","when()"],"updatePoint":{"line":3888,"column":39},"line":3888,"code":"        it('validates with nested whens', () => {\n\n            // If ((b === 0 && a === 123) ||\n            //     (b !== 0 && a === anything))\n            // then c === 456\n            // else c === 789\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number().required(),\n                c: Joi.when('a', {\n                    is: Joi.when('b', {\n                        is: Joi.valid(0),\n                        then: Joi.valid(123)\n                    }),\n                    then: Joi.valid(456),\n                    otherwise: Joi.valid(789)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 123, b: 0, c: 456 }, true],\n                [{ a: 0, b: 1, c: 456 }, true],\n                [{ a: 0, b: 0, c: 789 }, true],\n                [{ a: 123, b: 456, c: 456 }, true],\n                [{ a: 0, b: 0, c: 456 }, false, {\n                    message: '\"c\" must be [789]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 456, valids: [789], label: 'c', key: 'c' }\n                }],\n                [{ a: 123, b: 456, c: 789 }, false, {\n                    message: '\"c\" must be [456]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 789, valids: [456], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"throws when conditions conflict","suites":["any","when()"],"updatePoint":{"line":3928,"column":43},"line":3928,"code":"        it('throws when conditions conflict', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.when('a', { is: true, then: Joi.number() }).when('b', { is: true, then: Joi.string() })\n            });\n\n            expect(() => schema.validate({ a: true, b: true, c: 'x' })).to.throw('Cannot merge type number with another type: string');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"should peek inside a simple value","suites":["any","when()","with schema"],"updatePoint":{"line":3941,"column":49},"line":3941,"code":"            it('should peek inside a simple value', () => {\n\n                const schema = Joi.number().when(Joi.number().min(0), { then: Joi.number().min(10) });\n                Helper.validate(schema, [\n                    [-1, true, -1],\n                    [1, false, {\n                        message: '\"value\" must be greater than or equal to 10',\n                        path: [],\n                        type: 'number.min',\n                        context: { limit: 10, value: 1, label: 'value' }\n                    }],\n                    [10, true, 10]\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"should peek inside an object","suites":["any","when()","with schema"],"updatePoint":{"line":3956,"column":44},"line":3956,"code":"            it('should peek inside an object', () => {\n\n                const schema = Joi.object().keys({\n                    foo: Joi.string(),\n                    bar: Joi.number()\n                })\n                    .when(Joi.object().keys({ foo: Joi.valid('hasBar').required() }).unknown(), {\n                        then: Joi.object().keys({ bar: Joi.required() })\n                    });\n\n                Helper.validate(schema, [\n                    [{ foo: 'whatever' }, true, { foo: 'whatever' }],\n                    [{ foo: 'hasBar' }, false, {\n                        message: '\"bar\" is required',\n                        path: ['bar'],\n                        type: 'any.required',\n                        context: { key: 'bar', label: 'bar' }\n                    }],\n                    [{ foo: 'hasBar', bar: 42 }, true, { foo: 'hasBar', bar: 42 }],\n                    [{}, true, {}]\n                ]);\n            });","file":"base.js","skipped":false,"dir":"test"},{"name":"errors on invalid options","suites":["any","_rule()"],"updatePoint":{"line":3983,"column":37},"line":3983,"code":"        it('errors on invalid options', () => {\n\n            expect(() => Joi.any().$_addRule()).to.throw('Invalid options');\n            expect(() => Joi.any().$_addRule(5)).to.throw('Invalid options');\n            expect(() => Joi.any().$_addRule({})).to.throw('Invalid rule name');\n            expect(() => Joi.any().$_addRule('')).to.throw('Invalid rule name');\n            expect(() => Joi.any().$_addRule({ name: '' })).to.throw('Invalid rule name');\n            expect(() => Joi.any().$_addRule({ name: 5 })).to.throw('Invalid rule name');\n        });","file":"base.js","skipped":false,"dir":"test"},{"name":"caches values","suites":["Cache","schema"],"updatePoint":{"line":19,"column":25},"line":19,"code":"        it('caches values', () => {\n\n            const schema = Joi.string().pattern(/abc/).cache();\n\n            const validate = schema._definition.rules.pattern.validate;\n            let count = 0;\n            schema._definition.rules.pattern.validate = function (...args) {\n\n                ++count;\n                return validate(...args);\n            };\n\n            expect(schema.validate('xabcd').error).to.not.exist();\n            expect(schema.validate('xabcd').error).to.not.exist();\n            expect(schema.validate('xabcd').error).to.not.exist();\n\n            expect(count).to.equal(1);\n\n            schema._definition.rules.pattern.validate = validate;\n        });","file":"cache.js","skipped":false,"dir":"test"},{"name":"caches values (object key)","suites":["Cache","schema"],"updatePoint":{"line":40,"column":38},"line":40,"code":"        it('caches values (object key)', () => {\n\n            const a = Joi.string().pattern(/abc/).cache();\n            const schema = Joi.object({ a });\n\n            const validate = a._definition.rules.pattern.validate;\n            let count = 0;\n            a._definition.rules.pattern.validate = function (...args) {\n\n                ++count;\n                return validate(...args);\n            };\n\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n\n            expect(count).to.equal(1);\n\n            a._definition.rules.pattern.validate = validate;\n        });","file":"cache.js","skipped":false,"dir":"test"},{"name":"caches errors","suites":["Cache","schema"],"updatePoint":{"line":62,"column":25},"line":62,"code":"        it('caches errors', () => {\n\n            const schema = Joi.string().pattern(/abc/).cache();\n\n            const validate = schema._definition.rules.pattern.validate;\n            let count = 0;\n            schema._definition.rules.pattern.validate = function (...args) {\n\n                ++count;\n                return validate(...args);\n            };\n\n            const err = schema.validate('xbcd').error;\n            expect(schema.validate('xbcd').error).to.equal(err);\n            expect(schema.validate('xbcd').error).to.equal(err);\n            expect(schema.validate('xbcd').error).to.equal(err);\n\n            expect(count).to.equal(1);\n\n            schema._definition.rules.pattern.validate = validate;\n        });","file":"cache.js","skipped":false,"dir":"test"},{"name":"skips caching when prefs disabled","suites":["Cache","schema"],"updatePoint":{"line":84,"column":45},"line":84,"code":"        it('skips caching when prefs disabled', () => {\n\n            const cache = Joi.cache.provision();\n            const schema = Joi.string().pattern(/abc/).cache(cache);\n\n            const validate = schema._definition.rules.pattern.validate;\n            let count = 0;\n            schema._definition.rules.pattern.validate = function (...args) {\n\n                ++count;\n                return validate(...args);\n            };\n\n            expect(schema.validate('xabcd', { cache: false }).error).to.not.exist();\n            expect(schema.validate('xabcd', { cache: false }).error).to.not.exist();\n            expect(schema.validate('xabcd', { cache: false }).error).to.not.exist();\n\n            expect(count).to.equal(3);\n\n            schema._definition.rules.pattern.validate = validate;\n        });","file":"cache.js","skipped":false,"dir":"test"},{"name":"skips caching when schema contains refs","suites":["Cache","schema"],"updatePoint":{"line":106,"column":51},"line":106,"code":"        it('skips caching when schema contains refs', () => {\n\n            const a = Joi.string().allow(Joi.ref('b')).pattern(/abc/).cache();\n            const schema = Joi.object({\n                a,\n                b: Joi.any()\n            });\n\n            const validate = a._definition.rules.pattern.validate;\n            let count = 0;\n            a._definition.rules.pattern.validate = function (...args) {\n\n                ++count;\n                return validate(...args);\n            };\n\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n            expect(schema.validate({ a: 'xabcd' }).error).to.not.exist();\n\n            expect(count).to.equal(3);\n\n            a._definition.rules.pattern.validate = validate;\n        });","file":"cache.js","skipped":false,"dir":"test"},{"name":"generates cache","suites":["Cache","provider","provision()"],"updatePoint":{"line":136,"column":31},"line":136,"code":"            it('generates cache', () => {\n\n                const cache = Joi.cache.provision({ max: 5 });\n\n                cache.set(1, 'x');\n                expect(cache.get(1)).to.equal('x');\n\n                cache.set(2, 'y');\n                expect(cache.get(2)).to.equal('y');\n\n                cache.set(3, 'z');\n                expect(cache.get(3)).to.equal('z');\n\n                cache.set('a', 'b');\n                expect(cache.get('a')).to.equal('b');\n\n                cache.set('b', 'c');\n                expect(cache.get('b')).to.equal('c');\n\n                cache.set({}, 'ignore');\n                expect(cache.get({})).to.not.exist();\n\n                cache.set(1, 'v');\n                expect(cache.get(1)).to.equal('v');\n\n                cache.set(null, 'x');\n                expect(cache.get(null)).to.equal('x');\n\n                expect(cache).to.have.length(5);\n\n                expect(cache.get(2)).to.not.exist();\n                expect(cache.get(1)).to.equal('v');\n            });","file":"cache.js","skipped":false,"dir":"test"},{"name":"generates cache with default max","suites":["Cache","provider","Joi.cache"],"updatePoint":{"line":173,"column":48},"line":173,"code":"            it('generates cache with default max', () => {\n\n                const cache = Joi.cache.provision();\n                for (let i = 0; i < 1020; ++i) {\n                    cache.set(i, i + 10);\n                    expect(cache.get(i)).to.equal(i + 10);\n                }\n\n                expect(cache).to.have.length(1000);\n            });","file":"cache.js","skipped":false,"dir":"test"},{"name":"errors on invalid max option","suites":["Cache","provider","Joi.cache"],"updatePoint":{"line":184,"column":44},"line":184,"code":"            it('errors on invalid max option', () => {\n\n                expect(() => Joi.cache.provision({ max: null })).to.throw('Invalid max cache size');\n                expect(() => Joi.cache.provision({ max: Infinity })).to.throw('Invalid max cache size');\n                expect(() => Joi.cache.provision({ max: -1 })).to.throw('Invalid max cache size');\n                expect(() => Joi.cache.provision({ max: 0 })).to.throw('Invalid max cache size');\n            });","file":"cache.js","skipped":false,"dir":"test"},{"name":"validates null","suites":["Common","assertOptions"],"updatePoint":{"line":20,"column":26},"line":20,"code":"        it('validates null', () => {\n\n            expect(() => Common.assertOptions()).to.throw('Options must be of type object');\n        });","file":"common.js","skipped":false,"dir":"test"},{"name":"casts templates","suites":["cast","schema()"],"updatePoint":{"line":22,"column":27},"line":22,"code":"        it('casts templates', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.x('{a + 1}')\n            });\n\n            Helper.validate(schema, [[{ a: 5, b: 6 }, true]]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles null schema","suites":["cast","schema()"],"updatePoint":{"line":32,"column":32},"line":32,"code":"        it('compiles null schema', () => {\n\n            Helper.validate(Joi.compile(null), [\n                ['a', false, {\n                    message: '\"value\" must be [null]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'a', valids: [null], label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles number literal","suites":["cast","schema()"],"updatePoint":{"line":45,"column":35},"line":45,"code":"        it('compiles number literal', () => {\n\n            Helper.validate(Joi.compile(5), [\n                [6, false, {\n                    message: '\"value\" must be [5]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 6, valids: [5], label: 'value' }\n                }],\n                [5, true]\n            ]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles string literal","suites":["cast","schema()"],"updatePoint":{"line":58,"column":35},"line":58,"code":"        it('compiles string literal', () => {\n\n            Helper.validate(Joi.compile('5'), [\n                ['6', false, {\n                    message: '\"value\" must be [5]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '6', valids: ['5'], label: 'value' }\n                }],\n                ['5', true]\n            ]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles boolean literal","suites":["cast","schema()"],"updatePoint":{"line":71,"column":36},"line":71,"code":"        it('compiles boolean literal', () => {\n\n            Helper.validate(Joi.compile(true), [\n                [false, false, {\n                    message: '\"value\" must be [true]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: false, valids: [true], label: 'value' }\n                }],\n                [true, true]\n            ]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles date literal","suites":["cast","schema()"],"updatePoint":{"line":84,"column":33},"line":84,"code":"        it('compiles date literal', () => {\n\n            const now = Date.now();\n            const dnow = new Date(now);\n            Helper.validate(Joi.compile(dnow), [\n                [new Date(now), true],\n                [now, true, new Date(now)],\n                [now * 2, false, {\n                    message: `\"value\" must be [${dnow.toISOString()}]`,\n                    path: [],\n                    type: 'any.only',\n                    context: { value: new Date(now * 2), valids: [dnow], label: 'value' }\n                }]\n            ]);\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [null]","suites":["cast","schema()"],"updatePoint":{"line":100,"column":26},"line":100,"code":"        it('compile [null]', () => {\n\n            const schema = Joi.compile([null]);\n            Helper.equal(schema, Joi.valid(Joi.override, null));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [1]","suites":["cast","schema()"],"updatePoint":{"line":106,"column":23},"line":106,"code":"        it('compile [1]', () => {\n\n            const schema = Joi.compile([1]);\n            Helper.equal(schema, Joi.valid(Joi.override, 1));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [\"a\"]","suites":["cast","schema()"],"updatePoint":{"line":112,"column":25},"line":112,"code":"        it('compile [\"a\"]', () => {\n\n            const schema = Joi.compile(['a']);\n            Helper.equal(schema, Joi.valid(Joi.override, 'a'));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [null, null, null]","suites":["cast","schema()"],"updatePoint":{"line":118,"column":38},"line":118,"code":"        it('compile [null, null, null]', () => {\n\n            const schema = Joi.compile([null]);\n            Helper.equal(schema, Joi.valid(Joi.override, null));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [1, 2, 3]","suites":["cast","schema()"],"updatePoint":{"line":124,"column":29},"line":124,"code":"        it('compile [1, 2, 3]', () => {\n\n            const schema = Joi.compile([1, 2, 3]);\n            Helper.equal(schema, Joi.valid(Joi.override, 1, 2, 3));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [\"a\", \"b\", \"c\"]","suites":["cast","schema()"],"updatePoint":{"line":130,"column":35},"line":130,"code":"        it('compile [\"a\", \"b\", \"c\"]', () => {\n\n            const schema = Joi.compile(['a', 'b', 'c']);\n            Helper.equal(schema, Joi.valid(Joi.override, 'a', 'b', 'c'));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compile [null, \"a\", 1, true]","suites":["cast","schema()"],"updatePoint":{"line":136,"column":40},"line":136,"code":"        it('compile [null, \"a\", 1, true]', () => {\n\n            const schema = Joi.compile([null, 'a', 1, true]);\n            Helper.equal(schema, Joi.valid(Joi.override, null, 'a', 1, true));\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with plain keys","suites":["cast","compile()"],"updatePoint":{"line":145,"column":43},"line":145,"code":"        it('compiles object with plain keys', () => {\n\n            const schema = {\n                a: 1\n            };\n\n            expect(Joi.isSchema(schema)).to.be.false();\n\n            const compiled = Joi.compile(schema);\n            expect(Joi.isSchema(compiled)).to.be.true();\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with schema keys","suites":["cast","compile()"],"updatePoint":{"line":157,"column":44},"line":157,"code":"        it('compiles object with schema keys', () => {\n\n            const schema = {\n                a: Joi.number()\n            };\n\n            expect(Joi.isSchema(schema)).to.be.false();\n\n            const compiled = Joi.compile(schema);\n            expect(Joi.isSchema(compiled)).to.be.true();\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"errors on legacy schema","suites":["cast","compile()"],"updatePoint":{"line":169,"column":35},"line":169,"code":"        it('errors on legacy schema', () => {\n\n            const schema = Legacy.number();\n            expect(() => Joi.compile(schema)).to.throw(`Cannot mix different versions of joi schemas: ${require('@hapi/joi-legacy-test/package.json').version} ${require('../package.json').version}`);\n            expect(() => Joi.compile(schema, { legacy: true })).to.not.throw();\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"errors on legacy keys","suites":["cast","compile()"],"updatePoint":{"line":176,"column":33},"line":176,"code":"        it('errors on legacy keys', () => {\n\n            const schema = {\n                a: Legacy.number()\n            };\n\n            expect(() => Joi.compile(schema)).to.throw('Cannot mix different versions of joi schemas (a)');\n        });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with plain keys","suites":["cast","compile()","legacy"],"updatePoint":{"line":187,"column":47},"line":187,"code":"            it('compiles object with plain keys', () => {\n\n                const schema = {\n                    a: 1,\n                    b: [2, 3]\n                };\n\n                expect(Joi.isSchema(schema)).to.be.false();\n\n                const compiled = Joi.compile(schema, { legacy: true });\n                expect(Joi.isSchema(compiled)).to.be.true();\n            });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with schema keys (v16)","suites":["cast","compile()","legacy"],"updatePoint":{"line":200,"column":54},"line":200,"code":"            it('compiles object with schema keys (v16)', () => {\n\n                const schema = {\n                    a: Joi.number()\n                };\n\n                expect(Joi.isSchema(schema)).to.be.false();\n\n                const compiled = Joi.compile(schema, { legacy: true });\n                expect(Joi.isSchema(compiled)).to.be.true();\n            });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with schema array items (v16)","suites":["cast","compile()","legacy"],"updatePoint":{"line":212,"column":61},"line":212,"code":"            it('compiles object with schema array items (v16)', () => {\n\n                const schema = {\n                    a: [Joi.number()]\n                };\n\n                expect(Joi.isSchema(schema)).to.be.false();\n\n                const compiled = Joi.compile(schema, { legacy: true });\n                expect(Joi.isSchema(compiled)).to.be.true();\n            });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with schema keys (v15)","suites":["cast","compile()","legacy"],"updatePoint":{"line":224,"column":54},"line":224,"code":"            it('compiles object with schema keys (v15)', () => {\n\n                const schema = {\n                    a: Legacy.number()\n                };\n\n                expect(Joi.isSchema(schema)).to.be.false();\n\n                const compiled = Joi.compile(schema, { legacy: true });\n                expect(Joi.isSchema(compiled, { legacy: true })).to.be.true();\n                expect(() => Joi.isSchema(compiled)).to.throw('Cannot mix different versions of joi schemas');\n            });","file":"compile.js","skipped":false,"dir":"test"},{"name":"compiles object with schema keys (v15)","suites":["cast","compile()","legacy"],"updatePoint":{"line":237,"column":54},"line":237,"code":"            it('compiles object with schema keys (v15)', () => {\n\n                const schema = {\n                    a: [Legacy.number()]\n                };\n\n                expect(Joi.isSchema(schema)).to.be.false();\n\n                const compiled = Joi.compile(schema, { legacy: true });\n                expect(Joi.isSchema(compiled, { legacy: true })).to.be.true();\n                expect(() => Joi.isSchema(compiled)).to.throw('Cannot mix different versions of joi schemas');\n            });","file":"compile.js","skipped":false,"dir":"test"},{"name":"has an isJoi property","suites":["errors"],"updatePoint":{"line":19,"column":29},"line":19,"code":"    it('has an isJoi property', () => {\n\n        const err = Joi.valid('foo').validate('bar').error;\n        expect(err).to.be.an.error();\n        expect(err.isJoi).to.be.true();\n        expect(Joi.isError(err)).to.be.true();\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"has no stack by default","suites":["errors"],"updatePoint":{"line":28,"column":31},"line":28,"code":"    it('has no stack by default', () => {\n\n        const err = Joi.valid('foo').validate('bar').error;\n        expect(err).to.be.an.error();\n        expect(err.isJoi).to.be.true();\n        expect(err.stack).to.not.contain('\\n');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"has a stack when enabled","suites":["errors"],"updatePoint":{"line":36,"column":32},"line":36,"code":"    it('has a stack when enabled', () => {\n\n        const err = Joi.valid('foo').validate('bar', { errors: { stack: true } }).error;\n        expect(err).to.be.an.error();\n        expect(err.isJoi).to.be.true();\n        expect(err.stack).to.contain('at Object.exports.process');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports custom errors when validating types","suites":["errors"],"updatePoint":{"line":44,"column":52},"line":44,"code":"    it('supports custom errors when validating types', () => {\n\n        const schema = Joi.object({\n            email: Joi.string().email(),\n            date: Joi.date(),\n            alphanum: Joi.string().alphanum(),\n            min: Joi.string().min(3),\n            max: Joi.string().max(3),\n            required: Joi.string().required(),\n            xor: Joi.string(),\n            renamed: Joi.string().valid('456'),\n            notEmpty: Joi.string().required()\n        })\n            .rename('renamed', 'required')\n            .without('required', 'xor')\n            .without('xor', 'required');\n\n        const value = {\n            email: 'invalid-email',\n            date: 'invalid-date',\n            alphanum: '\\b\\n\\f\\r\\t',\n            min: 'ab',\n            max: 'abcd',\n            required: 'hello',\n            xor: '123',\n            renamed: '456',\n            notEmpty: ''\n        };\n\n        const messages = {\n            'string.empty': '{#label} 3',\n            'date.base': '{#label} 18',\n            'string.base': '{#label} 13',\n            'string.min': '{#label} 14',\n            'string.max': '{#label} 15',\n            'string.alphanum': '{#label} 16',\n            'string.email': '{#label} 19',\n            'object.without': '{#label} 7',\n            'object.rename.override': '{#label} 11'\n        };\n\n        const error = schema.validate(value, { abortEarly: false, messages }).error;\n\n        value.required = value.renamed;\n        delete value.renamed;\n\n        expect(error).to.be.an.error('\"value\" 11. \"email\" 19. \"date\" 18. \"alphanum\" 16. \"min\" 14. \"max\" 15. \"notEmpty\" 3. \"value\" 7');\n        expect(error.name).to.equal('ValidationError');\n        expect(error.details).to.equal([\n            {\n                message: '\"value\" 11',\n                path: [],\n                type: 'object.rename.override',\n                context: { from: 'renamed', to: 'required', label: 'value', pattern: false, value }\n            },\n            {\n                message: '\"email\" 19',\n                path: ['email'],\n                type: 'string.email',\n                context: { value: 'invalid-email', invalids: ['invalid-email'], label: 'email', key: 'email' }\n            },\n            {\n                message: '\"date\" 18',\n                path: ['date'],\n                type: 'date.base',\n                context: { label: 'date', key: 'date', value: 'invalid-date' }\n            },\n            {\n                message: '\"alphanum\" 16',\n                path: ['alphanum'],\n                type: 'string.alphanum',\n                context: { value: '\\b\\n\\f\\r\\t', label: 'alphanum', key: 'alphanum' }\n            },\n            {\n                message: '\"min\" 14',\n                path: ['min'],\n                type: 'string.min',\n                context: {\n                    limit: 3,\n                    value: 'ab',\n                    encoding: undefined,\n                    label: 'min',\n                    key: 'min'\n                }\n            },\n            {\n                message: '\"max\" 15',\n                path: ['max'],\n                type: 'string.max',\n                context: {\n                    limit: 3,\n                    value: 'abcd',\n                    encoding: undefined,\n                    label: 'max',\n                    key: 'max'\n                }\n            },\n            {\n                message: '\"notEmpty\" 3',\n                path: ['notEmpty'],\n                type: 'string.empty',\n                context: { value: '', label: 'notEmpty', key: 'notEmpty' }\n            },\n            {\n                message: '\"value\" 7',\n                path: [],\n                type: 'object.without',\n                context: {\n                    main: 'required',\n                    mainWithLabel: 'required',\n                    peer: 'xor',\n                    peerWithLabel: 'xor',\n                    label: 'value',\n                    value\n                }\n            },\n            {\n                message: '\"value\" 7',\n                path: [],\n                type: 'object.without',\n                context: {\n                    main: 'xor',\n                    mainWithLabel: 'xor',\n                    peer: 'required',\n                    peerWithLabel: 'required',\n                    label: 'value',\n                    value\n                }\n            }\n        ]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports language preference","suites":["errors"],"updatePoint":{"line":176,"column":36},"line":176,"code":"    it('supports language preference', () => {\n\n        const schema = Joi.number().min(10);\n\n        const messages = {\n            english: {\n                root: 'value',\n                'number.min': '{#label} too small'\n            },\n            latin: {\n                root: 'valorem',\n                'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n            },\n            empty: {}\n        };\n\n        expect(schema.validate(1, { messages, errors: { language: 'english' } }).error).to.be.an.error('\"value\" too small');\n        expect(schema.validate(1, { messages, errors: { language: 'latin' } }).error).to.be.an.error('\"valorem\" angustus');\n        expect(schema.validate(1, { messages, errors: { language: 'unknown' } }).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n        expect(schema.validate(1, { messages, errors: { language: 'empty' } }).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports language preference (fallthrough)","suites":["errors"],"updatePoint":{"line":198,"column":50},"line":198,"code":"    it('supports language preference (fallthrough)', () => {\n\n        const messages = {\n            english: {\n                root: 'value',\n                'number.min': '{#label} too small'\n            },\n            root: 'valorem',\n            'number.min': '{#label} angustus'\n        };\n\n        const schema = Joi.number().min(10).prefs({ messages });\n\n        expect(schema.validate(1, { errors: { language: 'english' } }).error).to.be.an.error('\"value\" too small');\n        expect(schema.validate(1, { errors: { language: 'latin' } }).error).to.be.an.error('\"valorem\" angustus');\n\n        expect(schema.describe().preferences.messages).to.equal(messages);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports language preference combination","suites":["errors"],"updatePoint":{"line":217,"column":48},"line":217,"code":"    it('supports language preference combination', () => {\n\n        const code = {\n            english: {\n                'number.min': '{#label} too small'\n            },\n            latin: {\n                'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n            },\n            empty: {}\n        };\n\n        const root = {\n            english: {\n                root: 'value'\n            },\n            latin: {\n                root: 'valorem'\n            }\n        };\n\n        const schema = Joi.number().min(10).prefs({ messages: code }).prefs({ messages: root });\n\n        expect(schema.validate(1, { errors: { language: 'english' } }).error).to.be.an.error('\"value\" too small');\n        expect(schema.validate(1, { errors: { language: 'latin' } }).error).to.be.an.error('\"valorem\" angustus');\n        expect(schema.validate(1, { errors: { language: 'unknown' } }).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n        expect(schema.validate(1, { errors: { language: 'empty' } }).error).to.be.an.error('\"value\" must be greater than or equal to 10');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports language ref preference","suites":["errors"],"updatePoint":{"line":246,"column":40},"line":246,"code":"    it('supports language ref preference', () => {\n\n        const messages = {\n            english: {\n                'number.min': '{#label} too small'\n            },\n            latin: {\n                'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n            },\n            empty: {}\n        };\n\n        const schema = Joi.object({\n            a: Joi.number().min(10),\n            lang: Joi.string().required()\n        })\n            .prefs({\n                messages,\n                errors: {\n                    language: Joi.ref('/lang'),\n                    wrap: {\n                        label: false\n                    }\n                }\n            });\n\n        expect(schema.validate({ a: 1, lang: 'english' }).error).to.be.an.error('a too small');\n        expect(schema.validate({ a: 1, lang: 'latin' }).error).to.be.an.error('a angustus');\n        expect(schema.validate({ a: 1, lang: 'unknown' }).error).to.be.an.error('a must be greater than or equal to 10');\n        expect(schema.validate({ a: 1, lang: 'empty' }).error).to.be.an.error('a must be greater than or equal to 10');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports custom wrap characters","suites":["errors"],"updatePoint":{"line":278,"column":39},"line":278,"code":"    it('supports custom wrap characters', () => {\n\n        const messages = {\n            english: {\n                'number.min': '{#label} too small'\n            },\n            latin: {\n                'number.min': Joi.x('{@label} angustus', { prefix: { local: '@' } })\n            },\n            empty: {}\n        };\n\n        const schema = Joi.object({\n            a: Joi.number().min(10),\n            lang: Joi.string().required(),\n            select: ['x']\n        })\n            .prefs({\n                messages,\n                errors: {\n                    language: Joi.ref('/lang'),\n                    wrap: {\n                        label: '{}',\n                        string: '`\\''\n                    }\n                }\n            });\n\n        expect(schema.validate({ a: 1, lang: 'english' }).error).to.be.an.error('{a} too small');\n        expect(schema.validate({ a: 1, lang: 'latin' }).error).to.be.an.error('{a} angustus');\n        expect(schema.validate({ a: 1, lang: 'unknown' }).error).to.be.an.error('{a} must be greater than or equal to 10');\n        expect(schema.validate({ a: 1, lang: 'empty' }).error).to.be.an.error('{a} must be greater than or equal to 10');\n        expect(schema.validate({ select: 'y', a: 20, lang: 'empty' }).error).to.be.an.error('{select} must be [`x\\']');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"supports render preference","suites":["errors"],"updatePoint":{"line":313,"column":34},"line":313,"code":"    it('supports render preference', () => {\n\n        expect(Joi.number().min(10).validate(1, { errors: { render: false } }).error).to.be.an.error('number.min');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"does not prefix with key when messages uses context.key","suites":["errors"],"updatePoint":{"line":318,"column":63},"line":318,"code":"    it('does not prefix with key when messages uses context.key', () => {\n\n        const schema = Joi.valid('sad').prefs({ messages: { 'any.only': 'my hero {{#label}} is not {{#valids}}' } });\n        const err = schema.validate(5).error;\n        expect(err).to.be.an.error('my hero \"value\" is not [sad]');\n        expect(err.details).to.equal([{\n            message: 'my hero \"value\" is not [sad]',\n            path: [],\n            type: 'any.only',\n            context: { value: 5, valids: ['sad'], label: 'value' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"escapes unsafe keys","suites":["errors"],"updatePoint":{"line":331,"column":27},"line":331,"code":"    it('escapes unsafe keys', () => {\n\n        const schema = Joi.object({\n            'a()': Joi.number()\n        });\n\n        const err = schema.validate({ 'a()': 'x' }, { errors: { escapeHtml: true } }).error;\n        expect(err).to.be.an.error('\"a&#x28;&#x29;\" must be a number');\n        expect(err.details).to.equal([{\n            message: '\"a&#x28;&#x29;\" must be a number',\n            path: ['a()'],\n            type: 'number.base',\n            context: { label: 'a()', key: 'a()', value: 'x' }\n        }]);\n\n        const err2 = schema.validate({ 'b()': 'x' }, { errors: { escapeHtml: true } }).error;\n        expect(err2).to.be.an.error('\"b&#x28;&#x29;\" is not allowed');\n        expect(err2.details).to.equal([{\n            message: '\"b&#x28;&#x29;\" is not allowed',\n            path: ['b()'],\n            type: 'object.unknown',\n            context: { child: 'b()', label: 'b()', key: 'b()', value: 'x' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"does not escape unsafe keys by default","suites":["errors"],"updatePoint":{"line":356,"column":46},"line":356,"code":"    it('does not escape unsafe keys by default', () => {\n\n        const schema = Joi.object({\n            'a()': Joi.number()\n        });\n\n        const err = schema.validate({ 'a()': 'x' }).error;\n        expect(err).to.be.an.error('\"a()\" must be a number');\n        expect(err.details).to.equal([{\n            message: '\"a()\" must be a number',\n            path: ['a()'],\n            type: 'number.base',\n            context: { label: 'a()', key: 'a()', value: 'x' }\n        }]);\n\n        const err2 = schema.validate({ 'b()': 'x' }).error;\n        expect(err2).to.be.an.error('\"b()\" is not allowed');\n        expect(err2.details).to.equal([{\n            message: '\"b()\" is not allowed',\n            path: ['b()'],\n            type: 'object.unknown',\n            context: { child: 'b()', label: 'b()', key: 'b()', value: 'x' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"returns error type in validation error","suites":["errors"],"updatePoint":{"line":381,"column":46},"line":381,"code":"    it('returns error type in validation error', () => {\n\n        const input = {\n            notNumber: '',\n            notString: true,\n            notBoolean: 9\n        };\n\n        const schema = Joi.object({\n            notNumber: Joi.number().required(),\n            notString: Joi.string().required(),\n            notBoolean: Joi.boolean().required()\n        });\n\n        const err = schema.validate(input, { abortEarly: false }).error;\n        expect(err).to.be.an.error('\"notNumber\" must be a number. \"notString\" must be a string. \"notBoolean\" must be a boolean');\n        expect(err.details).to.equal([\n            {\n                message: '\"notNumber\" must be a number',\n                path: ['notNumber'],\n                type: 'number.base',\n                context: { label: 'notNumber', key: 'notNumber', value: '' }\n            },\n            {\n                message: '\"notString\" must be a string',\n                path: ['notString'],\n                type: 'string.base',\n                context: { value: true, label: 'notString', key: 'notString' }\n            },\n            {\n                message: '\"notBoolean\" must be a boolean',\n                path: ['notBoolean'],\n                type: 'boolean.base',\n                context: { label: 'notBoolean', key: 'notBoolean', value: 9 }\n            }\n        ]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"returns a full path to an error value on an array (items)","suites":["errors"],"updatePoint":{"line":419,"column":65},"line":419,"code":"    it('returns a full path to an error value on an array (items)', () => {\n\n        const schema = Joi.array().items(Joi.array().items({ x: Joi.number() }));\n        const input = [\n            [{ x: 1 }],\n            [{ x: 1 }, { x: 'a' }]\n        ];\n\n        const err = schema.validate(input).error;\n        expect(err).to.be.an.error('\"[1][1].x\" must be a number');\n        expect(err.details).to.equal([{\n            message: '\"[1][1].x\" must be a number',\n            path: [1, 1, 'x'],\n            type: 'number.base',\n            context: { label: '[1][1].x', key: 'x', value: 'a' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"returns a full path to an error value on an array (items forbidden)","suites":["errors"],"updatePoint":{"line":437,"column":75},"line":437,"code":"    it('returns a full path to an error value on an array (items forbidden)', () => {\n\n        const schema = Joi.array().items(Joi.array().items(Joi.object({ x: Joi.string() }).forbidden()));\n        const input = [\n            [{ x: 1 }],\n            [{ x: 1 }, { x: 'a' }]\n        ];\n\n        const err = schema.validate(input).error;\n        expect(err).to.be.an.error('\"[1][1]\" contains an excluded value');\n        expect(err.details).to.equal([{\n            message: '\"[1][1]\" contains an excluded value',\n            path: [1, 1],\n            type: 'array.excludes',\n            context: { pos: 1, value: { x: 'a' }, label: '[1][1]', key: 1 }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"returns a full path to an error value on an object","suites":["errors"],"updatePoint":{"line":455,"column":58},"line":455,"code":"    it('returns a full path to an error value on an object', () => {\n\n        const schema = Joi.object({\n            x: Joi.array().items({ x: Joi.number() })\n        });\n\n        const input = {\n            x: [{ x: 1 }, { x: 'a' }]\n        };\n\n        const err = schema.validate(input).error;\n        expect(err).to.be.an.error('\"x[1].x\" must be a number');\n        expect(err.details).to.equal([{\n            message: '\"x[1].x\" must be a number',\n            path: ['x', 1, 'x'],\n            type: 'number.base',\n            context: { label: 'x[1].x', key: 'x', value: 'a' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"overrides root key messages","suites":["errors"],"updatePoint":{"line":475,"column":35},"line":475,"code":"    it('overrides root key messages', () => {\n\n        const schema = Joi.string().prefs({ messages: { root: 'blah' } });\n        const err = schema.validate(4).error;\n        expect(err).to.be.an.error('\"blah\" must be a string');\n        expect(err.details).to.equal([{\n            message: '\"blah\" must be a string',\n            path: [],\n            type: 'string.base',\n            context: { value: 4, label: 'blah' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"disables wrap.array","suites":["errors"],"updatePoint":{"line":488,"column":27},"line":488,"code":"    it('disables wrap.array', () => {\n\n        const schema = Joi.alternatives(Joi.number(), Joi.string()).prefs({ errors: { wrap: { array: false } } });\n\n        Helper.validate(schema, [\n            [1, true],\n            ['x', true],\n            [true, false, '\"value\" must be one of number, string']\n        ]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"overrides wrap.array","suites":["errors"],"updatePoint":{"line":499,"column":28},"line":499,"code":"    it('overrides wrap.array', () => {\n\n        const schema = Joi.alternatives(Joi.number(), Joi.string()).prefs({ errors: { wrap: { array: '{}' } } });\n\n        Helper.validate(schema, [\n            [1, true],\n            ['x', true],\n            [true, false, '\"value\" must be one of {number, string}']\n        ]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"allows html escaping","suites":["errors"],"updatePoint":{"line":510,"column":28},"line":510,"code":"    it('allows html escaping', () => {\n\n        const schema = Joi.string().prefs({ messages: { root: 'blah' } }).label('bleh');\n        const err = schema.validate(4).error;\n        expect(err).to.be.an.error('\"bleh\" must be a string');\n        expect(err.details).to.equal([{\n            message: '\"bleh\" must be a string',\n            path: [],\n            type: 'string.base',\n            context: { value: 4, label: 'bleh' }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"provides context with the error","suites":["errors"],"updatePoint":{"line":523,"column":39},"line":523,"code":"    it('provides context with the error', () => {\n\n        const schema = Joi.object({ length: Joi.number().min(3).required() });\n        const err = schema.validate({ length: 1 }).error;\n        expect(err.details).to.equal([{\n            message: '\"length\" must be greater than or equal to 3',\n            path: ['length'],\n            type: 'number.min',\n            context: {\n                limit: 3,\n                key: 'length',\n                label: 'length',\n                value: 1\n            }\n        }]);\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"has a name that is ValidationError","suites":["errors"],"updatePoint":{"line":540,"column":42},"line":540,"code":"    it('has a name that is ValidationError', () => {\n\n        const schema = Joi.number();\n        const validateErr = schema.validate('a').error;\n        expect(validateErr.name).to.be.equal('ValidationError');\n\n        try {\n            Joi.assert('a', schema);\n            throw new Error('should not reach that');\n        }\n        catch (assertErr) {\n            expect(assertErr.name).to.be.equal('ValidationError');\n        }\n\n        try {\n            Joi.assert('a', schema, 'foo');\n            throw new Error('should not reach that');\n        }\n        catch (assertErr) {\n            expect(assertErr.name).to.be.equal('ValidationError');\n        }\n\n        try {\n            Joi.assert('a', schema, new Error('foo'));\n            throw new Error('should not reach that');\n        }\n        catch (assertErr) {\n            expect(assertErr.name).to.equal('Error');\n        }\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"changes label value","suites":["errors"],"updatePoint":{"line":571,"column":27},"line":571,"code":"    it('changes label value', () => {\n\n        const schema = Joi.object({\n            x: Joi.object({\n                y: Joi.object({\n                    z: Joi.valid('z'),\n                    a: Joi.array().items(Joi.string())\n                })\n            })\n        });\n\n        expect(schema.validate({ x: { y: { z: 'o' } } }).error).to.be.an.error('\"x.y.z\" must be [z]');\n        expect(schema.validate({ x: { y: { z: 'o' } } }, { errors: { label: false } }).error).to.be.an.error('must be [z]');\n        expect(schema.validate({ x: { y: { z: 'o' } } }, { errors: { label: 'key' } }).error).to.be.an.error('\"z\" must be [z]');\n        expect(schema.validate(1, { errors: { label: 'key' } }).error).to.be.an.error('\"value\" must be of type object');\n        expect(schema.validate({ x: { y: { a: [1] } } }, { errors: { label: 'key' } }).error).to.be.an.error('\"[0]\" must be a string');\n    });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error","suites":["errors","annotate()"],"updatePoint":{"line":591,"column":27},"line":591,"code":"        it('annotates error', () => {\n\n            const object = {\n                a: 'm',\n                y: {\n                    b: {\n                        c: 10\n                    }\n                }\n            };\n\n            const schema = Joi.object({\n                a: Joi.string().valid('a', 'b', 'c', 'd'),\n                y: Joi.object({\n                    u: Joi.string().valid('e', 'f', 'g', 'h').required(),\n                    b: Joi.string().valid('i', 'j').allow(false),\n                    d: Joi.object({\n                        x: Joi.string().valid('k', 'l').required(),\n                        c: Joi.number()\n                    })\n                })\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a\" must be one of [a, b, c, d]. \"y.u\" is required. \"y.b\" must be one of [i, j, false]. \"y.b\" must be a string');\n            expect(err.details).to.equal([\n                {\n                    message: '\"a\" must be one of [a, b, c, d]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 'm', valids: ['a', 'b', 'c', 'd'], label: 'a', key: 'a' }\n                },\n                {\n                    message: '\"y.u\" is required',\n                    path: ['y', 'u'],\n                    type: 'any.required',\n                    context: { label: 'y.u', key: 'u' }\n                },\n                {\n                    message: '\"y.b\" must be one of [i, j, false]',\n                    path: ['y', 'b'],\n                    type: 'any.only',\n                    context: { value: { c: 10 }, label: 'y.b', key: 'b', valids: ['i', 'j', false] }\n                },\n                {\n                    message: '\"y.b\" must be a string',\n                    path: ['y', 'b'],\n                    type: 'string.base',\n                    context: { value: { c: 10 }, label: 'y.b', key: 'b' }\n                }\n            ]);\n\n            expect(err.annotate()).to.equal('{\\n  \"y\": {\\n    \"b\" \\u001b[31m[3, 4]\\u001b[0m: {\\n      \"c\": 10\\n    },\\n    \\u001b[41m\"u\"\\u001b[0m\\u001b[31m [2]: -- missing --\\u001b[0m\\n  },\\n  \"a\" \\u001b[31m[1]\\u001b[0m: \"m\"\\n}\\n\\u001b[31m\\n[1] \"a\" must be one of [a, b, c, d]\\n[2] \"y.u\" is required\\n[3] \"y.b\" must be one of [i, j, false]\\n[4] \"y.b\" must be a string\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error without colors if requested","suites":["errors","annotate()"],"updatePoint":{"line":646,"column":55},"line":646,"code":"        it('annotates error without colors if requested', () => {\n\n            const object = {\n                a: 'm'\n            };\n\n            const schema = Joi.object({\n                a: Joi.string().valid('a', 'b', 'c', 'd')\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a\" must be one of [a, b, c, d]');\n            expect(err.details).to.equal([{\n                message: '\"a\" must be one of [a, b, c, d]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 'm', valids: ['a', 'b', 'c', 'd'], label: 'a', key: 'a' }\n            }]);\n            expect(err.annotate(true)).to.equal('{\\n  \"a\" [1]: \"m\"\\n}\\n\\n[1] \"a\" must be one of [a, b, c, d]');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error within array","suites":["errors","annotate()"],"updatePoint":{"line":667,"column":40},"line":667,"code":"        it('annotates error within array', () => {\n\n            const object = {\n                a: [1, 2, 3, 4, 2, 5]\n            };\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.valid(1, 2))\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a[2]\" must be one of [1, 2]. \"a[3]\" must be one of [1, 2]. \"a[5]\" must be one of [1, 2]');\n            expect(err.details).to.equal([\n                {\n                    message: '\"a[2]\" must be one of [1, 2]',\n                    path: ['a', 2],\n                    type: 'any.only',\n                    context: { value: 3, valids: [1, 2], label: 'a[2]', key: 2 }\n                },\n                {\n                    message: '\"a[3]\" must be one of [1, 2]',\n                    path: ['a', 3],\n                    type: 'any.only',\n                    context: { value: 4, valids: [1, 2], label: 'a[3]', key: 3 }\n                },\n                {\n                    message: '\"a[5]\" must be one of [1, 2]',\n                    path: ['a', 5],\n                    type: 'any.only',\n                    context: { value: 5, valids: [1, 2], label: 'a[5]', key: 5 }\n                }\n            ]);\n            expect(err.annotate()).to.equal('{\\n  \"a\": [\\n    1,\\n    2,\\n    3, \\u001b[31m[1]\\u001b[0m\\n    4, \\u001b[31m[2]\\u001b[0m\\n    2,\\n    5 \\u001b[31m[3]\\u001b[0m\\n  ]\\n}\\n\\u001b[31m\\n[1] \"a[2]\" must be one of [1, 2]\\n[2] \"a[3]\" must be one of [1, 2]\\n[3] \"a[5]\" must be one of [1, 2]\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error within array multiple times on the same element","suites":["errors","annotate()"],"updatePoint":{"line":702,"column":75},"line":702,"code":"        it('annotates error within array multiple times on the same element', () => {\n\n            const object = {\n                a: [2, 3, 4]\n            };\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.number().min(4).max(2))\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a[0]\" must be greater than or equal to 4. \"a[1]\" must be greater than or equal to 4. \"a[1]\" must be less than or equal to 2. \"a[2]\" must be less than or equal to 2');\n            expect(err.details).to.equal([\n                {\n                    message: '\"a[0]\" must be greater than or equal to 4',\n                    path: ['a', 0],\n                    type: 'number.min',\n                    context: { limit: 4, value: 2, label: 'a[0]', key: 0 }\n                },\n                {\n                    message: '\"a[1]\" must be greater than or equal to 4',\n                    path: ['a', 1],\n                    type: 'number.min',\n                    context: { limit: 4, value: 3, label: 'a[1]', key: 1 }\n                },\n                {\n                    message: '\"a[1]\" must be less than or equal to 2',\n                    path: ['a', 1],\n                    type: 'number.max',\n                    context: { limit: 2, value: 3, label: 'a[1]', key: 1 }\n                },\n                {\n                    message: '\"a[2]\" must be less than or equal to 2',\n                    path: ['a', 2],\n                    type: 'number.max',\n                    context: { limit: 2, value: 4, label: 'a[2]', key: 2 }\n                }\n            ]);\n\n            expect(err.annotate()).to.equal('{\\n  \"a\": [\\n    2, \\u001b[31m[1]\\u001b[0m\\n    3, \\u001b[31m[2, 3]\\u001b[0m\\n    4 \\u001b[31m[4]\\u001b[0m\\n  ]\\n}\\n\\u001b[31m\\n[1] \"a[0]\" must be greater than or equal to 4\\n[2] \"a[1]\" must be greater than or equal to 4\\n[3] \"a[1]\" must be less than or equal to 2\\n[4] \"a[2]\" must be less than or equal to 2\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error within array when it is an object","suites":["errors","annotate()"],"updatePoint":{"line":744,"column":61},"line":744,"code":"        it('annotates error within array when it is an object', () => {\n\n            const object = {\n                a: [{ b: 2 }]\n            };\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.number())\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a[0]\" must be a number');\n            expect(err.details).to.equal([{\n                message: '\"a[0]\" must be a number',\n                path: ['a', 0],\n                type: 'number.base',\n                context: { label: 'a[0]', key: 0, value: { b: 2 } }\n            }]);\n            expect(err.annotate()).to.equal('{\\n  \"a\": [\\n    { \\u001b[31m[1]\\u001b[0m\\n      \"b\": 2\\n    }\\n  ]\\n}\\n\\u001b[31m\\n[1] \"a[0]\" must be a number\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates error within multiple arrays and multiple times on the same element","suites":["errors","annotate()"],"updatePoint":{"line":765,"column":89},"line":765,"code":"        it('annotates error within multiple arrays and multiple times on the same element', () => {\n\n            const object = {\n                a: [2, 3, 4],\n                b: [2, 3, 4]\n            };\n\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.number().min(4).max(2)),\n                b: Joi.array().items(Joi.number().min(4).max(2))\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"a[0]\" must be greater than or equal to 4. \"a[1]\" must be greater than or equal to 4. \"a[1]\" must be less than or equal to 2. \"a[2]\" must be less than or equal to 2. \"b[0]\" must be greater than or equal to 4. \"b[1]\" must be greater than or equal to 4. \"b[1]\" must be less than or equal to 2. \"b[2]\" must be less than or equal to 2');\n            expect(err.details).to.equal([\n                {\n                    message: '\"a[0]\" must be greater than or equal to 4',\n                    path: ['a', 0],\n                    type: 'number.min',\n                    context: { limit: 4, value: 2, label: 'a[0]', key: 0 }\n                },\n                {\n                    message: '\"a[1]\" must be greater than or equal to 4',\n                    path: ['a', 1],\n                    type: 'number.min',\n                    context: { limit: 4, value: 3, label: 'a[1]', key: 1 }\n                },\n                {\n                    message: '\"a[1]\" must be less than or equal to 2',\n                    path: ['a', 1],\n                    type: 'number.max',\n                    context: { limit: 2, value: 3, label: 'a[1]', key: 1 }\n                },\n                {\n                    message: '\"a[2]\" must be less than or equal to 2',\n                    path: ['a', 2],\n                    type: 'number.max',\n                    context: { limit: 2, value: 4, label: 'a[2]', key: 2 }\n                },\n                {\n                    message: '\"b[0]\" must be greater than or equal to 4',\n                    path: ['b', 0],\n                    type: 'number.min',\n                    context: { limit: 4, value: 2, label: 'b[0]', key: 0 }\n                },\n                {\n                    message: '\"b[1]\" must be greater than or equal to 4',\n                    path: ['b', 1],\n                    type: 'number.min',\n                    context: { limit: 4, value: 3, label: 'b[1]', key: 1 }\n                },\n                {\n                    message: '\"b[1]\" must be less than or equal to 2',\n                    path: ['b', 1],\n                    type: 'number.max',\n                    context: { limit: 2, value: 3, label: 'b[1]', key: 1 }\n                },\n                {\n                    message: '\"b[2]\" must be less than or equal to 2',\n                    path: ['b', 2],\n                    type: 'number.max',\n                    context: { limit: 2, value: 4, label: 'b[2]', key: 2 }\n                }\n            ]);\n            expect(err.annotate()).to.equal('{\\n  \"a\": [\\n    2, \\u001b[31m[1]\\u001b[0m\\n    3, \\u001b[31m[2, 3]\\u001b[0m\\n    4 \\u001b[31m[4]\\u001b[0m\\n  ],\\n  \"b\": [\\n    2, \\u001b[31m[5]\\u001b[0m\\n    3, \\u001b[31m[6, 7]\\u001b[0m\\n    4 \\u001b[31m[8]\\u001b[0m\\n  ]\\n}\\n\\u001b[31m\\n[1] \"a[0]\" must be greater than or equal to 4\\n[2] \"a[1]\" must be greater than or equal to 4\\n[3] \"a[1]\" must be less than or equal to 2\\n[4] \"a[2]\" must be less than or equal to 2\\n[5] \"b[0]\" must be greater than or equal to 4\\n[6] \"b[1]\" must be greater than or equal to 4\\n[7] \"b[1]\" must be less than or equal to 2\\n[8] \"b[2]\" must be less than or equal to 2\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"displays alternatives fail as a single line","suites":["errors","annotate()"],"updatePoint":{"line":832,"column":55},"line":832,"code":"        it('displays alternatives fail as a single line', () => {\n\n            const schema = Joi.object({\n                x: [\n                    Joi.string(),\n                    Joi.number(),\n                    Joi.date()\n                ]\n            });\n\n            const err = schema.validate({ x: true }).error;\n            expect(err).to.be.an.error('\"x\" must be one of [string, number, date]');\n            expect(err.details).to.equal([\n                {\n                    message: '\"x\" must be one of [string, number, date]',\n                    path: ['x'],\n                    type: 'alternatives.types',\n                    context: { types: ['string', 'number', 'date'], label: 'x', key: 'x', value: true }\n                }\n            ]);\n\n            expect(err.annotate()).to.equal('{\\n  \"x\" \\u001b[31m[1]\\u001b[0m: true\\n}\\n\\u001b[31m\\n[1] \"x\" must be one of [string, number, date]\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates circular input","suites":["errors","annotate()"],"updatePoint":{"line":856,"column":36},"line":856,"code":"        it('annotates circular input', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    y: Joi.object({\n                        z: Joi.number()\n                    })\n                })\n            });\n\n            const input = {};\n            input.x = input;\n\n            const err = schema.validate(input).error;\n            expect(err).to.be.an.error('\"x.x\" is not allowed');\n            expect(err.details).to.equal([{\n                message: '\"x.x\" is not allowed',\n                path: ['x', 'x'],\n                type: 'object.unknown',\n                context: { child: 'x', label: 'x.x', key: 'x', value: input.x }\n            }]);\n            expect(err.annotate()).to.equal('{\\n  \"x\" \\u001b[31m[1]\\u001b[0m: \"[Circular ~]\"\\n}\\n\\u001b[31m\\n[1] \"x.x\" is not allowed\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates deep circular input","suites":["errors","annotate()"],"updatePoint":{"line":880,"column":41},"line":880,"code":"        it('annotates deep circular input', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    y: Joi.object({\n                        z: Joi.number()\n                    })\n                })\n            });\n\n            const input = { x: { y: {} } };\n            input.x.y.z = input.x.y;\n\n            const err = schema.validate(input).error;\n            expect(err).to.be.an.error('\"x.y.z\" must be a number');\n            expect(err.details).to.equal([{\n                message: '\"x.y.z\" must be a number',\n                path: ['x', 'y', 'z'],\n                type: 'number.base',\n                context: { label: 'x.y.z', key: 'z', value: input.x.y }\n            }]);\n            expect(err.annotate()).to.equal('{\\n  \"x\": {\\n    \"y\": {\\n      \"z\" \\u001b[31m[1]\\u001b[0m: \"[Circular ~.x.y]\"\\n    }\\n  }\\n}\\n\\u001b[31m\\n[1] \"x.y.z\" must be a number\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates deep circular input with extra keys","suites":["errors","annotate()"],"updatePoint":{"line":904,"column":57},"line":904,"code":"        it('annotates deep circular input with extra keys', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    y: Joi.object({\n                        z: Joi.number()\n                    })\n                })\n            });\n\n            const input = { x: { y: { z: 1, foo: {} } } };\n            input.x.y.foo = input.x.y;\n\n            const err = schema.validate(input).error;\n            expect(err).to.be.an.error('\"x.y.foo\" is not allowed');\n            expect(err.details).to.equal([{\n                message: '\"x.y.foo\" is not allowed',\n                path: ['x', 'y', 'foo'],\n                type: 'object.unknown',\n                context: { child: 'foo', label: 'x.y.foo', key: 'foo', value: input.x.y.foo }\n            }]);\n            expect(err.annotate()).to.equal('{\\n  \"x\": {\\n    \"y\": {\\n      \"z\": 1,\\n      \"foo\" \\u001b[31m[1]\\u001b[0m: \"[Circular ~.x.y]\"\\n    }\\n  }\\n}\\n\\u001b[31m\\n[1] \"x.y.foo\" is not allowed\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"prints NaN, Infinity and -Infinity correctly in errors","suites":["errors","annotate()"],"updatePoint":{"line":928,"column":66},"line":928,"code":"        it('prints NaN, Infinity and -Infinity correctly in errors', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    y: Joi.date().allow(null),\n                    z: Joi.date().allow(null),\n                    u: Joi.date().allow(null),\n                    g: Joi.date().allow(null),\n                    h: Joi.date().allow(null),\n                    i: Joi.date().allow(null),\n                    k: Joi.date().allow(null),\n                    p: Joi.date().allow(null),\n                    f: Joi.date().allow(null)\n                })\n            });\n\n            const input = {\n                x: {\n                    y: NaN,\n                    z: Infinity,\n                    u: -Infinity,\n                    g: Symbol('foo'),\n                    h: -Infinity,\n                    i: Infinity,\n                    k: (a) => a,\n                    p: Symbol('bar'),\n                    f: function (x) {\n\n                        return [{ y: 2 }];\n                    }\n                }\n            };\n\n            const err = schema.validate(input).error;\n            expect(err).to.be.an.error('\"x.y\" must be a valid date');\n            expect(err.details).to.equal([{\n                message: '\"x.y\" must be a valid date',\n                path: ['x', 'y'],\n                type: 'date.base',\n                context: { label: 'x.y', key: 'y', value: NaN }\n            }]);\n            expect(err.annotate().replace(/\\\\r/g, '')).to.equal('{\\n  \"x\": {\\n    \"z\": Infinity,\\n    \"u\": -Infinity,\\n    \"g\": Symbol(foo),\\n    \"h\": -Infinity,\\n    \"i\": Infinity,\\n    \"k\": (a) => a,\\n    \"p\": Symbol(bar),\\n    \"f\": function (x) {\\\\n\\\\n                        return [{ y: 2 }];\\\\n                    },\\n    \"y\" \\u001b[31m[1]\\u001b[0m: NaN\\n  }\\n}\\n\\u001b[31m\\n[1] \"x.y\" must be a valid date\\u001b[0m');\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"handles child to uncle relationship inside a child","suites":["errors","annotate()"],"updatePoint":{"line":972,"column":62},"line":972,"code":"        it('handles child to uncle relationship inside a child', () => {\n\n            const object = {\n                response: {\n                    options: {\n                        stripUnknown: true\n                    }\n                }\n            };\n\n            const ref = Joi.ref('.options.stripUnknown');\n            const schema = Joi.object({\n                response: Joi.object({\n                    modify: Joi.boolean(),\n                    options: Joi.object()\n                })\n                    .assert(ref, Joi.ref('modify'), 'meet requirement of having peer modify set to true')\n            });\n\n            const err = schema.validate(object, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"response\" is invalid because \"options.stripUnknown\" failed to meet requirement of having peer modify set to true');\n            expect(err.details).to.equal([{\n                message: '\"response\" is invalid because \"options.stripUnknown\" failed to meet requirement of having peer modify set to true',\n                path: ['response'],\n                type: 'object.assert',\n                context: {\n                    subject: ref,\n                    message: 'meet requirement of having peer modify set to true',\n                    label: 'response',\n                    key: 'response',\n                    value: object.response\n                }\n            }]);\n\n            expect(() => err.annotate(true)).to.not.throw();\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"annotates joi schema error","suites":["errors","annotate()"],"updatePoint":{"line":1009,"column":38},"line":1009,"code":"        it('annotates joi schema error', () => {\n\n            const schema = Joi.object({\n                type: 'string'\n            })\n                .unknown();\n\n            const value = Joi.number().min(1);\n            const err = schema.validate(value).error;\n            expect(err.message).equal('\"type\" must be [string]');\n            expect(err.annotate()).to.contain('\"type\" must be [string]');\n            Helper.equal(value, Joi.number().min(1));\n        });","file":"errors.js","skipped":false,"dir":"test"},{"name":"extends string locally","suites":["extension"],"updatePoint":{"line":20,"column":30},"line":20,"code":"    it('extends string locally', () => {\n\n        const special = Joi.string().extend({\n            type: 'special',\n            rules: {\n                hello: {\n                    validate(value, helpers, args, options) {\n\n                        if (!/hello/.test(value)) {\n                            return helpers.error('special.hello');\n                        }\n\n                        if (!value.includes('!')) {\n                            helpers.warn('special.excited');\n                        }\n\n                        return value;\n                    }\n                }\n            },\n            messages: {\n                'special.hello': '{{#label}} must say hello',\n                'special.excited': 'You do not seem excited enough'\n            }\n        });\n\n        expect(special.type).to.equal('special');\n        expect(special.hello().validate('HELLO').error).to.be.an.error('\"value\" must say hello');\n        expect(special.lowercase().hello().validate('HELLO')).to.equal({\n            value: 'hello',\n            warning: {\n                message: 'You do not seem excited enough',\n                details: [\n                    {\n                        context: {\n                            label: 'value',\n                            value: 'hello'\n                        },\n                        message: 'You do not seem excited enough',\n                        path: [],\n                        type: 'special.excited'\n                    }\n                ]\n            }\n        });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends string globally","suites":["extension"],"updatePoint":{"line":67,"column":31},"line":67,"code":"    it('extends string globally', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            rules: {\n                hello: {\n                    validate(value, helpers, args, options) {\n\n                        if (value === 'hello') {\n                            return value;\n                        }\n\n                        return helpers.error('special.hello');\n                    }\n                }\n            },\n            messages: {\n                'special.hello': '{{#label}} must say hello'\n            }\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.hello().validate('HELLO').error).to.be.an.error('\"value\" must say hello');\n        expect(special.lowercase().hello().validate('HELLO').error).to.not.exist();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends multiple types","suites":["extension"],"updatePoint":{"line":95,"column":30},"line":95,"code":"    it('extends multiple types', () => {\n\n        const custom = Joi.extend({\n            type: /^s/,\n            rules: {\n                hello: {\n                    validate(value, helpers, args, options) {\n\n                        return 'hello';\n                    }\n                }\n            }\n        });\n\n        const string = custom.string().hello();\n        expect(string.type).to.equal('string');\n        expect(string.hello().validate('goodbye').value).to.equal('hello');\n\n        const symbol = custom.symbol().hello();\n        expect(symbol.type).to.equal('symbol');\n        expect(symbol.hello().validate(Symbol('x')).value).to.equal('hello');\n\n        expect(() => custom.number().hello()).to.throw('custom.number(...).hello is not a function');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"aliases a type","suites":["extension"],"updatePoint":{"line":120,"column":22},"line":120,"code":"    it('aliases a type', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string()\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1).error).to.be.an.error('\"value\" must be a string');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"errors on missing error code","suites":["extension"],"updatePoint":{"line":132,"column":36},"line":132,"code":"    it('errors on missing error code', () => {\n\n        const special = Joi.string().extend({\n            type: 'special',\n            rules: {\n                fail: {\n                    method() {\n\n                        return this.$_addRule('fail');\n                    },\n                    validate(value, helpers) {\n\n                        return helpers.error('special.fail');\n                    }\n                }\n            }\n        });\n\n        expect(special.fail().validate('anything').error).to.be.an.error('Error code \"special.fail\" is not defined, your custom type is missing the correct messages definition');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a custom base","suites":["extension"],"updatePoint":{"line":153,"column":34},"line":153,"code":"    it('extends with a custom base', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string().min(2)\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special();\n        Helper.validate(schema, [\n            [123, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 123, label: 'value' }\n            }],\n            ['a', false, {\n                message: '\"value\" length must be at least 2 characters long',\n                path: [],\n                type: 'string.min',\n                context: {\n                    limit: 2,\n                    value: 'a',\n                    encoding: undefined,\n                    label: 'value'\n                }\n            }],\n            ['abc', true]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with constructor arguments","suites":["extension"],"updatePoint":{"line":186,"column":42},"line":186,"code":"    it('extends with constructor arguments', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            args(schema, limit) {\n\n                return schema.min(limit);\n            }\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special(2);\n        Helper.validate(schema, [\n            [123, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 123, label: 'value' }\n            }],\n            ['a', false, {\n                message: '\"value\" length must be at least 2 characters long',\n                path: [],\n                type: 'string.min',\n                context: {\n                    limit: 2,\n                    value: 'a',\n                    encoding: undefined,\n                    label: 'value'\n                }\n            }],\n            ['abc', true]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a custom base while preserving its original constructor arguments","suites":["extension"],"updatePoint":{"line":223,"column":86},"line":223,"code":"    it('extends with a custom base while preserving its original constructor arguments', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.object()\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special({ a: custom.number() });\n        Helper.validate(schema, [\n            [undefined, true],\n            [{}, true],\n            [{ a: 1 }, true],\n            [{ a: 'a' }, false, {\n                message: '\"a\" must be a number',\n                path: ['a'],\n                type: 'number.base',\n                context: { key: 'a', label: 'a', value: 'a' }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a custom base and validate (object)","suites":["extension"],"updatePoint":{"line":247,"column":56},"line":247,"code":"    it('extends with a custom base and validate (object)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.object(),\n            validate(value, helpers) {\n\n                return { value };\n            }\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special({ a: custom.number() });\n        Helper.validate(schema, [\n            [undefined, true],\n            [{}, true],\n            [{ a: 1 }, true],\n            [{ a: 'a' }, false, {\n                message: '\"a\" must be a number',\n                path: ['a'],\n                type: 'number.base',\n                context: { key: 'a', label: 'a', value: 'a' }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a custom base and validate (number)","suites":["extension"],"updatePoint":{"line":275,"column":56},"line":275,"code":"    it('extends with a custom base and validate (number)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.number(),\n            validate(value, helpers) {\n\n                return { value };\n            }\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special({ a: custom.number() });\n        Helper.validate(schema, [\n            [undefined, true],\n            [1, true],\n            ['1', true, 1],\n            [{}, false, {\n                message: '\"value\" must be a number',\n                path: [],\n                type: 'number.base',\n                context: { label: 'value', value: {} }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a custom base and validate (boolean)","suites":["extension"],"updatePoint":{"line":303,"column":57},"line":303,"code":"    it('extends with a custom base and validate (boolean)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.boolean(),\n            validate(value, helpers) {\n\n                return { value };\n            }\n        });\n\n        expect(Joi.special).to.not.exist();\n        expect(custom.special).to.be.a.function();\n\n        const schema = custom.special();\n        Helper.validate(schema, [\n            [undefined, true],\n            [true, true],\n            [false, true],\n            [{}, false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: {} }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with new rules","suites":["extension"],"updatePoint":{"line":331,"column":30},"line":331,"code":"    it('extends with new rules', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            rules: {\n                foo: {\n                    validate(value, helpers, args, options) {\n\n                        return null;\n                    }\n                },\n                bar: {\n                    validate(value, helpers, args, options) {\n\n                        return helpers.error('special.bar');\n                    }\n                },\n                foo_bar: {\n                    validate(value, helpers, args, options) {\n\n                        return null;\n                    }\n                }\n            },\n            messages: {\n                'special.bar': '{#label} oh no bar !'\n            }\n        });\n\n        const original = Joi.any();\n        expect(original.foo).to.not.exist();\n        expect(original.bar).to.not.exist();\n        expect(original.foo_bar).to.not.exist();\n\n        const schema = custom.special();\n        expect(schema.foo().validate({})).to.equal({ value: null });\n        expect(schema.bar().validate({}).error).to.be.an.error('\"value\" oh no bar !');\n        expect(schema.foo_bar().validate({})).to.equal({ value: null });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"concats custom type","suites":["extension"],"updatePoint":{"line":371,"column":27},"line":371,"code":"    it('concats custom type', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            rules: {\n                test: {\n                    validate(value, helpers, args, options) {\n\n                        return value;\n                    },\n                    multi: true\n                }\n            }\n        });\n\n        const schema = custom.special();\n        const base = schema.test();\n        const merged = base.concat(base);\n\n        expect(merged.describe()).to.equal({\n            type: 'special',\n            rules: [{ name: 'test' }, { name: 'test' }]\n        });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"adds a new rule with the correct this","suites":["extension"],"updatePoint":{"line":396,"column":45},"line":396,"code":"    it('adds a new rule with the correct this', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            rules: {\n                foo: {\n                    validate(value, { error }) {\n\n                        return error('special.bar');\n                    }\n                }\n            },\n            messages: {\n                'special.bar': '{#label} oh no bar !'\n            }\n        });\n\n        const schema = custom.special().foo().label('baz');\n        expect(schema.validate({}).error).to.be.an.error('\"baz\" oh no bar !');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with flag rule","suites":["extension"],"updatePoint":{"line":417,"column":30},"line":417,"code":"    it('extends with flag rule', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            validate(value, { schema }) {\n\n                return { value: schema.$_getFlag('foo') };\n            },\n            rules: {\n                foo: {\n                    method(first, second) {\n\n                        Joi.assert(first, Joi.string());\n                        Joi.assert(second, Joi.object().ref());\n\n                        return this.$_setFlag('foo', { first, second });\n                    }\n                }\n            }\n        });\n\n        const schema = custom.special();\n        expect(schema.foo('bar').validate(null)).to.equal({ value: { first: 'bar', second: undefined } });\n        expect(schema.foo('bar', Joi.ref('a.b')).validate(null).value.first).to.equal('bar');\n        expect(Joi.isRef(schema.foo('bar', Joi.ref('a.b')).validate(null).value.second)).to.be.true();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with flag rule (customer setter)","suites":["extension"],"updatePoint":{"line":444,"column":48},"line":444,"code":"    it('extends with flag rule (customer setter)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            flags: {\n                xfoo: {\n                    setter: 'foo'\n                }\n            },\n            validate(value, { schema }) {\n\n                return { value: schema.$_getFlag('xfoo') };\n            },\n            rules: {\n                foo: {\n                    method(first, second) {\n\n                        Joi.assert(first, Joi.string());\n                        Joi.assert(second, Joi.object().ref());\n\n                        return this.$_setFlag('xfoo', { first, second });\n                    }\n                }\n            }\n        });\n\n        const schema = custom.special();\n        expect(schema.foo('bar').validate(null)).to.equal({ value: { first: 'bar', second: undefined } });\n        expect(schema.foo('bar', Joi.ref('a.b')).validate(null).value.first).to.equal('bar');\n        expect(Joi.isRef(schema.foo('bar', Joi.ref('a.b')).validate(null).value.second)).to.be.true();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with flag rule (schema)","suites":["extension"],"updatePoint":{"line":476,"column":39},"line":476,"code":"    it('extends with flag rule (schema)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            coerce(value, helpers) {\n\n                const swap = helpers.schema.$_getFlag('swap');\n                if (swap &&\n                    swap.$_match(value, helpers.state.nest(swap), helpers.prefs)) {\n\n                    return { value: 'swapped' };\n                }\n            },\n            rules: {\n                swap: {\n                    method(schema) {\n\n                        return this.$_setFlag('swap', this.$_compile(schema));\n                    }\n                }\n            }\n        });\n\n        const schema = custom.special().swap(Joi.number().id('x')).empty(Joi.object());\n        expect(schema.validate(3)).to.equal({ value: 'swapped' });\n        expect(schema.validate({})).to.equal({ value: undefined });\n\n        expect(schema.fork('x', (s) => s.min(10)).validate(3)).to.equal({ value: 3 });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"defines a rule that can change the value","suites":["extension"],"updatePoint":{"line":506,"column":48},"line":506,"code":"    it('defines a rule that can change the value', () => {\n\n        const custom = Joi.extend({\n            type: 'number',\n            base: Joi.number(),\n            rules: {\n                double: {\n                    validate(value, helpers, args, options) {\n\n                        return value * 2;\n                    }\n                }\n            }\n        });\n\n        const original = Joi.number();\n        expect(original.double).to.not.exist();\n\n        const schema = custom.number().double();\n        expect(schema.validate(3)).to.contain({ value: 6 });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides all error messages with string","suites":["extension"],"updatePoint":{"line":528,"column":48},"line":528,"code":"    it('overrides all error messages with string', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            messages: 'shit happens'\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1).error).to.be.an.error('shit happens');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides all error messages with a template","suites":["extension"],"updatePoint":{"line":541,"column":52},"line":541,"code":"    it('overrides all error messages with a template', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            messages: Joi.x('shit happens')\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1).error).to.be.an.error('shit happens');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides specific error messages with string","suites":["extension"],"updatePoint":{"line":554,"column":53},"line":554,"code":"    it('overrides specific error messages with string', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            messages: {\n                'string.base': 'shit happens'\n            }\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1).error).to.be.an.error('shit happens');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides specific error messages with template","suites":["extension"],"updatePoint":{"line":569,"column":55},"line":569,"code":"    it('overrides specific error messages with template', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            messages: {\n                'string.base': Joi.x('shit happens')\n            }\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1).error).to.be.an.error('shit happens');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides specific error messages with string (language)","suites":["extension"],"updatePoint":{"line":584,"column":64},"line":584,"code":"    it('overrides specific error messages with string (language)', () => {\n\n        const custom = Joi.extend(\n            {\n                type: 'special',\n                base: Joi.string(),\n                messages: {\n                    root: 'thing',\n                    en: {\n                        root: 'stuff',\n                        'string.base': '{{#label}} shit happens'\n                    }\n                }\n            },\n            (joi) => {\n\n                return {\n                    type: 'special',\n                    base: joi.special(),\n                    messages: {\n                        en: {\n                            'string.base': '{{#label}} bad shit happens'\n                        }\n                    }\n                };\n            }\n        );\n\n        const special = custom.special();\n        expect(special.validate(1, { errors: { language: 'en' } }).error).to.be.an.error('\"stuff\" bad shit happens');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"overrides specific error messages with template (language)","suites":["extension"],"updatePoint":{"line":616,"column":66},"line":616,"code":"    it('overrides specific error messages with template (language)', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            messages: {\n                root: 'thing',\n                en: {\n                    root: 'stuff',\n                    'string.base': Joi.x('{{#label}} shit happens')\n                }\n            }\n        });\n\n        const special = custom.special();\n        expect(special.type).to.equal('special');\n        expect(special.validate(1, { errors: { language: 'en' } }).error).to.be.an.error('\"stuff\" shit happens');\n        expect(special.validate(1).error).to.be.an.error('\"thing\" must be a string');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"errors on invalid message overrides (language)","suites":["extension"],"updatePoint":{"line":636,"column":54},"line":636,"code":"    it('errors on invalid message overrides (language)', () => {\n\n        expect(() => {\n\n            Joi.extend({\n                type: 'special',\n                base: Joi.string(),\n                messages: {\n                    root: 'thing',\n                    en: 10\n                }\n            });\n        }).to.throw('Invalid message for en');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"retains base predefined options","suites":["extension"],"updatePoint":{"line":651,"column":39},"line":651,"code":"    it('retains base predefined options', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.number().prefs({ abortEarly: false }),\n            rules: {\n                foo: {\n                    validate(value, { error }, args, options) {\n\n                        return error('special.foo');\n                    }\n                }\n            },\n            messages: {\n                'special.foo': '{#label} foo'\n            }\n        });\n\n        const schema = custom.special().min(10).max(0).foo();\n        expect(schema.validate(5).error).to.be.an.error('\"value\" must be greater than or equal to 10. \"value\" must be less than or equal to 0. \"value\" foo');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends coerce","suites":["extension"],"updatePoint":{"line":673,"column":22},"line":673,"code":"    it('extends coerce', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            coerce(value, helpers) {\n\n                return { value: 'foobar' };\n            }\n        });\n\n        const schema = custom.special();\n        expect(schema.validate(true)).to.equal({ value: 'foobar' });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends coerce (from different types)","suites":["extension"],"updatePoint":{"line":688,"column":45},"line":688,"code":"    it('extends coerce (from different types)', () => {\n\n        const type1 = Joi.any().extend({\n            type: 'type1',\n            coerce: {\n                from: 'string',\n                method(value, { error }) {\n\n                    if (value === '1') {\n                        return { errors: error('type1.error') };\n                    }\n\n                    if (value === '2') {\n                        return { value: 2 };\n                    }\n                }\n            },\n            messages: {\n                'type1.error': 'failed1'\n            }\n        });\n\n        const type2 = type1.extend({\n            type: 'type2',\n            coerce: {\n                from: 'number',\n                method(value, { error }) {\n\n                    if (value === 4) {\n                        return { errors: error('type2.error') };\n                    }\n\n                    if (value === 2) {\n                        return { value: 'x' };\n                    }\n                }\n            },\n            messages: {\n                'type2.error': 'failed2'\n            }\n        });\n\n        expect(type2.validate('2')).to.equal({ value: 'x' });\n        expect(type2.validate(2)).to.equal({ value: 'x' });\n        expect(type2.validate('3')).to.equal({ value: '3' });\n        expect(type2.validate(5)).to.equal({ value: 5 });\n        expect(type2.validate('1').error).to.be.an.error('failed1');\n        expect(type2.validate(4).error).to.be.an.error('failed2');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends coerce (no from on parent)","suites":["extension"],"updatePoint":{"line":738,"column":42},"line":738,"code":"    it('extends coerce (no from on parent)', () => {\n\n        const type1 = Joi.any().extend({\n            type: 'type1',\n            coerce: {\n                method(value, { error }) {\n\n                    if (value === '1') {\n                        return { errors: error('type1.error') };\n                    }\n\n                    if (value === '2') {\n                        return { value: 2 };\n                    }\n                }\n            },\n            messages: {\n                'type1.error': 'failed1'\n            }\n        });\n\n        const type2 = type1.extend({\n            type: 'type2',\n            coerce: {\n                from: 'number',\n                method(value, { error }) {\n\n                    if (value === 4) {\n                        return { errors: error('type2.error') };\n                    }\n\n                    if (value === 2) {\n                        return { value: 'x' };\n                    }\n                }\n            },\n            messages: {\n                'type2.error': 'failed2'\n            }\n        });\n\n        expect(type2.validate('2')).to.equal({ value: 'x' });\n        expect(type2.validate(2)).to.equal({ value: 'x' });\n        expect(type2.validate('3')).to.equal({ value: '3' });\n        expect(type2.validate(5)).to.equal({ value: 5 });\n        expect(type2.validate('1').error).to.be.an.error('failed1');\n        expect(type2.validate(4).error).to.be.an.error('failed2');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends coerce (undefined)","suites":["extension"],"updatePoint":{"line":787,"column":34},"line":787,"code":"    it('extends coerce (undefined)', () => {\n\n        const type1 = Joi.any().extend({\n            type: 'type1',\n            coerce(value, { error }) {\n\n                if (value === '1') {\n                    return { value: undefined };\n\n                }\n            }\n        });\n\n        const type2 = type1.extend({\n            type: 'type2',\n            coerce(value, { error }) {\n\n                if (value === '2') {\n                    return { value: undefined };\n                }\n            }\n        });\n\n        const type3 = type2.extend({\n            type: 'type3',\n            coerce(value, { error }) {\n\n                if (value === '3') {\n                    return { value: undefined };\n                }\n            }\n        });\n\n        expect(type3.validate('1')).to.equal({ value: undefined });\n        expect(type3.validate('2')).to.equal({ value: undefined });\n        expect(type3.validate('3')).to.equal({ value: undefined });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a failing validate","suites":["extension"],"updatePoint":{"line":825,"column":39},"line":825,"code":"    it('extends with a failing validate', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            validate(value, { error }) {\n\n                return { errors: error('any.invalid') };\n            }\n        });\n\n        const schema = custom.special();\n        expect(schema.validate('foo').error).to.be.an.error('\"value\" contains an invalid value');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"returns a custom Joi with types not inheriting root properties","suites":["extension"],"updatePoint":{"line":839,"column":70},"line":839,"code":"    it('returns a custom Joi with types not inheriting root properties', () => {\n\n        const custom = Joi.extend({\n            type: 'special'\n        });\n\n        const schema = custom.valid(true);\n        expect(schema.isRef).to.not.exist();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"uses types defined in the same extend call","suites":["extension"],"updatePoint":{"line":849,"column":50},"line":849,"code":"    it('uses types defined in the same extend call', () => {\n\n        const custom = Joi.extend(\n            {\n                type: 'special'\n            },\n            (joi) => ({\n                type: 'second',\n                base: joi.special()\n            })\n        );\n\n        expect(() => custom.second()).to.not.throw();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"merges rules when type is defined several times in the same extend call","suites":["extension"],"updatePoint":{"line":864,"column":79},"line":864,"code":"    it('merges rules when type is defined several times in the same extend call', () => {\n\n        const custom = Joi.extend(\n            (joi) => ({\n                type: 'special',\n                base: joi.number(),\n                rules: {\n                    foo: {\n                        validate(value, helpers) {\n\n                            return 1;\n                        }\n                    }\n                }\n            }),\n            (joi) => ({\n                type: 'special',\n                base: joi.special(),\n                rules: {\n                    bar: {\n                        validate(value, helpers) {\n\n                            return 2;\n                        }\n                    }\n                }\n            })\n        );\n\n        expect(() => custom.special().foo().bar()).to.not.throw();\n        expect(custom.attempt({ a: 123, b: 456 }, Joi.object({ a: custom.special().foo(), b: custom.special().bar() }))).to.equal({ a: 1, b: 2 });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"uses last definition when type is defined several times with different bases","suites":["extension"],"updatePoint":{"line":897,"column":84},"line":897,"code":"    it('uses last definition when type is defined several times with different bases', () => {\n\n        const custom = Joi.extend(\n            (joi) => ({\n                type: 'special',\n                base: Joi.number(),\n                rules: {\n                    foo: {\n                        validate(value, { error }) {\n\n                            return 1;\n                        }\n                    }\n                }\n            }),\n            (joi) => ({\n                type: 'special',\n                base: Joi.string(),\n                rules: {\n                    bar: {\n                        validate(value, { error }) {\n\n                            return 2;\n                        }\n                    }\n                }\n            })\n        );\n\n        expect(() => custom.special().foo()).to.throw();\n        expect(() => custom.special().bar()).to.not.throw();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"merges languages when multiple extensions extend the same type","suites":["extension"],"updatePoint":{"line":930,"column":70},"line":930,"code":"    it('merges languages when multiple extensions extend the same type', () => {\n\n        const customJoiWithBoth = Joi.extend(\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                messages: { 'number.foo': '{#label} foo' },\n                rules: {\n                    foo: {\n                        validate(value, { error }) {\n\n                            return error('number.foo');\n                        }\n                    }\n                }\n            }),\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                messages: { 'number.bar': '{#label} bar' },\n                rules: {\n                    bar: {\n                        validate(value, { error }) {\n\n                            return error('number.bar');\n                        }\n                    }\n                }\n            })\n        );\n\n        expect(customJoiWithBoth.number().foo().validate(0).error).to.be.an.error('\"value\" foo');\n        expect(customJoiWithBoth.number().bar().validate(0).error).to.be.an.error('\"value\" bar');\n\n        const customJoiWithFirst = Joi.extend(\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                messages: { 'number.foo': '{#label} foo' },\n                rules: {\n                    foo: {\n                        validate(value, { error }) {\n\n                            return error('number.foo');\n                        }\n                    }\n                }\n            }),\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                rules: {\n                    bar: {\n                        validate(value, { error }) {\n\n                            return error('number.base');\n                        }\n                    }\n                }\n            })\n        );\n\n        expect(customJoiWithFirst.number().foo().validate(0).error).to.be.an.error('\"value\" foo');\n        expect(customJoiWithFirst.number().bar().validate(0).error).to.be.an.error('\"value\" must be a number');\n\n        const customJoiWithSecond = Joi.extend(\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                rules: {\n                    foo: {\n                        validate(value, { error }) {\n\n                            return error('number.base');\n                        }\n                    }\n                }\n            }),\n            (joi) => ({\n                type: 'number',\n                base: joi.number(),\n                messages: { 'number.bar': '{#label} bar' },\n                rules: {\n                    bar: {\n                        validate(value, { error }) {\n\n                            return error('number.bar');\n                        }\n                    }\n                }\n            })\n        );\n\n        expect(customJoiWithSecond.number().foo().validate(0).error).to.be.an.error('\"value\" must be a number');\n        expect(customJoiWithSecond.number().bar().validate(0).error).to.be.an.error('\"value\" bar');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"returns extended shortcuts","suites":["extension"],"updatePoint":{"line":1027,"column":34},"line":1027,"code":"    it('returns extended shortcuts', () => {\n\n        const custom = Joi.extend({\n            base: Joi.string(),\n            type: 'special'\n        });\n\n        expect(() => {\n\n            const string = custom.string;\n            string();\n        }).to.throw('Must be invoked on a Joi instance.');\n\n        const { string, special } = custom.types();\n        expect(() => string.allow('x')).to.not.throw();\n        expect(string.validate(0).error).to.be.an.error('\"value\" must be a string');\n\n        expect(() => special.allow('x')).to.not.throw();\n        expect(special.validate(0).error).to.be.an.error('\"value\" must be a string');\n\n        expect(custom._types.size).to.equal(Joi._types.size + 1);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"supports rule()","suites":["extension"],"updatePoint":{"line":1050,"column":23},"line":1050,"code":"    it('supports rule()', () => {\n\n        const custom = Joi.extend({\n            type: 'ext',\n            base: Joi.number(),\n            messages: {\n                'ext.big': 'Not big enough'\n            },\n            rules: {\n                big: {\n                    validate(value, { error }) {\n\n                        if (value > 100) {\n                            return value;\n                        }\n\n                        return error('ext.big');\n                    }\n                }\n            }\n        });\n\n        expect(() => custom.ext().big().rule({})).to.not.throw();\n        expect(() => custom.ext().big().rule({}).big()).to.not.throw();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends rule with complex example","suites":["extension"],"updatePoint":{"line":1076,"column":41},"line":1076,"code":"    it('extends rule with complex example', () => {\n\n        const custom = Joi.extend((joi) => {\n\n            return {\n                type: 'million',\n                base: joi.number(),\n                messages: {\n                    'million.base': '{{#label}} must be at least a million',\n                    'million.big': '{{#label}} must be at least five millions',\n                    'million.round': '{{#label}} must be a round number',\n                    'million.dividable': '{{#label}} must be dividable by {{#q}}'\n                },\n                coerce(value, { schema }) {\n\n                    // Only called when prefs.convert is true\n\n                    if (schema.$_getRule('round')) {\n                        return { value: Math.round(value) };\n                    }\n                },\n                validate(value, { schema, error }) {\n\n                    // Base validation regardless of the rules applied\n\n                    if (value < 1000000) {\n                        return { value, errors: error('million.base') };\n                    }\n\n                    // Check flags for global state\n\n                    if (schema.$_getFlag('big') &&\n                        value < 5000000) {\n\n                        return { value, errors: error('million.big') };\n                    }\n                },\n                rules: {\n                    big: {\n                        alias: 'large',\n                        method() {\n\n                            return this.$_setFlag('big', true);\n                        }\n                    },\n                    round: {\n                        convert: true,              // Dual rule: converts or validates\n                        method() {\n\n                            return this.$_addRule('round');\n                        },\n                        validate(value, helpers, args, options) {\n\n                            // Only called when prefs.convert is false (due to rule convert option)\n\n                            if (value % 1 !== 0) {\n                                return helpers.error('million.round');\n                            }\n                        }\n                    },\n                    dividable: {\n                        multi: true,                // Rule supports multiple invocations\n                        method(q) {\n\n                            return this.$_addRule({ name: 'dividable', args: { q } });\n                        },\n                        args: [\n                            {\n                                name: 'q',\n                                ref: true,\n                                assert: (value) => typeof value === 'number' && !isNaN(value),\n                                message: 'must be a number'\n                            }\n                        ],\n                        validate(value, helpers, args, options) {\n\n                            if (value % args.q === 0) {\n                                return value;       // Value is valid\n                            }\n\n                            return helpers.error('million.dividable', { q: args.q });\n                        }\n                    },\n                    even: {\n                        method() {\n\n                            // Rule with only method used to alias another rule\n\n                            return this.dividable(2);\n                        }\n                    }\n                }\n            };\n        });\n\n        const schema = custom.object({\n            a: custom.million().round().dividable(Joi.ref('b')),\n            b: custom.number(),\n            c: custom.million().even().dividable(7),\n            d: custom.million().round().prefs({ convert: false }),\n            e: custom.million().large()\n        });\n\n        Helper.validate(schema, [\n            [{ a: 3000000, b: 3 }, true],\n            [{ a: 1000000.1, b: 10 }, true, { a: 1000000, b: 10 }],\n            [{ a: 3000, b: 3 }, false, {\n                message: '\"a\" must be at least a million',\n                path: ['a'],\n                type: 'million.base',\n                context: { value: 3000, label: 'a', key: 'a' }\n            }],\n            [{ c: 14000000 }, true],\n            [{ c: 1000000 }, false, {\n                message: '\"c\" must be dividable by 7',\n                path: ['c'],\n                type: 'million.dividable',\n                context: { value: 1000000, label: 'c', key: 'c', q: 7 }\n            }],\n            [{ d: 1000000.1 }, false, {\n                message: '\"d\" must be a round number',\n                path: ['d'],\n                type: 'million.round',\n                context: { value: 1000000.1, label: 'd', key: 'd' }\n            }],\n            [{ e: 6000000 }, true],\n            [{ e: 1000000 }, false, {\n                message: '\"e\" must be at least five millions',\n                path: ['e'],\n                type: 'million.big',\n                context: { value: 1000000, label: 'e', key: 'e' }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends rule with schema ref validation","suites":["extension"],"updatePoint":{"line":1211,"column":47},"line":1211,"code":"    it('extends rule with schema ref validation', () => {\n\n        const custom = Joi.extend((joi) => {\n\n            return {\n                type: 'number',\n                base: joi.number(),\n                messages: {\n                    'number.dividable': '{{#label}} must be dividable by {{#q}}'\n                },\n                rules: {\n                    dividable: {\n                        method(q) {\n\n                            return this.$_addRule({ name: 'dividable', args: { q } });\n                        },\n                        args: [\n                            {\n                                name: 'q',\n                                ref: true,\n                                assert: Joi.number().required()\n                            }\n                        ],\n                        validate(value, helpers, args, options) {\n\n                            if (value % args.q === 0) {\n                                return value;       // Value is valid\n                            }\n\n                            return helpers.error('number.dividable', { q: args.q });\n                        }\n                    }\n                }\n            };\n        });\n\n        const ref = Joi.ref('b');\n        const schema = custom.object({\n            a: custom.number().dividable(ref),\n            b: custom.number()\n        });\n\n        Helper.validate(schema, [\n            [{ a: 30, b: 3 }, true],\n            [{ a: 30 }, false, {\n                message: '\"a\" q references \"ref:b\" which \"q\" is required',\n                path: ['a'],\n                type: 'any.ref',\n                context: { label: 'a', key: 'a', ref, arg: 'q', reason: '\"q\" is required' }\n            }]\n        ]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends rebuild","suites":["extension"],"updatePoint":{"line":1264,"column":23},"line":1264,"code":"    it('extends rebuild', () => {\n\n        const custom = Joi.extend((joi) => {\n\n            return {\n                type: 'special',\n                base: joi.object(),\n                terms: {\n                    tests: { init: [] }\n                },\n                rules: {\n                    test: {\n                        method(schema) {\n\n                            const obj = this.clone();\n                            obj.$_terms.tests.push(schema);\n                            obj.$_mutateRegister(schema);\n                            return obj.$_mutateRebuild();\n                        }\n                    }\n                },\n                rebuild(schema) {\n\n                    for (const test of schema.$_terms.tests) {\n                        if (test.type === 'number') {\n                            schema.$_setFlag('_hasNumbers', true, { clone: false });\n                            break;\n                        }\n                    }\n                }\n            };\n        });\n\n        const schema = custom.special().test(Joi.number());\n        expect(schema.$_getFlag('_hasNumbers')).to.be.true();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"supports fork","suites":["extension"],"updatePoint":{"line":1301,"column":21},"line":1301,"code":"    it('supports fork', () => {\n\n        const custom = Joi.extend((joi) => {\n\n            return {\n                type: 'special',\n                base: joi.object(),\n                terms: {\n                    tests: { init: [] }\n                },\n                rules: {\n                    test: {\n                        method(schema) {\n\n                            const obj = this.clone();\n                            obj.$_terms.tests.push(schema);\n                            obj.$_mutateRegister(schema);\n                            return obj;\n                        }\n                    }\n                }\n            };\n        });\n\n        const schema = custom.special().keys({ y: Joi.number() }).test(Joi.number().id('x'));\n\n        const modified1 = schema.fork('x', (s) => s.min(10));\n        expect(modified1.describe()).to.equal({\n            type: 'special',\n            keys: {\n                y: { type: 'number' }\n            },\n            tests: [\n                {\n                    type: 'number',\n                    flags: { id: 'x' },\n                    rules: [\n                        {\n                            name: 'min',\n                            args: { limit: 10 }\n                        }\n                    ]\n                }\n            ]\n        });\n\n        const modified2 = schema.fork('y', (s) => s.min(10));\n        expect(modified2.describe()).to.equal({\n            type: 'special',\n            keys: {\n                y: {\n                    type: 'number',\n                    rules: [\n                        {\n                            name: 'min',\n                            args: { limit: 10 }\n                        }\n                    ]\n                }\n            },\n            tests: [\n                {\n                    type: 'number',\n                    flags: { id: 'x' }\n                }\n            ]\n        });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends modifiers","suites":["extension"],"updatePoint":{"line":1370,"column":25},"line":1370,"code":"    it('extends modifiers', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.number(),\n            modifiers: {\n                factor(rule, n) {\n\n                    if (rule.args &&\n                        rule.args.limit) {\n\n                        rule.args.limit *= n;\n                    }\n                }\n            }\n        });\n\n        const schema = custom.special().min(1).keep().min(10).factor(2);\n        expect(schema.validate(20)).to.equal({ value: 20 });\n        expect(schema.validate(19).error).to.be.an.error('\"value\" must be greater than or equal to 20');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"validates rule arguments","suites":["extension"],"updatePoint":{"line":1392,"column":32},"line":1392,"code":"    it('validates rule arguments', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            rules: {\n                foo: {\n                    method(b) {\n\n                        return this.$_addRule({ name: 'foo', args: { b } });\n                    },\n                    args: [\n                        {\n                            name: 'b',\n                            assert: Joi.number()\n                        }\n                    ]\n                }\n            }\n        });\n\n        expect(() => custom.special().foo(2)).to.not.throw();\n        expect(() => custom.special().foo('x')).to.throw('\"b\" must be a number or reference');\n        expect(() => custom.special().foo('2')).to.throw('\"b\" must be a number or reference');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends number to support comma delimiter","suites":["extension"],"updatePoint":{"line":1417,"column":49},"line":1417,"code":"    it('extends number to support comma delimiter', () => {\n\n        const custom = Joi.extend({\n            type: 'number',\n            base: Joi.number(),\n            prepare(value, helpers) {\n\n                if (typeof value !== 'string') {\n                    return;\n                }\n\n                return { value: value.replace(',', '.') };\n            }\n        });\n\n        expect(custom.number().validate(2.0)).to.equal({ value: 2.0 });\n        expect(custom.number().validate('2.0')).to.equal({ value: 2.0 });\n        expect(custom.number().validate('2,0')).to.equal({ value: 2.0 });\n        expect(custom.number().validate('2,0', { convert: false }).error).to.be.an.error('\"value\" must be a number');\n        expect(custom.number().validate(undefined).error).to.not.exist();\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends number to support only comma delimiter","suites":["extension"],"updatePoint":{"line":1439,"column":54},"line":1439,"code":"    it('extends number to support only comma delimiter', () => {\n\n        const custom = Joi.extend({\n            type: 'number',\n            base: Joi.number(),\n            prepare(value, { error }) {\n\n                if (typeof value !== 'string') {\n                    return;\n                }\n\n                if (value.includes('.')) {\n                    return { errors: error('number.period') };\n                }\n\n                return { value: value.replace(',', '.') };\n            },\n            messages: {\n                'number.period': 'Number cannot use period delimiter'\n            }\n        });\n\n        expect(custom.number().validate('2.0').error).to.be.an.error('Number cannot use period delimiter');\n        expect(custom.number().validate('2,0')).to.equal({ value: 2.0 });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends number to support comma delimiter and then \" delimiter","suites":["extension"],"updatePoint":{"line":1465,"column":70},"line":1465,"code":"    it('extends number to support comma delimiter and then \" delimiter', () => {\n\n        const custom = Joi.extend(\n            {\n                type: 'number',\n                base: Joi.number(),\n                prepare(value, helpers) {\n\n                    if (typeof value !== 'string') {\n                        return;\n                    }\n\n                    return { value: value.replace(',', '.') };\n                }\n            },\n            (joi) => {\n\n                return {\n                    type: 'number',\n                    base: joi.number(),\n                    prepare(value, { error }) {\n\n                        if (value === 0) {\n                            return { value: undefined };\n                        }\n\n                        if (typeof value !== 'string') {\n                            return;\n                        }\n\n                        if (value.includes('.')) {\n                            return { errors: error('number.period') };\n                        }\n\n                        return { value: value.replace('\"', '.') };\n                    },\n                    messages: {\n                        'number.period': 'Number cannot use period delimiter'\n                    }\n                };\n            }\n        );\n\n        expect(custom.number().validate(2.0)).to.equal({ value: 2.0 });\n        expect(custom.number().validate('2.0').error).to.be.an.error('Number cannot use period delimiter');\n        expect(custom.number().validate('2,0')).to.equal({ value: 2.0 });\n        expect(custom.number().validate('2\"0')).to.equal({ value: 2.0 });\n        expect(custom.number().validate(0)).to.equal({ value: undefined });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends object to support string coerce","suites":["extension"],"updatePoint":{"line":1515,"column":47},"line":1515,"code":"    it('extends object to support string coerce', () => {\n\n        const custom = Joi.extend({\n            type: 'object',\n            base: Joi.object(),\n            coerce: {\n                from: 'string',\n                method(value, helpers) {\n\n                    if (value[0] !== '{' &&\n                        !/^\\s*\\{/.test(value)) {\n\n                        return;\n                    }\n\n                    try {\n                        return { value: Bourne.parse(value) };\n                    }\n                    catch (ignoreErr) { }\n                }\n            }\n        });\n\n        expect(custom.object().validate('{\"hi\":true}')).to.equal({ value: { hi: true } });\n        expect(custom.object().validate(' \\n\\r\\t{ \\n\\r\\t\"hi\" \\n\\r\\t: \\n\\r\\ttrue \\n\\r\\t} \\n\\r\\t')).to.equal({ value: { hi: true } });\n        expect(custom.object().strict().validate('{\"hi\":true}').error).to.be.an.error('\"value\" must be of type object');\n        expect(() => custom.attempt({ a: '{\"c\":\"string\"}' }, custom.object({ a: custom.object({ b: custom.string() }) }))).to.throw(/\\\"a.c\\\" is not allowed/);\n\n        const err1 = custom.object().validate('a string').error;\n        expect(err1).to.be.an.error('\"value\" must be of type object');\n        expect(err1.details).to.equal([{\n            message: '\"value\" must be of type object',\n            path: [],\n            type: 'object.base',\n            context: { label: 'value', value: 'a string', type: 'object' }\n        }]);\n\n        const err2 = custom.object({ a: custom.object({ b: custom.object({ c: { d: custom.string() } }) }) }).validate({ a: '{\"b\":{\"c\":{\"d\":1}}}' }, { abortEarly: false }).error;\n        expect(err2).to.be.an.error('\"a.b.c.d\" must be a string');\n        expect(err2.details).to.equal([{\n            message: '\"a.b.c.d\" must be a string',\n            path: ['a', 'b', 'c', 'd'],\n            type: 'string.base',\n            context: { value: 1, label: 'a.b.c.d', key: 'd' }\n        }]);\n\n        expect(err2.annotate(true)).to.equal('{\\n  \"a\" [1]: \"{\\\\\"b\\\\\":{\\\\\"c\\\\\":{\\\\\"d\\\\\":1}}}\"\\n}\\n\\n[1] \"a.b.c.d\" must be a string');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends array to support string coerce","suites":["extension"],"updatePoint":{"line":1564,"column":46},"line":1564,"code":"    it('extends array to support string coerce', () => {\n\n        const custom = Joi.extend({\n            type: 'array',\n            base: Joi.array(),\n            coerce: {\n                from: 'string',\n                method(value, helpers) {\n\n                    if (typeof value !== 'string' ||\n                        value[0] !== '[' && !/^\\s*\\[/.test(value)) {\n\n                        return;\n                    }\n\n                    try {\n                        return { value: Bourne.parse(value) };\n                    }\n                    catch (ignoreErr) { }\n                }\n            }\n        });\n\n        expect(custom.array().validate('[1,2,3]')).to.equal({ value: [1, 2, 3] });\n        expect(custom.array().validate(' \\n\\r\\t[ \\n\\r\\t1 \\n\\r\\t, \\n\\r\\t2,3] \\n\\r\\t')).to.equal({ value: [1, 2, 3] });\n        expect(custom.object({ a: custom.array() }).validate({ a: '[1,2]' }).error).to.not.exist();\n\n        const err1 = custom.array().validate('{ \"something\": false }').error;\n        expect(err1).to.be.an.error('\"value\" must be an array');\n        expect(err1.details).to.equal([{\n            message: '\"value\" must be an array',\n            path: [],\n            type: 'array.base',\n            context: { label: 'value', value: '{ \"something\": false }' }\n        }]);\n\n        const err2 = custom.array().validate(' \\n\\r\\t[ \\n\\r\\t1 \\n\\r\\t, \\n\\r\\t2,3 \\n\\r\\t').error;\n        expect(err2).to.be.an.error('\"value\" must be an array');\n        expect(err2.details).to.equal([{\n            message: '\"value\" must be an array',\n            path: [],\n            type: 'array.base',\n            context: { label: 'value', value: ' \\n\\r\\t[ \\n\\r\\t1 \\n\\r\\t, \\n\\r\\t2,3 \\n\\r\\t' }\n        }]);\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"extends with a cast","suites":["extension"],"updatePoint":{"line":1610,"column":27},"line":1610,"code":"    it('extends with a cast', () => {\n\n        const custom = Joi.extend({\n            type: 'special',\n            base: Joi.string(),\n            cast: {\n                object: {\n                    from: (value) => !!value,\n                    to: (value) => ({ value })\n                }\n            }\n        });\n\n        const special = custom.special().cast('object');\n        expect(special.type).to.equal('special');\n        expect(special.validate('abc').value).to.equal({ value: 'abc' });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"retains base overrides","suites":["extension"],"updatePoint":{"line":1628,"column":30},"line":1628,"code":"    it('retains base overrides', () => {\n\n        const custom = Joi.extend({\n            type: 'test',\n            base: Joi.object(),\n            overrides: {\n                label(...args) {\n\n                    this.$_parent('label', ...args);\n                }\n            }\n        });\n\n        const schema = custom.test({\n            a: custom.number().default(1)\n        })\n            .default();\n\n        expect(schema.validate({}).value).to.equal({ a: 1 });\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"errors on non-type override","suites":["extension"],"updatePoint":{"line":1649,"column":35},"line":1649,"code":"    it('errors on non-type override', () => {\n\n        expect(() => Joi.extend({ type: 'x' })).to.throw('Cannot override name x');\n    });","file":"extend.js","skipped":false,"dir":"test"},{"name":"keeps schema immutable","suites":["Joi"],"updatePoint":{"line":19,"column":30},"line":19,"code":"    it('keeps schema immutable', () => {\n\n        const a = Joi.string();\n        const b = a.valid('b');\n\n        Helper.validate(a, [\n            ['a', true],\n            ['b', true],\n            [5, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 5, label: 'value' }\n            }]\n        ]);\n\n        Helper.validate(b, [\n            ['a', false, {\n                message: '\"value\" must be [b]',\n                path: [],\n                type: 'any.only',\n                context: { value: 'a', valids: ['b'], label: 'value' }\n            }],\n            ['b', true],\n            [5, false, {\n                message: '\"value\" must be [b]',\n                path: [],\n                type: 'any.only',\n                context: { value: 5, valids: ['b'], label: 'value' }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates a compiled complex literal","suites":["Joi"],"updatePoint":{"line":52,"column":44},"line":52,"code":"    it('validates a compiled complex literal', () => {\n\n        const schema = Joi.compile(['key', 5, { a: true, b: [/^a/, 'boom'] }]);\n        Helper.validate(schema, [\n            ['key', true],\n            [5, true],\n            ['other', false, {\n                message: '\"value\" must be one of [key, 5, object]',\n                path: [],\n                type: 'alternatives.types',\n                context: {\n                    label: 'value',\n                    types: ['key', 5, 'object'],\n                    value: 'other'\n                }\n            }],\n            [6, false, {\n                message: '\"value\" must be one of [key, 5, object]',\n                path: [],\n                type: 'alternatives.types',\n                context: {\n                    label: 'value',\n                    types: ['key', 5, 'object'],\n                    value: 6\n                }\n            }],\n            [{ c: 5 }, false, {\n                message: '\"c\" is not allowed',\n                path: ['c'],\n                type: 'object.unknown',\n                context: { child: 'c', label: 'c', key: 'c', value: 5 }\n            }],\n            [{}, true],\n            [{ b: 'abc' }, true],\n            [{ a: true, b: 'boom' }, true],\n            [{ a: 5, b: 'a' }, false, {\n                message: '\"a\" must be [true]',\n                path: ['a'],\n                type: 'any.only',\n                context: { label: 'a', key: 'a', value: 5, valids: [true] }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates regex directly","suites":["Joi"],"updatePoint":{"line":96,"column":32},"line":96,"code":"    it('validates regex directly', () => {\n\n        Helper.validate(Joi.compile(/^5$/), [['5', true]]);\n        Helper.validate(Joi.compile(/.{2}/), [['6', false, {\n            message: '\"value\" with value \"6\" fails to match the required pattern: /.{2}/',\n            path: [],\n            type: 'string.pattern.base',\n            context: {\n                name: undefined,\n                regex: /.{2}/,\n                value: '6',\n                label: 'value'\n            }\n        }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates an array of valid types","suites":["Joi"],"updatePoint":{"line":112,"column":41},"line":112,"code":"    it('validates an array of valid types', () => {\n\n        const schema = Joi.object({\n            auth: [\n                Joi.object({\n                    mode: Joi.string().valid('required', 'optional', 'try').allow(null)\n                }).allow(null),\n                Joi.string(),\n                Joi.boolean()\n            ]\n        });\n\n        Helper.validate(schema, [\n            [{ auth: { mode: 'none' } }, false, '\"auth.mode\" must be one of [required, optional, try, null]'],\n            [{ auth: { mode: 'try' } }, true],\n            [{ something: undefined }, false, {\n                message: '\"something\" is not allowed',\n                path: ['something'],\n                type: 'object.unknown',\n                context: { child: 'something', label: 'something', key: 'something' }\n            }],\n            [{ auth: { something: undefined } }, false, {\n                message: '\"auth.something\" is not allowed',\n                path: ['auth', 'something'],\n                type: 'object.unknown',\n                context: { child: 'something', label: 'auth.something', key: 'something' }\n            }],\n            [{ auth: null }, true],\n            [{ auth: undefined }, true],\n            [{}, true],\n            [{ auth: true }, true],\n            [{ auth: 123 }, false, {\n                message: '\"auth\" must be one of [object, string, boolean]',\n                path: ['auth'],\n                type: 'alternatives.types',\n                context: { types: ['object', 'string', 'boolean'], label: 'auth', key: 'auth', value: 123 }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates alternatives","suites":["Joi"],"updatePoint":{"line":152,"column":30},"line":152,"code":"    it('validates alternatives', () => {\n\n        const schema = Joi.object({\n            auth: Joi.alternatives([\n                Joi.object({\n                    mode: Joi.string().valid('required', 'optional', 'try').allow(null)\n                }).allow(null),\n                Joi.string(),\n                Joi.boolean()\n            ])\n        });\n\n        const err = schema.validate({ auth: { mode: 'none' } }).error;\n        expect(err).to.be.an.error('\"auth.mode\" must be one of [required, optional, try, null]');\n\n        Helper.validate(schema, [\n            [{ auth: { mode: 'try' } }, true],\n            [{ something: undefined }, false, {\n                message: '\"something\" is not allowed',\n                path: ['something'],\n                type: 'object.unknown',\n                context: { child: 'something', label: 'something', key: 'something' }\n            }],\n            [{ auth: { something: undefined } }, false, {\n                message: '\"auth.something\" is not allowed',\n                path: ['auth', 'something'],\n                type: 'object.unknown',\n                context: { child: 'something', label: 'auth.something', key: 'something' }\n            }],\n            [{ auth: null }, true],\n            [{ auth: undefined }, true],\n            [{}, true],\n            [{ auth: true }, true],\n            [{ auth: 123 }, false, {\n                message: '\"auth\" must be one of [object, string, boolean]',\n                path: ['auth'],\n                type: 'alternatives.types',\n                context: { types: ['object', 'string', 'boolean'], label: 'auth', key: 'auth', value: 123 }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates required alternatives","suites":["Joi"],"updatePoint":{"line":194,"column":39},"line":194,"code":"    it('validates required alternatives', () => {\n\n        const schema = Joi.object({\n            a: Joi.alternatives([\n                Joi.string().required(),\n                Joi.boolean().required()\n            ])\n        });\n\n        Helper.validate(schema, [\n            [{ a: null }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: null }\n            }],\n            [{ a: undefined }, true],\n            [{}, true],\n            [{ a: true }, true],\n            [{ a: 'true' }, true],\n            [{ a: 123 }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: 123 }\n            }],\n            [{ a: { c: 1 } }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: { c: 1 } }\n            }],\n            [{ b: undefined }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b' }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates required [] alternatives","suites":["Joi"],"updatePoint":{"line":235,"column":42},"line":235,"code":"    it('validates required [] alternatives', () => {\n\n        const schema = Joi.object({\n            a: [\n                Joi.string().required(),\n                Joi.boolean().required()\n            ]\n        });\n\n        Helper.validate(schema, [\n            [{ a: null }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: null }\n            }],\n            [{ a: undefined }, true],\n            [{}, true],\n            [{ a: true }, true],\n            [{ a: 'true' }, true],\n            [{ a: 123 }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: 123 }\n            }],\n            [{ a: { c: 1 } }, false, {\n                message: '\"a\" must be one of [string, boolean]',\n                path: ['a'],\n                type: 'alternatives.types',\n                context: { types: ['string', 'boolean'], label: 'a', key: 'a', value: { c: 1 } }\n            }],\n            [{ b: undefined }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b' }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates an array of string with valid","suites":["Joi"],"updatePoint":{"line":276,"column":47},"line":276,"code":"    it('validates an array of string with valid', () => {\n\n        const schema = Joi.object({\n            brand: Joi.array().items(Joi.string().valid('amex', 'visa'))\n        });\n\n        Helper.validate(schema, [\n            [{ brand: ['amex'] }, true],\n            [{ brand: ['visa', 'mc'] }, false, {\n                message: '\"brand[1]\" must be one of [amex, visa]',\n                path: ['brand', 1],\n                type: 'any.only',\n                context: { value: 'mc', valids: ['amex', 'visa'], label: 'brand[1]', key: 1 }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates pre and post convert value","suites":["Joi"],"updatePoint":{"line":293,"column":44},"line":293,"code":"    it('validates pre and post convert value', () => {\n\n        const schema = Joi.number().valid(5);\n\n        Helper.validate(schema, [\n            [5, true],\n            ['5', true, 5]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"does not change object when validation fails","suites":["Joi"],"updatePoint":{"line":303,"column":52},"line":303,"code":"    it('does not change object when validation fails', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().valid(2)\n        });\n\n        const obj = {\n            a: '5'\n        };\n\n        const { error, value } = schema.validate(obj);\n        expect(error).to.exist();\n        expect(value.a).to.equal('5');\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"does not set optional keys when missing","suites":["Joi"],"updatePoint":{"line":318,"column":47},"line":318,"code":"    it('does not set optional keys when missing', () => {\n\n        const schema = Joi.object({\n            a: Joi.number()\n        });\n\n        const obj = {};\n\n        const value = schema.validate(obj).value;\n        expect(value.hasOwnProperty('a')).to.equal(false);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"invalidates pre and post convert value","suites":["Joi"],"updatePoint":{"line":330,"column":46},"line":330,"code":"    it('invalidates pre and post convert value', () => {\n\n        const schema = Joi.number().invalid(5);\n\n        Helper.validate(schema, [\n            [5, false, {\n                message: '\"value\" contains an invalid value',\n                path: [],\n                type: 'any.invalid',\n                context: { value: 5, invalids: [5], label: 'value' }\n            }],\n            ['5', false, {\n                message: '\"value\" contains an invalid value',\n                path: [],\n                type: 'any.invalid',\n                context: { value: 5, invalids: [5], label: 'value' }\n            }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"invalidates missing peers","suites":["Joi"],"updatePoint":{"line":350,"column":33},"line":350,"code":"    it('invalidates missing peers', () => {\n\n        const schema = Joi.object({\n            username: Joi.string(),\n            password: Joi.string()\n        }).with('username', 'password').without('password', 'access_token');\n\n        Helper.validate(schema, [[{ username: 'bob' }, false, '\"username\" missing required peer \"password\"']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates config where the root item is a joi type","suites":["Joi"],"updatePoint":{"line":360,"column":58},"line":360,"code":"    it('validates config where the root item is a joi type', () => {\n\n        Helper.validate(Joi.boolean().allow(null), [[true, true]]);\n        Helper.validate(Joi.object(), [[{ auth: { mode: 'try' } }, true]]);\n        Helper.validate(Joi.object(), [[true, false, '\"value\" must be of type object']]);\n        Helper.validate(Joi.string(), [[true, false, '\"value\" must be a string']]);\n        Helper.validate(Joi.string().email(), [['test@test.com', true]]);\n        Helper.validate(Joi.object({ param: Joi.string().required() }), [[{ param: 'item' }, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"converts string to number","suites":["Joi"],"updatePoint":{"line":370,"column":33},"line":370,"code":"    it('converts string to number', () => {\n\n        const schema = Joi.object({\n            a: Joi.number()\n        });\n\n        const input = { a: '5' };\n        Helper.validate(schema, [[input, true, { a: 5 }]]);\n        expect(input.a).to.equal('5');\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"allows unknown keys in objects if no schema was given","suites":["Joi"],"updatePoint":{"line":381,"column":61},"line":381,"code":"    it('allows unknown keys in objects if no schema was given', () => {\n\n        Helper.validate(Joi.object(), [[{ foo: 'bar' }, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails on unknown keys in objects if a schema was given","suites":["Joi"],"updatePoint":{"line":386,"column":62},"line":386,"code":"    it('fails on unknown keys in objects if a schema was given', () => {\n\n        Helper.validate(Joi.object({}), [[{ foo: 'bar' }, false, {\n            message: '\"foo\" is not allowed',\n            path: ['foo'],\n            type: 'object.unknown',\n            context: { child: 'foo', label: 'foo', key: 'foo', value: 'bar' }\n        }]]);\n\n        Helper.validate(Joi.compile({}), [[{ foo: 'bar' }, false, '\"foo\" is not allowed']]);\n\n        Helper.validate(Joi.compile({ other: Joi.number() }), [[{ foo: 'bar' }, false, '\"foo\" is not allowed']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates required key with multiple options","suites":["Joi"],"updatePoint":{"line":400,"column":52},"line":400,"code":"    it('validates required key with multiple options', () => {\n\n        const config = {\n            module: Joi.alternatives([\n                Joi.object({\n                    compile: Joi.function().required(),\n                    execute: Joi.function()\n                }),\n                Joi.string()\n            ]).required()\n        };\n\n        Helper.validate(Joi.compile(config), [\n            [{}, false, '\"module\" is required'],\n            [{ module: 'test' }, true],\n            [{ module: {} }, false, '\"module.compile\" is required'],\n            [{ module: { compile() { } } }, true]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates key with required alternatives","suites":["Joi"],"updatePoint":{"line":420,"column":48},"line":420,"code":"    it('validates key with required alternatives', () => {\n\n        const config = {\n            module: Joi.alt().try(\n                Joi.object({\n                    compile: Joi.function().required(),\n                    execute: Joi.function()\n                }).required(),\n                Joi.string().required()\n            )\n        };\n\n        expect(Joi.compile(config).validate({}).error).to.not.exist();\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates required key with alternatives","suites":["Joi"],"updatePoint":{"line":435,"column":48},"line":435,"code":"    it('validates required key with alternatives', () => {\n\n        const config = {\n            module: Joi.alt().try(\n                Joi.object({\n                    compile: Joi.function().required(),\n                    execute: Joi.function()\n                }),\n                Joi.string()\n            ).required()\n        };\n\n        Helper.validate(Joi.compile(config), [[{}, false, '\"module\" is required']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates object successfully when config has an array of types","suites":["Joi"],"updatePoint":{"line":450,"column":71},"line":450,"code":"    it('validates object successfully when config has an array of types', () => {\n\n        const schema = {\n            f: [Joi.number(), Joi.boolean()],\n            g: [Joi.string(), Joi.object()]\n        };\n\n        const obj = {\n            f: true,\n            g: 'test'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates object successfully when config allows for optional key and key is missing","suites":["Joi"],"updatePoint":{"line":465,"column":92},"line":465,"code":"    it('validates object successfully when config allows for optional key and key is missing', () => {\n\n        const schema = {\n            h: Joi.number(),\n            i: Joi.string(),\n            j: Joi.object()\n        };\n\n        const obj = {\n            h: 12,\n            i: 'test'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation","suites":["Joi"],"updatePoint":{"line":481,"column":24},"line":481,"code":"    it('fails validation', () => {\n\n        const schema = {\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        };\n\n        const obj = {\n            a: 10,\n            b: 'a',\n            c: 'joe@example.com'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, false, '\"a\" must be less than or equal to 3']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when the wrong types are supplied","suites":["Joi"],"updatePoint":{"line":498,"column":58},"line":498,"code":"    it('fails validation when the wrong types are supplied', () => {\n\n        const schema = {\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        };\n\n        const obj = {\n            a: 'a',\n            b: 'a',\n            c: 'joe@example.com'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, false, '\"a\" must be a number']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when missing a required parameter","suites":["Joi"],"updatePoint":{"line":515,"column":58},"line":515,"code":"    it('fails validation when missing a required parameter', () => {\n\n        const obj = {\n            c: 10\n        };\n\n        Helper.validate(Joi.compile({ a: Joi.string().required() }), [[obj, false, '\"a\" is required']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when missing a required parameter within an object config","suites":["Joi"],"updatePoint":{"line":524,"column":82},"line":524,"code":"    it('fails validation when missing a required parameter within an object config', () => {\n\n        const obj = {\n            a: {}\n        };\n\n        Helper.validate(Joi.compile({ a: Joi.object({ b: Joi.string().required() }) }), [[obj, false, '\"a.b\" is required']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when parameter is required to be an Array but is given as string","suites":["Joi"],"updatePoint":{"line":533,"column":89},"line":533,"code":"    it('fails validation when parameter is required to be an Array but is given as string', () => {\n\n        const obj = {\n            a: 'an array'\n        };\n\n        Helper.validate(Joi.object({ a: Joi.array() }), [[obj, false, '\"a\" must be an array']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when parameter is required to be an Array but is given as a json that is incorrect (object instead of array)","suites":["Joi"],"updatePoint":{"line":542,"column":133},"line":542,"code":"    it('fails validation when parameter is required to be an Array but is given as a json that is incorrect (object instead of array)', () => {\n\n        const obj = {\n            a: '{\"b\":2}'\n        };\n\n        Helper.validate(Joi.object({ a: Joi.object({ b: Joi.string().required() }) }), [[obj, false, '\"a\" must be of type object']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when config is an array and fails","suites":["Joi"],"updatePoint":{"line":551,"column":58},"line":551,"code":"    it('fails validation when config is an array and fails', () => {\n\n        const schema = {\n            d: [Joi.string(), Joi.boolean()],\n            e: [Joi.number(), Joi.object()]\n        };\n\n        const obj = {\n            d: 10,\n            e: 'a'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, false, '\"d\" must be one of [string, boolean]']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation when config is an array and fails with extra keys","suites":["Joi"],"updatePoint":{"line":566,"column":74},"line":566,"code":"    it('fails validation when config is an array and fails with extra keys', () => {\n\n        const schema = {\n            d: [Joi.string(), Joi.boolean()],\n            e: [Joi.number(), Joi.object()]\n        };\n\n        const obj = {\n            a: 10,\n            b: 'a'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, false, '\"a\" is not allowed']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails validation with extra keys","suites":["Joi"],"updatePoint":{"line":581,"column":40},"line":581,"code":"    it('fails validation with extra keys', () => {\n\n        const schema = {\n            a: Joi.number()\n        };\n\n        const obj = {\n            a: 1,\n            b: 'a'\n        };\n\n        Helper.validate(Joi.compile(schema), [[obj, false, '\"b\" is not allowed']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates missing optional key with string condition","suites":["Joi"],"updatePoint":{"line":595,"column":60},"line":595,"code":"    it('validates missing optional key with string condition', () => {\n\n        const schema = {\n            key: Joi.string().alphanum(false).min(8)\n        };\n\n        Helper.validate(Joi.compile(schema), [[{}, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates with extra keys and remove them when stripUnknown is set","suites":["Joi"],"updatePoint":{"line":604,"column":74},"line":604,"code":"    it('validates with extra keys and remove them when stripUnknown is set', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(schema, { stripUnknown: true, allowUnknown: true }, [[obj, true, { a: 1, b: 'a' }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates with extra keys and remove them when stripUnknown (as an object) is set","suites":["Joi"],"updatePoint":{"line":621,"column":89},"line":621,"code":"    it('validates with extra keys and remove them when stripUnknown (as an object) is set', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(schema, { stripUnknown: { arrays: false, objects: true }, allowUnknown: true }, [[obj, true, { a: 1, b: 'a' }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates dependencies when stripUnknown is set","suites":["Joi"],"updatePoint":{"line":638,"column":55},"line":638,"code":"    it('validates dependencies when stripUnknown is set', () => {\n\n        const schema = Joi.object({\n            a: Joi.number(),\n            b: Joi.string()\n        }).and('a', 'b');\n\n        const obj = {\n            a: 1,\n            foo: 'bar'\n        };\n\n        Helper.validate(schema, { stripUnknown: true }, [[obj, false, {\n            message: '\"value\" contains [a] without its required peers [b]',\n            path: [],\n            type: 'object.and',\n            context: {\n                present: ['a'],\n                presentWithLabels: ['a'],\n                missing: ['b'],\n                missingWithLabels: ['b'],\n                label: 'value',\n                value: { a: 1 }\n            }\n        }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates dependencies when stripUnknown (as an object) is set","suites":["Joi"],"updatePoint":{"line":665,"column":70},"line":665,"code":"    it('validates dependencies when stripUnknown (as an object) is set', () => {\n\n        const schema = Joi.object({\n            a: Joi.number(),\n            b: Joi.string()\n        })\n            .and('a', 'b');\n\n        const obj = {\n            a: 1,\n            foo: 'bar'\n        };\n\n        Helper.validate(schema, { stripUnknown: { arrays: false, objects: true } }, [[obj, false, {\n            message: '\"value\" contains [a] without its required peers [b]',\n            path: [],\n            type: 'object.and',\n            context: {\n                present: ['a'],\n                presentWithLabels: ['a'],\n                missing: ['b'],\n                missingWithLabels: ['b'],\n                label: 'value',\n                value: { a: 1 }\n            }\n        }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails to validate with incorrect property when asked to strip unknown keys without aborting early","suites":["Joi"],"updatePoint":{"line":693,"column":105},"line":693,"code":"    it('fails to validate with incorrect property when asked to strip unknown keys without aborting early', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        });\n\n        const obj = {\n            a: 1,\n            b: 'f',\n            d: 'c'\n        };\n\n        Helper.validate(schema, { stripUnknown: true, abortEarly: false }, [[obj, false, '\"b\" must be one of [a, b, c]']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"fails to validate with incorrect property when asked to strip unknown keys (as an object) without aborting early","suites":["Joi"],"updatePoint":{"line":710,"column":120},"line":710,"code":"    it('fails to validate with incorrect property when asked to strip unknown keys (as an object) without aborting early', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        });\n\n        const obj = {\n            a: 1,\n            b: 'f',\n            d: 'c'\n        };\n\n        Helper.validate(schema, { stripUnknown: { arrays: false, objects: true }, abortEarly: false }, [[obj, false, '\"b\" must be one of [a, b, c]']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should pass validation with extra keys when allowUnknown is set","suites":["Joi"],"updatePoint":{"line":727,"column":71},"line":727,"code":"    it('should pass validation with extra keys when allowUnknown is set', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(schema, { allowUnknown: true }, [[obj, true, { a: 1, b: 'a', d: 'c' }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should pass validation with extra keys set","suites":["Joi"],"updatePoint":{"line":744,"column":50},"line":744,"code":"    it('should pass validation with extra keys set', () => {\n\n        const localConfig = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c')\n        }).prefs({ allowUnknown: true });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(localConfig, [[obj, true, { a: 1, b: 'a', d: 'c' }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should pass validation with extra keys and remove them when stripUnknown is set locally","suites":["Joi"],"updatePoint":{"line":760,"column":95},"line":760,"code":"    it('should pass validation with extra keys and remove them when stripUnknown is set locally', () => {\n\n        const localConfig = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c')\n        }).prefs({ stripUnknown: true, allowUnknown: true });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(localConfig, [\n            [obj, true, { a: 1, b: 'a' }],\n            [{ a: 1, b: 'a' }, true, { a: 1, b: 'a' }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should pass validation with extra keys and remove them when stripUnknown (as an object) is set locally","suites":["Joi"],"updatePoint":{"line":779,"column":110},"line":779,"code":"    it('should pass validation with extra keys and remove them when stripUnknown (as an object) is set locally', () => {\n\n        const localConfig = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c')\n        }).prefs({ stripUnknown: { arrays: false, objects: true }, allowUnknown: true });\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            d: 'c'\n        };\n\n        Helper.validate(localConfig, [\n            [obj, true, { a: 1, b: 'a' }],\n            [{ a: 1, b: 'a' }, true, { a: 1, b: 'a' }]\n        ]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should work when the skipFunctions setting is enabled","suites":["Joi"],"updatePoint":{"line":798,"column":61},"line":798,"code":"    it('should work when the skipFunctions setting is enabled', () => {\n\n        const schema = Joi.object({ username: Joi.string() }).prefs({ skipFunctions: true });\n        const input = { username: 'test', func() { } };\n        Helper.validate(schema, [[input, true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should work when the skipFunctions setting is disabled","suites":["Joi"],"updatePoint":{"line":805,"column":62},"line":805,"code":"    it('should work when the skipFunctions setting is disabled', () => {\n\n        const schema = Joi.object({ username: Joi.string() });\n        const input = { username: 'test', func() { } };\n\n        Helper.validate(schema, { skipFunctions: false }, [[input, false, '\"func\" is not allowed']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"should not convert values when convert is false","suites":["Joi"],"updatePoint":{"line":813,"column":55},"line":813,"code":"    it('should not convert values when convert is false', () => {\n\n        const schema = Joi.object({\n            arr: Joi.array().items(Joi.string())\n        });\n\n        const input = { arr: 'foo' };\n        Helper.validate(schema, { convert: false }, [[input, false, '\"arr\" must be an array']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"full errors when abortEarly is false","suites":["Joi"],"updatePoint":{"line":823,"column":44},"line":823,"code":"    it('full errors when abortEarly is false', () => {\n\n        const schema = Joi.object({\n            a: Joi.string(),\n            b: Joi.string()\n        });\n\n        const input = { a: 1, b: 2 };\n\n        const errOne = schema.validate(input).error;\n        const errFull = schema.validate(input, { abortEarly: false }).error;\n        expect(errFull.details.length).to.be.greaterThan(errOne.details.length);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"errors multiple times when abortEarly is false in a complex object","suites":["Joi"],"updatePoint":{"line":837,"column":74},"line":837,"code":"    it('errors multiple times when abortEarly is false in a complex object', () => {\n\n        const schema = Joi.object({\n            test: Joi.array().items(Joi.object().keys({\n                foo: Joi.string().required().max(3),\n                bar: Joi.string().max(5)\n            })),\n            test2: Joi.object({\n                test3: Joi.array().items(Joi.object().keys({\n                    foo: Joi.string().required().max(3),\n                    bar: Joi.string().max(5),\n                    baz: Joi.object({\n                        test4: Joi.array().items(Joi.object().keys({\n                            foo: Joi.string().required().max(3),\n                            bar: Joi.string().max(5)\n                        }))\n                    })\n                }))\n            })\n        });\n\n        const input = {\n            test: [{\n                foo: 'test1',\n                bar: 'testfailed'\n            }],\n            test2: {\n                test3: [{\n                    foo: '123'\n                }, {\n                    foo: 'test1',\n                    bar: 'testfailed'\n                }, {\n                    foo: '123',\n                    baz: {\n                        test4: [{\n                            foo: 'test1',\n                            baz: '123'\n                        }]\n                    }\n                }]\n            }\n        };\n\n        Helper.validate(schema, { abortEarly: false }, [[input, false, {\n            message: '\"test[0].foo\" length must be less than or equal to 3 characters long. \"test[0].bar\" length must be less than or equal to 5 characters long. \"test2.test3[1].foo\" length must be less than or equal to 3 characters long. \"test2.test3[1].bar\" length must be less than or equal to 5 characters long. \"test2.test3[2].baz.test4[0].foo\" length must be less than or equal to 3 characters long. \"test2.test3[2].baz.test4[0].baz\" is not allowed',\n            details: [{\n                message: '\"test[0].foo\" length must be less than or equal to 3 characters long',\n                path: ['test', 0, 'foo'],\n                type: 'string.max',\n                context: { limit: 3, value: 'test1', key: 'foo', label: 'test[0].foo', encoding: undefined }\n            }, {\n                message: '\"test[0].bar\" length must be less than or equal to 5 characters long',\n                path: ['test', 0, 'bar'],\n                type: 'string.max',\n                context: { limit: 5, value: 'testfailed', key: 'bar', label: 'test[0].bar', encoding: undefined }\n            }, {\n                message: '\"test2.test3[1].foo\" length must be less than or equal to 3 characters long',\n                path: ['test2', 'test3', 1, 'foo'],\n                type: 'string.max',\n                context: { limit: 3, value: 'test1', key: 'foo', label: 'test2.test3[1].foo', encoding: undefined }\n            }, {\n                message: '\"test2.test3[1].bar\" length must be less than or equal to 5 characters long',\n                path: ['test2', 'test3', 1, 'bar'],\n                type: 'string.max',\n                context: { limit: 5, value: 'testfailed', key: 'bar', label: 'test2.test3[1].bar', encoding: undefined }\n            }, {\n                message: '\"test2.test3[2].baz.test4[0].foo\" length must be less than or equal to 3 characters long',\n                path: ['test2', 'test3', 2, 'baz', 'test4', 0, 'foo'],\n                type: 'string.max',\n                context: {\n                    limit: 3,\n                    value: 'test1',\n                    key: 'foo',\n                    label: 'test2.test3[2].baz.test4[0].foo',\n                    encoding: undefined\n                }\n            }, {\n                message: '\"test2.test3[2].baz.test4[0].baz\" is not allowed',\n                path: ['test2', 'test3', 2, 'baz', 'test4', 0, 'baz'],\n                type: 'object.unknown',\n                context: { key: 'baz', label: 'test2.test3[2].baz.test4[0].baz', child: 'baz', value: '123' }\n            }]\n        }]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"accepts no options","suites":["Joi"],"updatePoint":{"line":923,"column":26},"line":923,"code":"    it('accepts no options', () => {\n\n        Helper.validate(Joi.string(), [['test', true]]);\n        Helper.validate(Joi.number(), { convert: false }, [['5', false, '\"value\" must be a number']]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"accepts null options","suites":["Joi"],"updatePoint":{"line":929,"column":28},"line":929,"code":"    it('accepts null options', () => {\n\n        Helper.validate(Joi.string(), null, [['test', true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"accepts undefined options","suites":["Joi"],"updatePoint":{"line":934,"column":33},"line":934,"code":"    it('accepts undefined options', () => {\n\n        Helper.validate(Joi.string(), undefined, [['test', true]]);\n    });","file":"index.js","skipped":false,"dir":"test"},{"name":"respects abortEarly option","suites":["Joi","assert()"],"updatePoint":{"line":941,"column":38},"line":941,"code":"        it('respects abortEarly option', () => {\n\n            try {\n                Joi.assert({}, Joi.object().keys({ a: Joi.required(), b: Joi.required() }), { abortEarly: false });\n                throw new Error('should not reach that');\n            }\n            catch (err) {\n                expect(err.details.length).to.equal(2);\n            }\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws on invalid value","suites":["Joi","attempt()"],"updatePoint":{"line":955,"column":35},"line":955,"code":"        it('throws on invalid value', () => {\n\n            expect(() => {\n\n                Joi.attempt('x', Joi.number());\n            }).to.throw('\"value\" must be a number');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws a ValidationError on invalid value","suites":["Joi","attempt()"],"updatePoint":{"line":963,"column":53},"line":963,"code":"        it('throws a ValidationError on invalid value', () => {\n\n            expect(() => {\n\n                Joi.attempt('x', Joi.number());\n            }).to.throw(Joi.ValidationError);\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"does not throw on valid value","suites":["Joi","attempt()"],"updatePoint":{"line":971,"column":41},"line":971,"code":"        it('does not throw on valid value', () => {\n\n            expect(() => {\n\n                Joi.attempt('4', Joi.number());\n            }).to.not.throw();\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"returns validated structure","suites":["Joi","attempt()"],"updatePoint":{"line":979,"column":39},"line":979,"code":"        it('returns validated structure', () => {\n\n            let valid;\n            expect(() => {\n\n                valid = Joi.attempt('4', Joi.number());\n            }).to.not.throw();\n            expect(valid).to.equal(4);\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws on invalid value with message","suites":["Joi","attempt()"],"updatePoint":{"line":989,"column":48},"line":989,"code":"        it('throws on invalid value with message', () => {\n\n            expect(() => {\n\n                Joi.attempt('x', Joi.number(), 'the reason is');\n            }).to.throw('the reason is \"value\" must be a number');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws on invalid value with message and abortEarly: false","suites":["Joi","attempt()"],"updatePoint":{"line":997,"column":70},"line":997,"code":"        it('throws on invalid value with message and abortEarly: false', () => {\n\n            const schema = Joi.object({ a: Joi.required(), b: Joi.required() });\n            expect(() => Joi.attempt({}, schema, 'the reasons are', { abortEarly: false })).to.throw('the reasons are \"a\" is required. \"b\" is required');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws on invalid value with message as error even with abortEarly: false","suites":["Joi","attempt()"],"updatePoint":{"line":1003,"column":85},"line":1003,"code":"        it('throws on invalid value with message as error even with abortEarly: false', () => {\n\n            expect(() => {\n\n                Joi.attempt({}, Joi.object().keys({ a: Joi.required(), b: Joi.required() }), new Error('invalid value'), { abortEarly: false });\n            }).to.throw('invalid value');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws a custom error from the schema if provided","suites":["Joi","attempt()"],"updatePoint":{"line":1011,"column":61},"line":1011,"code":"        it('throws a custom error from the schema if provided', () => {\n\n            expect(() => Joi.attempt('x', Joi.number().error(new Error('Oh noes !')))).to.throw('Oh noes !');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws an error with combined messages","suites":["Joi","attempt()"],"updatePoint":{"line":1016,"column":50},"line":1016,"code":"        it('throws an error with combined messages', () => {\n\n            const schema = Joi.number().error(new Error('Oh noes !'));\n            expect(() => Joi.attempt('x', schema, 'invalid value')).to.throw('invalid value Oh noes !');\n            expect(() => Joi.attempt('x', schema, 'invalid value')).to.throw('invalid value Oh noes !');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"validates preferences","suites":["Joi","checkPreferences()"],"updatePoint":{"line":1026,"column":33},"line":1026,"code":"        it('validates preferences', () => {\n\n            expect(() => Joi.checkPreferences({ abortEarly: false })).to.not.throw();\n            expect(() => Joi.checkPreferences({ x: 1 })).to.throw();\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"throws an error on invalid value","suites":["Joi","compile()"],"updatePoint":{"line":1035,"column":44},"line":1035,"code":"        it('throws an error on invalid value', () => {\n\n            expect(() => {\n\n                Joi.compile(undefined);\n            }).to.throw('Invalid undefined schema');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"shows path to errors in object","suites":["Joi","compile()"],"updatePoint":{"line":1043,"column":42},"line":1043,"code":"        it('shows path to errors in object', () => {\n\n            const schema = {\n                a: {\n                    b: {\n                        c: {\n                            d: undefined\n                        }\n                    }\n                }\n            };\n\n            expect(() => {\n\n                Joi.compile(schema);\n            }).to.throw(Error, 'Invalid undefined schema (a.b.c.d)');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"applies defaults to root","suites":["Joi","defaults()"],"updatePoint":{"line":1064,"column":36},"line":1064,"code":"        it('applies defaults to root', () => {\n\n            const custom = Joi.defaults((schema) => schema.required().description('defaulted'));\n            const schema = custom.optional();\n            expect(schema.describe()).to.equal({\n                type: 'any',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'optional'\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"applies defaults to standard types","suites":["Joi","defaults()"],"updatePoint":{"line":1077,"column":46},"line":1077,"code":"        it('applies defaults to standard types', () => {\n\n            const custom = Joi.defaults((schema) => schema.required().description('defaulted'));\n            const schema = custom.string();\n            expect(schema.describe()).to.equal({\n                type: 'string',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required'\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"applies defaults to types with arguments","suites":["Joi","defaults()"],"updatePoint":{"line":1090,"column":52},"line":1090,"code":"        it('applies defaults to types with arguments', () => {\n\n            const custom = Joi.defaults((schema) => schema.required().description('defaulted'));\n            const schema = custom.object({ foo: 'bar' });\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required'\n                },\n                keys: {\n                    foo: {\n                        type: 'any',\n                        flags: {\n                            description: 'defaulted',\n                            presence: 'required',\n                            only: true\n                        },\n                        allow: [{ override: true }, 'bar']\n                    }\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"keeps several defaults separated","suites":["Joi","defaults()"],"updatePoint":{"line":1114,"column":44},"line":1114,"code":"        it('keeps several defaults separated', () => {\n\n            const custom1 = Joi.defaults((schema) => schema.required().description('defaulted'));\n            const custom2 = Joi.defaults((schema) => schema.required().description('defaulted2'));\n\n            const schema = custom1.object({\n                foo: 'bar',\n                baz: custom2.object().keys({\n                    qux: 'zorg'\n                })\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required'\n                },\n                keys: {\n                    foo: {\n                        type: 'any',\n                        flags: {\n                            presence: 'required',\n                            description: 'defaulted',\n                            only: true\n                        },\n                        allow: [{ override: true }, 'bar']\n                    },\n                    baz: {\n                        keys: {\n                            qux: {\n                                flags: {\n                                    only: true,\n                                    description: 'defaulted2',\n                                    presence: 'required'\n                                },\n                                type: 'any',\n                                allow: [{ override: true }, 'zorg']\n                            }\n                        },\n                        flags: {\n                            description: 'defaulted2',\n                            presence: 'required'\n                        },\n                        type: 'object'\n                    }\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"inherits defaults","suites":["Joi","defaults()"],"updatePoint":{"line":1164,"column":29},"line":1164,"code":"        it('inherits defaults', () => {\n\n            const custom = Joi\n                .defaults((schema) => schema.required().description('defaulted'))\n                .defaults((schema) => schema.raw());\n\n            const schema = custom.object({\n                foo: 'bar'\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required',\n                    result: 'raw'\n                },\n                keys: {\n                    foo: {\n                        type: 'any',\n                        flags: {\n                            description: 'defaulted',\n                            presence: 'required',\n                            only: true,\n                            result: 'raw'\n                        },\n                        allow: [{ override: true }, 'bar']\n                    }\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"keeps defaults on extensions","suites":["Joi","defaults()"],"updatePoint":{"line":1196,"column":40},"line":1196,"code":"        it('keeps defaults on extensions', () => {\n\n            const custom = Joi.defaults((schema) => schema.required().description('defaulted'));\n\n            const extended = custom.extend({ type: 'foobar' });\n            const schema = extended.foobar();\n            expect(schema.describe()).to.equal({\n                type: 'foobar',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required'\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"applies defaults on extensions","suites":["Joi","defaults()"],"updatePoint":{"line":1211,"column":42},"line":1211,"code":"        it('applies defaults on extensions', () => {\n\n            const extended = Joi.extend({ type: 'foobar' });\n            const custom = extended.defaults((schema) => schema.required().description('defaulted'));\n            const schema = custom.foobar();\n            expect(schema.describe()).to.equal({\n                type: 'foobar',\n                flags: {\n                    description: 'defaulted',\n                    presence: 'required'\n                }\n            });\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"errors on missing return value (root)","suites":["Joi","defaults()"],"updatePoint":{"line":1225,"column":49},"line":1225,"code":"        it('errors on missing return value (root)', () => {\n\n            expect(() => {\n\n                Joi.defaults((schema) => {\n\n                    switch (schema.type) {\n                        case 'bool':\n                            return schema.required();\n                    }\n                });\n            }).to.throw('modifier must return a valid schema object');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"errors on missing return for a standard type","suites":["Joi","defaults()"],"updatePoint":{"line":1239,"column":56},"line":1239,"code":"        it('errors on missing return for a standard type', () => {\n\n            expect(() => {\n\n                Joi.defaults((schema) => {\n\n                    switch (schema.type) {\n                        case 'any':\n                            return schema.required();\n                    }\n                });\n            }).to.throw('modifier must return a valid schema object');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"should be Joi","suites":["Joi","ValidationError"],"updatePoint":{"line":1256,"column":25},"line":1256,"code":"        it('should be Joi', () => {\n\n            const error = new Joi.ValidationError();\n            expect(error.isJoi).to.equal(true);\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"should be named ValidationError","suites":["Joi","ValidationError"],"updatePoint":{"line":1262,"column":43},"line":1262,"code":"        it('should be named ValidationError', () => {\n\n            const error = new Joi.ValidationError();\n            expect(error.name).to.equal('ValidationError');\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"returns type shortcut methods","suites":["Joi","types()"],"updatePoint":{"line":1271,"column":41},"line":1271,"code":"        it('returns type shortcut methods', () => {\n\n            expect(() => {\n\n                const string = Joi.string;\n                string();\n            }).to.throw('Must be invoked on a Joi instance.');\n\n            const { string } = Joi.types();\n            expect(() => string.allow('x')).to.not.throw();\n\n            Helper.validate(string, [[0, false, '\"value\" must be a string']]);\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"returns alias shortcut methods","suites":["Joi","types()"],"updatePoint":{"line":1285,"column":42},"line":1285,"code":"        it('returns alias shortcut methods', () => {\n\n            expect(() => {\n\n                const func = Joi.func;\n                func();\n            }).to.throw('Must be invoked on a Joi instance.');\n\n            const { func } = Joi.types();\n            expect(() => func.allow('x')).to.not.throw();\n\n            Helper.validate(func, [[0, false, '\"value\" must be of type function']]);\n        });","file":"index.js","skipped":false,"dir":"test"},{"name":"describes schema (direct)","suites":["Manifest","describe()"],"updatePoint":{"line":20,"column":37},"line":20,"code":"        it('describes schema (direct)', () => {\n\n            const defaultFn = function () {\n\n                return 'test';\n            };\n\n            defaultFn.description = 'testing';\n\n            const defaultDescribedFn = function () {\n\n                return 'test';\n            };\n\n            const defaultRef = Joi.ref('xor');\n\n            const schema = Joi.object({\n                sub: {\n                    email: Joi.string().email(),\n                    domain: Joi.string().domain(),\n                    date: Joi.date(),\n                    child: Joi.object({\n                        alphanum: Joi.string().alphanum()\n                    })\n                },\n                min: [Joi.number(), Joi.string().min(3)],\n                max: Joi.string().max(3).default(0).failover(1),\n                required: Joi.string().required(),\n                xor: Joi.string(),\n                renamed: Joi.string().valid('456'),\n                notEmpty: Joi.string().required().description('a').note('b').tag('c'),\n                empty: Joi.string().empty('').strip(),\n                defaultRef: Joi.string().default(defaultRef),\n                defaultFn: Joi.string().default(defaultFn),\n                defaultDescribedFn: Joi.string().default(defaultDescribedFn),\n                defaultArray: Joi.array().default(['x'])\n            })\n                .prefs({ abortEarly: false, convert: false })\n                .rename('renamed', 'required')\n                .without('required', 'xor')\n                .without('xor', 'required')\n                .allow({ a: 'x' })\n                .meta({ x: 1 });\n\n            const result = {\n                type: 'object',\n                allow: [{ value: { a: 'x' } }],\n                keys: {\n                    sub: {\n                        type: 'object',\n                        keys: {\n                            email: {\n                                type: 'string',\n                                rules: [{ name: 'email' }]\n                            },\n                            domain: {\n                                type: 'string',\n                                rules: [{ name: 'domain' }]\n                            },\n                            date: {\n                                type: 'date'\n                            },\n                            child: {\n                                type: 'object',\n                                keys: {\n                                    alphanum: {\n                                        type: 'string',\n                                        rules: [{ name: 'alphanum' }]\n                                    }\n                                }\n                            }\n                        }\n                    },\n                    min: {\n                        type: 'alternatives',\n                        matches: [\n                            {\n                                schema: {\n                                    type: 'number'\n                                }\n                            },\n                            {\n                                schema: {\n                                    type: 'string',\n                                    rules: [{ name: 'min', args: { limit: 3 } }]\n                                }\n                            }\n                        ]\n                    },\n                    max: {\n                        type: 'string',\n                        flags: {\n                            default: 0,\n                            failover: 1\n                        },\n                        rules: [{ name: 'max', args: { limit: 3 } }]\n                    },\n                    required: {\n                        type: 'string',\n                        flags: {\n                            presence: 'required'\n                        }\n                    },\n                    xor: {\n                        type: 'string'\n                    },\n                    renamed: {\n                        type: 'string',\n                        flags: {\n                            only: true\n                        },\n                        allow: ['456']\n                    },\n                    notEmpty: {\n                        type: 'string',\n                        flags: {\n                            description: 'a',\n                            presence: 'required'\n                        },\n                        notes: ['b'],\n                        tags: ['c']\n                    },\n                    empty: {\n                        type: 'string',\n                        flags: {\n                            empty: {\n                                type: 'any',\n                                flags: {\n                                    only: true\n                                },\n                                allow: ['']\n                            },\n                            result: 'strip'\n                        }\n                    },\n                    defaultRef: {\n                        type: 'string',\n                        flags: {\n                            default: {\n                                ref: { path: ['xor'] }\n                            }\n                        }\n                    },\n                    defaultFn: {\n                        type: 'string',\n                        flags: {\n                            default: defaultFn\n                        }\n                    },\n                    defaultDescribedFn: {\n                        type: 'string',\n                        flags: {\n                            default: defaultDescribedFn\n                        }\n                    },\n                    defaultArray: {\n                        type: 'array',\n                        flags: {\n                            default: ['x']\n                        }\n                    }\n                },\n                dependencies: [\n                    {\n                        rel: 'without',\n                        key: 'required',\n                        peers: ['xor']\n                    },\n                    {\n                        rel: 'without',\n                        key: 'xor',\n                        peers: ['required']\n                    }\n                ],\n                renames: [\n                    {\n                        from: 'renamed',\n                        to: 'required',\n                        options: {\n                            alias: false,\n                            multiple: false,\n                            override: false\n                        }\n                    }\n                ],\n                preferences: {\n                    abortEarly: false,\n                    convert: false\n                },\n                metas: [{ x: 1 }]\n            };\n\n            const description = schema.describe();\n            expect(description).to.equal(result);\n            expect(description.keys.defaultRef.flags.default).to.equal({ ref: { path: ['xor'] } });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes schema without invalids","suites":["Manifest","describe()"],"updatePoint":{"line":217,"column":45},"line":217,"code":"        it('describes schema without invalids', () => {\n\n            const description = Joi.allow(null).describe();\n            expect(description.invalids).to.not.exist();\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes value map","suites":["Manifest","describe()"],"updatePoint":{"line":223,"column":31},"line":223,"code":"        it('describes value map', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const map = new Map([[1, symbols[0]], ['two', symbols[1]]]);\n            const schema = Joi.symbol().map(map).describe();\n            expect(schema).to.equal({\n                type: 'symbol',\n                flags: {\n                    only: true\n                },\n                map: [...map.entries()],\n                allow: symbols\n            });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes symbol without map","suites":["Manifest","describe()"],"updatePoint":{"line":238,"column":40},"line":238,"code":"        it('describes symbol without map', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const schema = Joi.symbol().valid(...symbols).describe();\n            expect(schema).to.equal({\n                type: 'symbol',\n                flags: {\n                    only: true\n                },\n                allow: symbols\n            });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"handles empty values","suites":["Manifest","describe()"],"updatePoint":{"line":251,"column":32},"line":251,"code":"        it('handles empty values', () => {\n\n            expect(Joi.allow(1).invalid(1).describe()).to.equal({ type: 'any', invalid: [1] });\n            expect(Joi.invalid(1).allow(1).describe()).to.equal({ type: 'any', allow: [1] });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes ruleset changes","suites":["Manifest","describe()"],"updatePoint":{"line":257,"column":37},"line":257,"code":"        it('describes ruleset changes', () => {\n\n            const schema = Joi.string().min(1).keep();\n            expect(schema.describe()).to.equal({\n                type: 'string',\n                rules: [\n                    {\n                        name: 'min',\n                        keep: true,\n                        args: { limit: 1 }\n                    }\n                ]\n            });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes defaults","suites":["Manifest","describe()"],"updatePoint":{"line":272,"column":30},"line":272,"code":"        it('describes defaults', () => {\n\n            const schema = Joi.object({\n                foo: Joi.string().default('bar')\n            })\n                .default({ foo: 'bar' });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                flags: { default: { foo: 'bar' } },\n                keys: { foo: { type: 'string', flags: { default: 'bar' } } }\n            });\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"describes null defaults","suites":["Manifest","describe()"],"updatePoint":{"line":286,"column":35},"line":286,"code":"        it('describes null defaults', () => {\n\n            const description = Joi.any().allow(null).default(null).describe();\n            expect(description.invalids).to.not.exist();\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds basic schemas","suites":["Manifest","build()"],"updatePoint":{"line":295,"column":32},"line":295,"code":"        it('builds basic schemas', () => {\n\n            internals.test([\n                Joi.any(),\n                Joi.array(),\n                Joi.binary(),\n                Joi.boolean(),\n                Joi.date(),\n                Joi.function(),\n                Joi.number(),\n                Joi.object(),\n                Joi.string(),\n                Joi.symbol()\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets flags","suites":["Manifest","build()"],"updatePoint":{"line":311,"column":22},"line":311,"code":"        it('sets flags', () => {\n\n            internals.test([\n                Joi.string().required(),\n                Joi.function().default(() => null, { literal: true }),\n                Joi.object().default(),\n                Joi.array().default(['x']),\n                Joi.boolean().optional(),\n                Joi.string().empty(''),\n                Joi.binary().strip(),\n                Joi.alternatives().raw(),\n                Joi.any().result('raw')\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets preferences","suites":["Manifest","build()"],"updatePoint":{"line":326,"column":28},"line":326,"code":"        it('sets preferences', () => {\n\n            internals.test([\n                Joi.object().prefs({ abortEarly: true }),\n                Joi.string().min(10).prefs({ messages: { 'string.min': Joi.x('{$x}') } }),\n                Joi.string().min(10).prefs({ messages: { 'string.min': Joi.x('{@x}', { prefix: { context: '@' } }) } })\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets allow and invalid","suites":["Manifest","build()"],"updatePoint":{"line":335,"column":34},"line":335,"code":"        it('sets allow and invalid', () => {\n\n            internals.test([\n                Joi.string().allow(1, 2, 3),\n                Joi.string().valid(Joi.ref('$x')),\n                Joi.number().invalid(1),\n                Joi.object().allow({ x: 1 }),\n                Joi.allow(null),\n                Joi.string().empty('').allow(null)\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets rules","suites":["Manifest","build()"],"updatePoint":{"line":347,"column":22},"line":347,"code":"        it('sets rules', () => {\n\n            internals.test([\n                Joi.string().lowercase(),\n                Joi.string().alphanum(),\n                Joi.string().min(10),\n                Joi.string().length(10, 'binary')\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets ruleset options","suites":["Manifest","build()"],"updatePoint":{"line":357,"column":32},"line":357,"code":"        it('sets ruleset options', () => {\n\n            internals.test([\n                Joi.string().min(1).keep(),\n                Joi.string().$.min(1).max(2).rule({ message: 'override' }),\n                Joi.string().$.min(1).max(2).rule({ message: Joi.x('{$x}') })\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"sets any terms","suites":["Manifest","build()"],"updatePoint":{"line":366,"column":26},"line":366,"code":"        it('sets any terms', () => {\n\n            internals.test([\n                Joi.string().example('text').tag('a').note('ok then').meta(123),\n                Joi.binary().external((v) => v, 'custom'),\n                Joi.number().alter({ x: (s) => s.min(1) })\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds alternatives","suites":["Manifest","build()"],"updatePoint":{"line":375,"column":31},"line":375,"code":"        it('builds alternatives', () => {\n\n            internals.test([\n                Joi.alternatives().try(Joi.boolean()),\n                Joi.alternatives(Joi.boolean(), Joi.object({ p: Joi.number() })),\n                Joi.alternatives(Joi.object()).error(new Error())\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds whens","suites":["Manifest","build()"],"updatePoint":{"line":384,"column":24},"line":384,"code":"        it('builds whens', () => {\n\n            internals.test([\n                Joi.number().when('$x', { is: true, then: Joi.required(), otherwise: Joi.forbidden() }),\n                Joi.number().when(Joi.valid('x'), { then: Joi.required(), otherwise: Joi.forbidden() }),\n                Joi.when('$x', { is: true, then: Joi.string() }),\n                Joi.number().when('a', { switch: [{ is: 0, then: Joi.valid(1) }], otherwise: Joi.valid(4) })\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds arrays","suites":["Manifest","build()"],"updatePoint":{"line":394,"column":25},"line":394,"code":"        it('builds arrays', () => {\n\n            internals.test([\n                Joi.array().min(1).items(Joi.number()),\n                Joi.array().has(Joi.string()),\n                Joi.array().ordered(Joi.number(), Joi.boolean(), Joi.binary()),\n                Joi.array().items(Joi.number()).has(Joi.number()),\n                Joi.array().sparse().unique()\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds binaries","suites":["Manifest","build()"],"updatePoint":{"line":405,"column":27},"line":405,"code":"        it('builds binaries', () => {\n\n            internals.test([\n                Joi.binary().default(Buffer.from('abcde')).allow(Buffer.from('123'))\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds booleans","suites":["Manifest","build()"],"updatePoint":{"line":412,"column":27},"line":412,"code":"        it('builds booleans', () => {\n\n            internals.test([\n                Joi.boolean().truthy('x'),\n                Joi.boolean().falsy(Joi.ref('$x')),\n                Joi.boolean().truthy(3).falsy(4),\n                Joi.boolean().sensitive(),\n                Joi.boolean().sensitive(false)\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds dates","suites":["Manifest","build()"],"updatePoint":{"line":423,"column":24},"line":423,"code":"        it('builds dates', () => {\n\n            internals.test([\n                Joi.date().min('1-1-2000 UTC')\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds links","suites":["Manifest","build()"],"updatePoint":{"line":430,"column":24},"line":430,"code":"        it('builds links', () => {\n\n            expect(() => Joi.build(Joi.link().describe())).to.throw('Invalid link description missing link');\n            internals.test([\n                Joi.link('....'),\n                Joi.link(Joi.ref('xxx....', { separator: 'x' })),\n                Joi.link('/'),\n                Joi.link('..a').relative()\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds objects","suites":["Manifest","build()"],"updatePoint":{"line":441,"column":26},"line":441,"code":"        it('builds objects', () => {\n\n            internals.test([\n                Joi.object({}),\n                Joi.object({ p: Joi.number() }),\n                Joi.object({ a: Joi.string(), b: Joi.number() }),\n                Joi.object().rename('a', 'b'),\n                Joi.object().rename(/a/, 'b'),\n                Joi.object().rename(/(a)/, Joi.x('x{#1}')),\n                Joi.object().and('a', 'b').or('c', 'd').without('e', 'f').xor('g.h', 'i', { separator: false }),\n                Joi.object().pattern(/x/, Joi.number()),\n                Joi.object().pattern(Joi.string(), Joi.number()),\n                Joi.object().pattern(/x/, Joi.number(), { matches: Joi.array().length(Joi.ref('$x')), fallthrough: true }),\n                Joi.object({ a: 1 }).concat(Joi.object({ a: 3 })),\n                Joi.object().instance(RegExp).default(/x/).allow({}).allow({ x: 1 }),\n                Joi.object({ regex: 'b' }),\n                Joi.object({ buffer: 'c' }),\n                Joi.object({ function: 'd' }),\n                Joi.object({ override: 'e' }),\n                Joi.object({ ref: 'f' }),\n                Joi.object({ special: 'g' }),\n                Joi.object({ value: 'h' }),\n                Joi.object({ type: 'a' }),\n                Joi.object({ type: 'a', regex: 'b', buffer: 'c', function: 'd', override: 'e', ref: 'f', special: 'g', value: 'f' })\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds strings","suites":["Manifest","build()"],"updatePoint":{"line":468,"column":26},"line":468,"code":"        it('builds strings', () => {\n\n            internals.test([\n                Joi.string().min(1).max(10).pattern(/\\d*/),\n                Joi.string().replace(/x/, 'X')\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds strings","suites":["Manifest","build()"],"updatePoint":{"line":476,"column":26},"line":476,"code":"        it('builds strings', () => {\n\n            internals.test([\n                Joi.string().min(1).max(10).pattern(/\\d*/),\n                Joi.string().replace(/x/, 'X')\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds symbols","suites":["Manifest","build()"],"updatePoint":{"line":484,"column":26},"line":484,"code":"        it('builds symbols', () => {\n\n            internals.test([\n                Joi.symbol().map([['a', Symbol('a')]])\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds references","suites":["Manifest","build()"],"updatePoint":{"line":491,"column":29},"line":491,"code":"        it('builds references', () => {\n\n            internals.test([\n                Joi.allow(Joi.ref('a'))\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds extended schema (nested builds)","suites":["Manifest","build()"],"updatePoint":{"line":498,"column":50},"line":498,"code":"        it('builds extended schema (nested builds)', () => {\n\n            const custom = Joi.extend({\n                type: 'fancy',\n                base: Joi.object({ a: Joi.number() }),\n                flags: {\n                    presence: {}                                // For coverage\n                },\n                terms: {\n                    fancy: { init: [] }\n                },\n                rules: {\n                    pants: {\n                        method(button) {\n\n                            this.$_terms.fancy.push(button);\n                            return this;\n                        }\n                    }\n                },\n                manifest: {\n\n                    build(obj, desc) {\n\n                        if (desc.fancy) {\n                            obj = obj.clone();\n                            obj.$_terms.fancy = desc.fancy.slice();\n                        }\n\n                        return obj;\n                    }\n                }\n            });\n\n            const schema = custom.fancy().pants('green').required();\n            const desc = schema.describe();\n\n            expect(desc).to.equal({\n                type: 'fancy',\n                flags: {\n                    presence: 'required'\n                },\n                keys: {\n                    a: { type: 'number' }\n                },\n                fancy: ['green']\n            });\n\n            const built = custom.build(desc);\n            Helper.equal(built, schema);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds extended schema (complex)","suites":["Manifest","build()"],"updatePoint":{"line":550,"column":44},"line":550,"code":"        it('builds extended schema (complex)', () => {\n\n            const custom = Joi.extend({\n                type: 'million',\n                base: Joi.number(),\n                flags: {\n                    sizable: { setter: 'big' }\n                },\n                messages: {\n                    'million.base': '{{#label}} must be at least a million',\n                    'million.big': '{{#label}} must be at least five millions',\n                    'million.round': '{{#label}} must be a round number',\n                    'million.dividable': '{{#label}} must be dividable by {{#q}}'\n                },\n                coerce(value, { schema }) {\n\n                    // Only called when prefs.convert is true\n\n                    if (schema.$_getRule('round')) {\n                        return { value: Math.round(value) };\n                    }\n                },\n                validate(value, { schema, error }) {\n\n                    // Base validation regardless of the rules applied\n\n                    if (value < 1000000) {\n                        return { value, errors: error('million.base') };\n                    }\n\n                    // Check flags for global state\n\n                    if (schema.$_getFlag('sizable') &&\n                        value < 5000000) {\n\n                        return { value, errors: error('million.big') };\n                    }\n                },\n                rules: {\n                    big: {\n                        alias: 'large',\n                        method() {\n\n                            return this.$_setFlag('sizable', true);\n                        }\n                    },\n                    round: {\n                        convert: true,              // Dual rule: converts or validates\n                        method() {\n\n                            return this.$_addRule('round');\n                        },\n                        validate(value, helpers, args, options) {\n\n                            // Only called when prefs.convert is false (due to rule convert option)\n\n                            if (value % 1 !== 0) {\n                                return helpers.error('million.round');\n                            }\n                        }\n                    },\n                    dividable: {\n                        multi: true,                // Rule supports multiple invocations\n                        method(q) {\n\n                            return this.$_addRule({ name: 'dividable', args: { q } });\n                        },\n                        args: [\n                            {\n                                name: 'q',\n                                ref: true,\n                                assert: (value) => typeof value === 'number' && !isNaN(value),\n                                message: 'q must be a number or reference'\n                            }\n                        ],\n                        validate(value, helpers, args, options) {\n\n                            if (value % args.q === 0) {\n                                return value;       // Value is valid\n                            }\n\n                            return helpers.error('million.dividable', { q: args.q });\n                        }\n                    },\n                    even: {\n                        method() {\n\n                            // Rule with only method used to alias another rule\n\n                            return this.dividable(2);\n                        }\n                    }\n                }\n            });\n\n            const schema = custom.object({\n                a: custom.million().round().dividable(Joi.ref('b')),\n                b: custom.number(),\n                c: custom.million().even().dividable(7),\n                d: custom.million().round().prefs({ convert: false }),\n                e: custom.million().large()\n            });\n\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'object',\n                keys: {\n                    b: {\n                        type: 'number'\n                    },\n                    a: {\n                        type: 'million',\n                        rules: [\n                            { name: 'round' },\n                            {\n                                name: 'dividable',\n                                args: { q: { ref: { path: ['b'] } } }\n                            }\n                        ]\n                    },\n                    c: {\n                        type: 'million',\n                        rules: [\n                            { name: 'dividable', args: { q: 2 } },\n                            { name: 'dividable', args: { q: 7 } }\n                        ]\n                    },\n                    d: {\n                        type: 'million',\n                        rules: [\n                            { name: 'round' }\n                        ],\n                        preferences: {\n                            convert: false\n                        }\n                    },\n                    e: {\n                        type: 'million',\n                        flags: {\n                            sizable: true\n                        }\n                    }\n                }\n            });\n\n            const built = custom.build(desc);\n            Helper.equal(built, schema);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"builds extended schema (base with terms)","suites":["Manifest","build()"],"updatePoint":{"line":699,"column":52},"line":699,"code":"        it('builds extended schema (base with terms)', () => {\n\n            const custom = Joi.extend({\n                type: 'fancy',\n                base: Joi.array().items(Joi.string().required())\n            });\n\n            const schema = custom.fancy();\n            const desc = schema.describe();\n\n            expect(desc).to.equal({\n                type: 'fancy',\n                items: [\n                    {\n                        flags: { presence: 'required' },\n                        type: 'string'\n                    }\n                ]\n            });\n\n            const built = custom.build(desc);\n            Helper.equal(built, schema);\n\n            Helper.validate(built, [\n                [[1], false, '\"[0]\" must be a string'],\n                [['x'], true]\n            ]);\n        });","file":"manifest.js","skipped":false,"dir":"test"},{"name":"extracts nested schema with keys","suites":["Modify","extract()"],"updatePoint":{"line":21,"column":44},"line":21,"code":"        it('extracts nested schema with keys', () => {\n\n            const d = Joi.number();\n            const c = Joi.object({ d });\n            const b = Joi.object({ c });\n            const a = Joi.object({ b });\n\n            expect(a.extract('b')).to.shallow.equal(b);\n            expect(a.extract('b.c.d')).to.shallow.equal(d);\n            expect(a.extract(['b', 'c', 'd'])).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema with ids","suites":["Modify","extract()"],"updatePoint":{"line":33,"column":43},"line":33,"code":"        it('extracts nested schema with ids', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('B');\n            const a = Joi.object({ b });\n\n            expect(a.extract('B')).to.shallow.equal(b);\n            expect(a.extract('B.C.D')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema with ids by keys","suites":["Modify","extract()"],"updatePoint":{"line":44,"column":51},"line":44,"code":"        it('extracts nested schema with ids by keys', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('B');\n            const a = Joi.object({ b });\n\n            expect(a.extract('b')).to.shallow.equal(b);\n            expect(a.extract('b.c.d')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema with duplicate ids","suites":["Modify","extract()"],"updatePoint":{"line":55,"column":53},"line":55,"code":"        it('extracts nested schema with duplicate ids', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('B');\n            const a = Joi.object({ b, x: b });\n\n            expect(a.extract('b')).to.shallow.equal(b);\n            expect(a.extract('x')).to.shallow.equal(b);\n            expect(a.extract('b.c.d')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema from array","suites":["Modify","extract()"],"updatePoint":{"line":67,"column":45},"line":67,"code":"        it('extracts nested schema from array', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('b');\n            const a = Joi.array().items(b);\n\n            expect(a.extract('b')).to.shallow.equal(b);\n            expect(a.extract('b.c.d')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema from alternatives","suites":["Modify","extract()"],"updatePoint":{"line":78,"column":52},"line":78,"code":"        it('extracts nested schema from alternatives', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('b');\n            const a = Joi.alternatives(b);\n\n            expect(a.extract('b')).to.shallow.equal(b);\n            expect(a.extract('b.c.d')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema after object key override","suites":["Modify","extract()"],"updatePoint":{"line":89,"column":60},"line":89,"code":"        it('extracts nested schema after object key override', () => {\n\n            const d = Joi.number();\n            const c = Joi.object({ d });\n            const b = Joi.object({ c });\n            const a = Joi.object({ b });\n            const x = a.keys({ b: c });\n\n            expect(x.extract('b')).to.shallow.equal(c);\n            expect(x.extract('b.d')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema after object key override and custom ids","suites":["Modify","extract()"],"updatePoint":{"line":101,"column":75},"line":101,"code":"        it('extracts nested schema after object key override and custom ids', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('B');\n            const a = Joi.object({ b }).id('A');\n            const x = a.keys({ b: c });\n\n            expect(x.extract('C')).to.shallow.equal(c);\n            expect(x.extract('C.D')).to.shallow.equal(d);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema after object concat (keys)","suites":["Modify","extract()"],"updatePoint":{"line":113,"column":61},"line":113,"code":"        it('extracts nested schema after object concat (keys)', () => {\n\n            const d = Joi.number();\n            const c = Joi.object({ d });\n            const b = Joi.object({ c });\n            const a = Joi.object({ b });\n            const x = a.concat(b);\n\n            expect(x.extract('b')).to.shallow.equal(b);\n            expect(x.extract('c')).to.shallow.equal(c);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema after object concat (ids)","suites":["Modify","extract()"],"updatePoint":{"line":125,"column":60},"line":125,"code":"        it('extracts nested schema after object concat (ids)', () => {\n\n            const d = Joi.number().id('D');\n            const c = Joi.object({ d }).id('C');\n            const b = Joi.object({ c }).id('B');\n            const a = Joi.object({ b }).id('A');\n            const x = a.concat(b);\n\n            expect(x.extract('B')).to.shallow.equal(b);\n            expect(x.extract('C')).to.shallow.equal(c);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"errors on missing schema","suites":["Modify","extract()"],"updatePoint":{"line":137,"column":36},"line":137,"code":"        it('errors on missing schema', () => {\n\n            const d = Joi.number();\n            const c = Joi.object({ d });\n            const b = Joi.object({ c });\n            const a = Joi.object({ b });\n\n            expect(() => a.extract(['b', 'c', 'x'])).to.throw('Schema does not contain path b.c.x');\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"errors on conflicting schema ids","suites":["Modify","extract()"],"updatePoint":{"line":147,"column":44},"line":147,"code":"        it('errors on conflicting schema ids', () => {\n\n            const a = Joi.number().id('A');\n            const b = Joi.string().id('A');\n\n            expect(() => Joi.object({ a, b })).to.throw('Cannot add different schemas with the same id: A');\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts empty","suites":["Modify","fork()"],"updatePoint":{"line":158,"column":25},"line":158,"code":"        it('adjusts empty', () => {\n\n            const before = Joi.string().empty(Joi.number().id('x'));\n            const after = Joi.string().empty(Joi.number().min(10).id('x'));\n\n            Helper.equal(before.fork('x', (schema) => schema.min(10)), after);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"preserves unchanged schemas","suites":["Modify","fork()"],"updatePoint":{"line":166,"column":39},"line":166,"code":"        it('preserves unchanged schemas', () => {\n\n            const before = Joi.object({ x: Joi.string().optional() });\n            const after = Joi.object({ x: Joi.string().optional() });\n\n            Helper.equal(before.fork('x', (schema) => schema.optional()), after);\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts reused schema in multiple places","suites":["Modify","fork()"],"updatePoint":{"line":174,"column":52},"line":174,"code":"        it('adjusts reused schema in multiple places', () => {\n\n            const shared = Joi.number().id('x');\n\n            const before = Joi.object({\n                a: shared,\n                b: shared\n            });\n\n            expect(before.extract('a')).to.shallow.equal(before.extract('b'));\n\n            const sharedAfter = shared.min(10);\n            const after = Joi.object({\n                a: sharedAfter,\n                b: sharedAfter\n            });\n\n            expect(after.extract('a')).to.shallow.equal(after.extract('b'));\n\n            const modified = before.fork('x', (schema) => schema.min(10));\n            Helper.equal(modified, after);\n            expect(modified.extract('a')).to.shallow.equal(modified.extract('b'));\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts nested schema","suites":["Modify","fork()","alternatives"],"updatePoint":{"line":200,"column":37},"line":200,"code":"            it('adjusts nested schema', () => {\n\n                const before = Joi.alternatives([\n                    Joi.number().positive().id('numbers'),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive()\n                        })\n                    }).id('objects')\n                ]);\n\n                const first = before.fork('objects.c.d', (schema) => schema.max(5));\n\n                const after1 = Joi.alternatives([\n                    Joi.number().positive().id('numbers'),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive().max(5)\n                        })\n                    }).id('objects')\n                ]);\n\n                Helper.equal(first, after1);\n\n                const second = first.fork('numbers', (schema) => schema.min(10));\n\n                const after2 = Joi.alternatives([\n                    Joi.number().positive().id('numbers').min(10),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive().max(5)\n                        })\n                    }).id('objects')\n                ]);\n\n                Helper.equal(second, after2);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts when schema","suites":["Modify","fork()","alternatives"],"updatePoint":{"line":238,"column":35},"line":238,"code":"            it('adjusts when schema', () => {\n\n                const before = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.boolean()\n                        .when('a', [\n                            { is: 0, then: Joi.valid(0).id('zero') },\n                            { is: 1, then: Joi.valid(1).id('one') }\n                        ])\n                });\n\n                const forked = before.fork('b.one', (schema) => schema.allow(2));\n\n                const after = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.boolean()\n                        .when('a', [\n                            { is: 0, then: Joi.valid(0).id('zero') },\n                            { is: 1, then: Joi.valid(1, 2).id('one') }\n                        ])\n                });\n\n                Helper.equal(forked, after);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts alternatives schema","suites":["Modify","fork()","alternatives"],"updatePoint":{"line":263,"column":43},"line":263,"code":"            it('adjusts alternatives schema', () => {\n\n                const before = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.alternatives()\n                        .conditional('a', {\n                            switch: [\n                                { is: 0, then: Joi.valid(0).id('zero') },\n                                { is: 1, then: Joi.valid(1).id('one'), otherwise: Joi.boolean() }\n                            ]\n                        })\n                });\n\n                const forked = before.fork('b.one', (schema) => schema.allow(2));\n\n                const after = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.alternatives()\n                        .conditional('a', {\n                            switch: [\n                                { is: 0, then: Joi.valid(0).id('zero') },\n                                { is: 1, then: Joi.valid(1, 2).id('one'), otherwise: Joi.boolean() }\n                            ]\n                        })\n                });\n\n                Helper.equal(forked, after);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts nested schema","suites":["Modify","fork()","array"],"updatePoint":{"line":295,"column":37},"line":295,"code":"            it('adjusts nested schema', () => {\n\n                const before = Joi.array().items(\n                    Joi.number().positive().id('numbers'),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive()\n                        })\n                    })\n                        .id('objects')\n                )\n                    .has(Joi.object())\n                    .has(Joi.valid(5).id('five'));\n\n                const first = before.fork('objects.c.d', (schema) => schema.max(5));\n\n                const after1 = Joi.array().items(\n                    Joi.number().positive().id('numbers'),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive().max(5)\n                        })\n                    })\n                        .id('objects')\n                )\n                    .has(Joi.object())\n                    .has(Joi.valid(5).id('five'));\n\n                Helper.equal(first, after1);\n\n                const second = first.fork('numbers', (schema) => schema.min(10));\n\n                const after2 = Joi.array().items(\n                    Joi.number().positive().id('numbers').min(10),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive().max(5)\n                        })\n                    })\n                        .id('objects')\n                )\n                    .has(Joi.object())\n                    .has(Joi.valid(5).id('five'));\n\n                Helper.equal(second, after2);\n\n                const third = second.fork('five', (schema) => schema.allow(-5));\n\n                const after3 = Joi.array().items(\n                    Joi.number().positive().id('numbers').min(10),\n                    Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().positive().max(5)\n                        })\n                    })\n                        .id('objects')\n                )\n                    .has(Joi.object())\n                    .has(Joi.valid(5, -5).id('five'));\n\n                Helper.equal(third, after3);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts nested schema","suites":["Modify","fork()","object"],"updatePoint":{"line":361,"column":37},"line":361,"code":"            it('adjusts nested schema', () => {\n\n                const before = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number()\n                        })\n                    })\n                });\n\n                const after = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().min(10)\n                        })\n                    })\n                });\n\n                Helper.equal(before.fork('b.c.d', (schema) => schema.min(10)), after);\n                Helper.equal(before.fork([['b', 'c', 'd']], (schema) => schema.min(10)), after);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"forks multiple times","suites":["Modify","fork()","object"],"updatePoint":{"line":385,"column":36},"line":385,"code":"            it('forks multiple times', () => {\n\n                const before = Joi.object({\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number()\n                        })\n                    }),\n                    x: Joi.number()\n                });\n\n                const bd = before.describe();\n\n                const first = before.fork('b.c.d', (schema) => schema.min(10));\n                const fd = first.describe();\n\n                const second = first.fork('b.c.d', (schema) => schema.max(20));\n                const sd = second.describe();\n\n                const third = second.fork('b.c.d', (schema) => schema.min(5));\n                const td = third.describe();\n\n                const fourth = third.fork('x', (schema) => schema.required());\n\n                const after = Joi.object({\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().max(20).min(5)\n                        })\n                    }),\n                    x: Joi.number().required()\n                });\n\n                Helper.equal(fourth, after);\n\n                expect(before.describe()).to.equal(bd);\n                expect(first.describe()).to.equal(fd);\n                expect(second.describe()).to.equal(sd);\n                expect(third.describe()).to.equal(td);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"forks same schema multiple times","suites":["Modify","fork()","object"],"updatePoint":{"line":426,"column":48},"line":426,"code":"            it('forks same schema multiple times', () => {\n\n                const before = Joi.object({\n                    x: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number()\n                        })\n                    })\n                });\n\n                const bd = before.describe();\n\n                const first = before.fork('b.c.d', (schema) => schema.min(10));\n                const fd = first.describe();\n\n                const second = before.fork('b.c.d', (schema) => schema.max(20));\n                const sd = second.describe();\n\n                const third = before.fork('b.c.d', (schema) => schema.min(5));\n                const td = third.describe();\n\n                const fourth = before.fork('x', (schema) => schema.required());\n\n                const a1 = Joi.object({\n                    x: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().min(10)\n                        })\n                    })\n                });\n\n                Helper.equal(first, a1);\n\n                const a2 = Joi.object({\n                    x: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().max(20)\n                        })\n                    })\n                });\n\n                Helper.equal(second, a2);\n\n                const a3 = Joi.object({\n                    x: Joi.number(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().min(5)\n                        })\n                    })\n                });\n\n                Helper.equal(third, a3);\n\n                const a4 = Joi.object({\n                    x: Joi.number().required(),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number()\n                        })\n                    })\n                });\n\n                Helper.equal(fourth, a4);\n\n                expect(before.describe()).to.equal(bd);\n                expect(first.describe()).to.equal(fd);\n                expect(second.describe()).to.equal(sd);\n                expect(third.describe()).to.equal(td);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts nested schema with ids","suites":["Modify","fork()","object"],"updatePoint":{"line":500,"column":46},"line":500,"code":"            it('adjusts nested schema with ids', () => {\n\n                const before = Joi.object({\n                    a: Joi.number().id('A'),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().id('D')\n                        })\n                    })\n                });\n\n                const after = Joi.object({\n                    a: Joi.number().id('A'),\n                    b: Joi.object({\n                        c: Joi.object({\n                            d: Joi.number().id('D').min(10)\n                        })\n                    })\n                });\n\n                Helper.equal(before.fork('b.c.D', (schema) => schema.min(10)), after);\n                Helper.equal(before.fork([['b', 'c', 'D']], (schema) => schema.min(10)), after);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"sets keys as required","suites":["Modify","fork()","object"],"updatePoint":{"line":524,"column":37},"line":524,"code":"            it('sets keys as required', () => {\n\n                const orig = Joi.object({ a: 0, b: 0, c: { d: 0, e: { f: 0 } }, g: { h: 0 } });\n                const schema = orig.fork(['a', 'b', 'c.d', 'c.e.f', 'g'], (x) => x.required());\n\n                Helper.validate(orig, [\n                    [{}, true]\n                ]);\n\n                Helper.validate(schema, [\n                    [{}, false, {\n                        message: '\"a\" is required',\n                        path: ['a'],\n                        type: 'any.required',\n                        context: { label: 'a', key: 'a' }\n                    }],\n                    [{ a: 0 }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { label: 'b', key: 'b' }\n                    }],\n                    [{ a: 0, b: 0 }, false, {\n                        message: '\"g\" is required',\n                        path: ['g'],\n                        type: 'any.required',\n                        context: { label: 'g', key: 'g' }\n                    }],\n                    [{ a: 0, b: 0, g: {} }, true],\n                    [{ a: 0, b: 0, c: {}, g: {} }, false, {\n                        message: '\"c.d\" is required',\n                        path: ['c', 'd'],\n                        type: 'any.required',\n                        context: { label: 'c.d', key: 'd' }\n                    }],\n                    [{ a: 0, b: 0, c: { d: 0 }, g: {} }, true],\n                    [{ a: 0, b: 0, c: { d: 0, e: {} }, g: {} }, false, {\n                        message: '\"c.e.f\" is required',\n                        path: ['c', 'e', 'f'],\n                        type: 'any.required',\n                        context: { label: 'c.e.f', key: 'f' }\n                    }],\n                    [{ a: 0, b: 0, c: { d: 0, e: { f: 0 } }, g: {} }, true]\n                ]);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"sets keys as optional","suites":["Modify","fork()","object"],"updatePoint":{"line":570,"column":37},"line":570,"code":"            it('sets keys as optional', () => {\n\n                const schema = Joi.object({\n                    a: Joi.number().required(),\n                    b: Joi.number().required()\n                }).\n                    fork(['a', 'b'], (x) => x.optional());\n\n                Helper.validate(schema, [\n                    [{}, true],\n                    [{ a: 0 }, true],\n                    [{ a: 0, b: 0 }, true]\n                ]);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"sets keys as forbidden","suites":["Modify","fork()","object"],"updatePoint":{"line":585,"column":38},"line":585,"code":"            it('sets keys as forbidden', () => {\n\n                const schema = Joi.object({\n                    a: Joi.number().required(),\n                    b: Joi.number().required()\n                }).\n                    fork(['a', 'b'], (x) => x.forbidden());\n\n                Helper.validate(schema, [\n                    [{}, true],\n                    [{ a: undefined }, true],\n                    [{ a: undefined, b: undefined }, true],\n                    [{ a: 0 }, false, {\n                        message: '\"a\" is not allowed',\n                        path: ['a'],\n                        type: 'any.unknown',\n                        context: { label: 'a', key: 'a', value: 0 }\n                    }],\n                    [{ b: 0 }, false, {\n                        message: '\"b\" is not allowed',\n                        path: ['b'],\n                        type: 'any.unknown',\n                        context: { label: 'b', key: 'b', value: 0 }\n                    }]\n                ]);\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts object assert","suites":["Modify","fork()","object"],"updatePoint":{"line":612,"column":37},"line":612,"code":"            it('adjusts object assert', () => {\n\n                const before = Joi.object({\n                    a: Joi.object({\n                        b: Joi.number()\n                    }),\n                    b: Joi.object({\n                        d: Joi.number()\n                    })\n                })\n                    .assert('b.d', Joi.valid(1))\n                    .assert('a.b', Joi.valid(Joi.ref('b.d')).id('assert'));\n\n                const after = Joi.object({\n                    a: Joi.object({\n                        b: Joi.number()\n                    }),\n                    b: Joi.object({\n                        d: Joi.number()\n                    })\n                })\n                    .assert('b.d', Joi.valid(1))\n                    .assert('a.b', Joi.valid(Joi.ref('b.d'), 'x').id('assert'));\n\n                expect(before.fork('assert', (schema) => schema.valid('x')).describe()).to.equal(after.describe());\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts object assert (with pattern)","suites":["Modify","fork()","object"],"updatePoint":{"line":639,"column":52},"line":639,"code":"            it('adjusts object assert (with pattern)', () => {\n\n                const before = Joi.object({\n                    a: Joi.object({\n                        b: Joi.number()\n                    }),\n                    b: Joi.object({\n                        d: Joi.number()\n                    })\n                })\n                    .min(2)\n                    .pattern(/\\d/, Joi.any())\n                    .assert('a.b', Joi.valid(Joi.ref('b.d')).id('assert'));\n\n                const after = Joi.object({\n                    a: Joi.object({\n                        b: Joi.number()\n                    }),\n                    b: Joi.object({\n                        d: Joi.number()\n                    })\n                })\n                    .min(2)\n                    .pattern(/\\d/, Joi.any())\n                    .assert('a.b', Joi.valid(Joi.ref('b.d'), 'x').id('assert'));\n\n                expect(before.fork('assert', (schema) => schema.valid('x')).describe()).to.equal(after.describe());\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"adjusts object pattern","suites":["Modify","fork()","object"],"updatePoint":{"line":668,"column":38},"line":668,"code":"            it('adjusts object pattern', () => {\n\n                const before = Joi.object()\n                    .pattern(/.*/, Joi.valid('x').id('pattern'));\n\n                const after = Joi.object()\n                    .pattern(/.*/, Joi.valid('x', 'y').id('pattern'));\n\n                expect(before.fork('pattern', (schema) => schema.valid('y')).describe()).to.equal(after.describe());\n            });","file":"modify.js","skipped":false,"dir":"test"},{"name":"unsets id","suites":["Modify","id()"],"updatePoint":{"line":683,"column":21},"line":683,"code":"        it('unsets id', () => {\n\n            const schema = Joi.any().id('x');\n            Helper.equal(schema.id(), Joi.any());\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"errors on invalid id","suites":["Modify","id()"],"updatePoint":{"line":689,"column":32},"line":689,"code":"        it('errors on invalid id', () => {\n\n            expect(() => Joi.any().id('a.b')).to.throw('id cannot contain period character');\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"overrides id","suites":["Modify","id()"],"updatePoint":{"line":694,"column":24},"line":694,"code":"        it('overrides id', () => {\n\n            const schema = Joi.any().id('x');\n            Helper.equal(schema.id('y'), Joi.any().id('y'));\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema","suites":["Modify","labels()"],"updatePoint":{"line":703,"column":34},"line":703,"code":"        it('extracts nested schema', () => {\n\n            const d = Joi.number();\n            const c = Joi.object({ d });\n            const b = Joi.object({ c });\n            const a = Joi.object({ b });\n\n            expect(a.$_mapLabels('b')).to.equal('b');\n            expect(a.$_mapLabels('b.c.d')).to.equal('b.c.d');\n            expect(a.$_mapLabels(['b', 'c', 'd'])).to.equal('b.c.d');\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"extracts nested schema with ids","suites":["Modify","labels()"],"updatePoint":{"line":715,"column":43},"line":715,"code":"        it('extracts nested schema with ids', () => {\n\n            const d = Joi.number().label('D');\n            const c = Joi.object({ d }).label('C');\n            const b = Joi.object({ c }).label('B');\n            const a = Joi.object({ b });\n\n            expect(a.$_mapLabels('b')).to.equal('B');\n            expect(a.$_mapLabels('b.c.d')).to.equal('B.C.D');\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"changes multiple schemas in different sources","suites":["Modify","schema()"],"updatePoint":{"line":729,"column":57},"line":729,"code":"        it('changes multiple schemas in different sources', () => {\n\n            const custom = Joi.extend({\n                type: 'special',\n                coerce(value, helpers) {\n\n                    const swap = helpers.schema.$_getFlag('swap');\n                    if (swap &&\n                        swap.$_match(value, helpers.state.nest(swap), helpers.prefs)) {\n\n                        return { value: ['swapped'] };\n                    }\n                },\n                terms: {\n                    x: { init: [] }\n                },\n                rules: {\n                    swap: {\n                        method(schema) {\n\n                            return this.$_setFlag('swap', this.$_compile(schema));\n                        }\n                    },\n                    pattern: {\n                        method(schema) {\n\n                            return this.$_addRule({ name: 'pattern', args: { schema: this.$_compile(schema) } });\n                        },\n                        validate() { }\n                    },\n                    term: {\n                        method(schema) {\n\n                            this.$_terms.x.push(schema);\n                            return this;\n                        }\n                    }\n                }\n            });\n\n            const schema = custom.special()\n                .swap(Joi.number())\n                .empty(Joi.object())\n                .pattern(Joi.binary())\n                .term(Joi.number());\n\n            const each = (item) => item.min(10);\n\n            expect(schema.$_modify({ each, ref: false, schema: false })).to.equal(schema);\n\n            const modified = schema.$_modify({ each, ref: false });\n\n            expect(modified.describe()).to.equal({\n                type: 'special',\n                flags: {\n                    empty: {\n                        rules: [{ args: { limit: 10 }, name: 'min' }],\n                        type: 'object'\n                    },\n                    swap: {\n                        rules: [{ args: { limit: 10 }, name: 'min' }],\n                        type: 'number'\n                    }\n                },\n                rules: [{\n                    args: {\n                        schema: {\n                            rules: [{ args: { limit: 10 }, name: 'min' }],\n                            type: 'binary'\n                        }\n                    },\n                    name: 'pattern'\n                }],\n                x: [\n                    {\n                        rules: [{ args: { limit: 10 }, name: 'min' }],\n                        type: 'number'\n                    }\n                ]\n            });\n        });","file":"modify.js","skipped":false,"dir":"test"},{"name":"detects references","suites":["ref"],"updatePoint":{"line":19,"column":26},"line":19,"code":"    it('detects references', () => {\n\n        expect(Joi.isRef(Joi.ref('a.b'))).to.be.true();\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"throws when reference reaches beyond the schema root","suites":["ref"],"updatePoint":{"line":24,"column":60},"line":24,"code":"    it('throws when reference reaches beyond the schema root', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            b: Joi.ref('...c')\n        });\n\n        expect(() => schema.validate({ a: 1, b: 2 })).to.throw('Invalid reference exceeds the schema root: ref:...c');\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches self","suites":["ref"],"updatePoint":{"line":34,"column":20},"line":34,"code":"    it('reaches self', () => {\n\n        const schema = Joi.number().min(10).message('{#label} is {[.]} and that is not good enough');\n        Helper.validate(schema, [[1, false, '\"value\" is 1 and that is not good enough']]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches own property","suites":["ref"],"updatePoint":{"line":40,"column":28},"line":40,"code":"    it('reaches own property', () => {\n\n        const schema = Joi.object({\n            x: Joi.alternatives([\n                Joi.number(),\n                Joi.object({\n                    a: Joi.boolean().required()\n                })\n                    .when('.a', {\n                        is: true,\n                        then: {\n                            b: Joi.string().required()\n                        }\n                    })\n            ])\n        });\n\n        Helper.validate(schema, [\n            [{ x: 1 }, true],\n            [{ x: { a: true, b: 'x' } }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches parent","suites":["ref"],"updatePoint":{"line":63,"column":22},"line":63,"code":"    it('reaches parent', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            a1: Joi.ref('a'),\n            a2: Joi.ref('..a')\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: 1,\n                    a1: 1,\n                    a2: 1\n                }, true\n            ]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches grandparent","suites":["ref"],"updatePoint":{"line":82,"column":27},"line":82,"code":"    it('reaches grandparent', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            b: {\n                a1: Joi.ref('...a'),\n                a2: Joi.ref('...a')\n            }\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: 1,\n                    b: {\n                        a1: 1,\n                        a2: 1\n                    }\n                }, true\n            ]\n        ]);\n\n        expect(schema.describe()).to.equal({\n            type: 'object',\n            keys: {\n                a: {\n                    type: 'any'\n                },\n                b: {\n                    type: 'object',\n                    keys: {\n                        a1: {\n                            flags: {\n                                only: true\n                            },\n                            type: 'any',\n                            allow: [{ override: true }, { ref: { ancestor: 2, path: ['a'] } }]\n                        },\n                        a2: {\n                            flags: {\n                                only: true\n                            },\n                            type: 'any',\n                            allow: [{ override: true }, { ref: { ancestor: 2, path: ['a'] } }]\n                        }\n                    }\n                }\n            }\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches literal","suites":["ref"],"updatePoint":{"line":133,"column":23},"line":133,"code":"    it('reaches literal', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            b: {\n                '...a': Joi.any(),\n                c: Joi.ref('...a', { separator: false })\n            }\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: 1,\n                    b: {\n                        '...a': 2,\n                        c: 2\n                    }\n                }, true\n            ]\n        ]);\n\n        expect(schema.describe()).to.equal({\n            type: 'object',\n            keys: {\n                a: {\n                    type: 'any'\n                },\n                b: {\n                    type: 'object',\n                    keys: {\n                        '...a': {\n                            type: 'any'\n                        },\n                        c: {\n                            flags: {\n                                only: true\n                            },\n                            type: 'any',\n                            allow: [{ override: true }, { ref: { path: ['...a'], separator: false } }]\n                        }\n                    }\n                }\n            }\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches ancestor literal","suites":["ref"],"updatePoint":{"line":180,"column":32},"line":180,"code":"    it('reaches ancestor literal', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            '...a': Joi.any(),\n            b: {\n                '...a': Joi.any(),\n                c: Joi.ref('...a', { separator: false, ancestor: 2 })\n            }\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: 1,\n                    '...a': 3,\n                    b: {\n                        '...a': 2,\n                        c: 3\n                    }\n                }, true\n            ]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches any level of the relative value structure","suites":["ref"],"updatePoint":{"line":205,"column":57},"line":205,"code":"    it('reaches any level of the relative value structure', () => {\n\n        const ix = Joi.ref('...i');\n\n        const schema = Joi.object({\n            a: {\n                b: {\n                    c: {\n                        d: Joi.any()\n                    },\n                    e: 2,\n                    dx: Joi.ref('c.d'),\n                    ex: Joi.ref('..e'),\n                    ix,\n                    gx: Joi.ref('....f.g'),\n                    hx: Joi.ref('....h')\n                },\n                i: Joi.any()\n            },\n            f: {\n                g: Joi.any()\n            },\n            h: Joi.any()\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: {\n                        b: {\n                            c: {\n                                d: 1\n                            },\n                            e: 2,\n                            dx: 1,\n                            ex: 2,\n                            gx: 3,\n                            hx: 4,\n                            ix: 5\n                        },\n                        i: 5\n                    },\n                    f: {\n                        g: 3\n                    },\n                    h: 4\n                }, true\n            ],\n            [\n                {\n                    a: {\n                        b: {\n                            c: {\n                                d: 1\n                            },\n                            e: 2,\n                            dx: 1,\n                            ex: 2,\n                            gx: 3,\n                            hx: 4,\n                            ix: 5\n                        },\n                        i: 10\n                    },\n                    f: {\n                        g: 3\n                    },\n                    h: 4\n                }, false, {\n                    message: '\"a.b.ix\" must be [ref:...i]',\n                    path: ['a', 'b', 'ix'],\n                    type: 'any.only',\n                    context: {\n                        value: 5,\n                        valids: [ix],\n                        key: 'ix',\n                        label: 'a.b.ix'\n                    }\n                }\n            ]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches any level of the relative value structure (ancestor option)","suites":["ref"],"updatePoint":{"line":288,"column":75},"line":288,"code":"    it('reaches any level of the relative value structure (ancestor option)', () => {\n\n        const ix = Joi.ref('i', { ancestor: 2 });\n\n        const schema = Joi.object({\n            a: {\n                b: {\n                    c: {\n                        d: Joi.any()\n                    },\n                    e: 2,\n                    dx: Joi.ref('c.d', { ancestor: 1 }),\n                    ex: Joi.ref('e', { ancestor: 1 }),\n                    ix,\n                    gx: Joi.ref('f.g', { ancestor: 3 }),\n                    hx: Joi.ref('h', { ancestor: 3 })\n                },\n                i: Joi.any()\n            },\n            f: {\n                g: Joi.any()\n            },\n            h: Joi.any()\n        });\n\n        Helper.validate(schema, [\n            [\n                {\n                    a: {\n                        b: {\n                            c: {\n                                d: 1\n                            },\n                            e: 2,\n                            dx: 1,\n                            ex: 2,\n                            gx: 3,\n                            hx: 4,\n                            ix: 5\n                        },\n                        i: 5\n                    },\n                    f: {\n                        g: 3\n                    },\n                    h: 4\n                }, true\n            ],\n            [\n                {\n                    a: {\n                        b: {\n                            c: {\n                                d: 1\n                            },\n                            e: 2,\n                            dx: 1,\n                            ex: 2,\n                            gx: 3,\n                            hx: 4,\n                            ix: 5\n                        },\n                        i: 10\n                    },\n                    f: {\n                        g: 3\n                    },\n                    h: 4\n                }, false, {\n                    message: '\"a.b.ix\" must be [ref:...i]',\n                    path: ['a', 'b', 'ix'],\n                    type: 'any.only',\n                    context: {\n                        value: 5,\n                        valids: [ix],\n                        key: 'ix',\n                        label: 'a.b.ix'\n                    }\n                }\n            ]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches own key value","suites":["ref"],"updatePoint":{"line":371,"column":29},"line":371,"code":"    it('reaches own key value', () => {\n\n        const object = Joi.object().schema('object');\n        const schema = Joi.object({\n            key: Joi.object().when('.', {\n                is: Joi.object().schema(),\n                then: object,\n                otherwise: Joi.object().pattern(/.*/, object)\n            })\n                .required()\n        });\n\n        Helper.validate(schema, [\n            [{ key: object }, true],\n            [{ key: 1 }, false, {\n                message: '\"key\" must be of type object',\n                type: 'object.base',\n                path: ['key'],\n                context: {\n                    key: 'key',\n                    label: 'key',\n                    value: 1,\n                    type: 'object'\n                }\n            }],\n            [{ key: Joi.number() }, false, {\n                message: '\"key\" must be a Joi schema of object type',\n                type: 'object.schema',\n                path: ['key'],\n                context: {\n                    key: 'key',\n                    label: 'key',\n                    type: 'object',\n                    value: Joi.number()\n                }\n            }],\n            [{ key: { a: 1 } }, false, {\n                message: '\"key.a\" must be of type object',\n                type: 'object.base',\n                path: ['key', 'a'],\n                context: {\n                    key: 'a',\n                    label: 'key.a',\n                    value: 1,\n                    type: 'object'\n                }\n            }],\n            [{ key: { a: {} } }, false, {\n                message: '\"key.a\" must be a Joi schema of object type',\n                type: 'object.schema',\n                path: ['key', 'a'],\n                context: {\n                    key: 'a',\n                    label: 'key.a',\n                    type: 'object',\n                    value: {}\n                }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches into set and map","suites":["ref"],"updatePoint":{"line":432,"column":32},"line":432,"code":"    it('reaches into set and map', () => {\n\n        const schema = Joi.object({\n            a: {\n                b: Joi.array()\n                    .items({\n                        x: Joi.number(),\n                        y: Joi.object().cast('map')\n                    })\n                    .cast('set')\n            },\n            d: Joi.ref('a.b.2.y.w', { iterables: true })\n        });\n\n        const value = {\n            a: {\n                b: [\n                    { x: 1 },\n                    { x: 2 },\n                    {\n                        y: {\n                            v: 4,\n                            w: 5\n                        }\n                    }\n                ]\n            },\n            d: 5\n        };\n\n        Helper.validate(schema, [[value, true, {\n            a: {\n                b: new Set([\n                    { x: 1 },\n                    { x: 2 },\n                    {\n                        y: new Map([\n                            ['v', 4],\n                            ['w', 5]\n                        ])\n                    }\n                ])\n            },\n            d: 5\n        }]]);\n\n        value.d = 6;\n        Helper.validate(schema, [[value, false, '\"d\" must be [ref:a.b.2.y.w]']]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"reaches root","suites":["ref"],"updatePoint":{"line":482,"column":20},"line":482,"code":"    it('reaches root', () => {\n\n        const schema = Joi.object({\n            a: Joi.any(),\n            b: {\n                c: Joi.ref('/a'),\n                d: Joi.ref('@a', { prefix: { root: '@' } })\n            }\n        });\n\n        Helper.validate(schema, [\n            [{ a: 1, b: { c: 1, d: 1 } }, true]\n        ]);\n\n        expect(schema.describe()).to.equal({\n            type: 'object',\n            keys: {\n                a: {\n                    type: 'any'\n                },\n                b: {\n                    type: 'object',\n                    keys: {\n                        c: {\n                            flags: {\n                                only: true\n                            },\n                            type: 'any',\n                            allow: [{ override: true }, { ref: { ancestor: 'root', path: ['a'] } }]\n                        },\n                        d: {\n                            flags: {\n                                only: true\n                            },\n                            type: 'any',\n                            allow: [{ override: true }, { ref: { ancestor: 'root', path: ['a'] } }]\n                        }\n                    }\n                }\n            }\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"errors on missing iterables flag when reaching into set and map","suites":["ref"],"updatePoint":{"line":525,"column":71},"line":525,"code":"    it('errors on missing iterables flag when reaching into set and map', () => {\n\n        const schema = Joi.object({\n            a: {\n                b: Joi.array()\n                    .items({\n                        x: Joi.number(),\n                        y: Joi.object().cast('map')\n                    })\n                    .cast('set')\n            },\n            d: Joi.ref('a.b.2.y.w')\n        });\n\n        const value = {\n            a: {\n                b: [\n                    { x: 1 },\n                    { x: 2 },\n                    {\n                        y: {\n                            v: 4,\n                            w: 5\n                        }\n                    }\n                ]\n            },\n            d: 5\n        };\n\n        Helper.validate(schema, [[value, false, '\"d\" must be [ref:a.b.2.y.w]']]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"errors on invalid separator)","suites":["ref"],"updatePoint":{"line":558,"column":36},"line":558,"code":"    it('errors on invalid separator)', () => {\n\n        expect(() => Joi.ref('x', { separator: 0 })).to.throw('Invalid separator');\n        expect(() => Joi.ref('x', { separator: '' })).to.throw('Invalid separator');\n        expect(() => Joi.ref('x', { separator: '$$' })).to.throw('Invalid separator');\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"errors on prefix + ancestor option)","suites":["ref"],"updatePoint":{"line":565,"column":43},"line":565,"code":"    it('errors on prefix + ancestor option)', () => {\n\n        expect(() => Joi.ref('..x', { ancestor: 0 })).to.throw('Cannot combine prefix with ancestor option');\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"errors on root with ancestor prefix","suites":["ref"],"updatePoint":{"line":570,"column":43},"line":570,"code":"    it('errors on root with ancestor prefix', () => {\n\n        expect(() => Joi.ref('/.x')).to.throw('Cannot specify relative path with root prefix');\n        expect(() => Joi.ref('/.x', { separator: false })).to.not.throw();\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"errors on ancestor circular dependency","suites":["ref"],"updatePoint":{"line":576,"column":46},"line":576,"code":"    it('errors on ancestor circular dependency', () => {\n\n        const schema = {\n            a: {\n                x: Joi.any(),\n                b: {\n                    c: {\n                        d: Joi.ref('....b.x')\n                    }\n                }\n            },\n            b: {\n                x: Joi.any(),\n                y: {\n                    z: {\n                        o: Joi.ref('....a.x')\n                    }\n                }\n            }\n        };\n\n        expect(() => Joi.compile(schema)).to.throw('Item cannot come after itself: b (a.b)');\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"references array length","suites":["ref"],"updatePoint":{"line":600,"column":31},"line":600,"code":"    it('references array length', () => {\n\n        const ref = Joi.ref('length');\n        const schema = Joi.object({\n            x: Joi.array().items(Joi.number().valid(ref))\n        });\n\n        Helper.validate(schema, [\n            [{ x: [1] }, true],\n            [{ x: [2, 2] }, true],\n            [{ x: [2, 2, 2] }, false, {\n                message: '\"x[0]\" must be [ref:length]',\n                path: ['x', 0],\n                type: 'any.only',\n                context: {\n                    value: 2,\n                    valids: [ref],\n                    key: 0,\n                    label: 'x[0]'\n                }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"splits when based on own array length","suites":["ref"],"updatePoint":{"line":624,"column":45},"line":624,"code":"    it('splits when based on own array length', () => {\n\n        const pair = Joi.array().items(2);\n        const lucky = Joi.array().items(7);\n\n        const schema = Joi.object({\n            x: Joi.array().when('.length', { is: 2, then: pair, otherwise: lucky })\n        });\n\n        Helper.validate(schema, [\n            [{ x: [7] }, true],\n            [{ x: [7, 7, 7] }, true],\n            [{ x: [2, 2] }, true],\n            [{ x: [2, 2, 2] }, false, {\n                message: '\"x[0]\" must be [7]',\n                path: ['x', 0],\n                type: 'any.only',\n                context: { value: 2, valids: [7], key: 0, label: 'x[0]' }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"references array item","suites":["ref"],"updatePoint":{"line":646,"column":29},"line":646,"code":"    it('references array item', () => {\n\n        const ref = Joi.ref('0');\n        const schema = Joi.array().ordered(Joi.number(), Joi.number().min(ref));\n\n        Helper.validate(schema, [\n            [[1, 2], true],\n            [[10, 20], true],\n            [[10, 5], false, {\n                message: '\"[1]\" must be greater than or equal to ref:0',\n                path: [1],\n                type: 'number.min',\n                context: { limit: ref, value: 5, key: 1, label: '[1]' }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"references object own child","suites":["ref"],"updatePoint":{"line":663,"column":35},"line":663,"code":"    it('references object own child', () => {\n\n        const ref = Joi.ref('.length');\n        const schema = Joi.object({\n            length: Joi.number().required()\n        })\n            .length(ref)\n            .unknown();\n\n        expect(schema._refs.refs).to.equal([]);     // Does not register reference to itself\n\n        Helper.validate(schema, [\n            [{ length: 1 }, true],\n            [{ length: 2, x: 3 }, true],\n            [{ length: 2, x: 3, y: 4 }, false, {\n                message: '\"value\" must have ref:.length keys',\n                path: [],\n                type: 'object.length',\n                context: {\n                    value: { length: 2, x: 3, y: 4 },\n                    limit: ref,\n                    label: 'value'\n                }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref as a valid value","suites":["ref"],"updatePoint":{"line":690,"column":33},"line":690,"code":"    it('uses ref as a valid value', () => {\n\n        const ref = Joi.ref('b');\n        const schema = Joi.object({\n            a: ref,\n            b: Joi.any()\n        });\n\n        Helper.validate(schema, [[{ a: 5, b: 6 }, false, {\n            message: '\"a\" must be [ref:b]',\n            path: ['a'],\n            type: 'any.only',\n            context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n        }]]);\n\n        Helper.validate(schema, [\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:b]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ b: 5 }, true],\n            [{ a: 5, b: 5 }, true],\n            [{ a: '5', b: '5' }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"sets adjust function","suites":["ref"],"updatePoint":{"line":718,"column":28},"line":718,"code":"    it('sets adjust function', () => {\n\n        const adjust = (v) => 2 * v;\n        const ref = Joi.ref('b', { adjust });\n        const schema = Joi.object({\n            a: ref,\n            b: Joi.number()\n        });\n\n        Helper.validate(schema, [\n            [{ b: 5 }, true],\n            [{ a: 10, b: 5 }, true],\n            [{ a: 10, b: '5' }, true, { a: 10, b: 5 }],\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:b]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ a: 5, b: 5 }, false, {\n                message: '\"a\" must be [ref:b]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }]\n        ]);\n\n        expect(schema.describe()).to.equal({\n            type: 'object',\n            keys: {\n                b: {\n                    type: 'number'\n                },\n                a: {\n                    type: 'any',\n                    flags: { only: true },\n                    allow: [{ override: true }, { ref: { path: ['b'], adjust } }]\n                }\n            }\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"sets map","suites":["ref"],"updatePoint":{"line":760,"column":16},"line":760,"code":"    it('sets map', () => {\n\n        const map = [[5, 10]];\n        const ref = Joi.ref('b', { map });\n        const schema = Joi.object({\n            a: ref,\n            b: Joi.number()\n        });\n\n        Helper.validate(schema, [\n            [{ b: 5 }, true],\n            [{ a: 10, b: 5 }, true],\n            [{ a: 10, b: '5' }, true, { a: 10, b: 5 }],\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:b]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ a: 5, b: 5 }, false, {\n                message: '\"a\" must be [ref:b]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }]\n        ]);\n\n        expect(schema.describe()).to.equal({\n            type: 'object',\n            keys: {\n                b: {\n                    type: 'number'\n                },\n                a: {\n                    type: 'any',\n                    flags: { only: true },\n                    allow: [{ override: true }, { ref: { path: ['b'], map } }]\n                }\n            }\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref as a valid value (empty key)","suites":["ref"],"updatePoint":{"line":802,"column":45},"line":802,"code":"    it('uses ref as a valid value (empty key)', () => {\n\n        const ref = Joi.ref('');\n        const schema = Joi.object({\n            a: ref,\n            '': Joi.any()\n        });\n\n        Helper.validate(schema, [\n            [{ a: 5, '': 6 }, false, {\n                message: '\"a\" must be [ref:..]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:..]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ '': 5 }, true],\n            [{ a: 5, '': 5 }, true],\n            [{ a: '5', '': '5' }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref with nested keys as a valid value","suites":["ref"],"updatePoint":{"line":829,"column":50},"line":829,"code":"    it('uses ref with nested keys as a valid value', () => {\n\n        const ref = Joi.ref('b.c');\n        const schema = Joi.object({\n            a: ref,\n            b: {\n                c: Joi.any()\n            }\n        });\n\n        const err = schema.validate({ a: 5, b: { c: 6 } }).error;\n\n        expect(err).to.be.an.error('\"a\" must be [ref:b.c]');\n        expect(err.details).to.equal([{\n            message: '\"a\" must be [ref:b.c]',\n            path: ['a'],\n            type: 'any.only',\n            context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n        }]);\n\n        Helper.validate(schema, [\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:b.c]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ b: { c: 5 } }, true],\n            [{ a: 5, b: 5 }, false, {\n                message: '\"b\" must be of type object',\n                path: ['b'],\n                type: 'object.base',\n                context: { label: 'b', key: 'b', value: 5, type: 'object' }\n            }],\n            [{ a: '5', b: { c: '5' } }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref with combined nested keys in sub child","suites":["ref"],"updatePoint":{"line":867,"column":55},"line":867,"code":"    it('uses ref with combined nested keys in sub child', () => {\n\n        const ref = Joi.ref('b.c');\n        expect(ref.root).to.equal('b');\n\n        const schema = Joi.object({\n            a: ref,\n            b: {\n                c: Joi.any()\n            }\n        });\n\n        const input = { a: 5, b: { c: 5 } };\n        Helper.validate(schema, [[input, true]]);\n\n        const parent = Joi.object({\n            e: schema\n        });\n\n        Helper.validate(parent, [[{ e: input }, true]]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref reach options","suites":["ref"],"updatePoint":{"line":889,"column":30},"line":889,"code":"    it('uses ref reach options', () => {\n\n        const ref = Joi.ref('b/c', { separator: '/' });\n        expect(ref.root).to.equal('b');\n\n        const schema = Joi.object({\n            a: ref,\n            b: {\n                c: Joi.any()\n            }\n        });\n\n        Helper.validate(schema, [[{ a: 5, b: { c: 5 } }, true]]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"ignores the order in which keys are defined","suites":["ref"],"updatePoint":{"line":904,"column":51},"line":904,"code":"    it('ignores the order in which keys are defined', () => {\n\n        const ab = Joi.object({\n            a: {\n                c: Joi.number()\n            },\n            b: Joi.ref('a.c')\n        });\n\n        Helper.validate(ab, [[{ a: { c: '5' }, b: 5 }, true, { a: { c: 5 }, b: 5 }]]);\n\n        const ba = Joi.object({\n            b: Joi.ref('a.c'),\n            a: {\n                c: Joi.number()\n            }\n        });\n\n        Helper.validate(ba, [[{ a: { c: '5' }, b: 5 }, true, { a: { c: 5 }, b: 5 }]]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref as default value","suites":["ref"],"updatePoint":{"line":925,"column":33},"line":925,"code":"    it('uses ref as default value', async () => {\n\n        const schema = Joi.object({\n            a: Joi.any().default(Joi.ref('b')),\n            b: Joi.any()\n        });\n\n        const value = await schema.validateAsync({ b: 6 });\n        expect(value).to.equal({ a: 6, b: 6 });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref mixed with normal values","suites":["ref"],"updatePoint":{"line":936,"column":41},"line":936,"code":"    it('uses ref mixed with normal values', async () => {\n\n        const schema = Joi.object({\n            a: Joi.number().valid(1, Joi.ref('b')),\n            b: Joi.any()\n        });\n\n        expect(await schema.validateAsync({ a: 6, b: 6 })).to.equal({ a: 6, b: 6 });\n        expect(await schema.validateAsync({ a: 1, b: 6 })).to.equal({ a: 1, b: 6 });\n        Helper.validate(schema, [[{ a: 6, b: 1 }, false, '\"a\" must be one of [1, ref:b]']]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses ref as default value regardless of order","suites":["ref"],"updatePoint":{"line":948,"column":53},"line":948,"code":"    it('uses ref as default value regardless of order', async () => {\n\n        const ab = Joi.object({\n            a: Joi.any().default(Joi.ref('b')),\n            b: Joi.number()\n        });\n\n        const value = await ab.validateAsync({ b: '6' });\n        expect(value).to.equal({ a: 6, b: 6 });\n\n        const ba = Joi.object({\n            b: Joi.number(),\n            a: Joi.any().default(Joi.ref('b'))\n        });\n\n        const value2 = await ba.validateAsync({ b: '6' });\n        expect(value2).to.equal({ a: 6, b: 6 });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"ignores the order in which keys are defined with alternatives","suites":["ref"],"updatePoint":{"line":967,"column":69},"line":967,"code":"    it('ignores the order in which keys are defined with alternatives', () => {\n\n        const ref1 = Joi.ref('a.c');\n        const ref2 = Joi.ref('c');\n        const a = Joi.object({ c: Joi.number() });\n        const b = Joi.alternatives([ref1, ref2]);\n        const c = Joi.number();\n\n        for (const schema of [{ a, b, c }, { b, a, c }, { b, c, a }, { a, c, b }, { c, a, b }, { c, b, a }]) {\n            Helper.validate(Joi.object().keys(schema), [\n                [{ a: {} }, true],\n                [{ a: { c: '5' }, b: 5 }, true, { a: { c: 5 }, b: 5 }],\n                [{ a: { c: '5' }, b: 6, c: '6' }, true, { a: { c: 5 }, b: 6, c: 6 }],\n                [{ a: { c: '5' }, b: 7, c: '6' }, false, {\n                    message: '\"b\" must be one of [ref:a.c, ref:c]',\n                    type: 'alternatives.types',\n                    path: ['b'],\n                    context: {\n                        key: 'b',\n                        label: 'b',\n                        value: 7,\n                        types: [ref1, ref2]\n                    }\n                }]\n            ]);\n        }\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses context as default value","suites":["ref"],"updatePoint":{"line":995,"column":37},"line":995,"code":"    it('uses context as default value', async () => {\n\n        const schema = Joi.object({\n            a: Joi.any().default(Joi.ref('$x')),\n            b: Joi.any()\n        });\n\n        const value = await schema.validateAsync({ b: 6 }, { context: { x: 22 } });\n        expect(value).to.equal({ a: 22, b: 6 });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses context as default value with custom prefix","suites":["ref"],"updatePoint":{"line":1006,"column":56},"line":1006,"code":"    it('uses context as default value with custom prefix', async () => {\n\n        const schema = Joi.object({\n            a: Joi.any().default(Joi.ref('@x', { prefix: { global: '@' } })),\n            b: Joi.any()\n        });\n\n        const value = await schema.validateAsync({ b: 6 }, { context: { x: 22 } });\n        expect(value).to.equal({ a: 22, b: 6 });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses context as a valid value","suites":["ref"],"updatePoint":{"line":1017,"column":37},"line":1017,"code":"    it('uses context as a valid value', () => {\n\n        const ref = Joi.ref('$x');\n        const schema = Joi.object({\n            a: ref,\n            b: Joi.any()\n        });\n\n        Helper.validate(schema, { context: { x: 22 } }, [\n            [{ a: 5, b: 6 }, false, {\n                message: '\"a\" must be [ref:global:x]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ a: 5 }, false, {\n                message: '\"a\" must be [ref:global:x]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: 5, valids: [ref], label: 'a', key: 'a' }\n            }],\n            [{ a: 22 }, true],\n            [{ b: 5 }, true],\n            [{ a: 22, b: 5 }, true],\n            [{ a: '22', b: '5' }, false, {\n                message: '\"a\" must be [ref:global:x]',\n                path: ['a'],\n                type: 'any.only',\n                context: { value: '22', valids: [ref], label: 'a', key: 'a' }\n            }]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses context in when condition","suites":["ref"],"updatePoint":{"line":1050,"column":38},"line":1050,"code":"    it('uses context in when condition', () => {\n\n        const schema = Joi.object({\n            a: Joi.boolean().when('$x', { is: Joi.exist(), otherwise: Joi.forbidden() })\n        });\n\n        Helper.validate(schema, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: {} }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: { x: 1 } }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" must be a boolean',\n                path: ['a'],\n                type: 'boolean.base',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"uses nested context in when condition","suites":["ref"],"updatePoint":{"line":1100,"column":45},"line":1100,"code":"    it('uses nested context in when condition', () => {\n\n        const schema = Joi.object({\n            a: Joi.boolean().when('$x.y', { is: Joi.exist(), otherwise: Joi.forbidden() })\n        });\n\n        Helper.validate(schema, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: {} }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: { x: 1 } }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: { x: {} } }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, false, {\n                message: '\"a\" is not allowed',\n                path: ['a'],\n                type: 'any.unknown',\n                context: { label: 'a', key: 'a', value: true }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: { x: { y: 1 } } }, [\n            [{}, true],\n            [{ a: 'x' }, false, {\n                message: '\"a\" must be a boolean',\n                path: ['a'],\n                type: 'boolean.base',\n                context: { label: 'a', key: 'a', value: 'x' }\n            }],\n            [{ a: true }, true]\n        ]);\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"describes schema with ref","suites":["ref"],"updatePoint":{"line":1182,"column":33},"line":1182,"code":"    it('describes schema with ref', () => {\n\n        const schema = Joi\n            .valid(Joi.ref('a.b'))\n            .invalid(Joi.ref('$b.c'))\n            .default(Joi.ref('a.b'))\n            .when('a.b', {\n                is: Joi.date().min(Joi.ref('a.b')).max(Joi.ref('a.b')),\n                then: Joi.number().min(Joi.ref('a.b')).max(Joi.ref('a.b')).greater(Joi.ref('a.b')).less(Joi.ref('a.b')),\n                otherwise: Joi.object({\n                    a: Joi.string().min(Joi.ref('b.c')).max(Joi.ref('b.c')).length(Joi.ref('b.c'))\n                }).with('a', 'b').without('b', 'c').assert('a.b', Joi.ref('a.b'))\n            });\n\n        expect(schema.describe()).to.equal({\n            type: 'any',\n            flags: { only: true, default: { ref: { path: ['a', 'b'] } } },\n            allow: [{ ref: { path: ['a', 'b'] } }],\n            invalid: [{ ref: { type: 'global', path: ['b', 'c'] } }],\n            whens: [{\n                ref: { path: ['a', 'b'] },\n                is: {\n                    type: 'date',\n                    rules: [\n                        { name: 'min', args: { date: { ref: { path: ['a', 'b'] } } } },\n                        { name: 'max', args: { date: { ref: { path: ['a', 'b'] } } } }\n                    ]\n                },\n                then: {\n                    type: 'number',\n                    rules: [\n                        { name: 'min', args: { limit: { ref: { path: ['a', 'b'] } } } },\n                        { name: 'max', args: { limit: { ref: { path: ['a', 'b'] } } } },\n                        { name: 'greater', args: { limit: { ref: { path: ['a', 'b'] } } } },\n                        { name: 'less', args: { limit: { ref: { path: ['a', 'b'] } } } }\n                    ]\n                },\n                otherwise: {\n                    type: 'object',\n                    rules: [{\n                        name: 'assert',\n                        args: {\n                            schema: {\n                                type: 'any',\n                                flags: { only: true },\n                                allow: [{ override: true }, { ref: { path: ['a', 'b'] } }]\n                            },\n                            subject: { ref: { path: ['a', 'b'] } }\n                        }\n                    }],\n                    keys: {\n                        a: {\n                            type: 'string',\n                            rules: [\n                                { name: 'min', args: { limit: { ref: { path: ['b', 'c'] } } } },\n                                { name: 'max', args: { limit: { ref: { path: ['b', 'c'] } } } },\n                                { name: 'length', args: { limit: { ref: { path: ['b', 'c'] } } } }\n                            ]\n                        }\n                    },\n                    dependencies: [{\n                        rel: 'with',\n                        key: 'a',\n                        peers: ['b']\n                    },\n                    {\n                        rel: 'without',\n                        key: 'b',\n                        peers: ['c']\n                    }]\n                }\n            }]\n        });\n    });","file":"ref.js","skipped":false,"dir":"test"},{"name":"clones reference","suites":["ref","clone()"],"updatePoint":{"line":1259,"column":28},"line":1259,"code":"        it('clones reference', () => {\n\n            const ref = Joi.ref('a.b.c');\n            const clone = ref.clone();\n            expect(ref).to.equal(clone);\n            expect(ref).to.not.shallow.equal(clone);\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"ignores global prefix when conflicts with separator","suites":["ref","context()"],"updatePoint":{"line":1270,"column":63},"line":1270,"code":"        it('ignores global prefix when conflicts with separator', () => {\n\n            expect(Joi.ref('$a$b', { separator: '$' })).to.equal({\n                adjust: null,\n                in: false,\n                iterables: null,\n                map: null,\n                separator: '$',\n                type: 'value',\n                ancestor: 0,\n                path: ['a', 'b'],\n                depth: 2,\n                key: 'a$b',\n                root: 'a',\n                display: 'ref:$a$b'\n            });\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"ignores local prefix when conflicts with separator","suites":["ref","context()"],"updatePoint":{"line":1288,"column":62},"line":1288,"code":"        it('ignores local prefix when conflicts with separator', () => {\n\n            expect(Joi.ref('#a#b', { separator: '#' })).to.equal({\n                adjust: null,\n                in: false,\n                iterables: null,\n                map: null,\n                separator: '#',\n                type: 'value',\n                ancestor: 0,\n                path: ['a', 'b'],\n                depth: 2,\n                key: 'a#b',\n                root: 'a',\n                display: 'ref:#a#b'\n            });\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"throws when key is missing","suites":["ref","create()"],"updatePoint":{"line":1309,"column":38},"line":1309,"code":"        it('throws when key is missing', () => {\n\n            expect(() => Joi.ref(5)).to.throw('Invalid reference key: 5');\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"finds root with default separator","suites":["ref","create()"],"updatePoint":{"line":1314,"column":45},"line":1314,"code":"        it('finds root with default separator', () => {\n\n            expect(Joi.ref('a.b.c').root).to.equal('a');\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"finds root with default separator and options","suites":["ref","create()"],"updatePoint":{"line":1319,"column":57},"line":1319,"code":"        it('finds root with default separator and options', () => {\n\n            expect(Joi.ref('a.b.c', {}).root).to.equal('a');\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"finds root with custom separator","suites":["ref","create()"],"updatePoint":{"line":1324,"column":44},"line":1324,"code":"        it('finds root with custom separator', () => {\n\n            expect(Joi.ref('a+b+c', { separator: '+' }).root).to.equal('a');\n        });","file":"ref.js","skipped":false,"dir":"test"},{"name":"skips template without {","suites":["Template"],"updatePoint":{"line":18,"column":32},"line":18,"code":"    it('skips template without {', () => {\n\n        const source = 'text without variables';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal(source);\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"skips template without variables","suites":["Template"],"updatePoint":{"line":28,"column":40},"line":28,"code":"    it('skips template without variables', () => {\n\n        const source = 'text {{{ without }}} any }} variables';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal(source);\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"skips template without variables (trailing {)","suites":["Template"],"updatePoint":{"line":38,"column":53},"line":38,"code":"    it('skips template without variables (trailing {)', () => {\n\n        const source = 'text {{{ without }}} any }} variables {';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal(source);\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"skips template without variables (trailing {{)","suites":["Template"],"updatePoint":{"line":48,"column":54},"line":48,"code":"    it('skips template without variables (trailing {{)', () => {\n\n        const source = 'text {{{ without }}} any }} variables {{';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal(source);\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"skips template without reference variables (trailing {{)","suites":["Template"],"updatePoint":{"line":58,"column":64},"line":58,"code":"    it('skips template without reference variables (trailing {{)', () => {\n\n        const source = 'text {\"x\"} {{{ without }}} any }} variables {{';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal('text x {{{ without }}} any }} variables {{');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"skips template without variables (escaped)","suites":["Template"],"updatePoint":{"line":68,"column":50},"line":68,"code":"    it('skips template without variables (escaped)', () => {\n\n        const source = 'text {{{ without }}} any }} \\\\{{escaped}} variables';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.isDynamic()).to.be.false();\n        expect(template.render()).to.equal('text {{{ without }}} any }} {{escaped}} variables');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"parses template (escaped)","suites":["Template"],"updatePoint":{"line":78,"column":33},"line":78,"code":"    it('parses template (escaped)', () => {\n\n        const source = 'text {{$x}}{{$y}}{{$z}} \\\\{{escaped}} xxx abc {{{ignore}} 123 {{x';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.render({}, {}, { context: { x: 'hello', y: '!' } })).to.equal('text hello&#x21; {{escaped}} xxx abc {{{ignore}} 123 {{x');\n        expect(template.render({}, {}, { context: { x: 'hello', y: '!' } }, {}, { errors: { escapeHtml: false } })).to.equal('text hello! {{escaped}} xxx abc {{{ignore}} 123 {{x');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"parses template with single variable","suites":["Template"],"updatePoint":{"line":88,"column":44},"line":88,"code":"    it('parses template with single variable', () => {\n\n        const source = '{$x}';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.render({}, {}, { context: { x: 'hello' } })).to.equal('hello');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"parses template (raw)","suites":["Template"],"updatePoint":{"line":97,"column":29},"line":97,"code":"    it('parses template (raw)', () => {\n\n        const source = 'text {$x}{$y}{$z} \\\\{{escaped}} xxx abc {{{ignore}} 123 {{x';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.render({}, {}, { context: { x: 'hello', y: '!' } })).to.equal('text hello! {{escaped}} xxx abc {{{ignore}} 123 {{x');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"parses template with odd {{ variables","suites":["Template"],"updatePoint":{"line":106,"column":45},"line":106,"code":"    it('parses template with odd {{ variables', () => {\n\n        const source = 'text {{$\\\\{{\\\\}} }} \\\\{{boom}} {{!\\\\}}';\n        const template = Joi.x(source);\n\n        expect(template.source).to.equal(source);\n        expect(template.render({}, {}, { context: { '{{}}': 'and' } })).to.equal('text and {{boom}} {{!}}');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"throws on invalid characters","suites":["Template"],"updatePoint":{"line":115,"column":36},"line":115,"code":"    it('throws on invalid characters', () => {\n\n        expect(() => Joi.x('test\\u0000')).to.throw('Template source cannot contain reserved control characters');\n        expect(() => Joi.x('test\\u0001')).to.throw('Template source cannot contain reserved control characters');\n    });","file":"template.js","skipped":false,"dir":"test"},{"name":"checks if item is a joi template","suites":["Template","isExpression()"],"updatePoint":{"line":123,"column":44},"line":123,"code":"        it('checks if item is a joi template', () => {\n\n            expect(Joi.isExpression(null)).to.be.false();\n            expect(Joi.isExpression({})).to.be.false();\n            expect(Joi.isExpression('test')).to.be.false();\n            expect(Joi.isExpression(Joi.x('test'))).to.be.true();\n        });","file":"template.js","skipped":false,"dir":"test"},{"name":"errors on template with invalid formula","suites":["Template","_ref()"],"updatePoint":{"line":134,"column":51},"line":134,"code":"        it('errors on template with invalid formula', () => {\n\n            const source = '{x +}';\n            expect(() => Joi.x(source)).to.throw('Invalid template variable \"x +\" fails due to: Formula contains invalid trailing operator');\n        });","file":"template.js","skipped":false,"dir":"test"},{"name":"resolves ref","suites":["Template","stringify()"],"updatePoint":{"line":143,"column":24},"line":143,"code":"        it('resolves ref', () => {\n\n            const ref = Joi.ref('a', { render: 'true' });\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.number().min(ref)\n            });\n\n            expect(schema.validate({ a: 10, b: 5 }).error).to.be.an.error('\"b\" must be greater than or equal to 10');\n        });","file":"template.js","skipped":false,"dir":"test"},{"name":"resolves ref (in)","suites":["Template","stringify()"],"updatePoint":{"line":154,"column":29},"line":154,"code":"        it('resolves ref (in)', () => {\n\n            const ref = Joi.in('a', { render: 'true' });\n            const schema = Joi.object({\n                a: Joi.array().items(Joi.number()),\n                b: Joi.number().valid(ref)\n            });\n\n            expect(schema.validate({ a: [1, 2, 3], b: 5 }).error).to.be.an.error('\"b\" must be [1, 2, 3]');\n        });","file":"template.js","skipped":false,"dir":"test"},{"name":"ignores missing options","suites":["Template","functions","msg()"],"updatePoint":{"line":170,"column":39},"line":170,"code":"            it('ignores missing options', () => {\n\n                const template = Joi.x('{msg(\"x\")}');\n                expect(template.render({}, {}, {}, {})).to.equal('');\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"ignores missing codes","suites":["Template","functions","msg()"],"updatePoint":{"line":176,"column":37},"line":176,"code":"            it('ignores missing codes', () => {\n\n                const template = Joi.x('{msg(\"x\")}');\n                expect(template.render({}, {}, {}, {}, { messages: [] })).to.equal('');\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"uses code in first set","suites":["Template","functions","msg()"],"updatePoint":{"line":182,"column":38},"line":182,"code":"            it('uses code in first set', () => {\n\n                const template = Joi.x('{msg(\"x\")}');\n                expect(template.render({}, {}, { errors: {} }, {}, { messages: [{ x: Joi.x('X') }] })).to.equal('X');\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"uses code in second set","suites":["Template","functions","msg()"],"updatePoint":{"line":188,"column":39},"line":188,"code":"            it('uses code in second set', () => {\n\n                const template = Joi.x('{msg(\"x\")}');\n                expect(template.render({}, {}, { errors: {} }, {}, { messages: [null, { x: Joi.x('X') }] })).to.equal('X');\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"casts values to numbers","suites":["Template","functions","number()"],"updatePoint":{"line":197,"column":39},"line":197,"code":"            it('casts values to numbers', () => {\n\n                const schema = Joi.valid(Joi.x('{number(1) + number(true) + number(false) + number(\"1\") + number($x)}'));\n                Helper.validate(schema, { context: { x: {} } }, [[3, true]]);\n                Helper.validate(schema, { context: { x: {} } }, [[4, false, '\"value\" must be [{number(1) + number(true) + number(false) + number(\"1\") + number($x)}]']]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"calculates object size","suites":["Template","functions","length()"],"updatePoint":{"line":207,"column":38},"line":207,"code":"            it('calculates object size', () => {\n\n                const schema = Joi.object({\n                    a: Joi.array().length(Joi.x('{length(b)}')),\n                    b: Joi.object()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: [1, 2], b: { a: true, b: true } }, true],\n                    [{ a: [1, 2, 3], b: { a: true, b: true } }, false, '\"a\" must contain {length(b)} items']\n                ]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"calcualtes array size","suites":["Template","functions","length()"],"updatePoint":{"line":220,"column":37},"line":220,"code":"            it('calcualtes array size', () => {\n\n                const schema = Joi.object({\n                    a: Joi.array().length(Joi.x('{length(b)}')),\n                    b: Joi.array()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: [1, 2], b: [2, 3] }, true],\n                    [{ a: [1, 2, 3], b: [1] }, false, '\"a\" must contain {length(b)} items']\n                ]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"handles null","suites":["Template","functions","length()"],"updatePoint":{"line":233,"column":28},"line":233,"code":"            it('handles null', () => {\n\n                const schema = Joi.object({\n                    a: Joi.array().length(Joi.x('{length(b)}')),\n                    b: Joi.array().allow(null)\n                });\n\n                Helper.validate(schema, [\n                    [{ a: [1], b: null }, false, '\"a\" limit references \"{length(b)}\" which must be a positive integer']\n                ]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"handles strings","suites":["Template","functions","length()"],"updatePoint":{"line":245,"column":31},"line":245,"code":"            it('handles strings', () => {\n\n                const schema = Joi.object({\n                    a: Joi.array().length(Joi.x('{length(b)}')),\n                    b: Joi.string()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: [1], b: 'x' }, true],\n                    [{ a: [1], b: 'xx' }, false, '\"a\" must contain {length(b)} items']\n                ]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"handles items without length","suites":["Template","functions","length()"],"updatePoint":{"line":258,"column":44},"line":258,"code":"            it('handles items without length', () => {\n\n                const schema = Joi.object({\n                    a: Joi.array().length(Joi.x('{length(b)}')),\n                    b: Joi.number()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: [1], b: 1 }, false, '\"a\" limit references \"{length(b)}\" which must be a positive integer']\n                ]);\n            });","file":"template.js","skipped":false,"dir":"test"},{"name":"reuses tracer","suites":["Trace","trace()"],"updatePoint":{"line":22,"column":25},"line":22,"code":"        it('reuses tracer', () => {\n\n            const tracer = Joi.trace();\n            expect(Joi.trace()).to.shallow.equal(tracer);\n            Joi.untrace();\n\n            expect(Joi.trace()).to.not.shallow.equal(tracer);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"tracks rules","suites":["Trace","trace()"],"updatePoint":{"line":31,"column":24},"line":31,"code":"        it('tracks rules', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.string()\n                .lowercase()\n                .pattern(/\\d/);\n\n            schema.validate('a');\n            schema.validate('4');\n\n            expect(tracer.report()).to.be.null();\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports coverage","suites":["Trace","trace()"],"updatePoint":{"line":45,"column":28},"line":45,"code":"        it('reports coverage', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.string()\n                .lowercase()\n                .pattern(/\\d/)\n                .max(20)\n                .min(10);\n\n            schema.validate('123456789012345678901');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    message: 'Schema missing tests for pattern (always pass), max (always error), min (never used)',\n                    missing: [\n                        {\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            status: 'never used',\n                            rule: 'min'\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n\n            expect(tracer.report('missing')).to.be.null();\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports nested coverage","suites":["Trace","trace()"],"updatePoint":{"line":83,"column":35},"line":83,"code":"        it('reports nested coverage', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.object({\n                a: {\n                    x: Joi.string()\n                        .lowercase()\n                        .pattern(/\\d/)\n                        .max(20)\n                        .min(10)\n                },\n\n                b: Joi.number()\n                    .min(100)\n            });\n\n            schema.validate({ a: { x: '123456789012345678901' }, b: 11 });\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    severity: 'error',\n                    message: 'Schema missing tests for a.x:pattern (always pass), a.x:max (always error), a.x:min (never used), b (never reached)',\n                    missing: [\n                        {\n                            paths: [['a', 'x']],\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            paths: [['a', 'x']],\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            paths: [['a', 'x']],\n                            status: 'never used',\n                            rule: 'min'\n                        },\n                        {\n                            paths: [['b']],\n                            status: 'never reached'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"uses schema id","suites":["Trace","trace()"],"updatePoint":{"line":133,"column":26},"line":133,"code":"        it('uses schema id', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    x: Joi.string()\n                        .lowercase()\n                        .pattern(/\\d/)\n                        .max(20)\n                        .min(10)\n                })\n                    .id('A'),\n\n                b: Joi.number()\n                    .min(100),\n\n                c: Joi.any()\n                    .empty(Joi.number().max(10))\n            });\n\n            schema.validate({ a: { x: '123456789012345678901' }, b: 11, c: 5 });\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    severity: 'error',\n                    message: 'Schema missing tests for A.x:pattern (always pass), A.x:max (always error), A.x:min (never used), b (never reached), c (never reached)',\n                    missing: [\n                        {\n                            paths: [['A', 'x']],\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            paths: [['A', 'x']],\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            paths: [['A', 'x']],\n                            status: 'never used',\n                            rule: 'min'\n                        },\n                        {\n                            paths: [['b']],\n                            status: 'never reached'\n                        },\n                        {\n                            paths: [['c']],\n                            status: 'never reached'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"handles reused schema","suites":["Trace","trace()"],"updatePoint":{"line":191,"column":33},"line":191,"code":"        it('handles reused schema', () => {\n\n            const tracer = Joi.trace();\n\n            const key = Joi.any().empty(Joi.number().max(10));\n            const schema = Joi.object({\n                a: key,\n                b: key\n            });\n\n            schema.validate({ a: 5, b: 6 });\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    message: 'Schema missing tests for a.@empty:max (always pass)',\n                    severity: 'error',\n                    missing: [\n                        {\n                            paths: [['a', '@empty'], ['b', '@empty']],\n                            rule: 'max',\n                            status: 'always pass'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports skipped schema without rule","suites":["Trace","trace()"],"updatePoint":{"line":220,"column":47},"line":220,"code":"        it('reports skipped schema without rule', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.alternatives([\n                Joi.string(),\n                Joi.number()\n            ]);\n\n            schema.validate('x');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    message: 'Schema missing tests for @matches[1] (never reached)',\n                    severity: 'error',\n                    missing: [\n                        {\n                            paths: [['@matches', 1]],\n                            status: 'never reached'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports array items","suites":["Trace","trace()"],"updatePoint":{"line":247,"column":31},"line":247,"code":"        it('reports array items', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.array().items(Joi.boolean(), Joi.string());\n\n            schema.validate([true]);\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    severity: 'error',\n                    message: 'Schema missing tests for items (always pass), @items[1] (never reached)',\n                    missing: [\n                        {\n                            rule: 'items',\n                            status: 'always pass'\n                        },\n                        {\n                            paths: [['@items', 1]],\n                            status: 'never reached'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"tracks valid and invalid values","suites":["Trace","trace()"],"updatePoint":{"line":275,"column":43},"line":275,"code":"        it('tracks valid and invalid values', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.string()\n                .allow('a', 'b', 'c')\n                .deny('x', 'y', 'z');\n\n            schema.validate('a');\n            schema.validate('b');\n            schema.validate('x');\n            schema.validate('y');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 8,\n                    message: 'Schema missing tests for valids (c), invalids (z)',\n                    severity: 'error',\n                    missing: [\n                        {\n                            rule: 'valids',\n                            status: ['c']\n                        },\n                        {\n                            rule: 'invalids',\n                            status: ['z']\n                        }\n                    ]\n                }\n            ]);\n\n            schema.validate('c');\n            schema.validate('z');\n\n            expect(tracer.report(__filename)).to.be.null();\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"tracks valid values (refs)","suites":["Trace","trace()"],"updatePoint":{"line":313,"column":38},"line":313,"code":"        it('tracks valid values (refs)', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.string(),\n                c: Joi.string()\n                    .allow(Joi.ref('a'), Joi.ref('b'))\n            });\n\n            schema.validate({ a: 'a', b: 'b', c: 'a' });\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    message: 'Schema missing tests for valids (ref:b)',\n                    missing: [\n                        {\n                            rule: 'valids',\n                            status: ['ref:b']\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n\n            schema.validate({ a: 'a', b: 'b', c: 'b' });\n\n            expect(tracer.report(__filename)).to.be.null();\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"tracks default and failover","suites":["Trace","trace()"],"updatePoint":{"line":346,"column":39},"line":346,"code":"        it('tracks default and failover', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.string()\n                .default('x')\n                .failover('y');\n\n            schema.validate('test');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 5,\n                    message: 'Schema missing tests for default (never used), failover (never used)',\n                    missing: [\n                        {\n                            rule: 'default',\n                            status: 'never used'\n                        },\n                        {\n                            rule: 'failover',\n                            status: 'never used'\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n\n            schema.validate();\n            schema.validate({});\n\n            expect(tracer.report(__filename)).to.be.null();\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports coverage with manual location","suites":["Trace","trace()"],"updatePoint":{"line":381,"column":49},"line":381,"code":"        it('reports coverage with manual location', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.string().tracer()\n                .lowercase()\n                .pattern(/\\d/)\n                .max(20)\n                .min(10);\n\n            schema.validate('123456789012345678901');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 11,\n                    message: 'Schema missing tests for pattern (always pass), max (always error), min (never used)',\n                    missing: [\n                        {\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            status: 'never used',\n                            rule: 'min'\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports coverage with manual location (concat override)","suites":["Trace","trace()"],"updatePoint":{"line":417,"column":67},"line":417,"code":"        it('reports coverage with manual location (concat override)', () => {\n\n            const tracer = Joi.trace();\n\n            const base = Joi.string().lowercase()\n                .pattern(/\\d/)\n                .tracer();\n\n            const schema = Joi.any().concat(base).tracer()\n                .max(20)\n                .min(10);\n\n            schema.validate('123456789012345678901');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 9,\n                    message: 'Schema missing tests for pattern (always pass), max (always error), min (never used)',\n                    missing: [\n                        {\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            status: 'never used',\n                            rule: 'min'\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"reports coverage with manual location (concat)","suites":["Trace","trace()"],"updatePoint":{"line":455,"column":58},"line":455,"code":"        it('reports coverage with manual location (concat)', () => {\n\n            const tracer = Joi.trace();\n\n            const base = Joi.string().lowercase()\n                .pattern(/\\d/)\n                .tracer();\n\n            const schema = Joi.any().concat(base)\n                .max(20)\n                .min(10);\n\n            schema.validate('123456789012345678901');\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 11,\n                    message: 'Schema missing tests for pattern (always pass), max (always error), min (never used)',\n                    missing: [\n                        {\n                            status: 'always pass',\n                            rule: 'pattern'\n                        },\n                        {\n                            status: 'always error',\n                            rule: 'max'\n                        },\n                        {\n                            status: 'never used',\n                            rule: 'min'\n                        }\n                    ],\n                    severity: 'error'\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"handles when()","suites":["Trace","trace()"],"updatePoint":{"line":493,"column":26},"line":493,"code":"        it('handles when()', () => {\n\n            const tracer = Joi.trace();\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.string()\n                    .when('a', { is: true, then: Joi.string().min(10).allow('y') })\n                    .when('b', { is: true, then: Joi.string().max(100) })\n            });\n\n            schema.validate({ a: true, b: true, c: 'x' });\n            schema.validate({ a: true, b: true, c: 'y' });\n\n            expect(tracer.report(__filename)).to.equal([\n                {\n                    filename: __filename,\n                    line: Pinpoint.location().line - 6,\n                    message: 'Schema missing tests for c.@whens[0]:min (always error), c.@whens[1]:max (never used)',\n                    severity: 'error',\n                    missing: [\n                        {\n                            paths: [['c', '@whens', 0]],\n                            rule: 'min',\n                            status: 'always error'\n                        },\n                        {\n                            paths: [['c', '@whens', 1]],\n                            rule: 'max',\n                            status: 'never used'\n                        }\n                    ]\n                }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"creates debug log","suites":["Trace","debug"],"updatePoint":{"line":533,"column":29},"line":533,"code":"        it('creates debug log', () => {\n\n            const schema = Joi.object({\n                a: {\n                    x: Joi.string()\n                        .lowercase()\n                        .pattern(/\\d/)\n                        .max(20)\n                        .min(10)\n                },\n\n                b: Joi.number()\n                    .min(100),\n\n                c: Joi.not('y')\n            });\n\n            const debug = schema.validate({ a: { x: '12345678901234567890' }, b: 110, c: 'y' }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['a', 'x'] },\n                { type: 'rule', name: 'case', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'pattern', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'max', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['a', 'x'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['b'] },\n                { type: 'entry', path: ['c'] },\n                { type: 'invalid', value: 'y', path: ['c'] },\n                { type: 'resolve', ref: 'ref:local:label', to: 'c', path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"creates debug log (async)","suites":["Trace","debug"],"updatePoint":{"line":567,"column":37},"line":567,"code":"        it('creates debug log (async)', async () => {\n\n            const schema = Joi.object({\n                a: {\n                    x: Joi.string()\n                        .lowercase()\n                        .pattern(/\\d/)\n                        .max(20)\n                        .min(10)\n                },\n\n                b: Joi.number()\n                    .min(100),\n\n                c: Joi.not('y')\n            });\n\n            const err = await expect(schema.validateAsync({ a: { x: '12345678901234567890' }, b: 110, c: 'y' }, { debug: true })).to.reject();\n            expect(err.debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['a', 'x'] },\n                { type: 'rule', name: 'case', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'pattern', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'max', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['a', 'x'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['b'] },\n                { type: 'entry', path: ['c'] },\n                { type: 'invalid', value: 'y', path: ['c'] },\n                { type: 'resolve', ref: 'ref:local:label', to: 'c', path: ['c'] }\n            ]);\n\n            const { debug } = await schema.validateAsync({ a: { x: '12345678901234567890' }, b: 110, c: 'x' }, { debug: true });\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['a', 'x'] },\n                { type: 'rule', name: 'case', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'pattern', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'max', result: 'pass', path: ['a', 'x'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['a', 'x'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'rule', name: 'min', result: 'pass', path: ['b'] },\n                { type: 'entry', path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs when forks","suites":["Trace","debug"],"updatePoint":{"line":615,"column":27},"line":615,"code":"        it('logs when forks', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n\n                b: Joi.number()\n                    .when('a', { is: 1, then: 2, otherwise: 3 })\n                    .when('a', { is: 4, then: 5, otherwise: 6 }),       // This conflicts with the first when()\n\n                c: Joi.number()\n                    .when('a', [\n                        { is: 1, then: 2 },\n                        { is: 3, then: 4 }\n                    ])\n            });\n\n            const debug = schema.validate({ a: 1, b: 6 }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'resolve', ref: 'ref:a', to: 1, path: ['b'] },\n                { type: 'entry', path: ['b', '0.is'] },\n                { type: 'valid', value: 1, path: ['b', '0.is'] },\n                { type: 'resolve', ref: 'ref:a', to: 1, path: ['b'] },\n                { type: 'entry', path: ['b', '1.is'] },\n                { type: 'rule', name: 'when', result: '0.then, 1.otherwise', path: ['b'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'valid', value: 6, path: ['b'] },\n                { type: 'resolve', ref: 'ref:a', to: 1, path: ['c'] },\n                { type: 'entry', path: ['c', '0.0.is'] },\n                { type: 'valid', value: 1, path: ['c', '0.0.is'] },\n                { type: 'rule', name: 'when', result: '0.0.then', path: ['c'] },\n                { type: 'entry', path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs when on sub key","suites":["Trace","debug"],"updatePoint":{"line":651,"column":32},"line":651,"code":"        it('logs when on sub key', () => {\n\n            const building = Joi.object({\n                a: Joi.object({\n                    name: Joi.string().cache(),\n                    lucky: Joi.string()\n                        .when('name', { is: 'thirteen', then: Joi.valid('no') })\n                })\n            });\n\n            const structure = {\n                a: { name: 'first' }\n            };\n\n            const debug = building.validate(structure, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'validate', name: 'cached', result: false, path: ['a', 'name'] },\n                { type: 'entry', path: ['a', 'name'] },\n                { type: 'resolve', ref: 'ref:name', to: 'first', path: ['a', 'lucky'] },\n                { type: 'entry', path: ['a', 'lucky', '0.is'] },\n                { type: 'rule', name: 'when', result: '', path: ['a', 'lucky'] },\n                { type: 'entry', path: ['a', 'lucky'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs sub when condition (then)","suites":["Trace","debug"],"updatePoint":{"line":678,"column":42},"line":678,"code":"        it('logs sub when condition (then)', () => {\n\n            const sub = Joi.when('b', { is: true, then: 2, otherwise: 3 });\n            const schema = Joi.object({\n                a: Joi.boolean().required(),\n                b: Joi.boolean().required(),\n                c: Joi.number()\n                    .when('a', { is: true, then: sub, otherwise: 1 })\n            });\n\n            const debug = schema.validate({ a: true, b: true, c: 2 }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'resolve', ref: 'ref:a', to: true, path: ['c'] },\n                { type: 'entry', path: ['c', '0.is'] },\n                { type: 'valid', value: true, path: ['c', '0.is'] },\n                { type: 'resolve', ref: 'ref:b', to: true, path: ['c', '0.then'] },\n                { type: 'entry', path: ['c', '0.then', '0.is'] },\n                { type: 'valid', value: true, path: ['c', '0.then', '0.is'] },\n                { type: 'rule', name: 'when', result: '0.then', path: ['c', '0.then'] },\n                { type: 'rule', name: 'when', result: '0.then(0.then)', path: ['c'] },\n                { type: 'entry', path: ['c'] },\n                { type: 'valid', value: 2, path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs sub when condition (otherwise)","suites":["Trace","debug"],"updatePoint":{"line":706,"column":47},"line":706,"code":"        it('logs sub when condition (otherwise)', () => {\n\n            const sub = Joi.when('b', { is: true, then: 2, otherwise: 3 });\n            const schema = Joi.object({\n                a: Joi.boolean().required(),\n                b: Joi.boolean().required(),\n                c: Joi.number()\n                    .when('a', { is: true, then: 1, otherwise: sub })\n            });\n\n            const debug = schema.validate({ a: false, b: true, c: 2 }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'resolve', ref: 'ref:a', to: false, path: ['c'] },\n                { type: 'entry', path: ['c', '0.is'] },\n                { type: 'resolve', ref: 'ref:b', to: true, path: ['c', '0.otherwise'] },\n                { type: 'entry', path: ['c', '0.otherwise', '0.is'] },\n                { type: 'valid', value: true, path: ['c', '0.otherwise', '0.is'] },\n                { type: 'rule', name: 'when', result: '0.then', path: ['c', '0.otherwise'] },\n                { type: 'rule', name: 'when', result: '0.otherwise(0.then)', path: ['c'] },\n                { type: 'entry', path: ['c'] },\n                { type: 'valid', value: 2, path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs compounded whens","suites":["Trace","debug"],"updatePoint":{"line":733,"column":33},"line":733,"code":"        it('logs compounded whens', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.boolean()\n            })\n                .when('.a', {\n                    is: 'x',\n                    then: Joi.object({\n                        c: Joi.boolean()\n                    })\n                })\n                .when('.b', {\n                    is: true,\n                    then: Joi.object({\n                        c: Joi.forbidden()\n                    })\n                });\n\n            const debug = schema.validate({ a: 'x', b: true }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'resolve', ref: 'ref:.a', to: 'x', path: [] },\n                { type: 'entry', path: ['0.is'] },\n                { type: 'valid', value: 'x', path: ['0.is'] },\n                { type: 'resolve', ref: 'ref:.b', to: true, path: [] },\n                { type: 'entry', path: ['1.is'] },\n                { type: 'valid', value: true, path: ['1.is'] },\n                { type: 'rule', name: 'when', result: '0.then, 1.then', path: [] },\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'entry', path: ['c'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs changes in value","suites":["Trace","debug"],"updatePoint":{"line":768,"column":33},"line":768,"code":"        it('logs changes in value', () => {\n\n            const schema = Joi.number().raw();\n\n            const debug = schema.validate('123', { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'value', by: 'coerced', from: '123', to: 123, path: [] },\n                { type: 'value', by: 'raw', from: 123, to: '123', path: [] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"logs changes in value (with name)","suites":["Trace","debug"],"updatePoint":{"line":780,"column":45},"line":780,"code":"        it('logs changes in value (with name)', () => {\n\n            const schema = Joi.number().cast('string');\n\n            const debug = schema.validate('123', { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'value', by: 'coerced', from: '123', to: 123, path: [] },\n                { type: 'value', by: 'cast', name: 'string', from: 123, to: '123', path: [] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"debugs multiple time same schema (link)","suites":["Trace","debug"],"updatePoint":{"line":792,"column":51},"line":792,"code":"        it('debugs multiple time same schema (link)', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.link('a')\n                    .when('a', { then: Joi.forbidden() })\n            });\n\n            const debug1 = schema.validate({ a: true, b: true }, { debug: true }).debug;\n            expect(debug1).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'resolve', ref: 'ref:a', to: true, path: ['b'] },\n                { type: 'entry', path: ['b', '0.is'] },\n                { type: 'rule', name: 'when', result: '0.then', path: ['b'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'resolve', ref: 'ref:local:label', to: 'b', path: ['b'] }\n            ]);\n\n            const debug2 = schema.validate({ a: false, b: false }, { debug: true }).debug;\n            expect(debug2).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'resolve', ref: 'ref:a', to: false, path: ['b'] },\n                { type: 'entry', path: ['b', '0.is'] },\n                { type: 'invalid', value: false, path: ['b', '0.is'] },\n                { type: 'rule', name: 'when', result: '', path: ['b'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'entry', path: ['b', 'link:ref:a:boolean'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"debugs multiple time same schema (whens)","suites":["Trace","debug"],"updatePoint":{"line":824,"column":52},"line":824,"code":"        it('debugs multiple time same schema (whens)', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.number()\n                    .when('a', { is: 1, then: 2 })\n                    .when('a', { is: 2, then: 3 })\n            });\n\n            const values = [\n                { a: 1, b: 2 },\n                { a: 1, b: 3 },\n                { a: 2, b: 2 },\n                { a: 2, b: 3 }\n            ];\n\n            schema.validate({ a: 1, b: 2 });        // No debug\n\n            for (const value of values) {\n                schema.validate(value, { debug: true });\n            }\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"debugs multiple time same schema (whens + partial validate)","suites":["Trace","debug"],"updatePoint":{"line":847,"column":71},"line":847,"code":"        it('debugs multiple time same schema (whens + partial validate)', () => {\n\n            const x = Joi.object({\n                a: Joi.number(),\n                b: Joi.number()\n                    .when('a', { is: 1, then: 2 })\n                    .when('a', { is: 2, then: 3 })\n            });\n\n            const values = [\n                { x: { a: 1, b: 2 } },\n                { x: { a: 1, b: 3 } },\n                { x: { a: 2, b: 2 } },\n                { x: { a: 2, b: 3 } }\n            ];\n\n            x.validate({ a: 1, b: 2 });         // No debug\n\n            const schema = Joi.object({ x });\n\n            for (const value of values) {\n                schema.validate(value, { debug: true });\n            }\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"debugs multiple time same schema (recursive)","suites":["Trace","debug"],"updatePoint":{"line":872,"column":56},"line":872,"code":"        it('debugs multiple time same schema (recursive)', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.link('..')\n            });\n\n            const debug1 = schema.validate({ a: 1, b: { a: 2 } }, { debug: true }).debug;\n            expect(debug1).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'entry', path: ['b', 'link:ref:..:object'] },\n                { type: 'entry', path: ['b', 'a'] },\n                { type: 'entry', path: ['b', 'b'] }\n            ]);\n\n            const debug2 = schema.validate({ a: 1, b: { a: 3, b: { a: 4 } } }, { debug: true }).debug;\n            expect(debug2).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['a'] },\n                { type: 'entry', path: ['b'] },\n                { type: 'entry', path: ['b', 'link:ref:..:object'] },\n                { type: 'entry', path: ['b', 'a'] },\n                { type: 'entry', path: ['b', 'b'] },\n                { type: 'entry', path: ['b', 'b', 'link:ref:..:object'] },\n                { type: 'entry', path: ['b', 'b', 'a'] },\n                { type: 'entry', path: ['b', 'b', 'b'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"handles array item exclusions","suites":["Trace","debug"],"updatePoint":{"line":903,"column":41},"line":903,"code":"        it('handles array item exclusions', () => {\n\n            const schema = Joi.array().items(Joi.string().forbidden());\n\n            const debug = schema.validate(['x'], { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: [0] },\n                { type: 'rule', name: 'items', result: 'error', path: [] },\n                { type: 'resolve', ref: 'ref:local:label', to: '[0]', path: [0] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"handles recursive links with when","suites":["Trace","debug"],"updatePoint":{"line":916,"column":45},"line":916,"code":"        it('handles recursive links with when', () => {\n\n            const schema = Joi.object({\n                must: Joi.boolean().required(),\n                child: Joi.link('..')\n                    .when('must', { then: Joi.required() })\n            });\n\n            const debug = schema.validate({ must: true, child: { must: true, child: { must: false } } }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'entry', path: ['must'] },\n                { type: 'resolve', ref: 'ref:must', to: true, path: ['child'] },\n                { type: 'entry', path: ['child', '0.is'] },\n                { type: 'rule', name: 'when', result: '0.then', path: ['child'] },\n                { type: 'entry', path: ['child'] },\n                { type: 'entry', path: ['child', 'must'] },\n                { type: 'resolve', ref: 'ref:must', to: true, path: ['child', 'child'] },\n                { type: 'entry', path: ['child', 'child', '0.is'] },\n                { type: 'rule', name: 'when', result: '0.then', path: ['child', 'child'] },\n                { type: 'entry', path: ['child', 'child'] },\n                { type: 'entry', path: ['child', 'child', 'must'] },\n                { type: 'resolve', ref: 'ref:must', to: false, path: ['child', 'child', 'child'] },\n                { type: 'entry', path: ['child', 'child', 'child', '0.is'] },\n                { type: 'invalid', value: false, path: ['child', 'child', 'child', '0.is'] },\n                { type: 'rule', name: 'when', result: '', path: ['child', 'child', 'child'] },\n                { type: 'entry', path: ['child', 'child', 'child'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"handles link.concat() after resolved","suites":["Trace","debug"],"updatePoint":{"line":946,"column":48},"line":946,"code":"        it('handles link.concat() after resolved', () => {\n\n            const a = Joi.object({\n                x: Joi.link('..')\n            });\n\n            const b = Joi.object({\n                x: Joi.forbidden()\n            });\n\n            a.validate({ x: {} }, { debug: true });\n\n            const schema = a.concat(b);\n            const debug = schema.validate({ x: {} }, { debug: true }).debug;\n            expect(debug).to.equal([\n                { type: 'entry', path: [] },\n                { type: 'rule', name: 'when', result: '0.concat', path: ['x'] },\n                { type: 'entry', path: ['x'] },\n                { type: 'resolve', ref: 'ref:local:label', to: 'x', path: ['x'] }\n            ]);\n        });","file":"trace.js","skipped":false,"dir":"test"},{"name":"fails when no alternatives are provided","suites":["alternatives"],"updatePoint":{"line":19,"column":47},"line":19,"code":"    it('fails when no alternatives are provided', () => {\n\n        Helper.validate(Joi.alternatives(), [\n            ['a', false, {\n                context: {\n                    label: 'value',\n                    value: 'a'\n                },\n                message: '\"value\" does not match any of the allowed types',\n                path: [],\n                type: 'alternatives.any'\n            }]\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"allows undefined when no alternatives are provided","suites":["alternatives"],"updatePoint":{"line":34,"column":58},"line":34,"code":"    it('allows undefined when no alternatives are provided', () => {\n\n        Helper.validate(Joi.alternatives(), [\n            [undefined, true]\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"applies modifiers when higher priority converts","suites":["alternatives"],"updatePoint":{"line":41,"column":55},"line":41,"code":"    it('applies modifiers when higher priority converts', () => {\n\n        const schema = Joi.object({\n            a: [\n                Joi.number(),\n                Joi.string()\n            ]\n        });\n\n        Helper.validate(schema, [\n            [{ a: '5' }, true, { a: 5 }]\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"applies modifiers when lower priority valid is a match","suites":["alternatives"],"updatePoint":{"line":55,"column":62},"line":55,"code":"    it('applies modifiers when lower priority valid is a match', () => {\n\n        const schema = Joi.object({\n            a: [\n                Joi.number(),\n                Joi.valid('5')\n            ]\n        });\n\n        Helper.validate(schema, [\n            [{ a: '5' }, true, { a: 5 }]\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"does not apply modifier if alternative fails","suites":["alternatives"],"updatePoint":{"line":69,"column":52},"line":69,"code":"    it('does not apply modifier if alternative fails', () => {\n\n        const schema = Joi.object({\n            a: [\n                Joi.object({ c: Joi.any(), d: Joi.number() }).rename('b', 'c'),\n                { b: Joi.any(), d: Joi.string() }\n            ]\n        });\n\n        Helper.validate(schema, [\n            [{ a: { b: 'any', d: 'string' } }, true]\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"consolidates types only when all coming from top level base errors","suites":["alternatives"],"updatePoint":{"line":83,"column":74},"line":83,"code":"    it('consolidates types only when all coming from top level base errors', () => {\n\n        const schema = Joi.alternatives(\n            Joi.string(),\n            Joi.array().items(Joi.string())\n        );\n\n        Helper.validate(schema, [\n            [[1], false, '\"[0]\" must be a string']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"consolidates types only when all are base or valids","suites":["alternatives"],"updatePoint":{"line":95,"column":59},"line":95,"code":"    it('consolidates types only when all are base or valids', () => {\n\n        const schema = Joi.alternatives(\n            Joi.string(),\n            Joi.number().min(1)\n        );\n\n        Helper.validate(schema, [\n            [0, false, '\"value\" must be greater than or equal to 1']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"consolidates types with valid values","suites":["alternatives"],"updatePoint":{"line":107,"column":44},"line":107,"code":"    it('consolidates types with valid values', () => {\n\n        const schema = Joi.alternatives(Joi.boolean(), 'xyz');\n\n        Helper.validate(schema, [\n            ['x', false, '\"value\" must be one of [boolean, xyz]']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"consolidates types","suites":["alternatives"],"updatePoint":{"line":116,"column":26},"line":116,"code":"    it('consolidates types', () => {\n\n        const schema = Joi.alternatives(Joi.boolean(), Joi.binary());\n\n        Helper.validate(schema, [\n            [[], false, '\"value\" must be one of [boolean, binary]']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"passes errors through when abortEarly is false","suites":["alternatives"],"updatePoint":{"line":125,"column":54},"line":125,"code":"    it('passes errors through when abortEarly is false', () => {\n\n        const schema = Joi.alternatives(Joi.number().min(1).positive(), Joi.binary());\n\n        Helper.validate(schema, { abortEarly: false }, [\n            [-1, false, '\"value\" does not match any of the allowed types']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"abstracts multiple complex object errors","suites":["alternatives"],"updatePoint":{"line":134,"column":48},"line":134,"code":"    it('abstracts multiple complex object errors', () => {\n\n        const schema = Joi.alternatives([\n            Joi.object({ a: Joi.string() }),\n            Joi.object({ b: Joi.string() })\n        ]);\n\n        Helper.validate(schema, [\n            [{ c: 1 }, false, '\"value\" does not match any of the allowed types']\n        ]);\n    });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"throws on invalid ref (not string)","suites":["alternatives","conditional()"],"updatePoint":{"line":148,"column":46},"line":148,"code":"        it('throws on invalid ref (not string)', () => {\n\n            expect(() => Joi.alternatives().conditional(5, { is: 6, then: Joi.number() })).to.throw('Invalid condition: 5');\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"throws on unreachable condition","suites":["alternatives","conditional()"],"updatePoint":{"line":153,"column":43},"line":153,"code":"        it('throws on unreachable condition', () => {\n\n            expect(() => {\n\n                Joi.object({\n\n                    a: Joi.alternatives().conditional('b', { is: 6, then: 7, otherwise: 0 }).conditional('b', { is: 6, then: 7 }),\n                    b: Joi.any()\n                });\n            }).to.throw('Unreachable condition');\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"tests only otherwise","suites":["alternatives","conditional()"],"updatePoint":{"line":165,"column":32},"line":165,"code":"        it('tests only otherwise', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.alternatives().conditional('a', { is: 0, otherwise: Joi.valid(1) })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 1, b: 1 }, true],\n                [{ a: 0, b: 2 }, false, {\n                    message: '\"b\" does not match any of the allowed types',\n                    path: ['b'],\n                    type: 'alternatives.any',\n                    context: { value: 2, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates conditional alternatives","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":185,"column":50},"line":185,"code":"            it('validates conditional alternatives', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives()\n                        .conditional('b', { is: 5, then: 'x', otherwise: 'y' }),\n                    b: Joi.any()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5 }, true],\n                    [{ a: 'x', b: 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: ['y'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 6 }, true],\n                    [{ a: 'z', b: 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'z', b: 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['y'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates conditional alternatives (self reference, explicit)","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":223,"column":77},"line":223,"code":"            it('validates conditional alternatives (self reference, explicit)', () => {\n\n                const schema = Joi.alternatives()\n                    .conditional(Joi.ref('a', { ancestor: 0 }), {\n                        is: true,\n                        then: {\n                            a: Joi.boolean().required(),\n                            b: Joi.string().required()\n                        },\n                        otherwise: {\n                            a: Joi.boolean().required(),\n                            c: Joi.string().required()\n                        }\n                    });\n\n                Helper.validate(schema, [\n                    [{ a: true, b: 'x' }, true],\n                    [{ a: true, b: 5 }, false, {\n                        message: '\"b\" must be a string',\n                        path: ['b'],\n                        type: 'string.base',\n                        context: { value: 5, key: 'b', label: 'b' }\n                    }],\n                    [{ a: true }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n                    [{ a: true, c: 5 }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n                    [{ a: true, c: 'x' }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n\n                    [{ a: false, b: 'x' }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, b: 5 }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, c: 5 }, false, {\n                        message: '\"c\" must be a string',\n                        path: ['c'],\n                        type: 'string.base',\n                        context: { value: 5, key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, c: 'x' }, true]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates conditional alternatives (self reference, implicit)","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":293,"column":77},"line":293,"code":"            it('validates conditional alternatives (self reference, implicit)', () => {\n\n                const schema = Joi.alternatives()\n                    .conditional('.a', {\n                        is: true,\n                        then: {\n                            a: Joi.boolean().required(),\n                            b: Joi.string().required()\n                        },\n                        otherwise: {\n                            a: Joi.boolean().required(),\n                            c: Joi.string().required()\n                        }\n                    });\n\n                Helper.validate(schema, [\n                    [{ a: true, b: 'x' }, true],\n                    [{ a: true, b: 5 }, false, {\n                        message: '\"b\" must be a string',\n                        path: ['b'],\n                        type: 'string.base',\n                        context: { value: 5, key: 'b', label: 'b' }\n                    }],\n                    [{ a: true }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n                    [{ a: true, c: 5 }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n                    [{ a: true, c: 'x' }, false, {\n                        message: '\"b\" is required',\n                        path: ['b'],\n                        type: 'any.required',\n                        context: { key: 'b', label: 'b' }\n                    }],\n\n                    [{ a: false, b: 'x' }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, b: 5 }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false }, false, {\n                        message: '\"c\" is required',\n                        path: ['c'],\n                        type: 'any.required',\n                        context: { key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, c: 5 }, false, {\n                        message: '\"c\" must be a string',\n                        path: ['c'],\n                        type: 'string.base',\n                        context: { value: 5, key: 'c', label: 'c' }\n                    }],\n                    [{ a: false, c: 'x' }, true]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates conditional alternatives (empty key)","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":363,"column":62},"line":363,"code":"            it('validates conditional alternatives (empty key)', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives()\n                        .conditional('', { is: 5, then: 'x', otherwise: 'y' }),\n                    '': Joi.any()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', '': 5 }, true],\n                    [{ a: 'x', '': 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: ['y'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', '': 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', '': 6 }, true],\n                    [{ a: 'z', '': 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'z', '': 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['y'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates only then","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":401,"column":35},"line":401,"code":"            it('validates only then', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives()\n                        .conditional(Joi.ref('b'), { is: 5, then: 'x' })\n                        .try('z'),\n                    b: Joi.any()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5 }, true],\n                    [{ a: 'x', b: 6 }, false, {\n                        message: '\"a\" must be [z]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: ['z'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 6 }, false, {\n                        message: '\"a\" must be [z]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['z'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'z', b: 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'z', b: 6 }, true]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates only otherwise","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":440,"column":40},"line":440,"code":"            it('validates only otherwise', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives()\n                        .conditional('b', { is: 5, otherwise: 'y' })\n                        .try('z'),\n                    b: Joi.any()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5 }, false, {\n                        message: '\"a\" must be [z]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: ['z'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'x', b: 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: ['y'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 5 }, false, {\n                        message: '\"a\" must be [z]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['z'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y', b: 6 }, true],\n                    [{ a: 'z', b: 5 }, true],\n                    [{ a: 'z', b: 6 }, false, {\n                        message: '\"a\" must be [y]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'z', valids: ['y'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates \"then\" when a preceding \"when\" has only \"otherwise\"","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":479,"column":77},"line":479,"code":"            it('validates \"then\" when a preceding \"when\" has only \"otherwise\"', () => {\n\n                const schema = Joi.object({\n                    a: Joi.number(),\n                    b: Joi.number(),\n                    c: Joi.alternatives()\n                        .conditional('a', { is: 1, otherwise: Joi.number().min(1) })\n                        .conditional('b', { is: 1, then: Joi.number().min(1), otherwise: Joi.number() })\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 1, b: 1, c: 0 }, false, {\n                        message: '\"c\" must be greater than or equal to 1',\n                        path: ['c'],\n                        type: 'number.min',\n                        context: { limit: 1, value: 0, label: 'c', key: 'c' }\n                    }],\n                    [{ a: 1, b: 1, c: 1 }, true],\n                    [{ a: 0, b: 1, c: 1 }, true],\n                    [{ a: 1, b: 0, c: 0 }, true]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when is is null","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":502,"column":41},"line":502,"code":"            it('validates when is is null', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: null, then: 'x', otherwise: Joi.number() }),\n                    b: Joi.any()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 1 }, true],\n                    [{ a: 'y' }, false, {\n                        message: '\"a\" must be a number',\n                        path: ['a'],\n                        type: 'number.base',\n                        context: { label: 'a', key: 'a', value: 'y' }\n                    }],\n                    [{ a: 'x', b: null }, true],\n                    [{ a: 'y', b: null }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 1, b: null }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 1, valids: ['x'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when is has ref","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":533,"column":41},"line":533,"code":"            it('validates when is has ref', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: Joi.ref('c'), then: 'x' }),\n                    b: Joi.any(),\n                    c: Joi.number()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5, c: '5' }, true, { a: 'x', b: 5, c: 5 }],\n                    [{ a: 'x', b: 5, c: '1' }, false, {\n                        message: '\"a\" does not match any of the allowed types',\n                        path: ['a'],\n                        type: 'alternatives.any',\n                        context: { label: 'a', key: 'a', value: 'x' }\n                    }],\n                    [{ a: 'x', b: '5', c: '5' }, false, {\n                        message: '\"a\" does not match any of the allowed types',\n                        path: ['a'],\n                        type: 'alternatives.any',\n                        context: { label: 'a', key: 'a', value: 'x' }\n                    }],\n                    [{ a: 'y', b: 5, c: 5 }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y' }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when is has ref pointing to a complex type","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":570,"column":68},"line":570,"code":"            it('validates when is has ref pointing to a complex type', () => {\n\n                const date = new Date(42);\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: Joi.ref('c'), then: 'x' }),\n                    b: Joi.date(),\n                    c: Joi.date()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: date, c: date }, true],\n                    [{ a: 'x', b: date, c: Date.now() }, false, {\n                        message: '\"a\" does not match any of the allowed types',\n                        path: ['a'],\n                        type: 'alternatives.any',\n                        context: { label: 'a', key: 'a', value: 'x' }\n                    }],\n                    [{ a: 'y', b: date, c: date }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y' }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when is has either ref pointing to a complex type or value","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":604,"column":84},"line":604,"code":"            it('validates when is has either ref pointing to a complex type or value', () => {\n\n                const date = new Date(42);\n                const now = Date.now();\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', {\n                        is: Joi.valid(\n                            new Date(+date), // Intentional cloning of the date to change the reference\n                            Joi.ref('c')\n                        ),\n                        then: 'x'\n                    }),\n                    b: Joi.date(),\n                    c: Joi.date()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: date, c: date }, true],\n                    [{ a: 'x', b: date, c: now }, true, { a: 'x', b: date, c: new Date(now) }],\n                    [{ a: 'y', b: date, c: date }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 'y' }, false, {\n                        message: '\"a\" must be [x]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when then has ref","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":639,"column":43},"line":639,"code":"            it('validates when then has ref', () => {\n\n                const ref = Joi.ref('c');\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: 5, then: ref }),\n                    b: Joi.any(),\n                    c: Joi.number()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5, c: '1' }, false, {\n                        message: '\"a\" must be [ref:c]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: [ref], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 1, b: 5, c: '1' }, true, { a: 1, b: 5, c: 1 }],\n                    [{ a: '1', b: 5, c: '1' }, false, {\n                        message: '\"a\" must be [ref:c]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: '1', valids: [ref], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when otherwise has ref","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":665,"column":48},"line":665,"code":"            it('validates when otherwise has ref', () => {\n\n                const ref = Joi.ref('c');\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: 6, otherwise: ref }),\n                    b: Joi.any(),\n                    c: Joi.number()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 'x', b: 5, c: '1' }, false, {\n                        message: '\"a\" must be [ref:c]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: 'x', valids: [ref], label: 'a', key: 'a' }\n                    }],\n                    [{ a: 1, b: 5, c: '1' }, true, { a: 1, b: 5, c: 1 }],\n                    [{ a: '1', b: 5, c: '1' }, false, {\n                        message: '\"a\" must be [ref:c]',\n                        path: ['a'],\n                        type: 'any.only',\n                        context: { value: '1', valids: [ref], label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when empty value","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":691,"column":42},"line":691,"code":"            it('validates when empty value', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', { is: true, then: Joi.required() }),\n                    b: Joi.boolean().default(false)\n                });\n\n                Helper.validate(schema, [\n                    [{ b: false }, true],\n                    [{ b: true }, true]           // true because required() only applies to the one alternative\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates when missing value","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":704,"column":44},"line":704,"code":"            it('validates when missing value', () => {\n\n                const schema = Joi.object({\n                    a: Joi.alternatives().conditional('b', {\n                        is: 5,\n                        then: Joi.optional(),\n                        otherwise: Joi.required()\n                    }).required(),\n                    b: Joi.number()\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 1 }, true],\n                    [{}, false, {\n                        message: '\"a\" is required',\n                        path: ['a'],\n                        type: 'any.required',\n                        context: { label: 'a', key: 'a' }\n                    }],\n                    [{ b: 1 }, false, {\n                        message: '\"a\" is required',\n                        path: ['a'],\n                        type: 'any.required',\n                        context: { label: 'a', key: 'a' }\n                    }],\n                    [{ a: 1, b: 1 }, true],\n                    [{ a: 1, b: 5 }, true],\n                    [{ b: 5 }, false, {\n                        message: '\"a\" is required',\n                        path: ['a'],\n                        type: 'any.required',\n                        context: { label: 'a', key: 'a' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates with nested whens","suites":["alternatives","conditional()","with ref"],"updatePoint":{"line":740,"column":43},"line":740,"code":"            it('validates with nested whens', () => {\n\n                // If ((b === 0 && a === 123) ||\n                //     (b !== 0 && a === anything))\n                // then c === 456\n                // else c === 789\n\n                const schema = Joi.object({\n                    a: Joi.number().required(),\n                    b: Joi.number().required(),\n                    c: Joi.alternatives().conditional('a', {\n                        is: Joi.alternatives().conditional('b', {\n                            is: Joi.valid(0),\n                            then: Joi.valid(123),\n                            otherwise: Joi.any()\n                        }),\n                        then: Joi.valid(456),\n                        otherwise: Joi.valid(789)\n                    })\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 123, b: 0, c: 456 }, true],\n                    [{ a: 0, b: 1, c: 456 }, true],\n                    [{ a: 0, b: 0, c: 789 }, true],\n                    [{ a: 123, b: 456, c: 456 }, true],\n                    [{ a: 0, b: 0, c: 456 }, false, {\n                        message: '\"c\" must be [789]',\n                        path: ['c'],\n                        type: 'any.only',\n                        context: { value: 456, valids: [789], label: 'c', key: 'c' }\n                    }],\n                    [{ a: 123, b: 456, c: 789 }, false, {\n                        message: '\"c\" must be [456]',\n                        path: ['c'],\n                        type: 'any.only',\n                        context: { value: 789, valids: [456], label: 'c', key: 'c' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"should peek inside a simple value","suites":["alternatives","conditional()","with schema"],"updatePoint":{"line":784,"column":49},"line":784,"code":"            it('should peek inside a simple value', () => {\n\n                const schema = Joi.alternatives()\n                    .conditional(Joi.number().min(0), { then: Joi.number().min(10), otherwise: Joi.number() });\n\n                Helper.validate(schema, [\n                    [-1, true, -1],\n                    [1, false, {\n                        message: '\"value\" must be greater than or equal to 10',\n                        path: [],\n                        type: 'number.min',\n                        context: { limit: 10, value: 1, label: 'value' }\n                    }],\n                    [10, true, 10]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"should peek inside an object","suites":["alternatives","conditional()","with schema"],"updatePoint":{"line":801,"column":44},"line":801,"code":"            it('should peek inside an object', () => {\n\n                const schema = Joi.alternatives()\n                    .conditional(Joi.object().keys({ foo: Joi.valid('hasBar').required() }).unknown(), {\n                        then: Joi.object({\n                            foo: Joi.string(),\n                            bar: Joi.number().required()\n                        }),\n                        otherwise: Joi.object({\n                            foo: Joi.string(),\n                            bar: Joi.number()\n                        })\n                    });\n\n                Helper.validate(schema, [\n                    [{ foo: 'whatever' }, true, { foo: 'whatever' }],\n                    [{ foo: 'hasBar' }, false, {\n                        message: '\"bar\" is required',\n                        path: ['bar'],\n                        type: 'any.required',\n                        context: { key: 'bar', label: 'bar' }\n                    }],\n                    [{ foo: 'hasBar', bar: 42 }, true, { foo: 'hasBar', bar: 42 }],\n                    [{}, true, {}]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"sets value based on multiple conditions","suites":["alternatives","conditional()","with switch"],"updatePoint":{"line":831,"column":55},"line":831,"code":"            it('sets value based on multiple conditions', () => {\n\n                const schema = Joi.object({\n                    a: Joi.number().required(),\n                    b: Joi.alternatives()\n                        .conditional('a', [\n                            { is: 0, then: Joi.valid(1) },\n                            { is: 1, then: Joi.valid(2) },\n                            { is: 2, then: Joi.valid(3), otherwise: Joi.valid(4) }\n                        ])\n                });\n\n                Helper.validate(schema, [\n                    [{ a: 0, b: 1 }, true],\n                    [{ a: 0, b: 2 }, false, {\n                        message: '\"b\" must be [1]',\n                        path: ['b'],\n                        type: 'any.only',\n                        context: { value: 2, valids: [1], label: 'b', key: 'b' }\n                    }],\n                    [{ a: 1, b: 2 }, true],\n                    [{ a: 1, b: 3 }, false, {\n                        message: '\"b\" must be [2]',\n                        path: ['b'],\n                        type: 'any.only',\n                        context: { value: 3, valids: [2], label: 'b', key: 'b' }\n                    }],\n                    [{ a: 2, b: 3 }, true],\n                    [{ a: 2, b: 2 }, false, {\n                        message: '\"b\" must be [3]',\n                        path: ['b'],\n                        type: 'any.only',\n                        context: { value: 2, valids: [3], label: 'b', key: 'b' }\n                    }],\n                    [{ a: 42, b: 4 }, true],\n                    [{ a: 42, b: 128 }, false, {\n                        message: '\"b\" must be [4]',\n                        path: ['b'],\n                        type: 'any.only',\n                        context: { value: 128, valids: [4], label: 'b', key: 'b' }\n                    }]\n                ]);\n            });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"describes when","suites":["alternatives","describe()"],"updatePoint":{"line":879,"column":26},"line":879,"code":"        it('describes when', () => {\n\n            const schema = Joi.object({\n                a: Joi.alternatives()\n                    .conditional('b', { is: 5, then: 'x' })\n                    .conditional('b', { is: 6, otherwise: 'y' })\n                    .try('z'),\n                b: Joi.any()\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    b: {\n                        type: 'any'\n                    },\n                    a: {\n                        type: 'alternatives',\n                        matches: [\n                            {\n                                ref: { path: ['b'] },\n                                is: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    },\n                                    allow: [{ override: true }, 5]\n                                },\n                                then: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'x']\n                                }\n                            },\n                            {\n                                ref: { path: ['b'] },\n                                is: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    },\n                                    allow: [{ override: true }, 6]\n                                },\n                                otherwise: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'y']\n                                }\n                            },\n                            {\n                                schema: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'z']\n                                }\n                            }\n                        ]\n                    }\n                }\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"describes when (only then)","suites":["alternatives","describe()"],"updatePoint":{"line":949,"column":38},"line":949,"code":"        it('describes when (only then)', () => {\n\n            const schema = Joi.object({\n                a: Joi.alternatives()\n                    .conditional('b', { is: 5, then: 'x' })\n                    .try(Joi.valid('z')),\n                b: Joi.any()\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    b: {\n                        type: 'any'\n                    },\n                    a: {\n                        type: 'alternatives',\n                        matches: [\n                            {\n                                ref: { path: ['b'] },\n                                is: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    },\n                                    allow: [{ override: true }, 5]\n                                },\n                                then: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'x']\n                                }\n                            },\n                            {\n                                schema: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: ['z']\n                                }\n                            }\n                        ]\n                    }\n                }\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"describes when (only otherwise)","suites":["alternatives","describe()"],"updatePoint":{"line":1000,"column":43},"line":1000,"code":"        it('describes when (only otherwise)', () => {\n\n            const schema = Joi.object({\n                a: Joi.alternatives()\n                    .conditional('b', { is: 5, otherwise: 'y' })\n                    .try('z'),\n                b: Joi.any()\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    b: {\n                        type: 'any'\n                    },\n                    a: {\n                        type: 'alternatives',\n                        matches: [\n                            {\n                                ref: { path: ['b'] },\n                                is: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    },\n                                    allow: [{ override: true }, 5]\n                                },\n                                otherwise: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'y']\n                                }\n                            },\n                            {\n                                schema: {\n                                    type: 'any',\n                                    flags: {\n                                        only: true\n                                    },\n                                    allow: [{ override: true }, 'z']\n                                }\n                            }\n                        ]\n                    }\n                }\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"describes when (with schema)","suites":["alternatives","describe()"],"updatePoint":{"line":1051,"column":40},"line":1051,"code":"        it('describes when (with schema)', () => {\n\n            const schema = Joi.alternatives()\n                .conditional(Joi.string().label('foo'), {\n                    then: Joi.string().required().min(1),\n                    otherwise: Joi.boolean()\n                });\n\n            const outcome = {\n                type: 'alternatives',\n                matches: [{\n                    is: {\n                        type: 'string',\n                        flags: {\n                            label: 'foo'\n                        }\n                    },\n                    then: {\n                        type: 'string',\n                        flags: { presence: 'required' },\n                        rules: [{ args: { limit: 1 }, name: 'min' }]\n                    },\n                    otherwise: {\n                        type: 'boolean'\n                    }\n                }]\n            };\n\n            expect(schema.describe()).to.equal(outcome);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"describes inherited fields (from any)","suites":["alternatives","describe()"],"updatePoint":{"line":1082,"column":49},"line":1082,"code":"        it('describes inherited fields (from any)', () => {\n\n            const schema = Joi.alternatives()\n                .try('a')\n                .description('d')\n                .example('a')\n                .meta('b')\n                .meta('c')\n                .note('f')\n                .tag('g');\n\n            const outcome = {\n                type: 'alternatives',\n                notes: ['f'],\n                tags: ['g'],\n                metas: ['b', 'c'],\n                examples: ['a'],\n                flags: {\n                    description: 'd'\n                },\n                matches: [{\n                    schema: {\n                        type: 'any',\n                        flags: {\n                            only: true\n                        },\n                        allow: [{ override: true }, 'a']\n                    }\n                }]\n            };\n\n            expect(schema.describe()).to.equal(outcome);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"overrides single try error","suites":["alternatives","error()"],"updatePoint":{"line":1119,"column":38},"line":1119,"code":"        it('overrides single try error', () => {\n\n            const override = new Error('failed!');\n\n            const schema = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number(),\n                    Joi.string().error(override)\n                ])\n            });\n\n            Helper.validate(schema, [\n                [{ x: [] }, false, {\n                    message: '\"x\" does not match any of the allowed types',\n                    type: 'alternatives.match',\n                    path: ['x'],\n                    context: {\n                        message: '\"x\" must be a number. Error: failed!',\n                        key: 'x',\n                        label: 'x',\n                        value: [],\n                        details: [\n                            {\n                                message: '\"x\" must be a number',\n                                path: ['x'],\n                                type: 'number.base',\n                                context: { key: 'x', label: 'x', value: [] }\n                            },\n                            {\n                                context: { error: override },\n                                message: 'Error: failed!',\n                                type: 'override'\n                            }\n                        ]\n                    }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"overrides top level error","suites":["alternatives","error()"],"updatePoint":{"line":1158,"column":37},"line":1158,"code":"        it('overrides top level error', () => {\n\n            const schema = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number(),\n                    Joi.string()\n                ])\n                    .error(new Error('failed!'))\n            });\n\n            Helper.validate(schema, [\n                [{ x: [] }, false, 'failed!']\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"passes the label to the underlying schema","suites":["alternatives","label()"],"updatePoint":{"line":1176,"column":53},"line":1176,"code":"        it('passes the label to the underlying schema', () => {\n\n            const schema = Joi.object().keys({\n                a: Joi.boolean(),\n\n                b: Joi.alternatives().conditional('a', {\n                    is: true,\n                    then: Joi.string().empty('').allow(null),\n                    otherwise: Joi.any()\n                })\n                    .label('Label b'),\n\n                c: Joi.alternatives().conditional('a', {\n                    is: true,\n                    then: Joi.any(),\n                    otherwise: Joi.string().empty('').allow(null)\n                })\n                    .label('Label c'),\n\n                d: Joi.alt()\n                    .try(Joi.string())\n                    .label('Label d')\n            })\n                .or('b', 'c', 'd');\n\n            Helper.validate(schema, [\n                [{ a: true, b: 1 }, false, {\n                    message: '\"Label b\" must be a string',\n                    path: ['b'],\n                    type: 'string.base',\n                    context: { value: 1, key: 'b', label: 'Label b' }\n                }],\n                [{ a: false, b: 1, d: 1 }, false, {\n                    message: '\"Label d\" must be a string',\n                    path: ['d'],\n                    type: 'string.base',\n                    context: { value: 1, key: 'd', label: 'Label d' }\n                }],\n                [{ a: false, b: 1, c: 1 }, false, {\n                    message: '\"Label c\" must be a string',\n                    path: ['c'],\n                    type: 'string.base',\n                    context: { value: 1, key: 'c', label: 'Label c' }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"does not modify the original schema","suites":["alternatives","label()"],"updatePoint":{"line":1223,"column":47},"line":1223,"code":"        it('does not modify the original schema', () => {\n\n            const schema = Joi.alternatives().conditional('a', {\n                is: true,\n                then: Joi.string().empty('').allow(null),\n                otherwise: Joi.any()\n            });\n\n            const labeled = schema.label('Label b');\n\n            expect(schema.describe()).to.equal({\n                type: 'alternatives',\n                matches: [{\n                    is: {\n                        type: 'any',\n                        flags: { only: true, presence: 'required' },\n                        allow: [{ override: true }, true]\n                    },\n                    ref: { path: ['a'] },\n                    then: {\n                        type: 'string',\n                        flags: {\n                            empty: {\n                                flags: { only: true },\n                                type: 'any',\n                                allow: ['']\n                            }\n                        },\n                        allow: [null]\n                    },\n                    otherwise: { type: 'any' }\n                }]\n            });\n\n            expect(labeled.describe()).to.equal({\n                flags: {\n                    label: 'Label b'\n                },\n                type: 'alternatives',\n                matches: [{\n                    is: {\n                        type: 'any',\n                        flags: { only: true, presence: 'required' },\n                        allow: [{ override: true }, true]\n                    },\n                    ref: { path: ['a'] },\n                    then: {\n                        type: 'string',\n                        flags: {\n                            label: 'Label b',\n                            empty: {\n                                flags: { only: true },\n                                type: 'any',\n                                allow: ['']\n                            }\n                        },\n                        allow: [null]\n                    },\n                    otherwise: {\n                        type: 'any',\n                        flags: { label: 'Label b' }\n                    }\n                }]\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"applies label to then","suites":["alternatives","label()"],"updatePoint":{"line":1289,"column":33},"line":1289,"code":"        it('applies label to then', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.alternatives()\n                    .conditional('a', { is: true, then: Joi.string() })\n                    .label('x')\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'boolean'\n                    },\n                    b: {\n                        type: 'alternatives',\n                        flags: {\n                            label: 'x'\n                        },\n                        matches: [\n                            {\n                                is: {\n                                    type: 'any',\n                                    allow: [{ override: true }, true],\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    }\n                                },\n                                ref: {\n                                    path: ['a']\n                                },\n                                then: {\n                                    type: 'string',\n                                    flags: {\n                                        label: 'x'\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                }\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"applies label to otherwise","suites":["alternatives","label()"],"updatePoint":{"line":1335,"column":38},"line":1335,"code":"        it('applies label to otherwise', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.alternatives()\n                    .conditional('a', { is: true, otherwise: Joi.string() })\n                    .label('x')\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'boolean'\n                    },\n                    b: {\n                        type: 'alternatives',\n                        flags: {\n                            label: 'x'\n                        },\n                        matches: [\n                            {\n                                is: {\n                                    type: 'any',\n                                    allow: [{ override: true }, true],\n                                    flags: {\n                                        only: true,\n                                        presence: 'required'\n                                    }\n                                },\n                                ref: {\n                                    path: ['a']\n                                },\n                                otherwise: {\n                                    type: 'string',\n                                    flags: {\n                                        label: 'x'\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                }\n            });\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"matches one","suites":["alternatives","match()"],"updatePoint":{"line":1384,"column":23},"line":1384,"code":"        it('matches one', () => {\n\n            const schema = Joi.alternatives([\n                Joi.number(),\n                Joi.string()\n            ])\n                .match('one');\n\n            Helper.validate(schema, [\n                [0, true, 0],\n                ['x', true, 'x'],\n                ['2', false, {\n                    message: '\"value\" matches more than one allowed type',\n                    path: [],\n                    type: 'alternatives.one',\n                    context: {\n                        label: 'value',\n                        value: '2'\n                    }\n                }],\n                [true, false, {\n                    message: '\"value\" does not match any of the allowed types',\n                    path: [],\n                    type: 'alternatives.any',\n                    context: {\n                        label: 'value',\n                        value: true,\n                        details: [\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: true\n                                        },\n                                        message: '\"value\" must be a number',\n                                        path: [],\n                                        type: 'number.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a number'\n                            },\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: true\n                                        },\n                                        message: '\"value\" must be a string',\n                                        path: [],\n                                        type: 'string.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a string'\n                            }\n                        ]\n                    }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"matches one (retains coerce)","suites":["alternatives","match()"],"updatePoint":{"line":1446,"column":40},"line":1446,"code":"        it('matches one (retains coerce)', () => {\n\n            const schema = Joi.alternatives([\n                Joi.number(),\n                Joi.boolean()\n            ])\n                .match('one');\n\n            Helper.validate(schema, [\n                ['2', true, 2]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"matches all","suites":["alternatives","match()"],"updatePoint":{"line":1459,"column":23},"line":1459,"code":"        it('matches all', () => {\n\n            const schema = Joi.alternatives([\n                Joi.number(),\n                Joi.string()\n            ])\n                .match('all');\n\n            Helper.validate(schema, [\n                ['2', true, '2'],\n                ['x', false, {\n                    message: '\"value\" does not match all of the required types',\n                    path: [],\n                    type: 'alternatives.all',\n                    context: {\n                        label: 'value',\n                        value: 'x',\n                        details: [\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: 'x'\n                                        },\n                                        message: '\"value\" must be a number',\n                                        path: [],\n                                        type: 'number.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a number'\n                            }\n                        ]\n                    }\n                }],\n                [2, false, {\n                    message: '\"value\" does not match all of the required types',\n                    path: [],\n                    type: 'alternatives.all',\n                    context: {\n                        label: 'value',\n                        value: 2,\n                        details: [\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: 2\n                                        },\n                                        message: '\"value\" must be a string',\n                                        path: [],\n                                        type: 'string.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a string'\n                            }\n                        ]\n                    }\n                }],\n                [true, false, {\n                    message: '\"value\" does not match any of the allowed types',\n                    path: [],\n                    type: 'alternatives.any',\n                    context: {\n                        label: 'value',\n                        value: true,\n                        details: [\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: true\n                                        },\n                                        message: '\"value\" must be a number',\n                                        path: [],\n                                        type: 'number.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a number'\n                            },\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            label: 'value',\n                                            value: true\n                                        },\n                                        message: '\"value\" must be a string',\n                                        path: [],\n                                        type: 'string.base'\n                                    }\n                                ],\n                                message: '\"value\" must be a string'\n                            }\n                        ]\n                    }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"merges return values when matching all objects","suites":["alternatives","match()"],"updatePoint":{"line":1561,"column":58},"line":1561,"code":"        it('merges return values when matching all objects', () => {\n\n            const schema = Joi.alternatives([\n                Joi.object({ foo: Joi.string().default('bar') }).unknown(),\n                Joi.object({\n                    baz: Joi.string().default('buz'),\n                    lol: Joi.string()\n                })\n            ]).match('all');\n\n            Helper.validate(schema, [\n                [{}, true, { foo: 'bar', baz: 'buz' }],\n                [{ lol: 'rofl' }, true, { foo: 'bar', baz: 'buz', lol: 'rofl' }],\n                [{ lol: 5 }, false, {\n                    message: '\"value\" does not match all of the required types',\n                    path: [],\n                    type: 'alternatives.all',\n                    context: {\n                        label: 'value',\n                        value: { lol: 5 },\n                        details: [\n                            {\n                                details: [\n                                    {\n                                        context: {\n                                            key: 'lol',\n                                            label: 'lol',\n                                            value: 5\n                                        },\n                                        message: '\"lol\" must be a string',\n                                        path: ['lol'],\n                                        type: 'string.base'\n                                    }\n                                ],\n                                message: '\"lol\" must be a string'\n                            }\n                        ]\n                    }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"merges defaults when nesting alternatives","suites":["alternatives","match()"],"updatePoint":{"line":1603,"column":53},"line":1603,"code":"        it('merges defaults when nesting alternatives', () => {\n\n            const schema = Joi.alternatives([\n                Joi.alternatives(\n                    Joi.object({ foo: Joi.string().default('bar') }).unknown(),\n                    Joi.object({ baz: Joi.boolean().default(false) }).unknown()\n                ).\n                    match('all'),\n\n                Joi.object({ lol: Joi.boolean().default(true) }).unknown()\n            ])\n                .match('all');\n\n            Helper.validate(schema, [\n                [{}, true, { foo: 'bar', baz: false, lol: true }],\n                [{ foo: 'rofl' }, true, { foo: 'rofl', baz: false, lol: true }],\n                [{ foo: 9 }, false, '\"value\" does not match all of the required types']\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"ignores defaults when nesting does not include objects","suites":["alternatives","match()"],"updatePoint":{"line":1623,"column":66},"line":1623,"code":"        it('ignores defaults when nesting does not include objects', () => {\n\n            const schema = Joi.alternatives([\n                Joi.alternatives(\n                    Joi.number(),\n                    Joi.string()\n                ).\n                    match('all'),\n\n                Joi.any()\n            ])\n                .match('all');\n\n            Helper.validate(schema, [\n                ['123', true, '123']\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"errors on mix with conditional","suites":["alternatives","match()"],"updatePoint":{"line":1641,"column":42},"line":1641,"code":"        it('errors on mix with conditional', () => {\n\n            expect(() => Joi.alternatives().match('all').conditional('$a', { is: true, then: false })).to.throw('Cannot combine match mode all with conditional rule');\n            expect(() => Joi.alternatives().conditional('$a', { is: true, then: false }).match('all')).to.throw('Cannot combine match mode all with conditional rules');\n\n            expect(() => Joi.alternatives().match('one').conditional('$a', { is: true, then: false })).to.throw('Cannot combine match mode one with conditional rule');\n            expect(() => Joi.alternatives().conditional('$a', { is: true, then: false }).match('one')).to.throw('Cannot combine match mode one with conditional rules');\n\n            expect(() => Joi.alternatives().match('any').conditional('$a', { is: true, then: false })).to.not.throw();\n            expect(() => Joi.alternatives().conditional('$a', { is: true, then: false }).match('any')).to.not.throw();\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"customizes schema","suites":["alternatives","tailor()"],"updatePoint":{"line":1656,"column":29},"line":1656,"code":"        it('customizes schema', () => {\n\n            const alternatives = {\n                v: (s) => s.min(10)\n            };\n\n            const before = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number().alter(alternatives),\n                    Joi.string().alter(alternatives)\n                ])\n            });\n\n            const bd = before.describe();\n\n            const first = before.tailor('v');\n\n            const after = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number().min(10).alter(alternatives),\n                    Joi.string().min(10).alter(alternatives)\n                ])\n            });\n\n            Helper.equal(first, after);\n            expect(first.describe()).to.equal(after.describe());\n            expect(before.describe()).to.equal(bd);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"customizes schema with outter rule","suites":["alternatives","tailor()"],"updatePoint":{"line":1685,"column":46},"line":1685,"code":"        it('customizes schema with outter rule', () => {\n\n            const alt1 = {\n                v: (s) => s.min(10)\n            };\n\n            const alt2 = {\n                v: (s) => s.try(Joi.valid('x'))\n            };\n\n            const before = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number().alter(alt1),\n                    Joi.string().alter(alt1)\n                ])\n                    .alter(alt2)\n            });\n\n            const bd = before.describe();\n\n            const first = before.tailor('v');\n\n            const after = Joi.object({\n                x: Joi.alternatives([\n                    Joi.number().min(10).alter(alt1),\n                    Joi.string().min(10).alter(alt1),\n                    Joi.valid('x')\n                ])\n                    .alter(alt2)\n            });\n\n            Helper.equal(first, after);\n            expect(first.describe()).to.equal(after.describe());\n            expect(before.describe()).to.equal(bd);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"throws when missing alternatives","suites":["alternatives","try()"],"updatePoint":{"line":1724,"column":44},"line":1724,"code":"        it('throws when missing alternatives', () => {\n\n            expect(() => Joi.alternatives().try()).to.throw('Missing alternative schemas');\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"throws on unreachable condition","suites":["alternatives","try()"],"updatePoint":{"line":1729,"column":43},"line":1729,"code":"        it('throws on unreachable condition', () => {\n\n            expect(() => {\n\n                Joi.object({\n\n                    a: Joi.alternatives().conditional('b', { is: 6, then: 7, otherwise: 0 }).try(5),\n                    b: Joi.any()\n                });\n            }).to.throw('Unreachable condition');\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates deep alternatives","suites":["alternatives","try()"],"updatePoint":{"line":1741,"column":39},"line":1741,"code":"        it('validates deep alternatives', () => {\n\n            const schema = Joi.alternatives().try(\n                Joi.boolean(),\n                Joi.object({\n                    p: Joi.alternatives().try(\n                        Joi.boolean(),\n                        Joi.string().valid('foo', 'bar')\n                    )\n                })\n            );\n\n            Helper.validate(schema, [\n                [{ p: 1 }, false, {\n                    message: '\"p\" must be one of [boolean, foo, bar]',\n                    path: ['p'],\n                    type: 'alternatives.types',\n                    context: {\n                        key: 'p',\n                        label: 'p',\n                        types: ['boolean', 'foo', 'bar'],\n                        value: 1\n                    }\n                }],\n                [{ p: '...' }, false, {\n                    message: '\"p\" must be one of [boolean, foo, bar]',\n                    path: ['p'],\n                    type: 'alternatives.types',\n                    context: {\n                        key: 'p',\n                        label: 'p',\n                        types: ['boolean', 'foo', 'bar'],\n                        value: '...'\n                    }\n                }],\n                [1, false, {\n                    message: '\"value\" must be one of [boolean, object]',\n                    path: [],\n                    type: 'alternatives.types',\n                    context: { types: ['boolean', 'object'], label: 'value', value: 1 }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates deep alternatives (with wrap.array false)","suites":["alternatives","try()"],"updatePoint":{"line":1785,"column":63},"line":1785,"code":"        it('validates deep alternatives (with wrap.array false)', () => {\n\n            const schema = Joi.alternatives().try(\n                Joi.boolean(),\n                Joi.object({\n                    p: Joi.alternatives().try(\n                        Joi.boolean(),\n                        Joi.string().valid('foo', 'bar')\n                    )\n                })\n            ).prefs({ errors: { wrap: { array: false } } });\n\n            Helper.validate(schema, [\n                [{ p: 1 }, false, {\n                    message: '\"p\" must be one of boolean, foo, bar',\n                    path: ['p'],\n                    type: 'alternatives.types',\n                    context: {\n                        key: 'p',\n                        label: 'p',\n                        types: ['boolean', 'foo', 'bar'],\n                        value: 1\n                    }\n                }],\n                [{ p: '...' }, false, {\n                    message: '\"p\" must be one of boolean, foo, bar',\n                    path: ['p'],\n                    type: 'alternatives.types',\n                    context: {\n                        key: 'p',\n                        label: 'p',\n                        types: ['boolean', 'foo', 'bar'],\n                        value: '...'\n                    }\n                }],\n                [1, false, {\n                    message: '\"value\" must be one of boolean, object',\n                    path: [],\n                    type: 'alternatives.types',\n                    context: { types: ['boolean', 'object'], label: 'value', value: 1 }\n                }]\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"validates deep alternatives (with custom error)","suites":["alternatives","try()"],"updatePoint":{"line":1829,"column":59},"line":1829,"code":"        it('validates deep alternatives (with custom error)', () => {\n\n            const schema = Joi.alternatives([\n                Joi.boolean(),\n                Joi.object({\n                    p: Joi.number()\n                })\n            ])\n                .error(new Error('oops'));\n\n            Helper.validate(schema, [\n                [{ p: 'a' }, false, 'oops']\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"combines when() with tries","suites":["alternatives","when()"],"updatePoint":{"line":1847,"column":38},"line":1847,"code":"        it('combines when() with tries', () => {\n\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.alternatives([\n                    Joi.string(),\n                    Joi.number()\n                ])\n                    .when('a', { is: true, then: Joi.required() })\n            });\n\n            Helper.validate(schema, [\n                [{ a: false }, true],\n                [{ a: true }, false, '\"b\" is required'],\n                [{ a: true, b: true }, false, '\"b\" must be one of [string, number]']\n            ]);\n        });","file":"types/alternatives.js","skipped":false,"dir":"test"},{"name":"uses custom validation","suites":["any","custom()"],"updatePoint":{"line":21,"column":34},"line":21,"code":"        it('uses custom validation', () => {\n\n            const error = new Error('nope');\n            const method = (value, helpers) => {\n\n                if (value === '1') {\n                    throw error;\n                }\n\n                if (value === '2') {\n                    return '3';\n                }\n\n                if (value === '4') {\n                    return helpers.error('any.invalid');\n                }\n\n                if (value === '5') {\n                    return undefined;\n                }\n\n                return value;\n            };\n\n            const schema = Joi.string().custom(method, 'custom validation');\n            Helper.validate(schema, [\n                ['x', true, 'x'],\n                ['2', true, '3'],\n                ['5', true, undefined],\n                ['1', false, {\n                    message: '\"value\" failed custom validation because nope',\n                    path: [],\n                    type: 'any.custom',\n                    context: { label: 'value', value: '1', error }\n                }],\n                ['4', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { label: 'value', value: '4' }\n                }]\n            ]);\n        });","file":"types/any.js","skipped":false,"dir":"test"},{"name":"errors on invalid arguments","suites":["any","custom()"],"updatePoint":{"line":65,"column":39},"line":65,"code":"        it('errors on invalid arguments', () => {\n\n            const method = () => null;\n            expect(() => Joi.any().custom({})).to.throw('Method must be a function');\n            expect(() => Joi.any().custom(method)).to.not.throw();\n            expect(() => Joi.any().custom(method, '')).to.throw('Description must be a non-empty string');\n            expect(() => Joi.any().custom(method, 0)).to.throw('Description must be a non-empty string');\n            expect(() => Joi.any().custom(method, [])).to.throw('Description must be a non-empty string');\n        });","file":"types/any.js","skipped":false,"dir":"test"},{"name":"aliases preferences","suites":["any","messages()"],"updatePoint":{"line":78,"column":31},"line":78,"code":"        it('aliases preferences', () => {\n\n            const messages = {\n                english: {\n                    value: 'it'\n                }\n            };\n\n            Helper.equal(Joi.string().valid('x').messages(messages), Joi.string().valid('x').prefs({ messages }));\n        });","file":"types/any.js","skipped":false,"dir":"test"},{"name":"errors on missing id","suites":["any","shared()"],"updatePoint":{"line":92,"column":32},"line":92,"code":"        it('errors on missing id', () => {\n\n            expect(() => Joi.any().shared(Joi.number())).to.throw('Schema must be a schema with an id');\n            expect(() => Joi.any().shared(1)).to.throw('Schema must be a schema with an id');\n        });","file":"types/any.js","skipped":false,"dir":"test"},{"name":"errors on invalid code","suites":["any","warning()"],"updatePoint":{"line":101,"column":34},"line":101,"code":"        it('errors on invalid code', () => {\n\n            expect(() => Joi.any().warning()).to.throw('Invalid warning code');\n            expect(() => Joi.any().warning(123)).to.throw('Invalid warning code');\n        });","file":"types/any.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["array"],"updatePoint":{"line":19,"column":59},"line":19,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.array('invalid argument.')).to.throw('The array type does not allow arguments');\n    });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on invalid type","suites":["array"],"updatePoint":{"line":24,"column":30},"line":24,"code":"    it('errors on invalid type', () => {\n\n        Helper.validate(Joi.array(), [\n            [3, false, {\n                message: '\"value\" must be an array',\n                path: [],\n                type: 'array.base',\n                context: { label: 'value', value: 3 }\n            }],\n            ['3', false, {\n                message: '\"value\" must be an array',\n                path: [],\n                type: 'array.base',\n                context: { label: 'value', value: '3' }\n            }]\n        ]);\n    });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"casts value to set","suites":["array","cast()"],"updatePoint":{"line":44,"column":30},"line":44,"code":"        it('casts value to set', () => {\n\n            const schema = Joi.array().items(Joi.number()).cast('set');\n            Helper.validate(schema, [\n                [['1', '2', '3', '4', '5'], true, new Set([1, 2, 3, 4, 5])]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"does not leak casts to any","suites":["array","cast()"],"updatePoint":{"line":52,"column":38},"line":52,"code":"        it('does not leak casts to any', () => {\n\n            expect(() => Joi.any().cast('set')).to.throw('Type any does not support casting to set');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns an empty description when no rules are applied","suites":["array","describe()"],"updatePoint":{"line":60,"column":66},"line":60,"code":"        it('returns an empty description when no rules are applied', () => {\n\n            const schema = Joi.array();\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array'\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns an updated description when sparse rule is applied","suites":["array","describe()"],"updatePoint":{"line":69,"column":70},"line":69,"code":"        it('returns an updated description when sparse rule is applied', () => {\n\n            const schema = Joi.array().sparse();\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array',\n                flags: { sparse: true }\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns an items array only if items are specified","suites":["array","describe()"],"updatePoint":{"line":79,"column":62},"line":79,"code":"        it('returns an items array only if items are specified', () => {\n\n            const schema = Joi.array().items().max(5);\n            const desc = schema.describe();\n            expect(desc.items).to.not.exist();\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns a recursively defined array of items when specified","suites":["array","describe()"],"updatePoint":{"line":86,"column":71},"line":86,"code":"        it('returns a recursively defined array of items when specified', () => {\n\n            const schema = Joi.array()\n                .items(Joi.number(), Joi.string())\n                .items(Joi.boolean().forbidden())\n                .ordered(Joi.number(), Joi.string())\n                .ordered(Joi.string().required());\n            const desc = schema.describe();\n            expect(desc.items).to.have.length(3);\n            expect(desc).to.equal({\n                type: 'array',\n                ordered: [\n                    { type: 'number' },\n                    { type: 'string' },\n                    { type: 'string', flags: { presence: 'required' } }\n                ],\n                items: [\n                    { type: 'number' },\n                    { type: 'string' },\n                    { type: 'boolean', flags: { presence: 'forbidden' } }\n                ]\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"describes an array with array items","suites":["array","describe()"],"updatePoint":{"line":110,"column":47},"line":110,"code":"        it('describes an array with array items', () => {\n\n            const schema = Joi.array().items(Joi.array());\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array',\n                items: [\n                    {\n                        type: 'array'\n                    }\n                ]\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"shows path to errors in schema","suites":["array","has()"],"updatePoint":{"line":127,"column":42},"line":127,"code":"        it('shows path to errors in schema', () => {\n\n            expect(() => {\n\n                Joi.array().has({\n                    a: {\n                        b: {\n                            c: {\n                                d: undefined\n                            }\n                        }\n                    }\n                });\n            }).to.throw(Error, 'Invalid undefined schema (a.b.c.d)');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"shows errors in schema","suites":["array","has()"],"updatePoint":{"line":143,"column":34},"line":143,"code":"        it('shows errors in schema', () => {\n\n            expect(() => Joi.array().has(undefined)).to.throw('Invalid undefined schema');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"works with object.assert","suites":["array","has()"],"updatePoint":{"line":148,"column":36},"line":148,"code":"        it('works with object.assert', () => {\n\n            const schema = Joi.array().items(\n                Joi.object().keys({\n                    a: {\n                        b: Joi.string(),\n                        c: Joi.number()\n                    },\n                    d: {\n                        e: Joi.any()\n                    }\n                })\n            ).has(Joi.object().assert('d.e', Joi.ref('a.c'), 'equal to a.c'));\n\n            Helper.validate(schema, [\n                [[{ a: { b: 'x', c: 5 }, d: { e: 5 } }], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"does not throw if assertion passes","suites":["array","has()"],"updatePoint":{"line":167,"column":46},"line":167,"code":"        it('does not throw if assertion passes', () => {\n\n            const schema = Joi.array().has(Joi.string());\n            Helper.validate(schema, [\n                [['foo'], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws with proper message if assertion fails on unknown schema","suites":["array","has()"],"updatePoint":{"line":175,"column":75},"line":175,"code":"        it('throws with proper message if assertion fails on unknown schema', () => {\n\n            const schema = Joi.array().has(Joi.string());\n            Helper.validate(schema, [\n                [[0], false, {\n                    message: '\"value\" does not contain at least one required match',\n                    path: [],\n                    type: 'array.hasUnknown',\n                    context: { label: 'value', value: [0] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws with proper message if assertion fails on known schema","suites":["array","has()"],"updatePoint":{"line":188,"column":73},"line":188,"code":"        it('throws with proper message if assertion fails on known schema', () => {\n\n            const schema = Joi.array().has(Joi.string().label('foo'));\n            Helper.validate(schema, [\n                [[0], false, {\n                    message: '\"value\" does not contain at least one required match for type \"foo\"',\n                    path: [],\n                    type: 'array.hasKnown',\n                    context: { label: 'value', patternLabel: 'foo', value: [0] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"shows correct path for error","suites":["array","has()"],"updatePoint":{"line":201,"column":40},"line":201,"code":"        it('shows correct path for error', () => {\n\n            const schema = Joi.object({\n                arr: Joi.array().has(Joi.string())\n            });\n            Helper.validate(schema, [\n                [{ arr: [0] }, false, {\n                    message: '\"arr\" does not contain at least one required match',\n                    path: ['arr'],\n                    type: 'array.hasUnknown',\n                    context: { label: 'arr', key: 'arr', value: [0] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"supports nested arrays","suites":["array","has()"],"updatePoint":{"line":216,"column":34},"line":216,"code":"        it('supports nested arrays', () => {\n\n            const schema = Joi.object({\n                arr: Joi.array().items(\n                    Joi.object({ foo: Joi.array().has(Joi.string()) })\n                )\n            });\n            Helper.validate(schema, [\n                [{ arr: [{ foo: ['bar'] }] }, true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"supports peer item references","suites":["array","has()"],"updatePoint":{"line":228,"column":41},"line":228,"code":"        it('supports peer item references', () => {\n\n            const schema = Joi.object({\n                array: Joi.array()\n                    .items(Joi.number())\n                    .has(Joi.number().greater(Joi.ref('..0')))\n            });\n\n            Helper.validate(schema, [\n                [{ array: [10, 1, 11, 5] }, true],\n                [{ array: [10, 1, 2, 5, 12] }, true],\n                [{ array: [10, 1, 2, 5, 1] }, false, {\n                    message: '\"array\" does not contain at least one required match',\n                    path: ['array'],\n                    type: 'array.hasUnknown',\n                    context: { label: 'array', key: 'array', value: [10, 1, 2, 5, 1] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"provides accurate error message for nested arrays","suites":["array","has()"],"updatePoint":{"line":248,"column":61},"line":248,"code":"        it('provides accurate error message for nested arrays', () => {\n\n            const schema = Joi.object({\n                arr: Joi.array().items(\n                    Joi.object({ foo: Joi.array().has(Joi.string()) })\n                )\n            });\n            Helper.validate(schema, [\n                [{ arr: [{ foo: [0] }] }, false, {\n                    message: '\"arr[0].foo\" does not contain at least one required match',\n                    path: ['arr', 0, 'foo'],\n                    type: 'array.hasUnknown',\n                    context: { label: 'arr[0].foo', key: 'foo', value: [0] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"handles multiple assertions","suites":["array","has()"],"updatePoint":{"line":265,"column":39},"line":265,"code":"        it('handles multiple assertions', () => {\n\n            const schema = Joi.array().has(Joi.string()).has(Joi.number());\n            Helper.validate(schema, [\n                [['foo', 0], true]\n            ]);\n\n            Helper.validate(schema, [\n                [['foo'], false, {\n                    message: '\"value\" does not contain at least one required match',\n                    path: [],\n                    type: 'array.hasUnknown',\n                    context: { label: 'value', value: ['foo'] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"describes the pattern schema","suites":["array","has()"],"updatePoint":{"line":282,"column":40},"line":282,"code":"        it('describes the pattern schema', () => {\n\n            const schema = Joi.array().has(Joi.string()).has(Joi.number());\n            expect(schema.describe()).to.equal({\n                type: 'array',\n                rules: [\n                    { name: 'has', args: { schema: { type: 'string' } } },\n                    { name: 'has', args: { schema: { type: 'number' } } }\n                ]\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"converts members","suites":["array","items()"],"updatePoint":{"line":297,"column":28},"line":297,"code":"        it('converts members', () => {\n\n            const schema = Joi.array().items(Joi.number());\n            Helper.validate(schema, [\n                [['1', '2', '3'], true, [1, 2, 3]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"shows path to errors in array items","suites":["array","items()"],"updatePoint":{"line":305,"column":47},"line":305,"code":"        it('shows path to errors in array items', () => {\n\n            expect(() => {\n\n                Joi.array().items({\n                    a: {\n                        b: {\n                            c: {\n                                d: undefined\n                            }\n                        }\n                    }\n                });\n            }).to.throw(Error, 'Invalid undefined schema (0.a.b.c.d)');\n\n            expect(() => Joi.array().items({ foo: 'bar' }, undefined)).to.throw('Invalid undefined schema (1)');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows zero size","suites":["array","items()"],"updatePoint":{"line":323,"column":28},"line":323,"code":"        it('allows zero size', () => {\n\n            const schema = Joi.object({\n                test: Joi.array().items(Joi.object({\n                    foo: Joi.string().required()\n                }))\n            });\n\n            Helper.validate(schema, [\n                [{ test: [] }, true, { test: [] }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows Error items","suites":["array","items()"],"updatePoint":{"line":336,"column":30},"line":336,"code":"        it('allows Error items', () => {\n\n            const schema = Joi.array().items(Joi.object());\n            const error = new Error();\n            Helper.validate(schema, [\n                [[error], true, [error]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns the first error when only one inclusion","suites":["array","items()"],"updatePoint":{"line":345,"column":59},"line":345,"code":"        it('returns the first error when only one inclusion', () => {\n\n            const schema = Joi.object({\n                test: Joi.array().items(Joi.object({\n                    foo: Joi.string().required()\n                }))\n            });\n\n            Helper.validate(schema, [\n                [{ test: [{ foo: 'a' }, { bar: 2 }] }, false, {\n                    message: '\"test[1].foo\" is required',\n                    path: ['test', 1, 'foo'],\n                    type: 'any.required',\n                    context: { label: 'test[1].foo', key: 'foo' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates multiple types added in two calls","suites":["array","items()"],"updatePoint":{"line":363,"column":55},"line":363,"code":"        it('validates multiple types added in two calls', () => {\n\n            const schema = Joi.array()\n                .items(Joi.number())\n                .items(Joi.string());\n\n            Helper.validate(schema, [\n                [[1, 2, 3], true],\n                [[50, 100, 1000], true],\n                [[1, 'a', 5, 10], true],\n                [['joi', 'everydaylowprices', 5000], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates multiple types with stripUnknown","suites":["array","items()"],"updatePoint":{"line":377,"column":54},"line":377,"code":"        it('validates multiple types with stripUnknown', () => {\n\n            const schema = Joi.array().items(Joi.number(), Joi.string()).prefs({ stripUnknown: true });\n\n            Helper.validate(schema, [\n                [[1, 2, 'a'], true, [1, 2, 'a']],\n                [[1, { foo: 'bar' }, 'a', 2], false, {\n                    context: {\n                        key: 1,\n                        label: '[1]',\n                        pos: 1,\n                        value: { foo: 'bar' }\n                    },\n                    message: '\"[1]\" does not match any of the allowed types',\n                    path: [1],\n                    type: 'array.includes'\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates multiple types with stripUnknown (as an object)","suites":["array","items()"],"updatePoint":{"line":397,"column":69},"line":397,"code":"        it('validates multiple types with stripUnknown (as an object)', () => {\n\n            const schema = Joi.array().items(Joi.number(), Joi.string()).prefs({ stripUnknown: { arrays: true, objects: false } });\n\n            Helper.validate(schema, [\n                [[1, 2, 'a'], true, [1, 2, 'a']],\n                [[1, { foo: 'bar' }, 'a', 2], true, [1, 'a', 2]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows forbidden to restrict values","suites":["array","items()"],"updatePoint":{"line":407,"column":47},"line":407,"code":"        it('allows forbidden to restrict values', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').forbidden(), Joi.string());\n            Helper.validate(schema, [\n                [['one', 'two', 'three', 'four'], false, {\n                    message: '\"[3]\" contains an excluded value',\n                    path: [3],\n                    type: 'array.excludes',\n                    context: { pos: 3, value: 'four', label: '[3]', key: 3 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows forbidden to restrict values (ref)","suites":["array","items()"],"updatePoint":{"line":420,"column":53},"line":420,"code":"        it('allows forbidden to restrict values (ref)', () => {\n\n            const schema = Joi.object({\n                array: Joi.array().items(Joi.valid(Joi.ref('...value')).forbidden(), Joi.string()),\n                value: Joi.string().required()\n            });\n            Helper.validate(schema, [\n                [{\n                    array: ['one', 'two', 'three', 'four'],\n                    value: 'four'\n                }, false, {\n                    message: '\"array[3]\" contains an excluded value',\n                    path: ['array', 3],\n                    type: 'array.excludes',\n                    context: { pos: 3, value: 'four', label: 'array[3]', key: 3 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"process referenced property first when referenced by an item rule","suites":["array","items()"],"updatePoint":{"line":439,"column":77},"line":439,"code":"        it('process referenced property first when referenced by an item rule', () => {\n\n            const schema = Joi.object({\n                array: Joi.array().items(Joi.valid(Joi.ref('...value')).forbidden(), Joi.number()),\n                value: Joi.number().required()\n            });\n\n            Helper.validate(schema, [\n                [{\n                    array: [1, 2, 3, 4],\n                    value: '4'\n                }, false, {\n                    message: '\"array[3]\" contains an excluded value',\n                    path: ['array', 3],\n                    type: 'array.excludes',\n                    context: { pos: 3, value: 4, label: 'array[3]', key: 3 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates that a required value exists","suites":["array","items()"],"updatePoint":{"line":459,"column":50},"line":459,"code":"        it('validates that a required value exists', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').required(), Joi.string());\n            Helper.validate(schema, [\n                [['one', 'two', 'three'], false, {\n                    message: '\"value\" does not contain 1 required value(s)',\n                    path: [],\n                    type: 'array.includesRequiredUnknowns',\n                    context: { unknownMisses: 1, label: 'value', value: ['one', 'two', 'three'] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates that values are validated when all items are required","suites":["array","items()"],"updatePoint":{"line":472,"column":75},"line":472,"code":"        it('validates that values are validated when all items are required', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('one').required(), Joi.string().valid('two').required());\n            Helper.validate(schema, [\n                [['one', 'one', 'two', 'two', 'three'], false, {\n                    message: '\"[4]\" does not match any of the allowed types',\n                    path: [4],\n                    type: 'array.includes',\n                    context: { pos: 4, value: 'three', label: '[4]', key: 4 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates that a required value exists with abortEarly = false","suites":["array","items()"],"updatePoint":{"line":485,"column":74},"line":485,"code":"        it('validates that a required value exists with abortEarly = false', () => {\n\n            const schema = Joi.array()\n                .items(Joi.string().valid('four').required(), Joi.string())\n                .prefs({ abortEarly: false });\n\n            const input = ['one', 'two', 'three'];\n\n            Helper.validate(schema, [\n                [input, false, {\n                    message: '\"value\" does not contain 1 required value(s)',\n                    details: [{\n                        message: '\"value\" does not contain 1 required value(s)',\n                        path: [],\n                        type: 'array.includesRequiredUnknowns',\n                        context: { unknownMisses: 1, label: 'value', value: input }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"does not re-run required tests that have already been matched","suites":["array","items()"],"updatePoint":{"line":506,"column":73},"line":506,"code":"        it('does not re-run required tests that have already been matched', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').required(), Joi.string());\n            Helper.validate(schema, [\n                [['one', 'two', 'three', 'four', 'four', 'four'], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"does not re-run required tests that have already failed","suites":["array","items()"],"updatePoint":{"line":514,"column":67},"line":514,"code":"        it('does not re-run required tests that have already failed', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').required(), Joi.boolean().required(), Joi.number());\n            Helper.validate(schema, [\n                [['one', 'two', 'three', 'four', 'four', 'four'], false, {\n                    message: '\"[0]\" does not match any of the allowed types',\n                    path: [0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: 'one', label: '[0]', key: 0 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can require duplicates of the same schema and fail","suites":["array","items()"],"updatePoint":{"line":527,"column":62},"line":527,"code":"        it('can require duplicates of the same schema and fail', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').required(), Joi.string().valid('four').required(), Joi.string());\n\n            Helper.validate(schema, [\n                [['one', 'two', 'three', 'four'], false, {\n                    message: '\"value\" does not contain 1 required value(s)',\n                    path: [],\n                    type: 'array.includesRequiredUnknowns',\n                    context: { unknownMisses: 1, label: 'value', value: ['one', 'two', 'three', 'four'] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can require duplicates of the same schema and pass","suites":["array","items()"],"updatePoint":{"line":541,"column":62},"line":541,"code":"        it('can require duplicates of the same schema and pass', () => {\n\n            const schema = Joi.array().items(Joi.string().valid('four').required(), Joi.string().valid('four').required(), Joi.string());\n\n            Helper.validate(schema, [\n                [['one', 'two', 'three', 'four', 'four'], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"continues to validate after a required match","suites":["array","items()"],"updatePoint":{"line":550,"column":56},"line":550,"code":"        it('continues to validate after a required match', () => {\n\n            const schema = Joi.array().items(Joi.string().required(), Joi.boolean());\n\n            Helper.validate(schema, [\n                [[true, 'one', false, 'two'], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can use a label on a required parameter","suites":["array","items()"],"updatePoint":{"line":559,"column":51},"line":559,"code":"        it('can use a label on a required parameter', () => {\n\n            const schema = Joi.array().items(Joi.string().required().label('required string'), Joi.boolean());\n\n            Helper.validate(schema, [\n                [[true, false], false, {\n                    message: '\"value\" does not contain [required string]',\n                    path: [],\n                    type: 'array.includesRequiredKnowns',\n                    context: { knownMisses: ['required string'], label: 'value', value: [true, false] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can use a label on one required parameter, and no label on another","suites":["array","items()"],"updatePoint":{"line":573,"column":78},"line":573,"code":"        it('can use a label on one required parameter, and no label on another', () => {\n\n            const schema = Joi.array().items(Joi.string().required().label('required string'), Joi.string().required(), Joi.boolean());\n\n            Helper.validate(schema, [\n                [[true, false], false, {\n                    message: '\"value\" does not contain [required string] and 1 other required value(s)',\n                    path: [],\n                    type: 'array.includesRequiredBoth',\n                    context: {\n                        knownMisses: ['required string'],\n                        unknownMisses: 1,\n                        label: 'value',\n                        value: [true, false]\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can fill the default values into the value array","suites":["array","items()"],"updatePoint":{"line":592,"column":60},"line":592,"code":"        it('can fill the default values into the value array', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().default(0), Joi.number().default(6)).required();\n\n            Helper.validate(schema, [\n                [['a'], true, ['a', 0, 6]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"ignore trailing undefined","suites":["array","items()"],"updatePoint":{"line":601,"column":37},"line":601,"code":"        it('ignore trailing undefined', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.string(), Joi.number().default(5), Joi.string(), Joi.string());\n\n            Helper.validate(schema, [\n                [['a'], true, ['a', undefined, 5]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"generate sparse array","suites":["array","items()"],"updatePoint":{"line":610,"column":33},"line":610,"code":"        it('generate sparse array', () => {\n\n            const schema = Joi.array().ordered(Joi.string(), Joi.number().default(5), Joi.string(), Joi.string().default('f'));\n\n            Helper.validate(schema, [\n                [[], true, [undefined, 5, undefined, 'f']]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"fills defaults correctly when nested items contain references","suites":["array","items()"],"updatePoint":{"line":619,"column":73},"line":619,"code":"        it('fills defaults correctly when nested items contain references', () => {\n\n            const schema = Joi.object({\n                info: Joi.object(),\n                values: Joi.array().ordered(\n                    Joi.string().required(),\n                    Joi.string().default(Joi.ref('...info.firstname')),\n                    Joi.string(),\n                    Joi.string().default(Joi.ref('...info.lastname')),\n                    Joi.string()\n                ).required()\n            });\n\n            Helper.validate(schema, [\n                [{ info: { firstname: 'f', lastname: 'e' }, values: ['h'] }, true, { info: { firstname: 'f', lastname: 'e' }, values: ['h', 'f', undefined, 'e'] }],\n                [{ info: { firstname: 'f', lastname: 'e' }, values: ['h', 'test'] }, true, { info: { firstname: 'f', lastname: 'e' }, values: ['h', 'test', undefined, 'e'] }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"fills defaults correctly when nested items contain references","suites":["array","items()"],"updatePoint":{"line":638,"column":73},"line":638,"code":"        it('fills defaults correctly when nested items contain references', () => {\n\n            const schema = Joi.object({\n                info: Joi.object().required(),\n                values: Joi.array().ordered(\n                    Joi.string().required(),\n                    Joi.array().ordered(\n                        Joi.string(),\n                        Joi.string().default('normal value'),\n                        Joi.string(),\n                        Joi.number().default(Joi.x('{number(\"202099\")}'))\n                    ),\n                    Joi.string(),\n                    Joi.string().default(Joi.ref('...info.firstname')),\n                    Joi.string()\n                ).required()\n            });\n\n            Helper.validate(schema, [\n                [{ info: { firstname: 'f' }, values: ['h', []] }, true, { info: { firstname: 'f' }, values: ['h', [undefined, 'normal value', undefined, 202099], undefined, 'f'] }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"can strip matching items","suites":["array","items()"],"updatePoint":{"line":661,"column":36},"line":661,"code":"        it('can strip matching items', () => {\n\n            const schema = Joi.array().items(Joi.string(), Joi.any().strip());\n\n            Helper.validate(schema, [\n                [['one', 'two', 3, 4], true, ['one', 'two']]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns custom item error","suites":["array","items()"],"updatePoint":{"line":670,"column":37},"line":670,"code":"        it('returns custom item error', () => {\n\n            const schema = Joi.array().items(\n                Joi.object({\n                    a: Joi.number().error(new Error('custom'))\n                })\n            );\n\n            Helper.validate(schema, [\n                [[{ a: 'x' }], false, 'custom'],\n                [[{ a: 'x' }, { a: 'y' }], false, 'custom']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns custom item error (required)","suites":["array","items()"],"updatePoint":{"line":684,"column":48},"line":684,"code":"        it('returns custom item error (required)', () => {\n\n            const schema = Joi.array().items(\n                Joi.object({\n                    a: Joi.number().error(new Error('custom'))\n                })\n                    .required()\n            );\n\n            Helper.validate(schema, [\n                [[{ a: 'x' }], false, 'custom'],\n                [[{ a: 'x' }, { a: 'y' }], false, 'custom']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size","suites":["array","length()"],"updatePoint":{"line":702,"column":32},"line":702,"code":"        it('validates array size', () => {\n\n            const schema = Joi.array().length(2);\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [[1], false, {\n                    message: '\"value\" must contain 2 items',\n                    path: [],\n                    type: 'array.length',\n                    context: { limit: 2, value: [1], label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"overrides rule when called multiple times","suites":["array","length()"],"updatePoint":{"line":716,"column":53},"line":716,"code":"        it('overrides rule when called multiple times', () => {\n\n            const schema = Joi.array().length(2).length(1);\n            Helper.validate(schema, [\n                [[1], true],\n                [[1, 2], false, {\n                    message: '\"value\" must contain 1 items',\n                    path: [],\n                    type: 'array.length',\n                    context: { limit: 1, value: [1, 2], label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["array","length()"],"updatePoint":{"line":730,"column":45},"line":730,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => Joi.array().length('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["array","length()"],"updatePoint":{"line":735,"column":47},"line":735,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => Joi.array().length(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is negative","suites":["array","length()"],"updatePoint":{"line":740,"column":41},"line":740,"code":"        it('throws when limit is negative', () => {\n\n            expect(() => Joi.array().length(-1)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size when a reference","suites":["array","length()"],"updatePoint":{"line":745,"column":49},"line":745,"code":"        it('validates array size when a reference', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().length(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2] }, true],\n                [{ limit: 2, arr: [1] }, false, {\n                    message: '\"arr\" must contain ref:limit items',\n                    path: ['arr'],\n                    type: 'array.length',\n                    context: { limit: ref, value: [1], label: 'arr', key: 'arr' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"handles references within a when","suites":["array","length()"],"updatePoint":{"line":764,"column":44},"line":764,"code":"        it('handles references within a when', () => {\n\n            const schema = Joi.object({\n                limit: Joi.any(),\n                arr: Joi.array(),\n                arr2: Joi.when('arr', {\n                    is: Joi.array().length(Joi.ref('limit')),\n                    then: Joi.array()\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2], arr2: [1, 2] }, true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates reference is a safe integer","suites":["array","length()"],"updatePoint":{"line":780,"column":49},"line":780,"code":"        it('validates reference is a safe integer', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().length(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: Math.pow(2, 53), arr: [1, 2] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: Math.pow(2, 53), arg: 'limit', reason: 'must be a positive integer' }\n                }],\n                [{ limit: 'I like turtles', arr: [1] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: 'I like turtles', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size","suites":["array","max()"],"updatePoint":{"line":807,"column":32},"line":807,"code":"        it('validates array size', () => {\n\n            const schema = Joi.array().max(1);\n            Helper.validate(schema, [\n                [[1, 2], false, {\n                    message: '\"value\" must contain less than or equal to 1 items',\n                    path: [],\n                    type: 'array.max',\n                    context: { limit: 1, value: [1, 2], label: 'value' }\n                }],\n                [[1], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"overrides rule when called multiple times","suites":["array","max()"],"updatePoint":{"line":821,"column":53},"line":821,"code":"        it('overrides rule when called multiple times', () => {\n\n            const schema = Joi.array().max(1).max(2);\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [[1], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["array","max()"],"updatePoint":{"line":830,"column":45},"line":830,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => Joi.array().max('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["array","max()"],"updatePoint":{"line":835,"column":47},"line":835,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => Joi.array().max(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is negative","suites":["array","max()"],"updatePoint":{"line":840,"column":41},"line":840,"code":"        it('throws when limit is negative', () => {\n\n            expect(() => Joi.array().max(-1)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size when a reference","suites":["array","max()"],"updatePoint":{"line":845,"column":49},"line":845,"code":"        it('validates array size when a reference', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().max(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2] }, true],\n                [{ limit: 2, arr: [1, 2, 3] }, false, {\n                    message: '\"arr\" must contain less than or equal to ref:limit items',\n                    path: ['arr'],\n                    type: 'array.max',\n                    context: { limit: ref, value: [1, 2, 3], label: 'arr', key: 'arr' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"handles references within a when","suites":["array","max()"],"updatePoint":{"line":864,"column":44},"line":864,"code":"        it('handles references within a when', () => {\n\n            const schema = Joi.object({\n                limit: Joi.any(),\n                arr: Joi.array(),\n                arr2: Joi.when('arr', {\n                    is: Joi.array().max(Joi.ref('limit')),\n                    then: Joi.array()\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2], arr2: [1, 2] }, true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates reference is a safe integer","suites":["array","max()"],"updatePoint":{"line":880,"column":49},"line":880,"code":"        it('validates reference is a safe integer', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().max(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: Math.pow(2, 53), arr: [1, 2] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: Math.pow(2, 53), arg: 'limit', reason: 'must be a positive integer' }\n                }],\n                [{ limit: 'I like turtles', arr: [1] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: 'I like turtles', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size","suites":["array","min()"],"updatePoint":{"line":907,"column":32},"line":907,"code":"        it('validates array size', () => {\n\n            const schema = Joi.array().min(2);\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [[1], false, {\n                    message: '\"value\" must contain at least 2 items',\n                    path: [],\n                    type: 'array.min',\n                    context: { limit: 2, value: [1], label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"overrides rule when called multiple times","suites":["array","min()"],"updatePoint":{"line":921,"column":53},"line":921,"code":"        it('overrides rule when called multiple times', () => {\n\n            const schema = Joi.array().min(2).min(1);\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [[1], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["array","min()"],"updatePoint":{"line":930,"column":45},"line":930,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => Joi.array().min('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["array","min()"],"updatePoint":{"line":935,"column":47},"line":935,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => Joi.array().min(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"throws when limit is negative","suites":["array","min()"],"updatePoint":{"line":940,"column":41},"line":940,"code":"        it('throws when limit is negative', () => {\n\n            expect(() => Joi.array().min(-1)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array size when a reference","suites":["array","min()"],"updatePoint":{"line":945,"column":49},"line":945,"code":"        it('validates array size when a reference', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().min(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2] }, true],\n                [{ limit: 2, arr: [1] }, false, {\n                    message: '\"arr\" must contain at least ref:limit items',\n                    path: ['arr'],\n                    type: 'array.min',\n                    context: { limit: ref, value: [1], label: 'arr', key: 'arr' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"handles references within a when","suites":["array","min()"],"updatePoint":{"line":964,"column":44},"line":964,"code":"        it('handles references within a when', () => {\n\n            const schema = Joi.object({\n                limit: Joi.any(),\n                arr: Joi.array(),\n                arr2: Joi.when('arr', {\n                    is: Joi.array().min(Joi.ref('limit')),\n                    then: Joi.array()\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ limit: 2, arr: [1, 2], arr2: [1, 2] }, true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates reference is a safe integer","suites":["array","min()"],"updatePoint":{"line":980,"column":49},"line":980,"code":"        it('validates reference is a safe integer', () => {\n\n            const ref = Joi.ref('limit');\n            const schema = Joi.object().keys({\n                limit: Joi.any(),\n                arr: Joi.array().min(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ limit: Math.pow(2, 53), arr: [1, 2] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: Math.pow(2, 53), arg: 'limit', reason: 'must be a positive integer' }\n                }],\n                [{ limit: 'I like turtles', arr: [1] }, false, {\n                    message: '\"arr\" limit references \"ref:limit\" which must be a positive integer',\n                    path: ['arr'],\n                    type: 'any.ref',\n                    context: { ref, label: 'arr', key: 'arr', value: 'I like turtles', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"ignores stripUnknown when true","suites":["array","options()"],"updatePoint":{"line":1007,"column":42},"line":1007,"code":"        it('ignores stripUnknown when true', () => {\n\n            const schema = Joi.array().items(Joi.string()).prefs({ stripUnknown: true });\n\n            Helper.validate(schema, [\n                [['one', 'two', 3, 4, true, false], false, '\"[2]\" must be a string']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"respects stripUnknown (as an object)","suites":["array","options()"],"updatePoint":{"line":1016,"column":48},"line":1016,"code":"        it('respects stripUnknown (as an object)', () => {\n\n            const schema = Joi.array().items(Joi.string()).prefs({ stripUnknown: { arrays: true, objects: false } });\n\n            Helper.validate(schema, [\n                [['one', 'two', 3, 4, true, false], true, ['one', 'two']]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"shows path to errors in array ordered items","suites":["array","ordered()"],"updatePoint":{"line":1028,"column":55},"line":1028,"code":"        it('shows path to errors in array ordered items', () => {\n\n            expect(() => {\n\n                Joi.array().ordered({\n                    a: {\n                        b: {\n                            c: {\n                                d: undefined\n                            }\n                        }\n                    }\n                });\n            }).to.throw('Invalid undefined schema (0.a.b.c.d)');\n\n            expect(() => Joi.array().ordered({ foo: 'bar' }, undefined)).to.throw('Invalid undefined schema (1)');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates input against items in order","suites":["array","ordered()"],"updatePoint":{"line":1046,"column":50},"line":1046,"code":"        it('validates input against items in order', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().required());\n\n            Helper.validate(schema, [\n                [['s1', 2], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates input with optional item","suites":["array","ordered()"],"updatePoint":{"line":1055,"column":46},"line":1055,"code":"        it('validates input with optional item', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().required(), Joi.number());\n\n            Helper.validate(schema, [\n                [['s1', 2, 3], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates input without optional item","suites":["array","ordered()"],"updatePoint":{"line":1064,"column":49},"line":1064,"code":"        it('validates input without optional item', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().required(), Joi.number());\n\n            Helper.validate(schema, [\n                [['s1', 2], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates input without optional item","suites":["array","ordered()"],"updatePoint":{"line":1073,"column":49},"line":1073,"code":"        it('validates input without optional item', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().required(), Joi.number()).sparse(true);\n\n            Helper.validate(schema, [\n                [['s1', 2, undefined], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates input without optional item in a sparse array","suites":["array","ordered()"],"updatePoint":{"line":1082,"column":67},"line":1082,"code":"        it('validates input without optional item in a sparse array', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number(), Joi.number().required()).sparse(true);\n\n            Helper.validate(schema, [\n                [['s1', undefined, 3], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates when input matches ordered items and matches regular items","suites":["array","ordered()"],"updatePoint":{"line":1091,"column":80},"line":1091,"code":"        it('validates when input matches ordered items and matches regular items', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().required()).items(Joi.number());\n\n            Helper.validate(schema, [\n                [['s1', 2, 3, 4, 5], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input does not match ordered items","suites":["array","ordered()"],"updatePoint":{"line":1100,"column":58},"line":1100,"code":"        it('errors when input does not match ordered items', () => {\n\n            const schema = Joi.array().ordered(Joi.number().required(), Joi.string().required());\n\n            Helper.validate(schema, [\n                [['s1', 2], false, {\n                    message: '\"[0]\" must be a number',\n                    path: [0],\n                    type: 'number.base',\n                    context: { label: '[0]', key: 0, value: 's1' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input has more items than ordered items","suites":["array","ordered()"],"updatePoint":{"line":1114,"column":63},"line":1114,"code":"        it('errors when input has more items than ordered items', () => {\n\n            const schema = Joi.array().ordered(Joi.number().required(), Joi.string().required());\n\n            Helper.validate(schema, [\n                [[1, 's2', 3], false, {\n                    message: '\"value\" must contain at most 2 items',\n                    path: [],\n                    type: 'array.orderedLength',\n                    context: { pos: 2, limit: 2, label: 'value', value: [1, 's2', 3] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input has more items than ordered items with abortEarly = false","suites":["array","ordered()"],"updatePoint":{"line":1128,"column":87},"line":1128,"code":"        it('errors when input has more items than ordered items with abortEarly = false', () => {\n\n            const schema = Joi.array().ordered(Joi.string(), Joi.number()).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[1, 2, 3, 4, 5], false, {\n                    message: '\"[0]\" must be a string. \"value\" must contain at most 2 items',\n                    details: [\n                        {\n                            message: '\"[0]\" must be a string',\n                            path: [0],\n                            type: 'string.base',\n                            context: { value: 1, label: '[0]', key: 0 }\n                        },\n                        {\n                            message: '\"value\" must contain at most 2 items',\n                            path: [],\n                            type: 'array.orderedLength',\n                            context: { pos: 2, limit: 2, label: 'value', value: [1, 2, 3, 4, 5] }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input has less items than ordered items","suites":["array","ordered()"],"updatePoint":{"line":1153,"column":63},"line":1153,"code":"        it('errors when input has less items than ordered items', () => {\n\n            const schema = Joi.array().ordered(Joi.number().required(), Joi.string().required());\n\n            Helper.validate(schema, [\n                [[1], false, {\n                    message: '\"value\" does not contain 1 required value(s)',\n                    path: [],\n                    type: 'array.includesRequiredUnknowns',\n                    context: { unknownMisses: 1, label: 'value', value: [1] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input matches ordered items but not matches regular items","suites":["array","ordered()"],"updatePoint":{"line":1167,"column":81},"line":1167,"code":"        it('errors when input matches ordered items but not matches regular items', () => {\n\n            const schema = Joi.array()\n                .ordered(Joi.string().required(), Joi.number().required())\n                .items(Joi.number())\n                .prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [['s1', 2, 3, 4, 's5'], false, {\n                    message: '\"[4]\" must be a number',\n                    details: [{\n                        message: '\"[4]\" must be a number',\n                        path: [4],\n                        type: 'number.base',\n                        context: { label: '[4]', key: 4, value: 's5' }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input does not match ordered items but matches regular items","suites":["array","ordered()"],"updatePoint":{"line":1187,"column":84},"line":1187,"code":"        it('errors when input does not match ordered items but matches regular items', () => {\n\n            const schema = Joi.array()\n                .ordered(Joi.string(), Joi.number())\n                .items(Joi.number())\n                .prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[1, 2, 3, 4, 5], false, {\n                    message: '\"[0]\" must be a string',\n                    details: [{\n                        message: '\"[0]\" must be a string',\n                        path: [0],\n                        type: 'string.base',\n                        context: { value: 1, label: '[0]', key: 0 }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors when input does not match ordered items not matches regular items","suites":["array","ordered()"],"updatePoint":{"line":1207,"column":84},"line":1207,"code":"        it('errors when input does not match ordered items not matches regular items', () => {\n\n            const schema = Joi.array().ordered(Joi.string(), Joi.number()).items(Joi.string()).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[1, 2, 3, 4, 5], false, {\n                    message: '\"[0]\" must be a string. \"[2]\" must be a string. \"[3]\" must be a string. \"[4]\" must be a string',\n                    details: [\n                        {\n                            message: '\"[0]\" must be a string',\n                            path: [0],\n                            type: 'string.base',\n                            context: { value: 1, label: '[0]', key: 0 }\n                        },\n                        {\n                            message: '\"[2]\" must be a string',\n                            path: [2],\n                            type: 'string.base',\n                            context: { value: 3, label: '[2]', key: 2 }\n                        },\n                        {\n                            message: '\"[3]\" must be a string',\n                            path: [3],\n                            type: 'string.base',\n                            context: { value: 4, label: '[3]', key: 3 }\n                        },\n                        {\n                            message: '\"[4]\" must be a string',\n                            path: [4],\n                            type: 'string.base',\n                            context: { value: 5, label: '[4]', key: 4 }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors but continues when abortEarly is set to false","suites":["array","ordered()"],"updatePoint":{"line":1244,"column":64},"line":1244,"code":"        it('errors but continues when abortEarly is set to false', () => {\n\n            const schema = Joi.array().ordered(Joi.number().required(), Joi.string().required()).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [['s1', 2], false, {\n                    message: '\"[0]\" must be a number. \"[1]\" must be a string',\n                    details: [\n                        {\n                            message: '\"[0]\" must be a number',\n                            path: [0],\n                            type: 'number.base',\n                            context: { label: '[0]', key: 0, value: 's1' }\n                        },\n                        {\n                            message: '\"[1]\" must be a string',\n                            path: [1],\n                            type: 'string.base',\n                            context: { value: 2, label: '[1]', key: 1 }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on sparse arrays and continues when abortEarly is set to false","suites":["array","ordered()"],"updatePoint":{"line":1269,"column":81},"line":1269,"code":"        it('errors on sparse arrays and continues when abortEarly is set to false', () => {\n\n            const schema = Joi.array().ordered(\n                Joi.number().min(0),\n                Joi.string().min(2),\n                Joi.number().max(0),\n                Joi.string().max(3)\n            )\n                .prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[0, 'ab', 0, 'ab'], true],\n                [[undefined, 'foo', 2, 'bar'], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[2]\" must be less than or equal to 0',\n                    details: [{\n                        message: '\"[0]\" must not be a sparse array item',\n                        path: [0],\n                        type: 'array.sparse',\n                        context: { key: 0, label: '[0]', path: [0], pos: 0, value: undefined }\n                    },\n                    {\n                        message: '\"[2]\" must be less than or equal to 0',\n                        path: [2],\n                        type: 'number.max',\n                        context: { key: 2, label: '[2]', limit: 0, value: 2 }\n                    }]\n                }],\n                [[undefined, 'foo', 2, undefined], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[2]\" must be less than or equal to 0. \"[3]\" must not be a sparse array item',\n                    details: [{\n                        message: '\"[0]\" must not be a sparse array item',\n                        path: [0],\n                        type: 'array.sparse',\n                        context: { key: 0, label: '[0]', path: [0], pos: 0, value: undefined }\n                    },\n                    {\n                        message: '\"[2]\" must be less than or equal to 0',\n                        path: [2],\n                        type: 'number.max',\n                        context: { key: 2, label: '[2]', limit: 0, value: 2 }\n                    },\n                    {\n                        message: '\"[3]\" must not be a sparse array item',\n                        path: [3],\n                        type: 'array.sparse',\n                        context: { key: 3, label: '[3]', path: [3], pos: 3, value: undefined }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on forbidden items and continues when abortEarly is set to false","suites":["array","ordered()"],"updatePoint":{"line":1320,"column":83},"line":1320,"code":"        it('errors on forbidden items and continues when abortEarly is set to false', () => {\n\n            const schema = Joi.array().items(Joi.bool().forbidden()).ordered(\n                Joi.number().min(0),\n                Joi.string().min(2),\n                Joi.number().max(0),\n                Joi.string().max(3)\n            )\n                .prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[0, 'ab', 0, 'ab'], true],\n                [[undefined, 'foo', 2, 'bar'], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[2]\" must be less than or equal to 0',\n                    details: [{\n                        message: '\"[0]\" must not be a sparse array item',\n                        path: [0],\n                        type: 'array.sparse',\n                        context: { key: 0, label: '[0]', path: [0], pos: 0, value: undefined }\n                    }, {\n                        message: '\"[2]\" must be less than or equal to 0',\n                        path: [2],\n                        type: 'number.max',\n                        context: { key: 2, label: '[2]', limit: 0, value: 2 }\n                    }]\n                }],\n                [[undefined, 'foo', 2, undefined], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[2]\" must be less than or equal to 0. \"[3]\" must not be a sparse array item',\n                    details: [{\n                        message: '\"[0]\" must not be a sparse array item',\n                        path: [0],\n                        type: 'array.sparse',\n                        context: { key: 0, label: '[0]', path: [0], pos: 0, value: undefined }\n                    },\n                    {\n                        message: '\"[2]\" must be less than or equal to 0',\n                        path: [2],\n                        type: 'number.max',\n                        context: { key: 2, label: '[2]', limit: 0, value: 2 }\n                    },\n                    {\n                        message: '\"[3]\" must not be a sparse array item',\n                        path: [3],\n                        type: 'array.sparse',\n                        context: { key: 3, label: '[3]', path: [3], pos: 3, value: undefined }\n                    }]\n                }],\n                [[undefined, false, 2, undefined], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[1]\" contains an excluded value. \"[2]\" must be less than or equal to 0. \"[3]\" must not be a sparse array item',\n                    details: [{\n                        message: '\"[0]\" must not be a sparse array item',\n                        path: [0],\n                        type: 'array.sparse',\n                        context: { key: 0, label: '[0]', path: [0], pos: 0, value: undefined }\n                    },\n                    {\n                        message: '\"[1]\" contains an excluded value',\n                        path: [1],\n                        type: 'array.excludes',\n                        context: { key: 1, label: '[1]', pos: 1, value: false }\n                    },\n                    {\n                        message: '\"[2]\" must be less than or equal to 0',\n                        path: [2],\n                        type: 'number.max',\n                        context: { key: 2, label: '[2]', limit: 0, value: 2 }\n                    },\n                    {\n                        message: '\"[3]\" must not be a sparse array item',\n                        path: [3],\n                        type: 'array.sparse',\n                        context: { key: 3, label: '[3]', path: [3], pos: 3, value: undefined }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"strips item","suites":["array","ordered()"],"updatePoint":{"line":1397,"column":23},"line":1397,"code":"        it('strips item', () => {\n\n            const schema = Joi.array().ordered(Joi.string().required(), Joi.number().strip(), Joi.number().required());\n\n            Helper.validate(schema, [\n                [['s1', 2, 3], true, ['s1', 3]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"strips multiple items","suites":["array","ordered()"],"updatePoint":{"line":1406,"column":33},"line":1406,"code":"        it('strips multiple items', () => {\n\n            const schema = Joi.array().ordered(Joi.string().strip(), Joi.number(), Joi.number().strip());\n\n            Helper.validate(schema, [\n                [['s1', 2, 3], true, [2]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"references array members","suites":["array","ordered()"],"updatePoint":{"line":1415,"column":36},"line":1415,"code":"        it('references array members', () => {\n\n            const schema = Joi.array().ordered(Joi.number(), Joi.number().greater(Joi.ref('..0')));\n\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [[1, 0], false, '\"[1]\" must be greater than ref:0']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows a single element","suites":["array","single()"],"updatePoint":{"line":1428,"column":35},"line":1428,"code":"        it('allows a single element', () => {\n\n            const schema = Joi.array().items(Joi.number()).items(Joi.boolean().forbidden()).single();\n\n            Helper.validate(schema, [\n                [[1, 2, 3], true],\n                [1, true, [1]],\n                [['a'], false, {\n                    message: '\"[0]\" must be a number',\n                    path: [0],\n                    type: 'number.base',\n                    context: { label: '[0]', key: 0, value: 'a' }\n                }],\n                ['a', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: 'a' }\n                }],\n                [true, false, {\n                    message: '\"value\" contains an excluded value',\n                    path: [],\n                    type: 'array.excludes',\n                    context: { pos: 0, value: true, label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows a single element with multiple types","suites":["array","single()"],"updatePoint":{"line":1456,"column":55},"line":1456,"code":"        it('allows a single element with multiple types', () => {\n\n            const schema = Joi.array().items(Joi.number(), Joi.string()).single();\n\n            Helper.validate(schema, [\n                [[1, 2, 3], true],\n                [1, true, [1]],\n                [[1, 'a'], true],\n                ['a', true, ['a']],\n                [true, false, {\n                    message: '\"value\" does not match any of the allowed types',\n                    path: [],\n                    type: 'array.includes',\n                    context: { pos: 0, value: true, label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on single with array items","suites":["array","single()"],"updatePoint":{"line":1474,"column":45},"line":1474,"code":"        it('errors on single with array items', () => {\n\n            expect(() => Joi.array().items(Joi.array()).single()).to.throw('Cannot specify single rule when array has array items');\n            expect(() => Joi.array().items(Joi.alternatives([Joi.array()])).single()).to.throw('Cannot specify single rule when array has array items');\n            expect(() => Joi.array().items(Joi.alternatives([Joi.number(), Joi.string()])).single()).to.not.throw();\n\n            expect(() => Joi.array().single().items(Joi.array())).to.throw('Cannot specify array item with single rule enabled');\n            expect(() => Joi.array().single().items(Joi.alternatives([Joi.array()]))).to.throw('Cannot specify array item with single rule enabled');\n\n            expect(() => Joi.array().ordered(Joi.array()).single()).to.throw('Cannot specify single rule when array has array items');\n            expect(() => Joi.array().ordered(Joi.alternatives([Joi.array()])).single()).to.throw('Cannot specify single rule when array has array items');\n\n            expect(() => Joi.array().single().ordered(Joi.array())).to.throw('Cannot specify array item with single rule enabled');\n            expect(() => Joi.array().single().ordered(Joi.alternatives([Joi.array()]))).to.throw('Cannot specify array item with single rule enabled');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"switches the single flag with explicit value","suites":["array","single()"],"updatePoint":{"line":1490,"column":56},"line":1490,"code":"        it('switches the single flag with explicit value', () => {\n\n            const schema = Joi.array().single(true);\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array',\n                flags: { single: true }\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"switches the single flag back","suites":["array","single()"],"updatePoint":{"line":1500,"column":41},"line":1500,"code":"        it('switches the single flag back', () => {\n\n            const schema = Joi.array().single().single(false);\n            const desc = schema.describe();\n            expect(desc).to.equal({ type: 'array' });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["array","single()"],"updatePoint":{"line":1507,"column":56},"line":1507,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.array().single();\n            expect(schema.single()).to.shallow.equal(schema);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array sorts order","suites":["array","sort()"],"updatePoint":{"line":1516,"column":39},"line":1516,"code":"        it('validates array sorts order', () => {\n\n            const schema = Joi.array().sort().prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [['a', 'b'], true],\n                [['a', 'b', null], true],\n                [['a', 'b', null, null], true],\n                [['a', 'b', undefined], true],\n                [['a', 'b', undefined, undefined], true],\n                [[1, 0], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: [1, 0]\n                    }\n                }],\n                [['1', '0'], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: ['1', '0']\n                    }\n                }],\n                [[null, 1, 2], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: [null, 1, 2]\n                    }\n                }],\n                [{}, false, '\"value\" must be an array']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array sorts order (ascending)","suites":["array","sort()"],"updatePoint":{"line":1564,"column":51},"line":1564,"code":"        it('validates array sorts order (ascending)', () => {\n\n            const schema = Joi.array().sort({ order: 'ascending' }).prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [['a', 'b'], true],\n                [['a', 'b', null], true],\n                [['a', 'b', null, null], true],\n                [['a', 'b', undefined], true],\n                [['a', 'b', undefined, undefined], true],\n                [['a', 'b', null, undefined], true],\n                [[1, 0], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: [1, 0]\n                    }\n                }],\n                [['1', '0'], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: ['1', '0']\n                    }\n                }],\n                [[null, 1, 2], false, {\n                    message: '\"value\" must be sorted in ascending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'value',\n                        label: 'value',\n                        value: [null, 1, 2]\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array sorts order (descending)","suites":["array","sort()"],"updatePoint":{"line":1612,"column":52},"line":1612,"code":"        it('validates array sorts order (descending)', () => {\n\n            const schema = Joi.array().sort({ order: 'descending' }).prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[2, 1], true],\n                [['b', 'a'], true],\n                [[null, 'b', 'a'], true],\n                [[null, null, 'b', 'a'], true],\n                [['b', 'a', undefined], true],\n                [['b', 'a', undefined, undefined], true],\n                [[null, 'b', 'a', undefined], true],\n                [[0, 1], false, {\n                    message: '\"value\" must be sorted in descending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'descending',\n                        by: 'value',\n                        label: 'value',\n                        value: [0, 1]\n                    }\n                }],\n                [['0', '1'], false, {\n                    message: '\"value\" must be sorted in descending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'descending',\n                        by: 'value',\n                        label: 'value',\n                        value: ['0', '1']\n                    }\n                }],\n                [[2, 1, null], false, {\n                    message: '\"value\" must be sorted in descending order by value',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'descending',\n                        by: 'value',\n                        label: 'value',\n                        value: [2, 1, null]\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array sorts order (object key)","suites":["array","sort()"],"updatePoint":{"line":1660,"column":52},"line":1660,"code":"        it('validates array sorts order (object key)', () => {\n\n            const schema = Joi.array().sort({ by: 'x' }).prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[{ x: 1 }, { x: 2 }], true],\n                [[{ x: 'a' }, { x: 'b' }], true],\n                [[{ x: 'a' }, { x: 'b' }, { x: null }], true],\n                [[{ x: 'a' }, { x: 'b' }, { x: null }, { x: null }], true],\n                [[{ x: 'a' }, { x: 'b' }, undefined], true],\n                [[{ x: 'a' }, { x: 'b' }, undefined, undefined], true],\n                [[{ x: 'a' }, { x: 'b' }, { x: null }, {}, null, undefined, undefined], true],\n                [[{ x: 1 }, { x: 0 }], false, {\n                    message: '\"value\" must be sorted in ascending order by x',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'x',\n                        label: 'value',\n                        value: [{ x: 1 }, { x: 0 }]\n                    }\n                }],\n                [[{ x: '1' }, { x: '0' }], false, {\n                    message: '\"value\" must be sorted in ascending order by x',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'x',\n                        label: 'value',\n                        value: [{ x: '1' }, { x: '0' }]\n                    }\n                }],\n                [[{ x: null }, { x: 1 }, { x: 2 }], false, {\n                    message: '\"value\" must be sorted in ascending order by x',\n                    path: [],\n                    type: 'array.sort',\n                    context: {\n                        order: 'ascending',\n                        by: 'x',\n                        label: 'value',\n                        value: [{ x: null }, { x: 1 }, { x: 2 }]\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"sorts array (ascending)","suites":["array","sort()"],"updatePoint":{"line":1708,"column":35},"line":1708,"code":"        it('sorts array (ascending)', () => {\n\n            const schema = Joi.array().sort({ order: 'ascending' });\n\n            Helper.validate(schema, [\n                [[2, 1], true, [1, 2]],\n                [['b', 'a'], true, ['a', 'b']],\n                [[null, 'a', 'b'], true, ['a', 'b', null]],\n                [[null, 'b', 'a'], true, ['a', 'b', null]],\n                [['a', null, 'b'], true, ['a', 'b', null]],\n                [[null, 'a', null, 'b'], true, ['a', 'b', null, null]],\n                [['b', 'a', undefined], true, ['a', 'b', undefined]],\n                [['b', undefined, 'a'], true, ['a', 'b', undefined]],\n                [[0, '1'], false, {\n                    message: '\"value\" cannot be sorted due to mismatching types',\n                    path: [],\n                    type: 'array.sort.mismatching',\n                    context: {\n                        label: 'value',\n                        value: [0, '1']\n                    }\n                }],\n                [{}, false, '\"value\" must be an array']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"sorts array (object key)","suites":["array","sort()"],"updatePoint":{"line":1734,"column":36},"line":1734,"code":"        it('sorts array (object key)', () => {\n\n            const schema = Joi.array().sort({ by: 'x' });\n\n            Helper.validate(schema, [\n                [[{ x: 1 }, { x: 2 }], true, [{ x: 1 }, { x: 2 }]],\n                [[{ x: 'b' }, { x: 'a' }], true, [{ x: 'a' }, { x: 'b' }]],\n                [[{ x: 'b' }, { x: null }, { x: 'a' }], true, [{ x: 'a' }, { x: 'b' }, { x: null }]],\n                [[{}, { x: 'b' }, undefined, null, { x: null }, { x: 'a' }, undefined], true, [{ x: 'a' }, { x: 'b' }, { x: null }, {}, null, undefined, undefined]],\n                [[{ x: 0 }, { x: '1' }], false, {\n                    message: '\"value\" cannot be sorted due to mismatching types',\n                    path: [],\n                    type: 'array.sort.mismatching',\n                    context: {\n                        label: 'value',\n                        value: [{ x: 0 }, { x: '1' }]\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on unsupported type","suites":["array","sort()"],"updatePoint":{"line":1755,"column":38},"line":1755,"code":"        it('errors on unsupported type', () => {\n\n            const schema = Joi.array().sort().prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[{}, {}], false, '\"value\" cannot be sorted due to unsupported type object']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on mismatching types","suites":["array","sort()"],"updatePoint":{"line":1764,"column":39},"line":1764,"code":"        it('errors on mismatching types', () => {\n\n            const schema = Joi.array().sort().prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [[1, 'x'], false, '\"value\" cannot be sorted due to mismatching types']\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value","suites":["array","sparse()"],"updatePoint":{"line":1776,"column":37},"line":1776,"code":"        it('errors on undefined value', () => {\n\n            const schema = Joi.array().items(Joi.number());\n\n            Helper.validate(schema, [\n                [[undefined], false, {\n                    message: '\"[0]\" must not be a sparse array item',\n                    path: [0],\n                    type: 'array.sparse',\n                    context: { label: '[0]', key: 0, path: [0], pos: 0, value: undefined }\n                }],\n                [[2, undefined], false, {\n                    message: '\"[1]\" must not be a sparse array item',\n                    path: [1],\n                    type: 'array.sparse',\n                    context: { label: '[1]', key: 1, path: [1], pos: 1, value: undefined }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation","suites":["array","sparse()"],"updatePoint":{"line":1796,"column":54},"line":1796,"code":"        it('errors on undefined value after validation', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({}));\n\n            Helper.validate(schema, [\n                [[{ a: 1 }, {}, { c: 3 }], false, {\n                    message: '\"[1]\" must not be a sparse array item',\n                    path: [1],\n                    type: 'array.sparse',\n                    context: { label: '[1]', key: 1, path: [1], pos: 1, value: undefined }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation with abortEarly false","suites":["array","sparse()"],"updatePoint":{"line":1810,"column":76},"line":1810,"code":"        it('errors on undefined value after validation with abortEarly false', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({})).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[{ a: 1 }, {}, 3], false, {\n                    message: '\"[1]\" must not be a sparse array item. \"[2]\" must be of type object',\n                    details: [\n                        {\n                            message: '\"[1]\" must not be a sparse array item',\n                            path: [1],\n                            type: 'array.sparse',\n                            context: { label: '[1]', key: 1, path: [1], pos: 1, value: undefined }\n                        },\n                        {\n                            message: '\"[2]\" must be of type object',\n                            path: [2],\n                            type: 'object.base',\n                            context: { label: '[2]', key: 2, value: 3, type: 'object' }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation with required","suites":["array","sparse()"],"updatePoint":{"line":1835,"column":68},"line":1835,"code":"        it('errors on undefined value after validation with required', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({}).required());\n\n            Helper.validate(schema, [\n                [[{}, { c: 3 }], false, {\n                    message: '\"[0]\" is required',\n                    path: [0],\n                    type: 'any.required',\n                    context: { label: '[0]', key: 0 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after custom validation with required","suites":["array","sparse()"],"updatePoint":{"line":1849,"column":75},"line":1849,"code":"        it('errors on undefined value after custom validation with required', () => {\n\n            const custom = Joi.extend({\n                type: 'extended',\n                rules: {\n                    foo: {\n                        method() {\n\n                            return this.$_addRule('foo');\n                        },\n                        validate: () => undefined\n                    }\n                }\n            });\n\n            const schema = custom.array().items(custom.extended().foo().required());\n\n            Helper.validate(schema, [\n                [[{}, { c: 3 }], false, {\n                    message: '\"[0]\" must not be a sparse array item',\n                    path: [0],\n                    type: 'array.sparse',\n                    context: { label: '[0]', key: 0, path: [0], pos: 0, value: undefined }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after custom validation with required and abortEarly false","suites":["array","sparse()"],"updatePoint":{"line":1876,"column":96},"line":1876,"code":"        it('errors on undefined value after custom validation with required and abortEarly false', () => {\n\n            const custom = Joi.extend({\n                type: 'extended',\n                rules: {\n                    foo: {\n                        method() {\n\n                            return this.$_addRule('foo');\n                        },\n                        validate: () => undefined\n                    }\n                }\n            });\n\n            const schema = custom.array().items(custom.extended().foo().required()).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[{}, { c: 3 }], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"[1]\" must not be a sparse array item',\n                    details: [\n                        {\n                            message: '\"[0]\" must not be a sparse array item',\n                            path: [0],\n                            type: 'array.sparse',\n                            context: { label: '[0]', key: 0, path: [0], pos: 0, value: undefined }\n                        },\n                        {\n                            message: '\"[1]\" must not be a sparse array item',\n                            path: [1],\n                            type: 'array.sparse',\n                            context: { label: '[1]', key: 1, path: [1], pos: 1, value: undefined }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation with required and abortEarly false","suites":["array","sparse()"],"updatePoint":{"line":1914,"column":89},"line":1914,"code":"        it('errors on undefined value after validation with required and abortEarly false', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({}).required()).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[{}, 3], false, {\n                    message: '\"[0]\" is required. \"[1]\" must be of type object. \"value\" does not contain 1 required value(s)',\n                    details: [\n                        {\n                            message: '\"[0]\" is required',\n                            path: [0],\n                            type: 'any.required',\n                            context: { label: '[0]', key: 0 }\n                        },\n                        {\n                            message: '\"[1]\" must be of type object',\n                            path: [1],\n                            type: 'object.base',\n                            context: { label: '[1]', key: 1, value: 3, type: 'object' }\n                        },\n                        {\n                            message: '\"value\" does not contain 1 required value(s)',\n                            path: [],\n                            type: 'array.includesRequiredUnknowns',\n                            context: { unknownMisses: 1, label: 'value', value: [{}, 3] }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation with ordered","suites":["array","sparse()"],"updatePoint":{"line":1945,"column":67},"line":1945,"code":"        it('errors on undefined value after validation with ordered', () => {\n\n            const schema = Joi.array().ordered(Joi.object().empty({}));\n\n            Helper.validate(schema, [\n                [[{}], false, {\n                    message: '\"[0]\" must not be a sparse array item',\n                    path: [0],\n                    type: 'array.sparse',\n                    context: { label: '[0]', key: 0, path: [0], pos: 0, value: undefined }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on undefined value after validation with ordered and abortEarly false","suites":["array","sparse()"],"updatePoint":{"line":1959,"column":88},"line":1959,"code":"        it('errors on undefined value after validation with ordered and abortEarly false', () => {\n\n            const schema = Joi.array().ordered(Joi.object().empty({})).prefs({ abortEarly: false });\n\n            Helper.validate(schema, [\n                [[{}, 3], false, {\n                    message: '\"[0]\" must not be a sparse array item. \"value\" must contain at most 1 items',\n                    details: [\n                        {\n                            message: '\"[0]\" must not be a sparse array item',\n                            path: [0],\n                            type: 'array.sparse',\n                            context: { label: '[0]', key: 0, path: [0], pos: 0, value: undefined }\n                        },\n                        {\n                            message: '\"value\" must contain at most 1 items',\n                            path: [],\n                            type: 'array.orderedLength',\n                            context: { pos: 1, limit: 1, label: 'value', value: [{}, 3] }\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates on undefined value with sparse","suites":["array","sparse()"],"updatePoint":{"line":1984,"column":52},"line":1984,"code":"        it('validates on undefined value with sparse', () => {\n\n            const schema = Joi.array().items(Joi.number()).sparse();\n\n            Helper.validate(schema, [\n                [[undefined], true],\n                [[2, undefined], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates on undefined value after validation","suites":["array","sparse()"],"updatePoint":{"line":1994,"column":57},"line":1994,"code":"        it('validates on undefined value after validation', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({})).sparse();\n\n            Helper.validate(schema, [\n                [[{ a: 1 }, {}, { c: 3 }], true, [{ a: 1 }, undefined, { c: 3 }]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates on undefined value after validation with required","suites":["array","sparse()"],"updatePoint":{"line":2003,"column":71},"line":2003,"code":"        it('validates on undefined value after validation with required', () => {\n\n            const schema = Joi.array().items(Joi.object().empty({}).required()).sparse();\n\n            Helper.validate(schema, [\n                [[{ a: 1 }, {}, { c: 3 }], false, {\n                    message: '\"[1]\" is required',\n                    path: [1],\n                    type: 'any.required',\n                    context: { label: '[1]', key: 1 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates on undefined value after validation with ordered","suites":["array","sparse()"],"updatePoint":{"line":2017,"column":70},"line":2017,"code":"        it('validates on undefined value after validation with ordered', () => {\n\n            const schema = Joi.array().ordered(Joi.object().empty({})).sparse();\n\n            Helper.validate(schema, [\n                [[{}], true, [undefined]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"switches the sparse flag","suites":["array","sparse()"],"updatePoint":{"line":2026,"column":36},"line":2026,"code":"        it('switches the sparse flag', () => {\n\n            const schema = Joi.array().sparse();\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array',\n                flags: { sparse: true }\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"switches the sparse flag with explicit value","suites":["array","sparse()"],"updatePoint":{"line":2036,"column":56},"line":2036,"code":"        it('switches the sparse flag with explicit value', () => {\n\n            const schema = Joi.array().sparse(true);\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array',\n                flags: { sparse: true }\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"switches the sparse flag back","suites":["array","sparse()"],"updatePoint":{"line":2046,"column":41},"line":2046,"code":"        it('switches the sparse flag back', () => {\n\n            const schema = Joi.array().sparse().sparse(false);\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'array'\n            });\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["array","sparse()"],"updatePoint":{"line":2055,"column":56},"line":2055,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.array().sparse();\n            expect(schema.sparse()).to.shallow.equal(schema);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors if duplicate numbers, strings, objects, binaries, functions, dates and booleans","suites":["array","unique()"],"updatePoint":{"line":2064,"column":98},"line":2064,"code":"        it('errors if duplicate numbers, strings, objects, binaries, functions, dates and booleans', () => {\n\n            const buffer = Buffer.from('hello world');\n            const func = function () { };\n            const now = new Date();\n            const schema = Joi.array().sparse().unique();\n\n            Helper.validate(schema, [\n                [[2, 2], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: 2,\n                        dupePos: 0,\n                        dupeValue: 2,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[0x2, 2], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: 2,\n                        dupePos: 0,\n                        dupeValue: 0x2,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [['duplicate', 'duplicate'], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: 'duplicate',\n                        dupePos: 0,\n                        dupeValue: 'duplicate',\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[{ a: 'b' }, { a: 'b' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b' },\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[buffer, buffer], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: buffer,\n                        dupePos: 0,\n                        dupeValue: buffer,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[func, func], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: func,\n                        dupePos: 0,\n                        dupeValue: func,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[now, now], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: now,\n                        dupePos: 0,\n                        dupeValue: now,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[true, true], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: true,\n                        dupePos: 0,\n                        dupeValue: true,\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[undefined, undefined], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        dupePos: 0,\n                        dupeValue: undefined,\n                        label: '[1]',\n                        key: 1,\n                        value: undefined\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors with the correct details","suites":["array","unique()"],"updatePoint":{"line":2192,"column":43},"line":2192,"code":"        it('errors with the correct details', () => {\n\n            Helper.validate(Joi.array().items(Joi.number()).unique(), [\n                [[1, 2, 3, 1, 4], false, {\n                    context: {\n                        key: 3,\n                        label: '[3]',\n                        pos: 3,\n                        value: 1,\n                        dupePos: 0,\n                        dupeValue: 1\n                    },\n                    message: '\"[3]\" contains a duplicate value',\n                    path: [3],\n                    type: 'array.unique'\n                }]\n            ]);\n\n            Helper.validate(Joi.array().items(Joi.number()).unique((a, b) => a === b), [\n                [[1, 2, 3, 1, 4], false, {\n                    context: {\n                        key: 3,\n                        label: '[3]',\n                        pos: 3,\n                        value: 1,\n                        dupePos: 0,\n                        dupeValue: 1\n                    },\n                    message: '\"[3]\" contains a duplicate value',\n                    path: [3],\n                    type: 'array.unique'\n                }]\n            ]);\n\n            Helper.validate(Joi.object({ a: Joi.array().items(Joi.number()).unique() }), [\n                [{ a: [1, 2, 3, 1, 4] }, false, {\n                    context: {\n                        key: 3,\n                        label: 'a[3]',\n                        pos: 3,\n                        value: 1,\n                        dupePos: 0,\n                        dupeValue: 1\n                    },\n                    message: '\"a[3]\" contains a duplicate value',\n                    path: ['a', 3],\n                    type: 'array.unique'\n                }]\n            ]);\n\n            Helper.validate(Joi.object({ a: Joi.array().items(Joi.number()).unique((a, b) => a === b) }), [\n                [{ a: [1, 2, 3, 1, 4] }, false, {\n                    context: {\n                        key: 3,\n                        label: 'a[3]',\n                        pos: 3,\n                        value: 1,\n                        dupePos: 0,\n                        dupeValue: 1\n                    },\n                    message: '\"a[3]\" contains a duplicate value',\n                    path: ['a', 3],\n                    type: 'array.unique'\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"ignores duplicates if they are of different types","suites":["array","unique()"],"updatePoint":{"line":2259,"column":61},"line":2259,"code":"        it('ignores duplicates if they are of different types', () => {\n\n            const schema = Joi.array().unique();\n\n            Helper.validate(schema, [\n                [[2, '2'], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates without duplicates","suites":["array","unique()"],"updatePoint":{"line":2268,"column":40},"line":2268,"code":"        it('validates without duplicates', () => {\n\n            const buffer = Buffer.from('hello world');\n            const buffer2 = Buffer.from('Hello world');\n            const func = function () { };\n            const func2 = function () { };\n            const now = new Date();\n            const now2 = new Date(+now + 100);\n            const schema = Joi.array().unique();\n\n            Helper.validate(schema, [\n                [[1, 2], true],\n                [['s1', 's2'], true],\n                [[{ a: 'b' }, { a: 'c' }], true],\n                [[buffer, buffer2], true],\n                [[func, func2], true],\n                [[now, now2], true],\n                [[true, false], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates using a comparator","suites":["array","unique()"],"updatePoint":{"line":2289,"column":40},"line":2289,"code":"        it('validates using a comparator', () => {\n\n            const schema = Joi.array().unique((left, right) => left.a === right.a);\n\n            Helper.validate(schema, [\n                [[{ a: 'b' }, { a: 'c' }], true],\n                [[{ a: 'b', c: 'd' }, { a: 'c', c: 'd' }], true],\n                [[{ a: 'b', c: 'd' }, { a: 'b', c: 'd' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b', c: 'd' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b', c: 'd' },\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[{ a: 'b', c: 'c' }, { a: 'b', c: 'd' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b', c: 'd' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b', c: 'c' },\n                        label: '[1]',\n                        key: 1\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates using a comparator with different types","suites":["array","unique()"],"updatePoint":{"line":2325,"column":61},"line":2325,"code":"        it('validates using a comparator with different types', () => {\n\n            const schema = Joi.array().items(Joi.string(), Joi.object({ a: Joi.string() })).unique((left, right) => {\n\n                if (typeof left === 'object') {\n                    if (typeof right === 'object') {\n                        return left.a === right.a;\n                    }\n\n                    return left.a === right;\n                }\n\n                if (typeof right === 'object') {\n                    return left === right.a;\n                }\n\n                return left === right;\n            });\n\n            Helper.validate(schema, [\n                [[{ a: 'b' }, { a: 'c' }], true],\n                [[{ a: 'b' }, 'c'], true],\n                [[{ a: 'b' }, 'c', { a: 'd' }, 'e'], true],\n                [[{ a: 'b' }, { a: 'b' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b' },\n                        label: '[1]',\n                        key: 1\n                    }\n                }],\n                [[{ a: 'b' }, 'b'], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: 'b',\n                        dupePos: 0,\n                        dupeValue: { a: 'b' },\n                        label: '[1]',\n                        key: 1\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates using a path comparator","suites":["array","unique()"],"updatePoint":{"line":2377,"column":45},"line":2377,"code":"        it('validates using a path comparator', () => {\n\n            let schema = Joi.array().items(Joi.object({ id: Joi.number() })).unique('id');\n\n            Helper.validate(schema, [\n                [[{ id: 1 }, { id: 2 }, { id: 3 }], true],\n                [[{ id: 1 }, { id: 2 }, {}], true],\n                [[{ id: 1 }, { id: 2 }, { id: 1 }], false, {\n                    context: {\n                        dupePos: 0,\n                        dupeValue: { id: 1 },\n                        key: 2,\n                        label: '[2]',\n                        path: 'id',\n                        pos: 2,\n                        value: { id: 1 }\n                    },\n                    message: '\"[2]\" contains a duplicate value',\n                    path: [2],\n                    type: 'array.unique'\n                }],\n                [[{ id: 1 }, { id: 2 }, {}, { id: 3 }, {}], false, {\n                    context: {\n                        dupePos: 2,\n                        dupeValue: {},\n                        key: 4,\n                        label: '[4]',\n                        path: 'id',\n                        pos: 4,\n                        value: {}\n                    },\n                    message: '\"[4]\" contains a duplicate value',\n                    path: [4],\n                    type: 'array.unique'\n                }]\n            ]);\n\n            schema = Joi.array().items(Joi.object({ nested: { id: Joi.number() } })).unique('nested.id');\n\n            Helper.validate(schema, [\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, { nested: { id: 3 } }], true],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, {}], true],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, { nested: { id: 1 } }], false, {\n                    context: {\n                        dupePos: 0,\n                        dupeValue: { nested: { id: 1 } },\n                        key: 2,\n                        label: '[2]',\n                        path: 'nested.id',\n                        pos: 2,\n                        value: { nested: { id: 1 } }\n                    },\n                    message: '\"[2]\" contains a duplicate value',\n                    path: [2],\n                    type: 'array.unique'\n                }],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, {}, { nested: { id: 3 } }, {}], false, {\n                    context: {\n                        dupePos: 2,\n                        dupeValue: {},\n                        key: 4,\n                        label: '[4]',\n                        path: 'nested.id',\n                        pos: 4,\n                        value: {}\n                    },\n                    message: '\"[4]\" contains a duplicate value',\n                    path: [4],\n                    type: 'array.unique'\n                }]\n            ]);\n\n            schema = Joi.array().items(Joi.object({ nested: { id: Joi.number() } })).unique('nested');\n\n            Helper.validate(schema, [\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, { nested: { id: 3 } }], true],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, {}], true],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, { nested: { id: 1 } }], false, {\n                    context: {\n                        dupePos: 0,\n                        dupeValue: { nested: { id: 1 } },\n                        key: 2,\n                        label: '[2]',\n                        path: 'nested',\n                        pos: 2,\n                        value: { nested: { id: 1 } }\n                    },\n                    message: '\"[2]\" contains a duplicate value',\n                    path: [2],\n                    type: 'array.unique'\n                }],\n                [[{ nested: { id: 1 } }, { nested: { id: 2 } }, {}, { nested: { id: 3 } }, {}], false, {\n                    context: {\n                        dupePos: 2,\n                        dupeValue: {},\n                        key: 4,\n                        label: '[4]',\n                        path: 'nested',\n                        pos: 4,\n                        value: {}\n                    },\n                    message: '\"[4]\" contains a duplicate value',\n                    path: [4],\n                    type: 'array.unique'\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"ignores undefined value when ignoreUndefined is true","suites":["array","unique()"],"updatePoint":{"line":2485,"column":64},"line":2485,"code":"        it('ignores undefined value when ignoreUndefined is true', () => {\n\n            const schema = Joi.array().unique('a', { ignoreUndefined: true });\n\n            Helper.validate(schema, [\n                [[{ a: 'b' }, { a: 'c' }], true],\n                [[{ c: 'd' }, { c: 'd' }], true],\n                [[{ a: 'b', c: 'd' }, { a: 'b', c: 'd' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b', c: 'd' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b', c: 'd' },\n                        label: '[1]',\n                        key: 1,\n                        path: 'a'\n                    }\n                }],\n                [[{ a: 'b', c: 'c' }, { a: 'b', c: 'd' }], false, {\n                    message: '\"[1]\" contains a duplicate value',\n                    path: [1],\n                    type: 'array.unique',\n                    context: {\n                        pos: 1,\n                        value: { a: 'b', c: 'd' },\n                        dupePos: 0,\n                        dupeValue: { a: 'b', c: 'c' },\n                        label: '[1]',\n                        key: 1,\n                        path: 'a'\n                    }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"fails with invalid configs","suites":["array","unique()"],"updatePoint":{"line":2523,"column":38},"line":2523,"code":"        it('fails with invalid configs', () => {\n\n            expect(() => Joi.array().unique('id', 'invalid configs')).to.throw('Options must be of type object');\n            expect(() => Joi.array().unique('id', {})).to.not.throw();\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"fails with invalid comparator","suites":["array","unique()"],"updatePoint":{"line":2529,"column":41},"line":2529,"code":"        it('fails with invalid comparator', () => {\n\n            expect(() => Joi.array().unique({})).to.throw(Error, 'comparator must be a function or a string');\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"handles period in key names","suites":["array","unique()"],"updatePoint":{"line":2534,"column":39},"line":2534,"code":"        it('handles period in key names', () => {\n\n            const schema = Joi.array().unique('a.b', { separator: false });\n\n            Helper.validate(schema, [\n                [[{ 'a.b': 1 }, { 'a.b': 2 }], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"should, by default, allow undefined, allow empty array","suites":["array","validate()"],"updatePoint":{"line":2546,"column":66},"line":2546,"code":"        it('should, by default, allow undefined, allow empty array', () => {\n\n            Helper.validate(Joi.array(), [\n                [undefined, true],\n                [[], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"should, when .required(), deny undefined","suites":["array","validate()"],"updatePoint":{"line":2554,"column":52},"line":2554,"code":"        it('should, when .required(), deny undefined', () => {\n\n            Helper.validate(Joi.array().required(), [\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows empty arrays","suites":["array","validate()"],"updatePoint":{"line":2566,"column":31},"line":2566,"code":"        it('allows empty arrays', () => {\n\n            Helper.validate(Joi.array(), [\n                [undefined, true],\n                [[], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"excludes values when items are forbidden","suites":["array","validate()"],"updatePoint":{"line":2574,"column":52},"line":2574,"code":"        it('excludes values when items are forbidden', () => {\n\n            Helper.validate(Joi.array().items(Joi.string().forbidden()), [\n                [['2', '1'], false, {\n                    message: '\"[0]\" contains an excluded value',\n                    path: [0],\n                    type: 'array.excludes',\n                    context: { pos: 0, value: '2', label: '[0]', key: 0 }\n                }],\n                [['1'], false, {\n                    message: '\"[0]\" contains an excluded value',\n                    path: [0],\n                    type: 'array.excludes',\n                    context: { pos: 0, value: '1', label: '[0]', key: 0 }\n                }],\n                [[2], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"allows types to be forbidden","suites":["array","validate()"],"updatePoint":{"line":2593,"column":40},"line":2593,"code":"        it('allows types to be forbidden', () => {\n\n            const schema = Joi.array().items(Joi.number().forbidden());\n\n            Helper.validate(schema, [\n                [['x', 'y', 'z'], true],\n                [[1, 2, 'hippo'], false, {\n                    message: '\"[0]\" contains an excluded value',\n                    path: [0],\n                    type: 'array.excludes',\n                    context: { pos: 0, value: 1, label: '[0]', key: 0 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array of Numbers","suites":["array","validate()"],"updatePoint":{"line":2608,"column":38},"line":2608,"code":"        it('validates array of Numbers', () => {\n\n            Helper.validate(Joi.array().items(Joi.number()), [\n                [[1, 2, 3], true],\n                [[50, 100, 1000], true],\n                [['a', 1, 2], false, {\n                    message: '\"[0]\" must be a number',\n                    path: [0],\n                    type: 'number.base',\n                    context: { label: '[0]', key: 0, value: 'a' }\n                }],\n                [['1', '2', 4], true, [1, 2, 4]]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array of mixed Numbers & Strings","suites":["array","validate()"],"updatePoint":{"line":2623,"column":54},"line":2623,"code":"        it('validates array of mixed Numbers & Strings', () => {\n\n            Helper.validate(Joi.array().items(Joi.number(), Joi.string()), [\n                [[1, 2, 3], true],\n                [[50, 100, 1000], true],\n                [[1, 'a', 5, 10], true],\n                [['joi', 'everydaylowprices', 5000], true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates array of objects with schema","suites":["array","validate()"],"updatePoint":{"line":2633,"column":50},"line":2633,"code":"        it('validates array of objects with schema', () => {\n\n            Helper.validate(Joi.array().items(Joi.object({ h1: Joi.number().required() })), [\n                [[{ h1: 1 }, { h1: 2 }, { h1: 3 }], true],\n                [[{ h2: 1, h3: 'somestring' }, { h1: 2 }, { h1: 3 }], false, {\n                    message: '\"[0].h1\" is required',\n                    path: [0, 'h1'],\n                    type: 'any.required',\n                    context: { label: '[0].h1', key: 'h1' }\n                }],\n                [[1, 2, [1]], false, {\n                    message: '\"[0]\" must be of type object',\n                    path: [0],\n                    type: 'object.base',\n                    context: { label: '[0]', key: 0, value: 1, type: 'object' }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on array of unallowed mixed types (Array)","suites":["array","validate()"],"updatePoint":{"line":2652,"column":60},"line":2652,"code":"        it('errors on array of unallowed mixed types (Array)', () => {\n\n            Helper.validate(Joi.array().items(Joi.number()), [\n                [[1, 2, 3], true],\n                [[1, 2, [1]], false, {\n                    message: '\"[2]\" must be a number',\n                    path: [2],\n                    type: 'number.base',\n                    context: { label: '[2]', key: 2, value: [1] }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"errors on invalid number rule using includes","suites":["array","validate()"],"updatePoint":{"line":2665,"column":56},"line":2665,"code":"        it('errors on invalid number rule using includes', () => {\n\n            const schema = Joi.object({\n                arr: Joi.array().items(Joi.number().integer())\n            });\n\n            Helper.validate(schema, [\n                [{ arr: [1, 2, 2.1] }, false, {\n                    message: '\"arr[2]\" must be an integer',\n                    path: ['arr', 2],\n                    type: 'number.integer',\n                    context: { value: 2.1, label: 'arr[2]', key: 2 }\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"validates an array within an object","suites":["array","validate()"],"updatePoint":{"line":2681,"column":47},"line":2681,"code":"        it('validates an array within an object', () => {\n\n            const schema = Joi.object({\n                array: Joi.array().items(Joi.string().min(5), Joi.number().min(3))\n            }).prefs({ convert: false });\n\n            Helper.validate(schema, [\n                [{ array: ['12345'] }, true],\n                [{ array: ['1'] }, false, {\n                    message: '\"array[0]\" does not match any of the allowed types',\n                    path: ['array', 0],\n                    type: 'array.includes',\n                    context: { pos: 0, value: '1', label: 'array[0]', key: 0 }\n                }],\n                [{ array: [3] }, true],\n                [{ array: ['12345', 3] }, true]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"should not change original value","suites":["array","validate()"],"updatePoint":{"line":2700,"column":44},"line":2700,"code":"        it('should not change original value', () => {\n\n            const schema = Joi.array().items(Joi.number()).unique();\n            const input = ['1', '2'];\n\n            Helper.validate(schema, [\n                [input, true, [1, 2]]\n            ]);\n\n            expect(input).to.equal(['1', '2']);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns multiple errors if abort early is false","suites":["array","validate()"],"updatePoint":{"line":2712,"column":59},"line":2712,"code":"        it('returns multiple errors if abort early is false', () => {\n\n            const schema = Joi.array().items(Joi.number(), Joi.object()).items(Joi.boolean().forbidden());\n\n            Helper.validate(schema, { abortEarly: false }, [\n                [[1, undefined, true, 'a'], false, {\n                    message: '\"[1]\" must not be a sparse array item. \"[2]\" contains an excluded value. \"[3]\" does not match any of the allowed types',\n                    details: [{\n                        message: '\"[1]\" must not be a sparse array item',\n                        path: [1],\n                        type: 'array.sparse',\n                        context: {\n                            key: 1,\n                            label: '[1]',\n                            path: [1],\n                            pos: 1,\n                            value: undefined\n                        }\n                    },\n                    {\n                        message: '\"[2]\" contains an excluded value',\n                        path: [2],\n                        type: 'array.excludes',\n                        context: {\n                            pos: 2,\n                            key: 2,\n                            label: '[2]',\n                            value: true\n                        }\n                    },\n                    {\n                        message: '\"[3]\" does not match any of the allowed types',\n                        path: [3],\n                        type: 'array.includes',\n                        context: {\n                            pos: 3,\n                            key: 3,\n                            label: '[3]',\n                            value: 'a'\n                        }\n                    }]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"returns multiple errors if abort early is false across items() and unique()","suites":["array","validate()"],"updatePoint":{"line":2757,"column":87},"line":2757,"code":"        it('returns multiple errors if abort early is false across items() and unique()', () => {\n\n            const item = Joi.object({\n                test: Joi.string(),\n                hello: Joi.string().required()\n            });\n\n            const schema = Joi.array().items(item).unique('test');\n\n            Helper.validate(schema, { abortEarly: false }, [\n                [[{ test: 'test', hello: 'world' }, { test: 'test' }], false, {\n                    message: '\"[1].hello\" is required. \"[1]\" contains a duplicate value',\n                    details: [\n                        {\n                            context: {\n                                key: 'hello',\n                                label: '[1].hello'\n                            },\n                            message: '\"[1].hello\" is required',\n                            path: [1, 'hello'],\n                            type: 'any.required'\n                        },\n                        {\n                            context: {\n                                dupePos: 0,\n                                dupeValue: {\n                                    hello: 'world',\n                                    test: 'test'\n                                },\n                                key: 1,\n                                label: '[1]',\n                                path: 'test',\n                                pos: 1,\n                                value: {\n                                    test: 'test'\n                                }\n                            },\n                            message: '\"[1]\" contains a duplicate value',\n                            path: [1],\n                            type: 'array.unique'\n                        }\n                    ]\n                }]\n            ]);\n        });","file":"types/array.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["binary"],"updatePoint":{"line":19,"column":59},"line":19,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.binary('invalid argument.')).to.throw('The binary type does not allow arguments');\n    });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"converts a string to a buffer","suites":["binary"],"updatePoint":{"line":24,"column":37},"line":24,"code":"    it('converts a string to a buffer', () => {\n\n        const value = Joi.binary().validate('test').value;\n        expect(value instanceof Buffer).to.equal(true);\n        expect(value.length).to.equal(4);\n        expect(value.toString('utf8')).to.equal('test');\n    });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"validates allowed buffer content","suites":["binary"],"updatePoint":{"line":32,"column":40},"line":32,"code":"    it('validates allowed buffer content', () => {\n\n        const hello = Buffer.from('hello');\n        const schema = Joi.binary().valid(hello);\n\n        Helper.validate(schema, [\n            ['hello', true, Buffer.from('hello')],\n            [hello, true],\n            [Buffer.from('hello'), true],\n            ['goodbye', false, {\n                message: '\"value\" must be [hello]',\n                path: [],\n                type: 'any.only',\n                context: { value: Buffer.from('goodbye'), valids: [hello], label: 'value' }\n            }],\n            [Buffer.from('goodbye'), false, {\n                message: '\"value\" must be [hello]',\n                path: [],\n                type: 'any.only',\n                context: { value: Buffer.from('goodbye'), valids: [hello], label: 'value' }\n            }],\n            [Buffer.from('HELLO'), false, {\n                message: '\"value\" must be [hello]',\n                path: [],\n                type: 'any.only',\n                context: { value: Buffer.from('HELLO'), valids: [hello], label: 'value' }\n            }]\n        ]);\n    });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"casts value to string","suites":["binary","cast()"],"updatePoint":{"line":64,"column":33},"line":64,"code":"        it('casts value to string', () => {\n\n            const schema = Joi.binary().cast('string');\n\n            Helper.validate(schema, [\n                [Buffer.from('test'), true, 'test']\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"casts value to string (in object)","suites":["binary","cast()"],"updatePoint":{"line":73,"column":45},"line":73,"code":"        it('casts value to string (in object)', () => {\n\n            const schema = Joi.object({\n                a: Joi.binary().cast('string')\n            });\n\n            Helper.validate(schema, [\n                [{ a: Buffer.from('test') }, true, { a: 'test' }],\n                [{}, true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"ignores null","suites":["binary","cast()"],"updatePoint":{"line":85,"column":24},"line":85,"code":"        it('ignores null', () => {\n\n            const schema = Joi.binary().allow(null).cast('string');\n\n            Helper.validate(schema, [\n                [null, true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"ignores string","suites":["binary","cast()"],"updatePoint":{"line":94,"column":26},"line":94,"code":"        it('ignores string', () => {\n\n            const schema = Joi.binary().allow('x').cast('string');\n\n            Helper.validate(schema, [\n                ['x', true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"does not leak casts to any","suites":["binary","cast()"],"updatePoint":{"line":103,"column":38},"line":103,"code":"        it('does not leak casts to any', () => {\n\n            expect(() => Joi.any().cast('string')).to.throw('Type any does not support casting to string');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"returns an error when a non-buffer or non-string is used","suites":["binary","validate()"],"updatePoint":{"line":111,"column":68},"line":111,"code":"        it('returns an error when a non-buffer or non-string is used', () => {\n\n            Helper.validate(Joi.binary(), [\n                [5, false, {\n                    message: '\"value\" must be a buffer or a string',\n                    path: [],\n                    type: 'binary.base',\n                    context: { label: 'value', value: 5 }\n                }]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"accepts a buffer object","suites":["binary","validate()"],"updatePoint":{"line":123,"column":35},"line":123,"code":"        it('accepts a buffer object', () => {\n\n            Helper.validate(Joi.binary(), [\n                [Buffer.from('hello world'), true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"accepts a buffer object in strict mode","suites":["binary","validate()"],"updatePoint":{"line":130,"column":50},"line":130,"code":"        it('accepts a buffer object in strict mode', () => {\n\n            Helper.validate(Joi.binary().strict(), [\n                [Buffer.from('hello world'), true],\n                ['hello world', false, '\"value\" must be a buffer or a string']\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"applies encoding","suites":["binary","encoding()"],"updatePoint":{"line":141,"column":28},"line":141,"code":"        it('applies encoding', () => {\n\n            const schema = Joi.binary().encoding('base64');\n\n            Helper.validate(schema, [\n                [Buffer.from('abcdef'), true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when encoding is invalid","suites":["binary","encoding()"],"updatePoint":{"line":150,"column":43},"line":150,"code":"        it('throws when encoding is invalid', () => {\n\n            expect(() => Joi.binary().encoding('base6')).to.throw('Invalid encoding: base6');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["binary","encoding()"],"updatePoint":{"line":155,"column":56},"line":155,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.binary().encoding('base64');\n            expect(schema.encoding('base64')).to.shallow.equal(schema);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"validates buffer size","suites":["binary","min()"],"updatePoint":{"line":164,"column":33},"line":164,"code":"        it('validates buffer size', () => {\n\n            const schema = Joi.binary().min(5);\n\n            Helper.validate(schema, [\n                [Buffer.from('testing'), true],\n                [Buffer.from('test'), false, {\n                    message: '\"value\" must be at least 5 bytes',\n                    path: [],\n                    type: 'binary.min',\n                    context: { limit: 5, value: Buffer.from('test'), label: 'value' }\n                }]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when min is not a number","suites":["binary","min()"],"updatePoint":{"line":179,"column":43},"line":179,"code":"        it('throws when min is not a number', () => {\n\n            expect(() => Joi.binary().min('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when min is not an integer","suites":["binary","min()"],"updatePoint":{"line":184,"column":45},"line":184,"code":"        it('throws when min is not an integer', () => {\n\n            expect(() => Joi.binary().min(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"validates buffer size","suites":["binary","max()"],"updatePoint":{"line":192,"column":33},"line":192,"code":"        it('validates buffer size', () => {\n\n            const schema = Joi.binary().max(5);\n\n            Helper.validate(schema, [\n                [Buffer.from('testing'), false, {\n                    message: '\"value\" must be less than or equal to 5 bytes',\n                    path: [],\n                    type: 'binary.max',\n                    context: {\n                        limit: 5,\n                        value: Buffer.from('testing'),\n                        label: 'value'\n                    }\n                }],\n                [Buffer.from('test'), true]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when max is not a number","suites":["binary","max()"],"updatePoint":{"line":211,"column":43},"line":211,"code":"        it('throws when max is not a number', () => {\n\n            expect(() => Joi.binary().max('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when max is not an integer","suites":["binary","max()"],"updatePoint":{"line":216,"column":45},"line":216,"code":"        it('throws when max is not an integer', () => {\n\n            expect(() => Joi.binary().max(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"validates buffer size","suites":["binary","length()"],"updatePoint":{"line":224,"column":33},"line":224,"code":"        it('validates buffer size', () => {\n\n            const schema = Joi.binary().length(4);\n\n            Helper.validate(schema, [\n                [Buffer.from('test'), true],\n                [Buffer.from('testing'), false, {\n                    message: '\"value\" must be 4 bytes',\n                    path: [],\n                    type: 'binary.length',\n                    context: {\n                        limit: 4,\n                        value: Buffer.from('testing'),\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when length is not a number","suites":["binary","length()"],"updatePoint":{"line":243,"column":46},"line":243,"code":"        it('throws when length is not a number', () => {\n\n            expect(() => Joi.binary().length('a')).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"throws when length is not an integer","suites":["binary","length()"],"updatePoint":{"line":248,"column":48},"line":248,"code":"        it('throws when length is not an integer', () => {\n\n            expect(() => Joi.binary().length(1.2)).to.throw('limit must be a positive integer or reference');\n        });","file":"types/binary.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["boolean"],"updatePoint":{"line":19,"column":59},"line":19,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.boolean('invalid argument.')).to.throw('The boolean type does not allow arguments');\n    });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"converts boolean string to a boolean","suites":["boolean"],"updatePoint":{"line":24,"column":44},"line":24,"code":"    it('converts boolean string to a boolean', () => {\n\n        Helper.validate(Joi.boolean(), [\n            ['true', true, true],\n            ['false', true, false],\n            ['TrUe', true, true],\n            ['FalSe', true, false]\n        ]);\n    });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"does not convert boolean string to a boolean in strict mode","suites":["boolean"],"updatePoint":{"line":34,"column":67},"line":34,"code":"    it('does not convert boolean string to a boolean in strict mode', () => {\n\n        Helper.validate(Joi.boolean().strict(), [\n            ['true', false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 'true' }\n            }],\n            ['false', false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 'false' }\n            }],\n            ['TrUe', false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 'TrUe' }\n            }],\n            ['FalSe', false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 'FalSe' }\n            }]\n        ]);\n    });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"errors on a number","suites":["boolean"],"updatePoint":{"line":64,"column":26},"line":64,"code":"    it('errors on a number', () => {\n\n        Helper.validate(Joi.boolean(), [\n            [1, false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 1 }\n            }],\n            [0, false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 0 }\n            }],\n            [2, false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 2 }\n            }]\n        ]);\n    });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"respects case for allow","suites":["boolean"],"updatePoint":{"line":88,"column":31},"line":88,"code":"    it('respects case for allow', () => {\n\n        const schema = Joi.boolean().allow('X');\n        Helper.validate(schema, [\n            ['X', true],\n            ['x', false, '\"value\" must be a boolean']\n        ]);\n    });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"casts value to number","suites":["boolean","cast()"],"updatePoint":{"line":99,"column":33},"line":99,"code":"        it('casts value to number', () => {\n\n            const schema = Joi.boolean().cast('number');\n            Helper.validate(schema, [\n                [true, true, 1],\n                [false, true, 0]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"casts value to string","suites":["boolean","cast()"],"updatePoint":{"line":108,"column":33},"line":108,"code":"        it('casts value to string', () => {\n\n            const schema = Joi.boolean().cast('string');\n            Helper.validate(schema, [\n                [true, true, 'true'],\n                [false, true, 'false']\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"ignores null","suites":["boolean","cast()"],"updatePoint":{"line":117,"column":24},"line":117,"code":"        it('ignores null', () => {\n\n            const schema = Joi.boolean().allow(null).cast('string');\n            Helper.validate(schema, [[null, true, null]]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"ignores string","suites":["boolean","cast()"],"updatePoint":{"line":123,"column":26},"line":123,"code":"        it('ignores string', () => {\n\n            const schema = Joi.boolean().allow('x').cast('string');\n            Helper.validate(schema, [['x', true, 'x']]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with additional falsy value","suites":["boolean","falsy()"],"updatePoint":{"line":132,"column":45},"line":132,"code":"        it('works with additional falsy value', () => {\n\n            const rule = Joi.boolean().falsy('N');\n            Helper.validate(rule, [\n                ['N', true, false],\n                ['Y', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'Y' }\n                }],\n                [true, true],\n                [false, true],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with additional falsy arguments","suites":["boolean","falsy()"],"updatePoint":{"line":154,"column":49},"line":154,"code":"        it('works with additional falsy arguments', () => {\n\n            const rule = Joi.boolean().falsy('N', 'Never');\n            Helper.validate(rule, [\n                ['N', true, false],\n                ['Never', true, false],\n                ['Y', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'Y' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }],\n                [true, true],\n                [false, true]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with additional falsy statements","suites":["boolean","falsy()"],"updatePoint":{"line":177,"column":50},"line":177,"code":"        it('works with additional falsy statements', () => {\n\n            const rule = Joi.boolean().falsy('N').falsy('Never');\n            Helper.validate(rule, [\n                ['N', true, false],\n                ['Never', true, false],\n                ['Y', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'Y' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }],\n                [true, true],\n                [false, true]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"errors on falsy without convert","suites":["boolean","falsy()"],"updatePoint":{"line":200,"column":43},"line":200,"code":"        it('errors on falsy without convert', () => {\n\n            const schema = Joi.boolean().falsy('n');\n            expect(schema.validate('n', { convert: false }).error).be.an.error('\"value\" must be a boolean');\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should default to case insensitive","suites":["boolean","sensitive()"],"updatePoint":{"line":209,"column":46},"line":209,"code":"        it('should default to case insensitive', () => {\n\n            const schema = Joi.boolean().truthy('Y');\n            Helper.validate(schema, [['y', true, true]]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should stick to case insensitive if called","suites":["boolean","sensitive()"],"updatePoint":{"line":215,"column":54},"line":215,"code":"        it('should stick to case insensitive if called', () => {\n\n            const schema = Joi.boolean().truthy('Y').sensitive(false);\n            expect(schema.validate('y').error).not.to.exist();\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should be able to do strict comparison","suites":["boolean","sensitive()"],"updatePoint":{"line":221,"column":50},"line":221,"code":"        it('should be able to do strict comparison', () => {\n\n            const schema = Joi.boolean().truthy('Y').sensitive();\n            Helper.validate(schema, [['y', false, {\n                message: '\"value\" must be a boolean',\n                path: [],\n                type: 'boolean.base',\n                context: { label: 'value', value: 'y' }\n            }]]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should return the same instance if nothing changed","suites":["boolean","sensitive()"],"updatePoint":{"line":232,"column":62},"line":232,"code":"        it('should return the same instance if nothing changed', () => {\n\n            const insensitiveSchema = Joi.boolean();\n            expect(insensitiveSchema.sensitive(false)).to.shallow.equal(insensitiveSchema);\n            expect(insensitiveSchema.sensitive()).to.not.shallow.equal(insensitiveSchema);\n\n            const sensitiveSchema = Joi.boolean().sensitive();\n            expect(sensitiveSchema.sensitive()).to.shallow.equal(sensitiveSchema);\n            expect(sensitiveSchema.sensitive(false)).to.not.shallow.equal(sensitiveSchema);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"converts boolean string to a boolean with a sensitive case","suites":["boolean","sensitive()"],"updatePoint":{"line":243,"column":70},"line":243,"code":"        it('converts boolean string to a boolean with a sensitive case', () => {\n\n            Helper.validate(Joi.boolean().sensitive(), [\n                ['true', true, true],\n                ['false', true, false],\n                ['TrUe', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'TrUe' }\n                }],\n                ['FalSe', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'FalSe' }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"does not convert string values and validates","suites":["boolean","validate()"],"updatePoint":{"line":267,"column":56},"line":267,"code":"        it('does not convert string values and validates', () => {\n\n            const rule = Joi.boolean();\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, true],\n                [true, true],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }],\n                ['on', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'on' }\n                }],\n                ['off', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'off' }\n                }],\n                ['yes', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'yes' }\n                }],\n                ['no', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'no' }\n                }],\n                ['1', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1' }\n                }],\n                ['0', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '0' }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with required","suites":["boolean","validate()"],"updatePoint":{"line":324,"column":31},"line":324,"code":"        it('works with required', () => {\n\n            const rule = Joi.boolean().required();\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, true],\n                [true, true],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with allow","suites":["boolean","validate()"],"updatePoint":{"line":345,"column":28},"line":345,"code":"        it('works with allow', () => {\n\n            const rule = Joi.boolean().allow(false);\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, true],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with invalid","suites":["boolean","validate()"],"updatePoint":{"line":365,"column":30},"line":365,"code":"        it('works with invalid', () => {\n\n            const rule = Joi.boolean().invalid(false);\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: false, invalids: [false], label: 'value' }\n                }],\n                [true, true],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with invalid and null allowed","suites":["boolean","validate()"],"updatePoint":{"line":391,"column":47},"line":391,"code":"        it('works with invalid and null allowed', () => {\n\n            const rule = Joi.boolean().invalid(false).allow(null);\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: false, invalids: [false], label: 'value' }\n                }],\n                [true, true],\n                [null, true]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with allow and invalid","suites":["boolean","validate()"],"updatePoint":{"line":412,"column":40},"line":412,"code":"        it('works with allow and invalid', () => {\n\n            const rule = Joi.boolean().invalid(true).allow(false);\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, true],\n                [true, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: true, invalids: [true], label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with allow, invalid, and null allowed","suites":["boolean","validate()"],"updatePoint":{"line":438,"column":55},"line":438,"code":"        it('works with allow, invalid, and null allowed', () => {\n\n            const rule = Joi.boolean().invalid(true).allow(false).allow(null);\n            Helper.validate(rule, [\n                ['1234', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: '1234' }\n                }],\n                [false, true],\n                [true, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: true, invalids: [true], label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with required, null allowed, and both additional truthy and falsy values","suites":["boolean","validate()"],"updatePoint":{"line":459,"column":90},"line":459,"code":"        it('works with required, null allowed, and both additional truthy and falsy values', () => {\n\n            const rule = Joi.boolean().truthy('Y', 'Si', 1).falsy('N', 'Never', 0).allow(null).required();\n            Helper.validate(rule, [\n                ['N', true, false],\n                ['Never', true, false],\n                ['Y', true, true],\n                ['y', true, true],\n                ['Si', true, true],\n                [true, true],\n                [false, true],\n                [1, true, true],\n                [0, true, false],\n                [null, true],\n                ['M', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'M' }\n                }],\n                ['Yes', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'Yes' }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should handle concatenated schema","suites":["boolean","validate()"],"updatePoint":{"line":488,"column":45},"line":488,"code":"        it('should handle concatenated schema', () => {\n\n            const a = Joi.boolean().truthy('yes');\n            const b = Joi.boolean().falsy('no');\n\n            Helper.validate(a, [\n                ['yes', true, true],\n                ['no', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'no' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                ['no', true, false],\n                ['yes', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'yes' }\n                }]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                ['yes', true, true],\n                ['no', true, false]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should describe truthy and falsy values","suites":["boolean","validate()"],"updatePoint":{"line":519,"column":51},"line":519,"code":"        it('should describe truthy and falsy values', () => {\n\n            const schema = Joi.boolean().truthy('yes').falsy('no').required().describe();\n            expect(schema).to.equal({\n                type: 'boolean',\n                flags: {\n                    presence: 'required'\n                },\n                truthy: ['yes'],\n                falsy: ['no']\n            });\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with additional truthy value","suites":["boolean","truthy()"],"updatePoint":{"line":535,"column":46},"line":535,"code":"        it('works with additional truthy value', () => {\n\n            const rule = Joi.boolean().truthy('Y');\n            Helper.validate(rule, [\n                ['Y', true, true],\n                [true, true],\n                [false, true],\n                ['N', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'N' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with additional truthy arguments","suites":["boolean","truthy()"],"updatePoint":{"line":557,"column":50},"line":557,"code":"        it('works with additional truthy arguments', () => {\n\n            const rule = Joi.boolean().truthy('Y', 'Si');\n            Helper.validate(rule, [\n                ['Si', true, true],\n                ['Y', true, true],\n                [true, true],\n                [false, true],\n                ['N', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'N' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"works with multiple truthy arguments","suites":["boolean","truthy()"],"updatePoint":{"line":580,"column":48},"line":580,"code":"        it('works with multiple truthy arguments', () => {\n\n            const rule = Joi.boolean().truthy('Y').truthy('Si');\n            Helper.validate(rule, [\n                ['Si', true, true],\n                ['Y', true, true],\n                [true, true],\n                [false, true],\n                ['N', false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: 'N' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a boolean',\n                    path: [],\n                    type: 'boolean.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"errors on truthy without convert","suites":["boolean","truthy()"],"updatePoint":{"line":603,"column":44},"line":603,"code":"        it('errors on truthy without convert', () => {\n\n            const schema = Joi.boolean().truthy('y');\n            Helper.validate(schema, { convert: false }, [['y', false, '\"value\" must be a boolean']]);\n        });","file":"types/boolean.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["date"],"updatePoint":{"line":41,"column":59},"line":41,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.date('invalid argument.')).to.throw('The date type does not allow arguments');\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"fails on boolean","suites":["date"],"updatePoint":{"line":46,"column":24},"line":46,"code":"    it('fails on boolean', () => {\n\n        const schema = Joi.date();\n        Helper.validate(schema, [\n            [true, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: true }\n            }],\n            [false, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: false }\n            }]\n        ]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"fails on non-finite numbers","suites":["date"],"updatePoint":{"line":65,"column":35},"line":65,"code":"    it('fails on non-finite numbers', () => {\n\n        const schema = Joi.date();\n        Helper.validate(schema, [\n            [Infinity, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: Infinity }\n            }],\n            [-Infinity, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: -Infinity }\n            }],\n            [NaN, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: NaN }\n            }]\n        ]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"matches specific date","suites":["date"],"updatePoint":{"line":90,"column":29},"line":90,"code":"    it('matches specific date', () => {\n\n        const now = Date.now();\n        Helper.validate(Joi.date().valid(new Date(now)), [\n            [new Date(now), true],\n            [new Date(now).toISOString(), true, new Date(now)]\n        ]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors on invalid input and convert disabled","suites":["date"],"updatePoint":{"line":99,"column":52},"line":99,"code":"    it('errors on invalid input and convert disabled', () => {\n\n        Helper.validate(Joi.date().prefs({ convert: false }), [['1-1-2013 UTC', false, {\n            message: '\"value\" must be a valid date',\n            path: [],\n            type: 'date.base',\n            context: { label: 'value', value: '1-1-2013 UTC' }\n        }]]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates date","suites":["date"],"updatePoint":{"line":109,"column":22},"line":109,"code":"    it('validates date', () => {\n\n        Helper.validate(Joi.date(), [[new Date(), true]]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates millisecond date as a string","suites":["date"],"updatePoint":{"line":114,"column":46},"line":114,"code":"    it('validates millisecond date as a string', () => {\n\n        const now = new Date();\n        const mili = now.getTime();\n\n        Helper.validate(Joi.date(), [[mili.toString(), true, now]]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates only valid dates","suites":["date"],"updatePoint":{"line":122,"column":34},"line":122,"code":"    it('validates only valid dates', () => {\n\n        const now = new Date();\n        const invalidDate = new Date('not a valid date');\n\n        Helper.validate(Joi.date(), [\n            ['1-1-2013 UTC', true, new Date('1-1-2013 UTC')],\n            [now.getTime(), true, now],\n            [now.getTime().toFixed(4), true, now],\n            ['not a valid date', false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: 'not a valid date' }\n            }],\n            [invalidDate, false, {\n                message: '\"value\" must be a valid date',\n                path: [],\n                type: 'date.base',\n                context: { label: 'value', value: invalidDate }\n            }]\n        ]);\n    });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"casts value to number","suites":["date","cast()"],"updatePoint":{"line":148,"column":33},"line":148,"code":"        it('casts value to number', () => {\n\n            const schema = Joi.date().cast('number');\n            Helper.validate(schema, [[new Date('1974-05-07'), true, 137116800000]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"casts value to string","suites":["date","cast()"],"updatePoint":{"line":154,"column":33},"line":154,"code":"        it('casts value to string', () => {\n\n            const schema = Joi.date().cast('string');\n            Helper.validate(schema, [[new Date('1974-05-07'), true, '1974-05-07T00:00:00.000Z']]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"casts value to string (custom format)","suites":["date","cast()"],"updatePoint":{"line":160,"column":49},"line":160,"code":"        it('casts value to string (custom format)', () => {\n\n            const schema = Joi.date().prefs({ dateFormat: 'date' }).cast('string');\n            Helper.validate(schema, [[new Date('1974-05-07'), true, 'Tue May 07 1974']]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"ignores null","suites":["date","cast()"],"updatePoint":{"line":166,"column":24},"line":166,"code":"        it('ignores null', () => {\n\n            const schema = Joi.date().allow(null).cast('string');\n            Helper.validate(schema, [[null, true, null]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"ignores string","suites":["date","cast()"],"updatePoint":{"line":172,"column":26},"line":172,"code":"        it('ignores string', () => {\n\n            const schema = Joi.date().allow('x').cast('string');\n            Helper.validate(schema, [['x', true, 'x']]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"ignores unknown formats","suites":["date","format()"],"updatePoint":{"line":181,"column":35},"line":181,"code":"        it('ignores unknown formats', () => {\n\n            const custom = Joi.extend({\n                type: 'date',\n                base: Joi.date(),\n                overrides: {\n                    format(format) {\n\n                        if (['iso', 'javascript', 'unix'].includes(format)) {\n                            return this.$_parent('format', format);\n                        }\n\n                        return this.$_setFlag('format', format);\n                    }\n                }\n            });\n\n            const now = Date.now();\n            Helper.validate(custom.date().format('unknown'), [\n                ['x', false, '\"value\" must be in unknown format'],\n                [now, true, new Date(now)]\n            ]);\n\n            Helper.validate(custom.date().format(['unknown']), [\n                ['x', false, '\"value\" must be in [unknown] format']\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"enforces format when value is a string","suites":["date","format()"],"updatePoint":{"line":209,"column":50},"line":209,"code":"        it('enforces format when value is a string', () => {\n\n            const schema = Joi.date().$_setFlag('format', 'MM-DD-YY');\n\n            // Cannot use Helper since format is set to unknown value\n\n            expect(schema.validate(new Date()).error).to.not.exist();\n            expect(schema.validate(Date.now()).error).to.not.exist();\n            expect(schema.validate('1').error).to.be.an.error('\"value\" must be in MM-DD-YY format');\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates greater","suites":["date","greater()"],"updatePoint":{"line":223,"column":29},"line":223,"code":"        it('validates greater', () => {\n\n            const d = new Date('1-1-2000 UTC');\n            const message = `\"value\" must be greater than \"${d.toISOString()}\"`;\n            Helper.validate(Joi.date().greater('1-1-2000 UTC'), [\n                ['1-1-2001 UTC', true, new Date('1-1-2001 UTC')],\n                ['1-1-2000 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: d, label: 'value', value: new Date('1-1-2000 UTC') }\n                }],\n                [0, false, {\n                    message,\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                ['0', false, {\n                    message,\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                ['-1', false, {\n                    message,\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: d, label: 'value', value: new Date(-1) }\n                }],\n                ['1-1-1999 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: d, label: 'value', value: new Date('1-1-1999 UTC') }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts \"now\" as the greater date","suites":["date","greater()"],"updatePoint":{"line":262,"column":45},"line":262,"code":"        it('accepts \"now\" as the greater date', () => {\n\n            const future = new Date(Date.now() + 1000000);\n            expect(Joi.date().greater('now').validate(future)).to.equal({ value: future });\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if .greater(\"now\") is used with a past date","suites":["date","greater()"],"updatePoint":{"line":268,"column":62},"line":268,"code":"        it('errors if .greater(\"now\") is used with a past date', () => {\n\n            const now = Date.now();\n            const past = new Date(now - 1000000);\n\n            Helper.validate(Joi.date().greater('now'), [\n                [past, false, {\n                    message: '\"value\" must be greater than \"now\"',\n                    path: [],\n                    type: 'date.greater',\n                    context: { limit: 'now', label: 'value', value: past }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as greater date","suites":["date","greater()"],"updatePoint":{"line":283,"column":46},"line":283,"code":"        it('accepts references as greater date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.date(), b: Joi.date().greater(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: now, b: now }, false, {\n                    message: '\"b\" must be greater than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }],\n                [{ a: now, b: now + 1e3 }, true, { a: new Date(now), b: new Date(now + 1e3) }],\n                [{ a: now, b: now - 1e3 }, false, {\n                    message: '\"b\" must be greater than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now - 1e3) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as greater date within a when","suites":["date","greater()"],"updatePoint":{"line":306,"column":60},"line":306,"code":"        it('accepts references as greater date within a when', () => {\n\n            const ref = Joi.ref('b');\n            const schema = Joi.object({\n                a: Joi.date().required(),\n                b: Joi.date().required(),\n                c: Joi.number().required().when('a', {\n                    is: Joi.date().greater(ref), // a > b\n                    then: Joi.number().valid(0)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 123, b: 123, c: 0 }, true, { a: new Date(123), b: new Date(123), c: 0 }],\n                [{ a: 123, b: 456, c: 42 }, true, { a: new Date(123), b: new Date(456), c: 42 }],\n                [{ a: 456, b: 123, c: 0 }, true, { a: new Date(456), b: new Date(123), c: 0 }],\n                [{ a: 123, b: 123, c: 42 }, true, { a: new Date(123), b: new Date(123), c: 42 }],\n                [{ a: 456, b: 123, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts context references as greater date","suites":["date","greater()"],"updatePoint":{"line":332,"column":54},"line":332,"code":"        it('accepts context references as greater date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().greater(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: now } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be greater than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }],\n                [{ b: now + 1e3 }, true, { b: new Date(now + 1e3) }],\n                [{ b: now - 1e3 }, false, {\n                    message: '\"b\" must be greater than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now - 1e3) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a date","suites":["date","greater()"],"updatePoint":{"line":355,"column":45},"line":355,"code":"        it('errors if reference is not a date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.date().greater(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: now }, false, {\n                    message: '\"b\" date references \"ref:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }],\n                [{ a: '123', b: now }, true, { a: '123', b: new Date(now) }],\n                [{ a: (now + 1e3).toString(), b: now }, false, {\n                    message: '\"b\" must be greater than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a date","suites":["date","greater()"],"updatePoint":{"line":378,"column":53},"line":378,"code":"        it('errors if context reference is not a date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().greater(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" date references \"ref:global:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: (now + 1e3).toString() } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be greater than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.greater',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["date","iso()"],"updatePoint":{"line":406,"column":56},"line":406,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.date().iso();\n            expect(schema.iso()).to.shallow.equal(schema);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates isoDate","suites":["date","iso()"],"updatePoint":{"line":412,"column":29},"line":412,"code":"        it('validates isoDate', () => {\n\n            Helper.validate(Joi.date().iso(), [\n                ['+002013-06-07T14:21:46.295Z', true, new Date('+002013-06-07T14:21:46.295Z')],\n                ['-002013-06-07T14:21:46.295Z', true, new Date('-002013-06-07T14:21:46.295Z')],\n                ['002013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '002013-06-07T14:21:46.295Z', format: 'iso' }\n                }],\n                ['+2013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '+2013-06-07T14:21:46.295Z', format: 'iso' }\n                }],\n                ['-2013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '-2013-06-07T14:21:46.295Z', format: 'iso' }\n                }],\n                ['2013-06-07T14:21:46.295Z', true, new Date('2013-06-07T14:21:46.295Z')],\n                ['2013-06-07T14:21:46.295Z0', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T14:21:46.295Z0', format: 'iso' }\n                }],\n                ['2013-06-07T14:21:46.295+07:00', true, new Date('2013-06-07T14:21:46.295+07:00')],\n                ['2013-06-07T14:21:46.295+07:000', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T14:21:46.295+07:000', format: 'iso' }\n                }],\n                ['2013-06-07T14:21:46.295-07:00', true, new Date('2013-06-07T14:21:46.295-07:00')],\n                ['2013-06-07T14:21:46Z', true, new Date('2013-06-07T14:21:46Z')],\n                ['2013-06-07T14:21:46Z0', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T14:21:46Z0', format: 'iso' }\n                }],\n                ['2013-06-07T14:21:46+07:00', true, new Date('2013-06-07T14:21:46+07:00')],\n                ['2013-06-07T14:21:46-07:00', true, new Date('2013-06-07T14:21:46-07:00')],\n                ['2013-06-07T14:21Z', true, new Date('2013-06-07T14:21Z')],\n                ['2013-06-07T14:21+07:00', true, new Date('2013-06-07T14:21+07:00')],\n                ['2013-06-07T14:21+07:000', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T14:21+07:000', format: 'iso' }\n                }],\n                ['2013-06-07T14:21-07:00', true, new Date('2013-06-07T14:21-07:00')],\n                ['2013-06-07T14:21Z+7:00', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T14:21Z+7:00', format: 'iso' }\n                }],\n                ['2013-06-07', true, new Date('2013-06-07')],\n                ['2013-06-07T', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '2013-06-07T', format: 'iso' }\n                }],\n                ['2013-06-07T14:21', true, new Date('2013-06-07T14:21')],\n                ['1-1-2013', false, {\n                    message: '\"value\" must be in ISO 8601 date format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '1-1-2013', format: 'iso' }\n                }],\n                ['2013', true, new Date('2013')]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"converts expanded isoDates","suites":["date","iso()"],"updatePoint":{"line":492,"column":38},"line":492,"code":"        it('converts expanded isoDates', () => {\n\n            const schema = { item: Joi.date().iso() };\n            expect(Joi.compile(schema).validate({ item: '-002013-06-07T14:21:46.295Z' })).to.equal({ value: { item: new Date('-002013-06-07T14:21:46.295Z') } });\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates isoDate with a friendly error message","suites":["date","iso()"],"updatePoint":{"line":498,"column":59},"line":498,"code":"        it('validates isoDate with a friendly error message', () => {\n\n            const schema = { item: Joi.date().iso() };\n            Helper.validate(Joi.compile(schema), [\n                [{ item: 'something' }, false, {\n                    message: '\"item\" must be in ISO 8601 date format',\n                    path: ['item'],\n                    type: 'date.format',\n                    context: { label: 'item', key: 'item', value: 'something', format: 'iso' }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates isoDate after clone","suites":["date","iso()"],"updatePoint":{"line":511,"column":41},"line":511,"code":"        it('validates isoDate after clone', () => {\n\n            const schema = { item: Joi.date().iso().clone() };\n            Helper.validate(Joi.compile(schema), [[{ item: '2013-06-07T14:21:46.295Z' }, true, { item: new Date('2013-06-07T14:21:46.295Z') }]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates less","suites":["date","less()"],"updatePoint":{"line":520,"column":26},"line":520,"code":"        it('validates less', () => {\n\n            const d = new Date('1-1-1970 UTC');\n            const message = `\"value\" must be less than \"${d}\"`;\n            Helper.validate(Joi.date().less('1-1-1970 UTC').prefs({ dateFormat: 'string' }), [\n                ['1-1-1971 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date('1-1-1971 UTC') }\n                }],\n                ['1-1-1970 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date('1-1-1970 UTC') }\n                }],\n                [0, false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                [1, false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date(1) }\n                }],\n                ['0', false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                ['-1', true, new Date(-1)],\n                ['1-1-2014 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.less',\n                    context: { limit: d, label: 'value', value: new Date('1-1-2014 UTC') }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts \"now\" as the less date","suites":["date","less()"],"updatePoint":{"line":565,"column":42},"line":565,"code":"        it('accepts \"now\" as the less date', () => {\n\n            const past = new Date(Date.now() - 1000000);\n            Helper.validate(Joi.date().less('now'), [[past, true, past]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if .less(\"now\") is used with a future date","suites":["date","less()"],"updatePoint":{"line":571,"column":61},"line":571,"code":"        it('errors if .less(\"now\") is used with a future date', () => {\n\n            const now = Date.now();\n            const future = new Date(now + 1000000);\n\n            Helper.validate(Joi.date().less('now'), [[future, false, {\n                message: '\"value\" must be less than \"now\"',\n                path: [],\n                type: 'date.less',\n                context: { limit: 'now', label: 'value', value: future }\n            }]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as less date","suites":["date","less()"],"updatePoint":{"line":584,"column":43},"line":584,"code":"        it('accepts references as less date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.date(), b: Joi.date().less(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: now, b: now }, false, {\n                    message: '\"b\" must be less than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }],\n                [{ a: now, b: now + 1e3 }, false, {\n                    message: '\"b\" must be less than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now + 1e3) }\n                }],\n                [{ a: now, b: now - 1e3 }, true, { a: new Date(now), b: new Date(now - 1e3) }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as less date","suites":["date","less()"],"updatePoint":{"line":607,"column":43},"line":607,"code":"        it('accepts references as less date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().less(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: now } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be less than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }],\n                [{ b: now + 1e3 }, false, {\n                    message: '\"b\" must be less than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now + 1e3) }\n                }],\n                [{ b: now - 1e3 }, true, { b: new Date(now - 1e3) }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a date","suites":["date","less()"],"updatePoint":{"line":630,"column":45},"line":630,"code":"        it('errors if reference is not a date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.date().less(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: new Date() }, false, {\n                    message: '\"b\" date references \"ref:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }],\n                [{ a: '100000000000000', b: now }, true, { a: '100000000000000', b: new Date(now) }],\n                [{ a: (now - 1e3).toString(), b: now }, false, {\n                    message: '\"b\" must be less than \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a date","suites":["date","less()"],"updatePoint":{"line":653,"column":53},"line":653,"code":"        it('errors if context reference is not a date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().less(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" date references \"ref:global:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: '100000000000000' } }, [\n                [{ b: now }, true, { b: new Date(now) }]\n            ]);\n\n            Helper.validate(schema, { context: { a: (now - 1e3).toString() } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be less than \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.less',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates max","suites":["date","max()"],"updatePoint":{"line":685,"column":25},"line":685,"code":"        it('validates max', () => {\n\n            const d = new Date('1-1-1970 UTC');\n            const message = `\"value\" must be less than or equal to \"${d.toISOString()}\"`;\n            Helper.validate(Joi.date().max('1-1-1970 UTC'), [\n                ['1-1-1971 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.max',\n                    context: { limit: d, label: 'value', value: new Date('1-1-1971 UTC') }\n                }],\n                ['1-1-1970 UTC', true, new Date('1-1-1970 UTC')],\n                [0, true, new Date(0)],\n                [1, false, {\n                    message,\n                    path: [],\n                    type: 'date.max',\n                    context: { limit: d, label: 'value', value: new Date(1) }\n                }],\n                ['0', true, new Date(0)],\n                ['-1', true, new Date(-1)],\n                ['1-1-2014 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.max',\n                    context: { limit: d, label: 'value', value: new Date('1-1-2014 UTC') }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts \"now\" as the max date","suites":["date","max()"],"updatePoint":{"line":715,"column":41},"line":715,"code":"        it('accepts \"now\" as the max date', () => {\n\n            const past = new Date(Date.now() - 1000000);\n            Helper.validate(Joi.date().max('now'), [[past, true, past]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if .max(\"now\") is used with a future date","suites":["date","max()"],"updatePoint":{"line":721,"column":60},"line":721,"code":"        it('errors if .max(\"now\") is used with a future date', () => {\n\n            const now = Date.now();\n            const future = new Date(now + 1000000);\n\n            Helper.validate(Joi.date().max('now'), [[future, false, {\n                message: '\"value\" must be less than or equal to \"now\"',\n                path: [],\n                type: 'date.max',\n                context: { limit: 'now', label: 'value', value: future }\n            }]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as max date","suites":["date","max()"],"updatePoint":{"line":734,"column":42},"line":734,"code":"        it('accepts references as max date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.date(), b: Joi.date().max(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: now, b: now }, true, { a: new Date(now), b: new Date(now) }],\n                [{ a: now, b: now + 1e3 }, false, {\n                    message: '\"b\" must be less than or equal to \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.max',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now + 1e3) }\n                }],\n                [{ a: now, b: now - 1e3 }, true, { a: new Date(now), b: new Date(now - 1e3) }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts context references as max date","suites":["date","max()"],"updatePoint":{"line":752,"column":50},"line":752,"code":"        it('accepts context references as max date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().max(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: now } }, [\n                [{ b: now }, true, { b: new Date(now) }],\n                [{ b: now + 1e3 }, false, {\n                    message: '\"b\" must be less than or equal to \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.max',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now + 1e3) }\n                }],\n                [{ b: now - 1e3 }, true, { b: new Date(now - 1000) }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"supports template operations","suites":["date","max()"],"updatePoint":{"line":770,"column":40},"line":770,"code":"        it('supports template operations', () => {\n\n            const ref = Joi.x('{number(from) + 364 * day}');\n            const schema = Joi.object({\n                annual: Joi.boolean().required(),\n                from: Joi.date().required(),\n                to: Joi.date().required()\n                    .when('annual', { is: true, then: Joi.date().max(ref) })\n            });\n\n            Helper.validate(schema, [\n                [{ annual: false, from: '2000-01-01', to: '2010-01-01' }, true, { annual: false, from: new Date('2000-01-01'), to: new Date('2010-01-01') }],\n                [{ annual: true, from: '2000-01-01', to: '2000-12-30' }, true, { annual: true, from: new Date('2000-01-01'), to: new Date('2000-12-30') }],\n                [{ annual: true, from: '2000-01-01', to: '2010-01-01' }, false, {\n                    message: '\"to\" must be less than or equal to \"{number(from) + 364 * day}\"',\n                    path: ['to'],\n                    type: 'date.max',\n                    context: { limit: ref, label: 'to', key: 'to', value: new Date('2010-01-01') }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a date","suites":["date","max()"],"updatePoint":{"line":792,"column":45},"line":792,"code":"        it('errors if reference is not a date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.date().max(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: new Date() }, false, {\n                    message: '\"b\" date references \"ref:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }],\n                [{ a: '100000000000000', b: now }, true, { a: '100000000000000', b: new Date(now) }],\n                [{ a: (now - 1e3).toString(), b: now }, false, {\n                    message: '\"b\" must be less than or equal to \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.max',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a date","suites":["date","max()"],"updatePoint":{"line":815,"column":53},"line":815,"code":"        it('errors if context reference is not a date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().max(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" date references \"ref:global:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: '100000000000000' } }, [\n                [{ b: now }, true, { b: new Date(now) }]\n            ]);\n\n            Helper.validate(schema, { context: { a: (now - 1e3).toString() } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be less than or equal to \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.max',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates min","suites":["date","min()"],"updatePoint":{"line":847,"column":25},"line":847,"code":"        it('validates min', () => {\n\n            const d = new Date('1-1-2000 UTC');\n            const message = `\"value\" must be greater than or equal to \"${d.toISOString()}\"`;\n            Helper.validate(Joi.date().min('1-1-2000 UTC'), [\n                ['1-1-2001 UTC', true, new Date('1-1-2001 UTC')],\n                ['1-1-2000 UTC', true, d],\n                [0, false, {\n                    message,\n                    path: [],\n                    type: 'date.min',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                ['0', false, {\n                    message,\n                    path: [],\n                    type: 'date.min',\n                    context: { limit: d, label: 'value', value: new Date(0) }\n                }],\n                ['-1', false, {\n                    message,\n                    path: [],\n                    type: 'date.min',\n                    context: { limit: d, label: 'value', value: new Date(-1) }\n                }],\n                ['1-1-1999 UTC', false, {\n                    message,\n                    path: [],\n                    type: 'date.min',\n                    context: { limit: d, label: 'value', value: new Date('1-1-1999 UTC') }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts \"now\" as the min date","suites":["date","min()"],"updatePoint":{"line":881,"column":41},"line":881,"code":"        it('accepts \"now\" as the min date', () => {\n\n            const future = new Date(Date.now() + 1000000);\n            expect(Joi.date().min('now').validate(future)).to.equal({ value: future });\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if .min(\"now\") is used with a past date","suites":["date","min()"],"updatePoint":{"line":887,"column":58},"line":887,"code":"        it('errors if .min(\"now\") is used with a past date', () => {\n\n            const now = Date.now();\n            const past = new Date(now - 1000000);\n\n            Helper.validate(Joi.date().min('now'), [[past, false, {\n                message: '\"value\" must be greater than or equal to \"now\"',\n                path: [],\n                type: 'date.min',\n                context: { limit: 'now', label: 'value', value: past }\n            }]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as min date","suites":["date","min()"],"updatePoint":{"line":900,"column":42},"line":900,"code":"        it('accepts references as min date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.date(), b: Joi.date().min(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: now, b: now }, true, { a: new Date(now), b: new Date(now) }],\n                [{ a: now, b: now + 1e3 }, true, { a: new Date(now), b: new Date(now + 1000) }],\n                [{ a: now, b: now - 1e3 }, false, {\n                    message: '\"b\" must be greater than or equal to \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.min',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now - 1e3) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts references as min date within a when","suites":["date","min()"],"updatePoint":{"line":918,"column":56},"line":918,"code":"        it('accepts references as min date within a when', () => {\n\n            const ref = Joi.ref('b');\n            const schema = Joi.object({\n                a: Joi.date().required(),\n                b: Joi.date().required(),\n                c: Joi.number().required().when('a', {\n                    is: Joi.date().min(ref), // a >= b\n                    then: Joi.number().valid(0)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 123, b: 123, c: 0 }, true, { a: new Date(123), b: new Date(123), c: 0 }],\n                [{ a: 123, b: 456, c: 42 }, true, { a: new Date(123), b: new Date(456), c: 42 }],\n                [{ a: 456, b: 123, c: 0 }, true, { a: new Date(456), b: new Date(123), c: 0 }],\n                [{ a: 123, b: 123, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }],\n                [{ a: 456, b: 123, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"accepts context references as min date","suites":["date","min()"],"updatePoint":{"line":949,"column":50},"line":949,"code":"        it('accepts context references as min date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().min(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: now } }, [\n                [{ b: now }, true, { b: new Date(now) }],\n                [{ b: now + 1e3 }, true, { b: new Date(now + 1000) }],\n                [{ b: now - 1e3 }, false, {\n                    message: '\"b\" must be greater than or equal to \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.min',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now - 1e3) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a date","suites":["date","min()"],"updatePoint":{"line":967,"column":45},"line":967,"code":"        it('errors if reference is not a date', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.date().min(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: now }, false, {\n                    message: '\"b\" date references \"ref:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }],\n                [{ a: '123', b: now }, true, { a: '123', b: new Date(now) }],\n                [{ a: (now + 1e3).toString(), b: now }, false, {\n                    message: '\"b\" must be greater than or equal to \"ref:a\"',\n                    path: ['b'],\n                    type: 'date.min',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a date","suites":["date","min()"],"updatePoint":{"line":990,"column":53},"line":990,"code":"        it('errors if context reference is not a date', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.date().min(ref) });\n            const now = Date.now();\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" date references \"ref:global:a\" which must have a valid date format',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'date', reason: 'must have a valid date format' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: (now + 1e3).toString() } }, [\n                [{ b: now }, false, {\n                    message: '\"b\" must be greater than or equal to \"ref:global:a\"',\n                    path: ['b'],\n                    type: 'date.min',\n                    context: { limit: ref, label: 'b', key: 'b', value: new Date(now) }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["date","timestamp()"],"updatePoint":{"line":1018,"column":56},"line":1018,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.date().timestamp('unix');\n            expect(schema.timestamp('unix')).to.shallow.equal(schema);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"fails on empty strings","suites":["date","timestamp()"],"updatePoint":{"line":1024,"column":34},"line":1024,"code":"        it('fails on empty strings', () => {\n\n            const schema = Joi.date().timestamp();\n            Helper.validate(schema, [\n                ['', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '', format: 'javascript' }\n                }],\n                [' \\t ', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: ' \\t ', format: 'javascript' }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates javascript timestamp","suites":["date","timestamp()"],"updatePoint":{"line":1043,"column":42},"line":1043,"code":"        it('validates javascript timestamp', () => {\n\n            const now = new Date();\n            const milliseconds = now.getTime();\n\n            Helper.validate(Joi.date().timestamp(), [[milliseconds, true, now]]);\n            Helper.validate(Joi.date().timestamp('javascript'), [[milliseconds, true, now]]);\n            Helper.validate(Joi.date().timestamp('unix').timestamp('javascript'), [[milliseconds, true, now]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates unix timestamp","suites":["date","timestamp()"],"updatePoint":{"line":1053,"column":36},"line":1053,"code":"        it('validates unix timestamp', () => {\n\n            const now = new Date();\n            const seconds = now.getTime() / 1000;\n\n            Helper.validate(Joi.date().timestamp('unix'), [[seconds, true, now]]);\n            Helper.validate(Joi.date().timestamp().timestamp('unix'), [[seconds, true, now]]);\n            Helper.validate(Joi.date().timestamp('javascript').timestamp('unix'), [[seconds, true, now]]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates timestamps with decimals","suites":["date","timestamp()"],"updatePoint":{"line":1063,"column":46},"line":1063,"code":"        it('validates timestamps with decimals', () => {\n\n            const now = new Date();\n\n            Helper.validate(Joi.date().timestamp(), [\n                [now.getTime().toFixed(4), true, now]\n            ]);\n\n            Helper.validate(Joi.date().timestamp('javascript'), [\n                [now.getTime().toFixed(4), true, now]\n            ]);\n\n            Helper.validate(Joi.date().timestamp('unix'), [\n                [(now.getTime() / 1000).toFixed(4), true, now]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"validates only valid timestamps and returns a friendly error message","suites":["date","timestamp()"],"updatePoint":{"line":1080,"column":80},"line":1080,"code":"        it('validates only valid timestamps and returns a friendly error message', () => {\n\n            const invalidDate = new Date('not a valid date');\n            const now = new Date();\n\n            Helper.validate(Joi.date().timestamp(), [\n                [now.getTime(), true, now],\n                [now.getTime().toFixed(4), true, now],\n                ['1.452126061677e+12', true, new Date(1.452126061677e+12)],\n                [1.452126061677e+12, true, new Date(1.452126061677e+12)],\n                [1E3, true, new Date(1000)],\n                ['1E3', true, new Date(1000)],\n                [',', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: ',', format: 'javascript' }\n                }],\n                ['123A,0xA', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '123A,0xA', format: 'javascript' }\n                }],\n                ['1-1-2013 UTC', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: '1-1-2013 UTC', format: 'javascript' }\n                }],\n                ['not a valid timestamp', false, {\n                    message: '\"value\" must be in timestamp or number of milliseconds format',\n                    path: [],\n                    type: 'date.format',\n                    context: { label: 'value', value: 'not a valid timestamp', format: 'javascript' }\n                }],\n                [invalidDate, false, {\n                    message: '\"value\" must be a valid date',\n                    path: [],\n                    type: 'date.base',\n                    context: { label: 'value', value: invalidDate }\n                }]\n            ]);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"fails with not allowed type","suites":["date","timestamp()"],"updatePoint":{"line":1125,"column":39},"line":1125,"code":"        it('fails with not allowed type', () => {\n\n            expect(() => {\n\n                Joi.date().timestamp('not allowed');\n            }).to.throw(Error, /\"type\" must be one of/);\n        });","file":"types/date.js","skipped":false,"dir":"test"},{"name":"throws an exception if arguments were passed.","suites":["function"],"updatePoint":{"line":19,"column":53},"line":19,"code":"    it('throws an exception if arguments were passed.', () => {\n\n        expect(() => Joi.function('invalid argument.')).to.throw('The function type does not allow arguments');\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function","suites":["function"],"updatePoint":{"line":24,"column":28},"line":24,"code":"    it('validates a function', () => {\n\n        Helper.validate(Joi.function().required(), [\n            [function () { }, true],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"supports func() alias","suites":["function"],"updatePoint":{"line":37,"column":29},"line":37,"code":"    it('supports func() alias', () => {\n\n        Helper.validate(Joi.func().required(), [\n            [function () { }, true],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function arity","suites":["function"],"updatePoint":{"line":50,"column":34},"line":50,"code":"    it('validates a function arity', () => {\n\n        const schema = Joi.function().arity(2).required();\n        Helper.validate(schema, [\n            [function (a, b) { }, true],\n            [(a, b) => { }, true],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }]\n        ]);\n\n        const f1 = function (a, b, c) {};\n        const f2 = function (a) { };\n        const f3 = (a, b, c) => { };\n        const f4 = (a) => { };\n\n        Helper.validate(schema, [\n            [f1, false, {\n                message: '\"value\" must have an arity of 2',\n                path: [],\n                type: 'function.arity',\n                context: { n: 2, label: 'value', value: f1 }\n            }],\n            [f2, false, {\n                message: '\"value\" must have an arity of 2',\n                path: [],\n                type: 'function.arity',\n                context: { n: 2, label: 'value', value: f2 }\n            }],\n            [f3, false, {\n                message: '\"value\" must have an arity of 2',\n                path: [],\n                type: 'function.arity',\n                context: { n: 2, label: 'value', value: f3 }\n            }], [f4, false, {\n                message: '\"value\" must have an arity of 2',\n                path: [],\n                type: 'function.arity',\n                context: { n: 2, label: 'value', value: f4 }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function arity unless values are illegal","suites":["function"],"updatePoint":{"line":96,"column":60},"line":96,"code":"    it('validates a function arity unless values are illegal', () => {\n\n        const schemaWithStringArity = function () {\n\n            return Joi.function().arity('deux');\n        };\n\n        const schemaWithNegativeArity = function () {\n\n            return Joi.function().arity(-2);\n        };\n\n        expect(schemaWithStringArity).to.throw(Error, 'n must be a positive integer');\n        expect(schemaWithNegativeArity).to.throw(Error, 'n must be a positive integer');\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function min arity","suites":["function"],"updatePoint":{"line":112,"column":38},"line":112,"code":"    it('validates a function min arity', () => {\n\n        const schema = Joi.function().minArity(2).required();\n        const f1 = function (a) { };\n        const f2 = (a) => { };\n\n        Helper.validate(schema, [\n            [function (a, b) { }, true],\n            [function (a, b, c) { }, true],\n            [(a, b) => { }, true],\n            [(a, b, c) => { }, true],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }],\n            [f1, false, {\n                message: '\"value\" must have an arity greater or equal to 2',\n                path: [],\n                type: 'function.minArity',\n                context: { n: 2, label: 'value', value: f1 }\n            }],\n            [f2, false, {\n                message: '\"value\" must have an arity greater or equal to 2',\n                path: [],\n                type: 'function.minArity',\n                context: { n: 2, label: 'value', value: f2 }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function arity unless values are illegal","suites":["function"],"updatePoint":{"line":144,"column":60},"line":144,"code":"    it('validates a function arity unless values are illegal', () => {\n\n        const schemaWithStringMinArity = function () {\n\n            return Joi.function().minArity('deux');\n        };\n\n        const schemaWithNegativeMinArity = function () {\n\n            return Joi.function().minArity(-2);\n        };\n\n        const schemaWithZeroArity = function () {\n\n            return Joi.function().minArity(0);\n        };\n\n        expect(schemaWithStringMinArity).to.throw(Error, 'n must be a strict positive integer');\n        expect(schemaWithNegativeMinArity).to.throw(Error, 'n must be a strict positive integer');\n        expect(schemaWithZeroArity).to.throw(Error, 'n must be a strict positive integer');\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function max arity","suites":["function"],"updatePoint":{"line":166,"column":38},"line":166,"code":"    it('validates a function max arity', () => {\n\n        const schema = Joi.function().maxArity(2).required();\n        const f1 = function (a, b, c) { };\n        const f2 = (a, b, c) => { };\n\n        Helper.validate(schema, [\n            [function (a, b) { }, true],\n            [function (a) { }, true],\n            [(a, b) => { }, true],\n            [(a) => { }, true],\n            [f1, false, {\n                message: '\"value\" must have an arity lesser or equal to 2',\n                path: [],\n                type: 'function.maxArity',\n                context: { n: 2, label: 'value', value: f1 }\n            }],\n            [f2, false, {\n                message: '\"value\" must have an arity lesser or equal to 2',\n                path: [],\n                type: 'function.maxArity',\n                context: { n: 2, label: 'value', value: f2 }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function arity unless values are illegal","suites":["function"],"updatePoint":{"line":198,"column":60},"line":198,"code":"    it('validates a function arity unless values are illegal', () => {\n\n        const schemaWithStringMaxArity = function () {\n\n            return Joi.function().maxArity('deux');\n        };\n\n        const schemaWithNegativeMaxArity = function () {\n\n            return Joi.function().maxArity(-2);\n        };\n\n        expect(schemaWithStringMaxArity).to.throw('n must be a positive integer');\n        expect(schemaWithNegativeMaxArity).to.throw('n must be a positive integer');\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function with keys","suites":["function"],"updatePoint":{"line":214,"column":38},"line":214,"code":"    it('validates a function with keys', () => {\n\n        const a = function () { };\n        a.a = 'abc';\n\n        const b = function () { };\n        b.a = 123;\n\n        Helper.validate(Joi.function().keys({ a: Joi.string().required() }).required(), [\n            [function () { }, false, {\n                message: '\"a\" is required',\n                path: ['a'],\n                type: 'any.required',\n                context: { label: 'a', key: 'a' }\n            }],\n            [a, true, Helper.skip],\n            [b, false, {\n                message: '\"a\" must be a string',\n                path: ['a'],\n                type: 'string.base',\n                context: { value: 123, label: 'a', key: 'a' }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type function',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'function' }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function with keys and function rules","suites":["function"],"updatePoint":{"line":245,"column":57},"line":245,"code":"    it('validates a function with keys and function rules', () => {\n\n        const schema = Joi.function()\n            .keys({ a: Joi.string().required() })\n            .minArity(1)\n            .required();\n\n        const a = function (x) { };\n        a.a = 'abc';\n\n        const b = function (x) { };\n        b.a = 123;\n\n        const c = function () { };\n        c.a = 'abc';\n\n        Helper.validate(schema, [\n            [a, true, Helper.skip],\n            [function (x) { }, false, {\n                message: '\"a\" is required',\n                path: ['a'],\n                type: 'any.required',\n                context: { label: 'a', key: 'a' }\n            }],\n            [b, false, {\n                message: '\"a\" must be a string',\n                path: ['a'],\n                type: 'string.base',\n                context: { value: 123, label: 'a', key: 'a' }\n            }]\n        ]);\n\n        const err = schema.validate(c).error;\n        expect(err).to.be.an.error('\"value\" must have an arity greater or equal to 1');\n        expect(err.details).to.equal([{\n            message: '\"value\" must have an arity greater or equal to 1',\n            path: [],\n            type: 'function.minArity',\n            context: { value: err.details[0].context.value, label: 'value', n: 1 }\n        }]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"validates a function with object rules and function rules","suites":["function"],"updatePoint":{"line":287,"column":65},"line":287,"code":"    it('validates a function with object rules and function rules', () => {\n\n        const schema = Joi.function()\n            .min(1)\n            .minArity(1)\n            .required();\n\n        const a = function (x) { };\n        a.a = 'abc';\n\n        const b = function () { };\n        b.a = 'abc';\n\n        const c = function (x) { };\n\n        Helper.validate(schema, [\n            [a, true],\n            [b, false, {\n                message: '\"value\" must have an arity greater or equal to 1',\n                path: [],\n                type: 'function.minArity',\n                context: { value: b, label: 'value', n: 1 }\n            }],\n            [c, false, {\n                message: '\"value\" must have at least 1 key',\n                path: [],\n                type: 'object.min',\n                context: { value: c, label: 'value', limit: 1 }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"keeps validated value as a function","suites":["function"],"updatePoint":{"line":319,"column":43},"line":319,"code":"    it('keeps validated value as a function', () => {\n\n        const schema = Joi.function().keys({ a: Joi.number() });\n\n        const b = 'abc';\n        const value = function () {\n\n            return b;\n        };\n\n        value.a = '123';\n\n        const validated = schema.validate(value).value;\n        expect(validated).to.be.a.function();\n        expect(validated()).to.equal('abc');\n        expect(validated).to.not.equal(value);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"retains validated value prototype","suites":["function"],"updatePoint":{"line":337,"column":41},"line":337,"code":"    it('retains validated value prototype', () => {\n\n        const schema = Joi.function().keys({ a: Joi.number() });\n\n        const value = function () {\n\n            this.x = 'o';\n        };\n\n        value.prototype.get = function () {\n\n            return this.x;\n        };\n\n        const validated = schema.validate(value).value;\n        expect(validated).to.be.a.function();\n        const p = new validated();\n        expect(p.get()).to.equal('o');\n        expect(validated).to.not.equal(value);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"keeps validated value as a function (no clone)","suites":["function"],"updatePoint":{"line":358,"column":54},"line":358,"code":"    it('keeps validated value as a function (no clone)', () => {\n\n        const schema = Joi.function();\n\n        const b = 'abc';\n        const value = function () {\n\n            return b;\n        };\n\n        value.a = '123';\n\n        const validated = schema.validate(value).value;\n        expect(validated).to.be.a.function();\n        expect(validated()).to.equal('abc');\n        expect(validated).to.equal(value);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"should differentiate between classes and functions","suites":["function().class()"],"updatePoint":{"line":379,"column":58},"line":379,"code":"    it('should differentiate between classes and functions', () => {\n\n        const classSchema = Joi.object({\n            _class: Joi.function().class()\n        });\n\n        const testFunc = function () { };\n        const testClass = class MyClass { };\n\n        Helper.validate(classSchema, [\n            [{ _class: testClass }, true],\n            [{ _class: testFunc }, false, {\n                message: '\"_class\" must be a class',\n                path: ['_class'],\n                type: 'function.class',\n                context: { key: '_class', label: '_class', value: testFunc }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"refuses class look-alikes and bad values","suites":["function().class()"],"updatePoint":{"line":399,"column":48},"line":399,"code":"    it('refuses class look-alikes and bad values', () => {\n\n        const classSchema = Joi.object({\n            _class: Joi.function().class()\n        });\n\n        Helper.validate(classSchema, [\n            [{ _class: ['class '] }, false, {\n                message: '\"_class\" must be of type function',\n                path: ['_class'],\n                type: 'object.base',\n                context: { key: '_class', label: '_class', value: ['class '], type: 'function' }\n            }],\n            [{ _class: null }, false, {\n                message: '\"_class\" must be of type function',\n                path: ['_class'],\n                type: 'object.base',\n                context: { key: '_class', label: '_class', value: null, type: 'function' }\n            }]\n        ]);\n    });","file":"types/function.js","skipped":false,"dir":"test"},{"name":"errors on uninitialized link","suites":["link"],"updatePoint":{"line":19,"column":36},"line":19,"code":"    it('errors on uninitialized link', () => {\n\n        expect(() => Joi.link().validate(1)).to.throw('Uninitialized link schema');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links named schema (explicit)","suites":["link"],"updatePoint":{"line":24,"column":37},"line":24,"code":"    it('links named schema (explicit)', () => {\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: Joi.link('#type.a')\n        })\n            .id('type');\n\n        Helper.validate(schema, [\n            [{ a: 1, b: 2 }, true],\n            [{ a: '1', b: '2' }, true],\n            [{ a: [1], b: '2' }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links named schema (by ref)","suites":["link"],"updatePoint":{"line":39,"column":35},"line":39,"code":"    it('links named schema (by ref)', () => {\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: Joi.link().ref('#type.a')\n        })\n            .id('type');\n\n        Helper.validate(schema, [\n            [{ a: 1, b: 2 }, true],\n            [{ a: '1', b: '2' }, true],\n            [{ a: [1], b: '2' }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links named schema (implicit)","suites":["link"],"updatePoint":{"line":54,"column":37},"line":54,"code":"    it('links named schema (implicit)', () => {\n\n        const schema = Joi.object({\n            a: Joi.object({\n                b: Joi.object({\n                    c: Joi.object({\n                        d: Joi.link('#a.e.f')\n                    })\n                }),\n                e: Joi.object({\n                    f: [Joi.string(), Joi.number()]\n                })\n            })\n        });\n\n        Helper.validate(schema, [\n            [{ a: { b: { c: { d: '1' } }, e: { f: '2' } } }, true],\n            [{ a: { b: { c: { d: 1 } }, e: { f: 2 } } }, true],\n            [{ a: { b: { c: { d: {} } }, e: { f: 2 } } }, false, '\"a.b.c.d\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links shared schema","suites":["link"],"updatePoint":{"line":76,"column":27},"line":76,"code":"    it('links shared schema', () => {\n\n        const shared = Joi.number().id('shared');\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.link('#shared')],\n            b: Joi.link('#type.a')\n        })\n            .shared(Joi.any().id('ignore'))\n            .shared(shared)\n            .id('type');\n\n        Helper.validate(schema, [\n            [{ a: 1, b: 2 }, true],\n            [{ a: '1', b: '2' }, true],\n            [{ a: [1], b: '2' }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links schema nodes","suites":["link"],"updatePoint":{"line":95,"column":26},"line":95,"code":"    it('links schema nodes', () => {\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: Joi.link('a')\n        });\n\n        Helper.validate(schema, [\n            [{ a: 1, b: 2 }, true],\n            [{ a: '1', b: '2' }, true],\n            [{ a: [1], b: '2' }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links schema cousin nodes","suites":["link"],"updatePoint":{"line":109,"column":33},"line":109,"code":"    it('links schema cousin nodes', () => {\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: {\n                c: Joi.link('...a')\n            }\n        });\n\n        Helper.validate(schema, [\n            [{ a: 1, b: { c: 2 } }, true],\n            [{ a: '1', b: { c: '2' } }, true],\n            [{ a: [1], b: { c: '2' } }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"links schema cousin nodes (root)","suites":["link"],"updatePoint":{"line":125,"column":40},"line":125,"code":"    it('links schema cousin nodes (root)', () => {\n\n        const schema = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: {\n                c: Joi.link('/a')\n            }\n        });\n\n        Helper.validate(schema, [\n            [{ a: 1, b: { c: 2 } }, true],\n            [{ a: '1', b: { c: '2' } }, true],\n            [{ a: [1], b: { c: '2' } }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"validates a recursive schema","suites":["link"],"updatePoint":{"line":141,"column":36},"line":141,"code":"    it('validates a recursive schema', () => {\n\n        const schema = Joi.object({\n            name: Joi.string().required(),\n            keys: Joi.array()\n                .items(Joi.link('...'))         // .item .array .schema\n        });\n\n        expect(schema.validate({ name: 'foo', keys: [{ name: 'bar' }] }).error).to.not.exist();\n\n        Helper.validate(schema, [\n            [{ name: 'foo' }, true],\n            [{ name: 'foo', keys: [] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar' }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz' }] }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz', keys: [{ name: 'qux' }] }] }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz', keys: [{ name: 42 }] }] }] }, false, {\n                message: '\"keys[0].keys[0].keys[0].name\" must be a string',\n                path: ['keys', 0, 'keys', 0, 'keys', 0, 'name'],\n                type: 'string.base',\n                context: { value: 42, label: 'keys[0].keys[0].keys[0].name', key: 'name' }\n            }]\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"validates a recursive schema (root)","suites":["link"],"updatePoint":{"line":166,"column":43},"line":166,"code":"    it('validates a recursive schema (root)', () => {\n\n        const schema = Joi.object({\n            name: Joi.string().required(),\n            keys: Joi.array()\n                .items(Joi.link('/'))\n        });\n\n        expect(schema.validate({ name: 'foo', keys: [{ name: 'bar' }] }).error).to.not.exist();\n\n        Helper.validate(schema, [\n            [{ name: 'foo' }, true],\n            [{ name: 'foo', keys: [] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar' }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz' }] }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz', keys: [{ name: 'qux' }] }] }] }, true],\n            [{ name: 'foo', keys: [{ name: 'bar', keys: [{ name: 'baz', keys: [{ name: 42 }] }] }] }, false, {\n                message: '\"keys[0].keys[0].keys[0].name\" must be a string',\n                path: ['keys', 0, 'keys', 0, 'keys', 0, 'name'],\n                type: 'string.base',\n                context: { value: 42, label: 'keys[0].keys[0].keys[0].name', key: 'name' }\n            }]\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"caches resolved schema","suites":["link"],"updatePoint":{"line":191,"column":30},"line":191,"code":"    it('caches resolved schema', () => {\n\n        const link = Joi.link('x');\n        const schema = Joi.object({\n            a: {\n                y: link,\n                x: 1\n            },\n            b: {\n                y: link,\n                x: 2\n            }\n        });\n\n        Helper.validate(schema, [\n            [{ a: { y: 1 }, b: { y: 1 } }, true],\n            [{ a: { y: 1 }, b: { y: 2 } }, false, '\"b.y\" must be [1]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"re-resolves schema","suites":["link"],"updatePoint":{"line":211,"column":26},"line":211,"code":"    it('re-resolves schema', () => {\n\n        const link = Joi.link('x').relative();\n        const schema = Joi.object({\n            a: {\n                y: link,\n                x: 1\n            },\n            b: {\n                y: link,\n                x: 2\n            }\n        });\n\n        Helper.validate(schema, [\n            [{ a: { y: 1 }, b: { y: 2 } }, true],\n            [{ a: { y: 1 }, b: { y: 1 } }, false, '\"b.y\" must be [2]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"validates a recursive schema (in alternatives)","suites":["link"],"updatePoint":{"line":231,"column":54},"line":231,"code":"    it('validates a recursive schema (in alternatives)', () => {\n\n        const schema = Joi.object({\n            happy: Joi.boolean().required(),\n            children: Joi.object()\n                .pattern(/.*/, [\n                    'none',\n                    Joi.link('....')        // .alternatives .child .children .schema\n                ])\n        });\n\n        Helper.validate(schema, [\n            [{ happy: true }, true],\n            [{ happy: true, children: { a: 'none' } }, true],\n            [{ happy: true, children: { a: { happy: false } } }, true],\n            [{ happy: true, children: { a: { happy: false }, b: { happy: true }, c: 'none' } }, true],\n            [{ happy: true, children: { a: { happy: false }, b: { happy: true }, c: {} } }, false, {\n                context: { key: 'happy', label: 'children.c.happy' },\n                message: '\"children.c.happy\" is required',\n                path: ['children', 'c', 'happy'],\n                type: 'any.required'\n            }]\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"concats schemas with links","suites":["link"],"updatePoint":{"line":256,"column":34},"line":256,"code":"    it('concats schemas with links', () => {\n\n        const a = Joi.object({\n            a: [Joi.string(), Joi.number()],\n            b: Joi.link('a')\n        });\n\n        const b = Joi.object({ c: Joi.number() });\n\n        const schema = b.concat(a);\n\n        Helper.validate(schema, [\n            [{ a: 1, b: 2, c: 3 }, true],\n            [{ a: '1', b: '2', c: 3 }, true],\n            [{ a: [1], b: '2' }, false, '\"a\" must be one of [string, number]']\n        ]);\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on invalid reference","suites":["link"],"updatePoint":{"line":274,"column":35},"line":274,"code":"    it('errors on invalid reference', () => {\n\n        expect(() => Joi.link('.')).to.throw('Link cannot reference itself');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on invalid reference type","suites":["link"],"updatePoint":{"line":279,"column":40},"line":279,"code":"    it('errors on invalid reference type', () => {\n\n        expect(() => Joi.link('$x')).to.throw('Invalid reference type: global');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on out of boundaries reference","suites":["link"],"updatePoint":{"line":284,"column":45},"line":284,"code":"    it('errors on out of boundaries reference', () => {\n\n        const schema = Joi.object({\n            x: Joi.link('...')\n        });\n\n        expect(() => schema.validate({ x: 123 })).to.throw('\"x\" contains link reference \"ref:...\" which is outside of schema boundaries');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on missing reference (relative)","suites":["link"],"updatePoint":{"line":293,"column":46},"line":293,"code":"    it('errors on missing reference (relative)', () => {\n\n        const schema = Joi.object({\n            x: Joi.link('y')\n        });\n\n        expect(() => schema.validate({ x: 123 })).to.throw('\"x\" contains link reference \"ref:y\" to non-existing schema');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on missing reference (named)","suites":["link"],"updatePoint":{"line":302,"column":43},"line":302,"code":"    it('errors on missing reference (named)', () => {\n\n        const schema = Joi.object({\n            x: Joi.link('#y')\n        });\n\n        expect(() => schema.validate({ x: 123 })).to.throw('\"x\" contains link reference \"ref:local:y\" which is outside of schema boundaries');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on referenced link","suites":["link"],"updatePoint":{"line":311,"column":33},"line":311,"code":"    it('errors on referenced link', () => {\n\n        const schema = Joi.object({\n            x: Joi.link('y'),\n            y: Joi.link('z'),\n            z: Joi.any()\n        });\n\n        expect(() => schema.validate({ x: 123 })).to.throw('\"x\" contains link reference \"ref:y\" which is another link');\n    });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"validates a schema with when()","suites":["link","when()"],"updatePoint":{"line":324,"column":42},"line":324,"code":"        it('validates a schema with when()', () => {\n\n            const schema = Joi.object({\n                must: Joi.boolean().required(),\n                child: Joi.link('..')\n                    .when('must', { then: Joi.required() })\n            });\n\n            Helper.validate(schema, [\n                [{ must: false }, true],\n                [{ must: false, child: { must: false } }, true],\n                [{ must: true, child: { must: false } }, true],\n                [{ must: true, child: { must: true, child: { must: false } } }, true]\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"changes the resolved schema","suites":["link","when()"],"updatePoint":{"line":340,"column":39},"line":340,"code":"        it('changes the resolved schema', () => {\n\n            const schema = Joi.object({\n                category: Joi.valid('x', 'y').required(),\n                subs: Joi.array()\n                    .items(Joi.link('#unit').when('...category', { is: 'y', then: Joi.object({ subs: Joi.forbidden() }) }))\n                    .min(1)\n            })\n                .id('unit');\n\n            Helper.validate(schema, [\n                [{ category: 'x', subs: [{ category: 'x' }] }, true],\n                [{ category: 'y', subs: [{ category: 'x' }] }, true],\n                [{ category: 'y', subs: [{ category: 'x', subs: [{ category: 'x' }] }] }, false, {\n                    message: '\"subs[0].subs\" is not allowed',\n                    path: ['subs', 0, 'subs'],\n                    type: 'any.unknown',\n                    context: { label: 'subs[0].subs', value: [{ category: 'x' }], key: 'subs' }\n                }]\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"errors on concat of link to link","suites":["link","concat()"],"updatePoint":{"line":365,"column":44},"line":365,"code":"        it('errors on concat of link to link', () => {\n\n            expect(() => Joi.link('..').concat(Joi.link('..'))).to.throw('Cannot merge type link with another link');\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"combines link with any","suites":["link","concat()"],"updatePoint":{"line":370,"column":34},"line":370,"code":"        it('combines link with any', () => {\n\n            const a = Joi.object({\n                x: Joi.link('..')\n            });\n\n            const b = Joi.object({\n                x: Joi.forbidden()\n            });\n\n            Helper.validate(a, [\n                [{ x: {} }, true]\n            ]);\n\n            Helper.validate(a.concat(b), [\n                [{ x: {} }, false, '\"x\" is not allowed']\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"applies concat after ref resolved","suites":["link","concat()"],"updatePoint":{"line":389,"column":45},"line":389,"code":"        it('applies concat after ref resolved', () => {\n\n            const shared = Joi.object({\n                a: Joi.number()\n            })\n                .id('shared');\n\n            const schema = Joi.object({\n                x: Joi.link('#shared')\n                    .concat(Joi.object({ a: 3 }))\n            })\n                .shared(shared);\n\n            Helper.validate(schema, [\n                [{ x: { a: 3 } }, true],\n                [{ x: { a: 2 } }, false, {\n                    message: '\"x.a\" must be [3]',\n                    path: ['x', 'a'],\n                    type: 'any.only',\n                    context: { label: 'x.a', value: 2, key: 'a', valids: [3] }\n                }]\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"applies concat after ref resolved (with when)","suites":["link","concat()"],"updatePoint":{"line":413,"column":57},"line":413,"code":"        it('applies concat after ref resolved (with when)', () => {\n\n            const shared = Joi.object({\n                a: Joi.number()\n            })\n                .id('shared');\n\n            const schema = Joi.object({\n                w: Joi.boolean(),\n                x: Joi.link('#shared')\n                    .when('w', { then: Joi.object({ a: 4 }) })\n                    .concat(Joi.object({ a: Joi.valid(3) }))\n            })\n                .shared(shared);\n\n            Helper.validate(schema, [\n                [{ x: { a: 3 } }, true],\n                [{ w: true, x: { a: 3 } }, true],\n                [{ w: true, x: { a: 4 } }, true],\n                [{ x: { a: 2 } }, false, {\n                    message: '\"x.a\" must be [3]',\n                    path: ['x', 'a'],\n                    type: 'any.only',\n                    context: { label: 'x.a', value: 2, key: 'a', valids: [3] }\n                }]\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"combines link and linked whens","suites":["link","concat()"],"updatePoint":{"line":441,"column":42},"line":441,"code":"        it('combines link and linked whens', () => {\n\n            const schema = Joi.object({\n                type: Joi.valid('a', 'b').required()\n            })\n                .when('.type', [\n                    {\n                        is: 'a',\n                        then: Joi.object({\n                            x: Joi.boolean()\n                        })\n                    },\n                    {\n                        is: 'b',\n                        then: Joi.object({\n                            y: Joi.link('#root').concat(Joi.object({ type: 'a' }))\n                        })\n                    }\n                ])\n                .id('root');\n\n            Helper.validate(schema, [\n                [{ type: 'b', y: { type: 'a' } }, true],\n                [{ type: 'b', y: { type: 'a', x: true } }, true]\n            ]);\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"describes link","suites":["link","describe()"],"updatePoint":{"line":471,"column":26},"line":471,"code":"        it('describes link', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.link('a')\n            });\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'string'\n                    },\n                    b: {\n                        type: 'link',\n                        link: {\n                            ref: { path: ['a'] }\n                        }\n                    }\n                }\n            });\n        });","file":"types/link.js","skipped":false,"dir":"test"},{"name":"throws an exception if arguments were passed.","suites":["number"],"updatePoint":{"line":19,"column":53},"line":19,"code":"    it('throws an exception if arguments were passed.', () => {\n\n        expect(() => Joi.number('invalid argument.')).to.throw('The number type does not allow arguments');\n    });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"validates 0","suites":["number"],"updatePoint":{"line":24,"column":19},"line":24,"code":"    it('validates 0', () => {\n\n        Helper.validate(Joi.number(), [\n            [0, true, 0],\n            [-0, true, 0],\n            [parseFloat('-0'), true, 0]\n        ]);\n    });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"fails on boolean","suites":["number"],"updatePoint":{"line":33,"column":24},"line":33,"code":"    it('fails on boolean', () => {\n\n        const schema = Joi.number();\n        Helper.validate(schema, [\n            [true, false, {\n                message: '\"value\" must be a number',\n                path: [],\n                type: 'number.base',\n                context: { label: 'value', value: true }\n            }],\n            [false, false, {\n                message: '\"value\" must be a number',\n                path: [],\n                type: 'number.base',\n                context: { label: 'value', value: false }\n            }]\n        ]);\n    });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"instantiates separate copies on invocation","suites":["number"],"updatePoint":{"line":52,"column":50},"line":52,"code":"    it('instantiates separate copies on invocation', () => {\n\n        const result1 = Joi.number().min(5);\n        const result2 = Joi.number().max(5);\n\n        expect(Object.keys(result1)).to.not.shallow.equal(Object.keys(result2));\n    });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"shows resulting object with #valueOf","suites":["number"],"updatePoint":{"line":60,"column":44},"line":60,"code":"    it('shows resulting object with #valueOf', () => {\n\n        const result = Joi.number().min(5);\n        expect(result.valueOf()).to.exist();\n    });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"displays correctly for int type","suites":["number","error message"],"updatePoint":{"line":68,"column":43},"line":68,"code":"        it('displays correctly for int type', () => {\n\n            const t = Joi.number().integer();\n            Helper.validate(Joi.compile(t), [\n                ['1.1', false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { label: 'value', value: 1.1 }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"casts value to string","suites":["number","cast()"],"updatePoint":{"line":84,"column":33},"line":84,"code":"        it('casts value to string', () => {\n\n            const schema = Joi.number().cast('string');\n            Helper.validate(schema, [\n                [0, true, '0'],\n                [0.01, true, '0.01'],\n                [-12, true, '-12']\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"ignores null","suites":["number","cast()"],"updatePoint":{"line":94,"column":24},"line":94,"code":"        it('ignores null', () => {\n\n            const schema = Joi.number().allow(null).cast('string');\n            Helper.validate(schema, [[null, true, null]]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"ignores string","suites":["number","cast()"],"updatePoint":{"line":100,"column":26},"line":100,"code":"        it('ignores string', () => {\n\n            const schema = Joi.number().allow('x').cast('string');\n            Helper.validate(schema, [['x', true, 'x']]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"describes a minimum of 0","suites":["number","describe()"],"updatePoint":{"line":109,"column":36},"line":109,"code":"        it('describes a minimum of 0', () => {\n\n            const schema = Joi.number().min(0);\n            expect(schema.describe()).to.equal({\n                type: 'number',\n                rules: [\n                    {\n                        name: 'min',\n                        args: { limit: 0 }\n                    }\n                ]\n            });\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["number","greater()"],"updatePoint":{"line":126,"column":45},"line":126,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.number().greater('a');\n            }).to.throw('limit must be a number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts references as greater value","suites":["number","greater()"],"updatePoint":{"line":134,"column":47},"line":134,"code":"        it('accepts references as greater value', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number().greater(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 42, b: 1337 }, true],\n                [{ a: 1337, b: 42 }, false, {\n                    message: '\"b\" must be greater than ref:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }],\n                [{ a: '1337', b: 42 }, false, {\n                    message: '\"b\" must be greater than ref:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }],\n                [{ a: 2.4, b: 4.2 }, true],\n                [{ a: 4.2, b: 4.20000001 }, true],\n                [{ a: 4.20000001, b: 4.2 }, false, {\n                    message: '\"b\" must be greater than ref:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.2, b: 2.4 }, false, {\n                    message: '\"b\" must be greater than ref:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 2.4, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts context references as greater value","suites":["number","greater()"],"updatePoint":{"line":170,"column":55},"line":170,"code":"        it('accepts context references as greater value', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().greater(ref) });\n\n            Helper.validate(schema, { context: { a: 42 } }, [\n                [{ b: 1337 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 1337 } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" must be greater than ref:global:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 2.4 } }, [\n                [{ b: 4.2 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 4.20000001 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.20000001 } }, [\n                [{ b: 4.2 }, false, {\n                    message: '\"b\" must be greater than ref:global:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 2.4 }, false, {\n                    message: '\"b\" must be greater than ref:global:a',\n                    path: ['b'],\n                    type: 'number.greater',\n                    context: { limit: ref, value: 2.4, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["number","greater()"],"updatePoint":{"line":215,"column":47},"line":215,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().greater(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["number","greater()"],"updatePoint":{"line":230,"column":55},"line":230,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().greater(ref) });\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["number","less()"],"updatePoint":{"line":248,"column":45},"line":248,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.number().less('a');\n            }).to.throw('limit must be a number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts references as less value","suites":["number","less()"],"updatePoint":{"line":256,"column":44},"line":256,"code":"        it('accepts references as less value', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number().less(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 1337, b: 42 }, true],\n                [{ a: 42, b: 1337 }, false, {\n                    message: '\"b\" must be less than ref:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }],\n                [{ a: '42', b: 1337 }, false, {\n                    message: '\"b\" must be less than ref:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.2, b: 2.4 }, true],\n                [{ a: 4.2, b: 4.20000001 }, false, {\n                    message: '\"b\" must be less than ref:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 4.20000001, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.20000001, b: 4.2 }, true],\n                [{ a: 2.4, b: 4.2 }, false, {\n                    message: '\"b\" must be less than ref:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts context references as less value","suites":["number","less()"],"updatePoint":{"line":292,"column":52},"line":292,"code":"        it('accepts context references as less value', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().less(ref) });\n\n            Helper.validate(schema, { context: { a: 1337 } }, [\n                [{ b: 42 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 42 } }, [\n                [{ b: 1337 }, false, {\n                    message: '\"b\" must be less than ref:global:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 2.4 }, true],\n                [{ b: 4.20000001 }, false, {\n                    message: '\"b\" must be less than ref:global:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 4.20000001, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.20000001 } }, [\n                [{ b: 4.2 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 2.4 } }, [\n                [{ b: 4.2 }, false, {\n                    message: '\"b\" must be less than ref:global:a',\n                    path: ['b'],\n                    type: 'number.less',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["number","less()"],"updatePoint":{"line":334,"column":47},"line":334,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().less(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if reference is null","suites":["number","less()"],"updatePoint":{"line":349,"column":39},"line":349,"code":"        it('errors if reference is null', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.any(), b: Joi.number().less(ref) });\n\n            Helper.validate(schema, [\n                [{ a: null, b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: null, arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["number","less()"],"updatePoint":{"line":364,"column":55},"line":364,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().less(ref) });\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["number","max()"],"updatePoint":{"line":382,"column":45},"line":382,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.number().max('a');\n            }).to.throw('limit must be a number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts references as max value","suites":["number","max()"],"updatePoint":{"line":390,"column":43},"line":390,"code":"        it('accepts references as max value', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number().max(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 1337, b: 42 }, true],\n                [{ a: 42, b: 1337 }, false, {\n                    message: '\"b\" must be less than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }],\n                [{ a: '42', b: 1337 }, false, {\n                    message: '\"b\" must be less than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.2, b: 2.4 }, true],\n                [{ a: 4.2, b: 4.20000001 }, false, {\n                    message: '\"b\" must be less than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 4.20000001, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.20000001, b: 4.2 }, true],\n                [{ a: 2.4, b: 4.2 }, false, {\n                    message: '\"b\" must be less than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts context references as max value","suites":["number","max()"],"updatePoint":{"line":426,"column":51},"line":426,"code":"        it('accepts context references as max value', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().max(ref) });\n\n            Helper.validate(schema, { context: { a: 1337 } }, [\n                [{ b: 42 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 42 } }, [\n                [{ b: 1337 }, false, {\n                    message: '\"b\" must be less than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 1337, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 2.4 }, true],\n                [{ b: 4.20000001 }, false, {\n                    message: '\"b\" must be less than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 4.20000001, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.20000001 } }, [\n                [{ b: 4.2 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 2.4 } }, [\n                [{ b: 4.2 }, false, {\n                    message: '\"b\" must be less than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.max',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["number","max()"],"updatePoint":{"line":468,"column":47},"line":468,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().max(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["number","max()"],"updatePoint":{"line":483,"column":55},"line":483,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().max(ref) });\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["number","min()"],"updatePoint":{"line":501,"column":45},"line":501,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => Joi.number().min('a')).to.throw('limit must be a number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when limit is null","suites":["number","min()"],"updatePoint":{"line":506,"column":37},"line":506,"code":"        it('throws when limit is null', () => {\n\n            expect(() => Joi.number().min(null)).to.throw('limit must be a number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"supports 64bit numbers","suites":["number","min()"],"updatePoint":{"line":511,"column":34},"line":511,"code":"        it('supports 64bit numbers', () => {\n\n            const schema = Joi.number().min(1394035612500);\n            const input = 1394035612552;\n\n            Helper.validate(schema, [[input, true, input]]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts references as min value","suites":["number","min()"],"updatePoint":{"line":519,"column":43},"line":519,"code":"        it('accepts references as min value', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number().min(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 42, b: 1337 }, true],\n                [{ a: 1337, b: 42 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }],\n                [{ a: '1337', b: 42 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }],\n                [{ a: 2.4, b: 4.2 }, true],\n                [{ a: 4.2, b: 4.20000001 }, true],\n                [{ a: 4.20000001, b: 4.2 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }],\n                [{ a: 4.2, b: 2.4 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 2.4, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts references as min value within a when","suites":["number","min()"],"updatePoint":{"line":555,"column":57},"line":555,"code":"        it('accepts references as min value within a when', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number().required(),\n                c: Joi.number().required().when('a', {\n                    is: Joi.number().min(Joi.ref('b')), // a >= b\n                    then: Joi.number().valid(0)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 0, b: 1, c: 42 }, true],\n                [{ a: 1, b: 1, c: 0 }, true],\n                [{ a: 2, b: 1, c: 0 }, true],\n                [{ a: 1, b: 1, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }],\n                [{ a: 2, b: 1, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts context references as min value","suites":["number","min()"],"updatePoint":{"line":585,"column":51},"line":585,"code":"        it('accepts context references as min value', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().min(ref) });\n\n            Helper.validate(schema, { context: { a: 42 } }, [\n                [{ b: 1337 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 1337 } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 42, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 2.4 } }, [\n                [{ b: 4.2 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 4.20000001 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.20000001 } }, [\n                [{ b: 4.2 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 4.2, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4.2 } }, [\n                [{ b: 2.4 }, false, {\n                    message: '\"b\" must be greater than or equal to ref:global:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 2.4, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["number","min()"],"updatePoint":{"line":630,"column":47},"line":630,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().min(ref) });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["number","min()"],"updatePoint":{"line":645,"column":55},"line":645,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().min(ref) });\n\n            Helper.validate(schema, { context: { a: 'abc' } }, [\n                [{ b: 42 }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'abc', arg: 'limit', reason: 'must be a number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when multiple is not a number","suites":["number","multiple()"],"updatePoint":{"line":663,"column":48},"line":663,"code":"        it('throws when multiple is not a number', () => {\n\n            expect(() => {\n\n                Joi.number().multiple('a');\n            }).to.throw('base must be a positive number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"throws when multiple is 0","suites":["number","multiple()"],"updatePoint":{"line":671,"column":37},"line":671,"code":"        it('throws when multiple is 0', () => {\n\n            expect(() => {\n\n                Joi.number().multiple(0);\n            }).to.throw('base must be a positive number or reference');\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles integer multiples correctly","suites":["number","multiple()"],"updatePoint":{"line":679,"column":47},"line":679,"code":"        it('handles integer multiples correctly', () => {\n\n            const rule = Joi.number().multiple(3);\n            Helper.validate(rule, [\n                [0, true], // 0 is a multiple of every integer\n                [3, true],\n                [4, false, {\n                    message: '\"value\" must be a multiple of 3',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3, value: 4, label: 'value' }\n                }],\n                [9, true],\n                ['a', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: 'a' }\n                }],\n                [9.1, false, {\n                    message: '\"value\" must be a multiple of 3',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3, value: 9.1, label: 'value' }\n                }],\n                [8.9, false, {\n                    message: '\"value\" must be a multiple of 3',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3, value: 8.9, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles floats multiples correctly","suites":["number","multiple()"],"updatePoint":{"line":713,"column":46},"line":713,"code":"        it('handles floats multiples correctly', () => {\n\n            const schema = Joi.number().multiple(3.5);\n            Helper.validate(schema, [\n                [0, true],  // 0 is a multiple of every number\n                [3.5, true],\n                [3.6, false, {\n                    message: '\"value\" must be a multiple of 3.5',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3.5, value: 3.6, label: 'value' }\n                }],\n                [10.5, true],\n                ['a', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: 'a' }\n                }],\n                [10.501, false, {\n                    message: '\"value\" must be a multiple of 3.5',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3.5, value: 10.501, label: 'value' }\n                }],\n                [10.499, false, {\n                    message: '\"value\" must be a multiple of 3.5',\n                    path: [],\n                    type: 'number.multiple',\n                    context: { multiple: 3.5, value: 10.499, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles 0.1 multiples","suites":["number","multiple()"],"updatePoint":{"line":747,"column":33},"line":747,"code":"        it('handles 0.1 multiples', () => {\n\n            const schema = Joi.number().multiple(0.1);\n            Helper.validate(schema, [\n                [0, true],  // 0 is a multiple of every number\n                [3.5, true],\n                [100.1, true],\n                [3.61, false, '\"value\" must be a multiple of 0.1']\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles references correctly","suites":["number","multiple()"],"updatePoint":{"line":758,"column":40},"line":758,"code":"        it('handles references correctly', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number().multiple(ref) });\n            Helper.validate(schema, [\n                [{ a: 2, b: 32 }, true],\n                [{ a: 43, b: 0 }, true],\n                [{ a: 4, b: 25 }, false, {\n                    message: '\"b\" must be a multiple of ref:a',\n                    path: ['b'],\n                    type: 'number.multiple',\n                    context: { multiple: ref, value: 25, label: 'b', key: 'b' }\n                }],\n                [{ a: 0, b: 0 }, false, {\n                    message: '\"b\" base references \"ref:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, key: 'b', label: 'b', value: 0, arg: 'base', reason: 'must be a positive number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles references correctly within a when","suites":["number","multiple()"],"updatePoint":{"line":780,"column":54},"line":780,"code":"        it('handles references correctly within a when', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required(),\n                b: Joi.number().required(),\n                c: Joi.number().required().when('a', {\n                    is: Joi.number().multiple(Joi.ref('b')), // a % b === 0\n                    then: Joi.number().valid(0)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 2, b: 3, c: 42 }, true],\n                [{ a: 2, b: 4, c: 42 }, true],\n                [{ a: 4, b: 2, c: 0 }, true],\n                [{ a: 4, b: 2, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles non-number references correctly","suites":["number","multiple()"],"updatePoint":{"line":804,"column":51},"line":804,"code":"        it('handles non-number references correctly', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.string(), b: Joi.number().multiple(ref) });\n            Helper.validate(schema, [\n                [{ a: 'test', b: 32 }, false, {\n                    message: '\"b\" base references \"ref:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'test', arg: 'base', reason: 'must be a positive number' }\n                }],\n                [{ a: 'test', b: 0 }, false, {\n                    message: '\"b\" base references \"ref:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'test', arg: 'base', reason: 'must be a positive number' }\n                }],\n                [{ a: 'test', b: NaN }, false, {\n                    message: '\"b\" must be a number',\n                    path: ['b'],\n                    type: 'number.base',\n                    context: { label: 'b', key: 'b', value: NaN }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles context references correctly","suites":["number","multiple()"],"updatePoint":{"line":830,"column":48},"line":830,"code":"        it('handles context references correctly', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.number().multiple(ref) });\n\n            Helper.validate(schema, { context: { a: 2 } }, [\n                [{ b: 32 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 43 } }, [\n                [{ b: 0 }, true]\n            ]);\n\n            Helper.validate(schema, { context: { a: 4 } }, [\n                [{ b: 25 }, false, {\n                    message: '\"b\" must be a multiple of ref:global:a',\n                    path: ['b'],\n                    type: 'number.multiple',\n                    context: { multiple: ref, value: 25, label: 'b', key: 'b' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 0 } }, [\n                [{ b: 31 }, false, {\n                    message: '\"b\" base references \"ref:global:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, key: 'b', label: 'b', value: 0, arg: 'base', reason: 'must be a positive number' }\n                }],\n                [{ b: 0 }, false, {\n                    message: '\"b\" base references \"ref:global:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, key: 'b', label: 'b', value: 0, arg: 'base', reason: 'must be a positive number' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: 'test' } }, [\n                [{ b: 32 }, false, {\n                    message: '\"b\" base references \"ref:global:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'test', arg: 'base', reason: 'must be a positive number' }\n                }],\n                [{ b: 0 }, false, {\n                    message: '\"b\" base references \"ref:global:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'test', arg: 'base', reason: 'must be a positive number' }\n                }]\n            ]);\n\n            Helper.validate(schema, { context: { a: NaN } }, [\n                [{ b: 0 }, false, {\n                    message: '\"b\" base references \"ref:global:a\" which must be a positive number',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: NaN, arg: 'base', reason: 'must be a positive number' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"validates correctly","suites":["number","port()"],"updatePoint":{"line":895,"column":31},"line":895,"code":"        it('validates correctly', () => {\n\n            const schema = Joi.object({ port: Joi.number().port() });\n\n            Helper.validate(schema, [\n                [{ port: 1337 }, true],\n                [{ port: -1 }, false, {\n                    message: '\"port\" must be a valid port',\n                    path: ['port'],\n                    type: 'number.port',\n                    context: { value: -1, label: 'port', key: 'port' }\n                }],\n                [{ port: 65536 }, false, {\n                    message: '\"port\" must be a valid port',\n                    path: ['port'],\n                    type: 'number.port',\n                    context: { value: 65536, label: 'port', key: 'port' }\n                }],\n                [{ port: 8.88 }, false, {\n                    message: '\"port\" must be a valid port',\n                    path: ['port'],\n                    type: 'number.port',\n                    context: { value: 8.88, label: 'port', key: 'port' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"converts numbers","suites":["number","precision()"],"updatePoint":{"line":925,"column":28},"line":925,"code":"        it('converts numbers', () => {\n\n            const schema = Joi.number().precision(4);\n            Helper.validate(schema, [\n                [1.5, true, 1.5],\n                [0.12345, true, 0.1235],\n                [123456, true, 123456],\n                [123456.123456, true, 123456.1235],\n                ['123456.123456', true, 123456.1235],\n                ['abc', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: 'abc' }\n                }],\n                [NaN, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: NaN }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"validates with min()","suites":["number","precision()"],"updatePoint":{"line":949,"column":32},"line":949,"code":"        it('validates with min()', () => {\n\n            const schema = Joi.number()\n                .min(0)\n                .precision(2);\n\n            Helper.validate(schema, [\n                [-0.1, false, '\"value\" must be greater than or equal to 0'],\n                [-0.01, false, '\"value\" must be greater than or equal to 0'],\n                [-0.001, true, 0],\n                [-0.123, false, '\"value\" must be greater than or equal to 0'],\n                [-0.0456, false, '\"value\" must be greater than or equal to 0']\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts safe numbers","suites":["number","safe"],"updatePoint":{"line":967,"column":32},"line":967,"code":"        it('accepts safe numbers', () => {\n\n            const t = Joi.number();\n            Helper.validate(t, [\n                [Number.MAX_SAFE_INTEGER, true, Number.MAX_SAFE_INTEGER],\n                [Number.MIN_SAFE_INTEGER, true, Number.MIN_SAFE_INTEGER]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"allows undefined","suites":["number","validate()"],"updatePoint":{"line":979,"column":28},"line":979,"code":"        it('allows undefined', () => {\n\n            Helper.validate(Joi.number(), [\n                [undefined, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"denies undefined when .required()","suites":["number","validate()"],"updatePoint":{"line":986,"column":45},"line":986,"code":"        it('denies undefined when .required()', () => {\n\n            Helper.validate(Joi.number().required(), [\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"compares valid matching post-coerce value","suites":["number","validate()"],"updatePoint":{"line":998,"column":53},"line":998,"code":"        it('compares valid matching post-coerce value', () => {\n\n            const schema = Joi.number().valid(1, 2, 3);\n            Helper.validate(schema, [['1', true, 1]]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"ignores invalid matching of pre-coerce value","suites":["number","validate()"],"updatePoint":{"line":1004,"column":56},"line":1004,"code":"        it('ignores invalid matching of pre-coerce value', () => {\n\n            const schema = Joi.number().invalid('1');\n            Helper.validate(schema, [['1', true, 1]]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"returns false for denied value","suites":["number","validate()"],"updatePoint":{"line":1010,"column":42},"line":1010,"code":"        it('returns false for denied value', () => {\n\n            const text = Joi.number().invalid(50);\n            Helper.validate(text, [\n                [50, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 50, invalids: [50], label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"validates integer","suites":["number","validate()"],"updatePoint":{"line":1023,"column":29},"line":1023,"code":"        it('validates integer', () => {\n\n            const t = Joi.number().integer();\n            Helper.validate(t, [\n                [100, true],\n                [0, true],\n                ['+42', true, 42],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }],\n                [1.02, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 1.02, label: 'value' }\n                }],\n                [0.01, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 0.01, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"returns false for Infinity","suites":["number","validate()"],"updatePoint":{"line":1051,"column":38},"line":1051,"code":"        it('returns false for Infinity', () => {\n\n            const t = Joi.number();\n            Helper.validate(t, [\n                [Infinity, false, {\n                    message: '\"value\" cannot be infinity',\n                    path: [],\n                    type: 'number.infinity',\n                    context: { value: Infinity, label: 'value' }\n                }],\n                [-Infinity, false, {\n                    message: '\"value\" cannot be infinity',\n                    path: [],\n                    type: 'number.infinity',\n                    context: { value: -Infinity, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"returns true for allowed Infinity","suites":["number","validate()"],"updatePoint":{"line":1070,"column":45},"line":1070,"code":"        it('returns true for allowed Infinity', () => {\n\n            const t = Joi.number().allow(Infinity, -Infinity);\n            Helper.validate(t, [\n                [Infinity, true],\n                [-Infinity, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"returns true for decimal numbers","suites":["number","validate()"],"updatePoint":{"line":1079,"column":44},"line":1079,"code":"        it('returns true for decimal numbers', () => {\n\n            const t = Joi.number();\n            Helper.validate(t, [\n                [0.00000001, true, 0.00000001]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"can accept string numbers","suites":["number","validate()"],"updatePoint":{"line":1087,"column":37},"line":1087,"code":"        it('can accept string numbers', () => {\n\n            const t = Joi.number();\n            Helper.validate(t, [\n                ['1', true, 1],\n                ['100', true, 100],\n                ['+100', true, 100],\n                ['+00100', true, 100],\n                ['1e3', true, 1000],\n                ['1E3', true, 1000],\n                ['1e003', true, 1000],\n                ['1e-003', true, 0.001],\n                ['-1e+3', true, -1000],\n                ['+1e-3', true, 0.001],\n                ['1.0000', true, 1],\n                ['1.10000', true, 1.1],\n                ['000000', true, 0],\n                ['2.', true, 2],\n                ['1.1e4', true, 11000],\n                ['1.100e4', true, 11000],\n                ['100e3', true, 100000],\n                ['-00100e3', true, -100000],\n                ['-00100e-003', true, -0.1],\n                ['-001231.0133210e003', true, -1231013.321],\n                ['+001231.0133210e003', true, 1231013.321],\n                ['0.00000095', true, 0.00000095],\n                ['.5', true, 0.5],\n                ['1 some text', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: '1 some text' }\n                }],\n                ['\\t\\r', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: '\\t\\r' }\n                }],\n                [' ', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: ' ' }\n                }],\n                [' 2', true, 2],\n                ['\\t\\r43', true, 43],\n                ['43 ', true, 43],\n                ['', false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: '' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"required validates correctly","suites":["number","validate()"],"updatePoint":{"line":1144,"column":40},"line":1144,"code":"        it('required validates correctly', () => {\n\n            const t = Joi.number().required();\n            Helper.validate(t, [\n                [NaN, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: NaN }\n                }],\n                ['100', true, 100]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"converts an object string to a number","suites":["number","validate()"],"updatePoint":{"line":1158,"column":49},"line":1158,"code":"        it('converts an object string to a number', () => {\n\n            const config = { a: Joi.number() };\n            const obj = { a: '123' };\n            Helper.validate(Joi.compile(config), [\n                [obj, true, { a: 123 }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"converts a string to a number","suites":["number","validate()"],"updatePoint":{"line":1167,"column":41},"line":1167,"code":"        it('converts a string to a number', () => {\n\n            Helper.validate(Joi.number(), [['1', true, 1]]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"errors on null","suites":["number","validate()"],"updatePoint":{"line":1172,"column":26},"line":1172,"code":"        it('errors on null', () => {\n\n            Helper.validate(Joi.number(), [\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min and max","suites":["number","validate()"],"updatePoint":{"line":1184,"column":46},"line":1184,"code":"        it('handles combination of min and max', () => {\n\n            const rule = Joi.number().min(8).max(10);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1211,"column":61},"line":1211,"code":"        it('handles combination of min, max, and null allowed', () => {\n\n            const rule = Joi.number().min(8).max(10).allow(null);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min and positive","suites":["number","validate()"],"updatePoint":{"line":1233,"column":51},"line":1233,"code":"        it('handles combination of min and positive', () => {\n\n            const rule = Joi.number().min(-3).positive();\n            Helper.validate(rule, [\n                [1, true],\n                [-2, false, {\n                    message: '\"value\" must be a positive number',\n                    path: [],\n                    type: 'number.positive',\n                    context: { value: -2, label: 'value' }\n                }],\n                [8, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of max and positive","suites":["number","validate()"],"updatePoint":{"line":1254,"column":51},"line":1254,"code":"        it('handles combination of max and positive', () => {\n\n            const rule = Joi.number().max(5).positive();\n            Helper.validate(rule, [\n                [4, true],\n                [-2, false, {\n                    message: '\"value\" must be a positive number',\n                    path: [],\n                    type: 'number.positive',\n                    context: { value: -2, label: 'value' }\n                }],\n                [8, false, {\n                    message: '\"value\" must be less than or equal to 5',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 5, value: 8, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min and negative","suites":["number","validate()"],"updatePoint":{"line":1280,"column":51},"line":1280,"code":"        it('handles combination of min and negative', () => {\n\n            const rule = Joi.number().min(-3).negative();\n            Helper.validate(rule, [\n                [4, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 4, label: 'value' }\n                }],\n                [-2, true],\n                [-4, false, {\n                    message: '\"value\" must be greater than or equal to -3',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: -3, value: -4, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of negative and allow","suites":["number","validate()"],"updatePoint":{"line":1306,"column":53},"line":1306,"code":"        it('handles combination of negative and allow', () => {\n\n            const rule = Joi.number().negative().allow(1);\n            Helper.validate(rule, [\n                [1, true],\n                [-10, true],\n                [8, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 8, label: 'value' }\n                }],\n                [0, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 0, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of positive and allow","suites":["number","validate()"],"updatePoint":{"line":1333,"column":53},"line":1333,"code":"        it('handles combination of positive and allow', () => {\n\n            const rule = Joi.number().positive().allow(-1);\n            Helper.validate(rule, [\n                [1, true],\n                [-1, true],\n                [8, true],\n                [-10, false, {\n                    message: '\"value\" must be a positive number',\n                    path: [],\n                    type: 'number.positive',\n                    context: { value: -10, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of positive, allow, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1355,"column":68},"line":1355,"code":"        it('handles combination of positive, allow, and null allowed', () => {\n\n            const rule = Joi.number().positive().allow(-1).allow(null);\n            Helper.validate(rule, [\n                [1, true],\n                [-1, true],\n                [8, true],\n                [-10, false, {\n                    message: '\"value\" must be a positive number',\n                    path: [],\n                    type: 'number.positive',\n                    context: { value: -10, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of negative, allow, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1372,"column":68},"line":1372,"code":"        it('handles combination of negative, allow, and null allowed', () => {\n\n            const rule = Joi.number().negative().allow(1).allow(null);\n            Helper.validate(rule, [\n                [1, true],\n                [-10, true],\n                [8, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 8, label: 'value' }\n                }],\n                [0, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 0, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of positive, allow, null allowed, and invalid","suites":["number","validate()"],"updatePoint":{"line":1394,"column":77},"line":1394,"code":"        it('handles combination of positive, allow, null allowed, and invalid', () => {\n\n            const rule = Joi.number().positive().allow(-1).allow(null).invalid(1);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 1, invalids: [1], label: 'value' }\n                }],\n                [-1, true],\n                [8, true],\n                [-10, false, {\n                    message: '\"value\" must be a positive number',\n                    path: [],\n                    type: 'number.positive',\n                    context: { value: -10, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of negative, allow, null allowed, and invalid","suites":["number","validate()"],"updatePoint":{"line":1416,"column":77},"line":1416,"code":"        it('handles combination of negative, allow, null allowed, and invalid', () => {\n\n            const rule = Joi.number().negative().allow(1).allow(null).invalid(-5);\n            Helper.validate(rule, [\n                [1, true],\n                [-10, true],\n                [-5, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: -5, invalids: [-5], label: 'value' }\n                }],\n                [8, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 8, label: 'value' }\n                }],\n                [0, false, {\n                    message: '\"value\" must be a negative number',\n                    path: [],\n                    type: 'number.negative',\n                    context: { value: 0, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, and allow","suites":["number","validate()"],"updatePoint":{"line":1444,"column":54},"line":1444,"code":"        it('handles combination of min, max, and allow', () => {\n\n            const rule = Joi.number().min(8).max(10).allow(1);\n            Helper.validate(rule, [\n                [1, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, allow, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1466,"column":68},"line":1466,"code":"        it('handles combination of min, max, allow, and null allowed', () => {\n\n            const rule = Joi.number().min(8).max(10).allow(1).allow(null);\n            Helper.validate(rule, [\n                [1, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, allow, and invalid","suites":["number","validate()"],"updatePoint":{"line":1483,"column":63},"line":1483,"code":"        it('handles combination of min, max, allow, and invalid', () => {\n\n            const rule = Joi.number().min(8).max(10).allow(1).invalid(9);\n            Helper.validate(rule, [\n                [1, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 9, invalids: [9], label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, allow, invalid, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1510,"column":77},"line":1510,"code":"        it('handles combination of min, max, allow, invalid, and null allowed', () => {\n\n            const rule = Joi.number().min(8).max(10).allow(1).invalid(9).allow(null);\n            Helper.validate(rule, [\n                [1, true],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 9, invalids: [9], label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, and integer","suites":["number","validate()"],"updatePoint":{"line":1532,"column":56},"line":1532,"code":"        it('handles combination of min, max, and integer', () => {\n\n            const rule = Joi.number().min(8).max(10).integer();\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [9.1, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.1, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, integer, and allow","suites":["number","validate()"],"updatePoint":{"line":1565,"column":63},"line":1565,"code":"        it('handles combination of min, max, integer, and allow', () => {\n\n            const rule = Joi.number().min(8).max(10).integer().allow(9.1);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, true],\n                [9, true],\n                [9.1, true],\n                [9.2, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.2, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, integer, allow, and invalid","suites":["number","validate()"],"updatePoint":{"line":1599,"column":72},"line":1599,"code":"        it('handles combination of min, max, integer, allow, and invalid', () => {\n\n            const rule = Joi.number().min(8).max(10).integer().allow(9.1).invalid(8);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 8, invalids: [8], label: 'value' }\n                }],\n                [9, true],\n                [9.1, true],\n                [9.2, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.2, label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, integer, allow, invalid, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1638,"column":86},"line":1638,"code":"        it('handles combination of min, max, integer, allow, invalid, and null allowed', () => {\n\n            const rule = Joi.number().min(8).max(10).integer().allow(9.1).invalid(8).allow(null);\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 8, invalids: [8], label: 'value' }\n                }],\n                [9, true],\n                [9.1, true],\n                [9.2, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.2, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles limiting the number of decimal places","suites":["number","validate()"],"updatePoint":{"line":1672,"column":57},"line":1672,"code":"        it('handles limiting the number of decimal places', () => {\n\n            const rule = Joi.number().precision(1).prefs({ convert: false });\n            Helper.validate(rule, [\n                [1, true],\n                [9.1, true],\n                [9.21, false, {\n                    message: '\"value\" must have no more than 1 decimal places',\n                    path: [],\n                    type: 'number.precision',\n                    context: { limit: 1, value: 9.21, label: 'value' }\n                }],\n                [9.9999, false, {\n                    message: '\"value\" must have no more than 1 decimal places',\n                    path: [],\n                    type: 'number.precision',\n                    context: { limit: 1, value: 9.9999, label: 'value' }\n                }],\n                [9.9e-99, false, {\n                    message: '\"value\" must have no more than 1 decimal places',\n                    path: [],\n                    type: 'number.precision',\n                    context: { limit: 1, value: 9.9e-99, label: 'value' }\n                }],\n                [9.9e3, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of min, max, integer, allow, invalid, null allowed and precision","suites":["number","validate()"],"updatePoint":{"line":1706,"column":96},"line":1706,"code":"        it('handles combination of min, max, integer, allow, invalid, null allowed and precision', () => {\n\n            const rule = Joi.number().min(8).max(10).integer().allow(9.1).invalid(8).allow(null).precision(1).prefs({ convert: false });\n            Helper.validate(rule, [\n                [1, false, {\n                    message: '\"value\" must be greater than or equal to 8',\n                    path: [],\n                    type: 'number.min',\n                    context: { limit: 8, value: 1, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than or equal to 10',\n                    path: [],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [8, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 8, invalids: [8], label: 'value' }\n                }],\n                [9, true],\n                [9.1, true],\n                [9.11, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.11, label: 'value' }\n                }],\n                [9.2, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.2, label: 'value' }\n                }],\n                [9.22, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.22, label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of greater and less","suites":["number","validate()"],"updatePoint":{"line":1752,"column":51},"line":1752,"code":"        it('handles combination of greater and less', () => {\n\n            const rule = Joi.number().greater(5).less(10);\n            Helper.validate(rule, [\n                [0, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 0, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [5, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 5, label: 'value' }\n                }],\n                [10, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 10, label: 'value' }\n                }],\n                [8, true],\n                [5.01, true],\n                [9.99, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of greater, less, and integer","suites":["number","validate()"],"updatePoint":{"line":1792,"column":61},"line":1792,"code":"        it('handles combination of greater, less, and integer', () => {\n\n            const rule = Joi.number().integer().greater(5).less(10);\n            Helper.validate(rule, [\n                [0, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 0, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [5, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 5, label: 'value' }\n                }],\n                [10, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 10, label: 'value' }\n                }],\n                [6, true],\n                [9, true],\n                [5.01, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 5.01, label: 'value' }\n                }],\n                [9.99, false, {\n                    message: '\"value\" must be an integer',\n                    path: [],\n                    type: 'number.integer',\n                    context: { value: 9.99, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of greater, less, and null allowed","suites":["number","validate()"],"updatePoint":{"line":1837,"column":66},"line":1837,"code":"        it('handles combination of greater, less, and null allowed', () => {\n\n            const rule = Joi.number().greater(5).less(10).allow(null);\n            Helper.validate(rule, [\n                [0, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 0, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [5, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 5, label: 'value' }\n                }],\n                [10, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 10, label: 'value' }\n                }],\n                [8, true],\n                [5.01, true],\n                [9.99, true],\n                [null, true]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"handles combination of greater, less, invalid, and allow","suites":["number","validate()"],"updatePoint":{"line":1872,"column":68},"line":1872,"code":"        it('handles combination of greater, less, invalid, and allow', () => {\n\n            const rule = Joi.number().greater(5).less(10).invalid(6).allow(-3);\n            Helper.validate(rule, [\n                [0, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 0, label: 'value' }\n                }],\n                [11, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 11, label: 'value' }\n                }],\n                [5, false, {\n                    message: '\"value\" must be greater than 5',\n                    path: [],\n                    type: 'number.greater',\n                    context: { limit: 5, value: 5, label: 'value' }\n                }],\n                [10, false, {\n                    message: '\"value\" must be less than 10',\n                    path: [],\n                    type: 'number.less',\n                    context: { limit: 10, value: 10, label: 'value' }\n                }],\n                [6, false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 6, invalids: [6], label: 'value' }\n                }],\n                [8, true],\n                [5.01, true],\n                [9.99, true],\n                [-3, true],\n                [null, false, {\n                    message: '\"value\" must be a number',\n                    path: [],\n                    type: 'number.base',\n                    context: { label: 'value', value: null }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"returns the same instance if nothing changed","suites":["number","unsafe"],"updatePoint":{"line":1922,"column":56},"line":1922,"code":"        it('returns the same instance if nothing changed', () => {\n\n            const schema = Joi.number();\n            expect(schema.unsafe(false)).to.shallow.equal(schema);\n            expect(schema.unsafe()).to.not.shallow.equal(schema);\n            expect(schema.unsafe(true)).to.not.shallow.equal(schema);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"checks unsafe numbers","suites":["number","unsafe"],"updatePoint":{"line":1930,"column":33},"line":1930,"code":"        it('checks unsafe numbers', () => {\n\n            const t = Joi.number();\n            Helper.validate(t, [\n                ['-0', true, 0],\n                ['9007199254740981.1', false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: '9007199254740981.1', label: 'value' }\n                }],\n                ['90071992547409811e-1', false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: '90071992547409811e-1', label: 'value' }\n                }],\n                ['9007199254740992', false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: 9007199254740992, label: 'value' }\n                }],\n                ['-9007199254740992', false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: -9007199254740992, label: 'value' }\n                }],\n                ['90.071992549e+15', false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: 90071992549000000, label: 'value' }\n                }],\n                [9007199254740992, false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: 9007199254740992, label: 'value' }\n                }],\n                [-9007199254740992, false, {\n                    message: '\"value\" must be a safe number',\n                    path: [],\n                    type: 'number.unsafe',\n                    context: { value: -9007199254740992, label: 'value' }\n                }]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"accepts unsafe numbers with a loss of precision when disabled","suites":["number","unsafe"],"updatePoint":{"line":1980,"column":73},"line":1980,"code":"        it('accepts unsafe numbers with a loss of precision when disabled', () => {\n\n            const t = Joi.number().unsafe();\n            Helper.validate(t, [\n                ['9007199254740981.1', true, 9007199254740981],\n                ['9007199254740992', true, 9007199254740992],\n                ['-9007199254740992', true, -9007199254740992],\n                ['90.071992549e+15', true, 90071992549000000],\n                [9007199254740992, true, 9007199254740992],\n                [-9007199254740992, true, -9007199254740992]\n            ]);\n        });","file":"types/number.js","skipped":false,"dir":"test"},{"name":"validates an object","suites":["object"],"updatePoint":{"line":19,"column":27},"line":19,"code":"    it('validates an object', () => {\n\n        const schema = Joi.object().required();\n        Helper.validate(schema, [\n            [{}, true],\n            [{ hi: true }, true],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates basic object","suites":["object"],"updatePoint":{"line":34,"column":30},"line":34,"code":"    it('validates basic object', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().min(0).max(3),\n            b: Joi.string().valid('a', 'b', 'c'),\n            c: Joi.string().email().optional()\n        }).without('a', 'none');\n\n        expect(Joi.isSchema(schema)).to.be.true();\n        expect(Joi.isSchema({})).to.be.false();\n\n        const obj = {\n            a: 1,\n            b: 'a',\n            c: 'joe@example.com'\n        };\n\n        Helper.validate(schema, [[obj, true]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"returns object reference when no rules specified","suites":["object"],"updatePoint":{"line":54,"column":56},"line":54,"code":"    it('returns object reference when no rules specified', () => {\n\n        const schema = Joi.object({\n            a: Joi.object()\n        });\n\n        const item = { x: 5 };\n        Helper.validate(schema, [[{ a: item }, true, { a: item }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"retains ignored values","suites":["object"],"updatePoint":{"line":64,"column":30},"line":64,"code":"    it('retains ignored values', () => {\n\n        const schema = Joi.object();\n        Helper.validate(schema, [[{ a: 5 }, true, { a: 5 }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"retains skipped values","suites":["object"],"updatePoint":{"line":70,"column":30},"line":70,"code":"    it('retains skipped values', () => {\n\n        const schema = Joi.object({ b: 5 }).unknown(true);\n        Helper.validate(schema, [[{ b: 5, a: 5 }, true, { a: 5, b: 5 }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"retains symbols","suites":["object"],"updatePoint":{"line":76,"column":23},"line":76,"code":"    it('retains symbols', () => {\n\n        const schema = Joi.object({ a: Joi.number() });\n\n        const symbol = Symbol();\n        Helper.validate(schema, [[{ [symbol]: 5, a: 5 }, true, { [symbol]: 5, a: 5 }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"retains non-enumerable","suites":["object"],"updatePoint":{"line":84,"column":30},"line":84,"code":"    it('retains non-enumerable', () => {\n\n        const schema = Joi.object({ a: Joi.number() });\n\n        const obj = { a: 100 };\n        Object.defineProperty(obj, 'test', { value: 42, enumerable: false });\n        expect(obj.test).to.equal(42);\n        Helper.validate(schema, { nonEnumerables: true }, [[obj, true, { a: 100 }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"retains prototype","suites":["object"],"updatePoint":{"line":94,"column":25},"line":94,"code":"    it('retains prototype', () => {\n\n        const schema = Joi.object({ a: Joi.number() });\n\n        const Test = class {\n            constructor() {\n\n                this.a = 5;\n            }\n        };\n\n        expect(schema.validate(new Test()).value).to.be.instanceof(Test);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows any key when schema is undefined","suites":["object"],"updatePoint":{"line":108,"column":47},"line":108,"code":"    it('allows any key when schema is undefined', () => {\n\n        Helper.validate(Joi.object(), [[{ a: 4 }, true]]);\n        Helper.validate(Joi.object(undefined), [[{ a: 4 }, true]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows any key when schema is null","suites":["object"],"updatePoint":{"line":114,"column":42},"line":114,"code":"    it('allows any key when schema is null', () => {\n\n        Helper.validate(Joi.object(null), [[{ a: 4 }, true]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws on invalid object schema","suites":["object"],"updatePoint":{"line":119,"column":39},"line":119,"code":"    it('throws on invalid object schema', () => {\n\n        expect(() => {\n\n            Joi.object(4);\n        }).to.throw('Object schema must be a valid object');\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws on joi object schema","suites":["object"],"updatePoint":{"line":127,"column":35},"line":127,"code":"    it('throws on joi object schema', () => {\n\n        expect(() => {\n\n            Joi.object(Joi.object());\n        }).to.throw('Object schema cannot be a joi schema');\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"skips conversion when value is undefined","suites":["object"],"updatePoint":{"line":135,"column":48},"line":135,"code":"    it('skips conversion when value is undefined', () => {\n\n        Helper.validate(Joi.object({ a: Joi.object() }), [[undefined, true, undefined]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors on array","suites":["object"],"updatePoint":{"line":140,"column":23},"line":140,"code":"    it('errors on array', () => {\n\n        Helper.validate(Joi.object(), [[[1, 2, 3], false, {\n            message: '\"value\" must be of type object',\n            path: [],\n            type: 'object.base',\n            context: { label: 'value', value: [1, 2, 3], type: 'object' }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should prevent extra keys from existing by default","suites":["object"],"updatePoint":{"line":150,"column":58},"line":150,"code":"    it('should prevent extra keys from existing by default', () => {\n\n        const schema = Joi.object({ item: Joi.string().required() }).required();\n        Helper.validate(schema, [\n            [{ item: 'something' }, true],\n            [{ item: 'something', item2: 'something else' }, false, {\n                message: '\"item2\" is not allowed',\n                path: ['item2'],\n                type: 'object.unknown',\n                context: { child: 'item2', label: 'item2', key: 'item2', value: 'something else' }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates count when min is set","suites":["object"],"updatePoint":{"line":170,"column":39},"line":170,"code":"    it('validates count when min is set', () => {\n\n        const schema = Joi.object().min(3);\n        Helper.validate(schema, [\n            [{ item: 'something' }, false, {\n                message: '\"value\" must have at least 3 keys',\n                path: [],\n                type: 'object.min',\n                context: { limit: 3, label: 'value', value: { item: 'something' } }\n            }],\n            [{ item: 'something', item2: 'something else' }, false, {\n                message: '\"value\" must have at least 3 keys',\n                path: [],\n                type: 'object.min',\n                context: {\n                    limit: 3,\n                    label: 'value',\n                    value: { item: 'something', item2: 'something else' }\n                }\n            }],\n            [{ item: 'something', item2: 'something else', item3: 'something something else' }, true],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates count when max is set","suites":["object"],"updatePoint":{"line":200,"column":39},"line":200,"code":"    it('validates count when max is set', () => {\n\n        const schema = Joi.object().max(2);\n        Helper.validate(schema, [\n            [{ item: 'something' }, true],\n            [{ item: 'something', item2: 'something else' }, true],\n            [{ item: 'something', item2: 'something else', item3: 'something something else' }, false, {\n                message: '\"value\" must have less than or equal to 2 keys',\n                path: [],\n                type: 'object.max',\n                context: {\n                    limit: 2,\n                    label: 'value',\n                    value: { item: 'something', item2: 'something else', item3: 'something something else' }\n                }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates count when min and max is set","suites":["object"],"updatePoint":{"line":225,"column":47},"line":225,"code":"    it('validates count when min and max is set', () => {\n\n        const schema = Joi.object().max(3).min(2);\n        Helper.validate(schema, [\n            [{ item: 'something' }, false, {\n                message: '\"value\" must have at least 2 keys',\n                path: [],\n                type: 'object.min',\n                context: { limit: 2, label: 'value', value: { item: 'something' } }\n            }],\n            [{ item: 'something', item2: 'something else' }, true],\n            [{ item: 'something', item2: 'something else', item3: 'something something else' }, true],\n            [{ item: 'something', item2: 'something else', item3: 'something something else', item4: 'item4' }, false, {\n                message: '\"value\" must have less than or equal to 3 keys',\n                path: [],\n                type: 'object.max',\n                context: {\n                    limit: 3,\n                    label: 'value',\n                    value: {\n                        item: 'something',\n                        item2: 'something else',\n                        item3: 'something something else',\n                        item4: 'item4'\n                    }\n                }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates count when length is set","suites":["object"],"updatePoint":{"line":261,"column":42},"line":261,"code":"    it('validates count when length is set', () => {\n\n        const schema = Joi.object().length(2);\n        Helper.validate(schema, [\n            [{ item: 'something' }, false, {\n                message: '\"value\" must have 2 keys',\n                path: [],\n                type: 'object.length',\n                context: { limit: 2, label: 'value', value: { item: 'something' } }\n            }],\n            [{ item: 'something', item2: 'something else' }, true],\n            [{ item: 'something', item2: 'something else', item3: 'something something else' }, false, {\n                message: '\"value\" must have 2 keys',\n                path: [],\n                type: 'object.length',\n                context: {\n                    limit: 2,\n                    label: 'value',\n                    value: { item: 'something', item2: 'something else', item3: 'something something else' }\n                }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates constructor when type is set","suites":["object"],"updatePoint":{"line":291,"column":46},"line":291,"code":"    it('validates constructor when type is set', () => {\n\n        const schema = Joi.object().instance(RegExp);\n        const d = new Date();\n        Helper.validate(schema, [\n            [{ item: 'something' }, false, {\n                message: '\"value\" must be an instance of \"RegExp\"',\n                path: [],\n                type: 'object.instance',\n                context: { type: 'RegExp', label: 'value', value: { item: 'something' } }\n            }],\n            ['', false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: '', type: 'object' }\n            }],\n            [d, false, {\n                message: '\"value\" must be an instance of \"RegExp\"',\n                path: [],\n                type: 'object.instance',\n                context: { type: 'RegExp', label: 'value', value: d }\n            }],\n            [/abcd/, true],\n            [new RegExp(), true]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should strip unknown values when stripUnknown === true","suites":["object"],"updatePoint":{"line":319,"column":62},"line":319,"code":"    it('should strip unknown values when stripUnknown === true', () => {\n\n        const schema = Joi.object({\n            itemName: Joi.string().required(),\n            nestedItem: Joi.object({\n                nestedItemName: Joi.string().required()\n            }).required()\n        }).required();\n        const prefs = { abortEarly: false, stripUnknown: true };\n\n        // test for valid objects\n        Helper.validate(schema, prefs, [\n            [\n                { itemName: 'John', toStrip: true, nestedItem: { nestedItemName: 'Doe' } },\n                true,\n                { itemName: 'John', nestedItem: { nestedItemName: 'Doe' } }\n            ],\n            [\n                { itemName: 'John', nestedItem: { nestedItemName: 'Doe', toStrip: true } },\n                true,\n                { itemName: 'John', nestedItem: { nestedItemName: 'Doe' } }\n            ]\n        ]);\n\n        // test for invalid object, value to strip in root object\n        let { value } = schema.validate(\n            { itemName: 1, toStrip: true, nestedItem: { nestedItemName: 'Doe' } },\n            prefs\n        );\n        expect(value).to.equal({ itemName: 1, nestedItem: { nestedItemName: 'Doe' } });\n\n        // test for invalid object, value to strip in nested object\n        value = schema.validate(\n            { itemName: 'John', nestedItem: { nestedItemName: 1, toStripNested: true } },\n            prefs\n        ).value;\n        expect(value).to.equal({ itemName: 'John', nestedItem: { nestedItemName: 1 } });\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"traverses an object and validate all properties in the top level","suites":["object"],"updatePoint":{"line":358,"column":72},"line":358,"code":"    it('traverses an object and validate all properties in the top level', () => {\n\n        const schema = Joi.object({\n            num: Joi.number()\n        });\n\n        Helper.validate(schema, [\n            [{ num: 1 }, true],\n            [{ num: [1, 2, 3] }, false, {\n                message: '\"num\" must be a number',\n                path: ['num'],\n                type: 'number.base',\n                context: { label: 'num', key: 'num', value: [1, 2, 3] }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"traverses an object and child objects and validate all properties","suites":["object"],"updatePoint":{"line":375,"column":73},"line":375,"code":"    it('traverses an object and child objects and validate all properties', () => {\n\n        const schema = Joi.object({\n            num: Joi.number(),\n            obj: Joi.object({\n                item: Joi.string()\n            })\n        });\n\n        Helper.validate(schema, [\n            [{ num: 1 }, true],\n            [{ num: [1, 2, 3] }, false, {\n                message: '\"num\" must be a number',\n                path: ['num'],\n                type: 'number.base',\n                context: { label: 'num', key: 'num', value: [1, 2, 3] }\n            }],\n            [{ num: 1, obj: { item: 'something' } }, true],\n            [{ num: 1, obj: { item: 123 } }, false, {\n                message: '\"obj.item\" must be a string',\n                path: ['obj', 'item'],\n                type: 'string.base',\n                context: { value: 123, label: 'obj.item', key: 'item' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"traverses an object several levels","suites":["object"],"updatePoint":{"line":402,"column":42},"line":402,"code":"    it('traverses an object several levels', () => {\n\n        const schema = Joi.object({\n            obj: Joi.object({\n                obj: Joi.object({\n                    obj: Joi.object({\n                        item: Joi.boolean()\n                    })\n                })\n            })\n        });\n\n        Helper.validate(schema, [\n            [{ num: 1 }, false, {\n                message: '\"num\" is not allowed',\n                path: ['num'],\n                type: 'object.unknown',\n                context: { child: 'num', label: 'num', key: 'num', value: 1 }\n            }],\n            [{ obj: {} }, true],\n            [{ obj: { obj: {} } }, true],\n            [{ obj: { obj: { obj: {} } } }, true],\n            [{ obj: { obj: { obj: { item: true } } } }, true],\n            [{ obj: { obj: { obj: { item: 10 } } } }, false, {\n                message: '\"obj.obj.obj.item\" must be a boolean',\n                path: ['obj', 'obj', 'obj', 'item'],\n                type: 'boolean.base',\n                context: { label: 'obj.obj.obj.item', key: 'item', value: 10 }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"traverses an object several levels with required levels","suites":["object"],"updatePoint":{"line":434,"column":63},"line":434,"code":"    it('traverses an object several levels with required levels', () => {\n\n        const schema = Joi.object({\n            obj: Joi.object({\n                obj: Joi.object({\n                    obj: Joi.object({\n                        item: Joi.boolean()\n                    })\n                }).required()\n            })\n        });\n\n        Helper.validate(schema, [\n            [null, false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: null, type: 'object' }\n            }],\n            [undefined, true],\n            [{}, true],\n            [{ obj: {} }, false, {\n                message: '\"obj.obj\" is required',\n                path: ['obj', 'obj'],\n                type: 'any.required',\n                context: { label: 'obj.obj', key: 'obj' }\n            }],\n            [{ obj: { obj: {} } }, true],\n            [{ obj: { obj: { obj: {} } } }, true],\n            [{ obj: { obj: { obj: { item: true } } } }, true],\n            [{ obj: { obj: { obj: { item: 10 } } } }, false, {\n                message: '\"obj.obj.obj.item\" must be a boolean',\n                path: ['obj', 'obj', 'obj', 'item'],\n                type: 'boolean.base',\n                context: { label: 'obj.obj.obj.item', key: 'item', value: 10 }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"traverses an object several levels with required levels (without Joi.obj())","suites":["object"],"updatePoint":{"line":473,"column":83},"line":473,"code":"    it('traverses an object several levels with required levels (without Joi.obj())', () => {\n\n        const schema = Joi.object({\n            obj: {\n                obj: {\n                    obj: {\n                        item: Joi.boolean().required()\n                    }\n                }\n            }\n        });\n\n        Helper.validate(schema, [\n            [null, false, {\n                message: '\"value\" must be of type object',\n                path: [],\n                type: 'object.base',\n                context: { label: 'value', value: null, type: 'object' }\n            }],\n            [undefined, true],\n            [{}, true],\n            [{ obj: {} }, true],\n            [{ obj: { obj: {} } }, true],\n            [{ obj: { obj: { obj: {} } } }, false, {\n                message: '\"obj.obj.obj.item\" is required',\n                path: ['obj', 'obj', 'obj', 'item'],\n                type: 'any.required',\n                context: { label: 'obj.obj.obj.item', key: 'item' }\n            }],\n            [{ obj: { obj: { obj: { item: true } } } }, true],\n            [{ obj: { obj: { obj: { item: 10 } } } }, false, {\n                message: '\"obj.obj.obj.item\" must be a boolean',\n                path: ['obj', 'obj', 'obj', 'item'],\n                type: 'boolean.base',\n                context: { label: 'obj.obj.obj.item', key: 'item', value: 10 }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors on unknown keys when functions allows","suites":["object"],"updatePoint":{"line":512,"column":52},"line":512,"code":"    it('errors on unknown keys when functions allows', () => {\n\n        const schema = Joi.object({ a: Joi.number() }).prefs({ skipFunctions: true });\n        const obj = { a: 5, b: 'value' };\n        Helper.validate(schema, [[obj, false, {\n            message: '\"b\" is not allowed',\n            path: ['b'],\n            type: 'object.unknown',\n            context: { child: 'b', label: 'b', key: 'b', value: 'value' }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates both valid() and with()","suites":["object"],"updatePoint":{"line":524,"column":41},"line":524,"code":"    it('validates both valid() and with()', () => {\n\n        const schema = Joi.object({\n            first: Joi.valid('value'),\n            second: Joi.any()\n        }).with('first', 'second');\n\n        Helper.validate(schema, [\n            [{ first: 'value' }, false, {\n                message: '\"first\" missing required peer \"second\"',\n                path: [],\n                type: 'object.with',\n                context: {\n                    main: 'first',\n                    mainWithLabel: 'first',\n                    peer: 'second',\n                    peerWithLabel: 'second',\n                    label: 'value',\n                    value: { first: 'value' }\n                }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates referenced arrays in valid()","suites":["object"],"updatePoint":{"line":548,"column":46},"line":548,"code":"    it('validates referenced arrays in valid()', () => {\n\n        const ref = Joi.in('$x');\n        const schema = Joi.object({\n            foo: Joi.valid(ref)\n        });\n\n        Helper.validate(schema, { context: { x: 'bar' } }, [\n            [{ foo: 'bar' }, true]\n        ]);\n\n        Helper.validate(schema, { context: { x: ['baz', 'bar'] } }, [\n            [{ foo: 'bar' }, true]\n        ]);\n\n        Helper.validate(schema, { context: { x: 'baz' } }, [\n            [{ foo: 'bar' }, false, {\n                message: '\"foo\" must be [ref:global:x]',\n                path: ['foo'],\n                type: 'any.only',\n                context: { value: 'bar', valids: [ref], label: 'foo', key: 'foo' }\n            }]\n        ]);\n\n        Helper.validate(schema, { context: { x: ['baz', 'qux'] } }, [\n            [{ foo: 'bar' }, false, {\n                message: '\"foo\" must be [ref:global:x]',\n                path: ['foo'],\n                type: 'any.only',\n                context: { value: 'bar', valids: [ref], label: 'foo', key: 'foo' }\n            }]\n        ]);\n\n        Helper.validate(schema, [\n            [{ foo: 'bar' }, false, {\n                message: '\"foo\" must be [ref:global:x]',\n                path: ['foo'],\n                type: 'any.only',\n                context: { value: 'bar', valids: [ref], label: 'foo', key: 'foo' }\n            }]\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors on unknown nested keys with the correct path","suites":["object"],"updatePoint":{"line":591,"column":59},"line":591,"code":"    it('errors on unknown nested keys with the correct path', () => {\n\n        const schema = Joi.object({ a: Joi.object().keys({}) });\n        const obj = { a: { b: 'value' } };\n        Helper.validate(schema, [[obj, false, {\n            message: '\"a.b\" is not allowed',\n            path: ['a', 'b'],\n            type: 'object.unknown',\n            context: { child: 'b', label: 'a.b', key: 'b', value: 'value' }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors on unknown nested keys with the correct path at the root level","suites":["object"],"updatePoint":{"line":603,"column":77},"line":603,"code":"    it('errors on unknown nested keys with the correct path at the root level', () => {\n\n        const schema = Joi.object({ a: Joi.object().keys({}) });\n        const obj = { c: 'hello' };\n        Helper.validate(schema, [[obj, false, {\n            message: '\"c\" is not allowed',\n            path: ['c'],\n            type: 'object.unknown',\n            context: { child: 'c', label: 'c', key: 'c', value: 'hello' }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should work on prototype-less objects","suites":["object"],"updatePoint":{"line":615,"column":45},"line":615,"code":"    it('should work on prototype-less objects', () => {\n\n        const input = Object.create(null);\n        const schema = Joi.object().keys({\n            a: Joi.number()\n        });\n\n        input.a = 1337;\n\n        Helper.validate(schema, [[input, true]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should be able to use rename safely with a fake hasOwnProperty","suites":["object"],"updatePoint":{"line":627,"column":70},"line":627,"code":"    it('should be able to use rename safely with a fake hasOwnProperty', () => {\n\n        const schema = Joi.object()\n            .rename('b', 'a');\n\n        const input = { b: 2, a: 1, hasOwnProperty: 'foo' };\n\n        Helper.validate(schema, [[input, false, {\n            message: '\"value\" cannot rename \"b\" because override is disabled and target \"a\" exists',\n            path: [],\n            type: 'object.rename.override',\n            context: { from: 'b', to: 'a', label: 'value', pattern: false, value: input }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should be able to use object.with() safely with a fake hasOwnProperty","suites":["object"],"updatePoint":{"line":642,"column":77},"line":642,"code":"    it('should be able to use object.with() safely with a fake hasOwnProperty', () => {\n\n        const input = { a: 1, hasOwnProperty: 'foo' };\n        const schema = Joi.object({ a: 1 }).with('a', 'b');\n\n        Helper.validate(schema, { abortEarly: false }, [[input, false, {\n            message: '\"hasOwnProperty\" is not allowed. \"a\" missing required peer \"b\"',\n            details: [\n                {\n                    message: '\"hasOwnProperty\" is not allowed',\n                    path: ['hasOwnProperty'],\n                    type: 'object.unknown',\n                    context: {\n                        child: 'hasOwnProperty',\n                        label: 'hasOwnProperty',\n                        key: 'hasOwnProperty',\n                        value: 'foo'\n                    }\n                },\n                {\n                    message: '\"a\" missing required peer \"b\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'a',\n                        mainWithLabel: 'a',\n                        peer: 'b',\n                        peerWithLabel: 'b',\n                        label: 'value',\n                        value: input\n                    }\n                }\n            ]\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"aborts early on unknown keys","suites":["object"],"updatePoint":{"line":678,"column":36},"line":678,"code":"    it('aborts early on unknown keys', () => {\n\n        const input = { a: 1, unknown: 2 };\n        const schema = Joi.object({ a: 1 }).with('a', 'b');\n\n        Helper.validate(schema, [[input, false, '\"unknown\" is not allowed']]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object"],"updatePoint":{"line":686,"column":42},"line":686,"code":"    it('applies labels with nested objects', () => {\n\n        const schema = Joi.object({\n            a: Joi.number().label('first'),\n            b: Joi.object({\n                c: Joi.string().label('second'),\n                d: Joi.number()\n            })\n        })\n            .with('a', ['b.c']);\n\n        Helper.validate(schema, [[{ a: 1, b: { d: 2 } }, false, {\n            message: '\"first\" missing required peer \"b.second\"',\n            path: [],\n            type: 'object.with',\n            context: {\n                main: 'a',\n                mainWithLabel: 'first',\n                peer: 'b.c',\n                peerWithLabel: 'b.second',\n                label: 'value',\n                value: { a: 1, b: { d: 2 } }\n            }\n        }]]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors on unknown key","suites":["object"],"updatePoint":{"line":712,"column":29},"line":712,"code":"    it('errors on unknown key', () => {\n\n        const config = {\n            auth: Joi.object({\n                mode: Joi.string().valid('required', 'optional', 'try').allow(null)\n            }).allow(null)\n        };\n\n        Helper.validate(Joi.compile(config), [\n            [{ auth: { unknown: true } }, false, '\"auth.unknown\" is not allowed'],\n            [{ something: false }, false, '\"something\" is not allowed']\n        ]);\n    });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws when references are passed","suites":["object","dependency()"],"updatePoint":{"line":728,"column":45},"line":728,"code":"        it('throws when references are passed', () => {\n\n            expect(() => Joi.object().and(Joi.ref('test'))).to.throw('and peers must be strings');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates and()","suites":["object","and()"],"updatePoint":{"line":736,"column":27},"line":736,"code":"        it('validates and()', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string().allow(null, ''),\n                code: Joi.number()\n            }).and('txt', 'upc', 'code');\n\n            const err = schema.validate({ txt: 'x' }, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"value\" contains [txt] without its required peers [upc, code]');\n            expect(err.details).to.equal([{\n                message: '\"value\" contains [txt] without its required peers [upc, code]',\n                path: [],\n                type: 'object.and',\n                context: {\n                    present: ['txt'],\n                    presentWithLabels: ['txt'],\n                    missing: ['upc', 'code'],\n                    missingWithLabels: ['upc', 'code'],\n                    label: 'value',\n                    value: { txt: 'x' }\n                }\n            }]);\n\n            Helper.validate(schema, [\n                [{}, true],\n                [{ upc: null }, false, {\n                    message: '\"value\" contains [upc] without its required peers [txt, code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['upc'],\n                        presentWithLabels: ['upc'],\n                        missing: ['txt', 'code'],\n                        missingWithLabels: ['txt', 'code'],\n                        label: 'value',\n                        value: { upc: null }\n                    }\n                }],\n                [{ upc: 'test' }, false, {\n                    message: '\"value\" contains [upc] without its required peers [txt, code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['upc'],\n                        presentWithLabels: ['upc'],\n                        missing: ['txt', 'code'],\n                        missingWithLabels: ['txt', 'code'],\n                        label: 'value',\n                        value: { upc: 'test' }\n                    }\n                }],\n                [{ txt: null }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test' }, false, {\n                    message: '\"value\" contains [txt] without its required peers [upc, code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt'],\n                        presentWithLabels: ['txt'],\n                        missing: ['upc', 'code'],\n                        missingWithLabels: ['upc', 'code'],\n                        label: 'value',\n                        value: { txt: 'test' }\n                    }\n                }],\n                [{ code: null }, false, {\n                    message: '\"code\" must be a number',\n                    path: ['code'],\n                    type: 'number.base',\n                    context: { label: 'code', key: 'code', value: null }\n                }],\n                [{ code: 123 }, false, {\n                    message: '\"value\" contains [code] without its required peers [txt, upc]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['code'],\n                        presentWithLabels: ['code'],\n                        missing: ['txt', 'upc'],\n                        missingWithLabels: ['txt', 'upc'],\n                        label: 'value',\n                        value: { code: 123 }\n                    }\n                }],\n                [{ txt: 'test', upc: null }, false, {\n                    message: '\"value\" contains [txt, upc] without its required peers [code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        missing: ['code'],\n                        missingWithLabels: ['code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: null }\n                    }\n                }],\n                [{ txt: 'test', upc: '' }, false, {\n                    message: '\"value\" contains [txt, upc] without its required peers [code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        missing: ['code'],\n                        missingWithLabels: ['code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: '' }\n                    }\n                }],\n                [{ txt: '', upc: 'test' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: null, upc: 'test' }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: undefined, upc: 'test' }, false, {\n                    message: '\"value\" contains [upc] without its required peers [txt, code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['upc'],\n                        presentWithLabels: ['upc'],\n                        missing: ['txt', 'code'],\n                        missingWithLabels: ['txt', 'code'],\n                        label: 'value',\n                        value: { txt: undefined, upc: 'test' }\n                    }\n                }],\n                [{ txt: 'test', upc: undefined }, false, {\n                    message: '\"value\" contains [txt] without its required peers [upc, code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt'],\n                        presentWithLabels: ['txt'],\n                        missing: ['upc', 'code'],\n                        missingWithLabels: ['upc', 'code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: undefined }\n                    }\n                }],\n                [{ txt: 'test', upc: '' }, false, {\n                    message: '\"value\" contains [txt, upc] without its required peers [code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        missing: ['code'],\n                        missingWithLabels: ['code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: '' }\n                    }\n                }],\n                [{ txt: 'test', upc: null }, false, {\n                    message: '\"value\" contains [txt, upc] without its required peers [code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        missing: ['code'],\n                        missingWithLabels: ['code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: null }\n                    }\n                }],\n                [{ txt: '', upc: undefined }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: undefined, code: 999 }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: undefined, code: undefined }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: '' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test', upc: 'test' }, false, {\n                    message: '\"value\" contains [txt, upc] without its required peers [code]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        missing: ['code'],\n                        missingWithLabels: ['code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: 'test' }\n                    }\n                }],\n                [{ txt: 'test', upc: 'test', code: 322 }, true],\n                [{ txt: 'test', upc: null, code: 322 }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels","suites":["object","and()"],"updatePoint":{"line":958,"column":26},"line":958,"code":"        it('applies labels', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            }).and('a', 'b');\n            Helper.validate(schema, [[{ a: 1 }, false, {\n                message: '\"value\" contains [first] without its required peers [second]',\n                path: [],\n                type: 'object.and',\n                context: {\n                    present: ['a'],\n                    presentWithLabels: ['first'],\n                    missing: ['b'],\n                    missingWithLabels: ['second'],\n                    label: 'value',\n                    value: { a: 1 }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","and()"],"updatePoint":{"line":979,"column":33},"line":979,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            }).and('a', 'b.c');\n\n            const sampleObject = { a: 'test', b: { c: 'test2' } };\n            const sampleObject2 = { a: 'test', b: { d: 80 } };\n\n            Helper.validate(schema, [\n                [sampleObject, true],\n                [sampleObject2, false, {\n                    message: '\"value\" contains [a] without its required peers [b.c]',\n                    path: [],\n                    type: 'object.and',\n                    context: {\n                        present: ['a'],\n                        presentWithLabels: ['a'],\n                        missing: ['b.c'],\n                        missingWithLabels: ['b.c'],\n                        label: 'value',\n                        value: sampleObject2\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","and()"],"updatePoint":{"line":1008,"column":43},"line":1008,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .and('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: Object.assign(() => { }, { c: 'test2' }) }, true, Helper.skip],\n                [{ a: 'test', b: Object.assign(() => { }, { d: 80 }) }, false, '\"value\" contains [a] without its required peers [b.c]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object","and()"],"updatePoint":{"line":1023,"column":46},"line":1023,"code":"        it('applies labels with nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .and('a', 'b.c');\n\n            const error = schema.validate({ a: 1 }).error;\n            expect(error).to.be.an.error('\"value\" contains [first] without its required peers [b.second]');\n            expect(error.details).to.equal([{\n                message: '\"value\" contains [first] without its required peers [b.second]',\n                path: [],\n                type: 'object.and',\n                context: {\n                    present: ['a'],\n                    presentWithLabels: ['first'],\n                    missing: ['b.c'],\n                    missingWithLabels: ['b.second'],\n                    label: 'value',\n                    value: { a: 1 }\n                }\n            }]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with invalid nested peers","suites":["object","and()"],"updatePoint":{"line":1051,"column":52},"line":1051,"code":"        it('applies labels with invalid nested peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .and('a', 'c.d');\n\n            Helper.validate(schema, [[{ a: 1, b: { d: 1 } }, false, {\n                message: '\"value\" contains [first] without its required peers [c.d]',\n                path: [],\n                type: 'object.and',\n                context: {\n                    present: ['a'],\n                    presentWithLabels: ['first'],\n                    missing: ['c.d'],\n                    missingWithLabels: ['c.d'],\n                    label: 'value',\n                    value: { a: 1, b: { d: 1 } }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should append schema","suites":["object","append()"],"updatePoint":{"line":1080,"column":32},"line":1080,"code":"        it('should append schema', () => {\n\n            const schema = Joi.object()\n                .keys({ a: Joi.string() })\n                .append({ b: Joi.string() });\n\n            Helper.validate(schema, [[{ a: 'x', b: 'y' }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should not change schema if it is null","suites":["object","append()"],"updatePoint":{"line":1089,"column":50},"line":1089,"code":"        it('should not change schema if it is null', () => {\n\n            const schema = Joi.object()\n                .keys({ a: Joi.string() })\n                .append(null);\n\n            Helper.validate(schema, [[{ a: 'x' }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should not change schema if it is undefined","suites":["object","append()"],"updatePoint":{"line":1098,"column":55},"line":1098,"code":"        it('should not change schema if it is undefined', () => {\n\n            const schema = Joi.object()\n                .keys({ a: Joi.string() })\n                .append(undefined);\n\n            Helper.validate(schema, [[{ a: 'x' }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should not change schema if it is empty-object","suites":["object","append()"],"updatePoint":{"line":1107,"column":58},"line":1107,"code":"        it('should not change schema if it is empty-object', () => {\n\n            const schema = Joi.object()\n                .keys({ a: Joi.string() })\n                .append({});\n\n            Helper.validate(schema, [[{ a: 'x' }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"shows path to errors in schema","suites":["object","assert()"],"updatePoint":{"line":1119,"column":42},"line":1119,"code":"        it('shows path to errors in schema', () => {\n\n            expect(() => {\n\n                Joi.object().assert('.a.b', {\n                    a: {\n                        b: {\n                            c: {\n                                d: undefined\n                            }\n                        }\n                    }\n                });\n            }).to.throw('Invalid undefined schema (a.b.c.d)');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"shows errors in schema","suites":["object","assert()"],"updatePoint":{"line":1135,"column":34},"line":1135,"code":"        it('shows errors in schema', () => {\n\n            expect(() => {\n\n                Joi.object().assert('.a.b', undefined);\n            }).to.throw('Invalid undefined schema');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates upwards reference","suites":["object","assert()"],"updatePoint":{"line":1143,"column":39},"line":1143,"code":"        it('validates upwards reference', () => {\n\n            const schema = Joi.object({\n                a: {\n                    b: Joi.string(),\n                    c: Joi.number()\n                },\n                d: {\n                    e: Joi.any()\n                }\n            })\n                .assert(Joi.ref('/d/e', { separator: '/' }), Joi.ref('a.c'), 'equal to a/c');\n\n            Helper.validate(schema, [[{ a: { b: 'x', c: 5 }, d: { e: 6 } }, false, '\"value\" is invalid because \"d/e\" failed to equal to a/c']]);\n\n            Helper.validate(schema, [\n                [{ a: { b: 'x', c: 5 }, d: { e: 5 } }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates upwards reference with implicit context","suites":["object","assert()"],"updatePoint":{"line":1163,"column":61},"line":1163,"code":"        it('validates upwards reference with implicit context', () => {\n\n            const ref = Joi.ref('.d.e');\n            const schema = Joi.object({\n                a: {\n                    b: Joi.string(),\n                    c: Joi.number()\n                },\n                d: {\n                    e: Joi.any()\n                }\n            })\n                .assert(ref, Joi.ref('a.c'), 'equal to a.c');\n\n            Helper.validate(schema, [\n                [{ a: { b: 'x', c: 5 }, d: { e: 6 } }, false, {\n                    message: '\"value\" is invalid because \"d.e\" failed to equal to a.c',\n                    path: [],\n                    type: 'object.assert',\n                    context: {\n                        subject: ref,\n                        message: 'equal to a.c',\n                        label: 'value',\n                        value: { a: { b: 'x', c: 5 }, d: { e: 6 } }\n                    }\n                }],\n                [{ a: { b: 'x', c: 5 }, d: { e: 5 } }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"support own keys","suites":["object","assert()"],"updatePoint":{"line":1193,"column":28},"line":1193,"code":"        it('support own keys', () => {\n\n            const subject = Joi.ref('.a');\n            const schema = Joi.object({\n                a: Joi.number(),\n                d: {\n                    e: Joi.any()\n                }\n            })\n                .assert(subject, Joi.ref('d.e'), 'equal to d.e');\n\n            Helper.validate(schema, [\n                [{ a: 5, d: { e: 5 } }, true],\n                [{ a: 6, d: { e: 5 } }, false, {\n                    message: '\"value\" is invalid because \"a\" failed to equal to d.e',\n                    path: [],\n                    type: 'object.assert',\n                    context: {\n                        subject,\n                        message: 'equal to d.e',\n                        label: 'value',\n                        value: { a: 6, d: { e: 5 } }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows root level context ref","suites":["object","assert()"],"updatePoint":{"line":1220,"column":41},"line":1220,"code":"        it('allows root level context ref', () => {\n\n            expect(() => {\n\n                Joi.object({\n                    a: {\n                        b: Joi.string(),\n                        c: Joi.number()\n                    },\n                    d: {\n                        e: Joi.any()\n                    }\n                })\n                    .assert('$a', Joi.ref('d.e'), 'equal to d.e');\n            }).to.not.throw();\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"provides a default message for failed assertions","suites":["object","assert()"],"updatePoint":{"line":1237,"column":60},"line":1237,"code":"        it('provides a default message for failed assertions', () => {\n\n            const ref = Joi.ref('.d.e');\n            const schema = Joi.object({\n                a: {\n                    b: Joi.string(),\n                    c: Joi.number()\n                },\n                d: {\n                    e: Joi.any()\n                }\n            }).assert(ref, Joi.boolean());\n\n            Helper.validate(schema, [[{ d: { e: [] } }, false, {\n                message: '\"value\" is invalid because \"d.e\" failed to pass the assertion test',\n                path: [],\n                type: 'object.assert',\n                context: {\n                    subject: ref,\n                    message: undefined,\n                    label: 'value',\n                    value: { d: { e: [] } }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"works with keys()","suites":["object","assert()"],"updatePoint":{"line":1263,"column":29},"line":1263,"code":"        it('works with keys()', () => {\n\n            const schema = Joi.object({ a: { b: Joi.any() } })\n                .min(2)\n                .assert('.a.b', Joi.number())\n                .keys({ b: { c: Joi.any() } })\n                .assert('.b.c', Joi.number());\n\n            Helper.validate(schema, [[{ a: { b: 1 }, b: { c: 2 } }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses templates","suites":["object","assert()"],"updatePoint":{"line":1274,"column":26},"line":1274,"code":"        it('uses templates', () => {\n\n            const subject = Joi.x('{.a || .b || .c}');\n            const schema = Joi.object({\n                a: Joi.boolean(),\n                b: Joi.boolean(),\n                c: Joi.boolean()\n            })\n                .assert(subject, true, 'at least one key must be true');\n\n            Helper.validate(schema, [\n                [undefined, true],\n                [{ a: true, b: true, c: true }, true],\n                [{ a: true, b: false, c: false }, true],\n                [{ a: false, b: true, c: false }, true],\n                [{ a: false, b: false, c: true }, true],\n                [{ a: false, b: false, c: false }, false, {\n                    message: '\"value\" is invalid because at least one key must be true',\n                    path: [],\n                    type: 'object.assert',\n                    context: {\n                        subject,\n                        message: 'at least one key must be true',\n                        label: 'value',\n                        value: { a: false, b: false, c: false }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"casts value to map","suites":["object","cast()"],"updatePoint":{"line":1307,"column":30},"line":1307,"code":"        it('casts value to map', () => {\n\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number() }).cast('map');\n            expect(schema.validate({ a: '1', b: '2' }).value).to.equal(new Map([['a', 1], ['b', 2]]));\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"ignores null","suites":["object","cast()"],"updatePoint":{"line":1313,"column":24},"line":1313,"code":"        it('ignores null', () => {\n\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number() }).allow(null).cast('map');\n            Helper.validate(schema, [[null, true, null]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"ignores string","suites":["object","cast()"],"updatePoint":{"line":1319,"column":26},"line":1319,"code":"        it('ignores string', () => {\n\n            const schema = Joi.object({ a: Joi.number(), b: Joi.number() }).allow('x').cast('map');\n            Helper.validate(schema, [['x', true, 'x']]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"does not leak casts to any","suites":["object","cast()"],"updatePoint":{"line":1325,"column":38},"line":1325,"code":"        it('does not leak casts to any', () => {\n\n            expect(() => Joi.any().cast('map')).to.throw('Type any does not support casting to map');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"return empty description when no schema defined","suites":["object","describe()"],"updatePoint":{"line":1333,"column":59},"line":1333,"code":"        it('return empty description when no schema defined', () => {\n\n            const schema = Joi.object();\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'object'\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"describes patterns","suites":["object","describe()"],"updatePoint":{"line":1342,"column":30},"line":1342,"code":"        it('describes patterns', () => {\n\n            const schema = Joi.object({\n                a: Joi.string()\n            }).pattern(/\\w\\d/i, Joi.boolean());\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'string'\n                    }\n                },\n                patterns: [\n                    {\n                        regex: '/\\\\w\\\\d/i',\n                        rule: {\n                            type: 'boolean'\n                        }\n                    }\n                ]\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"describes patterns with schema","suites":["object","describe()"],"updatePoint":{"line":1366,"column":42},"line":1366,"code":"        it('describes patterns with schema', () => {\n\n            const schema = Joi.object({\n                a: Joi.string()\n            }).pattern(Joi.string().uuid({ version: 'uuidv4' }), Joi.boolean());\n\n            expect(schema.describe()).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'string'\n                    }\n                },\n                patterns: [\n                    {\n                        schema: {\n                            rules: [{\n                                args: { options: { version: 'uuidv4' } },\n                                name: 'guid'\n                            }],\n                            type: 'string'\n                        },\n                        rule: {\n                            type: 'boolean'\n                        }\n                    }\n                ]\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses constructor name for default type name","suites":["object","instance()"],"updatePoint":{"line":1399,"column":55},"line":1399,"code":"        it('uses constructor name for default type name', () => {\n\n            const Foo = function Foo() {\n            };\n\n            const schema = Joi.object().instance(Foo);\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must be an instance of \"Foo\"',\n                path: [],\n                type: 'object.instance',\n                context: { type: 'Foo', label: 'value', value: {} }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses custom type name if supplied","suites":["object","instance()"],"updatePoint":{"line":1413,"column":45},"line":1413,"code":"        it('uses custom type name if supplied', () => {\n\n            const Foo = function () {\n            };\n\n            const schema = Joi.object().instance(Foo, 'Bar');\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must be an instance of \"Bar\"',\n                path: [],\n                type: 'object.instance',\n                context: { type: 'Bar', label: 'value', value: {} }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"overrides constructor name with custom name","suites":["object","instance()"],"updatePoint":{"line":1427,"column":55},"line":1427,"code":"        it('overrides constructor name with custom name', () => {\n\n            const Foo = function Foo() {\n            };\n\n            const schema = Joi.object().instance(Foo, 'Bar');\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must be an instance of \"Bar\"',\n                path: [],\n                type: 'object.instance',\n                context: { type: 'Bar', label: 'value', value: {} }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws when constructor is not a function","suites":["object","instance()"],"updatePoint":{"line":1441,"column":53},"line":1441,"code":"        it('throws when constructor is not a function', () => {\n\n            expect(() => Joi.object().instance('')).to.throw('constructor must be a function');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses the constructor name in the schema description","suites":["object","instance()"],"updatePoint":{"line":1446,"column":63},"line":1446,"code":"        it('uses the constructor name in the schema description', () => {\n\n            const description = Joi.object().instance(RegExp).describe();\n\n            expect(description.rules[0]).to.equal({ name: 'instance', args: { name: 'RegExp', constructor: RegExp } });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses the constructor reference in the schema description","suites":["object","instance()"],"updatePoint":{"line":1453,"column":68},"line":1453,"code":"        it('uses the constructor reference in the schema description', () => {\n\n            const Foo = function Foo() { };\n\n            const description = Joi.object().instance(Foo).describe();\n\n            expect(new Foo()).to.be.an.instanceof(description.rules[0].args.constructor);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows any key","suites":["object","keys()"],"updatePoint":{"line":1465,"column":26},"line":1465,"code":"        it('allows any key', () => {\n\n            const a = Joi.object({ a: 4 });\n            const b = a.keys();\n            Helper.validate(a, [[{ b: 3 }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b', value: 3 }\n            }]]);\n\n            Helper.validate(b, [[{ b: 3 }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"forbids all keys","suites":["object","keys()"],"updatePoint":{"line":1479,"column":28},"line":1479,"code":"        it('forbids all keys', () => {\n\n            const a = Joi.object();\n            const b = a.keys({});\n            Helper.validate(a, [[{ b: 3 }, true]]);\n            Helper.validate(b, [[{ b: 3 }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b', value: 3 }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"adds to existing keys","suites":["object","keys()"],"updatePoint":{"line":1492,"column":33},"line":1492,"code":"        it('adds to existing keys', () => {\n\n            const a = Joi.object({ a: 1 });\n            const b = a.keys({ b: 2 });\n            Helper.validate(a, [[{ a: 1, b: 2 }, false, {\n                message: '\"b\" is not allowed',\n                path: ['b'],\n                type: 'object.unknown',\n                context: { child: 'b', label: 'b', key: 'b', value: 2 }\n            }]]);\n\n            Helper.validate(b, [[{ a: 1, b: 2 }, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"overrides existing keys","suites":["object","keys()"],"updatePoint":{"line":1506,"column":35},"line":1506,"code":"        it('overrides existing keys', () => {\n\n            const a = Joi.object({ a: Joi.number().valid(1) });\n            const b = a.keys({ a: Joi.string() });\n\n            Helper.validate(a, [\n                [{ a: 1 }, true, { a: 1 }],\n                [{ a: '1' }, true, { a: 1 }],\n                [{ a: '2' }, false, {\n                    message: '\"a\" must be [1]',\n                    path: ['a'],\n                    type: 'any.only',\n                    context: { value: 2, valids: [1], label: 'a', key: 'a' }\n                }]\n            ]);\n\n            Helper.validate(b, [\n                [{ a: 1 }, false, {\n                    message: '\"a\" must be a string',\n                    path: ['a'],\n                    type: 'string.base',\n                    context: { value: 1, label: 'a', key: 'a' }\n                }],\n                [{ a: '1' }, true, { a: '1' }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"strips keys flagged with strip","suites":["object","keys()"],"updatePoint":{"line":1533,"column":42},"line":1533,"code":"        it('strips keys flagged with strip', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().strip(),\n                b: Joi.string()\n            });\n\n            Helper.validate(schema, [[{ a: 'test', b: 'test' }, true, { b: 'test' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"strips keys after validation","suites":["object","keys()"],"updatePoint":{"line":1543,"column":40},"line":1543,"code":"        it('strips keys after validation', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().strip(),\n                b: Joi.string().default(Joi.ref('a'))\n            });\n\n            Helper.validate(schema, [[{ a: 'test' }, true, { b: 'test' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"strips keys while preserving transformed values","suites":["object","keys()"],"updatePoint":{"line":1553,"column":59},"line":1553,"code":"        it('strips keys while preserving transformed values', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({\n                a: Joi.number().strip(),\n                b: Joi.number().min(ref)\n            });\n\n            Helper.validate(schema, [\n                [{ a: '1', b: '2' }, true, { b: 2 }],\n                [{ a: '1', b: '0' }, false, {\n                    message: '\"b\" must be greater than or equal to ref:a',\n                    path: ['b'],\n                    type: 'number.min',\n                    context: { limit: ref, value: 0, label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"does not alter the original object when stripping keys","suites":["object","keys()"],"updatePoint":{"line":1572,"column":66},"line":1572,"code":"        it('does not alter the original object when stripping keys', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().strip(),\n                b: Joi.string()\n            });\n\n            const valid = {\n                a: 'test',\n                b: 'test'\n            };\n\n            expect(schema.validate(valid)).to.equal({ value: { b: 'test' } });\n            expect(valid.a).to.equal('test');\n            expect(valid.b).to.equal('test');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should strip from an alternative","suites":["object","keys()"],"updatePoint":{"line":1589,"column":44},"line":1589,"code":"        it('should strip from an alternative', () => {\n\n            const schema = Joi.object({\n                a: [Joi.boolean().strip()]\n            });\n\n            Helper.validate(schema, [[{ a: true }, true, {}]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"keeps keys in ref order","suites":["object","keys()"],"updatePoint":{"line":1598,"column":35},"line":1598,"code":"        it('keeps keys in ref order', () => {\n\n            const schema = Joi.object({\n                type: Joi.string().required(),\n\n                set: Joi.boolean()\n                    .when('flag', { is: true, then: false }),\n\n                flag: Joi.boolean()\n            })\n                .when('.type', [\n                    { is: 'a', then: Joi.object({ flag: false }) }\n                ]);\n\n            Helper.validate(schema, [\n                [{ flag: true }, false, '\"type\" is required'],\n                [{ flag: true }, false, '\"type\" is required'],\n                [{ type: 'a', flag: true }, false, '\"flag\" must be [false]'],\n                [{ type: 'a', set: true, flag: true }, false, '\"flag\" must be [false]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws when length is not a number","suites":["object","length()"],"updatePoint":{"line":1623,"column":46},"line":1623,"code":"        it('throws when length is not a number', () => {\n\n            expect(() => {\n\n                Joi.object().length('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["object","max()"],"updatePoint":{"line":1634,"column":45},"line":1634,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.object().max('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["object","min()"],"updatePoint":{"line":1645,"column":45},"line":1645,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.object().min('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates nand()","suites":["object","nand()"],"updatePoint":{"line":1656,"column":28},"line":1656,"code":"        it('validates nand()', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string().allow(null, ''),\n                code: Joi.number()\n            })\n                .nand('txt', 'upc', 'code');\n\n            Helper.validate(schema, { abortEarly: false }, [[{ txt: 'x', upc: 'y', code: 123 }, false, {\n                message: '\"txt\" must not exist simultaneously with [upc, code]',\n                details: [{\n                    message: '\"txt\" must not exist simultaneously with [upc, code]',\n                    path: [],\n                    type: 'object.nand',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peers: ['upc', 'code'],\n                        peersWithLabels: ['upc', 'code'],\n                        label: 'value',\n                        value: { txt: 'x', upc: 'y', code: 123 }\n                    }\n                }]\n            }]]);\n\n            Helper.validate(schema, [\n                [{}, true],\n                [{ upc: null }, true],\n                [{ upc: 'test' }, true],\n                [{ txt: 'test' }, true],\n                [{ code: 123 }, true],\n                [{ txt: 'test', upc: null }, true],\n                [{ txt: 'test', upc: '' }, true],\n                [{ txt: undefined, upc: 'test' }, true],\n                [{ txt: 'test', upc: undefined }, true],\n                [{ txt: 'test', upc: '' }, true],\n                [{ txt: 'test', upc: null }, true],\n                [{ txt: 'test', upc: undefined, code: 999 }, true],\n                [{ txt: 'test', upc: 'test' }, true],\n                [{ txt: 'test', upc: 'test', code: 322 }, false, {\n                    message: '\"txt\" must not exist simultaneously with [upc, code]',\n                    path: [],\n                    type: 'object.nand',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peers: ['upc', 'code'],\n                        peersWithLabels: ['upc', 'code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: 'test', code: 322 }\n                    }\n                }],\n                [{ txt: 'test', upc: null, code: 322 }, false, {\n                    message: '\"txt\" must not exist simultaneously with [upc, code]',\n                    path: [],\n                    type: 'object.nand',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peers: ['upc', 'code'],\n                        peersWithLabels: ['upc', 'code'],\n                        label: 'value',\n                        value: { txt: 'test', upc: null, code: 322 }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels","suites":["object","nand()"],"updatePoint":{"line":1725,"column":26},"line":1725,"code":"        it('applies labels', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            })\n                .nand('a', 'b');\n\n            Helper.validate(schema, [[{ a: 1, b: 'b' }, false, {\n                message: '\"first\" must not exist simultaneously with [second]',\n                path: [],\n                type: 'object.nand',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peers: ['b'],\n                    peersWithLabels: ['second'],\n                    label: 'value',\n                    value: { a: 1, b: 'b' }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","nand()"],"updatePoint":{"line":1748,"column":33},"line":1748,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .nand('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: { d: 80 } }, true],\n                [{ a: 'test', b: { c: 'test2' } }, false, {\n                    message: '\"a\" must not exist simultaneously with [b.c]',\n                    path: [],\n                    type: 'object.nand',\n                    context: {\n                        main: 'a',\n                        mainWithLabel: 'a',\n                        peers: ['b.c'],\n                        peersWithLabels: ['b.c'],\n                        label: 'value',\n                        value: { a: 'test', b: { c: 'test2' } }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","nand()"],"updatePoint":{"line":1775,"column":43},"line":1775,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .nand('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: Object.assign(() => { }, { d: 80 }) }, true, Helper.skip],\n                [{ a: 'test', b: Object.assign(() => { }, { c: 'test2' }) }, false, '\"a\" must not exist simultaneously with [b.c]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object","nand()"],"updatePoint":{"line":1790,"column":46},"line":1790,"code":"        it('applies labels with nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .nand('a', 'b.c');\n\n            const error = schema.validate({ a: 1, b: { c: 'c' } }).error;\n            expect(error).to.be.an.error('\"first\" must not exist simultaneously with [b.second]');\n            expect(error.details).to.equal([{\n                message: '\"first\" must not exist simultaneously with [b.second]',\n                path: [],\n                type: 'object.nand',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peers: ['b.c'],\n                    peersWithLabels: ['b.second'],\n                    label: 'value',\n                    value: { a: 1, b: { c: 'c' } }\n                }\n            }]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"does not require optional numbers","suites":["object","optional()"],"updatePoint":{"line":1821,"column":45},"line":1821,"code":"        it('does not require optional numbers', () => {\n\n            const config = {\n                position: Joi.number(),\n                suggestion: Joi.string()\n            };\n\n            Helper.validate(Joi.compile(config), [\n                [{ suggestion: 'something' }, true],\n                [{ position: 1 }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"does not require optional objects","suites":["object","optional()"],"updatePoint":{"line":1834,"column":45},"line":1834,"code":"        it('does not require optional objects', () => {\n\n            const config = {\n                position: Joi.number(),\n                suggestion: Joi.object()\n            };\n\n            Helper.validate(Joi.compile(config), [\n                [{ suggestion: {} }, true],\n                [{ position: 1 }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates or()","suites":["object","or()"],"updatePoint":{"line":1850,"column":26},"line":1850,"code":"        it('validates or()', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string().allow(null, ''),\n                code: Joi.number()\n            }).or('txt', 'upc', 'code');\n\n            Helper.validate(schema, { abortEarly: false }, [[{}, false, {\n                message: '\"value\" must contain at least one of [txt, upc, code]',\n                details: [{\n                    message: '\"value\" must contain at least one of [txt, upc, code]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['txt', 'upc', 'code'],\n                        peersWithLabels: ['txt', 'upc', 'code'],\n                        label: 'value',\n                        value: {}\n                    }\n                }]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ upc: null }, true],\n                [{ upc: 'test' }, true],\n                [{ txt: null }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test' }, true],\n                [{ code: null }, false, {\n                    message: '\"code\" must be a number',\n                    path: ['code'],\n                    type: 'number.base',\n                    context: { label: 'code', key: 'code', value: null }\n                }],\n                [{ code: 123 }, true],\n                [{ txt: 'test', upc: null }, true],\n                [{ txt: 'test', upc: '' }, true],\n                [{ txt: '', upc: 'test' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: null, upc: 'test' }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: undefined, upc: 'test' }, true],\n                [{ txt: 'test', upc: undefined }, true],\n                [{ txt: 'test', upc: '' }, true],\n                [{ txt: 'test', upc: null }, true],\n                [{ txt: '', upc: undefined }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: undefined, code: 999 }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: undefined, code: undefined }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: '' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test', upc: 'test' }, true],\n                [{ txt: 'test', upc: 'test', code: 322 }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when a parameter is not a string","suites":["object","or()"],"updatePoint":{"line":1937,"column":51},"line":1937,"code":"        it('errors when a parameter is not a string', () => {\n\n            let error;\n            try {\n                Joi.object().or({});\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n\n            try {\n                Joi.object().or(123);\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors multiple levels deep","suites":["object","or()"],"updatePoint":{"line":1961,"column":39},"line":1961,"code":"        it('errors multiple levels deep', () => {\n\n            const schema = Joi.object({\n                a: {\n                    b: Joi.object().or('x', 'y')\n                }\n            });\n\n            Helper.validate(schema, [[{ a: { b: { c: 1 } } }, false, {\n                message: '\"a.b\" must contain at least one of [x, y]',\n                path: ['a', 'b'],\n                type: 'object.missing',\n                context: {\n                    peers: ['x', 'y'],\n                    peersWithLabels: ['x', 'y'],\n                    label: 'a.b',\n                    key: 'b',\n                    value: { c: 1 }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels","suites":["object","or()"],"updatePoint":{"line":1983,"column":26},"line":1983,"code":"        it('applies labels', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            }).or('a', 'b');\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must contain at least one of [first, second]',\n                path: [],\n                type: 'object.missing',\n                context: {\n                    peers: ['a', 'b'],\n                    peersWithLabels: ['first', 'second'],\n                    label: 'value',\n                    value: {}\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","or()"],"updatePoint":{"line":2002,"column":33},"line":2002,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string() }),\n                d: Joi.number()\n            }).or('a', 'b.c');\n\n            const sampleObject = { b: { c: 'bc' } };\n            const sampleObject2 = { d: 90 };\n\n            Helper.validate(schema, [\n                [sampleObject, true],\n                [sampleObject2, false, {\n                    message: '\"value\" must contain at least one of [a, b.c]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['a', 'b.c'],\n                        peersWithLabels: ['a', 'b.c'],\n                        label: 'value',\n                        value: sampleObject2\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","or()"],"updatePoint":{"line":2029,"column":43},"line":2029,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string() }),\n                d: Joi.number()\n            })\n                .or('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ b: Object.assign(() => { }, { c: 'bc' }) }, true, Helper.skip],\n                [{ d: 90 }, false, {\n                    message: '\"value\" must contain at least one of [a, b.c]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['a', 'b.c'],\n                        peersWithLabels: ['a', 'b.c'],\n                        label: 'value',\n                        value: { d: 90 }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object","or()"],"updatePoint":{"line":2054,"column":46},"line":2054,"code":"        it('applies labels with nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .or('a', 'b.c');\n\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must contain at least one of [first, b.second]',\n                path: [],\n                type: 'object.missing',\n                context: {\n                    peers: ['a', 'b.c'],\n                    peersWithLabels: ['first', 'b.second'],\n                    label: 'value',\n                    value: {}\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when a parameter is not a string","suites":["object","oxor()"],"updatePoint":{"line":2081,"column":51},"line":2081,"code":"        it('errors when a parameter is not a string', () => {\n\n            let error;\n            try {\n                Joi.object().oxor({});\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n\n            try {\n                Joi.object().oxor(123);\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows none of optional peers","suites":["object","oxor()"],"updatePoint":{"line":2105,"column":41},"line":2105,"code":"        it('allows none of optional peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.string()\n            }).oxor('a', 'b');\n\n            Helper.validate(schema, [[{}, true]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with too many peers","suites":["object","oxor()"],"updatePoint":{"line":2115,"column":46},"line":2115,"code":"        it('applies labels with too many peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            })\n                .oxor('a', 'b');\n\n            Helper.validate(schema, [[{ a: 1, b: 'b' }, false, {\n                message: '\"value\" contains a conflict between optional exclusive peers [first, second]',\n                path: [],\n                type: 'object.oxor',\n                context: {\n                    peers: ['a', 'b'],\n                    peersWithLabels: ['first', 'second'],\n                    present: ['a', 'b'],\n                    presentWithLabels: ['first', 'second'],\n                    label: 'value',\n                    value: { a: 1, b: 'b' }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","oxor()"],"updatePoint":{"line":2138,"column":33},"line":2138,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .oxor('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: { d: 80 } }, true],\n                [{ a: 'test', b: { c: 'test2' } }, false, {\n                    message: '\"value\" contains a conflict between optional exclusive peers [a, b.c]',\n                    path: [],\n                    type: 'object.oxor',\n                    context: {\n                        peers: ['a', 'b.c'],\n                        peersWithLabels: ['a', 'b.c'],\n                        present: ['a', 'b.c'],\n                        presentWithLabels: ['a', 'b.c'],\n                        label: 'value',\n                        value: { a: 'test', b: { c: 'test2' } }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","oxor()"],"updatePoint":{"line":2165,"column":43},"line":2165,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .oxor('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: Object.assign(() => { }, { d: 80 }) }, true, Helper.skip],\n                [{ a: 'test', b: Object.assign(() => { }, { c: 'test2' }) }, false, '\"value\" contains a conflict between optional exclusive peers [a, b.c]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"shows path to errors in schema","suites":["object","pattern()"],"updatePoint":{"line":2183,"column":42},"line":2183,"code":"        it('shows path to errors in schema', () => {\n\n            expect(() => {\n\n                Joi.object().pattern(/.*/, {\n                    a: {\n                        b: {\n                            c: {\n                                d: undefined\n                            }\n                        }\n                    }\n                });\n            }).to.throw('Invalid undefined schema (a.b.c.d)');\n\n            expect(() => {\n\n                Joi.object().pattern(/.*/, Symbol('x'));\n            }).to.throw('Invalid schema content: symbol');\n\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates unknown keys using a regex pattern","suites":["object","pattern()"],"updatePoint":{"line":2205,"column":56},"line":2205,"code":"        it('validates unknown keys using a regex pattern', () => {\n\n            const schema = Joi.object({\n                a: Joi.number()\n            }).pattern(/\\d+/, Joi.boolean()).pattern(/\\w\\w+/, 'x');\n\n            Helper.validate(schema, { abortEarly: false }, [[{ bb: 'y', 5: 'x' }, false, {\n                message: '\"5\" must be a boolean. \"bb\" must be [x]',\n                details: [\n                    {\n                        message: '\"5\" must be a boolean',\n                        path: ['5'],\n                        type: 'boolean.base',\n                        context: { label: '5', key: '5', value: 'x' }\n                    },\n                    {\n                        message: '\"bb\" must be [x]',\n                        path: ['bb'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'bb', key: 'bb' }\n                    }\n                ]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ a: 5 }, true],\n                [{ a: 'x' }, false, {\n                    message: '\"a\" must be a number',\n                    path: ['a'],\n                    type: 'number.base',\n                    context: { label: 'a', key: 'a', value: 'x' }\n                }],\n                [{ b: 'x' }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 'x' }\n                }],\n                [{ bb: 'x' }, true],\n                [{ 5: 'x' }, false, {\n                    message: '\"5\" must be a boolean',\n                    path: ['5'],\n                    type: 'boolean.base',\n                    context: { label: '5', key: '5', value: 'x' }\n                }],\n                [{ 5: false }, true],\n                [{ 5: undefined }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates unknown keys using a schema pattern","suites":["object","pattern()"],"updatePoint":{"line":2255,"column":57},"line":2255,"code":"        it('validates unknown keys using a schema pattern', () => {\n\n            const schema = Joi.object({\n                a: Joi.number()\n            }).pattern(Joi.number().positive(), Joi.boolean())\n                .pattern(Joi.string().length(2), 'x');\n\n            Helper.validate(schema, { abortEarly: false }, [[{ bb: 'y', 5: 'x' }, false, {\n                message: '\"5\" must be a boolean. \"bb\" must be [x]',\n                details: [\n                    {\n                        message: '\"5\" must be a boolean',\n                        path: ['5'],\n                        type: 'boolean.base',\n                        context: { label: '5', key: '5', value: 'x' }\n                    },\n                    {\n                        message: '\"bb\" must be [x]',\n                        path: ['bb'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'bb', key: 'bb' }\n                    }\n                ]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ a: 5 }, true],\n                [{ a: 'x' }, false, {\n                    message: '\"a\" must be a number',\n                    path: ['a'],\n                    type: 'number.base',\n                    context: { label: 'a', key: 'a', value: 'x' }\n                }],\n                [{ b: 'x' }, false, {\n                    message: '\"b\" is not allowed',\n                    path: ['b'],\n                    type: 'object.unknown',\n                    context: { child: 'b', label: 'b', key: 'b', value: 'x' }\n                }],\n                [{ bb: 'x' }, true],\n                [{ 5: 'x' }, false, {\n                    message: '\"5\" must be a boolean',\n                    path: ['5'],\n                    type: 'boolean.base',\n                    context: { label: '5', key: '5', value: 'x' }\n                }],\n                [{ 5: false }, true],\n                [{ 5: undefined }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates unknown keys using a schema pattern with a reference","suites":["object","pattern()"],"updatePoint":{"line":2306,"column":74},"line":2306,"code":"        it('validates unknown keys using a schema pattern with a reference', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object().pattern(Joi.valid(Joi.ref('a')), Joi.boolean())\n            });\n\n            Helper.validate(schema, [\n                [{ a: 'x' }, true],\n                [{ a: 5 }, false, {\n                    message: '\"a\" must be a string',\n                    path: ['a'],\n                    type: 'string.base',\n                    context: { label: 'a', key: 'a', value: 5 }\n                }],\n                [{ b: 'x' }, false, {\n                    message: '\"b\" must be of type object',\n                    path: ['b'],\n                    type: 'object.base',\n                    context: { label: 'b', key: 'b', value: 'x', type: 'object' }\n                }],\n                [{ b: {} }, true],\n                [{ b: { foo: true } }, false, {\n                    message: '\"b.foo\" is not allowed',\n                    path: ['b', 'foo'],\n                    type: 'object.unknown',\n                    context: { child: 'foo', value: true, key: 'foo', label: 'b.foo' }\n                }],\n                [{ a: 'x', b: { foo: true } }, false, {\n                    message: '\"b.foo\" is not allowed',\n                    path: ['b', 'foo'],\n                    type: 'object.unknown',\n                    context: { child: 'foo', value: true, key: 'foo', label: 'b.foo' }\n                }],\n                [{ a: 'x', b: { x: 'y' } }, false, {\n                    message: '\"b.x\" must be a boolean',\n                    path: ['b', 'x'],\n                    type: 'boolean.base',\n                    context: { value: 'y', key: 'x', label: 'b.x' }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates unknown keys using a pattern (nested)","suites":["object","pattern()"],"updatePoint":{"line":2349,"column":59},"line":2349,"code":"        it('validates unknown keys using a pattern (nested)', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    a: Joi.number()\n                }).pattern(/\\d+/, Joi.boolean()).pattern(/\\w\\w+/, 'x')\n            });\n\n            Helper.validate(schema, { abortEarly: false }, [[{ x: { bb: 'y', 5: 'x' } }, false, {\n                message: '\"x.5\" must be a boolean. \"x.bb\" must be [x]',\n                details: [\n                    {\n                        message: '\"x.5\" must be a boolean',\n                        path: ['x', '5'],\n                        type: 'boolean.base',\n                        context: { label: 'x.5', key: '5', value: 'x' }\n                    },\n                    {\n                        message: '\"x.bb\" must be [x]',\n                        path: ['x', 'bb'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'x.bb', key: 'bb' }\n                    }\n                ]\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates unknown keys using a pattern (nested)","suites":["object","pattern()"],"updatePoint":{"line":2376,"column":59},"line":2376,"code":"        it('validates unknown keys using a pattern (nested)', () => {\n\n            const schema = Joi.object({\n                x: Joi.object({\n                    a: Joi.number()\n                }).pattern(Joi.number().positive(), Joi.boolean()).pattern(Joi.string().length(2), 'x')\n            });\n\n            Helper.validate(schema, { abortEarly: false }, [[{\n                x: {\n                    bb: 'y',\n                    5: 'x'\n                }\n            }, false, {\n                message: '\"x.5\" must be a boolean. \"x.bb\" must be [x]',\n                details: [\n                    {\n                        message: '\"x.5\" must be a boolean',\n                        path: ['x', '5'],\n                        type: 'boolean.base',\n                        context: { label: 'x.5', key: '5', value: 'x' }\n                    },\n                    {\n                        message: '\"x.bb\" must be [x]',\n                        path: ['x', 'bb'],\n                        type: 'any.only',\n                        context: { value: 'y', valids: ['x'], label: 'x.bb', key: 'bb' }\n                    }\n                ]\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"ensures keys are also present in another object","suites":["object","pattern()"],"updatePoint":{"line":2408,"column":59},"line":2408,"code":"        it('ensures keys are also present in another object', () => {\n\n            const matches = Joi.in('....b');    // .match .matches .a .object\n            const schema = Joi.object({\n                a: Joi.object()\n                    .pattern(/.*/, Joi.number(), { matches }),\n                b: Joi.object()\n                    .pattern(/.*/, Joi.string())\n            });\n\n            Helper.validate(schema, [\n                [{ a: { x: 1 }, b: { x: 'a' } }, true],\n                [{ a: { v: 1 }, b: { x: 'a', v: 'b' } }, true],\n                [{ a: { x: 1 }, b: { y: 'a' } }, false, {\n                    message: '\"a\" keys failed to match pattern requirements',\n                    path: ['a'],\n                    type: 'object.pattern.match',\n                    context: {\n                        details: [\n                            {\n                                message: '\"a[0]\" must be [ref:....b]',\n                                path: ['a', 0],\n                                type: 'any.only',\n                                context: {\n                                    key: 0,\n                                    label: 'a[0]',\n                                    valids: [matches],\n                                    value: 'x'\n                                }\n                            }\n                        ],\n                        key: 'a',\n                        label: 'a',\n                        matches: ['x'],\n                        message: '\"a[0]\" must be [ref:....b]',\n                        value: { x: 1 }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when using a pattern on empty schema with unknown(false) and regex pattern mismatch","suites":["object","pattern()"],"updatePoint":{"line":2449,"column":102},"line":2449,"code":"        it('errors when using a pattern on empty schema with unknown(false) and regex pattern mismatch', () => {\n\n            const schema = Joi.object().pattern(/\\d/, Joi.number()).unknown(false);\n\n            Helper.validate(schema, { abortEarly: false }, [[{ a: 5 }, false, {\n                message: '\"a\" is not allowed',\n                details: [{\n                    message: '\"a\" is not allowed',\n                    path: ['a'],\n                    type: 'object.unknown',\n                    context: { child: 'a', label: 'a', key: 'a', value: 5 }\n                }]\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when using a pattern on empty schema with unknown(false) and schema pattern mismatch","suites":["object","pattern()"],"updatePoint":{"line":2464,"column":103},"line":2464,"code":"        it('errors when using a pattern on empty schema with unknown(false) and schema pattern mismatch', () => {\n\n            const schema = Joi.object().pattern(Joi.number().positive(), Joi.number()).unknown(false);\n\n            Helper.validate(schema, { abortEarly: false }, [[{ a: 5 }, false, {\n                message: '\"a\" is not allowed',\n                details: [{\n                    message: '\"a\" is not allowed',\n                    path: ['a'],\n                    type: 'object.unknown',\n                    context: { child: 'a', label: 'a', key: 'a', value: 5 }\n                }]\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"reject global and sticky flags from patterns","suites":["object","pattern()"],"updatePoint":{"line":2479,"column":56},"line":2479,"code":"        it('reject global and sticky flags from patterns', () => {\n\n            expect(() => Joi.object().pattern(/a/g, Joi.number())).to.throw('pattern should not use global or sticky mode');\n            expect(() => Joi.object().pattern(/a/y, Joi.number())).to.throw('pattern should not use global or sticky mode');\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows using empty() on values","suites":["object","pattern()"],"updatePoint":{"line":2485,"column":42},"line":2485,"code":"        it('allows using empty() on values', () => {\n\n            const schema = Joi.object().pattern(/a/, Joi.any().empty(null));\n            Helper.validate(schema, [[{ a1: undefined, a2: null, a3: 'test' }, true, { a1: undefined, a2: undefined, a3: 'test' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"compiles if pattern is not regex or schema","suites":["object","pattern()"],"updatePoint":{"line":2491,"column":54},"line":2491,"code":"        it('compiles if pattern is not regex or schema', () => {\n\n            const schema = Joi.object().pattern('x', Joi.boolean());\n            Helper.validate(schema, [\n                [{ x: true }, true],\n                [{ y: true }, false, '\"y\" is not allowed']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows using refs in .valid() schema pattern","suites":["object","pattern()"],"updatePoint":{"line":2500,"column":56},"line":2500,"code":"        it('allows using refs in .valid() schema pattern', () => {\n\n            const schema = Joi.object().pattern(Joi.string().valid(Joi.in('$keys')), Joi.any());\n            expect(schema.validate({ a: 'test' }, { context: { keys: ['a'] } })).to.equal({ value: { a: 'test' } });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"enforces pattern matches rule","suites":["object","pattern()"],"updatePoint":{"line":2506,"column":41},"line":2506,"code":"        it('enforces pattern matches rule', () => {\n\n            const ref1 = Joi.ref('a');              // .matches ..object\n            const ref2 = Joi.x('{a - 1}');\n\n            const schema = Joi.object({\n                a: Joi.number().required()\n            })\n                .pattern(/^x\\d+$/, Joi.boolean(), { matches: Joi.array().length(ref1) })\n                .pattern(/^z\\w+$/, Joi.number())\n                .pattern(/^x\\w+$/, Joi.number(), { matches: Joi.array().max(ref2) });\n\n            Helper.validate(schema, [\n                [{ a: 1, x1: true }, true],\n                [{ a: 2, x1: true, x2: true, xx: 1 }, true],\n                [{ a: 3, x1: true, x2: true, x3: false, xx: 1 }, true],\n                [{ a: 0, x1: true }, false, {\n                    message: '\"value\" keys failed to match pattern requirements',\n                    path: [],\n                    type: 'object.pattern.match',\n                    context: {\n                        message: '\"value\" must contain ref:a items',\n                        label: 'value',\n                        value: { a: 0, x1: true },\n                        matches: ['x1'],\n                        details: [\n                            {\n                                context: {\n                                    label: 'value',\n                                    limit: ref1,\n                                    value: ['x1']\n                                },\n                                message: '\"value\" must contain ref:a items',\n                                path: [],\n                                type: 'array.length'\n                            }\n                        ]\n                    }\n                }],\n                [{ a: 1 }, false, '\"value\" keys failed to match pattern requirements']\n            ]);\n\n            const description = schema.describe();\n            expect(description).to.equal({\n                type: 'object',\n                keys: {\n                    a: {\n                        type: 'number',\n                        flags: {\n                            presence: 'required'\n                        }\n                    }\n                },\n                patterns: [\n                    {\n                        rule: {\n                            type: 'boolean'\n                        },\n                        regex: '/^x\\\\d+$/',\n                        matches: {\n                            type: 'array',\n                            rules: [\n                                {\n                                    name: 'length',\n                                    args: {\n                                        limit: {\n                                            ref: {\n                                                path: ['a']\n                                            }\n                                        }\n                                    }\n                                }\n                            ]\n                        }\n                    },\n                    {\n                        rule: {\n                            type: 'number'\n                        },\n                        regex: '/^z\\\\w+$/'\n                    },\n                    {\n                        rule: {\n                            type: 'number'\n                        },\n                        regex: '/^x\\\\w+$/',\n                        matches: {\n                            type: 'array',\n                            rules: [\n                                {\n                                    name: 'max',\n                                    args: {\n                                        limit: {\n                                            template: '{a - 1}'\n                                        }\n                                    }\n                                }\n                            ]\n                        }\n                    }\n                ]\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"enforces pattern matches rule (abortEarly false)","suites":["object","pattern()"],"updatePoint":{"line":2610,"column":60},"line":2610,"code":"        it('enforces pattern matches rule (abortEarly false)', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().required()\n            })\n                .pattern(/^x\\d+$/, Joi.boolean(), { matches: Joi.array().length(Joi.ref('a')) })\n                .pattern(/^x\\w+$/, Joi.number(), { matches: Joi.array().max(Joi.x('{a - 1}')) });\n\n            const err = schema.validate({ a: 0, x1: true, xx: 1 }, { abortEarly: false }).error;\n            expect(err).to.be.an.error('\"value\" keys failed to match pattern requirements');\n            expect(err.details).to.have.length(2);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"matches matching keys to grandparents","suites":["object","pattern()"],"updatePoint":{"line":2623,"column":49},"line":2623,"code":"        it('matches matching keys to grandparents', () => {\n\n            const hasMatchingGrandparent = (value, { message, state }) => {\n\n                // 0: [ 'b' ]\n                // 1: { b: true }\n                // 2: { match: { b: true } }\n                // 3: { a: { match: { b: true } }, b: { match: { a: true } } }\n\n                if (state.ancestors[3][value] === undefined) {\n                    return message('{{#label}} does not have a matching grandparent');\n                }\n\n                return value;\n            };\n\n            const schema = Joi.object()\n                .pattern(/.*/, Joi.object({\n                    match: Joi.object()\n                        .pattern(/.*/, Joi.boolean(), { matches: hasMatchingGrandparent })\n                }));\n\n            Helper.validate(schema, [\n                [{ a: { match: { b: true } }, b: { match: { a: true } } }, true],\n                [{ a: { match: { b: true } } }, false, {\n                    message: '\"a.match\" keys failed to match pattern requirements',\n                    path: ['a', 'match'],\n                    type: 'object.pattern.match',\n                    context: {\n                        key: 'match',\n                        label: 'a.match',\n                        matches: ['b'],\n                        message: '\"a.match[0]\" does not have a matching grandparent',\n                        value: { b: true },\n                        details: [\n                            {\n                                context: { key: 0, label: 'a.match[0]', value: 'b' },\n                                message: '\"a.match[0]\" does not have a matching grandparent',\n                                path: ['a', 'match', 0],\n                                type: 'custom'\n                            }\n                        ]\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"works with keys()","suites":["object","pattern()"],"updatePoint":{"line":2670,"column":29},"line":2670,"code":"        it('works with keys()', () => {\n\n            const schema = Joi.object()\n                .pattern(/a/, Joi.any())\n                .keys({ b: Joi.any() });\n\n            expect(schema.validate({ a: { b: 1 }, b: { c: 2 } }).error).to.not.exist();\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"supports overlapping patterns","suites":["object","pattern()"],"updatePoint":{"line":2679,"column":41},"line":2679,"code":"        it('supports overlapping patterns', () => {\n\n            const schema = Joi.object()\n                .pattern(/^x/, Joi.number().min(1), { fallthrough: true })\n                .pattern(/^x/, Joi.number().max(10));\n\n            Helper.validate(schema, [\n                [{ x1: 1, x2: 2 }, true],\n                [{ x1: 11 }, false, {\n                    message: '\"x1\" must be less than or equal to 10',\n                    path: ['x1'],\n                    type: 'number.max',\n                    context: { limit: 10, value: 11, label: 'x1', key: 'x1' }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"ignores overlapping patterns","suites":["object","pattern()"],"updatePoint":{"line":2696,"column":40},"line":2696,"code":"        it('ignores overlapping patterns', () => {\n\n            const schema = Joi.object()\n                .pattern(/^x/, Joi.number().min(1))\n                .pattern(/^x/, Joi.number().max(10));\n\n            Helper.validate(schema, [\n                [{ x1: 1, x2: 2 }, true],\n                [{ x1: 11 }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates references","suites":["object","ref()"],"updatePoint":{"line":2711,"column":32},"line":2711,"code":"        it('validates references', () => {\n\n            const schema = Joi.object().ref();\n\n            Helper.validate(schema, [\n                [{}, false, {\n                    message: '\"value\" must be a Joi reference',\n                    path: [],\n                    type: 'object.refType',\n                    context: { label: 'value', value: {} }\n                }],\n                [Joi.ref('a.b'), true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates regular expressions","suites":["object","regex()"],"updatePoint":{"line":2729,"column":41},"line":2729,"code":"        it('validates regular expressions', () => {\n\n            const schema = Joi.object().regex();\n\n            Helper.validate(schema, [\n                [{}, false, {\n                    message: '\"value\" must be a RegExp object',\n                    path: [],\n                    type: 'object.regex',\n                    context: { label: 'value', value: {} }\n                }],\n                [/a/, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows renaming multiple times with multiple enabled","suites":["object","rename()"],"updatePoint":{"line":2747,"column":64},"line":2747,"code":"        it('allows renaming multiple times with multiple enabled', () => {\n\n            const schema = Joi.object({\n                test: Joi.string()\n            }).rename('test1', 'test').rename('test2', 'test', { multiple: true });\n\n            expect(Joi.compile(schema).validate({ test1: 'a', test2: 'b' }).error).to.not.exist();\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors renaming multiple times with multiple disabled","suites":["object","rename()"],"updatePoint":{"line":2756,"column":65},"line":2756,"code":"        it('errors renaming multiple times with multiple disabled', () => {\n\n            const schema = Joi.object({\n                test: Joi.string()\n            }).rename('test1', 'test').rename('test2', 'test');\n\n            Helper.validate(Joi.compile(schema), [[{ test1: 'a', test2: 'b' }, false, {\n                message: '\"value\" cannot rename \"test2\" because multiple renames are disabled and another key was already renamed to \"test\"',\n                path: [],\n                type: 'object.rename.multiple',\n                context: { from: 'test2', to: 'test', label: 'value', pattern: false, value: { test: 'a', test2: 'b' } }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors multiple times when abortEarly is false","suites":["object","rename()"],"updatePoint":{"line":2770,"column":58},"line":2770,"code":"        it('errors multiple times when abortEarly is false', () => {\n\n            const schema = Joi.object()\n                .rename('a', 'b')\n                .rename('c', 'b')\n                .rename('d', 'b')\n                .prefs({ abortEarly: false });\n\n            Helper.validate(schema, [[{ a: 1, c: 1, d: 1 }, false, {\n                message: '\"value\" cannot rename \"c\" because multiple renames are disabled and another key was already renamed to \"b\". \"value\" cannot rename \"d\" because multiple renames are disabled and another key was already renamed to \"b\"',\n                details: [\n                    {\n                        message: '\"value\" cannot rename \"c\" because multiple renames are disabled and another key was already renamed to \"b\"',\n                        path: [],\n                        type: 'object.rename.multiple',\n                        context: { from: 'c', to: 'b', label: 'value', pattern: false, value: { b: 1 } }\n                    },\n                    {\n                        message: '\"value\" cannot rename \"d\" because multiple renames are disabled and another key was already renamed to \"b\"',\n                        path: [],\n                        type: 'object.rename.multiple',\n                        context: { from: 'd', to: 'b', label: 'value', pattern: false, value: { b: 1 } }\n                    }\n                ]\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"aliases a key","suites":["object","rename()"],"updatePoint":{"line":2797,"column":25},"line":2797,"code":"        it('aliases a key', () => {\n\n            const schema = Joi.object({\n                a: Joi.number(),\n                b: Joi.number()\n            }).rename('a', 'b', { alias: true });\n\n            const obj = { a: 10 };\n            Helper.validate(Joi.compile(schema), [[obj, true, { a: 10, b: 10 }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"with override disabled should not allow overwriting existing value","suites":["object","rename()"],"updatePoint":{"line":2808,"column":78},"line":2808,"code":"        it('with override disabled should not allow overwriting existing value', () => {\n\n            const schema = Joi.object({\n                test1: Joi.string()\n            }).rename('test', 'test1');\n\n            Helper.validate(schema, [[{ test: 'b', test1: 'a' }, false, {\n                message: '\"value\" cannot rename \"test\" because override is disabled and target \"test1\" exists',\n                path: [],\n                type: 'object.rename.override',\n                context: { from: 'test', to: 'test1', label: 'value', pattern: false, value: { test: 'b', test1: 'a' } }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"with override enabled should allow overwriting existing value","suites":["object","rename()"],"updatePoint":{"line":2822,"column":73},"line":2822,"code":"        it('with override enabled should allow overwriting existing value', () => {\n\n            const schema = Joi.object({\n                test1: Joi.string()\n            }).rename('test', 'test1', { override: true });\n\n            Helper.validate(schema, [\n                [{ test: 'b', test1: 'a' }, true, { test1: 'b' }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"renames when data is nested in an array via items","suites":["object","rename()"],"updatePoint":{"line":2833,"column":61},"line":2833,"code":"        it('renames when data is nested in an array via items', () => {\n\n            const schema = {\n                arr: Joi.array().items(Joi.object({\n                    one: Joi.string(),\n                    two: Joi.string()\n                }).rename('uno', 'one').rename('dos', 'two'))\n            };\n\n            const data = { arr: [{ uno: '1', dos: '2' }] };\n            Helper.validate(Joi.object(schema), [[data, true, { arr: [{ one: '1', two: '2' }] }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies rename and validation in the correct order regardless of key order","suites":["object","rename()"],"updatePoint":{"line":2846,"column":86},"line":2846,"code":"        it('applies rename and validation in the correct order regardless of key order', () => {\n\n            const schema1 = Joi.object({\n                a: Joi.number()\n            }).rename('b', 'a');\n\n            const input1 = { b: '5' };\n            Helper.validate(schema1, [[input1, true, { a: 5 }]]);\n\n            const schema2 = Joi.object({ a: Joi.number(), b: Joi.any() }).rename('b', 'a');\n            const input2 = { b: '5' };\n            Helper.validate(schema2, [[input2, true, { a: 5 }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"sets the default value after key is renamed","suites":["object","rename()"],"updatePoint":{"line":2860,"column":55},"line":2860,"code":"        it('sets the default value after key is renamed', () => {\n\n            const schema = Joi.object({\n                foo2: Joi.string().default('test')\n            }).rename('foo', 'foo2');\n\n            const input = {};\n            Helper.validate(schema, [[input, true, { foo2: 'test' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"renames keys that are empty strings","suites":["object","rename()"],"updatePoint":{"line":2870,"column":47},"line":2870,"code":"        it('renames keys that are empty strings', () => {\n\n            const schema = Joi.object().rename('', 'notEmpty');\n            const input = {\n                '': 'something'\n            };\n\n            Helper.validate(schema, [[input, true, { notEmpty: 'something' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should not create new keys when the key in question does not exist","suites":["object","rename()"],"updatePoint":{"line":2880,"column":78},"line":2880,"code":"        it('should not create new keys when the key in question does not exist', () => {\n\n            const schema = Joi.object()\n                .rename('b', '_b');\n\n            const input = {\n                a: 'something'\n            };\n\n            Helper.validate(schema, [[input, true, input]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"ignores a key with ignoredUndefined if from does not exist","suites":["object","rename()"],"updatePoint":{"line":2892,"column":70},"line":2892,"code":"        it('ignores a key with ignoredUndefined if from does not exist', () => {\n\n            const schema = Joi.object().rename('b', 'a', { ignoreUndefined: true });\n\n            const input = {\n                a: 'something'\n            };\n\n            Helper.validate(schema, [[input, true, { a: 'something' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"deletes a key with override and ignoredUndefined if from exists","suites":["object","rename()"],"updatePoint":{"line":2903,"column":75},"line":2903,"code":"        it('deletes a key with override and ignoredUndefined if from exists', () => {\n\n            const schema = Joi.object()\n                .rename('b', 'a', { ignoreUndefined: true, override: true });\n\n            const input = {\n                a: 'something',\n                b: 'something else'\n            };\n\n            Helper.validate(schema, [[input, true, { a: 'something else' }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"deletes a key with override if present and undefined","suites":["object","rename()"],"updatePoint":{"line":2916,"column":64},"line":2916,"code":"        it('deletes a key with override if present and undefined', () => {\n\n            const schema = Joi.object()\n                .rename('b', 'a', { override: true });\n\n            const input = {\n                a: 'something',\n                b: undefined\n            };\n\n            Helper.validate(schema, [[input, true, {}]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"leaves target if source is present and undefined and ignoreUndefined is set","suites":["object","rename()"],"updatePoint":{"line":2929,"column":87},"line":2929,"code":"        it('leaves target if source is present and undefined and ignoreUndefined is set', () => {\n\n            const schema = Joi.object()\n                .rename('b', 'a', { override: true, ignoreUndefined: true });\n\n            const input = {\n                a: 'something',\n                b: undefined\n            };\n\n            Helper.validate(schema, [[input, true, input]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should fulfill describe() with defaults","suites":["object","rename()"],"updatePoint":{"line":2942,"column":51},"line":2942,"code":"        it('should fulfill describe() with defaults', () => {\n\n            const schema = Joi.object().rename('b', 'a');\n            const desc = schema.describe();\n\n            expect(desc).to.equal({\n                type: 'object',\n                renames: [{\n                    from: 'b',\n                    to: 'a',\n                    options: {\n                        alias: false,\n                        multiple: false,\n                        override: false\n                    }\n                }]\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should fulfill describe() with non-defaults","suites":["object","rename()"],"updatePoint":{"line":2961,"column":55},"line":2961,"code":"        it('should fulfill describe() with non-defaults', () => {\n\n            const schema = Joi.object().rename('b', 'a', { alias: true, multiple: true, override: true });\n            const desc = schema.describe();\n\n            expect(desc).to.equal({\n                type: 'object',\n                renames: [{\n                    from: 'b',\n                    to: 'a',\n                    options: {\n                        alias: true,\n                        multiple: true,\n                        override: true\n                    }\n                }]\n            });\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should leave key if from does not exist regardless of override","suites":["object","rename()"],"updatePoint":{"line":2980,"column":74},"line":2980,"code":"        it('should leave key if from does not exist regardless of override', () => {\n\n            const schema = Joi.object()\n                .rename('b', 'a', { override: true });\n\n            const input = {\n                a: 'something'\n            };\n\n            Helper.validate(schema, [[input, true, input]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"renames using a regular expression","suites":["object","rename()","using regex"],"updatePoint":{"line":2994,"column":50},"line":2994,"code":"            it('renames using a regular expression', () => {\n\n                const regex = /foobar/i;\n\n                const schema = Joi.object({\n                    fooBar: Joi.string()\n                }).rename(regex, 'fooBar');\n\n                Helper.validate(Joi.compile(schema), [[{ FOOBAR: 'a' }, true, { fooBar: 'a' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"aliases a key","suites":["object","rename()","using regex"],"updatePoint":{"line":3005,"column":29},"line":3005,"code":"            it('aliases a key', () => {\n\n                const regex = /^a$/i;\n\n                const schema = Joi.object({\n                    other: Joi.any(),\n                    A: Joi.number(),\n                    b: Joi.number(),\n                    c: Joi.number()\n                }).rename(regex, 'b', { alias: true });\n\n                Helper.validate(Joi.compile(schema), [[{ other: 'here', A: 100, c: 50 }, true, { other: 'here', A: 100, b: 100, c: 50 }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses template","suites":["object","rename()","using regex"],"updatePoint":{"line":3019,"column":29},"line":3019,"code":"            it('uses template', () => {\n\n                const schema = Joi.object()\n                    .rename(/^(\\d+)$/, Joi.x('x{#1}x'))\n                    .pattern(/^x\\d+x$/, Joi.any());\n\n                const input = {\n                    123: 'x',\n                    1: 'y',\n                    0: 'z',\n                    x4x: 'test'\n                };\n\n                Helper.validate(Joi.compile(schema), [[input, true, {\n                    x123x: 'x',\n                    x1x: 'y',\n                    x0x: 'z',\n                    x4x: 'test'\n                }]]);\n\n                expect(schema.describe()).to.equal({\n                    type: 'object',\n                    patterns: [{\n                        regex: '/^x\\\\d+x$/',\n                        rule: { type: 'any' }\n                    }],\n                    renames: [{\n                        from: { regex: '/^(\\\\d+)$/' },\n                        to: {\n                            template: 'x{#1}x'\n                        },\n                        options: {\n                            alias: false,\n                            multiple: false,\n                            override: false\n                        }\n                    }]\n                });\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses template with prefix override","suites":["object","rename()","using regex"],"updatePoint":{"line":3059,"column":50},"line":3059,"code":"            it('uses template with prefix override', () => {\n\n                const schema = Joi.object()\n                    .rename(/^(\\d+)$/, Joi.x('x{@1}x', { prefix: { local: '@' } }))\n                    .pattern(/^x\\d+x$/, Joi.any());\n\n                const input = {\n                    123: 'x',\n                    1: 'y',\n                    0: 'z',\n                    x4x: 'test'\n                };\n\n                Helper.validate(Joi.compile(schema), [[input, true, {\n                    x123x: 'x',\n                    x1x: 'y',\n                    x0x: 'z',\n                    x4x: 'test'\n                }]]);\n\n                expect(schema.describe()).to.equal({\n                    type: 'object',\n                    patterns: [{\n                        regex: '/^x\\\\d+x$/',\n                        rule: { type: 'any' }\n                    }],\n                    renames: [{\n                        from: { regex: '/^(\\\\d+)$/' },\n                        to: {\n                            template: 'x{@1}x',\n                            options: { prefix: { local: '@' } }\n                        },\n                        options: {\n                            alias: false,\n                            multiple: false,\n                            override: false\n                        }\n                    }]\n                });\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses template that references another sibling key","suites":["object","rename()","using regex"],"updatePoint":{"line":3100,"column":65},"line":3100,"code":"            it('uses template that references another sibling key', () => {\n\n                const schema = Joi.object({\n                    prefix: Joi.string().lowercase().required()\n                })\n                    .rename(/^(\\d+)$/, Joi.x('{.prefix}{#1}'))\n                    .unknown();\n\n                const input = {\n                    123: 'x',\n                    1: 'y',\n                    0: 'z',\n                    prefix: 'TEST'\n                };\n\n                Helper.validate(Joi.compile(schema), [[input, true, {\n                    TEST123: 'x',\n                    TEST1: 'y',\n                    TEST0: 'z',\n                    prefix: 'test'\n                }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses template that references peer key","suites":["object","rename()","using regex"],"updatePoint":{"line":3123,"column":54},"line":3123,"code":"            it('uses template that references peer key', () => {\n\n                const schema = Joi.object({\n                    a: Joi.object()\n                        .rename(/^(\\d+)$/, Joi.x('{b.prefix}{#1}'))\n                        .unknown(),\n                    b: {\n                        prefix: Joi.string().lowercase()\n                    }\n                });\n\n                Helper.validate(schema, [\n                    [{ a: { 5: 'x' }, b: { prefix: 'p' } }, true, { a: { p5: 'x' }, b: { prefix: 'p' } }],\n                    [{ a: { 5: 'x' }, b: { prefix: 'P' } }, true, { a: { p5: 'x' }, b: { prefix: 'p' } }],\n                    [{ b: { prefix: 'P' }, a: { 5: 'x' } }, true, { a: { p5: 'x' }, b: { prefix: 'p' } }],\n                    [{ b: {}, a: { 5: 'x' } }, true, { a: { 5: 'x' }, b: {} }],\n                    [{ a: { 5: 'x' } }, true, { a: { 5: 'x' } }]\n                ]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"uses template without refs","suites":["object","rename()","using regex"],"updatePoint":{"line":3143,"column":42},"line":3143,"code":"            it('uses template without refs', () => {\n\n                const schema = Joi.object()\n                    .rename(/^(\\d+)$/, Joi.x('x'))\n                    .unknown();\n\n                Helper.validate(Joi.compile(schema), [[{ 1: 'x' }, true, { x: 'x' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"deletes a key with override if present and undefined","suites":["object","rename()","using regex"],"updatePoint":{"line":3152,"column":68},"line":3152,"code":"            it('deletes a key with override if present and undefined', () => {\n\n                const schema = Joi.object()\n                    .rename(/b/, 'a', { override: true });\n\n                const input = {\n                    a: 'something',\n                    b: undefined\n                };\n\n                Helper.validate(schema, [[input, true, {}]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"with override disabled it should not allow overwriting existing value","suites":["object","rename()","using regex"],"updatePoint":{"line":3165,"column":85},"line":3165,"code":"            it('with override disabled it should not allow overwriting existing value', () => {\n\n                const schema = Joi.object({\n                    test1: Joi.string()\n                })\n                    .rename(/^test1$/i, 'test');\n\n                const item = {\n                    test: 'b',\n                    test1: 'a'\n                };\n\n                Helper.validate(Joi.compile(schema), [[item, false, {\n                    message: '\"value\" cannot rename \"test1\" because override is disabled and target \"test\" exists',\n                    path: [],\n                    type: 'object.rename.override',\n                    context: { from: 'test1', to: 'test', label: 'value', pattern: true, value: item }\n                }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"with override enabled should allow overwriting existing value","suites":["object","rename()","using regex"],"updatePoint":{"line":3185,"column":77},"line":3185,"code":"            it('with override enabled should allow overwriting existing value', () => {\n\n                const regex = /^test$/i;\n\n                const schema = Joi.object({\n                    test1: Joi.string()\n                }).rename(regex, 'test1', { override: true });\n\n                Helper.validate(schema, [[{ test: 'b', test1: 'a' }, true, { test1: 'b' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"renames when data is nested in an array via items","suites":["object","rename()","using regex"],"updatePoint":{"line":3196,"column":65},"line":3196,"code":"            it('renames when data is nested in an array via items', () => {\n\n                const regex1 = /^uno$/i;\n                const regex2 = /^dos$/i;\n\n                const schema = {\n                    arr: Joi.array().items(Joi.object({\n                        one: Joi.string(),\n                        two: Joi.string()\n                    }).rename(regex1, 'one').rename(regex2, 'two'))\n                };\n\n                const data = { arr: [{ uno: '1', dos: '2' }] };\n                Helper.validate(Joi.object(schema), [[data, true, { arr: [{ one: '1', two: '2' }] }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"skips when existing name matches","suites":["object","rename()","using regex"],"updatePoint":{"line":3212,"column":48},"line":3212,"code":"            it('skips when existing name matches', () => {\n\n                const regex = /^abc$/i;\n\n                const schema = Joi.object({ abc: Joi.string() }).rename(regex, 'abc', { override: true });\n\n                Helper.validate(schema, [\n                    [{ ABC: 'x' }, true, { abc: 'x' }],\n                    [{ abc: 'x' }, true, { abc: 'x' }]\n                ]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies rename and validation in the correct order regardless of key order","suites":["object","rename()","using regex"],"updatePoint":{"line":3224,"column":90},"line":3224,"code":"            it('applies rename and validation in the correct order regardless of key order', () => {\n\n                const regex = /^b$/i;\n\n                const schema1 = Joi.object({\n                    a: Joi.number()\n                }).rename(regex, 'a');\n\n                const input1 = { b: '5' };\n                Helper.validate(schema1, [[input1, true, { a: 5 }]]);\n\n                const schema2 = Joi.object({ a: Joi.number(), b: Joi.any() }).rename('b', 'a');\n                const input2 = { b: '5' };\n                Helper.validate(schema2, [[input2, true, { a: 5 }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"sets the default value after key is renamed","suites":["object","rename()","using regex"],"updatePoint":{"line":3240,"column":59},"line":3240,"code":"            it('sets the default value after key is renamed', () => {\n\n                const regex = /^foo$/i;\n\n                const schema = Joi.object({\n                    foo2: Joi.string().default('test')\n                }).rename(regex, 'foo2');\n\n                const input = {};\n                Helper.validate(schema, [[input, true, { foo2: 'test' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should not create new keys when the key in question does not exist","suites":["object","rename()","using regex"],"updatePoint":{"line":3252,"column":82},"line":3252,"code":"            it('should not create new keys when the key in question does not exist', () => {\n\n                const schema = Joi.object()\n                    .rename(/^b$/i, '_b');\n\n                const input = {\n                    a: 'something'\n                };\n\n                Helper.validate(schema, [[input, true, { a: 'something' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should leave key if from does not exist regardless of override","suites":["object","rename()","using regex"],"updatePoint":{"line":3264,"column":78},"line":3264,"code":"            it('should leave key if from does not exist regardless of override', () => {\n\n                const schema = Joi.object()\n                    .rename(/^b$/i, 'a', { override: true });\n\n                const input = {\n                    a: 'something'\n                };\n\n                Helper.validate(schema, [[input, true, input]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"skips when all matches are undefined and ignoredUndefined is true","suites":["object","rename()","using regex"],"updatePoint":{"line":3276,"column":81},"line":3276,"code":"            it('skips when all matches are undefined and ignoredUndefined is true', () => {\n\n                const schema = Joi.object().keys({\n                    a: Joi.any(),\n                    b: Joi.any()\n                })\n                    .rename(/^b$/i, 'a', { ignoreUndefined: true });\n\n                const input = {\n                    b: undefined\n                };\n\n                Helper.validate(schema, [[input, true, { b: undefined }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"deletes a key with override and ignoredUndefined if from exists","suites":["object","rename()","using regex"],"updatePoint":{"line":3291,"column":79},"line":3291,"code":"            it('deletes a key with override and ignoredUndefined if from exists', () => {\n\n                const schema = Joi.object().keys({\n                    c: Joi.any(),\n                    a: Joi.any()\n                })\n                    .rename(/^b$/, 'a', { ignoreUndefined: true, override: true });\n\n                const input = {\n                    a: 'something',\n                    b: 'something else'\n                };\n\n                Helper.validate(schema, [[input, true, { a: 'something else' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should fulfill describe() with non-defaults","suites":["object","rename()","using regex"],"updatePoint":{"line":3307,"column":59},"line":3307,"code":"            it('should fulfill describe() with non-defaults', () => {\n\n                const regex = /^b$/i;\n\n                const schema = Joi.object().rename(regex, 'a', { alias: true, multiple: true, override: true });\n                const desc = schema.describe();\n\n                expect(desc).to.equal({\n                    type: 'object',\n                    renames: [{\n                        from: { regex: regex.toString() },\n                        to: 'a',\n                        options: {\n                            alias: true,\n                            multiple: true,\n                            override: true\n                        }\n                    }]\n                });\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should fulfill describe() with defaults","suites":["object","rename()","using regex"],"updatePoint":{"line":3328,"column":55},"line":3328,"code":"            it('should fulfill describe() with defaults', () => {\n\n                const regex = /^b$/i;\n\n                const schema = Joi.object().rename(regex, 'a');\n                const desc = schema.describe();\n\n                expect(desc).to.equal({\n                    type: 'object',\n                    renames: [{\n                        from: { regex: regex.toString() },\n                        to: 'a',\n                        options: {\n                            alias: false,\n                            multiple: false,\n                            override: false\n                        }\n                    }]\n                });\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows renaming multiple times with multiple enabled","suites":["object","rename()","using regex"],"updatePoint":{"line":3349,"column":68},"line":3349,"code":"            it('allows renaming multiple times with multiple enabled', () => {\n\n                const schema = Joi.object({\n                    fooBar: Joi.string()\n                }).rename(/foobar/i, 'fooBar', { multiple: true });\n\n                Helper.validate(Joi.compile(schema), [[{ FOOBAR: 'a', FooBar: 'b' }, true, { fooBar: 'b' }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors renaming multiple times with multiple disabled","suites":["object","rename()","using regex"],"updatePoint":{"line":3358,"column":69},"line":3358,"code":"            it('errors renaming multiple times with multiple disabled', () => {\n\n                const schema = Joi.object({\n                    fooBar: Joi.string()\n                })\n                    .rename(/foobar/i, 'fooBar')\n                    .rename(/foobar/i, 'fooBar');\n\n                Helper.validate(Joi.compile(schema), [[{ FOOBAR: 'a', FooBar: 'b' }, false, {\n                    message: '\"value\" cannot rename \"FooBar\" because multiple renames are disabled and another key was already renamed to \"fooBar\"',\n                    path: [],\n                    type: 'object.rename.multiple',\n                    context: { from: 'FooBar', to: 'fooBar', label: 'value', pattern: true, value: { FooBar: 'b', fooBar: 'a' } }\n                }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors multiple times when abortEarly is false","suites":["object","rename()","using regex"],"updatePoint":{"line":3374,"column":62},"line":3374,"code":"            it('errors multiple times when abortEarly is false', () => {\n\n                const schema = Joi.object({\n                    z: Joi.string()\n                })\n                    .rename(/a/i, 'b')\n                    .rename(/c/i, 'b')\n                    .rename(/z/i, 'z')\n                    .prefs({ abortEarly: false });\n\n                Helper.validate(schema, [[{ a: 1, c: 1, d: 1, z: 1 }, false, {\n                    message: '\"value\" cannot rename \"c\" because multiple renames are disabled and another key was already renamed to \"b\". \"z\" must be a string. \"d\" is not allowed. \"b\" is not allowed',\n                    details: [\n                        {\n                            message: '\"value\" cannot rename \"c\" because multiple renames are disabled and another key was already renamed to \"b\"',\n                            path: [],\n                            type: 'object.rename.multiple',\n                            context: { from: 'c', to: 'b', label: 'value', pattern: true, value: { b: 1, d: 1, z: 1 } }\n                        },\n                        {\n                            message: '\"z\" must be a string',\n                            path: ['z'],\n                            type: 'string.base',\n                            context: { value: 1, key: 'z', label: 'z' }\n                        },\n                        {\n                            message: '\"d\" is not allowed',\n                            path: ['d'],\n                            type: 'object.unknown',\n                            context: { child: 'd', key: 'd', label: 'd', value: 1 }\n                        },\n                        {\n                            message: '\"b\" is not allowed',\n                            path: ['b'],\n                            type: 'object.unknown',\n                            context: { child: 'b', key: 'b', label: 'b', value: 1 }\n                        }\n                    ]\n                }]]);\n            });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should detect joi instances","suites":["object","schema()"],"updatePoint":{"line":3419,"column":39},"line":3419,"code":"        it('should detect joi instances', () => {\n\n            const schema = Joi.object().schema();\n            Helper.validate(schema, [\n                [{}, false, {\n                    message: '\"value\" must be a Joi schema of any type',\n                    path: [],\n                    type: 'object.schema',\n                    context: { label: 'value', type: 'any', value: {} }\n                }],\n                [{ isJoi: true }, false, {\n                    message: '\"value\" must be a Joi schema of any type',\n                    path: [],\n                    type: 'object.schema',\n                    context: { label: 'value', type: 'any', value: { isJoi: true } }\n                }],\n                [Joi.number().max(2), true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validated schema type","suites":["object","schema()"],"updatePoint":{"line":3439,"column":33},"line":3439,"code":"        it('validated schema type', () => {\n\n            const schema = Joi.object().schema('number');\n            Helper.validate(schema, [\n                [Joi.number().max(2), true],\n                [{}, false, {\n                    message: '\"value\" must be a Joi schema of number type',\n                    path: [],\n                    type: 'object.schema',\n                    context: { label: 'value', type: 'number', value: {} }\n                }],\n                [{ isJoi: true }, false, {\n                    message: '\"value\" must be a Joi schema of number type',\n                    path: [],\n                    type: 'object.schema',\n                    context: { label: 'value', type: 'number', value: { isJoi: true } }\n                }],\n                [Joi.string(), false, {\n                    message: '\"value\" must be a Joi schema of number type',\n                    path: [],\n                    type: 'object.schema',\n                    context: { label: 'value', type: 'number', value: Joi.string() }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"customizes schema","suites":["object","tailor()"],"updatePoint":{"line":3468,"column":29},"line":3468,"code":"        it('customizes schema', () => {\n\n            const alterations = {\n                x: (s) => s.min(10),\n                y: (s) => s.max(50),\n                z: (s) => s.integer()\n            };\n\n            const before = Joi.object({\n                a: {\n                    b: Joi.number().alter(alterations)\n                },\n                b: Joi.object()\n                    .pattern(/.*/, Joi.number().alter(alterations)),\n                c: Joi.object({\n                    x: Joi.number(),\n                    y: Joi.number()\n                })\n                    .assert('.c.x', Joi.number().alter(alterations))\n            });\n\n            const bd = before.describe();\n\n            const first = before.tailor('x');\n\n            const c = Joi.object({\n                x: Joi.number(),\n                y: Joi.number()\n            })\n                .assert('.c.x', Joi.number().min(10).alter(alterations));\n\n            const after1 = Joi.object({\n                a: {\n                    b: Joi.number().min(10).alter(alterations)\n                },\n                b: Joi.object()\n                    .pattern(/.*/, Joi.number().min(10).alter(alterations)),\n                c\n            });\n\n            expect(first.describe()).to.equal(after1.describe());\n            expect(before.describe()).to.equal(bd);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"customizes schema on object and keys","suites":["object","tailor()"],"updatePoint":{"line":3512,"column":48},"line":3512,"code":"        it('customizes schema on object and keys', () => {\n\n            const alterations = {\n                x: (s) => s.min(10),\n                y: (s) => s.max(50),\n                z: (s) => s.integer()\n            };\n\n            const before = Joi.object({\n                a: {\n                    b: Joi.number().alter(alterations)\n                },\n                b: Joi.object()\n                    .pattern(/.*/, Joi.number().alter(alterations)),\n                c: Joi.object({\n                    x: Joi.number(),\n                    y: Joi.number()\n                })\n                    .assert('.c.x', Joi.number().alter(alterations))\n                    .alter(alterations)\n            });\n\n            const bd = before.describe();\n\n            const first = before.tailor('x');\n\n            const after1 = Joi.object({\n                a: {\n                    b: Joi.number().min(10).alter(alterations)\n                },\n                b: Joi.object()\n                    .pattern(/.*/, Joi.number().min(10).alter(alterations)),\n                c: Joi.object({\n                    x: Joi.number(),\n                    y: Joi.number()\n                })\n                    .alter(alterations)\n                    .assert('.c.x', Joi.number().min(10).alter(alterations))\n                    .min(10)\n            });\n\n            expect(first.describe()).to.equal(after1.describe());\n            Helper.equal(first, after1);\n            expect(before.describe()).to.equal(bd);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["object","unknown()"],"updatePoint":{"line":3561,"column":56},"line":3561,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.object().unknown();\n            expect(schema.unknown()).to.shallow.equal(schema);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows local unknown without applying to keys","suites":["object","unknown()"],"updatePoint":{"line":3567,"column":57},"line":3567,"code":"        it('allows local unknown without applying to keys', () => {\n\n            const schema = Joi.object({\n                a: {\n                    b: Joi.number()\n                }\n            }).unknown();\n\n            Helper.validate(schema, [\n                [{ a: { b: 5 } }, true],\n                [{ a: { b: 'x' } }, false, {\n                    message: '\"a.b\" must be a number',\n                    path: ['a', 'b'],\n                    type: 'number.base',\n                    context: { label: 'a.b', key: 'b', value: 'x' }\n                }],\n                [{ a: { b: 5 }, c: 'ignore' }, true],\n                [{ a: { b: 5, c: 'ignore' } }, false, {\n                    message: '\"a.c\" is not allowed',\n                    path: ['a', 'c'],\n                    type: 'object.unknown',\n                    context: { child: 'c', label: 'a.c', key: 'c', value: 'ignore' }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"forbids local unknown without applying to keys","suites":["object","unknown()"],"updatePoint":{"line":3593,"column":58},"line":3593,"code":"        it('forbids local unknown without applying to keys', () => {\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    b: Joi.number()\n                }).unknown()\n            }).prefs({ allowUnknown: false });\n\n            Helper.validate(schema, [\n                [{ a: { b: 5 } }, true],\n                [{ a: { b: 'x' } }, false, {\n                    message: '\"a.b\" must be a number',\n                    path: ['a', 'b'],\n                    type: 'number.base',\n                    context: { label: 'a.b', key: 'b', value: 'x' }\n                }],\n                [{ a: { b: 5 }, c: 'ignore' }, false, {\n                    message: '\"c\" is not allowed',\n                    path: ['c'],\n                    type: 'object.unknown',\n                    context: { child: 'c', label: 'c', key: 'c', value: 'ignore' }\n                }],\n                [{ a: { b: 5, c: 'ignore' } }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"overrides stripUnknown at a local level","suites":["object","unknown()"],"updatePoint":{"line":3619,"column":51},"line":3619,"code":"        it('overrides stripUnknown at a local level', () => {\n\n            const schema = Joi.object({\n                a: Joi.object({\n                    b: Joi.number(),\n                    c: Joi.object({\n                        d: Joi.number()\n                    })\n                }).unknown()\n            }).prefs({ allowUnknown: false, stripUnknown: true });\n\n            Helper.validate(schema, [\n                [{ a: { b: 5 } }, true, { a: { b: 5 } }],\n                [{ a: { b: 'x' } }, false, {\n                    message: '\"a.b\" must be a number',\n                    path: ['a', 'b'],\n                    type: 'number.base',\n                    context: { label: 'a.b', key: 'b', value: 'x' }\n                }],\n                [{ a: { b: 5 }, d: 'ignore' }, true, { a: { b: 5 } }],\n                [{ a: { b: 5, d: 'ignore' } }, true, { a: { b: 5, d: 'ignore' } }],\n                [{ a: { b: 5, c: { e: 'ignore' } } }, true, { a: { b: 5, c: {} } }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validated with","suites":["object","with()"],"updatePoint":{"line":3647,"column":26},"line":3647,"code":"        it('validated with', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string()\n            }).with('txt', 'upc');\n\n            Helper.validate(schema, { abortEarly: false }, [[{ txt: 'a' }, false, {\n                message: '\"txt\" missing required peer \"upc\"',\n                details: [{\n                    message: '\"txt\" missing required peer \"upc\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peer: 'upc',\n                        peerWithLabel: 'upc',\n                        label: 'value',\n                        value: { txt: 'a' }\n                    }\n                }]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ upc: 'test' }, true],\n                [{ txt: 'test' }, false, {\n                    message: '\"txt\" missing required peer \"upc\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peer: 'upc',\n                        peerWithLabel: 'upc',\n                        label: 'value',\n                        value: { txt: 'test' }\n                    }\n                }],\n                [{ txt: 'test', upc: null }, false, {\n                    message: '\"upc\" must be a string',\n                    path: ['upc'],\n                    type: 'string.base',\n                    context: { value: null, label: 'upc', key: 'upc' }\n                }],\n                [{ txt: 'test', upc: '' }, false, {\n                    message: '\"upc\" is not allowed to be empty',\n                    path: ['upc'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'upc', key: 'upc' }\n                }],\n                [{ txt: 'test', upc: undefined }, false, {\n                    message: '\"txt\" missing required peer \"upc\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peer: 'upc',\n                        peerWithLabel: 'upc',\n                        label: 'value',\n                        value: { txt: 'test', upc: undefined }\n                    }\n                }],\n                [{ txt: 'test', upc: 'test' }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when a parameter is not a string","suites":["object","with()"],"updatePoint":{"line":3715,"column":51},"line":3715,"code":"        it('errors when a parameter is not a string', () => {\n\n            let error;\n            try {\n                Joi.object().with({});\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n\n            try {\n                Joi.object().with(123);\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates when key is an empty string","suites":["object","with()"],"updatePoint":{"line":3739,"column":49},"line":3739,"code":"        it('validates when key is an empty string', () => {\n\n            const schema = Joi.object().with('', 'b');\n            Helper.validate(schema, [\n                [{ c: 'hi', d: 'there' }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels","suites":["object","with()"],"updatePoint":{"line":3747,"column":26},"line":3747,"code":"        it('applies labels', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            }).with('a', ['b']);\n            Helper.validate(schema, [[{ a: 1 }, false, {\n                message: '\"first\" missing required peer \"second\"',\n                path: [],\n                type: 'object.with',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peer: 'b',\n                    peerWithLabel: 'second',\n                    label: 'value',\n                    value: { a: 1 }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","with()"],"updatePoint":{"line":3768,"column":33},"line":3768,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            }).with('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: { c: 'test2' } }, true],\n                [{ a: 'test', b: { d: 80 } }, false, {\n                    message: '\"a\" missing required peer \"b.c\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'a',\n                        mainWithLabel: 'a',\n                        peer: 'b.c',\n                        peerWithLabel: 'b.c',\n                        label: 'value',\n                        value: { a: 'test', b: { d: 80 } }\n                    }\n                }]\n            ]);\n\n            const schema2 = Joi.object({\n                a: Joi.object({ b: Joi.string() }),\n                b: Joi.object({ c: Joi.string() })\n            }).with('a.b', 'b.c');\n\n            Helper.validate(schema2, [\n                [{ a: { b: 'test' }, b: { c: 'test2' } }, true],\n                [{ a: { b: 'test' }, b: {} }, false, {\n                    message: '\"a.b\" missing required peer \"b.c\"',\n                    path: [],\n                    type: 'object.with',\n                    context: {\n                        main: 'a.b',\n                        mainWithLabel: 'a.b',\n                        peer: 'b.c',\n                        peerWithLabel: 'b.c',\n                        label: 'value',\n                        value: { a: { b: 'test' }, b: {} }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","with()"],"updatePoint":{"line":3816,"column":43},"line":3816,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .with('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: Object.assign(() => { }, { c: 'test2' }) }, true, Helper.skip],\n                [{ a: 'test', b: Object.assign(() => { }, { d: 80 }) }, false, '\"a\" missing required peer \"b.c\"']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object","with()"],"updatePoint":{"line":3831,"column":46},"line":3831,"code":"        it('applies labels with nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .with('a', ['b.c']);\n\n            Helper.validate(schema, [[{ a: 1, b: { d: 2 } }, false, {\n                message: '\"first\" missing required peer \"b.second\"',\n                path: [],\n                type: 'object.with',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peer: 'b.c',\n                    peerWithLabel: 'b.second',\n                    label: 'value',\n                    value: { a: 1, b: { d: 2 } }\n                }\n            }]]);\n\n            const schema2 = Joi.object({\n                a: Joi.object({\n                    b: Joi.string().label('first')\n                }),\n                b: Joi.object({\n                    c: Joi.string().label('second')\n                })\n            })\n                .with('a.b', ['b.c']);\n\n            Helper.validate(schema2, [[{ a: { b: 'test' }, b: {} }, false, {\n                message: '\"a.first\" missing required peer \"b.second\"',\n                path: [],\n                type: 'object.with',\n                context: {\n                    main: 'a.b',\n                    mainWithLabel: 'a.first',\n                    peer: 'b.c',\n                    peerWithLabel: 'b.second',\n                    label: 'value',\n                    value: { a: { b: 'test' }, b: {} }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"handles period in key names","suites":["object","with()"],"updatePoint":{"line":3881,"column":39},"line":3881,"code":"        it('handles period in key names', () => {\n\n            const schema = Joi.object({\n                'x.from': Joi.string().lowercase().email(),\n                'x.url': Joi.string().uri({ scheme: ['https'] })\n            })\n                .with('x.from', 'x.url', { separator: false });\n\n            const test = { 'x.url': 'https://example.com', 'x.from': 'test@example.com' };\n            Helper.validate(schema, [[test, true, test]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validated without","suites":["object","without()"],"updatePoint":{"line":3896,"column":29},"line":3896,"code":"        it('validated without', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string()\n            }).without('txt', 'upc');\n\n            Helper.validate(schema, { abortEarly: false }, [[{ txt: 'a', upc: 'b' }, false, {\n                message: '\"txt\" conflict with forbidden peer \"upc\"',\n                details: [{\n                    message: '\"txt\" conflict with forbidden peer \"upc\"',\n                    path: [],\n                    type: 'object.without',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peer: 'upc',\n                        peerWithLabel: 'upc',\n                        label: 'value',\n                        value: { txt: 'a', upc: 'b' }\n                    }\n                }]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ upc: 'test' }, true],\n                [{ txt: 'test' }, true],\n                [{ txt: 'test', upc: null }, false, {\n                    message: '\"upc\" must be a string',\n                    path: ['upc'],\n                    type: 'string.base',\n                    context: { value: null, label: 'upc', key: 'upc' }\n                }],\n                [{ txt: 'test', upc: '' }, false, {\n                    message: '\"upc\" is not allowed to be empty',\n                    path: ['upc'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'upc', key: 'upc' }\n                }],\n                [{ txt: 'test', upc: undefined }, true],\n                [{ txt: 'test', upc: 'test' }, false, {\n                    message: '\"txt\" conflict with forbidden peer \"upc\"',\n                    path: [],\n                    type: 'object.without',\n                    context: {\n                        main: 'txt',\n                        mainWithLabel: 'txt',\n                        peer: 'upc',\n                        peerWithLabel: 'upc',\n                        label: 'value',\n                        value: { txt: 'test', upc: 'test' }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when a parameter is not a string","suites":["object","without()"],"updatePoint":{"line":3952,"column":51},"line":3952,"code":"        it('errors when a parameter is not a string', () => {\n\n            let error;\n            try {\n                Joi.object().without({});\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n\n            try {\n                Joi.object().without(123);\n                error = false;\n            }\n            catch (e) {\n                error = true;\n            }\n\n            expect(error).to.equal(true);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates when key is an empty string","suites":["object","without()"],"updatePoint":{"line":3976,"column":49},"line":3976,"code":"        it('validates when key is an empty string', () => {\n\n            const schema = Joi.object().without('', 'b');\n            Helper.validate(schema, [\n                [{ a: 'hi', b: 'there' }, true]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates when key is stripped","suites":["object","without()"],"updatePoint":{"line":3984,"column":42},"line":3984,"code":"        it('validates when key is stripped', () => {\n\n            const schema = Joi.object({\n                a: Joi.any().strip(),\n                b: Joi.any()\n            }).without('a', 'b');\n\n            Helper.validate(schema, [\n                [{ a: 'hi', b: 'there' }, true, { b: 'there' }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels","suites":["object","without()"],"updatePoint":{"line":3996,"column":26},"line":3996,"code":"        it('applies labels', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            }).without('a', ['b']);\n            Helper.validate(schema, [[{ a: 1, b: 'b' }, false, {\n                message: '\"first\" conflict with forbidden peer \"second\"',\n                path: [],\n                type: 'object.without',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peer: 'b',\n                    peerWithLabel: 'second',\n                    label: 'value',\n                    value: { a: 1, b: 'b' }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","without()"],"updatePoint":{"line":4017,"column":33},"line":4017,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            }).without('a', ['b.c', 'b.d']);\n\n            const sampleObject = { a: 'test', d: 9000 };\n            const sampleObject2 = { a: 'test', b: { d: 80 } };\n\n            Helper.validate(schema, [\n                [sampleObject, true],\n                [sampleObject2, false, {\n                    message: '\"a\" conflict with forbidden peer \"b.d\"',\n                    path: [],\n                    type: 'object.without',\n                    context: {\n                        main: 'a',\n                        mainWithLabel: 'a',\n                        peer: 'b.d',\n                        peerWithLabel: 'b.d',\n                        label: 'value',\n                        value: sampleObject2\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","without()"],"updatePoint":{"line":4046,"column":43},"line":4046,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .without('a', ['b.c', 'b.d']);\n\n            const sampleObject = { a: 'test', d: 9000 };\n            const sampleObject2 = { a: 'test', b: Object.assign(() => { }, { d: 80 }) };\n\n            Helper.validate(schema, [[sampleObject, true]]);\n\n            const error2 = schema.validate(sampleObject2).error;\n            expect(error2).to.be.an.error('\"a\" conflict with forbidden peer \"b.d\"');\n            expect(error2.details).to.equal([{\n                message: '\"a\" conflict with forbidden peer \"b.d\"',\n                path: [],\n                type: 'object.without',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'a',\n                    peer: 'b.d',\n                    peerWithLabel: 'b.d',\n                    label: 'value',\n                    value: error2.details[0].context.value\n                }\n            }]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with nested objects","suites":["object","without()"],"updatePoint":{"line":4077,"column":46},"line":4077,"code":"        it('applies labels with nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .without('a', ['b.c']);\n\n            Helper.validate(schema, [[{ a: 1, b: { c: 'c' } }, false, {\n                message: '\"first\" conflict with forbidden peer \"b.second\"',\n                path: [],\n                type: 'object.without',\n                context: {\n                    main: 'a',\n                    mainWithLabel: 'first',\n                    peer: 'b.c',\n                    peerWithLabel: 'b.second',\n                    label: 'value',\n                    value: { a: 1, b: { c: 'c' } }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates keys with prefix characters","suites":["object","without()"],"updatePoint":{"line":4103,"column":49},"line":4103,"code":"        it('validates keys with prefix characters', () => {\n\n            const schema = Joi.object({\n                $a: Joi.number(),\n                '#b': Joi.number(),\n                '/c': Joi.number()\n            })\n                .without('$a', ['#b', '/c']);\n\n            Helper.validate(schema, [\n                [{ $a: 1 }, true],\n                [{ '#b': 1 }, true],\n                [{ '/c': 1 }, true],\n                [{ $a: 1, '/c': 1 }, false, '\"$a\" conflict with forbidden peer \"/c\"']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates xor","suites":["object","xor()"],"updatePoint":{"line":4123,"column":25},"line":4123,"code":"        it('validates xor', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string()\n            }).xor('txt', 'upc');\n\n            Helper.validate(schema, { abortEarly: false }, [[{}, false, {\n                message: '\"value\" must contain at least one of [txt, upc]',\n                details: [{\n                    message: '\"value\" must contain at least one of [txt, upc]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['txt', 'upc'],\n                        peersWithLabels: ['txt', 'upc'],\n                        label: 'value',\n                        value: {}\n                    }\n                }]\n            }]]);\n\n            Helper.validate(schema, [\n                [{ upc: null }, false, {\n                    message: '\"upc\" must be a string',\n                    path: ['upc'],\n                    type: 'string.base',\n                    context: { value: null, label: 'upc', key: 'upc' }\n                }],\n                [{ upc: 'test' }, true],\n                [{ txt: null }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test' }, true],\n                [{ txt: 'test', upc: null }, false, {\n                    message: '\"upc\" must be a string',\n                    path: ['upc'],\n                    type: 'string.base',\n                    context: { value: null, label: 'upc', key: 'upc' }\n                }],\n                [{ txt: 'test', upc: '' }, false, {\n                    message: '\"upc\" is not allowed to be empty',\n                    path: ['upc'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'upc', key: 'upc' }\n                }],\n                [{ txt: '', upc: 'test' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: null, upc: 'test' }, false, {\n                    message: '\"txt\" must be a string',\n                    path: ['txt'],\n                    type: 'string.base',\n                    context: { value: null, label: 'txt', key: 'txt' }\n                }],\n                [{ txt: undefined, upc: 'test' }, true],\n                [{ txt: 'test', upc: undefined }, true],\n                [{ txt: '', upc: undefined }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: '', upc: '' }, false, {\n                    message: '\"txt\" is not allowed to be empty',\n                    path: ['txt'],\n                    type: 'string.empty',\n                    context: { value: '', label: 'txt', key: 'txt' }\n                }],\n                [{ txt: 'test', upc: 'test' }, false, {\n                    message: '\"value\" contains a conflict between exclusive peers [txt, upc]',\n                    path: [],\n                    type: 'object.xor',\n                    context: {\n                        peers: ['txt', 'upc'],\n                        peersWithLabels: ['txt', 'upc'],\n                        present: ['txt', 'upc'],\n                        presentWithLabels: ['txt', 'upc'],\n                        label: 'value',\n                        value: { txt: 'test', upc: 'test' }\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates multiple peers xor","suites":["object","xor()"],"updatePoint":{"line":4214,"column":40},"line":4214,"code":"        it('validates multiple peers xor', () => {\n\n            const schema = Joi.object({\n                txt: Joi.string(),\n                upc: Joi.string(),\n                code: Joi.string()\n            }).xor('txt', 'upc', 'code');\n\n            Helper.validate(schema, [\n                [{ upc: 'test' }, true],\n                [{ txt: 'test' }, true],\n                [{}, false, {\n                    message: '\"value\" must contain at least one of [txt, upc, code]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['txt', 'upc', 'code'],\n                        peersWithLabels: ['txt', 'upc', 'code'],\n                        label: 'value',\n                        value: {}\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates xor with number types","suites":["object","xor()"],"updatePoint":{"line":4239,"column":43},"line":4239,"code":"        it('validates xor with number types', () => {\n\n            const schema = Joi.object({\n                code: Joi.number(),\n                upc: Joi.number()\n            }).xor('code', 'upc');\n\n            Helper.validate(schema, [\n                [{ upc: 123 }, true],\n                [{ code: 456 }, true],\n                [{ code: 456, upc: 123 }, false, {\n                    message: '\"value\" contains a conflict between exclusive peers [code, upc]',\n                    path: [],\n                    type: 'object.xor',\n                    context: {\n                        peers: ['code', 'upc'],\n                        peersWithLabels: ['code', 'upc'],\n                        present: ['code', 'upc'],\n                        presentWithLabels: ['code', 'upc'],\n                        label: 'value',\n                        value: { code: 456, upc: 123 }\n                    }\n                }],\n                [{}, false, {\n                    message: '\"value\" must contain at least one of [code, upc]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['code', 'upc'],\n                        peersWithLabels: ['code', 'upc'],\n                        label: 'value',\n                        value: {}\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"validates xor when empty value of peer allowed","suites":["object","xor()"],"updatePoint":{"line":4276,"column":58},"line":4276,"code":"        it('validates xor when empty value of peer allowed', () => {\n\n            const schema = Joi.object({\n                code: Joi.string(),\n                upc: Joi.string().allow('')\n            })\n                .xor('code', 'upc');\n\n            Helper.validate(schema, [\n                [{ upc: '' }, true],\n                [{ upc: '123' }, true],\n                [{ code: '456' }, true],\n                [{ code: '456', upc: '' }, false, {\n                    message: '\"value\" contains a conflict between exclusive peers [code, upc]',\n                    path: [],\n                    type: 'object.xor',\n                    context: {\n                        peers: ['code', 'upc'],\n                        peersWithLabels: ['code', 'upc'],\n                        present: ['code', 'upc'],\n                        presentWithLabels: ['code', 'upc'],\n                        label: 'value',\n                        value: { code: '456', upc: '' }\n                    }\n                }],\n                [{}, false, {\n                    message: '\"value\" must contain at least one of [code, upc]',\n                    path: [],\n                    type: 'object.missing',\n                    context: {\n                        peers: ['code', 'upc'],\n                        peersWithLabels: ['code', 'upc'],\n                        label: 'value',\n                        value: {}\n                    }\n                }]\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"errors when a parameter is not a string","suites":["object","xor()"],"updatePoint":{"line":4315,"column":51},"line":4315,"code":"        it('errors when a parameter is not a string', () => {\n\n            expect(() => Joi.object().xor({})).to.throw();\n            expect(() => Joi.object().xor(123)).to.throw();\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels without any peer","suites":["object","xor()"],"updatePoint":{"line":4321,"column":43},"line":4321,"code":"        it('applies labels without any peer', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            })\n                .xor('a', 'b');\n\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must contain at least one of [first, second]',\n                path: [],\n                type: 'object.missing',\n                context: {\n                    peers: ['a', 'b'],\n                    peersWithLabels: ['first', 'second'],\n                    label: 'value',\n                    value: {}\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with too many peers","suites":["object","xor()"],"updatePoint":{"line":4342,"column":46},"line":4342,"code":"        it('applies labels with too many peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second')\n            })\n                .xor('a', 'b');\n\n            Helper.validate(schema, [[{ a: 1, b: 'b' }, false, {\n                message: '\"value\" contains a conflict between exclusive peers [first, second]',\n                path: [],\n                type: 'object.xor',\n                context: {\n                    peers: ['a', 'b'],\n                    peersWithLabels: ['first', 'second'],\n                    present: ['a', 'b'],\n                    presentWithLabels: ['first', 'second'],\n                    label: 'value',\n                    value: { a: 1, b: 'b' }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with too many peers","suites":["object","xor()"],"updatePoint":{"line":4365,"column":46},"line":4365,"code":"        it('applies labels with too many peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.string().label('second'),\n                c: Joi.string().label('third'),\n                d: Joi.string().label('fourth')\n            })\n                .xor('a', 'b', 'c', 'd');\n\n            Helper.validate(schema, [[{ a: 1, b: 'b', d: 'd' }, false, {\n                message: '\"value\" contains a conflict between exclusive peers [first, second, third, fourth]',\n                path: [],\n                type: 'object.xor',\n                context: {\n                    peers: ['a', 'b', 'c', 'd'],\n                    peersWithLabels: ['first', 'second', 'third', 'fourth'],\n                    present: ['a', 'b', 'd'],\n                    presentWithLabels: ['first', 'second', 'fourth'],\n                    label: 'value',\n                    value: { a: 1, b: 'b', d: 'd' }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested objects","suites":["object","xor()"],"updatePoint":{"line":4390,"column":33},"line":4390,"code":"        it('allows nested objects', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.object({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .xor('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: { d: 80 } }, true],\n                [{ a: 'test', b: { c: 'test2' } }, false, '\"value\" contains a conflict between exclusive peers [a, b.c]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"allows nested keys in functions","suites":["object","xor()"],"updatePoint":{"line":4405,"column":43},"line":4405,"code":"        it('allows nested keys in functions', () => {\n\n            const schema = Joi.object({\n                a: Joi.string(),\n                b: Joi.function().keys({ c: Joi.string(), d: Joi.number() }),\n                d: Joi.number()\n            })\n                .xor('a', 'b.c');\n\n            Helper.validate(schema, [\n                [{ a: 'test', b: Object.assign(() => { }, { d: 80 }) }, true, Helper.skip],\n                [{ a: 'test', b: Object.assign(() => { }, { c: 'test2' }) }, false, '\"value\" contains a conflict between exclusive peers [a, b.c]']\n            ]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels without any nested peers","suites":["object","xor()"],"updatePoint":{"line":4420,"column":51},"line":4420,"code":"        it('applies labels without any nested peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .xor('a', 'b.c');\n\n            Helper.validate(schema, [[{}, false, {\n                message: '\"value\" must contain at least one of [first, b.second]',\n                path: [],\n                type: 'object.missing',\n                context: {\n                    peers: ['a', 'b.c'],\n                    peersWithLabels: ['first', 'b.second'],\n                    label: 'value',\n                    value: {}\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"applies labels with too many nested peers","suites":["object","xor()"],"updatePoint":{"line":4444,"column":53},"line":4444,"code":"        it('applies labels with too many nested peers', () => {\n\n            const schema = Joi.object({\n                a: Joi.number().label('first'),\n                b: Joi.object({\n                    c: Joi.string().label('second'),\n                    d: Joi.number()\n                })\n            })\n                .xor('a', 'b.c');\n\n            Helper.validate(schema, [[{ a: 1, b: { c: 'c' } }, false, {\n                message: '\"value\" contains a conflict between exclusive peers [first, b.second]',\n                path: [],\n                type: 'object.xor',\n                context: {\n                    peers: ['a', 'b.c'],\n                    peersWithLabels: ['first', 'b.second'],\n                    present: ['a', 'b.c'],\n                    presentWithLabels: ['first', 'b.second'],\n                    label: 'value',\n                    value: { a: 1, b: { c: 'c' } }\n                }\n            }]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"handles period in key names","suites":["object","xor()"],"updatePoint":{"line":4470,"column":39},"line":4470,"code":"        it('handles period in key names', () => {\n\n            const schema = Joi.object({\n                'x.from': Joi.string().lowercase().email(),\n                'x.url': Joi.string().uri({ scheme: ['https'] })\n            })\n                .xor('x.from', 'x.url', { separator: false });\n\n            const test = { 'x.url': 'https://example.com' };\n            Helper.validate(schema, [[test, true, test]]);\n        });","file":"types/object.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["string"],"updatePoint":{"line":22,"column":59},"line":22,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.string('invalid argument.')).to.throw('The string type does not allow arguments');\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"blocks empty strings by default","suites":["string"],"updatePoint":{"line":27,"column":39},"line":27,"code":"    it('blocks empty strings by default', () => {\n\n        Helper.validate(Joi.string(), [['', false, '\"value\" is not allowed to be empty']]);\n        Helper.validate(Joi.string().allow('x'), [['', false, '\"value\" is not allowed to be empty']]);\n        Helper.validate(Joi.string().allow(''), [['', true]]);\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"fails on boolean","suites":["string"],"updatePoint":{"line":34,"column":24},"line":34,"code":"    it('fails on boolean', () => {\n\n        const schema = Joi.string();\n        Helper.validate(schema, [\n            [true, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: true, label: 'value' }\n            }],\n            [false, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: false, label: 'value' }\n            }]\n        ]);\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"fails on integer","suites":["string"],"updatePoint":{"line":53,"column":24},"line":53,"code":"    it('fails on integer', () => {\n\n        const schema = Joi.string();\n        Helper.validate(schema, [\n            [123, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 123, label: 'value' }\n            }],\n            [0, false, {\n                message: '\"value\" must be a string',\n                path: [],\n                type: 'string.base',\n                context: { value: 0, label: 'value' }\n            }],\n            ['123', true],\n            ['0', true]\n        ]);\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"allows undefined, deny empty string","suites":["string"],"updatePoint":{"line":74,"column":43},"line":74,"code":"    it('allows undefined, deny empty string', () => {\n\n        Helper.validate(Joi.string(), [\n            [undefined, true],\n            ['', false, {\n                message: '\"value\" is not allowed to be empty',\n                path: [],\n                type: 'string.empty',\n                context: { value: '', label: 'value' }\n            }]\n        ]);\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates null","suites":["string"],"updatePoint":{"line":87,"column":22},"line":87,"code":"    it('validates null', () => {\n\n        Helper.validate(Joi.string(), [[null, false, {\n            message: '\"value\" must be a string',\n            path: [],\n            type: 'string.base',\n            context: { value: null, label: 'value' }\n        }]]);\n\n        expect(Joi.string().validate(null).error.annotate()).to.equal('\"value\" must be a string');\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"supports own properties references","suites":["string"],"updatePoint":{"line":99,"column":42},"line":99,"code":"    it('supports own properties references', () => {\n\n        const schema = Joi.string()\n            .when('.length', { is: 3, then: 'abc', break: true })\n            .when('.0', { is: 'a', then: 'axxx' });\n\n        Helper.validate(schema, [\n            ['abc', true],\n            ['axxx', true]\n        ]);\n    });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of allow('') and min","suites":["string","allow()"],"updatePoint":{"line":113,"column":56},"line":113,"code":"        it('validates combination of allow(\\'\\') and min', () => {\n\n            const rule = Joi.string().allow('').min(3);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 3 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 3,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', true],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of allow('') and max","suites":["string","allow()"],"updatePoint":{"line":140,"column":56},"line":140,"code":"        it('validates combination of allow(\\'\\') and max', () => {\n\n            const rule = Joi.string().allow('').max(3);\n            Helper.validate(rule, [\n                ['x', true],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of null allowed and max","suites":["string","allow()"],"updatePoint":{"line":167,"column":57},"line":167,"code":"        it('validates combination of null allowed and max', () => {\n\n            const rule = Joi.string().allow(null).max(3);\n            Helper.validate(rule, [\n                ['x', true],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates null with allow(null)","suites":["string","allow()"],"updatePoint":{"line":194,"column":43},"line":194,"code":"        it('validates null with allow(null)', () => {\n\n            Helper.validate(Joi.string().allow(null), [\n                [null, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates \"\" (empty string) with allow('')","suites":["string","allow()"],"updatePoint":{"line":201,"column":56},"line":201,"code":"        it('validates \"\" (empty string) with allow(\\'\\')', () => {\n\n            Helper.validate(Joi.string().allow(''), [\n                ['', true],\n                ['', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates alphanum","suites":["string","alphanum()"],"updatePoint":{"line":212,"column":30},"line":212,"code":"        it('validates alphanum', () => {\n\n            const schema = Joi.string().alphanum();\n            Helper.validate(schema, [\n                ['w0rld of w4lm4rtl4bs', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: 'w0rld of w4lm4rtl4bs', label: 'value' }\n                }],\n                ['w0rldofw4lm4rtl4bs', true],\n                ['abcd#f?h1j orly?', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: 'abcd#f?h1j orly?', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, and alphanum","suites":["string","alphanum()"],"updatePoint":{"line":232,"column":59},"line":232,"code":"        it('validates combination of min, max, and alphanum', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum();\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, alphanum, and allow('')","suites":["string","alphanum()"],"updatePoint":{"line":294,"column":72},"line":294,"code":"        it('validates combination of min, max, alphanum, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum().allow('');\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, alphanum, and required","suites":["string","alphanum()"],"updatePoint":{"line":351,"column":69},"line":351,"code":"        it('validates combination of min, max, alphanum, and required', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum().required();\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, alphanum, and regex","suites":["string","alphanum()"],"updatePoint":{"line":413,"column":66},"line":413,"code":"        it('validates combination of min, max, alphanum, and regex', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum().regex(/^a/);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['a2c', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, alphanum, required, and regex","suites":["string","alphanum()"],"updatePoint":{"line":496,"column":76},"line":496,"code":"        it('validates combination of min, max, alphanum, required, and regex', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum().required().regex(/^a/);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['a2c', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, alphanum, allow(''), and regex","suites":["string","alphanum()"],"updatePoint":{"line":579,"column":79},"line":579,"code":"        it('validates combination of min, max, alphanum, allow(\\'\\'), and regex', () => {\n\n            const rule = Joi.string().min(2).max(3).alphanum().allow('').regex(/^a/);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['a2c', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must only contain alpha-numeric characters',\n                    path: [],\n                    type: 'string.alphanum',\n                    context: { value: '*ab', label: 'value' }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates the base64 options","suites":["string","base64()"],"updatePoint":{"line":660,"column":40},"line":660,"code":"        it('validates the base64 options', () => {\n\n            expect(() => Joi.string().base64('a')).to.throw('Options must be of type object');\n            expect(() => Joi.string().base64({ paddingRequired: 'a' })).to.throw('paddingRequired must be boolean');\n            expect(() => Joi.string().base64({ urlSafe: 'a' })).to.throw('urlSafe must be boolean');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a base64 string with no options","suites":["string","base64()"],"updatePoint":{"line":667,"column":53},"line":667,"code":"        it('validates a base64 string with no options', () => {\n\n            const rule = Joi.string().base64();\n            Helper.validate(rule, [\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['YW55IGNh+/5hbCBwbGVhc3VyZS4=', true],\n                ['=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hb-_wbGVhc3VyZS4=', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hb-_wbGVhc3VyZS4=',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['Y=', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y=',\n                        label: 'value'\n                    }\n                }],\n                ['Y===', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y===',\n                        label: 'value'\n                    }\n                }],\n                ['YW', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW',\n                        label: 'value'\n                    }\n                }],\n                ['YW==', true],\n                ['YW5', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW5',\n                        label: 'value'\n                    }\n                }],\n                ['YW5=', true],\n                ['$#%#$^$^)(*&^%', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '$#%#$^$^)(*&^%',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a base64 string with padding explicitly required","suites":["string","base64()"],"updatePoint":{"line":759,"column":70},"line":759,"code":"        it('validates a base64 string with padding explicitly required', () => {\n\n            const rule = Joi.string().base64({ paddingRequired: true });\n            Helper.validate(rule, [\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['Y=', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y=',\n                        label: 'value'\n                    }\n                }],\n                ['Y===', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y===',\n                        label: 'value'\n                    }\n                }],\n                ['YW', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW',\n                        label: 'value'\n                    }\n                }],\n                ['YW==', true],\n                ['YW5', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW5',\n                        label: 'value'\n                    }\n                }],\n                ['YW5=', true],\n                ['$#%#$^$^)(*&^%', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '$#%#$^$^)(*&^%',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a base64 string with padding not required","suites":["string","base64()"],"updatePoint":{"line":841,"column":63},"line":841,"code":"        it('validates a base64 string with padding not required', () => {\n\n            const rule = Joi.string().base64({ paddingRequired: false });\n            Helper.validate(rule, [\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4', true],\n                ['=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IG==cm5hbCBwbGVhc3VyZS4=', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IG==cm5hbCBwbGVhc3VyZS4=',\n                        label: 'value'\n                    }\n                }],\n                ['Y$', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y$',\n                        label: 'value'\n                    }\n                }],\n                ['Y', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y',\n                        label: 'value'\n                    }\n                }],\n                ['Y===', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'Y===',\n                        label: 'value'\n                    }\n                }],\n                ['YW', true],\n                ['YW==', true],\n                ['YW5', true],\n                ['YW5=', true],\n                ['$#%#$^$^)(*&^%', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '$#%#$^$^)(*&^%',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a url-safe base64 string with padding explicitly required","suites":["string","base64()"],"updatePoint":{"line":926,"column":79},"line":926,"code":"        it('validates a url-safe base64 string with padding explicitly required', () => {\n\n            const rule = Joi.string().base64({ urlSafe: true, paddingRequired: true });\n            Helper.validate(rule, [\n                ['YW55IGNhcm5hb-_wbGVhc3VyZS4=', true],\n                ['=YW55IGNhcm5-_CBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: '=YW55IGNhcm5-_CBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm5+/CBwbGVhc3VyZS4=', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5+/CBwbGVhc3VyZS4=',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a url-safe base64 string with padding not required","suites":["string","base64()"],"updatePoint":{"line":952,"column":72},"line":952,"code":"        it('validates a url-safe base64 string with padding not required', () => {\n\n            const rule = Joi.string().base64({ urlSafe: true, paddingRequired: false });\n            Helper.validate(rule, [\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['YW55IGNhcm-_bCBwbGVhc3VyZS4=', true],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4', true],\n                ['YW55IGNhc-_hbCBwbGVhc3VyZS4', true],\n                ['YW55IGNhcm5hbCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm5hbCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }],\n                ['YW55IGNhcm-_bCBwbGVhc3VyZS4==', false, {\n                    message: '\"value\" must be a valid base64 string',\n                    path: [],\n                    type: 'string.base64',\n                    context: {\n                        value: 'YW55IGNhcm-_bCBwbGVhc3VyZS4==',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate credit card","suites":["string","creditCard()"],"updatePoint":{"line":984,"column":39},"line":984,"code":"        it('should validate credit card', () => {\n\n            const t = Joi.string().creditCard();\n\n            Helper.validate(t, [\n                ['378734493671000', true],  // american express\n                ['371449635398431', true],  // american express\n                ['378282246310005', true],  // american express\n                ['341111111111111', true],  // american express\n                ['5610591081018250', true], // australian bank\n                ['5019717010103742', true], // dankort pbs\n                ['38520000023237', true],   // diners club\n                ['30569309025904', true],   // diners club\n                ['6011000990139424', true], // discover\n                ['6011111111111117', true], // discover\n                ['6011601160116611', true], // discover\n                ['3566002020360505', true], // jbc\n                ['3530111333300000', true], // jbc\n                ['5105105105105100', true], // mastercard\n                ['5555555555554444', true], // mastercard\n                ['5431111111111111', true], // mastercard\n                ['6331101999990016', true], // switch/solo paymentech\n                ['4222222222222', true],    // visa\n                ['4012888888881881', true], // visa\n                ['4111111111111111', true], // visa\n                ['4111111111111112', false, {\n                    message: '\"value\" must be a credit card',\n                    path: [],\n                    type: 'string.creditCard',\n                    context: { value: '4111111111111112', label: 'value' }\n                }],\n                ['411111111111111X', false, {\n                    message: '\"value\" must be a credit card',\n                    path: [],\n                    type: 'string.creditCard',\n                    context: { value: '411111111111111X', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a dataUri string","suites":["string","dataUri()"],"updatePoint":{"line":1033,"column":38},"line":1033,"code":"        it('validates a dataUri string', () => {\n\n            const rule = Joi.string().dataUri();\n            Helper.validate(rule, [\n                ['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['data:image/png;charset=utf-8,=YW55IGNhcm5hbCBwbGVhc3VyZS', true],\n                ['data:text/x-script.python;charset=utf-8,=YW55IGNhcm5hbCBwbGVhc3VyZS', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a dataUri string with padding explicitly required","suites":["string","dataUri()"],"updatePoint":{"line":1081,"column":71},"line":1081,"code":"        it('validates a dataUri string with padding explicitly required', () => {\n\n            const rule = Joi.string().dataUri({ paddingRequired: true });\n            Helper.validate(rule, [\n                ['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['data:image/png;charset=utf-8,=YW55IGNhcm5hbCBwbGVhc3VyZS', true]\n            ]);\n\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates a dataUri string with padding not required","suites":["string","dataUri()"],"updatePoint":{"line":1129,"column":64},"line":1129,"code":"        it('validates a dataUri string with padding not required', () => {\n\n            const rule = Joi.string().dataUri({ paddingRequired: false });\n            Helper.validate(rule, [\n                ['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'ata:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', true],\n                ['base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAABJRU5ErkJggg==',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4', false, {\n                    message: '\"value\" must be a valid dataUri string',\n                    path: [],\n                    type: 'string.dataUri',\n                    context: {\n                        value: 'data:image/png;base64,=YW55IGNhcm5hbCBwbGVhc3VyZS4',\n                        label: 'value'\n                    }\n                }],\n                ['data:image/png;base64,YW55IGNhcm5hbCBwbGVhc3VyZS4=', true],\n                ['data:image/png;charset=utf-8,=YW55IGNhcm5hbCBwbGVhc3VyZS', true]\n            ]);\n\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"describes various versions of a guid","suites":["string","describe()"],"updatePoint":{"line":1180,"column":48},"line":1180,"code":"        it('describes various versions of a guid', () => {\n\n            const schema = Joi.string().guid({ version: ['uuidv1', 'uuidv3', 'uuidv5'] });\n\n            expect(schema.describe()).to.equal({\n                type: 'string',\n                rules: [\n                    {\n                        name: 'guid',\n                        args: {\n                            options: {\n                                version: ['uuidv1', 'uuidv3', 'uuidv5']\n                            }\n                        }\n                    }\n                ]\n            });\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"describes invert regex pattern","suites":["string","describe()"],"updatePoint":{"line":1199,"column":42},"line":1199,"code":"        it('describes invert regex pattern', () => {\n\n            const schema = Joi.string().regex(/[a-z]/, { invert: true });\n\n            expect(schema.describe()).to.equal({\n                type: 'string',\n                rules: [\n                    {\n                        name: 'pattern',\n                        args: {\n                            regex: '/[a-z]/',\n                            options: {\n                                invert: true\n                            }\n                        }\n                    }\n                ]\n            });\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates options","suites":["string","domain()"],"updatePoint":{"line":1222,"column":29},"line":1222,"code":"        it('validates options', () => {\n\n            expect(() => Joi.string().domain({ minDomainSegments: 1 })).to.not.throw();\n            expect(() => Joi.string().domain({ minDomainSegments: '1' })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ minDomainSegments: 0 })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ minDomainSegments: -1 })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ minDomainSegments: 2.3 })).to.throw('minDomainSegments must be a positive integer');\n\n            expect(() => Joi.string().domain({ maxDomainSegments: 4 })).to.not.throw();\n            expect(() => Joi.string().domain({ maxDomainSegments: '1' })).to.throw('maxDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ maxDomainSegments: 0 })).to.throw('maxDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ maxDomainSegments: -1 })).to.throw('maxDomainSegments must be a positive integer');\n            expect(() => Joi.string().domain({ maxDomainSegments: 2.3 })).to.throw('maxDomainSegments must be a positive integer');\n\n            expect(() => Joi.string().domain({ tlds: false })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: true })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: {} })).to.not.throw();\n\n            expect(() => Joi.string().domain({ tlds: { allow: true } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { allow: false } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { allow: ['com'] } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { allow: new Set(['com']) } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { allow: 'com' } })).to.throw('tlds.allow must be an array, Set, or boolean');\n            expect(() => Joi.string().domain({ tlds: { allow: { com: true } } })).to.throw('tlds.allow must be an array, Set, or boolean');\n            expect(() => Joi.string().domain({ tlds: { allow: ['co.uk'] } })).to.throw('tlds.allow must contain valid top level domain names');\n\n            expect(() => Joi.string().domain({ tlds: { deny: ['com'] } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { deny: false } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { deny: new Set(['com']) } })).to.not.throw();\n            expect(() => Joi.string().domain({ tlds: { deny: true } })).to.throw('tlds.deny must be an array, Set, or boolean');\n            expect(() => Joi.string().domain({ tlds: { deny: 'com' } })).to.throw('tlds.deny must be an array, Set, or boolean');\n            expect(() => Joi.string().domain({ tlds: { deny: { com: true } } })).to.throw('tlds.deny must be an array, Set, or boolean');\n            expect(() => Joi.string().domain({ tlds: { deny: ['co.uk'] } })).to.throw('tlds.deny must contain valid top level domain names');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates domain","suites":["string","domain()"],"updatePoint":{"line":1257,"column":28},"line":1257,"code":"        it('validates domain', () => {\n\n            const schema = Joi.string().domain();\n            Helper.validate(schema, [\n                ['example.com', true],\n                ['com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: 'com', label: 'value' }\n                }],\n                ['\"example.com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: '\"example.com', label: 'value' }\n                }],\n                ['mail@example.com', false, '\"value\" must contain a valid domain name']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates domain with tlds.allow","suites":["string","domain()"],"updatePoint":{"line":1278,"column":44},"line":1278,"code":"        it('validates domain with tlds.allow', () => {\n\n            const schema = Joi.string().domain({ tlds: { allow: ['com', 'org'] } });\n            Helper.validate(schema, [\n                ['example.com', true],\n                ['example.org', true],\n                ['example.edu', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: 'example.edu', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates domain with minDomainSegments","suites":["string","domain()"],"updatePoint":{"line":1293,"column":51},"line":1293,"code":"        it('validates domain with minDomainSegments', () => {\n\n            const schema = Joi.string().domain({ minDomainSegments: 4 });\n            Helper.validate(schema, [\n                ['example.com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: 'example.com', label: 'value' }\n                }],\n                ['www.example.com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: 'www.example.com', label: 'value' }\n                }],\n                ['sub.www.example.com', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates domain with maxDomainSegments","suites":["string","domain()"],"updatePoint":{"line":1313,"column":51},"line":1313,"code":"        it('validates domain with maxDomainSegments', () => {\n\n            const schema = Joi.string().domain({ maxDomainSegments: 4 });\n            Helper.validate(schema, [\n                ['x.y.z.example.com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: { value: 'x.y.z.example.com', label: 'value' }\n                }],\n                ['sub.www.example.com', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates domain","suites":["string","domain()"],"updatePoint":{"line":1327,"column":28},"line":1327,"code":"        it('validates domain', () => {\n\n            const schema = { item: Joi.string().domain() };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must contain a valid domain name',\n                path: ['item'],\n                type: 'string.domain',\n                context: { value: 'something', label: 'item', key: 'item' }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates options","suites":["string","email()"],"updatePoint":{"line":1341,"column":29},"line":1341,"code":"        it('validates options', () => {\n\n            expect(() => Joi.string().email({})).to.not.throw();\n            expect(() => Joi.string().email({ minDomainSegments: 1 })).to.not.throw();\n            expect(() => Joi.string().email({ minDomainSegments: '1' })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().email({ minDomainSegments: 0 })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().email({ minDomainSegments: -1 })).to.throw('minDomainSegments must be a positive integer');\n            expect(() => Joi.string().email({ minDomainSegments: 2.3 })).to.throw('minDomainSegments must be a positive integer');\n\n            expect(() => Joi.string().email({ tlds: false })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: true })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: {} })).to.not.throw();\n\n            expect(() => Joi.string().email({ tlds: { allow: true } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { allow: false } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { allow: ['com'] } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { allow: new Set(['com']) } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { allow: 'com' } })).to.throw('tlds.allow must be an array, Set, or boolean');\n            expect(() => Joi.string().email({ tlds: { allow: { com: true } } })).to.throw('tlds.allow must be an array, Set, or boolean');\n\n            expect(() => Joi.string().email({ tlds: { deny: ['com'] } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { deny: new Set(['com']) } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { deny: false } })).to.not.throw();\n            expect(() => Joi.string().email({ tlds: { deny: true } })).to.throw('tlds.deny must be an array, Set, or boolean');\n            expect(() => Joi.string().email({ tlds: { deny: 'com' } })).to.throw('tlds.deny must be an array, Set, or boolean');\n            expect(() => Joi.string().email({ tlds: { deny: { com: true } } })).to.throw('tlds.deny must be an array, Set, or boolean');\n\n            expect(() => Joi.string().email({ multiple: true })).to.not.throw();\n            expect(() => Joi.string().email({ multiple: false })).to.not.throw();\n            expect(() => Joi.string().email({ multiple: {} })).to.throw('multiple option must be an boolean');\n            expect(() => Joi.string().email({ multiple: 'abc' })).to.throw('multiple option must be an boolean');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email","suites":["string","email()"],"updatePoint":{"line":1374,"column":27},"line":1374,"code":"        it('validates email', () => {\n\n            const schema = Joi.string().email();\n            Helper.validate(schema, [\n                ['joe@example.com', true],\n                ['êjness@something.com', true],\n                ['\"joe\"@example.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: '\"joe\"@example.com', invalids: ['\"joe\"@example.com'], label: 'value' }\n                }],\n                ['example@io', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'example@io', invalids: ['example@io'], label: 'value' }\n                }],\n                ['@iaminvalid.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: '@iaminvalid.com', invalids: ['@iaminvalid.com'], label: 'value' }\n                }],\n                ['joe@[IPv6:2a00:1450:4001:c02::1b]', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@[IPv6:2a00:1450:4001:c02::1b]', invalids: ['joe@[IPv6:2a00:1450:4001:c02::1b]'], label: 'value' }\n                }],\n                ['12345678901234567890123456789012345678901234567890123456789012345@example.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: '12345678901234567890123456789012345678901234567890123456789012345@example.com', invalids: ['12345678901234567890123456789012345678901234567890123456789012345@example.com'], label: 'value' }\n                }],\n                ['123456789012345678901234567890123456789012345678901234567890@12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345.toolong.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: '123456789012345678901234567890123456789012345678901234567890@12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345.toolong.com', invalids: ['123456789012345678901234567890123456789012345678901234567890@12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345.toolong.com'], label: 'value' }\n                }],\n                ['foo@bar%2ecom', false, '\"value\" must be a valid email']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"allows long emails","suites":["string","email()"],"updatePoint":{"line":1420,"column":30},"line":1420,"code":"        it('allows long emails', () => {\n\n            const schema = Joi.string().email({ ignoreLength: true });\n            Helper.validate(schema, [\n                ['12345678901234567890123456789012345678901234567890123456789012345@example.com', true],\n                ['123456789012345678901234567890123456789012345678901234567890@12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345678901234567890123456789012345678901234567890123456789.12345.toolong.com', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email with tlds.allow","suites":["string","email()"],"updatePoint":{"line":1429,"column":43},"line":1429,"code":"        it('validates email with tlds.allow', () => {\n\n            const schema = Joi.string().email({ tlds: { allow: ['com', 'org'] } });\n            Helper.validate(schema, [\n                ['joe@example.com', true],\n                ['joe@example.org', true],\n                ['joe@example.edu', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@example.edu', invalids: ['joe@example.edu'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email with tlds false","suites":["string","email()"],"updatePoint":{"line":1444,"column":43},"line":1444,"code":"        it('validates email with tlds false', () => {\n\n            const schema = Joi.string().email({ tlds: false });\n            Helper.validate(schema, [\n                ['joe@example.no-such-domain', true],\n                ['joe@example.org', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email with minDomainSegments","suites":["string","email()"],"updatePoint":{"line":1453,"column":50},"line":1453,"code":"        it('validates email with minDomainSegments', () => {\n\n            const schema = Joi.string().email({ minDomainSegments: 4 });\n            Helper.validate(schema, [\n                ['joe@example.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@example.com', invalids: ['joe@example.com'], label: 'value' }\n                }],\n                ['joe@www.example.com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@www.example.com', invalids: ['joe@www.example.com'], label: 'value' }\n                }],\n                ['joe@sub.www.example.com', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email with multiple","suites":["string","email()"],"updatePoint":{"line":1473,"column":41},"line":1473,"code":"        it('validates email with multiple', () => {\n\n            const schema = Joi.string().email({ multiple: true });\n            Helper.validate(schema, [\n                ['joe@example.com', true],\n                ['joe@example.com, joe@example.org, joe@example.com', true],\n                ['joe@example.com , joe@example.org ,joe@example.com', true],\n                ['joe@example.com  , joe@example.org ,  joe@example.com', true],\n                ['joe@example.com, joe@example, joe@example.org, joe@com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@example.com, joe@example, joe@example.org, joe@com', invalids: ['joe@example', 'joe@com'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email with multiple (separator)","suites":["string","email()"],"updatePoint":{"line":1490,"column":53},"line":1490,"code":"        it('validates email with multiple (separator)', () => {\n\n            const schema = Joi.string().email({ multiple: true, separator: ';' });\n            Helper.validate(schema, [\n                ['joe@example.com', true],\n                ['joe@example.com; joe@example.org; joe@example.com', true],\n                ['joe@example.com ; joe@example.org ;joe@example.com', true],\n                ['joe@example.com  ; joe@example.org ;  joe@example.com', true],\n                ['joe@example.com; joe@example; joe@example.org; joe@com', false, {\n                    message: '\"value\" must be a valid email',\n                    path: [],\n                    type: 'string.email',\n                    context: { value: 'joe@example.com; joe@example; joe@example.org; joe@com', invalids: ['joe@example', 'joe@com'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates email","suites":["string","email()"],"updatePoint":{"line":1507,"column":27},"line":1507,"code":"        it('validates email', () => {\n\n            const schema = { item: Joi.string().email() };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must be a valid email',\n                path: ['item'],\n                type: 'string.email',\n                context: { value: 'something', invalids: ['something'], label: 'item', key: 'item' }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email and min","suites":["string","email()"],"updatePoint":{"line":1518,"column":50},"line":1518,"code":"        it('validates combination of email and min', () => {\n\n            const rule = Joi.string().email().min(8);\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', true],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, and max","suites":["string","email()"],"updatePoint":{"line":1549,"column":56},"line":1549,"code":"        it('validates combination of email, min, and max', () => {\n\n            const rule = Joi.string().email().min(8).max(10);\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', true],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, and invalid","suites":["string","email()"],"updatePoint":{"line":1592,"column":65},"line":1592,"code":"        it('validates combination of email, min, max, and invalid', () => {\n\n            const rule = Joi.string().email().min(8).max(10).invalid('123@x.com');\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: '123@x.com', invalids: ['123@x.com'], label: 'value' }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, and allow","suites":["string","email()"],"updatePoint":{"line":1640,"column":63},"line":1640,"code":"        it('validates combination of email, min, max, and allow', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com');\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', true],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, allow, and invalid","suites":["string","email()"],"updatePoint":{"line":1673,"column":72},"line":1673,"code":"        it('validates combination of email, min, max, allow, and invalid', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com').invalid('123@x.com');\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: '123@x.com', invalids: ['123@x.com'], label: 'value' }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, allow, invalid, and allow('')","suites":["string","email()"],"updatePoint":{"line":1711,"column":85},"line":1711,"code":"        it('validates combination of email, min, max, allow, invalid, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com').invalid('123@x.com').allow('');\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: '123@x.com', invalids: ['123@x.com'], label: 'value' }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, allow, and allow('')","suites":["string","email()"],"updatePoint":{"line":1744,"column":76},"line":1744,"code":"        it('validates combination of email, min, max, allow, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com').allow('');\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', true],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, allow, invalid, and regex","suites":["string","email()"],"updatePoint":{"line":1772,"column":79},"line":1772,"code":"        it('validates combination of email, min, max, allow, invalid, and regex', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com').invalid('123@x.com').regex(/^1/);\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: '123@x.com', invalids: ['123@x.com'], label: 'value' }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, allow, invalid, regex, and allow('')","suites":["string","email()"],"updatePoint":{"line":1810,"column":92},"line":1810,"code":"        it('validates combination of email, min, max, allow, invalid, regex, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('x@x.com').invalid('123@x.com').regex(/^1/).allow('');\n            Helper.validate(rule, [\n                ['x@x.com', true],\n                ['123@x.com', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: '123@x.com', invalids: ['123@x.com'], label: 'value' }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, and allow('')","suites":["string","email()"],"updatePoint":{"line":1843,"column":69},"line":1843,"code":"        it('validates combination of email, min, max, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().email().min(8).max(10).allow('');\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', true],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, and regex","suites":["string","email()"],"updatePoint":{"line":1881,"column":63},"line":1881,"code":"        it('validates combination of email, min, max, and regex', () => {\n\n            const rule = Joi.string().email().min(8).max(10).regex(/^1234/);\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', false, {\n                    message: '\"value\" with value \"123@x.com\" fails to match the required pattern: /^1234/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^1234/,\n                        value: '123@x.com',\n                        label: 'value'\n                    }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, regex, and allow('')","suites":["string","email()"],"updatePoint":{"line":1934,"column":76},"line":1934,"code":"        it('validates combination of email, min, max, regex, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().email().min(8).max(10).regex(/^1234/).allow('');\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', false, {\n                    message: '\"value\" with value \"123@x.com\" fails to match the required pattern: /^1234/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^1234/,\n                        value: '123@x.com',\n                        label: 'value'\n                    }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of email, min, max, regex, and required","suites":["string","email()"],"updatePoint":{"line":1982,"column":73},"line":1982,"code":"        it('validates combination of email, min, max, regex, and required', () => {\n\n            const rule = Joi.string().email().min(8).max(10).regex(/^1234/).required();\n            Helper.validate(rule, [\n                ['x@x.com', false, {\n                    message: '\"value\" length must be at least 8 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 8,\n                        value: 'x@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123@x.com', false, {\n                    message: '\"value\" with value \"123@x.com\" fails to match the required pattern: /^1234/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^1234/,\n                        value: '123@x.com',\n                        label: 'value'\n                    }\n                }],\n                ['1234@x.com', true],\n                ['12345@x.com', false, {\n                    message: '\"value\" length must be less than or equal to 10 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 10,\n                        value: '12345@x.com',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.version is invalid","suites":["string","guid()"],"updatePoint":{"line":2038,"column":50},"line":2038,"code":"        it('throws when options.version is invalid', () => {\n\n            expect(() => Joi.string().guid({ version: 42 })).to.throw('version at position 0 must be a string');\n            expect(() => Joi.string().guid({ version: '42' })).to.throw('version at position 0 must be one of uuidv1, uuidv2, uuidv3, uuidv4, uuidv5');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.separator is invalid","suites":["string","guid()"],"updatePoint":{"line":2044,"column":52},"line":2044,"code":"        it('throws when options.separator is invalid', () => {\n\n            expect(() => Joi.string().guid({ separator: 42 })).to.throw('separator must be one of true, false, \"-\", or \":\"');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates guid","suites":["string","guid()"],"updatePoint":{"line":2049,"column":26},"line":2049,"code":"        it('validates guid', () => {\n\n            Helper.validate(Joi.string().guid(), [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', true],\n                ['69593D62:71EA:4548:85E4:04FC71357423', true],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-0CD4-005E-EFDD53D08E8D}', true],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uuidv1","suites":["string","guid()"],"updatePoint":{"line":2137,"column":28},"line":2137,"code":"        it('validates uuidv1', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv1'] }), [\n                ['{D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F1DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-1548-85E4-04FC71357423', true],\n                ['677E2553DD4D13B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-1717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d1cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-1c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6241e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-1CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-1CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-1E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-1E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-1CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-1CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-1CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:1CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:1CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-1CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-1CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-1CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-1CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uuidv2","suites":["string","guid()"],"updatePoint":{"line":2241,"column":28},"line":2241,"code":"        it('validates uuidv2', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv2'] }), [\n                ['{D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F2DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-2548-85E4-04FC71357423', true],\n                ['677E2553DD4D23B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-2717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d2cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-2c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6242e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-2CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-2CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-2E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-2E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-2CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-2CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-2CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:2CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:2CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-2CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-2CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-2CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-2CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uuidv3","suites":["string","guid()"],"updatePoint":{"line":2345,"column":28},"line":2345,"code":"        it('validates uuidv3', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv3'] }), [\n                ['{D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F3DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-3548-85E4-04FC71357423', true],\n                ['677E2553DD4D33B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-3717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d3cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-3c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6243e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-3CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-3CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-3E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-3E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-3CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-3CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-3CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:3CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:3CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-3CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-3CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-3CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-3CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uuidv4","suites":["string","guid()"],"updatePoint":{"line":2449,"column":28},"line":2449,"code":"        it('validates uuidv4', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv4'] }), [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', true],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uuidv5","suites":["string","guid()"],"updatePoint":{"line":2553,"column":28},"line":2553,"code":"        it('validates uuidv5', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv5'] }), [\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F5DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-5548-85E4-04FC71357423', true],\n                ['677E2553DD4D53B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-5717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d5cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-5c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6245e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-5E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-5E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates multiple uuid versions (1,3,5)","suites":["string","guid()"],"updatePoint":{"line":2657,"column":52},"line":2657,"code":"        it('validates multiple uuid versions (1,3,5)', () => {\n\n            Helper.validate(Joi.string().guid({ version: ['uuidv1', 'uuidv3', 'uuidv5'] }), [\n                ['{D1A5279D-B27D-1CD4-805E-EFDD53D08E8D}', true],\n                ['{D1A5279D-B27D-3CD4-905E-EFDD53D08E8D}', true],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F5DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-5548-85E4-04FC71357423', true],\n                ['677E2553DD4D53B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-5717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d5cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-5c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6245e5eb0698e0c6ec66618', true],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-C05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-C05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-5E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-5E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D]', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D]',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D:B27D-5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D:B27D-5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D:5CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D:5CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4:A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4:A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-5CD4-A05E:EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-5CD4-A05E:EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates guid","suites":["string","guid()"],"updatePoint":{"line":2763,"column":26},"line":2763,"code":"        it('validates guid', () => {\n\n            const schema = { item: Joi.string().guid() };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must be a valid GUID',\n                path: ['item'],\n                type: 'string.guid',\n                context: { value: 'something', label: 'item', key: 'item' }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates separator","suites":["string","guid()"],"updatePoint":{"line":2774,"column":31},"line":2774,"code":"        it('validates separator', () => {\n\n            Helper.validate(Joi.string().guid({ separator: '-' }), [\n                ['69593D62-71EA-4548-85E4-04FC71357423', true],\n                ['69593D62:71EA:4548:85E4:04FC71357423', false, '\"value\" must be a valid GUID'],\n                ['b4b2fb69c6241e5eb0698e0c6ec66618', false, '\"value\" must be a valid GUID']\n            ]);\n\n            Helper.validate(Joi.string().guid({ separator: ':' }), [\n                ['69593D62:71EA:4548:85E4:04FC71357423', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, '\"value\" must be a valid GUID'],\n                ['b4b2fb69c6241e5eb0698e0c6ec66618', false, '\"value\" must be a valid GUID']\n            ]);\n\n            Helper.validate(Joi.string().guid({ separator: true }), [\n                ['69593D62-71EA-4548-85E4-04FC71357423', true],\n                ['69593D62:71EA:4548:85E4:04FC71357423', true],\n                ['b4b2fb69c6241e5eb0698e0c6ec66618', false, '\"value\" must be a valid GUID']\n            ]);\n\n            Helper.validate(Joi.string().guid({ separator: false }), [\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, '\"value\" must be a valid GUID'],\n                ['69593D62:71EA:4548:85E4:04FC71357423', false, '\"value\" must be a valid GUID'],\n                ['b4b2fb69c6241e5eb0698e0c6ec66618', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid and min","suites":["string","guid()"],"updatePoint":{"line":2801,"column":49},"line":2801,"code":"        it('validates combination of guid and min', () => {\n\n            const rule = Joi.string().guid().min(36);\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', true],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" length must be at least 36 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 36,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', true],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" length must be at least 36 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 36,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', true],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', false, {\n                    message: '\"value\" length must be at least 36 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 36,\n                        value: '{7e9081b59a6d4cc1a8c347f69fb4198d}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', true],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" length must be at least 36 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 36,\n                        value: 'b4b2fb69c6244e5eb0698e0c6ec66618',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min and max","suites":["string","guid()"],"updatePoint":{"line":2895,"column":54},"line":2895,"code":"        it('validates combination of guid, min and max', () => {\n\n            const rule = Joi.string().guid().min(32).max(34);\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max and invalid","suites":["string","guid()"],"updatePoint":{"line":2989,"column":63},"line":2989,"code":"        it('validates combination of guid, min, max and invalid', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).invalid('b4b2fb69c6244e5eb0698e0c6ec66618');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b4b2fb69c6244e5eb0698e0c6ec66618', invalids: ['b4b2fb69c6244e5eb0698e0c6ec66618'], label: 'value' }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max and allow","suites":["string","guid()"],"updatePoint":{"line":3088,"column":61},"line":3088,"code":"        it('validates combination of guid, min, max and allow', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, allow and invalid","suites":["string","guid()"],"updatePoint":{"line":3174,"column":70},"line":3174,"code":"        it('validates combination of guid, min, max, allow and invalid', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D').invalid('b4b2fb69c6244e5eb0698e0c6ec66618');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b4b2fb69c6244e5eb0698e0c6ec66618', invalids: ['b4b2fb69c6244e5eb0698e0c6ec66618'], label: 'value' }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, allow, invalid and allow('')","suites":["string","guid()"],"updatePoint":{"line":3265,"column":83},"line":3265,"code":"        it('validates combination of guid, min, max, allow, invalid and allow(\\'\\')', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D').invalid('b4b2fb69c6244e5eb0698e0c6ec66618').allow('');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b4b2fb69c6244e5eb0698e0c6ec66618', invalids: ['b4b2fb69c6244e5eb0698e0c6ec66618'], label: 'value' }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, allow and allow('')","suites":["string","guid()"],"updatePoint":{"line":3351,"column":74},"line":3351,"code":"        it('validates combination of guid, min, max, allow and allow(\\'\\')', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D').allow('');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, allow, invalid and regex","suites":["string","guid()"],"updatePoint":{"line":3432,"column":77},"line":3432,"code":"        it('validates combination of guid, min, max, allow, invalid and regex', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08').invalid('b4b2fb69c6244e5eb0698e0c6ec66618').regex(/^{7e908/);\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" with value \"{B59511BD6A5F4DF09ECF562A108D8A2E}\" fails to match the required pattern: /^{7e908/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e908/,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" with value \"677E2553DD4D43B09DA77414DB1EB8EA\" fails to match the required pattern: /^{7e908/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e908/,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b4b2fb69c6244e5eb0698e0c6ec66618', invalids: ['b4b2fb69c6244e5eb0698e0c6ec66618'], label: 'value' }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, allow, invalid, regex and allow('')","suites":["string","guid()"],"updatePoint":{"line":3543,"column":90},"line":3543,"code":"        it('validates combination of guid, min, max, allow, invalid, regex and allow(\\'\\')', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('{D1A5279D-B27D-4CD4-A05E-EFDD53D08').invalid('b4b2fb69c6244e5eb0698e0c6ec66618').regex(/^{7e908/).allow('');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" with value \"{B59511BD6A5F4DF09ECF562A108D8A2E}\" fails to match the required pattern: /^{7e908/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e908/,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" with value \"677E2553DD4D43B09DA77414DB1EB8EA\" fails to match the required pattern: /^{7e908/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e908/,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b4b2fb69c6244e5eb0698e0c6ec66618', invalids: ['b4b2fb69c6244e5eb0698e0c6ec66618'], label: 'value' }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08', true],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max and allow('')","suites":["string","guid()"],"updatePoint":{"line":3649,"column":67},"line":3649,"code":"        it('validates combination of guid, min, max and allow(\\'\\')', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).allow('');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', true],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', true],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', true],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max and regex","suites":["string","guid()"],"updatePoint":{"line":3738,"column":61},"line":3738,"code":"        it('validates combination of guid, min, max and regex', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i);\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" with value \"{B59511BD6A5F4DF09ECF562A108D8A2E}\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" with value \"677E2553DD4D43B09DA77414DB1EB8EA\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" with value \"b4b2fb69c6244e5eb0698e0c6ec66618\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: 'b4b2fb69c6244e5eb0698e0c6ec66618',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, regex and allow('')","suites":["string","guid()"],"updatePoint":{"line":3862,"column":74},"line":3862,"code":"        it('validates combination of guid, min, max, regex and allow(\\'\\')', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i).allow('');\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" with value \"{B59511BD6A5F4DF09ECF562A108D8A2E}\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" with value \"677E2553DD4D43B09DA77414DB1EB8EA\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" with value \"b4b2fb69c6244e5eb0698e0c6ec66618\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: 'b4b2fb69c6244e5eb0698e0c6ec66618',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of guid, min, max, regex and required","suites":["string","guid()"],"updatePoint":{"line":3981,"column":71},"line":3981,"code":"        it('validates combination of guid, min, max, regex and required', () => {\n\n            const rule = Joi.string().guid().min(32).max(34).regex(/^{7e9081/i).required();\n            Helper.validate(rule, [\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{B59511BD6A5F4DF09ECF562A108D8A2E}', false, {\n                    message: '\"value\" with value \"{B59511BD6A5F4DF09ECF562A108D8A2E}\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '{B59511BD6A5F4DF09ECF562A108D8A2E}',\n                        label: 'value'\n                    }\n                }],\n                ['69593D62-71EA-4548-85E4-04FC71357423', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '69593D62-71EA-4548-85E4-04FC71357423',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['677E2553DD4D43B09DA77414DB1EB8EA', false, {\n                    message: '\"value\" with value \"677E2553DD4D43B09DA77414DB1EB8EA\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: '677E2553DD4D43B09DA77414DB1EB8EA',\n                        label: 'value'\n                    }\n                }],\n                ['{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '{5ba3bba3-729a-4717-88c1-b7c4b7ba80db}',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['{7e9081b59a6d4cc1a8c347f69fb4198d}', true],\n                ['0c74f13f-fa83-4c48-9b33-68921dd72463', false, {\n                    message: '\"value\" length must be less than or equal to 34 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 34,\n                        value: '0c74f13f-fa83-4c48-9b33-68921dd72463',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['b4b2fb69c6244e5eb0698e0c6ec66618', false, {\n                    message: '\"value\" with value \"b4b2fb69c6244e5eb0698e0c6ec66618\" fails to match the required pattern: /^{7e9081/i',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^{7e9081/i,\n                        value: 'b4b2fb69c6244e5eb0698e0c6ec66618',\n                        label: 'value'\n                    }\n                }],\n                ['{283B67B2-430F-4E6F-97E6-19041992-C1B0}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{283B67B2-430F-4E6F-97E6-19041992-C1B0}',\n                        label: 'value'\n                    }\n                }],\n                ['{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: '{D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D',\n                        label: 'value'\n                    }\n                }],\n                ['D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}', false, {\n                    message: '\"value\" must be a valid GUID',\n                    path: [],\n                    type: 'string.guid',\n                    context: {\n                        value: 'D1A5279D-B27D-4CD4-A05E-EFDD53D08E8D}',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates the hexadecimal options","suites":["string","hex()"],"updatePoint":{"line":4108,"column":45},"line":4108,"code":"        it('validates the hexadecimal options', () => {\n\n            expect(() => {\n\n                Joi.string().hex('a');\n            }).to.throw('Options must be of type object');\n\n            expect(() => {\n\n                Joi.string().hex({ byteAligned: 'a' });\n            }).to.throw('byteAligned must be boolean');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates an hexadecimal string with no options","suites":["string","hex()"],"updatePoint":{"line":4121,"column":59},"line":4121,"code":"        it('validates an hexadecimal string with no options', () => {\n\n            const rule = Joi.string().hex();\n            Helper.validate(rule, [\n                ['123456789abcdef', true],\n                ['123456789AbCdEf', true],\n                ['123afg', false, {\n                    message: '\"value\" must only contain hexadecimal characters',\n                    path: [],\n                    type: 'string.hex',\n                    context: { value: '123afg', label: 'value' }\n                }],\n                ['0x123456789AbCdEf', false, '\"value\" must only contain hexadecimal characters']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates an hexadecimal string with byte align explicitly required","suites":["string","hex()"],"updatePoint":{"line":4137,"column":79},"line":4137,"code":"        it('validates an hexadecimal string with byte align explicitly required', () => {\n\n            const rule = Joi.string().hex({ byteAligned: true }).strict();\n            Helper.validate(rule, [\n                ['0123456789abcdef', true],\n                ['123456789abcdef', false, {\n                    message: '\"value\" hex decoded representation must be byte aligned',\n                    path: [],\n                    type: 'string.hexAlign',\n                    context: { value: '123456789abcdef', label: 'value' }\n                }],\n                ['0123afg', false, {\n                    message: '\"value\" must only contain hexadecimal characters',\n                    path: [],\n                    type: 'string.hex',\n                    context: { value: '0123afg', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"converts an hexadecimal string with byte align explicitly required","suites":["string","hex()"],"updatePoint":{"line":4157,"column":78},"line":4157,"code":"        it('converts an hexadecimal string with byte align explicitly required', () => {\n\n            const rule = Joi.string().hex({ byteAligned: true });\n            Helper.validate(rule, [\n                ['0123456789abcdef', true, '0123456789abcdef'],\n                ['123456789abcdef', true, '0123456789abcdef'],\n                ['0123afg', false, {\n                    message: '\"value\" must only contain hexadecimal characters',\n                    path: [],\n                    type: 'string.hex',\n                    context: { value: '00123afg', label: 'value' }\n                }],\n                ['00123afg', false, {\n                    message: '\"value\" must only contain hexadecimal characters',\n                    path: [],\n                    type: 'string.hex',\n                    context: { value: '00123afg', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates hostnames","suites":["string","hostname()"],"updatePoint":{"line":4181,"column":31},"line":4181,"code":"        it('validates hostnames', () => {\n\n            const schema = Joi.string().hostname();\n            Helper.validate(schema, [\n                ['www.example.com', true],\n                ['domain.local', true],\n                ['3domain.local', true],\n                ['hostname', true],\n                ['host:name', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: 'host:name', label: 'value' }\n                }],\n                ['-', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: '-', label: 'value' }\n                }],\n                ['2387628', false, '\"value\" must be a valid hostname'],\n                ['01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: '01234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789', label: 'value' }\n                }],\n                ['::1', true],\n                ['0:0:0:0:0:0:0:1', true],\n                ['0:?:0:0:0:0:0:1', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: '0:?:0:0:0:0:0:1', label: 'value' }\n                }],\n                ['10.10.10.10/24', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: '10.10.10.10/24', label: 'value' }\n                }],\n                ['2001:db8::/48', false, {\n                    message: '\"value\" must be a valid hostname',\n                    path: [],\n                    type: 'string.hostname',\n                    context: { value: '2001:db8::/48', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["string","insensitive"],"updatePoint":{"line":4234,"column":56},"line":4234,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.string().insensitive();\n            expect(schema.insensitive()).to.shallow.equal(schema);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"sets right values with valid","suites":["string","insensitive"],"updatePoint":{"line":4240,"column":40},"line":4240,"code":"        it('sets right values with valid', () => {\n\n            const simpleSchema = Joi.string().insensitive().valid('A');\n            Helper.validate(simpleSchema, [['a', true, 'A']]);\n\n            const refSchema = Joi.string().insensitive().valid(Joi.ref('$v'));\n            Helper.validate(refSchema, { context: { v: 'A' } }, [['a', true, 'A']]);\n\n            const refArraySchema = Joi.string().insensitive().valid(Joi.in('$v'));\n            Helper.validate(refArraySchema, { context: { v: ['B', 'A'] } }, [['a', true, 'A']]);\n\n            const strictSchema = Joi.string().insensitive().valid('A').strict();\n            Helper.validate(strictSchema, [['a', true, 'a']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should return false for denied value","suites":["string","invalid()"],"updatePoint":{"line":4258,"column":48},"line":4258,"code":"        it('should return false for denied value', () => {\n\n            const text = Joi.string().invalid('joi');\n            Helper.validate(text, [['joi', false, '\"value\" contains an invalid value']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates invalid values","suites":["string","invalid()"],"updatePoint":{"line":4264,"column":36},"line":4264,"code":"        it('validates invalid values', () => {\n\n            const schema = Joi.string().invalid('a', 'b', 'c');\n            Helper.validate(schema, [\n                ['x', true],\n                ['a', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'a', invalids: ['a', 'b', 'c'], label: 'value' }\n                }],\n                ['c', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'c', invalids: ['a', 'b', 'c'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should invert invalid values","suites":["string","invalid()"],"updatePoint":{"line":4284,"column":40},"line":4284,"code":"        it('should invert invalid values', () => {\n\n            const schema = Joi.string().valid('a', 'b', 'c');\n            Helper.validate(schema, [\n                ['x', false, {\n                    message: '\"value\" must be one of [a, b, c]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'x', valids: ['a', 'b', 'c'], label: 'value' }\n                }],\n                ['a', true],\n                ['c', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"inverts case sensitive values","suites":["string","invalid()"],"updatePoint":{"line":4299,"column":41},"line":4299,"code":"        it('inverts case sensitive values', () => {\n\n            Helper.validate(Joi.string().invalid('a', 'b'), [\n                ['a', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'a', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['A', true],\n                ['B', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"inverts case insensitive values","suites":["string","invalid()"],"updatePoint":{"line":4319,"column":43},"line":4319,"code":"        it('inverts case insensitive values', () => {\n\n            Helper.validate(Joi.string().invalid('a', 'b').insensitive(), [\n                ['a', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'a', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['b', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'b', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['A', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'A', invalids: ['a', 'b'], label: 'value' }\n                }],\n                ['B', false, {\n                    message: '\"value\" contains an invalid value',\n                    path: [],\n                    type: 'any.invalid',\n                    context: { value: 'B', invalids: ['a', 'b'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ip addresses with optional CIDR by default","suites":["string","ip()"],"updatePoint":{"line":4517,"column":74},"line":4517,"code":"        it('should validate all ip addresses with optional CIDR by default', () => {\n\n            const schema = Joi.string().ip();\n            const message = '\"value\" must be a valid ip address with a optional CIDR';\n            Helper.validate(schema, []\n                .concat(validIPv4sWithCidr(true))\n                .concat(validIPv4sWithoutCidr(true))\n                .concat(validIPv6sWithCidr(true))\n                .concat(validIPv6sWithoutCidr(true))\n                .concat(validIPvFuturesWithCidr(true))\n                .concat(validIPvFuturesWithoutCidr(true))\n                .concat(invalidIPs(message))\n                .concat(invalidIPv4s(message))\n                .concat(invalidIPv6s(message))\n                .concat(invalidIPvFutures(message)));\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ip addresses with an optional CIDR","suites":["string","ip()"],"updatePoint":{"line":4534,"column":66},"line":4534,"code":"        it('should validate all ip addresses with an optional CIDR', () => {\n\n            const schema = Joi.string().ip({ cidr: 'optional' });\n            const message = '\"value\" must be a valid ip address with a optional CIDR';\n            Helper.validate(schema, []\n                .concat(validIPv4sWithCidr(true))\n                .concat(validIPv4sWithoutCidr(true))\n                .concat(validIPv6sWithCidr(true))\n                .concat(validIPv6sWithoutCidr(true))\n                .concat(validIPvFuturesWithCidr(true))\n                .concat(validIPvFuturesWithoutCidr(true))\n                .concat(invalidIPs(message))\n                .concat(invalidIPv4s(message))\n                .concat(invalidIPv6s(message))\n                .concat(invalidIPvFutures(message)));\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ip addresses with a required CIDR","suites":["string","ip()"],"updatePoint":{"line":4551,"column":65},"line":4551,"code":"        it('should validate all ip addresses with a required CIDR', () => {\n\n            const schema = Joi.string().ip({ cidr: 'required' });\n            const message = '\"value\" must be a valid ip address with a required CIDR';\n            Helper.validate(schema, []\n                .concat(validIPv4sWithCidr(true))\n                .concat(validIPv4sWithoutCidr(false, message))\n                .concat(validIPv6sWithCidr(true))\n                .concat(validIPv6sWithoutCidr(false, message))\n                .concat(validIPvFuturesWithCidr(true))\n                .concat(validIPvFuturesWithoutCidr(false, message))\n                .concat(invalidIPs(message))\n                .concat(invalidIPv4s(message))\n                .concat(invalidIPv6s(message))\n                .concat(invalidIPvFutures(message)));\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ip addresses with a forbidden CIDR","suites":["string","ip()"],"updatePoint":{"line":4568,"column":66},"line":4568,"code":"        it('should validate all ip addresses with a forbidden CIDR', () => {\n\n            const schema = Joi.string().ip({ cidr: 'forbidden' });\n            const message = '\"value\" must be a valid ip address with a forbidden CIDR';\n            Helper.validate(schema, []\n                .concat(validIPv4sWithCidr(false, message))\n                .concat(validIPv4sWithoutCidr(true))\n                .concat(validIPv6sWithCidr(false, message))\n                .concat(validIPv6sWithoutCidr(true))\n                .concat(validIPvFuturesWithCidr(false, message))\n                .concat(validIPvFuturesWithoutCidr(true))\n                .concat(invalidIPs(message))\n                .concat(invalidIPv4s(message))\n                .concat(invalidIPv6s(message))\n                .concat(invalidIPvFutures(message)));\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options is not an object","suites":["string","ip()"],"updatePoint":{"line":4585,"column":48},"line":4585,"code":"        it('throws when options is not an object', () => {\n\n            expect(() => Joi.string().ip(42)).to.throw('Options must be of type object');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.cidr is not a string","suites":["string","ip()"],"updatePoint":{"line":4590,"column":52},"line":4590,"code":"        it('throws when options.cidr is not a string', () => {\n\n            expect(() => Joi.string().ip({ cidr: 42 })).to.throw('options.cidr must be a string');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.cidr is not a valid value","suites":["string","ip()"],"updatePoint":{"line":4595,"column":57},"line":4595,"code":"        it('throws when options.cidr is not a valid value', () => {\n\n            expect(() => Joi.string().ip({ cidr: '42' })).to.throw('options.cidr must be one of required, optional, forbidden');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.version is an empty array","suites":["string","ip()"],"updatePoint":{"line":4600,"column":57},"line":4600,"code":"        it('throws when options.version is an empty array', () => {\n\n            expect(() => Joi.string().ip({ version: [] })).to.throw('options.version must have at least 1 version specified');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.version is not a string","suites":["string","ip()"],"updatePoint":{"line":4605,"column":55},"line":4605,"code":"        it('throws when options.version is not a string', () => {\n\n            expect(() => Joi.string().ip({ version: 42 })).to.throw('options.version must be a string or an array of string');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when options.version is not a valid value","suites":["string","ip()"],"updatePoint":{"line":4610,"column":60},"line":4610,"code":"        it('throws when options.version is not a valid value', () => {\n\n            expect(() => Joi.string().ip({ version: '42' })).to.throw('options.version contains unknown version 42 - must be one of ipv4, ipv6, ipvfuture');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates ip","suites":["string","ip()"],"updatePoint":{"line":4615,"column":24},"line":4615,"code":"        it('validates ip', () => {\n\n            const schema = { item: Joi.string().ip() };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must be a valid ip address with a optional CIDR',\n                path: ['item'],\n                type: 'string.ip',\n                context: {\n                    value: 'something',\n                    cidr: 'optional',\n                    label: 'item',\n                    key: 'item'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates ip and cidr presence","suites":["string","ip()"],"updatePoint":{"line":4631,"column":42},"line":4631,"code":"        it('validates ip and cidr presence', () => {\n\n            const schema = { item: Joi.string().ip({ cidr: 'required' }) };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must be a valid ip address with a required CIDR',\n                path: ['item'],\n                type: 'string.ip',\n                context: {\n                    value: 'something',\n                    cidr: 'required',\n                    label: 'item',\n                    key: 'item'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates custom ip version and cidr presence","suites":["string","ip()"],"updatePoint":{"line":4647,"column":57},"line":4647,"code":"        it('validates custom ip version and cidr presence', () => {\n\n            const schema = { item: Joi.string().ip({ version: 'ipv4', cidr: 'required' }) };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, {\n                message: '\"item\" must be a valid ip address of one of the following versions [ipv4] with a required CIDR',\n                path: ['item'],\n                type: 'string.ipVersion',\n                context: {\n                    value: 'something',\n                    cidr: 'required',\n                    version: ['ipv4'],\n                    label: 'item',\n                    key: 'item'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 addresses with a default CIDR strategy","suites":["string","ip()","ip({ version: \"ipv4\" })"],"updatePoint":{"line":4666,"column":79},"line":4666,"code":"            it('should validate all ipv4 addresses with a default CIDR strategy', () => {\n\n                const version = 'ipv4';\n                const schema = Joi.string().ip({ version });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 addresses with an optional CIDR","suites":["string","ip()","ip({ version: \"ipv4\" })"],"updatePoint":{"line":4684,"column":72},"line":4684,"code":"            it('should validate all ipv4 addresses with an optional CIDR', () => {\n\n                const version = 'ipv4';\n                const schema = Joi.string().ip({ version, cidr: 'optional' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 addresses with a required CIDR","suites":["string","ip()","ip({ version: \"ipv4\" })"],"updatePoint":{"line":4702,"column":71},"line":4702,"code":"            it('should validate all ipv4 addresses with a required CIDR', () => {\n\n                const version = 'ipv4';\n                const schema = Joi.string().ip({ version, cidr: 'required' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4] with a required CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 addresses with a forbidden CIDR","suites":["string","ip()","ip({ version: \"ipv4\" })"],"updatePoint":{"line":4720,"column":72},"line":4720,"code":"            it('should validate all ipv4 addresses with a forbidden CIDR', () => {\n\n                const version = 'ipv4';\n                const schema = Joi.string().ip({ version, cidr: 'forbidden' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4] with a forbidden CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv6 addresses with a default CIDR strategy","suites":["string","ip()","ip({ version: \"ipv6\" })"],"updatePoint":{"line":4741,"column":79},"line":4741,"code":"            it('should validate all ipv6 addresses with a default CIDR strategy', () => {\n\n                const version = 'ipv6';\n                const schema = Joi.string().ip({ version });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv6] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv6 addresses with an optional CIDR","suites":["string","ip()","ip({ version: \"ipv6\" })"],"updatePoint":{"line":4759,"column":72},"line":4759,"code":"            it('should validate all ipv6 addresses with an optional CIDR', () => {\n\n                const version = 'ipv6';\n                const schema = Joi.string().ip({ version, cidr: 'optional' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv6] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv6 addresses with a required CIDR","suites":["string","ip()","ip({ version: \"ipv6\" })"],"updatePoint":{"line":4777,"column":71},"line":4777,"code":"            it('should validate all ipv6 addresses with a required CIDR', () => {\n\n                const version = 'ipv6';\n                const schema = Joi.string().ip({ version, cidr: 'required' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv6] with a required CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv6 addresses with a forbidden CIDR","suites":["string","ip()","ip({ version: \"ipv6\" })"],"updatePoint":{"line":4795,"column":72},"line":4795,"code":"            it('should validate all ipv6 addresses with a forbidden CIDR', () => {\n\n                const version = 'ipv6';\n                const schema = Joi.string().ip({ version, cidr: 'forbidden' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv6] with a forbidden CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipvfuture addresses with a default CIDR strategy","suites":["string","ip()","ip({ version: \"ipvfuture\" })"],"updatePoint":{"line":4816,"column":84},"line":4816,"code":"            it('should validate all ipvfuture addresses with a default CIDR strategy', () => {\n\n                const version = 'ipvfuture';\n                const schema = Joi.string().ip({ version });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipvfuture] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(true))\n                    .concat(validIPvFuturesWithoutCidr(true))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipvfuture addresses with an optional CIDR","suites":["string","ip()","ip({ version: \"ipvfuture\" })"],"updatePoint":{"line":4834,"column":77},"line":4834,"code":"            it('should validate all ipvfuture addresses with an optional CIDR', () => {\n\n                const version = 'ipvfuture';\n                const schema = Joi.string().ip({ version, cidr: 'optional' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipvfuture] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(true))\n                    .concat(validIPvFuturesWithoutCidr(true))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipvfuture addresses with a required CIDR","suites":["string","ip()","ip({ version: \"ipvfuture\" })"],"updatePoint":{"line":4852,"column":76},"line":4852,"code":"            it('should validate all ipvfuture addresses with a required CIDR', () => {\n\n                const version = 'ipvfuture';\n                const schema = Joi.string().ip({ version, cidr: 'required' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipvfuture] with a required CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(true))\n                    .concat(validIPvFuturesWithoutCidr(false, message, [version]))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipvfuture addresses with a forbidden CIDR","suites":["string","ip()","ip({ version: \"ipvfuture\" })"],"updatePoint":{"line":4870,"column":77},"line":4870,"code":"            it('should validate all ipvfuture addresses with a forbidden CIDR', () => {\n\n                const version = 'ipvfuture';\n                const schema = Joi.string().ip({ version, cidr: 'forbidden' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipvfuture] with a forbidden CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message, [version]))\n                    .concat(validIPv4sWithoutCidr(false, message, [version]))\n                    .concat(validIPv6sWithCidr(false, message, [version]))\n                    .concat(validIPv6sWithoutCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithCidr(false, message, [version]))\n                    .concat(validIPvFuturesWithoutCidr(true))\n                    .concat(invalidIPs(message, [version]))\n                    .concat(invalidIPv4s(message, [version]))\n                    .concat(invalidIPv6s(message, [version]))\n                    .concat(invalidIPvFutures(message, [version])));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 and ipv6 addresses with a default CIDR strategy","suites":["string","ip()","ip({ version: [ \"ipv4\", \"ipv6\" ] })"],"updatePoint":{"line":4891,"column":88},"line":4891,"code":"            it('should validate all ipv4 and ipv6 addresses with a default CIDR strategy', () => {\n\n                const schema = Joi.string().ip({ version: ['ipv4', 'ipv6'] });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4, ipv6] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message))\n                    .concat(validIPvFuturesWithoutCidr(false, message))\n                    .concat(invalidIPs(message))\n                    .concat(invalidIPv4s(message))\n                    .concat(invalidIPv6s(message))\n                    .concat(invalidIPvFutures(message)));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 and ipv6 addresses with an optional CIDR","suites":["string","ip()","ip({ version: [ \"ipv4\", \"ipv6\" ] })"],"updatePoint":{"line":4908,"column":81},"line":4908,"code":"            it('should validate all ipv4 and ipv6 addresses with an optional CIDR', () => {\n\n                const schema = Joi.string().ip({ version: ['ipv4', 'ipv6'], cidr: 'optional' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4, ipv6] with a optional CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message))\n                    .concat(validIPvFuturesWithoutCidr(false, message))\n                    .concat(invalidIPs(message))\n                    .concat(invalidIPv4s(message))\n                    .concat(invalidIPv6s(message))\n                    .concat(invalidIPvFutures(message)));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 and ipv6 addresses with a required CIDR","suites":["string","ip()","ip({ version: [ \"ipv4\", \"ipv6\" ] })"],"updatePoint":{"line":4925,"column":80},"line":4925,"code":"            it('should validate all ipv4 and ipv6 addresses with a required CIDR', () => {\n\n                const schema = Joi.string().ip({ version: ['ipv4', 'ipv6'], cidr: 'required' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4, ipv6] with a required CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(true))\n                    .concat(validIPv4sWithoutCidr(false, message))\n                    .concat(validIPv6sWithCidr(true))\n                    .concat(validIPv6sWithoutCidr(false, message))\n                    .concat(validIPvFuturesWithCidr(false, message))\n                    .concat(validIPvFuturesWithoutCidr(false, message))\n                    .concat(invalidIPs(message))\n                    .concat(invalidIPv4s(message))\n                    .concat(invalidIPv6s(message))\n                    .concat(invalidIPvFutures(message)));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should validate all ipv4 and ipv6 addresses with a forbidden CIDR","suites":["string","ip()","ip({ version: [ \"ipv4\", \"ipv6\" ] })"],"updatePoint":{"line":4942,"column":81},"line":4942,"code":"            it('should validate all ipv4 and ipv6 addresses with a forbidden CIDR', () => {\n\n                const schema = Joi.string().ip({ version: ['ipv4', 'ipv6'], cidr: 'forbidden' });\n                const message = '\"value\" must be a valid ip address of one of the following versions [ipv4, ipv6] with a forbidden CIDR';\n                Helper.validate(schema, []\n                    .concat(validIPv4sWithCidr(false, message))\n                    .concat(validIPv4sWithoutCidr(true))\n                    .concat(validIPv6sWithCidr(false, message))\n                    .concat(validIPv6sWithoutCidr(true))\n                    .concat(validIPvFuturesWithCidr(false, message))\n                    .concat(validIPvFuturesWithoutCidr(false, message))\n                    .concat(invalidIPs(message))\n                    .concat(invalidIPv4s(message))\n                    .concat(invalidIPv6s(message))\n                    .concat(invalidIPvFutures(message)));\n            });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates isoDate","suites":["string","isoData()"],"updatePoint":{"line":4963,"column":29},"line":4963,"code":"        it('validates isoDate', () => {\n\n            Helper.validate(Joi.string().isoDate(), { convert: false }, [\n                ['+002013-06-07T14:21:46.295Z', true],\n                ['-002013-06-07T14:21:46.295Z', true],\n                ['002013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '002013-06-07T14:21:46.295Z', label: 'value' }\n                }],\n                ['+2013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '+2013-06-07T14:21:46.295Z', label: 'value' }\n                }],\n                ['-2013-06-07T14:21:46.295Z', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '-2013-06-07T14:21:46.295Z', label: 'value' }\n                }],\n                ['2013-06-07T14:21:46.295Z', true],\n                ['2013-06-07T14:21:46.295Z0', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21:46.295Z0', label: 'value' }\n                }],\n                ['2013-06-07T14:21:46.295+07:00', true],\n                ['2013-06-07T14:21:46.295+07', true],\n                ['2013-06-07T14:21:46.295+07:000', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21:46.295+07:000', label: 'value' }\n                }],\n                ['2013-06-07T14:21:46.295-07:00', true],\n                ['2013-06-07T14:21:46Z', true],\n                ['2013-06-07T14:21:46Z0', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21:46Z0', label: 'value' }\n                }],\n                ['2013-06-07T14:21:46+07:00', true],\n                ['2013-06-07T14:21:46+07:000', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21:46+07:000', label: 'value' }\n                }],\n                ['2013-06-07T14:21:46-07:00', true],\n                ['2013-06-07T14:21Z', true],\n                ['2013-06-07T14:21+07:00', true],\n                ['2013-06-07T14:21+07:000', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21+07:000', label: 'value' }\n                }],\n                ['2013-06-07T14:21-07:00', true],\n                ['2013-06-07T14:21Z+7:00', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14:21Z+7:00', label: 'value' }\n                }],\n                ['2013-06-07', true],\n                ['2013-06-07T', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T', label: 'value' }\n                }],\n                ['2013-06-07T14:21', true],\n                ['1-1-2013', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '1-1-2013', label: 'value' }\n                }],\n                ['2013-06-07T14.2334,4', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14.2334,4', label: 'value' }\n                }],\n                ['2013-06-07T14,23:34', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T14,23:34', label: 'value' }\n                }],\n                ['2013-06-07T24', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T24', label: 'value' }\n                }],\n                ['2013-06-07T24:00', true],\n                ['2013-06-07T24:21', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07T24:21', label: 'value' }\n                }],\n                ['2013-06-07 146946.295', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07 146946.295', label: 'value' }\n                }],\n                ['2013-06-07 1421,44', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-06-07 1421,44', label: 'value' }\n                }],\n                ['2013-W2311', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W2311', label: 'value' }\n                }],\n                ['2013-M231', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-M231', label: 'value' }\n                }],\n                ['2013-W23-1T14:21', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W23-1T14:21', label: 'value' }\n                }],\n                ['2013-W23-1T14:21:', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W23-1T14:21:', label: 'value' }\n                }],\n                ['2013-W23-1T14:21:46+07:00', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W23-1T14:21:46+07:00', label: 'value' }\n                }],\n                ['2013-W23-1T14:21:46+07:000', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W23-1T14:21:46+07:000', label: 'value' }\n                }],\n                ['2013-W23-1T14:21:46-07:00', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-W23-1T14:21:46-07:00', label: 'value' }\n                }],\n                ['2013-184', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-184', label: 'value' }\n                }],\n                ['2013-1841', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-1841', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates isoDate","suites":["string","isoData()"],"updatePoint":{"line":5140,"column":29},"line":5140,"code":"        it('validates isoDate', () => {\n\n            const schema = { item: Joi.string().isoDate() };\n            Helper.validate(Joi.compile(schema), [[{ item: 'something' }, false, '\"item\" must be in iso format']]);\n            Helper.validate(Joi.compile(schema), { convert: false }, [[{ item: 'something' }, false, '\"item\" must be in iso format']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates and formats isoDate with convert set to true (default)","suites":["string","isoData()"],"updatePoint":{"line":5147,"column":76},"line":5147,"code":"        it('validates and formats isoDate with convert set to true (default)', () => {\n\n            const rule = Joi.string().isoDate();\n            Helper.validate(rule, { convert: true }, [\n                ['+002013-06-07T14:21:46.295Z', true, '2013-06-07T14:21:46.295Z'],\n                ['-002013-06-07T14:21:46.295Z', true, '-002013-06-07T14:21:46.295Z'],\n                ['2013-06-07T14:21:46.295Z', true, '2013-06-07T14:21:46.295Z'],\n                ['2013-06-07T14:21:46.295+07:00', true, '2013-06-07T07:21:46.295Z'],\n                ['2013-06-07T14:21:46.295-07:00', true, '2013-06-07T21:21:46.295Z'],\n                ['2013-06-07T14:21:46Z', true, '2013-06-07T14:21:46.000Z'],\n                ['2013-06-07T14:21:46+07:00', true, '2013-06-07T07:21:46.000Z'],\n                ['2013-06-07T14:21:46-07:00', true, '2013-06-07T21:21:46.000Z'],\n                ['2013-06-07T14:21Z', true, '2013-06-07T14:21:00.000Z'],\n                ['2013-06-07T14:21+07:00', true, '2013-06-07T07:21:00.000Z'],\n                ['2013-06-07T14:21-07:00', true, '2013-06-07T21:21:00.000Z'],\n                ['2013-06-07', true, '2013-06-07T00:00:00.000Z'],\n                ['2013-06-07T14:21', true, '2013-06-07T14:21:00.000Z'],\n                ['2013-184', false, {\n                    message: '\"value\" must be in iso format',\n                    path: [],\n                    type: 'string.isoDate',\n                    context: { value: '2013-184', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"supports allowed values","suites":["string","isoData()"],"updatePoint":{"line":5173,"column":35},"line":5173,"code":"        it('supports allowed values', () => {\n\n            const schema = Joi.string().isoDate().allow('x');\n            Helper.validate(schema, [['x', true]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates isoDuration","suites":["string","isoDuration()"],"updatePoint":{"line":5182,"column":33},"line":5182,"code":"        it('validates isoDuration', () => {\n\n            Helper.validate(Joi.string().isoDuration(), [\n                ['P3Y6M4DT12H30M5S', true],\n                ['P3Y6M4DT12H30M', true],\n                ['P3Y6M4DT12H5S', true],\n                ['P3Y6M4DT30M5S', true],\n                ['P3Y6MT12H30M5S', true],\n                ['P3Y4DT12H30M5S', true],\n                ['P6M4DT12H30M5S', true],\n                ['PT10H20M5S', true],\n                ['PT40S', true],\n                ['PT0S', true],\n                ['P0D', true],\n                ['P30S', false, {\n                    message: '\"value\" must be a valid ISO 8601 duration',\n                    path: [],\n                    type: 'string.isoDuration',\n                    context: { value: 'P30S', label: 'value' }\n                }],\n                ['P30', false, {\n                    message: '\"value\" must be a valid ISO 8601 duration',\n                    path: [],\n                    type: 'string.isoDuration',\n                    context: { value: 'P30', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates length requirements","suites":["string","length()"],"updatePoint":{"line":5226,"column":41},"line":5226,"code":"        it('validates length requirements', () => {\n\n            const schema = Joi.string().length(3);\n            Helper.validate(schema, [\n                ['test', false, {\n                    message: '\"value\" length must be 3 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 3,\n                        value: 'test',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['0', false, {\n                    message: '\"value\" length must be 3 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 3,\n                        value: '0',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }],\n                ['abc', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["string","length()"],"updatePoint":{"line":5262,"column":45},"line":5262,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.string().length('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["string","length()"],"updatePoint":{"line":5270,"column":47},"line":5270,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => {\n\n                Joi.string().length(1.2);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a positive integer","suites":["string","length()"],"updatePoint":{"line":5278,"column":55},"line":5278,"code":"        it('throws when limit is not a positive integer', () => {\n\n            expect(() => {\n\n                Joi.string().length(-42);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"enforces a limit using byte count","suites":["string","length()"],"updatePoint":{"line":5286,"column":45},"line":5286,"code":"        it('enforces a limit using byte count', () => {\n\n            const schema = Joi.string().length(2, 'utf8');\n            Helper.validate(schema, [\n                ['\\u00bd', true],\n                ['a', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: { limit: 2, value: 'a', encoding: 'utf8', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts references as length","suites":["string","length()"],"updatePoint":{"line":5300,"column":40},"line":5300,"code":"        it('accepts references as length', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.string().length(ref, 'utf8') });\n            Helper.validate(schema, [\n                [{ a: 2, b: '\\u00bd' }, true],\n                [{ a: 2, b: 'a' }, false, {\n                    message: '\"b\" length must be ref:a characters long',\n                    path: ['b'],\n                    type: 'string.length',\n                    context: { limit: ref, value: 'a', encoding: 'utf8', label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts context references as length","suites":["string","length()"],"updatePoint":{"line":5315,"column":48},"line":5315,"code":"        it('accepts context references as length', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.string().length(ref, 'utf8') });\n            Helper.validate(schema, { context: { a: 2 } }, [\n                [{ b: '\\u00bd' }, true],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" length must be ref:global:a characters long',\n                    path: ['b'],\n                    type: 'string.length',\n                    context: { limit: ref, value: 'a', encoding: 'utf8', label: 'b', key: 'b' }\n                }],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" length must be ref:global:a characters long',\n                    path: ['b'],\n                    type: 'string.length',\n                    context: { limit: ref, value: 'a', encoding: 'utf8', label: 'b', key: 'b' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["string","length()"],"updatePoint":{"line":5336,"column":47},"line":5336,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.any(), b: Joi.string().length(ref, 'utf8') });\n\n            Helper.validate(schema, [\n                [{ a: 'Hi there', b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["string","length()"],"updatePoint":{"line":5351,"column":55},"line":5351,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ a: Joi.any(), b: Joi.string().length(ref, 'utf8') });\n\n            Helper.validate(schema, { context: { a: 'Hi there' } }, [\n                [{ b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', reason: 'must be a positive integer', arg: 'limit' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allows strings that are entirely lowercase","suites":["string","lowercase()"],"updatePoint":{"line":5369,"column":59},"line":5369,"code":"        it('only allows strings that are entirely lowercase', () => {\n\n            const schema = Joi.string().lowercase();\n            Helper.validate(schema, { convert: false }, [\n                ['this is all lowercase', true],\n                ['5', true],\n                ['lower\\tcase', true],\n                ['Uppercase', false, {\n                    message: '\"value\" must only contain lowercase characters',\n                    path: [],\n                    type: 'string.lowercase',\n                    context: { value: 'Uppercase', label: 'value' }\n                }],\n                ['MixEd cAsE', false, {\n                    message: '\"value\" must only contain lowercase characters',\n                    path: [],\n                    type: 'string.lowercase',\n                    context: { value: 'MixEd cAsE', label: 'value' }\n                }],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"coerce string to lowercase before validation","suites":["string","lowercase()"],"updatePoint":{"line":5397,"column":56},"line":5397,"code":"        it('coerce string to lowercase before validation', () => {\n\n            const schema = Joi.string().lowercase();\n            Helper.validate(schema, [['UPPER TO LOWER', true, 'upper to lower']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with a trim","suites":["string","lowercase()"],"updatePoint":{"line":5403,"column":50},"line":5403,"code":"        it('should work in combination with a trim', () => {\n\n            const schema = Joi.string().lowercase().trim();\n            Helper.validate(schema, [\n                [' abc', true, 'abc'],\n                [' ABC', true, 'abc'],\n                ['ABC', true, 'abc'],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with a replacement","suites":["string","lowercase()"],"updatePoint":{"line":5419,"column":57},"line":5419,"code":"        it('should work in combination with a replacement', () => {\n\n            const schema = Joi.string().lowercase().replace(/\\s+/g, ' ');\n            Helper.validate(schema, [\n                ['a\\r b\\n c', true, 'a b c'],\n                ['A\\t B  C', true, 'a b c'],\n                ['ABC', true, 'abc'],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates maximum length when max is used","suites":["string","max()"],"updatePoint":{"line":5438,"column":53},"line":5438,"code":"        it('validates maximum length when max is used', () => {\n\n            const schema = Joi.string().max(3);\n            Helper.validate(schema, [\n                ['test', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'test',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['0', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["string","max()"],"updatePoint":{"line":5463,"column":45},"line":5463,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.string().max('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["string","max()"],"updatePoint":{"line":5471,"column":47},"line":5471,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => {\n\n                Joi.string().max(1.2);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a positive integer","suites":["string","max()"],"updatePoint":{"line":5479,"column":55},"line":5479,"code":"        it('throws when limit is not a positive integer', () => {\n\n            expect(() => {\n\n                Joi.string().max(-1);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"enforces a limit using byte count","suites":["string","max()"],"updatePoint":{"line":5487,"column":45},"line":5487,"code":"        it('enforces a limit using byte count', () => {\n\n            const schema = Joi.string().max(1, 'utf8');\n            Helper.validate(schema, [\n                ['\\u00bd', false, {\n                    message: '\"value\" length must be less than or equal to 1 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: { limit: 1, value: '\\u00bd', encoding: 'utf8', label: 'value' }\n                }],\n                ['a', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts references as min length","suites":["string","max()"],"updatePoint":{"line":5501,"column":44},"line":5501,"code":"        it('accepts references as min length', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.string().max(ref, 'utf8') });\n            Helper.validate(schema, [\n                [{ a: 2, b: '\\u00bd' }, true],\n                [{ a: 2, b: 'three' }, false, {\n                    message: '\"b\" length must be less than or equal to ref:a characters long',\n                    path: ['b'],\n                    type: 'string.max',\n                    context: {\n                        limit: ref,\n                        value: 'three',\n                        encoding: 'utf8',\n                        label: 'b',\n                        key: 'b'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts context references as min length","suites":["string","max()"],"updatePoint":{"line":5522,"column":52},"line":5522,"code":"        it('accepts context references as min length', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.string().max(ref, 'utf8') });\n            Helper.validate(schema, { context: { a: 2 } }, [\n                [{ b: '\\u00bd' }, true],\n                [{ b: 'three' }, false, {\n                    message: '\"b\" length must be less than or equal to ref:global:a characters long',\n                    path: ['b'],\n                    type: 'string.max',\n                    context: {\n                        limit: ref,\n                        value: 'three',\n                        encoding: 'utf8',\n                        label: 'b',\n                        key: 'b'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["string","max()"],"updatePoint":{"line":5543,"column":47},"line":5543,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.any(), b: Joi.string().max(ref, 'utf8') });\n\n            Helper.validate(schema, [\n                [{ a: 'Hi there', b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["string","max()"],"updatePoint":{"line":5558,"column":55},"line":5558,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.string().max(ref, 'utf8') });\n\n            Helper.validate(schema, { context: { a: 'Hi there' } }, [\n                [{ b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a number","suites":["string","min()"],"updatePoint":{"line":5576,"column":45},"line":5576,"code":"        it('throws when limit is not a number', () => {\n\n            expect(() => {\n\n                Joi.string().min('a');\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not an integer","suites":["string","min()"],"updatePoint":{"line":5584,"column":47},"line":5584,"code":"        it('throws when limit is not an integer', () => {\n\n            expect(() => {\n\n                Joi.string().min(1.2);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when limit is not a positive integer","suites":["string","min()"],"updatePoint":{"line":5592,"column":55},"line":5592,"code":"        it('throws when limit is not a positive integer', () => {\n\n            expect(() => {\n\n                Joi.string().min(-1);\n            }).to.throw('limit must be a positive integer or reference');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"enforces a limit using byte count","suites":["string","min()"],"updatePoint":{"line":5600,"column":45},"line":5600,"code":"        it('enforces a limit using byte count', () => {\n\n            const schema = Joi.string().min(2, 'utf8');\n            Helper.validate(schema, [\n                ['\\u00bd', true],\n                ['a', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'a',\n                        encoding: 'utf8',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"allows empty string when min explicitly set to zero","suites":["string","min()"],"updatePoint":{"line":5619,"column":63},"line":5619,"code":"        it('allows empty string when min explicitly set to zero', () => {\n\n            Helper.validate(Joi.string().min(0), [\n                [undefined, true],\n                ['', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts references as min length","suites":["string","min()"],"updatePoint":{"line":5627,"column":44},"line":5627,"code":"        it('accepts references as min length', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.number(), b: Joi.string().min(ref, 'utf8') });\n            Helper.validate(schema, [\n                [{ a: 2, b: '\\u00bd' }, true],\n                [{ a: 2, b: 'a' }, false, {\n                    message: '\"b\" length must be at least ref:a characters long',\n                    path: ['b'],\n                    type: 'string.min',\n                    context: {\n                        limit: ref,\n                        value: 'a',\n                        encoding: 'utf8',\n                        label: 'b',\n                        key: 'b'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts references as min length within a when","suites":["string","min()"],"updatePoint":{"line":5648,"column":58},"line":5648,"code":"        it('accepts references as min length within a when', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().required(),\n                b: Joi.number().required(),\n                c: Joi.number().required().when('a', {\n                    is: Joi.string().min(Joi.ref('b')), // a.length >= b\n                    then: Joi.number().valid(0)\n                })\n            });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 4, c: 42 }, true],\n                [{ a: 'abc', b: 3, c: 0 }, true],\n                [{ a: 'abc', b: 3, c: 42 }, false, {\n                    message: '\"c\" must be [0]',\n                    path: ['c'],\n                    type: 'any.only',\n                    context: { value: 42, valids: [0], label: 'c', key: 'c' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"accepts context references as min length","suites":["string","min()"],"updatePoint":{"line":5671,"column":52},"line":5671,"code":"        it('accepts context references as min length', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.string().min(ref, 'utf8') });\n            Helper.validate(schema, { context: { a: 2 } }, [\n                [{ b: '\\u00bd' }, true],\n                [{ b: 'a' }, false, {\n                    message: '\"b\" length must be at least ref:global:a characters long',\n                    path: ['b'],\n                    type: 'string.min',\n                    context: {\n                        limit: ref,\n                        value: 'a',\n                        encoding: 'utf8',\n                        label: 'b',\n                        key: 'b'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if reference is not a number","suites":["string","min()"],"updatePoint":{"line":5692,"column":47},"line":5692,"code":"        it('errors if reference is not a number', () => {\n\n            const ref = Joi.ref('a');\n            const schema = Joi.object({ a: Joi.any(), b: Joi.string().min(ref, 'utf8') });\n\n            Helper.validate(schema, [\n                [{ a: 'Hi there', b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors if context reference is not a number","suites":["string","min()"],"updatePoint":{"line":5707,"column":55},"line":5707,"code":"        it('errors if context reference is not a number', () => {\n\n            const ref = Joi.ref('$a');\n            const schema = Joi.object({ b: Joi.string().min(ref, 'utf8') });\n\n            Helper.validate(schema, { context: { a: 'Hi there' } }, [\n                [{ b: '\\u00bd' }, false, {\n                    message: '\"b\" limit references \"ref:global:a\" which must be a positive integer',\n                    path: ['b'],\n                    type: 'any.ref',\n                    context: { ref, label: 'b', key: 'b', value: 'Hi there', arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates minimum length when min is used","suites":["string","min()"],"updatePoint":{"line":5722,"column":53},"line":5722,"code":"        it('validates minimum length when min is used', () => {\n\n            const schema = Joi.string().min(3);\n            Helper.validate(schema, [\n                ['test', true],\n                ['0', false, {\n                    message: '\"value\" length must be at least 3 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 3,\n                        value: '0',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates minimum length when min is 0","suites":["string","min()"],"updatePoint":{"line":5747,"column":50},"line":5747,"code":"        it('validates minimum length when min is 0', () => {\n\n            const schema = Joi.string().min(0).required();\n            Helper.validate(schema, [\n                ['0', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }],\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should return false with minimum length and a null value passed in","suites":["string","min()"],"updatePoint":{"line":5767,"column":78},"line":5767,"code":"        it('should return false with minimum length and a null value passed in', () => {\n\n            const schema = Joi.string().min(3);\n            Helper.validate(schema, [\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"null allowed overrides min length requirement","suites":["string","min()"],"updatePoint":{"line":5780,"column":57},"line":5780,"code":"        it('null allowed overrides min length requirement', () => {\n\n            const schema = Joi.string().min(3).allow(null);\n            Helper.validate(schema, [\n                [null, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min and max","suites":["string","min()"],"updatePoint":{"line":5788,"column":48},"line":5788,"code":"        it('validates combination of min and max', () => {\n\n            const rule = Joi.string().min(2).max(3);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, and allow('')","suites":["string","min()"],"updatePoint":{"line":5831,"column":62},"line":5831,"code":"        it('validates combination of min, max, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().min(2).max(3).allow('');\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, and required","suites":["string","min()"],"updatePoint":{"line":5869,"column":59},"line":5869,"code":"        it('validates combination of min, max, and required', () => {\n\n            const rule = Joi.string().min(2).max(3).required();\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', true],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', true],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, and regex","suites":["string","min()"],"updatePoint":{"line":5912,"column":56},"line":5912,"code":"        it('validates combination of min, max, and regex', () => {\n\n            const rule = Joi.string().min(2).max(3).regex(/^a/);\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, regex, and allow('')","suites":["string","min()"],"updatePoint":{"line":5988,"column":69},"line":5988,"code":"        it('validates combination of min, max, regex, and allow(\\'\\')', () => {\n\n            const rule = Joi.string().min(2).max(3).regex(/^a/).allow('');\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of min, max, regex, and required","suites":["string","min()"],"updatePoint":{"line":6059,"column":66},"line":6059,"code":"        it('validates combination of min, max, regex, and required', () => {\n\n            const rule = Joi.string().min(2).max(3).regex(/^a/).required();\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" length must be at least 2 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 2,\n                        value: 'x',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['123', false, {\n                    message: '\"value\" with value \"123\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '123',\n                        label: 'value'\n                    }\n                }],\n                ['1234', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: '1234',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['12', false, {\n                    message: '\"value\" with value \"12\" fails to match the required pattern: /^a/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^a/,\n                        value: '12',\n                        label: 'value'\n                    }\n                }],\n                ['ab', true],\n                ['abc', true],\n                ['abcd', false, {\n                    message: '\"value\" length must be less than or equal to 3 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 3,\n                        value: 'abcd',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when normalization form is invalid","suites":["string","normalize()"],"updatePoint":{"line":6151,"column":53},"line":6151,"code":"        it('throws when normalization form is invalid', () => {\n\n            expect(() => {\n\n                Joi.string().normalize('NFCD');\n            }).to.throw('normalization form must be one of NFC, NFD, NFKC, NFKD');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that are in NFC form","suites":["string","normalize()"],"updatePoint":{"line":6159,"column":51},"line":6159,"code":"        it('only allow strings that are in NFC form', () => {\n\n            const schema = Joi.string().normalize('NFC');\n\n            Helper.validate(schema, { convert: false }, [\n                [normalizations.original, false, {\n                    message: '\"value\" must be unicode normalized in the NFC form',\n                    path: [],\n                    type: 'string.normalize',\n                    context: {\n                        form: 'NFC',\n                        value: normalizations.original,\n                        label: 'value'\n                    }\n                }],\n                [normalizations.NFC, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that are in NFD form","suites":["string","normalize()"],"updatePoint":{"line":6178,"column":51},"line":6178,"code":"        it('only allow strings that are in NFD form', () => {\n\n            const schema = Joi.string().normalize('NFD');\n\n            Helper.validate(schema, { convert: false }, [\n                [normalizations.original, false, {\n                    message: '\"value\" must be unicode normalized in the NFD form',\n                    path: [],\n                    type: 'string.normalize',\n                    context: {\n                        form: 'NFD',\n                        value: normalizations.original,\n                        label: 'value'\n                    }\n                }],\n                [normalizations.NFD, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that are in NFKC form","suites":["string","normalize()"],"updatePoint":{"line":6197,"column":52},"line":6197,"code":"        it('only allow strings that are in NFKC form', () => {\n\n            const schema = Joi.string().normalize('NFKC');\n\n            Helper.validate(schema, { convert: false }, [\n                [normalizations.original, false, {\n                    message: '\"value\" must be unicode normalized in the NFKC form',\n                    path: [],\n                    type: 'string.normalize',\n                    context: {\n                        form: 'NFKC',\n                        value: normalizations.original,\n                        label: 'value'\n                    }\n                }],\n                [normalizations.NFKC, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that are in NFKD form","suites":["string","normalize()"],"updatePoint":{"line":6216,"column":52},"line":6216,"code":"        it('only allow strings that are in NFKD form', () => {\n\n            const schema = Joi.string().normalize('NFKD');\n\n            Helper.validate(schema, { convert: false }, [\n                [normalizations.original, false, {\n                    message: '\"value\" must be unicode normalized in the NFKD form',\n                    path: [],\n                    type: 'string.normalize',\n                    context: {\n                        form: 'NFKD',\n                        value: normalizations.original,\n                        label: 'value'\n                    }\n                }],\n                [normalizations.NFKD, true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"normalizes string using NFC before validation","suites":["string","normalize()"],"updatePoint":{"line":6235,"column":57},"line":6235,"code":"        it('normalizes string using NFC before validation', () => {\n\n            Helper.validate(Joi.string().normalize('NFC'), [[normalizations.original, true, normalizations.NFC]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"normalizes string using NFD before validation","suites":["string","normalize()"],"updatePoint":{"line":6240,"column":57},"line":6240,"code":"        it('normalizes string using NFD before validation', () => {\n\n            Helper.validate(Joi.string().normalize('NFD'), [[normalizations.original, true, normalizations.NFD]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"normalizes string using NFKC before validation","suites":["string","normalize()"],"updatePoint":{"line":6245,"column":58},"line":6245,"code":"        it('normalizes string using NFKC before validation', () => {\n\n            Helper.validate(Joi.string().normalize('NFKC'), [[normalizations.original, true, normalizations.NFKC]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"normalizes string using NFKD before validation","suites":["string","normalize()"],"updatePoint":{"line":6250,"column":58},"line":6250,"code":"        it('normalizes string using NFKD before validation', () => {\n\n            Helper.validate(Joi.string().normalize('NFKD'), [[normalizations.original, true, normalizations.NFKD]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should default to NFC form","suites":["string","normalize()"],"updatePoint":{"line":6255,"column":38},"line":6255,"code":"        it('should default to NFC form', () => {\n\n            Helper.validate(Joi.string().normalize(), [[normalizations.original, true, normalizations.NFC]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with min","suites":["string","normalize()"],"updatePoint":{"line":6263,"column":47},"line":6263,"code":"        it('should work in combination with min', () => {\n\n            const baseSchema = Joi.string().min(2);\n            Helper.validate(baseSchema.normalize('NFD'), [['\\u00F1', true, 'n\\u0303']]);\n\n            Helper.validate(baseSchema.normalize('NFC'), [['n\\u0303', false, {\n                message: '\"value\" length must be at least 2 characters long',\n                path: [],\n                type: 'string.min',\n                context: {\n                    limit: 2,\n                    value: '\\u00F1',\n                    encoding: undefined,\n                    label: 'value'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with max","suites":["string","normalize()"],"updatePoint":{"line":6281,"column":47},"line":6281,"code":"        it('should work in combination with max', () => {\n\n            const baseSchema = Joi.string().max(1);\n            Helper.validate(baseSchema.normalize('NFC'), [['n\\u0303', true, '\\u00F1']]);\n\n            Helper.validate(baseSchema.normalize('NFD'), [['\\u00F1', false, {\n                message: '\"value\" length must be less than or equal to 1 characters long',\n                path: [],\n                type: 'string.max',\n                context: {\n                    limit: 1,\n                    value: 'n\\u0303',\n                    encoding: undefined,\n                    label: 'value'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"composition should work in combination with length","suites":["string","normalize()"],"updatePoint":{"line":6299,"column":62},"line":6299,"code":"        it('composition should work in combination with length', () => {\n\n            const schema = Joi.string().length(2).normalize('NFC');\n\n            Helper.validate(schema, [\n                ['\\u00F1', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 2,\n                        value: '\\u00F1',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['n\\u0303', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 2,\n                        value: '\\u00F1',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['\\u00F1\\u00F1', true, '\\u00F1\\u00F1'.normalize('NFC')],\n                ['\\u00F1n\\u0303', true, '\\u00F1n\\u0303'.normalize('NFC')],\n                ['n\\u0303n\\u0303', true, 'n\\u0303n\\u0303'.normalize('NFC')]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"decomposition should work in combination with length","suites":["string","normalize()"],"updatePoint":{"line":6332,"column":64},"line":6332,"code":"        it('decomposition should work in combination with length', () => {\n\n            const schema = Joi.string().length(2).normalize('NFD');\n\n            Helper.validate(schema, [\n                ['\\u00F1\\u00F1', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 2,\n                        value: 'n\\u0303n\\u0303',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['\\u00F1n\\u0303', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 2,\n                        value: 'n\\u0303n\\u0303',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['n\\u0303n\\u0303', false, {\n                    message: '\"value\" length must be 2 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 2,\n                        value: 'n\\u0303n\\u0303',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['\\u00F1', true, '\\u00F1'.normalize('NFD')],\n                ['n\\u0303', true, 'n\\u0303'.normalize('NFD')]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with lowercase","suites":["string","normalize()"],"updatePoint":{"line":6375,"column":53},"line":6375,"code":"        it('should work in combination with lowercase', () => {\n\n            const baseSchema = Joi.string().lowercase();\n            Helper.validate(baseSchema.normalize('NFC'), [['N\\u0303', true, '\\u00F1']]);\n            Helper.validate(baseSchema.normalize('NFD'), [['\\u00D1', true, 'n\\u0303']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with uppercase","suites":["string","normalize()"],"updatePoint":{"line":6382,"column":53},"line":6382,"code":"        it('should work in combination with uppercase', () => {\n\n            const baseSchema = Joi.string().uppercase();\n            Helper.validate(baseSchema.normalize('NFC'), [['n\\u0303', true, '\\u00D1']]);\n            Helper.validate(baseSchema.normalize('NFD'), [['\\u00F1', true, 'N\\u0303']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates regex","suites":["string","regex()"],"updatePoint":{"line":6392,"column":27},"line":6392,"code":"        it('validates regex', () => {\n\n            const schema = Joi.string().regex(/^[0-9][-][a-z]+$/);\n            Helper.validate(schema, [\n                ['van', false, {\n                    message: '\"value\" with value \"van\" fails to match the required pattern: /^[0-9][-][a-z]+$/',\n                    path: [],\n                    type: 'string.pattern.base',\n                    context: {\n                        name: undefined,\n                        regex: /^[0-9][-][a-z]+$/,\n                        value: 'van',\n                        label: 'value'\n                    }\n                }],\n                ['0-www', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"rejects regex with global or sticky flag","suites":["string","regex()"],"updatePoint":{"line":6411,"column":52},"line":6411,"code":"        it('rejects regex with global or sticky flag', () => {\n\n            expect(() => Joi.string().regex(/a/g)).to.throw('regex should not use global or sticky mode');\n            expect(() => Joi.string().regex(/a/y)).to.throw('regex should not use global or sticky mode');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should not include a pattern name by default","suites":["string","regex()"],"updatePoint":{"line":6417,"column":56},"line":6417,"code":"        it('should not include a pattern name by default', () => {\n\n            const schema = Joi.string().regex(/[a-z]+/).regex(/[0-9]+/);\n            Helper.validate(schema, [['abcd', false, {\n                message: '\"value\" with value \"abcd\" fails to match the required pattern: /[0-9]+/',\n                path: [],\n                type: 'string.pattern.base',\n                context: {\n                    name: undefined,\n                    regex: /[0-9]+/,\n                    value: 'abcd',\n                    label: 'value'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should include a pattern name if specified","suites":["string","regex()"],"updatePoint":{"line":6433,"column":54},"line":6433,"code":"        it('should include a pattern name if specified', () => {\n\n            const schema = Joi.string().regex(/[a-z]+/, 'letters').regex(/[0-9]+/, 'numbers');\n            Helper.validate(schema, [['abcd', false, {\n                message: '\"value\" with value \"abcd\" fails to match the numbers pattern',\n                path: [],\n                type: 'string.pattern.name',\n                context: {\n                    name: 'numbers',\n                    regex: /[0-9]+/,\n                    value: 'abcd',\n                    label: 'value'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should include a pattern name in options object","suites":["string","regex()"],"updatePoint":{"line":6449,"column":59},"line":6449,"code":"        it('should include a pattern name in options object', () => {\n\n            const schema = Joi.string().regex(/[a-z]+/, { name: 'letters' }).regex(/[0-9]+/, { name: 'numbers' });\n            Helper.validate(schema, [['abcd', false, {\n                message: '\"value\" with value \"abcd\" fails to match the numbers pattern',\n                path: [],\n                type: 'string.pattern.name',\n                context: {\n                    name: 'numbers',\n                    regex: /[0-9]+/,\n                    value: 'abcd',\n                    label: 'value'\n                }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should \"invert\" regex pattern if specified in options object","suites":["string","regex()"],"updatePoint":{"line":6465,"column":72},"line":6465,"code":"        it('should \"invert\" regex pattern if specified in options object', () => {\n\n            const schema = Joi.string().regex(/[a-z]/, { invert: true });\n            Helper.validate(schema, [\n                ['0123456789', true],\n                ['abcdefg', false, {\n                    message: '\"value\" with value \"abcdefg\" matches the inverted pattern: /[a-z]/',\n                    path: [],\n                    type: 'string.pattern.invert.base',\n                    context: {\n                        name: undefined,\n                        regex: /[a-z]/,\n                        value: 'abcdefg',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should include inverted pattern name if specified","suites":["string","regex()"],"updatePoint":{"line":6484,"column":61},"line":6484,"code":"        it('should include inverted pattern name if specified', () => {\n\n            const schema = Joi.string().regex(/[a-z]/, {\n                name: 'lowercase',\n                invert: true\n            });\n            Helper.validate(schema, [\n                ['0123456789', true],\n                ['abcdefg', false, {\n                    message: '\"value\" with value \"abcdefg\" matches the inverted lowercase pattern',\n                    path: [],\n                    type: 'string.pattern.invert.name',\n                    context: {\n                        name: 'lowercase',\n                        regex: /[a-z]/,\n                        value: 'abcdefg',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"successfully replaces the first occurrence of the expression","suites":["string","replace()"],"updatePoint":{"line":6509,"column":72},"line":6509,"code":"        it('successfully replaces the first occurrence of the expression', () => {\n\n            const schema = Joi.string().replace(/\\s+/, ''); // no \"g\" flag\n            Helper.validate(schema, { convert: true }, [\n                ['\\tsomething', true, 'something'],\n                ['something\\r', true, 'something'],\n                ['something  ', true, 'something'],\n                ['some  thing', true, 'something'],\n                ['so me thing', true, 'some thing'] // first occurrence!\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"successfully replaces all occurrences of the expression","suites":["string","replace()"],"updatePoint":{"line":6521,"column":67},"line":6521,"code":"        it('successfully replaces all occurrences of the expression', () => {\n\n            const schema = Joi.string().replace(/\\s+/g, ''); // has \"g\" flag\n            Helper.validate(schema, { convert: true }, [\n                ['\\tsomething', true, 'something'],\n                ['something\\r', true, 'something'],\n                ['something  ', true, 'something'],\n                ['some  thing', true, 'something'],\n                ['so me thing', true, 'something']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"successfully replaces all occurrences of a string pattern","suites":["string","replace()"],"updatePoint":{"line":6533,"column":69},"line":6533,"code":"        it('successfully replaces all occurrences of a string pattern', () => {\n\n            const schema = Joi.string().replace('foo', 'X'); // has \"g\" flag\n            Helper.validate(schema, { convert: true }, [\n                ['foobarfoobazfoo', true, 'XbarXbazX']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"successfully replaces multiple times","suites":["string","replace()"],"updatePoint":{"line":6541,"column":48},"line":6541,"code":"        it('successfully replaces multiple times', () => {\n\n            const schema = Joi.string().replace(/a/g, 'b').replace(/b/g, 'c');\n            Helper.validate(schema, [['a quick brown fox', true, 'c quick crown fox']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with trim","suites":["string","replace()"],"updatePoint":{"line":6547,"column":48},"line":6547,"code":"        it('should work in combination with trim', () => {\n\n            // The string below is the name \"Yamada Tarou\" separated by a\n            // carriage return, a \"full width\" ideographic space and a newline\n\n            const schema = Joi.string().trim().replace(/\\s+/g, ' ');\n            Helper.validate(schema, [[' \\u5C71\\u7530\\r\\u3000\\n\\u592A\\u90CE ', true, '\\u5C71\\u7530 \\u592A\\u90CE']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with min","suites":["string","replace()"],"updatePoint":{"line":6556,"column":47},"line":6556,"code":"        it('should work in combination with min', () => {\n\n            const schema = Joi.string().min(4).replace(/\\s+/g, ' ');\n            Helper.validate(schema, [\n                ['   a   ', false, {\n                    message: '\"value\" length must be at least 4 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 4,\n                        value: ' a ',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abc    ', true, 'abc '],\n                ['a\\t\\rbc', true, 'a bc']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with max","suites":["string","replace()"],"updatePoint":{"line":6576,"column":47},"line":6576,"code":"        it('should work in combination with max', () => {\n\n            const schema = Joi.string().max(5).replace(/ CHANGE ME /g, '-b-');\n            Helper.validate(schema, [\n                ['a CHANGE ME c', true, 'a-b-c'],\n                ['a-b-c', true, 'a-b-c'] // nothing changes here!\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with length","suites":["string","replace()"],"updatePoint":{"line":6585,"column":50},"line":6585,"code":"        it('should work in combination with length', () => {\n\n            const schema = Joi.string().length(5).replace(/\\s+/g, ' ');\n            Helper.validate(schema, [\n                ['a    bc', false, {\n                    message: '\"value\" length must be 5 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 5,\n                        value: 'a bc',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['a\\tb\\nc', true, 'a b c']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"denies undefined, deny empty string","suites":["string","required()"],"updatePoint":{"line":6608,"column":47},"line":6608,"code":"        it('denies undefined, deny empty string', () => {\n\n            Helper.validate(Joi.string().required(), [\n                [undefined, false, {\n                    message: '\"value\" is required',\n                    path: [],\n                    type: 'any.required',\n                    context: { label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"prints a friend error message for an empty string","suites":["string","required()"],"updatePoint":{"line":6626,"column":61},"line":6626,"code":"        it('prints a friend error message for an empty string', () => {\n\n            const schema = Joi.string().required();\n            Helper.validate(Joi.compile(schema), [['', false, {\n                message: '\"value\" is not allowed to be empty',\n                path: [],\n                type: 'string.empty',\n                context: { value: '', label: 'value' }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"prints a friendly error message for trimmed whitespace","suites":["string","required()"],"updatePoint":{"line":6637,"column":66},"line":6637,"code":"        it('prints a friendly error message for trimmed whitespace', () => {\n\n            const schema = Joi.string().trim().required();\n\n            Helper.validate(Joi.compile(schema), [['    ', false, {\n                message: '\"value\" is not allowed to be empty',\n                path: [],\n                type: 'string.empty',\n                context: { value: '', label: 'value' }\n            }]]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates non-empty strings","suites":["string","required()"],"updatePoint":{"line":6649,"column":39},"line":6649,"code":"        it('validates non-empty strings', () => {\n\n            const schema = Joi.string().required();\n            Helper.validate(schema, [\n                ['test', true],\n                ['0', true],\n                [null, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: null, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates token","suites":["string","token()"],"updatePoint":{"line":6667,"column":27},"line":6667,"code":"        it('validates token', () => {\n\n            const schema = Joi.string().token();\n            Helper.validate(schema, [\n                ['w0rld_of_w4lm4rtl4bs', true],\n                ['w0rld of_w4lm4rtl4bs', false, {\n                    message: '\"value\" must only contain alpha-numeric and underscore characters',\n                    path: [],\n                    type: 'string.token',\n                    context: { value: 'w0rld of_w4lm4rtl4bs', label: 'value' }\n                }],\n                ['abcd#f?h1j orly?', false, {\n                    message: '\"value\" must only contain alpha-numeric and underscore characters',\n                    path: [],\n                    type: 'string.token',\n                    context: { value: 'abcd#f?h1j orly?', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that have no leading or trailing whitespace","suites":["string","trim()"],"updatePoint":{"line":6690,"column":74},"line":6690,"code":"        it('only allow strings that have no leading or trailing whitespace', () => {\n\n            const schema = Joi.string().trim();\n            Helper.validate(schema, { convert: false }, [\n                [' something', false, {\n                    message: '\"value\" must not have leading or trailing whitespace',\n                    path: [],\n                    type: 'string.trim',\n                    context: { value: ' something', label: 'value' }\n                }],\n                ['something ', false, {\n                    message: '\"value\" must not have leading or trailing whitespace',\n                    path: [],\n                    type: 'string.trim',\n                    context: { value: 'something ', label: 'value' }\n                }],\n                ['something\\n', false, {\n                    message: '\"value\" must not have leading or trailing whitespace',\n                    path: [],\n                    type: 'string.trim',\n                    context: { value: 'something\\n', label: 'value' }\n                }],\n                ['some thing', true],\n                ['something', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"disable existing trim flag when passing enabled: false","suites":["string","trim()"],"updatePoint":{"line":6717,"column":66},"line":6717,"code":"        it('disable existing trim flag when passing enabled: false', () => {\n\n            const trimEnabledSchema = Joi.string().trim(true);\n            Helper.validate(trimEnabledSchema, { convert: false }, [\n                [' something', false, {\n                    message: '\"value\" must not have leading or trailing whitespace',\n                    path: [],\n                    type: 'string.trim',\n                    context: { value: ' something', label: 'value' }\n                }]\n            ]);\n\n            const trimDisabledSchema = trimEnabledSchema.trim(false);\n            Helper.validate(trimDisabledSchema, { convert: false }, [\n                [' something', true]\n            ]);\n\n            Helper.validate(trimDisabledSchema, [\n                [' something', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"removes leading and trailing whitespace before validation","suites":["string","trim()"],"updatePoint":{"line":6739,"column":69},"line":6739,"code":"        it('removes leading and trailing whitespace before validation', () => {\n\n            const schema = Joi.string().trim();\n            Helper.validate(schema, [[' trim this ', true, 'trim this']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"removes leading and trailing whitespace before validation","suites":["string","trim()"],"updatePoint":{"line":6745,"column":69},"line":6745,"code":"        it('removes leading and trailing whitespace before validation', () => {\n\n            const schema = Joi.string().trim().allow('');\n            Helper.validate(schema, [['     ', true, '']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with min","suites":["string","trim()"],"updatePoint":{"line":6751,"column":47},"line":6751,"code":"        it('should work in combination with min', () => {\n\n            const schema = Joi.string().min(4).trim();\n            Helper.validate(schema, [\n                [' a ', false, {\n                    message: '\"value\" length must be at least 4 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 4,\n                        value: 'a',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abc ', false, {\n                    message: '\"value\" length must be at least 4 characters long',\n                    path: [],\n                    type: 'string.min',\n                    context: {\n                        limit: 4,\n                        value: 'abc',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abcd ', true, 'abcd']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with max","suites":["string","trim()"],"updatePoint":{"line":6781,"column":47},"line":6781,"code":"        it('should work in combination with max', () => {\n\n            const schema = Joi.string().max(4).trim();\n            Helper.validate(schema, [\n                [' abcde ', false, {\n                    message: '\"value\" length must be less than or equal to 4 characters long',\n                    path: [],\n                    type: 'string.max',\n                    context: {\n                        limit: 4,\n                        value: 'abcde',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abc ', true, 'abc'],\n                ['abcd ', true, 'abcd']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with length","suites":["string","trim()"],"updatePoint":{"line":6801,"column":50},"line":6801,"code":"        it('should work in combination with length', () => {\n\n            const schema = Joi.string().length(4).trim();\n            Helper.validate(schema, [\n                [' ab ', false, {\n                    message: '\"value\" length must be 4 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 4,\n                        value: 'ab',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abc ', false, {\n                    message: '\"value\" length must be 4 characters long',\n                    path: [],\n                    type: 'string.length',\n                    context: {\n                        limit: 4,\n                        value: 'abc',\n                        encoding: undefined,\n                        label: 'value'\n                    }\n                }],\n                ['abcd ', true, 'abcd']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"should work in combination with a case change","suites":["string","trim()"],"updatePoint":{"line":6831,"column":57},"line":6831,"code":"        it('should work in combination with a case change', () => {\n\n            const schema = Joi.string().trim().lowercase();\n            Helper.validate(schema, [\n                [' abc', true, 'abc'],\n                [' ABC', true, 'abc'],\n                ['ABC', true, 'abc']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"throws when option is not a boolean","suites":["string","trim()"],"updatePoint":{"line":6841,"column":47},"line":6841,"code":"        it('throws when option is not a boolean', () => {\n\n            expect(() => {\n\n                Joi.string().trim(42);\n            }).to.throw('enabled must be a boolean');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"avoids unnecessary cloning when called twice","suites":["string","truncate()"],"updatePoint":{"line":6852,"column":56},"line":6852,"code":"        it('avoids unnecessary cloning when called twice', () => {\n\n            const schema = Joi.string().truncate();\n            expect(schema.truncate()).to.shallow.equal(schema);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"switches the truncate flag","suites":["string","truncate()"],"updatePoint":{"line":6858,"column":38},"line":6858,"code":"        it('switches the truncate flag', () => {\n\n            const schema = Joi.string().truncate();\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'string',\n                flags: { truncate: true }\n            });\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"switches the truncate flag with explicit value","suites":["string","truncate()"],"updatePoint":{"line":6868,"column":58},"line":6868,"code":"        it('switches the truncate flag with explicit value', () => {\n\n            const schema = Joi.string().truncate(true);\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'string',\n                flags: { truncate: true }\n            });\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"switches the truncate flag back","suites":["string","truncate()"],"updatePoint":{"line":6878,"column":43},"line":6878,"code":"        it('switches the truncate flag back', () => {\n\n            const schema = Joi.string().truncate().truncate(false);\n            const desc = schema.describe();\n            expect(desc).to.equal({\n                type: 'string'\n            });\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"does not change anything when used without max","suites":["string","truncate()"],"updatePoint":{"line":6887,"column":58},"line":6887,"code":"        it('does not change anything when used without max', () => {\n\n            const schema = Joi.string().min(2).truncate();\n            Helper.validate(schema, [['fooooooooooooooooooo', true, 'fooooooooooooooooooo']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"truncates a string when used with max","suites":["string","truncate()"],"updatePoint":{"line":6893,"column":49},"line":6893,"code":"        it('truncates a string when used with max', () => {\n\n            const schema = Joi.string().max(5).truncate();\n\n            Helper.validate(schema, [\n                ['abc', true, 'abc'],\n                ['abcde', true, 'abcde'],\n                ['abcdef', true, 'abcde']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"truncates a string after transformations","suites":["string","truncate()"],"updatePoint":{"line":6904,"column":52},"line":6904,"code":"        it('truncates a string after transformations', () => {\n\n            const schema = Joi.string().max(5).truncate().trim().replace(/a/g, 'aa');\n\n            Helper.validate(schema, [\n                ['abc', true, 'aabc'],\n                ['abcde', true, 'aabcd'],\n                ['abcdef', true, 'aabcd'],\n                ['  abcdef  ', true, 'aabcd']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"truncates a string (ref)","suites":["string","truncate()"],"updatePoint":{"line":6916,"column":36},"line":6916,"code":"        it('truncates a string (ref)', () => {\n\n            const ref = Joi.ref('b');\n            const schema = Joi.object({\n                a: Joi.string().max(ref).truncate(),\n                b: Joi.number()\n            });\n\n            Helper.validate(schema, [\n                [{ a: 'abc', b: 4 }, true, { a: 'abc', b: 4 }],\n                [{ a: 'abcde', b: 2 }, true, { a: 'ab', b: 2 }],\n                [{ a: 'abcdef', b: 5 }, true, { a: 'abcde', b: 5 }],\n                [{ a: 'abc' }, false, {\n                    message: '\"a\" limit references \"ref:b\" which must be a positive integer',\n                    path: ['a'],\n                    type: 'any.ref',\n                    context: { key: 'a', label: 'a', ref, arg: 'limit', reason: 'must be a positive integer' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"only allow strings that are entirely uppercase","suites":["string","uppercase()"],"updatePoint":{"line":6940,"column":58},"line":6940,"code":"        it('only allow strings that are entirely uppercase', () => {\n\n            const schema = Joi.string().uppercase();\n            Helper.validate(schema, { convert: false }, [\n                ['THIS IS ALL UPPERCASE', true],\n                ['5', true],\n                ['UPPER\\nCASE', true],\n                ['lOWERCASE', false, {\n                    message: '\"value\" must only contain uppercase characters',\n                    path: [],\n                    type: 'string.uppercase',\n                    context: { value: 'lOWERCASE', label: 'value' }\n                }],\n                ['MixEd cAsE', false, {\n                    message: '\"value\" must only contain uppercase characters',\n                    path: [],\n                    type: 'string.uppercase',\n                    context: { value: 'MixEd cAsE', label: 'value' }\n                }],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"coerce string to uppercase before validation","suites":["string","uppercase()"],"updatePoint":{"line":6968,"column":56},"line":6968,"code":"        it('coerce string to uppercase before validation', () => {\n\n            const schema = Joi.string().uppercase();\n            Helper.validate(schema, [['lower to upper', true, 'LOWER TO UPPER']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"works in combination with a forced trim","suites":["string","uppercase()"],"updatePoint":{"line":6974,"column":51},"line":6974,"code":"        it('works in combination with a forced trim', () => {\n\n            const schema = Joi.string().uppercase().trim();\n            Helper.validate(schema, [\n                [' abc', true, 'ABC'],\n                [' ABC', true, 'ABC'],\n                ['ABC', true],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"works in combination with a forced replacement","suites":["string","uppercase()"],"updatePoint":{"line":6990,"column":58},"line":6990,"code":"        it('works in combination with a forced replacement', () => {\n\n            const schema = Joi.string().uppercase().replace(/\\s+/g, ' ');\n            Helper.validate(schema, [\n                ['a\\r b\\n c', true, 'A B C'],\n                ['A\\t B  C', true, 'A B C'],\n                ['ABC', true, 'ABC'],\n                [1, false, {\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 1, label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates combination of uppercase, min, max, alphanum and valid","suites":["string","uppercase()"],"updatePoint":{"line":7006,"column":76},"line":7006,"code":"        it('validates combination of uppercase, min, max, alphanum and valid', () => {\n\n            const rule = Joi.string().uppercase().min(2).max(3).alphanum().valid('AB', 'BC');\n            Helper.validate(rule, [\n                ['x', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'X', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['123', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '123', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['1234', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '1234', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['12', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '12', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['ab', true, 'AB'],\n                ['abc', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'ABC', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['a2c', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'A2C', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['abcd', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'ABCD', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['*ab', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '*AB', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: '', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['bc', true, 'BC'],\n                ['BC', true],\n                ['de', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'DE', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['ABc', false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'ABC', valids: ['AB', 'BC'], label: 'value' }\n                }],\n                ['AB', true],\n                [null, false, {\n                    message: '\"value\" must be one of [AB, BC]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: null, valids: ['AB', 'BC'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri","suites":["string","uri()"],"updatePoint":{"line":7092,"column":25},"line":7092,"code":"        it('validates uri', () => {\n\n            // Handful of tests taken from Node: https://github.com/joyent/node/blob/cfcb1de130867197cbc9c6012b7e84e08e53d032/test/simple/test-url.js\n            // Also includes examples from RFC 3986: http://tools.ietf.org/html/rfc3986#page-7\n\n            const schema = Joi.string().uri();\n\n            Helper.validate(schema, [\n                ['foo://example.com:8042/over/there?name=ferret#nose', true],\n                ['https://example.com?abc[]=123&abc[]=456', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'https://example.com?abc[]=123&abc[]=456', label: 'value' }\n                }],\n                ['urn:example:animal:ferret:nose', true],\n                ['ftp://ftp.is.co.za/rfc/rfc1808.txt', true],\n                ['http://www.ietf.org/rfc/rfc2396.txt', true],\n                ['ldap://[2001:db8::7]/c=GB?objectClass?one', true],\n                ['ldap://2001:db8::7/c=GB?objectClass?one', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'ldap://2001:db8::7/c=GB?objectClass?one', label: 'value' }\n                }],\n                ['mailto:John.Doe@example.com', true],\n                ['news:comp.infosystems.www.servers.unix', true],\n                ['tel:+1-816-555-1212', true],\n                ['telnet://192.0.2.16:80/', true],\n                ['urn:oasis:names:specification:docbook:dtd:xml:4.1.2', true],\n                ['file:///example.txt', true],\n                ['http://asdf:qw%20er@localhost:8000?asdf=12345&asda=fc%2F#bacon', true],\n                ['http://asdf@localhost:8000', true],\n                ['http://[v1.09azAZ-._~!$&\\'()*+,;=:]', true],\n                ['http://[a:b:c:d:e::1.2.3.4]', true],\n                ['coap://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]', true],\n                ['http://[1080:0:0:0:8:800:200C:417A]', true],\n                ['http://v1.09azAZ-._~!$&\\'()*+,;=:', true], // This doesn't look valid, but it is. The `v1.09azAZ-._~!$&\\'()*+,;=` part is a valid registered name as it has no invalid characters\n                ['http://a:b:c:d:e::1.2.3.4', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://a:b:c:d:e::1.2.3.4', label: 'value' }\n                }],\n                ['coap://FEDC:BA98:7654:3210:FEDC:BA98:7654:3210', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'coap://FEDC:BA98:7654:3210:FEDC:BA98:7654:3210', label: 'value' }\n                }],\n                ['http://1080:0:0:0:8:800:200C:417A', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://1080:0:0:0:8:800:200C:417A', label: 'value' }\n                }],\n                ['http://127.0.0.1:8000/foo?bar', true],\n                ['http://asdf:qwer@localhost:8000', true],\n                ['http://user:pass%3A@localhost:80', true],\n                ['http://localhost:123', true],\n                ['https://localhost:123', true],\n                ['file:///whatever', true],\n                ['mailto:asdf@asdf.com', true],\n                ['ftp://www.example.com', true],\n                ['javascript:alert(\\'hello\\');', true], // eslint-disable-line no-script-url\n                ['xmpp:isaacschlueter@jabber.org', true],\n                ['f://some.host/path', true],\n                ['http://localhost:18/asdf', true],\n                ['http://localhost:42/asdf?qwer=zxcv', true],\n                ['HTTP://www.example.com/', true],\n                ['HTTP://www.example.com', true],\n                ['http://www.ExAmPlE.com/', true],\n                ['http://user:pw@www.ExAmPlE.com/', true],\n                ['http://USER:PW@www.ExAmPlE.com/', true],\n                ['http://user@www.example.com/', true],\n                ['http://user%3Apw@www.example.com/', true],\n                ['http://x.com/path?that%27s#all,%20folks', true],\n                ['HTTP://X.COM/Y', true],\n                ['http://www.narwhaljs.org/blog/categories?id=news', true],\n                ['http://mt0.google.com/vt/lyrs=m@114&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://user:pass@mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://_jabber._tcp.google.com:80/test', true],\n                ['http://user:pass@_jabber._tcp.google.com:80/test', true],\n                ['http://[fe80::1]/a/b?a=b#abc', true],\n                ['http://fe80::1/a/b?a=b#abc', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://fe80::1/a/b?a=b#abc', label: 'value' }\n                }],\n                ['http://user:password@[3ffe:2a00:100:7031::1]:8080', true],\n                ['coap://[1080:0:0:0:8:800:200C:417A]:61616/', true],\n                ['coap://1080:0:0:0:8:800:200C:417A:61616/', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'coap://1080:0:0:0:8:800:200C:417A:61616/', label: 'value' }\n                }],\n                ['git+http://github.com/joyent/node.git', true],\n                ['http://bucket_name.s3.amazonaws.com/image.jpg', true],\n                ['dot.test://foo/bar', true],\n                ['svn+ssh://foo/bar', true],\n                ['dash-test://foo/bar', true],\n                ['xmpp:isaacschlueter@jabber.org', true],\n                ['http://atpass:foo%40bar@127.0.0.1:8080/path?search=foo#bar', true],\n                ['javascript:alert(\\'hello\\');', true], // eslint-disable-line no-script-url\n                ['file://localhost/etc/node/', true],\n                ['file:///etc/node/', true],\n                ['http://USER:PW@www.ExAmPlE.com/', true],\n                ['mailto:local1@domain1?query1', true],\n                ['http://example/a/b?c/../d', true],\n                ['http://example/x%2Fabc', true],\n                ['http://a/b/c/d;p=1/g;x=1/y', true],\n                ['http://a/b/c/g#s/../x', true],\n                ['http://a/b/c/.foo', true],\n                ['http://example.com/b//c//d;p?q#blarg', true],\n                ['g:h', true],\n                ['http://a/b/c/g', true],\n                ['http://a/b/c/g/', true],\n                ['http://a/g', true],\n                ['http://g', true],\n                ['http://a/b/c/d;p?y', true],\n                ['http://a/b/c/g?y', true],\n                ['http://a/b/c/d;p?q#s', true],\n                ['http://a/b/c/g#s', true],\n                ['http://a/b/c/g?y#s', true],\n                ['http://a/b/c/;x', true],\n                ['http://a/b/c/g;x', true],\n                ['http://a/b/c/g;x?y#s', true],\n                ['http://a/b/c/d;p?q', true],\n                ['http://a/b/c/', true],\n                ['http://a/b/', true],\n                ['http://a/b/g', true],\n                ['http://a/', true],\n                ['http://a/g', true],\n                ['http://a/g', true],\n                ['file:/asda', true],\n                ['qwerty', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'qwerty', label: 'value' }\n                }],\n                ['invalid uri', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'invalid uri', label: 'value' }\n                }],\n                ['1http://google.com', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '1http://google.com', label: 'value' }\n                }],\n                ['http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                ['(╯°□°)╯︵ ┻━┻', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '(╯°□°)╯︵ ┻━┻', label: 'value' }\n                }],\n                ['one/two/three?value=abc&value2=123#david-rules', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'one/two/three?value=abc&value2=123#david-rules', label: 'value' }\n                }],\n                ['//username:password@test.example.com/one/two/three?value=abc&value2=123#david-rules', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '//username:password@test.example.com/one/two/three?value=abc&value2=123#david-rules', label: 'value' }\n                }],\n                ['http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f', label: 'value' }\n                }],\n                ['/absolute', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '/absolute', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with a single scheme provided","suites":["string","uri()"],"updatePoint":{"line":7293,"column":55},"line":7293,"code":"        it('validates uri with a single scheme provided', () => {\n\n            const schema = Joi.string().uri({\n                scheme: 'http'\n            });\n\n            Helper.validate(schema, [\n                ['http://google.com', true],\n                ['https://google.com', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the http pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'http',\n                        value: 'https://google.com',\n                        label: 'value'\n                    }\n                }],\n                ['ftp://google.com', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the http pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'http',\n                        value: 'ftp://google.com',\n                        label: 'value'\n                    }\n                }],\n                ['file:/asdf', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the http pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'http',\n                        value: 'file:/asdf',\n                        label: 'value'\n                    }\n                }],\n                ['/path?query=value#hash', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the http pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'http',\n                        value: '/path?query=value#hash',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with a single regex scheme provided","suites":["string","uri()"],"updatePoint":{"line":7344,"column":61},"line":7344,"code":"        it('validates uri with a single regex scheme provided', () => {\n\n            const schema = Joi.string().uri({\n                scheme: /https?/\n            });\n\n            Helper.validate(schema, [\n                ['http://google.com', true],\n                ['https://google.com', true],\n                ['ftp://google.com', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the https? pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'https?',\n                        value: 'ftp://google.com',\n                        label: 'value'\n                    }\n                }],\n                ['file:/asdf', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the https? pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'https?',\n                        value: 'file:/asdf',\n                        label: 'value'\n                    }\n                }],\n                ['/path?query=value#hash', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the https? pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'https?',\n                        value: '/path?query=value#hash',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with multiple schemes provided","suites":["string","uri()"],"updatePoint":{"line":7386,"column":56},"line":7386,"code":"        it('validates uri with multiple schemes provided', () => {\n\n            const schema = Joi.string().uri({\n                scheme: [/https?/, 'ftp', 'file', 'git+http']\n            });\n\n            Helper.validate(schema, [\n                ['http://google.com', true],\n                ['https://google.com', true],\n                ['ftp://google.com', true],\n                ['file:/asdf', true],\n                ['git+http://github.com/hapijs/joi', true],\n                ['/path?query=value#hash', false, {\n                    message: '\"value\" must be a valid uri with a scheme matching the https?|ftp|file|git\\\\+http pattern',\n                    path: [],\n                    type: 'string.uriCustomScheme',\n                    context: {\n                        scheme: 'https?|ftp|file|git\\\\+http',\n                        value: '/path?query=value#hash',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri","suites":["string","uri()"],"updatePoint":{"line":7411,"column":25},"line":7411,"code":"        it('validates uri', () => {\n\n            const schema = { item: Joi.string().uri() };\n\n            Helper.validate(Joi.compile(schema), [[{ item: 'something invalid' }, false, '\"item\" must be a valid uri']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with a custom scheme","suites":["string","uri()"],"updatePoint":{"line":7418,"column":46},"line":7418,"code":"        it('validates uri with a custom scheme', () => {\n\n            const schema = {\n                item: Joi.string().uri({\n                    scheme: 'http'\n                })\n            };\n\n            Helper.validate(Joi.compile(schema), [[{ item: 'something invalid' }, false, '\"item\" must be a valid uri with a scheme matching the http pattern']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with a custom array of schemes","suites":["string","uri()"],"updatePoint":{"line":7429,"column":56},"line":7429,"code":"        it('validates uri with a custom array of schemes', () => {\n\n            const schema = {\n                item: Joi.string().uri({\n                    scheme: ['http', /https?/]\n                })\n            };\n\n            Helper.validate(Joi.compile(schema), [[{ item: 'something invalid' }, false, '\"item\" must be a valid uri with a scheme matching the http|https? pattern']]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri treats scheme as optional","suites":["string","uri()"],"updatePoint":{"line":7440,"column":51},"line":7440,"code":"        it('validates uri treats scheme as optional', () => {\n\n            expect(() => {\n\n                Joi.string().uri({});\n            }).to.not.throw();\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"handles missing domain","suites":["string","uri()"],"updatePoint":{"line":7448,"column":34},"line":7448,"code":"        it('handles missing domain', () => {\n\n            const schema = Joi.string().uri({ domain: { tlds: { allow: true } } });\n            expect(() => schema.validate('http:example.com')).to.not.throw();\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires uriOptions as an object","suites":["string","uri()"],"updatePoint":{"line":7454,"column":58},"line":7454,"code":"        it('validates uri requires uriOptions as an object', () => {\n\n            expect(() => {\n\n                Joi.string().uri('http');\n            }).to.throw(Error, 'Options must be of type object');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires scheme to be a RegExp, String, or Array","suites":["string","uri()"],"updatePoint":{"line":7462,"column":74},"line":7462,"code":"        it('validates uri requires scheme to be a RegExp, String, or Array', () => {\n\n            expect(() => {\n\n                Joi.string().uri({\n                    scheme: {}\n                });\n            }).to.throw(Error, 'scheme must be a RegExp, String, or Array');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires scheme to not be an empty array","suites":["string","uri()"],"updatePoint":{"line":7472,"column":66},"line":7472,"code":"        it('validates uri requires scheme to not be an empty array', () => {\n\n            expect(() => {\n\n                Joi.string().uri({\n                    scheme: []\n                });\n            }).to.throw(Error, 'scheme must have at least 1 scheme specified');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires scheme to be an Array of schemes to all be valid schemes","suites":["string","uri()"],"updatePoint":{"line":7482,"column":91},"line":7482,"code":"        it('validates uri requires scheme to be an Array of schemes to all be valid schemes', () => {\n\n            expect(() => {\n\n                Joi.string().uri({\n                    scheme: [\n                        'http',\n                        '~!@#$%^&*()_'\n                    ]\n                });\n            }).to.throw(Error, 'scheme at position 1 must be a valid scheme');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires scheme to be an Array of schemes to be strings or RegExp","suites":["string","uri()"],"updatePoint":{"line":7495,"column":91},"line":7495,"code":"        it('validates uri requires scheme to be an Array of schemes to be strings or RegExp', () => {\n\n            expect(() => {\n\n                Joi.string().uri({\n                    scheme: [\n                        'http',\n                        {}\n                    ]\n                });\n            }).to.throw(Error, 'scheme at position 1 must be a RegExp or String');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri requires scheme to be a valid String scheme","suites":["string","uri()"],"updatePoint":{"line":7508,"column":69},"line":7508,"code":"        it('validates uri requires scheme to be a valid String scheme', () => {\n\n            expect(() => {\n\n                Joi.string().uri({\n                    scheme: '~!@#$%^&*()_'\n                });\n            }).to.throw(Error, 'scheme at position 0 must be a valid scheme');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri and domain","suites":["string","uri()"],"updatePoint":{"line":7518,"column":36},"line":7518,"code":"        it('validates uri and domain', () => {\n\n            const schema = Joi.string().uri({ domain: { minDomainSegments: 3, tlds: { allow: ['com'] } } });\n\n            Helper.validate(schema, [\n                ['http://test.google.com', true],\n                ['http://google.com', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: {\n                        value: 'google.com',\n                        label: 'value'\n                    }\n                }],\n                ['http://test.google.net', false, {\n                    message: '\"value\" must contain a valid domain name',\n                    path: [],\n                    type: 'string.domain',\n                    context: {\n                        value: 'test.google.net',\n                        label: 'value'\n                    }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri and domain (true)","suites":["string","uri()"],"updatePoint":{"line":7545,"column":43},"line":7545,"code":"        it('validates uri and domain (true)', () => {\n\n            const schema = Joi.string().uri({ domain: {} });\n\n            Helper.validate(schema, [\n                ['http://test.google.com', true],\n                ['http://google.com%F', false, '\"value\" must contain a valid domain name']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates relative uri","suites":["string","uri()"],"updatePoint":{"line":7555,"column":34},"line":7555,"code":"        it('validates relative uri', () => {\n\n            const schema = Joi.string().uri({ allowRelative: true });\n            Helper.validate(schema, [\n                ['foo://example.com:8042/over/there?name=ferret#nose', true],\n                ['urn:example:animal:ferret:nose', true],\n                ['ftp://ftp.is.co.za/rfc/rfc1808.txt', true],\n                ['http://www.ietf.org/rfc/rfc2396.txt', true],\n                ['ldap://[2001:db8::7]/c=GB?objectClass?one', true],\n                ['mailto:John.Doe@example.com', true],\n                ['news:comp.infosystems.www.servers.unix', true],\n                ['tel:+1-816-555-1212', true],\n                ['telnet://192.0.2.16:80/', true],\n                ['urn:oasis:names:specification:docbook:dtd:xml:4.1.2', true],\n                ['file:///example.txt', true],\n                ['http://asdf:qw%20er@localhost:8000?asdf=12345&asda=fc%2F#bacon', true],\n                ['http://asdf@localhost:8000', true],\n                ['http://[v1.09azAZ-._~!$&\\'()*+,;=:]', true],\n                ['http://[a:b:c:d:e::1.2.3.4]', true],\n                ['coap://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]', true],\n                ['http://[1080:0:0:0:8:800:200C:417A]', true],\n                ['http://127.0.0.1:8000/foo?bar', true],\n                ['http://asdf:qwer@localhost:8000', true],\n                ['http://user:pass%3A@localhost:80', true],\n                ['http://localhost:123', true],\n                ['https://localhost:123', true],\n                ['file:///whatever', true],\n                ['mailto:asdf@asdf.com', true],\n                ['ftp://www.example.com', true],\n                ['javascript:alert(\\'hello\\');', true], // eslint-disable-line no-script-url\n                ['xmpp:isaacschlueter@jabber.org', true],\n                ['f://some.host/path', true],\n                ['http://localhost:18/asdf', true],\n                ['http://localhost:42/asdf?qwer=zxcv', true],\n                ['HTTP://www.example.com/', true],\n                ['HTTP://www.example.com', true],\n                ['http://www.ExAmPlE.com/', true],\n                ['http://user:pw@www.ExAmPlE.com/', true],\n                ['http://USER:PW@www.ExAmPlE.com/', true],\n                ['http://user@www.example.com/', true],\n                ['http://user%3Apw@www.example.com/', true],\n                ['http://x.com/path?that%27s#all,%20folks', true],\n                ['HTTP://X.COM/Y', true],\n                ['http://www.narwhaljs.org/blog/categories?id=news', true],\n                ['http://mt0.google.com/vt/lyrs=m@114&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://user:pass@mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', true],\n                ['http://_jabber._tcp.google.com:80/test', true],\n                ['http://user:pass@_jabber._tcp.google.com:80/test', true],\n                ['http://[fe80::1]/a/b?a=b#abc', true],\n                ['http://user:password@[3ffe:2a00:100:7031::1]:8080', true],\n                ['coap://[1080:0:0:0:8:800:200C:417A]:61616/', true],\n                ['git+http://github.com/joyent/node.git', true],\n                ['http://bucket_name.s3.amazonaws.com/image.jpg', true],\n                ['dot.test://foo/bar', true],\n                ['svn+ssh://foo/bar', true],\n                ['dash-test://foo/bar', true],\n                ['xmpp:isaacschlueter@jabber.org', true],\n                ['http://atpass:foo%40bar@127.0.0.1:8080/path?search=foo#bar', true],\n                ['javascript:alert(\\'hello\\');', true], // eslint-disable-line no-script-url\n                ['file://localhost/etc/node/', true],\n                ['file:///etc/node/', true],\n                ['http://USER:PW@www.ExAmPlE.com/', true],\n                ['mailto:local1@domain1?query1', true],\n                ['http://example/a/b?c/../d', true],\n                ['http://example/x%2Fabc', true],\n                ['http://a/b/c/d;p=1/g;x=1/y', true],\n                ['http://a/b/c/g#s/../x', true],\n                ['http://a/b/c/.foo', true],\n                ['http://example.com/b//c//d;p?q#blarg', true],\n                ['g:h', true],\n                ['http://a/b/c/g', true],\n                ['http://a/b/c/g/', true],\n                ['http://a/g', true],\n                ['http://g', true],\n                ['http://a/b/c/d;p?y', true],\n                ['http://a/b/c/g?y', true],\n                ['http://a/b/c/d;p?q#s', true],\n                ['http://a/b/c/g#s', true],\n                ['http://a/b/c/g?y#s', true],\n                ['http://a/b/c/;x', true],\n                ['http://a/b/c/g;x', true],\n                ['http://a/b/c/g;x?y#s', true],\n                ['http://a/b/c/d;p?q', true],\n                ['http://a/b/c/', true],\n                ['http://a/b/', true],\n                ['http://a/b/g', true],\n                ['http://a/', true],\n                ['http://a/g', true],\n                ['http://a/g', true],\n                ['file:/asda', true],\n                ['qwerty', true],\n                ['invalid uri', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'invalid uri', label: 'value' }\n                }],\n                ['1http://google.com', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '1http://google.com', label: 'value' }\n                }],\n                ['http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org', label: 'value' }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                ['(╯°□°)╯︵ ┻━┻', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: '(╯°□°)╯︵ ┻━┻', label: 'value' }\n                }],\n                ['one/two/three?value=abc&value2=123#david-rules', true],\n                ['//username:password@test.example.com/one/two/three?value=abc&value2=123#david-rules', true],\n                ['http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f', label: 'value' }\n                }],\n                ['/absolute', true],\n                ['http://', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http://', label: 'value' }\n                }],\n                ['http:/', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'http:/', label: 'value' }\n                }],\n                ['https:/', false, {\n                    message: '\"value\" must be a valid uri',\n                    path: [],\n                    type: 'string.uri',\n                    context: { value: 'https:/', label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates relative only uri","suites":["string","uri()"],"updatePoint":{"line":7707,"column":39},"line":7707,"code":"        it('validates relative only uri', () => {\n\n            const schema = Joi.string().uri({ relativeOnly: true });\n            Helper.validate(schema, [\n                ['foo://example.com:8042/over/there?name=ferret#nose', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'foo://example.com:8042/over/there?name=ferret#nose',\n                        label: 'value'\n                    }\n                }],\n                ['urn:example:animal:ferret:nose', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'urn:example:animal:ferret:nose',\n                        label: 'value'\n                    }\n                }],\n                ['ftp://ftp.is.co.za/rfc/rfc1808.txt', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'ftp://ftp.is.co.za/rfc/rfc1808.txt',\n                        label: 'value'\n                    }\n                }],\n                ['http://www.ietf.org/rfc/rfc2396.txt', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://www.ietf.org/rfc/rfc2396.txt',\n                        label: 'value'\n                    }\n                }],\n                ['ldap://[2001:db8::7]/c=GB?objectClass?one', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'ldap://[2001:db8::7]/c=GB?objectClass?one',\n                        label: 'value'\n                    }\n                }],\n                ['mailto:John.Doe@example.com', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'mailto:John.Doe@example.com',\n                        label: 'value'\n                    }\n                }],\n                ['news:comp.infosystems.www.servers.unix', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'news:comp.infosystems.www.servers.unix',\n                        label: 'value'\n                    }\n                }],\n                ['tel:+1-816-555-1212', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'tel:+1-816-555-1212',\n                        label: 'value'\n                    }\n                }],\n                ['telnet://192.0.2.16:80/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'telnet://192.0.2.16:80/',\n                        label: 'value'\n                    }\n                }],\n                ['urn:oasis:names:specification:docbook:dtd:xml:4.1.2', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'urn:oasis:names:specification:docbook:dtd:xml:4.1.2',\n                        label: 'value'\n                    }\n                }],\n                ['file:///example.txt', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'file:///example.txt',\n                        label: 'value'\n                    }\n                }],\n                ['http://asdf:qw%20er@localhost:8000?asdf=12345&asda=fc%2F#bacon', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://asdf:qw%20er@localhost:8000?asdf=12345&asda=fc%2F#bacon',\n                        label: 'value'\n                    }\n                }],\n                ['http://asdf@localhost:8000', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://asdf@localhost:8000',\n                        label: 'value'\n                    }\n                }],\n                ['http://[v1.09azAZ-._~!$&\\'()*+,;=:]', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://[v1.09azAZ-._~!$&\\'()*+,;=:]',\n                        label: 'value'\n                    }\n                }],\n                ['http://[a:b:c:d:e::1.2.3.4]', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://[a:b:c:d:e::1.2.3.4]',\n                        label: 'value'\n                    }\n                }],\n                ['coap://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'coap://[FEDC:BA98:7654:3210:FEDC:BA98:7654:3210]',\n                        label: 'value'\n                    }\n                }],\n                ['http://[1080:0:0:0:8:800:200C:417A]', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://[1080:0:0:0:8:800:200C:417A]',\n                        label: 'value'\n                    }\n                }],\n                ['http://127.0.0.1:8000/foo?bar', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://127.0.0.1:8000/foo?bar',\n                        label: 'value'\n                    }\n                }],\n                ['http://asdf:qwer@localhost:8000', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://asdf:qwer@localhost:8000',\n                        label: 'value'\n                    }\n                }],\n                ['http://user:pass%3A@localhost:80', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user:pass%3A@localhost:80',\n                        label: 'value'\n                    }\n                }],\n                ['http://localhost:123', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://localhost:123',\n                        label: 'value'\n                    }\n                }],\n                ['https://localhost:123', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'https://localhost:123',\n                        label: 'value'\n                    }\n                }],\n                ['file:///whatever', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'file:///whatever',\n                        label: 'value'\n                    }\n                }],\n                ['mailto:asdf@asdf.com', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'mailto:asdf@asdf.com',\n                        label: 'value'\n                    }\n                }],\n                ['ftp://www.example.com', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'ftp://www.example.com',\n                        label: 'value'\n                    }\n                }],\n                ['javascript:alert(\\'hello\\');', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'javascript:alert(\\'hello\\');',\n                        label: 'value'\n                    }\n                }], // eslint-disable-line no-script-url\n                ['xmpp:isaacschlueter@jabber.org', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'xmpp:isaacschlueter@jabber.org',\n                        label: 'value'\n                    }\n                }],\n                ['f://some.host/path', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'f://some.host/path',\n                        label: 'value'\n                    }\n                }],\n                ['http://localhost:18/asdf', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://localhost:18/asdf',\n                        label: 'value'\n                    }\n                }],\n                ['http://localhost:42/asdf?qwer=zxcv', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://localhost:42/asdf?qwer=zxcv',\n                        label: 'value'\n                    }\n                }],\n                ['HTTP://www.example.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'HTTP://www.example.com/',\n                        label: 'value'\n                    }\n                }],\n                ['HTTP://www.example.com', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'HTTP://www.example.com',\n                        label: 'value'\n                    }\n                }],\n                ['http://www.ExAmPlE.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://www.ExAmPlE.com/',\n                        label: 'value'\n                    }\n                }],\n                ['http://user:pw@www.ExAmPlE.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user:pw@www.ExAmPlE.com/',\n                        label: 'value'\n                    }\n                }],\n                ['http://USER:PW@www.ExAmPlE.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://USER:PW@www.ExAmPlE.com/',\n                        label: 'value'\n                    }\n                }],\n                ['http://user@www.example.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user@www.example.com/',\n                        label: 'value'\n                    }\n                }],\n                ['http://user%3Apw@www.example.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user%3Apw@www.example.com/',\n                        label: 'value'\n                    }\n                }],\n                ['http://x.com/path?that%27s#all,%20folks', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://x.com/path?that%27s#all,%20folks',\n                        label: 'value'\n                    }\n                }],\n                ['HTTP://X.COM/Y', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'HTTP://X.COM/Y',\n                        label: 'value'\n                    }\n                }],\n                ['http://www.narwhaljs.org/blog/categories?id=news', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://www.narwhaljs.org/blog/categories?id=news',\n                        label: 'value'\n                    }\n                }],\n                ['http://mt0.google.com/vt/lyrs=m@114&hl=en&src=api&x=2&y=2&z=3&s=', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://mt0.google.com/vt/lyrs=m@114&hl=en&src=api&x=2&y=2&z=3&s=',\n                        label: 'value'\n                    }\n                }],\n                ['http://mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=',\n                        label: 'value'\n                    }\n                }],\n                ['http://user:pass@mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user:pass@mt0.google.com/vt/lyrs=m@114???&hl=en&src=api&x=2&y=2&z=3&s=',\n                        label: 'value'\n                    }\n                }],\n                ['http://_jabber._tcp.google.com:80/test', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://_jabber._tcp.google.com:80/test',\n                        label: 'value'\n                    }\n                }],\n                ['http://user:pass@_jabber._tcp.google.com:80/test', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user:pass@_jabber._tcp.google.com:80/test',\n                        label: 'value'\n                    }\n                }],\n                ['http://[fe80::1]/a/b?a=b#abc', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://[fe80::1]/a/b?a=b#abc',\n                        label: 'value'\n                    }\n                }],\n                ['http://user:password@[3ffe:2a00:100:7031::1]:8080', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://user:password@[3ffe:2a00:100:7031::1]:8080',\n                        label: 'value'\n                    }\n                }],\n                ['coap://[1080:0:0:0:8:800:200C:417A]:61616/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'coap://[1080:0:0:0:8:800:200C:417A]:61616/',\n                        label: 'value'\n                    }\n                }],\n                ['git+http://github.com/joyent/node.git', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'git+http://github.com/joyent/node.git',\n                        label: 'value'\n                    }\n                }],\n                ['http://bucket_name.s3.amazonaws.com/image.jpg', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://bucket_name.s3.amazonaws.com/image.jpg',\n                        label: 'value'\n                    }\n                }],\n                ['dot.test://foo/bar', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'dot.test://foo/bar',\n                        label: 'value'\n                    }\n                }],\n                ['svn+ssh://foo/bar', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'svn+ssh://foo/bar',\n                        label: 'value'\n                    }\n                }],\n                ['dash-test://foo/bar', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'dash-test://foo/bar',\n                        label: 'value'\n                    }\n                }],\n                ['xmpp:isaacschlueter@jabber.org', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'xmpp:isaacschlueter@jabber.org',\n                        label: 'value'\n                    }\n                }],\n                ['http://atpass:foo%40bar@127.0.0.1:8080/path?search=foo#bar', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://atpass:foo%40bar@127.0.0.1:8080/path?search=foo#bar',\n                        label: 'value'\n                    }\n                }],\n                ['javascript:alert(\\'hello\\');', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'javascript:alert(\\'hello\\');',\n                        label: 'value'\n                    }\n                }], // eslint-disable-line no-script-url\n                ['file://localhost/etc/node/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'file://localhost/etc/node/',\n                        label: 'value'\n                    }\n                }],\n                ['file:///etc/node/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'file:///etc/node/',\n                        label: 'value'\n                    }\n                }],\n                ['http://USER:PW@www.ExAmPlE.com/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://USER:PW@www.ExAmPlE.com/',\n                        label: 'value'\n                    }\n                }],\n                ['mailto:local1@domain1?query1', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'mailto:local1@domain1?query1',\n                        label: 'value'\n                    }\n                }],\n                ['http://example/a/b?c/../d', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://example/a/b?c/../d',\n                        label: 'value'\n                    }\n                }],\n                ['http://example/x%2Fabc', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://example/x%2Fabc',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/d;p=1/g;x=1/y', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/d;p=1/g;x=1/y',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g#s/../x', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g#s/../x',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/.foo', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/.foo',\n                        label: 'value'\n                    }\n                }],\n                ['http://example.com/b//c//d;p?q#blarg', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://example.com/b//c//d;p?q#blarg',\n                        label: 'value'\n                    }\n                }],\n                ['g:h', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'g:h',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g/',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/g',\n                        label: 'value'\n                    }\n                }],\n                ['http://g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://g',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/d;p?y', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/d;p?y',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g?y', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g?y',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/d;p?q#s', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/d;p?q#s',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g#s', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g#s',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g?y#s', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g?y#s',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/;x', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/;x',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g;x', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g;x',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/g;x?y#s', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/g;x?y#s',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/d;p?q', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/d;p?q',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/c/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/c/',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/b/g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/b/g',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/g',\n                        label: 'value'\n                    }\n                }],\n                ['http://a/g', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a/g',\n                        label: 'value'\n                    }\n                }],\n                ['file:/asda', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'file:/asda',\n                        label: 'value'\n                    }\n                }],\n                ['qwerty', true],\n                ['invalid uri', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'invalid uri',\n                        label: 'value'\n                    }\n                }],\n                ['1http://google.com', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: '1http://google.com',\n                        label: 'value'\n                    }\n                }],\n                ['http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://testdomain`,.<>/?\\'\";{}][++\\\\|~!@#$%^&*().org',\n                        label: 'value'\n                    }\n                }],\n                ['', false, {\n                    message: '\"value\" is not allowed to be empty',\n                    path: [],\n                    type: 'string.empty',\n                    context: { value: '', label: 'value' }\n                }],\n                ['(╯°□°)╯︵ ┻━┻', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: '(╯°□°)╯︵ ┻━┻',\n                        label: 'value'\n                    }\n                }],\n                ['one/two/three?value=abc&value2=123#david-rules', true],\n                ['//username:password@test.example.com/one/two/three?value=abc&value2=123#david-rules', true],\n                ['http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f', false, {\n                    message: '\"value\" must be a valid relative uri',\n                    path: [],\n                    type: 'string.uriRelativeOnly',\n                    context: {\n                        value: 'http://a\\r\" \\t\\n<\\'b:b@c\\r\\nd/e?f',\n                        label: 'value'\n                    }\n                }],\n                ['/absolute', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates relative only uri with domain","suites":["string","uri()"],"updatePoint":{"line":8552,"column":51},"line":8552,"code":"        it('validates relative only uri with domain', () => {\n\n            const schema = Joi.string().uri({ relativeOnly: true, domain: { minDomainSegments: 3, tlds: { allow: ['com'] } } });\n            Helper.validate(schema, [\n                ['foo://example.com:8042/over/there?name=ferret#nose', false, '\"value\" must be a valid relative uri'],\n                ['//test.example.com:8042/over/there?name=ferret#nose', true],\n                ['//example.com:8042/over/there?name=ferret#nose', false, '\"value\" must contain a valid domain name']\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates allowed relative uri with domain","suites":["string","uri()"],"updatePoint":{"line":8562,"column":54},"line":8562,"code":"        it('validates allowed relative uri with domain', () => {\n\n            const schema = Joi.string().uri({ allowRelative: true, domain: { minDomainSegments: 3, tlds: { allow: ['com'] } } });\n            Helper.validate(schema, [\n                ['//test.example.com:8042/over/there?name=ferret#nose', true],\n                ['//example.com:8042/over/there?name=ferret#nose', false, '\"value\" must contain a valid domain name'],\n                ['relative', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates uri with square brackets allowed","suites":["string","uri()"],"updatePoint":{"line":8572,"column":54},"line":8572,"code":"        it('validates uri with square brackets allowed', () => {\n\n            const schema = Joi.string().uri({ allowQuerySquareBrackets: true });\n\n            Helper.validate(schema, [\n                ['https://example.com?abc[]=123&abc[]=456', true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"errors on unknown options","suites":["string","uri()"],"updatePoint":{"line":8581,"column":37},"line":8581,"code":"        it('errors on unknown options', () => {\n\n            expect(() => Joi.string().uri({ foo: 'bar', baz: 'qux' })).to.throw('Options contain unknown keys: foo,baz');\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates case sensitive values","suites":["string","valid()"],"updatePoint":{"line":8589,"column":43},"line":8589,"code":"        it('validates case sensitive values', () => {\n\n            Helper.validate(Joi.string().valid('a', 'b'), [\n                ['a', true],\n                ['b', true],\n                ['A', false, {\n                    message: '\"value\" must be one of [a, b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'A', valids: ['a', 'b'], label: 'value' }\n                }],\n                ['B', false, {\n                    message: '\"value\" must be one of [a, b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 'B', valids: ['a', 'b'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates case insensitive values","suites":["string","valid()"],"updatePoint":{"line":8609,"column":45},"line":8609,"code":"        it('validates case insensitive values', () => {\n\n            Helper.validate(Joi.string().valid('a', 'b').insensitive(), [\n                ['a', true],\n                ['b', true],\n                ['A', true, 'a'],\n                ['B', true, 'b'],\n                [4, false, {\n                    message: '\"value\" must be one of [a, b]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 4, valids: ['a', 'b'], label: 'value' }\n                }]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"validates case insensitive values with non-strings","suites":["string","valid()"],"updatePoint":{"line":8625,"column":62},"line":8625,"code":"        it('validates case insensitive values with non-strings', () => {\n\n            const valids = ['a', 'b', 5, Buffer.from('c')];\n            Helper.validate(Joi.string().valid(...valids).insensitive(), [\n                ['a', true],\n                ['b', true],\n                ['A', true, 'a'],\n                ['B', true, 'b'],\n                [4, false, {\n                    message: '\"value\" must be one of [a, b, 5, c]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: 4, valids, label: 'value' }\n                }],\n                [5, true],\n                [Buffer.from('c'), true]\n            ]);\n        });","file":"types/string.js","skipped":false,"dir":"test"},{"name":"cannot be called on its own","suites":["symbol"],"updatePoint":{"line":19,"column":35},"line":19,"code":"    it('cannot be called on its own', () => {\n\n        const symbol = Joi.symbol;\n        expect(() => symbol()).to.throw('Must be invoked on a Joi instance.');\n    });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"should throw an exception if arguments were passed.","suites":["symbol"],"updatePoint":{"line":25,"column":59},"line":25,"code":"    it('should throw an exception if arguments were passed.', () => {\n\n        expect(() => Joi.symbol('invalid argument.')).to.throw('The symbol type does not allow arguments');\n    });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"clones a symbols type","suites":["symbol","clone()"],"updatePoint":{"line":32,"column":33},"line":32,"code":"        it('clones a symbols type', () => {\n\n            const schema = Joi.symbol();\n            const clone = schema.clone();\n            Helper.equal(schema, clone);\n            expect(schema).to.not.shallow.equal(clone);\n        });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"handles plain symbols","suites":["symbol","validate()"],"updatePoint":{"line":43,"column":33},"line":43,"code":"        it('handles plain symbols', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const rule = Joi.symbol();\n            Helper.validate(rule, [\n                [symbols[0], true, symbols[0]],\n                [symbols[1], true, symbols[1]],\n                [1, false, {\n                    message: '\"value\" must be a symbol',\n                    path: [],\n                    type: 'symbol.base',\n                    context: { label: 'value', value: 1 }\n                }]\n            ]);\n        });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"handles simple lookup","suites":["symbol","validate()"],"updatePoint":{"line":59,"column":33},"line":59,"code":"        it('handles simple lookup', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const otherSymbol = Symbol(1);\n            const rule = Joi.symbol().valid(...symbols);\n            Helper.validate(rule, [\n                [symbols[0], true, symbols[0]],\n                [symbols[1], true, symbols[1]],\n                [otherSymbol, false, {\n                    message: '\"value\" must be one of [Symbol(1), Symbol(2)]',\n                    path: [],\n                    type: 'any.only',\n                    context: { value: otherSymbol, label: 'value', valids: symbols }\n                }]\n            ]);\n        });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"converts keys to correct symbol","suites":["symbol","validate()","map"],"updatePoint":{"line":78,"column":47},"line":78,"code":"            it('converts keys to correct symbol', () => {\n\n                const symbols = [Symbol(1), Symbol(2)];\n                const otherSymbol = Symbol(1);\n                const map = new Map([[1, symbols[0]], ['two', symbols[1]]]);\n                const rule = Joi.symbol().map(map);\n                Helper.validate(rule, [\n                    [1, true, symbols[0]],\n                    [symbols[0], true, symbols[0]],\n                    ['1', false, {\n                        message: `\"value\" must be one of [1 -> Symbol(1), two -> Symbol(2)]`,\n                        path: [],\n                        type: 'symbol.map',\n                        context: { label: 'value', value: '1', map }\n                    }],\n                    ['two', true, symbols[1]],\n                    [otherSymbol, false, {\n                        message: '\"value\" must be one of [Symbol(1), Symbol(2)]',\n                        path: [],\n                        type: 'any.only',\n                        context: { value: otherSymbol, label: 'value', valids: symbols }\n                    }]\n                ]);\n            });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"converts keys from object","suites":["symbol","validate()","map"],"updatePoint":{"line":103,"column":41},"line":103,"code":"            it('converts keys from object', () => {\n\n                const symbols = [Symbol('one'), Symbol('two')];\n                const otherSymbol = Symbol('one');\n                const rule = Joi.symbol().map({ one: symbols[0], two: symbols[1] });\n                Helper.validate(rule, [\n                    [symbols[0], true, symbols[0]],\n                    ['one', true, symbols[0]],\n                    ['two', true, symbols[1]],\n                    [otherSymbol, false, {\n                        message: '\"value\" must be one of [Symbol(one), Symbol(two)]',\n                        path: [],\n                        type: 'any.only',\n                        context: { value: otherSymbol, label: 'value', valids: symbols }\n                    }],\n                    ['toString', false, {\n                        message: `\"value\" must be one of [one -> Symbol(one), two -> Symbol(two)]`,\n                        path: [],\n                        type: 'symbol.map',\n                        context: { label: 'value', value: 'toString', map: new Map([['one', symbols[0]], ['two', symbols[1]]]) }\n                    }]\n                ]);\n            });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"appends to existing map","suites":["symbol","validate()","map"],"updatePoint":{"line":127,"column":39},"line":127,"code":"            it('appends to existing map', () => {\n\n                const symbols = [Symbol(1), Symbol(2)];\n                const otherSymbol = Symbol(1);\n                const rule = Joi.symbol().map([[1, symbols[0]]]).map([[2, symbols[1]]]);\n                Helper.validate(rule, [\n                    [1, true, symbols[0]],\n                    [2, true, symbols[1]],\n                    [otherSymbol, false, {\n                        message: '\"value\" must be one of [Symbol(1), Symbol(2)]',\n                        path: [],\n                        type: 'any.only',\n                        context: { value: otherSymbol, label: 'value', valids: symbols }\n                    }]\n                ]);\n            });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"throws on bad input","suites":["symbol","validate()","map"],"updatePoint":{"line":144,"column":35},"line":144,"code":"            it('throws on bad input', () => {\n\n                expect(\n                    () => Joi.symbol().map()\n                ).to.throw('Iterable must be an iterable or object');\n\n                expect(\n                    () => Joi.symbol().map(Symbol())\n                ).to.throw('Iterable must be an iterable or object');\n\n                expect(\n                    () => Joi.symbol().map([undefined])\n                ).to.throw('Entry must be an iterable');\n\n                expect(\n                    () => Joi.symbol().map([123])\n                ).to.throw('Entry must be an iterable');\n\n                expect(\n                    () => Joi.symbol().map([[123, 456]])\n                ).to.throw('Value must be a Symbol');\n\n                expect(\n                    () => Joi.symbol().map([[{}, Symbol()]])\n                ).to.throw('Key must not be of type object, function, or Symbol');\n\n                expect(\n                    () => Joi.symbol().map([[() => { }, Symbol()]])\n                ).to.throw('Key must not be of type object, function, or Symbol');\n\n                expect(\n                    () => Joi.symbol().map([[Symbol(), Symbol()]])\n                ).to.throw('Key must not be of type object, function, or Symbol');\n            });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"handles plain symbols when convert is disabled","suites":["symbol","validate()","map"],"updatePoint":{"line":180,"column":58},"line":180,"code":"        it('handles plain symbols when convert is disabled', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const schema = Joi.symbol().map([[1, symbols[0]], ['two', symbols[1]]]).prefs({ convert: false });\n            Helper.validate(schema, [[symbols[1], true, symbols[1]]]);\n        });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"errors on mapped input and convert is disabled","suites":["symbol","validate()","map"],"updatePoint":{"line":187,"column":58},"line":187,"code":"        it('errors on mapped input and convert is disabled', () => {\n\n            const symbols = [Symbol(1), Symbol(2)];\n            const schema = Joi.symbol().map([[1, symbols[0]], ['two', symbols[1]]]).prefs({ convert: false });\n            Helper.validate(schema, [[1, false, {\n                message: '\"value\" must be one of [Symbol(1), Symbol(2)]',\n                path: [],\n                type: 'any.only',\n                context: { value: 1, valids: symbols, label: 'value' }\n            }]]);\n        });","file":"types/symbol.js","skipped":false,"dir":"test"},{"name":"should work with a successful promise","suites":["Validator","entryAsync()"],"updatePoint":{"line":21,"column":49},"line":21,"code":"        it('should work with a successful promise', async () => {\n\n            expect(await Joi.string().validateAsync('foo')).to.equal('foo');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should work with a successful promise and a catch in between","suites":["Validator","entryAsync()"],"updatePoint":{"line":26,"column":72},"line":26,"code":"        it('should work with a successful promise and a catch in between', () => {\n\n            const promise = Joi.string().validateAsync('foo');\n\n            return promise\n                .catch(() => {\n\n                    throw new Error('Should not go here');\n                })\n                .then((value) => {\n\n                    expect(value).to.equal('foo');\n                }, () => {\n\n                    throw new Error('Should not go here');\n                });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should work with a failing promise","suites":["Validator","entryAsync()"],"updatePoint":{"line":44,"column":46},"line":44,"code":"        it('should work with a failing promise', () => {\n\n            const promise = Joi.string().validateAsync(0);\n\n            return promise.then((value) => {\n\n                throw new Error('Should not go here');\n            }, (err) => {\n\n                expect(err).to.be.an.error('\"value\" must be a string');\n                expect(err.details).to.equal([{\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 0, label: 'value' }\n                }]);\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should work with a failing promise and a then in between","suites":["Validator","entryAsync()"],"updatePoint":{"line":63,"column":68},"line":63,"code":"        it('should work with a failing promise and a then in between', () => {\n\n            const promise = Joi.string().validateAsync(0);\n\n            return promise\n                .then((value) => {\n\n                    throw new Error('Should not go here');\n                })\n                .catch((err) => {\n\n                    expect(err).to.be.an.error('\"value\" must be a string');\n                    expect(err.details).to.equal([{\n                        message: '\"value\" must be a string',\n                        path: [],\n                        type: 'string.base',\n                        context: { value: 0, label: 'value' }\n                    }]);\n                });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should work with a failing promise (with catch)","suites":["Validator","entryAsync()"],"updatePoint":{"line":84,"column":59},"line":84,"code":"        it('should work with a failing promise (with catch)', () => {\n\n            const promise = Joi.string().validateAsync(0);\n\n            return promise.catch((err) => {\n\n                expect(err).to.be.an.error('\"value\" must be a string');\n                expect(err.details).to.equal([{\n                    message: '\"value\" must be a string',\n                    path: [],\n                    type: 'string.base',\n                    context: { value: 0, label: 'value' }\n                }]);\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should catch errors in a successful promise callback","suites":["Validator","entryAsync()"],"updatePoint":{"line":100,"column":64},"line":100,"code":"        it('should catch errors in a successful promise callback', () => {\n\n            const promise = Joi.string().validateAsync('foo');\n\n            return promise.then((value) => {\n\n                throw new Error('oops');\n            }).then(() => {\n\n                throw new Error('Should not go here');\n            }, (err) => {\n\n                expect(err).to.be.an.error('oops');\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should catch errors in a failing promise callback","suites":["Validator","entryAsync()"],"updatePoint":{"line":116,"column":61},"line":116,"code":"        it('should catch errors in a failing promise callback', () => {\n\n            const promise = Joi.string().validateAsync(0);\n\n            return promise.then((value) => {\n\n                throw new Error('Should not go here');\n            }, () => {\n\n                throw new Error('oops');\n            }).then(() => {\n\n                throw new Error('Should not go here');\n            }, (err) => {\n\n                expect(err).to.be.an.error('oops');\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"should catch errors in a failing promise callback (with catch)","suites":["Validator","entryAsync()"],"updatePoint":{"line":135,"column":74},"line":135,"code":"        it('should catch errors in a failing promise callback (with catch)', () => {\n\n            const promise = Joi.string().validateAsync(0);\n\n            return promise.catch(() => {\n\n                throw new Error('oops');\n            }).then(() => {\n\n                throw new Error('Should not go here');\n            }, (err) => {\n\n                expect(err).to.be.an.error('oops');\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"validates schema","suites":["Validator","entryAsync()"],"updatePoint":{"line":151,"column":28},"line":151,"code":"        it('validates schema', async () => {\n\n            const schema = Joi.number();\n            expect(await schema.validateAsync(5)).to.equal(5);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"validates schema with warnings (empty)","suites":["Validator","entryAsync()"],"updatePoint":{"line":157,"column":50},"line":157,"code":"        it('validates schema with warnings (empty)', async () => {\n\n            const schema = Joi.number();\n            expect(await schema.validateAsync(5, { warnings: true })).to.equal({ value: 5 });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"executes externals on object child","suites":["Validator","externals()"],"updatePoint":{"line":166,"column":46},"line":166,"code":"        it('executes externals on object child', async () => {\n\n            const check = async (id) => {\n\n                await Hoek.wait();\n\n                if (id === 'valid') {\n                    return 'verified';\n                }\n\n                if (id === 'skip') {\n                    return;\n                }\n\n                throw new Error('Invalid id');\n            };\n\n            const append = async (id) => {\n\n                await Hoek.wait();\n                return id + '!';\n            };\n\n            const schema = Joi.object({\n                id: Joi.string().external(check).external(append)\n            });\n\n            expect(await schema.validateAsync({ id: 'valid' })).to.equal({ id: 'verified!' });\n            expect(await schema.validateAsync({ id: 'skip' })).to.equal({ id: 'skip!' });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"executes externals on nested object child","suites":["Validator","externals()"],"updatePoint":{"line":197,"column":53},"line":197,"code":"        it('executes externals on nested object child', async () => {\n\n            const check = async (id) => {\n\n                await Hoek.wait();\n\n                if (id === 'valid') {\n                    return 'verified';\n                }\n\n                if (id === 'skip') {\n                    return;\n                }\n\n                if (id === 'unchanged') {\n                    return id;\n                }\n\n                throw new Error('Invalid id');\n            };\n\n            const append = async (id) => {\n\n                await Hoek.wait();\n                return id + '!';\n            };\n\n            const schema = Joi.object({\n                user: {\n                    id: Joi.string().external(check).external(append)\n                }\n            });\n\n            expect(await schema.validateAsync({ user: { id: 'valid' } })).to.equal({ user: { id: 'verified!' } });\n            expect(await schema.validateAsync({ user: { id: 'skip' } })).to.equal({ user: { id: 'skip!' } });\n            expect(await schema.validateAsync({ user: { id: 'unchanged' } })).to.equal({ user: { id: 'unchanged!' } });\n            await expect(schema.validateAsync({ user: { id: 'other' } })).to.reject('Invalid id (user.id)');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"executes externals on root","suites":["Validator","externals()"],"updatePoint":{"line":236,"column":38},"line":236,"code":"        it('executes externals on root', async () => {\n\n            const check = async (id) => {\n\n                await Hoek.wait();\n                if (id === 'valid') {\n                    return 'verified';\n                }\n\n                throw new Error('Invalid id');\n            };\n\n            const append = async (id) => {\n\n                await Hoek.wait();\n                return id + '!';\n            };\n\n            const schema = Joi.string().external(check).external(append);\n\n            const result = await schema.validateAsync('valid');\n            expect(result).to.equal('verified!');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"executes externals on array item","suites":["Validator","externals()"],"updatePoint":{"line":260,"column":44},"line":260,"code":"        it('executes externals on array item', async () => {\n\n            const check = async (id) => {\n\n                await Hoek.wait();\n\n                if (id === 'valid') {\n                    return 'verified';\n                }\n\n                if (id === 'skip') {\n                    return;\n                }\n\n                throw new Error('Invalid id');\n            };\n\n            const append = async (id) => {\n\n                await Hoek.wait();\n                return id + '!';\n            };\n\n            const schema = Joi.array().items(Joi.string().external(check).external(append));\n\n            expect(await schema.validateAsync(['valid'])).to.equal(['verified!']);\n            expect(await schema.validateAsync(['skip'])).to.equal(['skip!']);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"skips externals when prefs is false","suites":["Validator","externals()"],"updatePoint":{"line":289,"column":47},"line":289,"code":"        it('skips externals when prefs is false', async () => {\n\n            const check = (id) => {\n\n                throw new Error('Invalid id');\n            };\n\n            const schema = Joi.object({\n                id: Joi.string().external(check)\n            });\n\n            await expect(schema.validateAsync({ id: 'valid' })).to.reject('Invalid id (id)');\n            expect(() => schema.validate({ id: 'valid' }, { externals: false })).to.not.throw();\n            expect(() => schema.validate({ id: 'valid' })).to.throw('Schema with external rules must use validateAsync()');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"supports describe","suites":["Validator","externals()"],"updatePoint":{"line":305,"column":29},"line":305,"code":"        it('supports describe', () => {\n\n            const append = async (id) => {\n\n                await Hoek.wait();\n                return id + '!';\n            };\n\n            const schema = Joi.string().external(append);\n            const description = schema.describe();\n            expect(description).to.equal({ type: 'string', externals: [{ method: append }] });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"skips when used to match","suites":["Validator","externals()"],"updatePoint":{"line":318,"column":36},"line":318,"code":"        it('skips when used to match', async () => {\n\n            let called = false;\n            const check = () => {\n\n                called = true;\n            };\n\n            const schema = Joi.array().has(Joi.string().external(check));\n\n            const result = await schema.validateAsync(['valid']);\n            expect(result).to.equal(['valid']);\n            expect(called).to.be.false();\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"does not modify original value on generic object","suites":["Validator","externals()"],"updatePoint":{"line":333,"column":60},"line":333,"code":"        it('does not modify original value on generic object', async () => {\n\n            const tag = (obj) => {\n\n                obj.x = true;\n            };\n\n            const schema = Joi.object().external(tag);\n            const input = { x: false };\n\n            const result = await schema.validateAsync(input);\n            expect(result).to.equal({ x: true });\n            expect(input).to.equal({ x: false });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"does not modify original value on nested object","suites":["Validator","externals()"],"updatePoint":{"line":348,"column":59},"line":348,"code":"        it('does not modify original value on nested object', async () => {\n\n            const tag = (obj) => {\n\n                obj.x = true;\n            };\n\n            const schema = Joi.object({ a: Joi.object().external(tag) });\n            const input = { a: { x: false } };\n\n            const result = await schema.validateAsync(input);\n            expect(result).to.equal({ a: { x: true } });\n            expect(input).to.equal({ a: { x: false } });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"does not modify original value on generic array","suites":["Validator","externals()"],"updatePoint":{"line":363,"column":59},"line":363,"code":"        it('does not modify original value on generic array', async () => {\n\n            const tag = (array) => {\n\n                array.push('x');\n            };\n\n            const schema = Joi.array().external(tag);\n            const input = [1];\n\n            const result = await schema.validateAsync(input);\n            expect(result).to.equal([1, 'x']);\n            expect(input).to.equal([1]);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"does not modify original value on nested array","suites":["Validator","externals()"],"updatePoint":{"line":378,"column":58},"line":378,"code":"        it('does not modify original value on nested array', async () => {\n\n            const tag = (array) => {\n\n                array.push('x');\n            };\n\n            const schema = Joi.array().items(Joi.array().external(tag));\n            const input = [[1]];\n\n            const result = await schema.validateAsync(input);\n            expect(result).to.equal([[1, 'x']]);\n            expect(input).to.equal([[1]]);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"has access to prefs","suites":["Validator","externals()"],"updatePoint":{"line":393,"column":31},"line":393,"code":"        it('has access to prefs', async () => {\n\n            const context = { foo: 'bar' };\n\n            const tag = (value, { prefs }) => {\n\n                return prefs.context.foo;\n            };\n\n            const schema = Joi.string().external(tag);\n            const input = 'my string';\n\n            const result = await schema.validateAsync(input, { context });\n            expect(result).to.equal('bar');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"changes the message depending on label's value","suites":["Validator","externals()"],"updatePoint":{"line":409,"column":59},"line":409,"code":"        it('changes the message depending on label\\'s value', async () => {\n\n            const context = { foo: 'bar' };\n\n            const tag = (value, { prefs }) => {\n\n                throw new Error('Oops');\n            };\n\n            const schema = Joi.string().external(tag);\n            const input = 'my string';\n\n            await expect(schema.validateAsync(input, { context })).to.reject('Oops (value)');\n            await expect(schema.validateAsync(input, { context, errors: { label: false } })).to.reject('Oops');\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"applies raw after validation","suites":["Validator","finalize()"],"updatePoint":{"line":428,"column":40},"line":428,"code":"        it('applies raw after validation', async () => {\n\n            const schema = Joi.object({\n                a: Joi.number().raw(),\n                b: Joi.ref('a')\n            });\n\n            expect(await schema.validateAsync({ a: '5', b: 5 })).to.equal({ a: '5', b: 5 });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"reports warnings (sync)","suites":["Validator","warnings"],"updatePoint":{"line":441,"column":35},"line":441,"code":"        it('reports warnings (sync)', () => {\n\n            const schema = Joi.any().warning('custom.x', { w: 'world' }).message({ 'custom.x': 'hello {#w}!' });\n            const { value, error, warning } = schema.validate('something');\n            expect(value).to.equal('something');\n            expect(error).to.not.exist();\n            expect(warning).to.equal({\n                message: 'hello world!',\n                details: [\n                    {\n                        message: 'hello world!',\n                        path: [],\n                        type: 'custom.x',\n                        context: {\n                            w: 'world',\n                            label: 'value',\n                            value: 'something'\n                        }\n                    }\n                ]\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"reports warnings (async)","suites":["Validator","warnings"],"updatePoint":{"line":464,"column":36},"line":464,"code":"        it('reports warnings (async)', async () => {\n\n            const schema = Joi.any().warning('custom.x', { w: 'world' }).message({ 'custom.x': 'hello {#w}!' });\n            const { value, warning } = await schema.validateAsync('something', { warnings: true });\n            expect(value).to.equal('something');\n            expect(warning).to.equal({\n                message: 'hello world!',\n                details: [\n                    {\n                        message: 'hello world!',\n                        path: [],\n                        type: 'custom.x',\n                        context: {\n                            w: 'world',\n                            label: 'value',\n                            value: 'something'\n                        }\n                    }\n                ]\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"reports warnings with externals","suites":["Validator","warnings"],"updatePoint":{"line":486,"column":43},"line":486,"code":"        it('reports warnings with externals', async () => {\n\n            const append = (value) => value + '!';\n            const schema = Joi.string()\n                .warning('custom.x').message('test')\n                .external(append);\n\n            expect(await schema.validateAsync('x', { externals: true, warnings: true })).to.equal({\n                value: 'x!',\n                warning: {\n                    message: 'test',\n                    details: [\n                        {\n                            message: 'test',\n                            path: [],\n                            type: 'custom.x',\n                            context: {\n                                label: 'value',\n                                value: 'x'\n                            }\n                        }\n                    ]\n                }\n            });\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"ignores result flags on root values","suites":["Validator","Shadow"],"updatePoint":{"line":515,"column":47},"line":515,"code":"        it('ignores result flags on root values', () => {\n\n            const schema = Joi.string().strip();\n            Helper.validate(schema, [['xyz', true, undefined]]);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"reaches deep into shadow","suites":["Validator","Shadow"],"updatePoint":{"line":521,"column":36},"line":521,"code":"        it('reaches deep into shadow', async () => {\n\n            const schema = Joi.object({\n                a: {\n                    b: {\n                        c: {\n                            d: {\n                                e: Joi.number().raw()\n                            },\n                            g: Joi.boolean().raw()\n                        }\n                    }\n                },\n                f: Joi.ref('a.b.c.d.e'),\n                h: Joi.ref('a.b.c.g')\n            });\n\n            const value = { a: { b: { c: { d: { e: '100' }, g: 'TRUE' } } }, f: 100, h: true };\n\n            expect(await schema.validateAsync(value)).to.equal(value);\n        });","file":"validator.js","skipped":false,"dir":"test"},{"name":"allows valid values to be set","suites":["Values","add()"],"updatePoint":{"line":22,"column":41},"line":22,"code":"        it('allows valid values to be set', () => {\n\n            expect(() => {\n\n                const set = new Values();\n                set.add(true);\n                set.add(1);\n                set.add('hello');\n                set.add(new Date());\n                set.add(Symbol('foo'));\n            }).not.to.throw();\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"ignores refs added multiple times","suites":["Values","add()"],"updatePoint":{"line":35,"column":45},"line":35,"code":"        it('ignores refs added multiple times', () => {\n\n            const set = new Values();\n            const ref = Joi.ref('x');\n            set.add(ref);\n            set.add(ref);\n            expect(set).to.have.length(1);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"returns a new Values","suites":["Values","clone()"],"updatePoint":{"line":47,"column":32},"line":47,"code":"        it('returns a new Values', () => {\n\n            const set = new Values();\n            set.add(null);\n            const otherValids = set.clone();\n            otherValids.add('null');\n            expect(set.has(null)).to.equal(true);\n            expect(otherValids.has(null)).to.equal(true);\n            expect(set.has('null')).to.equal(false);\n            expect(otherValids.has('null')).to.equal(true);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"merges into a new Values","suites":["Values","concat()"],"updatePoint":{"line":62,"column":36},"line":62,"code":"        it('merges into a new Values', () => {\n\n            const set = new Values();\n            const otherValids = set.clone();\n            set.add(null);\n            otherValids.add('null');\n            const thirdSet = otherValids.concat(set);\n            expect(set.has(null)).to.equal(true);\n            expect(otherValids.has(null)).to.equal(false);\n            expect(set.has('null')).to.equal(false);\n            expect(otherValids.has('null')).to.equal(true);\n            expect(thirdSet.has(null)).to.equal(true);\n            expect(thirdSet.has('null')).to.equal(true);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"merges keeps refs flag set","suites":["Values","concat()"],"updatePoint":{"line":77,"column":38},"line":77,"code":"        it('merges keeps refs flag set', () => {\n\n            const set = new Values();\n            set.add(Joi.ref('x'));\n            set.concat(new Values());\n            expect(set._refs.size).to.equal(1);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"compares empty string to refs when insensitive","suites":["Values","get()"],"updatePoint":{"line":88,"column":58},"line":88,"code":"        it('compares empty string to refs when insensitive', () => {\n\n            const schema = Joi.object({\n                a: Joi.string().allow(3).default(''),\n                b: Joi.string().insensitive().valid(Joi.ref('a'))\n            });\n\n            Helper.validate(schema, [\n                [{ b: '' }, true, { b: '', a: '' }],\n                [{ b: 'x' }, false, '\"b\" must be [ref:a]'],\n                [{ b: 2 }, false, '\"b\" must be [ref:a]'],\n                [{ a: 3, b: 3 }, true]\n            ]);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"compares date to null","suites":["Values","has()"],"updatePoint":{"line":106,"column":33},"line":106,"code":"        it('compares date to null', () => {\n\n            const set = new Values();\n            set.add(null);\n            expect(set.has(new Date())).to.be.false();\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"compares buffer to null","suites":["Values","has()"],"updatePoint":{"line":113,"column":35},"line":113,"code":"        it('compares buffer to null', () => {\n\n            const set = new Values();\n            set.add(null);\n            expect(set.has(Buffer.from(''))).to.be.false();\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"compares different types of values","suites":["Values","has()"],"updatePoint":{"line":120,"column":46},"line":120,"code":"        it('compares different types of values', () => {\n\n            let set = new Values();\n            set.add(1);\n            expect(set.has(1)).to.be.true();\n            expect(set.has(2)).to.be.false();\n\n            const d = new Date();\n            set = new Values();\n            set.add(d);\n            expect(set.has(new Date(d.getTime()))).to.be.true();\n            expect(set.has(new Date(d.getTime() + 1))).to.be.false();\n\n            const str = 'foo';\n            set = new Values();\n            set.add(str);\n            expect(set.has(str)).to.be.true();\n            expect(set.has('foobar')).to.be.false();\n\n            const s = Symbol('foo');\n            set = new Values();\n            set.add(s);\n            expect(set.has(s)).to.be.true();\n            expect(set.has(Symbol('foo'))).to.be.false();\n\n            const o = {};\n            set = new Values();\n            set.add(o);\n            expect(set.has(o)).to.be.true();\n            expect(set.has({})).to.be.true();\n\n            const f = () => { };\n            set = new Values();\n            set.add(f);\n            expect(set.has(f)).to.be.true();\n            expect(set.has(() => { })).to.be.false();\n\n            const b = Buffer.from('foo');\n            set = new Values();\n            set.add(b);\n            expect(set.has(b)).to.be.true();\n            expect(set.has(Buffer.from('foobar'))).to.be.false();\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"returns array","suites":["Values","values()"],"updatePoint":{"line":167,"column":25},"line":167,"code":"        it('returns array', () => {\n\n            const set = new Values();\n            set.add('x');\n            set.add('y');\n            expect(set.values()).to.equal(['x', 'y']);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"strips undefined","suites":["Values","values()"],"updatePoint":{"line":175,"column":28},"line":175,"code":"        it('strips undefined', () => {\n\n            const set = new Values();\n            set.add(undefined);\n            set.add('x');\n            expect(set.values({ display: true })).to.not.include(undefined).and.to.equal(['x']);\n        });","file":"values.js","skipped":false,"dir":"test"},{"name":"ignores absent display option","suites":["Values","values()"],"updatePoint":{"line":183,"column":41},"line":183,"code":"        it('ignores absent display option', () => {\n\n            const set = new Values();\n            set.add(undefined);\n            set.add('x');\n            expect(set.values({})).to.equal([undefined, 'x']);\n        });","file":"values.js","skipped":false,"dir":"test"}]}