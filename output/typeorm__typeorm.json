{"repo":"typeorm/typeorm","url":"https://github.com/typeorm/typeorm","branch":"master","configs":[{"package":"typeorm","lang":"js","dir":"test","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"test if DataSource calls `useDataSource` of the provided entities","suites":["base entity"],"updatePoint":{"line":7,"column":71,"index":315},"line":7,"code":"  it(\"test if DataSource calls `useDataSource` of the provided entities\", async () => {\n    const dataSourceOptions = setupTestingConnections({\n      entities: [User],\n      enabledDrivers: [\"sqlite\"]\n    });\n    if (!dataSourceOptions.length) return;\n    const dataSource = new DataSource(dataSourceOptions[0]);\n    await dataSource.initialize();\n    await dataSource.synchronize(true);\n    await User.save({\n      name: \"Timber Saw\"\n    });\n    const timber = await User.findOneByOrFail({\n      name: \"Timber Saw\"\n    });\n    expect(timber).to.be.eql({\n      id: 1,\n      name: \"Timber Saw\"\n    });\n  });","file":"functional/base-entity/base-entity.test.ts","skipped":false,"dir":"test"},{"name":"withRepository must work properly in transactions","suites":["custom repository"],"updatePoint":{"line":13,"column":55,"index":580},"line":13,"code":"  it(\"withRepository must work properly in transactions\", () => Promise.all(dataSources.map(async dataSource => {\n    const CustomRepository = dataSource.getRepository(User).extend({\n      findOneByName(name) {\n        return this.findOneBy({\n          name\n        });\n      }\n\n    }); // check if custom repository function works\n\n    await CustomRepository.save({\n      name: \"Timber Saw\"\n    });\n    const user = await CustomRepository.findOneByName(\"Timber Saw\");\n    expect(user).to.be.eql({\n      id: 1,\n      name: \"Timber Saw\"\n    }); // now check it in the transaction\n\n    await dataSource.manager.transaction(async transactionalManager => {\n      const transactionalCustomRepository = await transactionalManager.withRepository(CustomRepository);\n      await CustomRepository.save({\n        name: \"Natures Prophet\"\n      });\n      const user = await transactionalCustomRepository.findOneByName(\"Natures Prophet\");\n      expect(user).to.be.eql({\n        id: 2,\n        name: \"Natures Prophet\"\n      });\n    });\n  })));","file":"functional/custom-repository/custom-repository.test.ts","skipped":false,"dir":"test"},{"name":"should work without errors","suites":["indices > basic unique index test","unique index"],"updatePoint":{"line":13,"column":34,"index":644},"line":13,"code":"    it(\"should work without errors\", () => Promise.all(connections.map(async connection => {\n      const customer = new Customer();\n      customer.nameEnglish = \"Umed\";\n      customer.nameHebrew = \"Uma\";\n      await connection.manager.save(customer);\n    })));","file":"functional/indices/basic-unique-index-test/basic-unique-index-test.ts","skipped":false,"dir":"test"},{"name":"should work without errors","suites":["indices > embeds index test","embeddeds index"],"updatePoint":{"line":14,"column":34,"index":685},"line":14,"code":"    it(\"should work without errors\", () => Promise.all(connections.map(async connection => {\n      const customer = new Customer();\n      customer.nameEnglish = \"Umed\";\n      customer.nameHebrew = \"Uma\";\n      customer.profile = new Profile();\n      customer.profile.job = \"Developer\";\n      customer.profile.address = \"Anywhere\";\n      await connection.manager.save(customer);\n    })));","file":"functional/indices/embeddeds-index-test/embeddeds-unique-index-test.ts","skipped":false,"dir":"test"}]}