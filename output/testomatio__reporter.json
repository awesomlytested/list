{"repo":"testomatio/reporter","url":"https://github.com/testomatio/reporter","branch":"master","configs":[{"package":"@testomatio/reporter","lang":"js","dir":"tests","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"Test addition","suites":["Suite 1"],"updatePoint":{"line":3,"column":19,"index":78},"line":3,"code":"  it('Test addition', () => {\n    expect(1 + 2).toBe(4);\n  });","file":"adapter/examples/jasmine/index.test.js","skipped":false,"dir":"tests"},{"name":"Test some more addition","suites":["Suite 1"],"updatePoint":{"line":6,"column":29,"index":151},"line":6,"code":"  it('Test some more addition', () => {\n    expect(1 + 2).toBe(3);\n  });","file":"adapter/examples/jasmine/index.test.js","skipped":false,"dir":"tests"},{"name":"Sample mocha test","suites":["Sample mocha suite"],"updatePoint":{"line":4,"column":23,"index":98},"line":4,"code":"  it('Sample mocha test', () => {\n    assert.equal([1, 2, 3].indexOf(4), 0);\n  });","file":"adapter/examples/mocha/index.test.js","skipped":false,"dir":"tests"},{"name":"Sample mocha test 2","suites":["Sample mocha suite 2"],"updatePoint":{"line":9,"column":25,"index":228},"line":9,"code":"  it('Sample mocha test 2', () => {\n    assert.equal(1, 1);\n  });","file":"adapter/examples/mocha/index.test.js","skipped":false,"dir":"tests"},{"name":"POST :: /api/reporter :: should create a report if api_key has been provided","suites":["Adapters","positive tests"],"updatePoint":{"line":81,"column":88,"index":2326},"line":81,"code":"        it('POST :: /api/reporter :: should create a report if api_key has been provided', () => {\n          const [req] = server.requests({\n            method: 'POST',\n            path: '/api/reporter'\n          });\n          const expectedResult = {\n            api_key: TESTOMATIO\n          };\n          assert.isObject(req.body);\n          assert.deepEqual(req.body, expectedResult);\n        });","file":"adapter/index.test.js","skipped":false,"dir":"tests"},{"name":"PUT :: /api/reporter/:runId :: should update run status","suites":["Adapters","positive tests"],"updatePoint":{"line":92,"column":67,"index":2705},"line":92,"code":"        it('PUT :: /api/reporter/:runId :: should update run status', () => {\n          const [req] = server.requests({\n            method: 'PUT',\n            path: `/api/reporter/${RUN_ID}`\n          });\n          const expectedResult = {\n            api_key: TESTOMATIO,\n            status_event: 'fail',\n            status: 'failed'\n          };\n          assert.isObject(req.body);\n          assert.deepEqual(req.body, expectedResult);\n        });","file":"adapter/index.test.js","skipped":false,"dir":"tests"},{"name":"POST :: /api/reporter/:runId/testrun :: should add a new test to run instance","suites":["Adapters","positive tests"],"updatePoint":{"line":105,"column":89,"index":3179},"line":105,"code":"        it('POST :: /api/reporter/:runId/testrun :: should add a new test to run instance', () => {\n          const reqs = server.requests({\n            method: 'POST',\n            path: `/api/reporter/${RUN_ID}/testrun`\n          });\n          const expectedRequiredBodyKeys = ['api_key', 'files', // 'steps',\n          'status', 'stack', 'example', 'title', 'message', 'run_time', 'artifacts'];\n\n          for (const req of reqs) {\n            assert.isObject(req.body);\n            assert.includeMembers(Object.keys(req.body), expectedRequiredBodyKeys);\n            assert.strictEqual(req.body.api_key, TESTOMATIO);\n            assert.isString(req.body.status);\n            assert.isString(req.body.title);\n            assert.isNumber(req.body.run_time);\n          }\n        });","file":"adapter/index.test.js","skipped":false,"dir":"tests"},{"name":"should ignore reporter if api_key has not been provided","suites":["Adapters","negative tests"],"updatePoint":{"line":132,"column":67,"index":4212},"line":132,"code":"        it('should ignore reporter if api_key has not been provided', () => {\n          const requests = server.requests();\n          assert.isArray(requests);\n          assert.isEmpty(requests);\n        });","file":"adapter/index.test.js","skipped":false,"dir":"tests"},{"name":"#fetchFilesFromStackTrace | should match images from stack trace","suites":["Utils"],"updatePoint":{"line":11,"column":70,"index":233},"line":11,"code":"  it('#fetchFilesFromStackTrace | should match images from stack trace', () => {\n    const file1 = `${process.cwd()}/tests/data/artifacts/failed_test.png`;\n    const file2 = `${process.cwd()}/tests/data/artifacts/screenshot1.png`;\n    const stack = `\nPayrollPBTest:everyPayrollIsPositive =\n                              |-------------------jqwik-------------------\ntries = 1000                  | # of calls to property\nchecks = 1000                 | # of not rejected calls\n  file:/${file1}\ngeneration = RANDOMIZED       | parameters are randomly generated\nafter-failure = PREVIOUS_SEED | use the previous seed\nedge-cases# file:/${file2}\nedge-cases#total = 12         | # of all combined edge cases\nedge-cases#tried = 12         | # of edge cases tried in current run\nseed = 7004898156813507962    | random seed to reproduce generated values\n    `;\n    const files = fetchFilesFromStackTrace(stack);\n    expect(files).to.include(file1);\n    expect(files).to.include(file2);\n  });","file":"util_test.js","skipped":false,"dir":"tests"},{"name":"#fetchSourceCodeFromStackTrace | prefixed with at ","suites":["Utils"],"updatePoint":{"line":31,"column":56,"index":1201},"line":31,"code":"  it('#fetchSourceCodeFromStackTrace | prefixed with at ', () => {\n    const stack = `\nExpected: <4.0>\n     but: was <6.0>\n  at ${process.cwd()}/tests/data/cli/RunCest.php:24\n    `;\n    const source = fetchSourceCodeFromStackTrace(stack);\n    expect(source).to.include(`$I->executeCommand('run --colors tests/dummy/FileExistsCept.php');`);\n    expect(source).to.include(`24 >`);\n  });","file":"util_test.js","skipped":false,"dir":"tests"},{"name":"#fetchSourceCodeFromStackTrace | without prefix","suites":["Utils"],"updatePoint":{"line":41,"column":53,"index":1583},"line":41,"code":"  it('#fetchSourceCodeFromStackTrace | without prefix', () => {\n    const stack = `\nExpected: <4.0>\n     but: was <6.0>\n${process.cwd()}/tests/data/cli/RunCest.php:24\n    `;\n    const source = fetchSourceCodeFromStackTrace(stack);\n    expect(source).to.include(`$I->executeCommand('run --colors tests/dummy/FileExistsCept.php');`);\n    expect(source).to.include(`24 >`);\n  });","file":"util_test.js","skipped":false,"dir":"tests"},{"name":"should parse Jest XML","suites":["XML Reader"],"updatePoint":{"line":41,"column":27,"index":731},"line":41,"code":"  it('should parse Jest XML', () => {\n    const reader = new XmlReader();\n    const jsonData = reader.parse(path.join(__dirname, 'data/junit1.xml'));\n    expect(jsonData.status).to.eql('failed');\n    expect(jsonData.tests_count).to.eql(13);\n    expect(jsonData.tests.length).to.eql(jsonData.tests_count);\n    jsonData.tests.forEach(t => {\n      expect(t).to.contain.keys(['stack', 'create', 'status', 'title', 'run_time', 'suite_title']);\n    });\n  });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should parse minitest XML","suites":["XML Reader"],"updatePoint":{"line":51,"column":31,"index":1188},"line":51,"code":"  it('should parse minitest XML', () => {\n    const reader = new XmlReader();\n    const jsonData = reader.parse(path.join(__dirname, 'data/minitest.xml'));\n    expect(jsonData.status).to.eql('passed');\n    const stats = reader.calculateStats();\n    expect(stats.status).to.eql('passed');\n    expect(stats.tests_count).to.eql(10);\n    expect(jsonData.tests.length).to.eql(stats.tests_count);\n    reader.fetchSourceCode();\n    jsonData.tests.forEach(t => {\n      expect(t).to.contain.keys(['stack', 'create', 'status', 'file', 'title', 'run_time', 'suite_title']);\n    });\n    expect(jsonData.tests[0].code).to.be.ok;\n    expect(jsonData.tests[0].code).to.include(\"test 'should \");\n  });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should parse Pytest XML","suites":["XML Reader"],"updatePoint":{"line":66,"column":29,"index":1872},"line":66,"code":"  it('should parse Pytest XML', () => {\n    const reader = new XmlReader();\n    const jsonData = reader.parse(path.join(__dirname, 'data/pytest.xml'));\n    expect(jsonData.status).to.eql('failed');\n    const stats = reader.calculateStats();\n    expect(stats.status).to.eql('failed');\n    expect(stats.tests_count).to.eql(7);\n    expect(jsonData.tests.length).to.eql(stats.tests_count);\n    reader.fetchSourceCode();\n    reader.formatErrors();\n    reader.formatTests();\n    jsonData.tests.forEach(t => {\n      expect(t).to.contain.keys(['stack', 'create', 'status', 'file', 'title', 'run_time', 'suite_title']);\n    });\n    expect(jsonData.tests[0].title).to.eql(\"login with valid credentials\");\n    const failedTests = jsonData.tests.filter(t => t.status === 'failed');\n  });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should parse Codeception XML","suites":["XML Reader"],"updatePoint":{"line":83,"column":34,"index":2653},"line":83,"code":"  it('should parse Codeception XML', () => {\n    const reader = new XmlReader();\n    const jsonData = reader.parse(path.join(__dirname, 'data/codecept.xml'));\n    expect(jsonData.status).to.eql('failed');\n    const stats = reader.calculateStats();\n    expect(stats.status).to.eql('failed');\n    expect(stats.tests_count).to.eql(89);\n    expect(jsonData.tests.length).to.eql(stats.tests_count);\n    reader.fetchSourceCode();\n    reader.formatErrors();\n    reader.formatTests();\n    jsonData.tests.forEach(t => {\n      expect(t).to.contain.keys(['stack', 'create', 'status', 'file', 'title', 'run_time', 'suite_title']);\n    });\n    expect(jsonData.tests[0].code).to.be.ok;\n    expect(jsonData.tests[0].code).to.include(\"public function runCestWithTwoFailedTest(\");\n    expect(jsonData.tests[0].title).to.eql(\"run cest with two failed test\");\n    const failedTests = jsonData.tests.filter(t => t.status === 'failed');\n    const failedTest = failedTests[0];\n    expect(failedTest.stack).to.include('public function');\n  });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should parse JUnit XML","suites":["XML Reader"],"updatePoint":{"line":104,"column":28,"index":3668},"line":104,"code":"  it('should parse JUnit XML', () => {\n    const reader = new XmlReader();\n    const jsonData = reader.parse(path.join(__dirname, 'data/java.xml'));\n    expect(jsonData.status).to.eql('failed');\n    const stats = reader.calculateStats();\n    expect(stats.status).to.eql('failed');\n    expect(stats.tests_count).to.eql(6);\n    expect(jsonData.tests.length).to.eql(stats.tests_count);\n    reader.fetchSourceCode();\n    reader.formatErrors();\n    reader.formatTests();\n    jsonData.tests.forEach(t => {\n      expect(t).to.contain.keys(['stack', 'create', 'status', 'file', 'title', 'run_time', 'suite_title']);\n    }); // expect(jsonData.tests[0].code).to.be.ok;\n    // expect(jsonData.tests[0].code).to.include(\"public function runCestWithTwoFailedTest(\")\n    // expect(jsonData.tests[0].title).to.eql(\"Run cest with two failed test\")\n\n    const failedTests = jsonData.tests.filter(t => t.status === 'failed');\n    const failedTest = failedTests[0];\n    expect(failedTest.stack).to.include('(CalculatorTest.java:43');\n  });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should create a new run Id","suites":["XML Reader","#request"],"updatePoint":{"line":132,"column":34,"index":4857},"line":132,"code":"    it('should create a new run Id', async () => {\n      const reader = new XmlReader({\n        url: TESTOMATIO_URL,\n        apiKey: TESTOMATIO\n      });\n      reader.parse(path.join(__dirname, 'data/junit1.xml'));\n      await reader.createRun();\n      expect(reader.runId).to.eql(RUN_ID);\n      const [req] = server.requests({\n        method: 'POST',\n        path: '/api/reporter'\n      });\n      const expectedResult = {\n        api_key: TESTOMATIO\n      };\n      assert.isObject(req.body);\n      assert.deepEqual(req.body, expectedResult);\n    });","file":"xmlReader_test.js","skipped":false,"dir":"tests"},{"name":"should publish updates","suites":["XML Reader","#request"],"updatePoint":{"line":150,"column":30,"index":5404},"line":150,"code":"    it('should publish updates', async () => {\n      const reader = new XmlReader({\n        url: TESTOMATIO_URL,\n        apiKey: TESTOMATIO,\n        runId: RUN_ID\n      });\n      reader.parse(path.join(__dirname, 'data/junit1.xml'));\n      expect(reader.runId).to.eql(RUN_ID);\n      const resp = await reader.uploadData();\n      expect(resp.status).to.eql(200);\n      const [req] = server.requests({\n        method: 'PUT',\n        path: '/api/reporter/' + RUN_ID\n      });\n      assert.isObject(req.body);\n      expect(req.body).to.include({\n        status: 'failed'\n      });\n    });","file":"xmlReader_test.js","skipped":false,"dir":"tests"}]}