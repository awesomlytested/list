{"repo":"yabwe/medium-editor","url":"https://github.com/yabwe/medium-editor","branch":"master","configs":[{"package":"medium-editor","lang":"js","dir":"spec","framework":"jasmine","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"should be displayed on hover of a link element","suites":["Anchor Preview TestCase","anchor preview element"],"line":14,"updatePoint":{"line":14,"column":54,"index":978},"code":"    it('should be displayed on hover of a link element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        sel = window.getSelection(),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        nextRange;\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // preview shows only after delay\n      expect(anchorPreview.showPreview).not.toHaveBeenCalled();\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).toHaveBeenCalled();\n\n      // link is set in preview\n      expect(anchorPreview.getPreviewElement().querySelector('a').innerHTML).toBe(document.getElementById('test-link').attributes.href.value);\n\n      // load into editor\n      spyOn(MediumEditor.extensions.anchor.prototype, 'showForm').and.callThrough();\n      fireEvent(anchorPreview.getPreviewElement(), 'click');\n      jasmine.clock().tick(300);\n      expect(editor.getExtensionByName('anchor').showForm).toHaveBeenCalled();\n\n      // selecting other text should close the toolbar\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'hideToolbar').and.callThrough();\n      nextRange = document.createRange();\n      nextRange.selectNodeContents(document.getElementById('another-element'));\n      sel.removeAllRanges();\n      sel.addRange(nextRange);\n      fireEvent(document.getElementById('another-element'), 'click');\n      jasmine.clock().tick(200);\n      expect(toolbar.hideToolbar).toHaveBeenCalled();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should be displayed on hover of a link element with markup inside","suites":["Anchor Preview TestCase","anchor preview element"],"line":51,"updatePoint":{"line":51,"column":73,"index":2672},"code":"    it('should be displayed on hover of a link element with markup inside', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-markup-link'), 'mouseover');\n\n      // preview shows only after delay\n      expect(anchorPreview.showPreview).not.toHaveBeenCalled();\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).toHaveBeenCalled();\n\n      // link is set in preview\n      expect(anchorPreview.getPreviewElement().querySelector('a').innerHTML).toBe(document.getElementById('test-markup-link').attributes.href.value);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should show the unencoded link","suites":["Anchor Preview TestCase","anchor preview element"],"line":69,"updatePoint":{"line":69,"column":38,"index":3464},"code":"    it('should show the unencoded link', function () {\n      var editor = this.newMediumEditor('.editor'),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview\n      fireEvent(document.getElementById('test-symbol-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(200);\n\n      // link is set in preview\n      expect(anchorPreview.getPreviewElement().querySelector('a').innerHTML).toBe(document.getElementById('test-symbol-link').attributes.href.value);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should display different urls when hovering over different links consecutively","suites":["Anchor Preview TestCase","anchor preview element"],"line":82,"updatePoint":{"line":82,"column":86,"index":4051},"code":"    it('should display different urls when hovering over different links consecutively', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 300\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview for first link\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(300);\n      expect(anchorPreview.getPreviewElement().querySelector('a').innerHTML).toBe(document.getElementById('test-link').attributes.href.value);\n\n      // show preview for second link\n      fireEvent(document.getElementById('test-symbol-link'), 'mouseover');\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-editor-anchor-preview-active')).toBe(false);\n\n      // wait for delay\n      jasmine.clock().tick(300);\n      expect(anchorPreview.getPreviewElement().querySelector('a').innerHTML).toBe(document.getElementById('test-symbol-link').attributes.href.value);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should display the anchor form in the toolbar when clicked","suites":["Anchor Preview TestCase","anchor preview element"],"line":103,"updatePoint":{"line":103,"column":66,"index":5061},"code":"    it('should display the anchor form in the toolbar when clicked', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            targetCheckbox: true,\n            targetCheckboxText: 'Open in new window',\n            customClassOption: 'custom-class',\n            customClassOptionText: 'Custom Class'\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        anchor = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // show preview\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // load into editor\n      jasmine.clock().tick(1);\n      fireEvent(anchorPreview.getPreviewElement(), 'click');\n      jasmine.clock().tick(200);\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchor.isDisplayed()).toBe(true);\n\n      // textbox should contain the url\n      expect(anchor.getInput().value).toEqual('http://test.com');\n\n      // the checkboxes should be unchecked\n      expect(anchor.getAnchorTargetCheckbox().checked).toBe(false);\n      expect(anchor.getAnchorButtonCheckbox().checked).toBe(false);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should display the anchor form with target checkbox checked in the toolbar when clicked","suites":["Anchor Preview TestCase","anchor preview element"],"line":133,"updatePoint":{"line":133,"column":95,"index":6268},"code":"    it('should display the anchor form with target checkbox checked in the toolbar when clicked', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            targetCheckbox: true,\n            targetCheckboxText: 'Open in new window',\n            customClassOption: 'custom-class',\n            customClassOptionText: 'Custom Class'\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        anchor = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // show preview\n      fireEvent(document.getElementById('text-target-blank-link'), 'mouseover');\n\n      // load into editor\n      jasmine.clock().tick(1);\n      fireEvent(anchorPreview.getPreviewElement(), 'click');\n      jasmine.clock().tick(200);\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchor.isDisplayed()).toBe(true);\n\n      // the checkboxes should be unchecked\n      expect(anchor.getAnchorTargetCheckbox().checked).toBe(true);\n      expect(anchor.getAnchorButtonCheckbox().checked).toBe(false);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should display the anchor form with custom class checkbox checked in the toolbar when clicked","suites":["Anchor Preview TestCase","anchor preview element"],"line":160,"updatePoint":{"line":160,"column":101,"index":7386},"code":"    it('should display the anchor form with custom class checkbox checked in the toolbar when clicked', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            targetCheckbox: true,\n            targetCheckboxText: 'Open in new window',\n            customClassOption: 'custom-class',\n            customClassOptionText: 'Custom Class'\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        anchor = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // show preview\n      fireEvent(document.getElementById('text-custom-class-link'), 'mouseover');\n\n      // load into editor\n      jasmine.clock().tick(1);\n      fireEvent(anchorPreview.getPreviewElement(), 'click');\n      jasmine.clock().tick(200);\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchor.isDisplayed()).toBe(true);\n\n      // the checkboxes should be unchecked\n      expect(anchor.getAnchorTargetCheckbox().checked).toBe(false);\n      expect(anchor.getAnchorButtonCheckbox().checked).toBe(true);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should be displayed by default when the hovered link is empty","suites":["Anchor Preview TestCase","anchor preview element"],"line":187,"updatePoint":{"line":187,"column":69,"index":8472},"code":"    it('should be displayed by default when the hovered link is empty', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-empty-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).toHaveBeenCalled();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should NOT be displayed when the hovered link is empty and the option showOnEmptyLinks is set to false","suites":["Anchor Preview TestCase","anchor preview element"],"line":201,"updatePoint":{"line":201,"column":110,"index":9088},"code":"    it('should NOT be displayed when the hovered link is empty and the option showOnEmptyLinks is set to false', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          anchorPreview: {\n            showOnEmptyLinks: false\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-empty-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).not.toHaveBeenCalled();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should be displayed when the link has data attribute to disable preview","suites":["Anchor Preview TestCase","anchor preview element"],"line":218,"updatePoint":{"line":218,"column":79,"index":9753},"code":"    it('should be displayed when the link has data attribute to disable preview', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-link-disable-preview'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).toHaveBeenCalled();\n\n      // showPreview is called but the preview isn't displayed\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-toolbar-arrow-over')).toBe(false);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should be displayed when the option showWhenToolbarIsVisible is set to true and toolbar is visible","suites":["Anchor Preview TestCase","anchor preview element"],"line":235,"updatePoint":{"line":235,"column":106,"index":10548},"code":"    it('should be displayed when the option showWhenToolbarIsVisible is set to true and toolbar is visible', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          anchorPreview: {\n            showWhenToolbarIsVisible: true\n          },\n          toolbar: {\n            static: true\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).toHaveBeenCalled();\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-editor-anchor-preview-active')).toBe(true);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should NOT be displayed when the option showWhenToolbarIsVisible is set to false and toolbar is visible","suites":["Anchor Preview TestCase","anchor preview element"],"line":259,"updatePoint":{"line":259,"column":111,"index":11590},"code":"    it('should NOT be displayed when the option showWhenToolbarIsVisible is set to false and toolbar is visible', function () {\n      var editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          anchorPreview: {\n            showWhenToolbarIsVisible: false\n          },\n          toolbar: {\n            static: true\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n\n      // show preview\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'showPreview').and.callThrough();\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(250);\n      expect(anchorPreview.showPreview).not.toHaveBeenCalled();\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-editor-anchor-preview-active')).toBe(false);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should display the anchor form in the toolbar when clicked when showWhenToolbarIsVisible is set to true and toolbar is visible","suites":["Anchor Preview TestCase","anchor preview element"],"line":285,"updatePoint":{"line":285,"column":134,"index":12720},"code":"    it('should display the anchor form in the toolbar when clicked when showWhenToolbarIsVisible is set to true and toolbar is visible', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchorPreview: {\n            showWhenToolbarIsVisible: true\n          },\n          toolbar: {\n            static: true\n          }\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        anchor = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // show toolbar\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      jasmine.clock().tick(1);\n      expect(toolbar.isDisplayed()).toBe(true);\n\n      // show preview\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // load into editor\n      jasmine.clock().tick(1);\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-editor-anchor-preview-active')).toBe(true);\n      var clickEvent = {\n        defaultPrevented: false,\n        preventDefault: function () {\n          this.defaultPrevented = true;\n        }\n      };\n\n      // trigger all events toolbar is listening to on clicks\n      fireEvent(anchorPreview.getPreviewElement(), 'mousedown');\n      fireEvent(anchorPreview.getPreviewElement(), 'mouseup');\n      anchorPreview.handleClick(clickEvent);\n      jasmine.clock().tick(1);\n\n      // click on the link should have called `preventDefault` to stop from navigating away\n      expect(clickEvent.defaultPrevented).toBe(true, 'link navigation was not prevented on click of the anchor-preview');\n\n      // anchor form should be visible in toolbar\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchor.isDisplayed()).toBe(true, 'anchor form to edit link is not visible');\n      expect(anchorPreview.getPreviewElement().classList.contains('medium-editor-anchor-preview-active')).toBe(false, 'anchor-preview is still visible after being clicked');\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should NOT be present when anchorPreview option is set to false","suites":["Anchor Preview TestCase","anchor preview element"],"line":330,"updatePoint":{"line":330,"column":71,"index":14637},"code":"    it('should NOT be present when anchorPreview option is set to false', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchorPreview: false\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n      expect(anchorPreview).toBeUndefined();\n      expect(document.querySelector('.medium-editor-anchor-preview')).toBeNull();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should not be present when toolbar option is disabled","suites":["Anchor Preview TestCase","anchor preview element"],"line":338,"updatePoint":{"line":338,"column":61,"index":15015},"code":"    it('should not be present when toolbar option is disabled', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: false\n        }),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n      expect(anchorPreview).toBeUndefined();\n      expect(document.querySelector('.medium-editor-anchor-preview')).toBeNull();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should be removed from the document when editor is destroyed","suites":["Anchor Preview TestCase","anchor preview element"],"line":346,"updatePoint":{"line":346,"column":68,"index":15394},"code":"    it('should be removed from the document when editor is destroyed', function () {\n      var editor = this.newMediumEditor('.editor'),\n        anchorPreview = editor.getExtensionByName('anchor-preview');\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'destroy').and.callThrough();\n      expect(document.querySelector('.medium-editor-anchor-preview')).not.toBeNull();\n      expect(document.querySelector('.medium-editor-anchor-preview-active')).toBeNull();\n\n      // show preview\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n      jasmine.clock().tick(1);\n      expect(document.querySelector('.medium-editor-anchor-preview-active')).not.toBeNull();\n\n      // destroy\n      editor.destroy();\n      expect(anchorPreview.destroy).toHaveBeenCalled();\n      expect(document.querySelector('.medium-editor-anchor-preview-active')).toBeNull();\n      expect(document.querySelector('.medium-editor-anchor-preview')).toBeNull();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should NOT be in the DOM when a custom anchorPreview extension is provided","suites":["Anchor Preview TestCase","anchor preview element"],"line":364,"updatePoint":{"line":364,"column":82,"index":16372},"code":"    it('should NOT be in the DOM when a custom anchorPreview extension is provided', function () {\n      this.newMediumEditor('.editor', {\n        extensions: {\n          'anchor-preview': {}\n        }\n      });\n      expect(document.querySelector('.medium-editor-anchor-preview')).toBeNull();\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should correctly set preview position even if elementsContainer is absolute","suites":["Anchor Preview TestCase","anchor preview element"],"line":372,"updatePoint":{"line":372,"column":83,"index":16675},"code":"    it('should correctly set preview position even if elementsContainer is absolute', function () {\n      var container = document.createElement('div'),\n        editor,\n        anchorPreview;\n      container.style.position = 'absolute';\n      container.style.left = '200px';\n      container.style.top = '200px';\n      document.body.appendChild(container);\n      editor = this.newMediumEditor('.editor', {\n        elementsContainer: container,\n        anchorPreview: {\n          showWhenToolbarIsVisible: true\n        },\n        toolbar: {\n          static: true\n        }\n      });\n      anchorPreview = editor.getExtensionByName('anchor-preview').getPreviewElement();\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n\n      // show preview\n      fireEvent(document.getElementById('test-link'), 'mouseover');\n\n      // preview shows only after delay\n      jasmine.clock().tick(501);\n      expect(anchorPreview.classList.contains('medium-editor-anchor-preview-active')).toBe(true);\n      expect(parseInt(anchorPreview.style.left, 10)).toBeLessThan(200);\n      expect(parseInt(anchorPreview.style.top, 10)).toBeLessThan(200);\n      document.body.removeChild(container);\n    });","file":"anchor-preview.spec.js","skipped":false,"dir":"spec"},{"name":"should add class for visible state and remove it for invisivble","suites":["Anchor Button TestCase","Anchor Form"],"line":15,"updatePoint":{"line":15,"column":71,"index":467},"code":"    it('should add class for visible state and remove it for invisivble', function () {\n      var editor = this.newMediumEditor('.editor', {\n          buttonLabels: 'fontawesome'\n        }),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        activeClass = anchorExtension.activeClass;\n      selectElementContentsAndFire(editor.elements[0]);\n      var button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      expect(anchorExtension.getForm().classList.contains(activeClass)).toBe(true);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(anchorExtension.getForm().classList.contains(activeClass)).toBe(false);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not hide the toolbar when mouseup fires inside the anchor form","suites":["Anchor Button TestCase","Anchor Form"],"line":29,"updatePoint":{"line":29,"column":77,"index":1292},"code":"    it('should not hide the toolbar when mouseup fires inside the anchor form', function () {\n      var editor = this.newMediumEditor('.editor', {\n          buttonLabels: 'fontawesome'\n        }),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      var button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      fireEvent(anchorExtension.getInput(), 'mouseup');\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchorExtension.isDisplayed()).toBe(true);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should show the form on shortcut","suites":["Anchor Button TestCase","Anchor Form"],"line":44,"updatePoint":{"line":44,"column":40,"index":2025},"code":"    it('should show the form on shortcut', function () {\n      var editor = this.newMediumEditor('.editor'),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        code = 'K'.charCodeAt(0);\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: code,\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(toolbar.isDisplayed()).toBe(true);\n      expect(anchorExtension.isDisplayed()).toBe(true);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should create a link when user presses enter","suites":["Anchor Button TestCase","Link Creation"],"line":60,"updatePoint":{"line":60,"column":52,"index":2642},"code":"    it('should create a link when user presses enter', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContents(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = 'http://test.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalled();\n      // A trailing <br> may be added when insertHTML is used to add the link internally.\n      expect(this.el.innerHTML.indexOf('<a href=\"http://test.com\">lorem ipsum</a>')).toBe(0);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the extra white spaces in the link when user presses enter","suites":["Anchor Button TestCase","Link Creation"],"line":78,"updatePoint":{"line":78,"column":80,"index":3556},"code":"    it('should remove the extra white spaces in the link when user presses enter', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContents(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = '    test   ';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalled();\n      // A trailing <br> may be added when insertHTML is used to add the link internally.\n      expect(this.el.innerHTML.indexOf('<a href=\"test\">lorem ipsum</a>')).toBe(0);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not set any href if all user passes is spaces in the link when user presses enter","suites":["Anchor Button TestCase","Link Creation"],"line":96,"updatePoint":{"line":96,"column":96,"index":4471},"code":"    it('should not set any href if all user passes is spaces in the link when user presses enter', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContents(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = '    ';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      //Since user only passes empty string in the url, there should be no <a> tag created for the element.\n      expect(this.el.innerHTML.indexOf('<a href=\"\">lorem ipsum</a>')).toBe(-1);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should create only one anchor tag when the user selects across a boundary","suites":["Anchor Button TestCase","Link Creation"],"line":113,"updatePoint":{"line":113,"column":81,"index":5327},"code":"    it('should create only one anchor tag when the user selects across a boundary', function () {\n      this.el.innerHTML = 'Hello world, this <strong>will become a link, but this part won\\'t.</strong>';\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      MediumEditor.selection.select(document, this.el.childNodes[0], 'Hello world, '.length, this.el.childNodes[1].childNodes[0], 'will become a link'.length);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = 'http://test.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalled();\n      expect(this.el.innerHTML).toMatch(/^Hello world, <a href=\"http:\\/\\/test\\.com\\/?\">this <strong>will become a link<\\/strong><\\/a><strong>, but this part won\\'t\\.<\\/strong>(<br>|<strong><\\/strong>)?$/);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should create a link when the user selects text within two paragraphs","suites":["Anchor Button TestCase","Link Creation"],"line":131,"updatePoint":{"line":131,"column":77,"index":6477},"code":"    it('should create a link when the user selects text within two paragraphs', function () {\n      this.el.innerHTML = '<p>Hello <span>world</span>.</p>' + '<p><strong>Let us make a link</strong> across paragraphs.</p>';\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      MediumEditor.selection.select(document, this.el.querySelector('span'), 0, this.el.querySelector('strong'), 1);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = 'http://test.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalled();\n      var anchors = this.el.querySelectorAll('a');\n      // Edge creates 3 links, other browsers create 2\n      expect(anchors.length).toBeGreaterThan(1);\n      expect(anchors.length).toBeLessThan(4);\n      var linkText = '';\n      Array.prototype.slice.call(anchors).forEach(function (anchor) {\n        linkText += anchor.textContent;\n      });\n      expect(linkText).toBe('world.Let us make a link');\n      var spans = this.el.querySelectorAll('span');\n      expect(spans.length).toBe(1);\n      expect(spans[0].textContent).toBe('world');\n      var strongs = this.el.querySelectorAll('strong');\n      expect(strongs.length).toBe(1);\n      expect(strongs[0].textContent).toBe('Let us make a link');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"shouldn't create a link when user presses enter without value","suites":["Anchor Button TestCase","Link Creation"],"line":163,"updatePoint":{"line":163,"column":70,"index":8093},"code":"    it('shouldn\\'t create a link when user presses enter without value', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContents(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = '';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.elements[0].querySelector('a')).toBeNull();\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should add http:// if need be and linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":179,"updatePoint":{"line":179,"column":78,"index":8818},"code":"    it('should add http:// if need be and linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('test.com');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe('http://test.com/');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should add tel: if need be and linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":194,"updatePoint":{"line":194,"column":75,"index":9461},"code":"    it('should add tel: if need be and linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('347-999-9999');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe('tel:347-999-9999');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change protocol when a valid one is included","suites":["Anchor Button TestCase","Link Creation"],"line":209,"updatePoint":{"line":209,"column":63,"index":10096},"code":"    it('should not change protocol when a valid one is included', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        validUrl = 'mailto:test.com',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validUrl);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(validUrl);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change protocol when a tel scheme is included","suites":["Anchor Button TestCase","Link Creation"],"line":225,"updatePoint":{"line":225,"column":64,"index":10754},"code":"    it('should not change protocol when a tel scheme is included', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        // Specifically using a bad phone number to illustrate that what follows tel is not checked\n        validUrl = 'tel:abc123!@#',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validUrl);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(validUrl);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change protocol when a maps scheme is included","suites":["Anchor Button TestCase","Link Creation"],"line":242,"updatePoint":{"line":242,"column":65,"index":11511},"code":"    it('should not change protocol when a maps scheme is included', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        // Specifically using a non-sensical maps string to illustrate that what follows maps is not checked\n        validUrl = 'maps:abc123!@#',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validUrl);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(validUrl);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change protocol for protocol-relative URLs","suites":["Anchor Button TestCase","Link Creation"],"line":259,"updatePoint":{"line":259,"column":61,"index":12274},"code":"    it('should not change protocol for protocol-relative URLs', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        validUrl = '//test.com/',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validUrl);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(window.location.protocol + validUrl);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change protocol for any alphabetic scheme","suites":["Anchor Button TestCase","Link Creation"],"line":275,"updatePoint":{"line":275,"column":60,"index":12951},"code":"    it('should not change protocol for any alphabetic scheme', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        validUrl = 'abcDEFgHi://test.com/',\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validUrl);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(validUrl.toLowerCase());\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change fragment identifier when link begins with hash","suites":["Anchor Button TestCase","Link Creation"],"line":291,"updatePoint":{"line":291,"column":72,"index":13637},"code":"    it('should not change fragment identifier when link begins with hash', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        validHashLink = '#!$&\\'()*+,;=123abcDEF-._~:@/?',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(validHashLink);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.getAttribute('href')).toBe(validHashLink);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not add a scheme to an absolute path","suites":["Anchor Button TestCase","Link Creation"],"line":307,"updatePoint":{"line":307,"column":51,"index":14328},"code":"    it('should not add a scheme to an absolute path', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        absolutePath = '/test',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(absolutePath);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.getAttribute('href')).toBe(absolutePath);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not add a scheme to an obviously relative path","suites":["Anchor Button TestCase","Link Creation"],"line":323,"updatePoint":{"line":323,"column":61,"index":15001},"code":"    it('should not add a scheme to an obviously relative path', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        relativePath = 'test/file.html',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(relativePath);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.getAttribute('href')).toBe(relativePath);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should add a scheme to a localhost url","suites":["Anchor Button TestCase","Link Creation"],"line":339,"updatePoint":{"line":339,"column":46,"index":15668},"code":"    it('should add a scheme to a localhost url', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        localhostUrl = 'http://localhost',\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('localhost');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.getAttribute('href')).toBe(localhostUrl);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should change spaces to %20 for a valid url if linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":355,"updatePoint":{"line":355,"column":91,"index":16381},"code":"    it('should change spaces to %20 for a valid url if linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://te%20s%20t.com/',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('te s t.com/');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(expectedOpts.value);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change # to %23 for a valid url if linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":376,"updatePoint":{"line":376,"column":90,"index":17282},"code":"    it('should not change # to %23 for a valid url if linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://example.com/?query=value#anchor',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(expectedOpts.value);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(expectedOpts.value);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not encode an encoded URL if linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":397,"updatePoint":{"line":397,"column":80,"index":18194},"code":"    it('should not encode an encoded URL if linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://a%20b.com/',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('a%20b.com/');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(expectedOpts.value);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should encode query params if linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":418,"updatePoint":{"line":418,"column":74,"index":19073},"code":"    it('should encode query params if linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://a.com/?q=http%3A%2F%2Fb.com&q2=http%3A%2F%2Fc.com',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('a.com/?q=http://b.com&q2=http://c.com');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(expectedOpts.value);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not encode an encoded query param if linkValidation option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":439,"updatePoint":{"line":439,"column":88,"index":20032},"code":"    it('should not encode an encoded query param if linkValidation option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: true\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://a.com/?q=http%3A%2F%2Fb.com&q2=http%3A%2F%2Fc.com',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('a.com/?q=http%3A%2F%2Fb.com&q2=http://c.com');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.href).toBe(expectedOpts.value);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not change spaces to %20 if linkValidation is set to false","suites":["Anchor Button TestCase","Link Creation"],"line":460,"updatePoint":{"line":460,"column":73,"index":20982},"code":"    it('should not change spaces to %20 if linkValidation is set to false', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            linkValidation: false\n          }\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        expectedOpts = {\n          value: 'http://te s t.com/',\n          target: '_self'\n        };\n      spyOn(editor, 'execAction').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm(expectedOpts.value);\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n\n      // Chrome, Edge, and IE will automatically escape the href once it's set on the link\n      // So for this case, we'll only look at the call to execAction to see what URL it was trying to set\n      // since the value of the link's href could be different values\n      expect(editor.execAction).toHaveBeenCalledWith('createLink', expectedOpts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should add target=\"_blank\" when \"open in a new window\" checkbox is checked","suites":["Anchor Button TestCase","Link Creation"],"line":484,"updatePoint":{"line":484,"column":82,"index":22095},"code":"    it('should add target=\"_blank\" when \"open in a new window\" checkbox is checked', function () {\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            targetCheckbox: true\n          }\n        }),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        targetCheckbox,\n        link;\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('http://test.com');\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      targetCheckbox = anchorExtension.getForm().querySelector('input.medium-editor-toolbar-anchor-target');\n      expect().not.toBeNull(targetCheckbox);\n      targetCheckbox.checked = true;\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      expect(anchorExtension.isDisplayed()).toBe(false);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.target).toBe('_blank');\n      expect(link.rel).toBe('noopener noreferrer');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should add target=\"_blank\" when respective option is set to true","suites":["Anchor Button TestCase","Link Creation"],"line":506,"updatePoint":{"line":506,"column":72,"index":23114},"code":"    it('should add target=\"_blank\" when respective option is set to true', function () {\n      var editor = this.newMediumEditor('.editor', {\n          targetBlank: true\n        }),\n        link,\n        anchorExtension = editor.getExtensionByName('anchor');\n      selectElementContentsAndFire(editor.elements[0]);\n      anchorExtension.showForm('http://test.com');\n      fireEvent(anchorExtension.getForm().querySelector('a.medium-editor-toolbar-save'), 'click');\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.target).toBe('_blank');\n      expect(link.rel).toBe('noopener noreferrer');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should create a button when user selects this option and presses enter","suites":["Anchor Button TestCase","Link Creation"],"line":520,"updatePoint":{"line":520,"column":78,"index":23774},"code":"    it('should create a button when user selects this option and presses enter', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor', {\n          anchor: {\n            customClassOption: 'btn btn-default'\n          }\n        }),\n        save,\n        input,\n        button,\n        link,\n        opts,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContents(editor.elements[0]);\n      save = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(save, 'click');\n      input = anchorExtension.getInput();\n      input.value = 'http://test.com';\n      button = anchorExtension.getForm().querySelector('input.medium-editor-toolbar-anchor-button');\n      button.setAttribute('type', 'checkbox');\n      button.checked = true;\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      opts = {\n        value: 'http://test.com',\n        target: '_self',\n        buttonClass: 'btn btn-default'\n      };\n      expect(editor.createLink).toHaveBeenCalledWith(opts);\n      link = editor.elements[0].querySelector('a');\n      expect(link).not.toBeNull();\n      expect(link.classList.contains('btn')).toBe(true);\n      expect(link.classList.contains('btn-default')).toBe(true);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not select empty paragraphs when link is created at beginning of paragraph after empty paragraphs","suites":["Anchor Button TestCase","Link Creation"],"line":660,"updatePoint":{"line":660,"column":112,"index":30400},"code":"    it('should not select empty paragraphs when link is created at beginning of paragraph after empty paragraphs', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      this.el.innerHTML = '<p>Some text</p><p><br/></p><p><br/></p><p>link text more text</p>';\n      var editor = this.newMediumEditor('.editor'),\n        lastP = this.el.lastChild,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // Select the text 'link text' in the last paragraph\n      MediumEditor.selection.select(document, lastP.firstChild, 0, lastP.firstChild, 'link text'.length);\n      fireEvent(editor.elements[0], 'focus');\n      jasmine.clock().tick(1);\n\n      // Click the 'anchor' button in the toolbar\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]'), 'click');\n\n      // Input a url and save\n      var input = anchorExtension.getInput();\n      input.value = 'http://www.example.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalledWith({\n        value: 'http://www.example.com',\n        target: '_self'\n      });\n\n      // Make sure the <p> wasn't removed, and the <a> was added to the end\n      expect(this.el.lastChild).toBe(lastP);\n      expect(lastP.firstChild.nodeName.toLowerCase()).toBe('a');\n\n      // Make sure selection is only the link\n      var range = window.getSelection().getRangeAt(0);\n      expect(MediumEditor.util.isDescendant(lastP, range.startContainer, true)).toBe(true, 'The start of the selection is incorrect');\n      expect(range.startOffset).toBe(0);\n      expect(MediumEditor.util.isDescendant(lastP.firstChild, range.endContainer, true)).toBe(true, 'The end of the selection is not contained within the link');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not select empty paragraphs when link is created at beginning of paragraph after another paragraph","suites":["Anchor Button TestCase","Link Creation"],"line":699,"updatePoint":{"line":699,"column":113,"index":32333},"code":"    it('should not select empty paragraphs when link is created at beginning of paragraph after another paragraph', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      this.el.innerHTML = '<p>Some text</p><p>link text more text</p>';\n      var editor = this.newMediumEditor('.editor'),\n        lastP = this.el.lastChild,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // Select the text 'link text' in the last paragraph\n      MediumEditor.selection.select(document, lastP.firstChild, 0, lastP.firstChild, 'link text'.length);\n      fireEvent(editor.elements[0], 'focus');\n      jasmine.clock().tick(1);\n\n      // Click the 'anchor' button in the toolbar\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]'), 'click');\n\n      // Input a url and save\n      var input = anchorExtension.getInput();\n      input.value = 'http://www.example.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalledWith({\n        value: 'http://www.example.com',\n        target: '_self'\n      });\n\n      // Make sure the <p> wasn't removed, and the <a> was added to the end\n      expect(this.el.lastChild).toBe(lastP);\n      expect(lastP.firstChild.nodeName.toLowerCase()).toBe('a');\n\n      // Make sure selection is only the link\n      var range = window.getSelection().getRangeAt(0);\n      expect(MediumEditor.util.isDescendant(lastP, range.startContainer, true)).toBe(true, 'The start of the selection is incorrect');\n      expect(range.startOffset).toBe(0);\n      expect(MediumEditor.util.isDescendant(lastP.firstChild, range.endContainer, true)).toBe(true, 'The end of the selection is not contained within the link');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should not remove the <p> container when adding a link inside a top-level <p> with a single text-node child","suites":["Anchor Button TestCase","Link Creation"],"line":736,"updatePoint":{"line":736,"column":115,"index":34186},"code":"    it('should not remove the <p> container when adding a link inside a top-level <p> with a single text-node child', function () {\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      this.el.innerHTML = '<p>Some text</p><p><br/></p><p><br/></p><p>some text link text</p>';\n      var editor = this.newMediumEditor('.editor'),\n        lastP = this.el.lastChild,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n\n      // Select the text 'link text' in the last paragraph\n      MediumEditor.selection.select(document, lastP.firstChild, 'some text '.length, lastP.firstChild, 'some text link text'.length);\n      fireEvent(editor.elements[0], 'focus');\n      jasmine.clock().tick(1);\n\n      // Click the 'anchor' button in the toolbar\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]'), 'click');\n\n      // Input a url and save\n      var input = anchorExtension.getInput();\n      input.value = 'http://www.example.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalledWith({\n        value: 'http://www.example.com',\n        target: '_self'\n      });\n\n      // Make sure the <p> wasn't removed, and the <a> was added to the end\n      expect(this.el.lastChild).toBe(lastP);\n      expect(lastP.lastChild.nodeName.toLowerCase()).toBe('a');\n\n      // Make sure selection is only the link\n      var range = window.getSelection().getRangeAt(0);\n      if (range.startContainer === lastP.lastChild.firstChild) {\n        expect(range.startOffset).toBe(0, 'The start of the selection is not at the front of the link');\n      } else {\n        expect(range.startContainer).toBe(lastP.firstChild);\n        expect(range.startOffset).toBe('some text '.length, 'The start of the selection is not at the front of the link');\n      }\n      expect(MediumEditor.util.isDescendant(lastP.lastChild, range.endContainer, true)).toBe(true, 'The end of the selection is incorrect');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should update the href of a link containing only an image","suites":["Anchor Button TestCase","Link Creation"],"line":779,"updatePoint":{"line":779,"column":65,"index":36278},"code":"    it('should update the href of a link containing only an image', function () {\n      this.el.innerHTML = '<a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\"></a>';\n      spyOn(MediumEditor.prototype, 'createLink').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input,\n        aTag = this.el.childNodes[0];\n      selectElementContents(aTag);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      input = editor.getExtensionByName('anchor').getInput();\n      input.value = 'http://www.google.com';\n      fireEvent(input, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(editor.createLink).toHaveBeenCalled();\n      // This appears to be broken in Edge < 13, but works correctly in Edge 13 or higher\n      // So for the sake of sanity, disabling this check for Edge 12.\n      // TODO: Find a better way to fix this issue if Edge 12 is going to matter\n      var edgeVersion = getEdgeVersion();\n      if (!edgeVersion || edgeVersion >= 13) {\n        expect(this.el.innerHTML).toContain('<a href=\"http://www.google.com\"><img src=\"../demo/img/medium-editor.jpg\"></a>');\n      }\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should close the link form when user clicks on cancel","suites":["Anchor Button TestCase","Cancel"],"line":806,"updatePoint":{"line":806,"column":61,"index":37611},"code":"    it('should close the link form when user clicks on cancel', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'showAndUpdateToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        button,\n        cancel,\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      cancel = anchorExtension.getForm().querySelector('a.medium-editor-toolbar-close');\n      fireEvent(button, 'click');\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      fireEvent(cancel, 'click');\n      expect(toolbar.showAndUpdateToolbar).toHaveBeenCalled();\n      expect(anchorExtension.isDisplayed()).toBe(false);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should close the link form when user presses escape","suites":["Anchor Button TestCase","Cancel"],"line":822,"updatePoint":{"line":822,"column":59,"index":38473},"code":"    it('should close the link form when user presses escape', function () {\n      var editor = this.newMediumEditor('.editor'),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]'), 'click');\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      fireEvent(anchorExtension.getInput(), 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ESCAPE\n      });\n      expect(anchorExtension.isDisplayed()).toBe(false);\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should display the anchor form when toolbar is visible","suites":["Anchor Button TestCase","Click"],"line":836,"updatePoint":{"line":836,"column":62,"index":39154},"code":"    it('should display the anchor form when toolbar is visible', function () {\n      spyOn(MediumEditor.extensions.anchor.prototype, 'showForm').and.callThrough();\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      expect(toolbar.getToolbarActionsElement().style.display).toBe('none');\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      expect(anchorExtension.showForm).toHaveBeenCalled();\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should unlink when selection is a link","suites":["Anchor Button TestCase","Click"],"line":849,"updatePoint":{"line":849,"column":46,"index":39867},"code":"    it('should unlink when selection is a link', function () {\n      this.el.innerHTML = '<a href=\"#\">link</a>';\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      spyOn(document, 'execCommand').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toBe('link');\n      expect(document.execCommand).toHaveBeenCalled();\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should allow more than one link creation within a paragraph","suites":["Anchor Button TestCase","Click"],"line":863,"updatePoint":{"line":863,"column":67,"index":40526},"code":"    it('should allow more than one link creation within a paragraph', function () {\n      spyOn(MediumEditor.extensions.anchor.prototype, 'showForm').and.callThrough();\n      this.el.innerHTML = '<p><a href=\"#\">beginning</a> some text middle some text end</p>';\n      var editor = this.newMediumEditor('.editor'),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        para = this.el.firstChild;\n\n      // Select the text 'middle'\n      MediumEditor.selection.select(document, para.childNodes[1], 11, para.childNodes[1], 18);\n      fireEvent(editor.elements[0], 'focus');\n      jasmine.clock().tick(1);\n\n      // Click the 'anchor' button in the toolbar\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]'), 'click');\n      expect(toolbar.getToolbarActionsElement().style.display).toBe('none');\n      expect(anchorExtension.isDisplayed()).toBe(true);\n      expect(anchorExtension.showForm).toHaveBeenCalled();\n      expect(anchorExtension.getInput().value).toBe('');\n    });","file":"anchor.spec.js","skipped":false,"dir":"spec"},{"name":"should turn off browser auto-link during initialization","suites":["Autolink","extension"],"line":14,"updatePoint":{"line":14,"column":63,"index":398},"code":"    it('should turn off browser auto-link during initialization', function () {\n      var autoUrlDetectTurnedOn = true,\n        origExecCommand = document.execCommand;\n      spyOn(document, 'execCommand').and.callFake(function (command, showUi, val) {\n        if (command === 'AutoUrlDetect') {\n          autoUrlDetectTurnedOn = val;\n        }\n        return origExecCommand.apply(document, arguments);\n      });\n      this.newMediumEditor('.editor', {\n        autoLink: true\n      });\n      expect(autoUrlDetectTurnedOn).toBe(false);\n    });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should reset browser auto-link (if supported) during destroy","suites":["Autolink","extension"],"line":28,"updatePoint":{"line":28,"column":68,"index":946},"code":"    it('should reset browser auto-link (if supported) during destroy', function () {\n      var autoUrlDetectTurnedOn = true,\n        origExecCommand = document.execCommand,\n        origQCS = document.queryCommandSupported;\n      spyOn(document, 'execCommand').and.callFake(function (command, showUi, val) {\n        if (command === 'AutoUrlDetect') {\n          autoUrlDetectTurnedOn = val;\n        }\n        return origExecCommand.apply(document, arguments);\n      });\n      spyOn(document, 'queryCommandSupported').and.callFake(function (command) {\n        if (command === 'AutoUrlDetect') {\n          return true;\n        }\n        return origQCS.apply(document, arguments);\n      });\n      var editor = this.newMediumEditor('.editor', {\n        autoLink: true\n      });\n      expect(autoUrlDetectTurnedOn).toBe(false);\n      editor.destroy();\n      expect(autoUrlDetectTurnedOn).toBe(true);\n    });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not reset multiple browser auto-links (if supported) during destroy","suites":["Autolink","extension"],"line":51,"updatePoint":{"line":51,"column":82,"index":1861},"code":"    it('should not reset multiple browser auto-links (if supported) during destroy', function () {\n      var autoUrlDetectTurnedOn = true,\n        origExecCommand = document.execCommand,\n        origQCS = document.queryCommandSupported;\n      this.el = this.createElement('div', 'editor2', '');\n      spyOn(document, 'execCommand').and.callFake(function (command, showUi, val) {\n        if (command === 'AutoUrlDetect') {\n          autoUrlDetectTurnedOn = val;\n        }\n        return origExecCommand.apply(document, arguments);\n      });\n      spyOn(document, 'queryCommandSupported').and.callFake(function (command) {\n        if (command === 'AutoUrlDetect') {\n          return true;\n        }\n        return origQCS.apply(document, arguments);\n      });\n      var editor = this.newMediumEditor('.editor', {\n          autoLink: true\n        }),\n        editor2 = this.newMediumEditor('.editor2', {\n          autoLink: true\n        });\n      expect(autoUrlDetectTurnedOn).toBe(false);\n      editor.destroy();\n      expect(autoUrlDetectTurnedOn).toBe(false);\n      editor2.destroy();\n      expect(autoUrlDetectTurnedOn).toBe(true);\n    });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text on its own","suites":["Autolink","integration","auto-linking typed-in text"],"line":148,"updatePoint":{"line":148,"column":42,"index":6579},"code":"      it('should auto-link text on its own', function () {\n        this.el.innerHTML = 'http://www.example.com';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].textContent).toBe('http://www.example.com');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text on all SPACE or ENTER","suites":["Autolink","integration","auto-linking typed-in text"],"line":158,"updatePoint":{"line":158,"column":53,"index":7118},"code":"      it('should auto-link text on all SPACE or ENTER', function () {\n        var links;\n        this.el.innerHTML = 'http://www.example.enter';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el, MediumEditor.util.keyCode.ENTER);\n        links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1, 'links length after ENTER');\n        expect(links[0].getAttribute('href')).toBe('http://www.example.enter');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].textContent).toBe('http://www.example.enter');\n        this.el.innerHTML = 'http://www.example.space';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el, MediumEditor.util.keyCode.SPACE);\n        links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1, 'links length after SPACE');\n        expect(links[0].getAttribute('href')).toBe('http://www.example.space');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].textContent).toBe('http://www.example.space');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text on blur","suites":["Autolink","integration","auto-linking typed-in text"],"line":177,"updatePoint":{"line":177,"column":39,"index":8247},"code":"      it('should auto-link text on blur', function () {\n        var links;\n        this.el.innerHTML = 'http://www.example.blur';\n        selectElementContentsAndFire(this.el);\n        fireEvent(this.el, 'blur');\n        jasmine.clock().tick(1);\n        links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.blur');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].textContent).toBe('http://www.example.blur');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should fire editableInput after autolinking","suites":["Autolink","integration","auto-linking typed-in text"],"line":189,"updatePoint":{"line":189,"column":53,"index":8836},"code":"      it('should fire editableInput after autolinking', function () {\n        var spy = jasmine.createSpy('handler');\n        this.el.innerHTML = 'http://www.example.com';\n        selectElementContentsAndFire(this.el);\n        this.editor.subscribe('editableInput', spy);\n        expect(spy).not.toHaveBeenCalled();\n        fireEvent(this.el, 'blur');\n        jasmine.clock().tick(1);\n        expect(spy).toHaveBeenCalled();\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link link within basic text","suites":["Autolink","integration","auto-linking typed-in text"],"line":199,"updatePoint":{"line":199,"column":49,"index":9267},"code":"      it('should auto-link link within basic text', function () {\n        this.el.innerHTML = 'Text with http://www.example.com inside!';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].getAttribute('href')).toBe(links[0].textContent);\n        expect(this.el.childNodes[0].nodeValue).toBe('Text with ');\n        expect(this.el.childNodes[this.el.childNodes.length - 1].nodeValue).toBe(' inside!');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link basic text within a parent element","suites":["Autolink","integration","auto-linking typed-in text"],"line":210,"updatePoint":{"line":210,"column":61,"index":9918},"code":"      it('should auto-link basic text within a parent element', function () {\n        this.el.innerHTML = '<span>Text with http://www.example.com inside!</span>';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(this.el.firstChild.nodeName.toLowerCase()).toBe('span');\n        expect(this.el.firstChild.textContent).toBe('Text with http://www.example.com inside!');\n        expect(this.el.firstChild.getElementsByTagName('a').length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].textContent).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text that is partially styled and preserve the SPAN and B tags","suites":["Autolink","integration","auto-linking typed-in text"],"line":223,"updatePoint":{"line":223,"column":89,"index":10770},"code":"      it('should auto-link text that is partially styled and preserve the SPAN and B tags', function () {\n        var selection = window.getSelection(),\n          newRange = document.createRange();\n        this.el.innerHTML = '<p><span class=\"a\"><b>Here is the link: http://www.</b>exa</span>mple.com </p>';\n        selection.removeAllRanges();\n        newRange.setStart(this.el.firstChild.lastChild, this.el.firstChild.lastChild.nodeValue.length);\n        newRange.setEnd(this.el.firstChild.lastChild, this.el.firstChild.lastChild.nodeValue.length);\n        selection.addRange(newRange);\n        triggerAutolinking(this.el);\n        expect(this.el.innerHTML.indexOf('<p><span class=\"a\"><b>Here is the link: </b></span>')).toBe(0);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].firstChild.nodeName.toLowerCase()).toBe('span');\n        expect(links[0].firstChild.innerHTML).toBe('<span class=\"a\"><b>http://www.</b>exa</span>mple.com');\n        expect(this.el.firstChild.lastChild.nodeValue).toBe(' ');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text that is partially styled with a profusion of mixed bold sections","suites":["Autolink","integration","auto-linking typed-in text"],"line":241,"updatePoint":{"line":241,"column":96,"index":12018},"code":"      it('should auto-link text that is partially styled with a profusion of mixed bold sections', function () {\n        var selection = window.getSelection(),\n          newRange = document.createRange();\n        this.el.innerHTML = '<p><b>Here is the link: http://www.</b>exampl<b>e</b>.com </p>';\n        selection.removeAllRanges();\n        newRange.setStart(this.el.firstChild.lastChild, this.el.firstChild.lastChild.nodeValue.length);\n        newRange.setEnd(this.el.firstChild.lastChild, this.el.firstChild.lastChild.nodeValue.length);\n        selection.addRange(newRange);\n        triggerAutolinking(this.el);\n        expect(this.el.innerHTML.indexOf('<p><b>Here is the link: </b>')).toBe(0);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].firstChild.nodeName.toLowerCase()).toBe('span');\n        expect(links[0].firstChild.innerHTML).toBe('<b>http://www.</b>exampl<b>e</b>.com');\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(this.el.firstChild.lastChild.nodeValue).toBe(' ');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should auto-link text in a really hideous example","suites":["Autolink","integration","auto-linking typed-in text"],"line":260,"updatePoint":{"line":260,"column":59,"index":13255},"code":"      it('should auto-link text in a really hideous example', function () {\n        this.el.innerHTML = '' + '<span>' + '<b>Link: http</b>' + '<i>://</i>' + '</span>' + '<span>' + '<b>www</b>' + '<u>.google.com</u>' + '</span>' + '<span>' + '<b>/wow </b>' + '<i>impressive</i>' + '</span>';\n        selectElementContentsAndFire(this.el.firstChild);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        expect(links[0].firstChild.getAttribute('data-href')).toBe('http://www.google.com/wow');\n        links[0].firstChild.removeAttribute('data-href'); // to make the next innerHTML check work consistently\n\n        var expectedOutput = '' + '<span>' + '<b>Link: </b>' + '</span>' + '<a href=\"http://www.google.com/wow\">' + '<span data-auto-link=\"true\">' + '<span>' + '<b>http</b>' + '<i>://</i>' + '</span>' + '<span>' + '<b>www</b>' + '<u>.google.com</u>' + '</span>' + '<span>' + '<b>/wow</b>' + '</span>' + '</span>' + '</a>' + '<span>' + '<b> </b>' + '<i>impressive</i>' + '</span>';\n        expect(this.el.innerHTML).toBe(expectedOutput);\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not auto-link text inside links","suites":["Autolink","integration","auto-linking typed-in text"],"line":273,"updatePoint":{"line":273,"column":48,"index":14461},"code":"      it('should not auto-link text inside links', function () {\n        this.el.innerHTML = 'Click this http://www.example.com link';\n        selectElementContentsAndFire(this.el.firstChild);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n        triggerAutolinking(this.el);\n        links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not auto-link text inside a span with data-auto-link=true","suites":["Autolink","integration","auto-linking typed-in text"],"line":287,"updatePoint":{"line":287,"column":74,"index":15264},"code":"      it('should not auto-link text inside a span with data-auto-link=true', function () {\n        this.el.innerHTML = 'Click this <span data-href=\"http://www.example.com\" data-auto-link=\"true\">' + 'http://www.example.com</span> link';\n        selectElementContentsAndFire(this.el.firstChild);\n        triggerAutolinking(this.el);\n        expect(this.el.getElementsByTagName('a').length).toBe(0, 'should not create a link');\n        expect(this.el.getElementsByTagName('span').length).toBe(1, 'span should remain in place');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not auto-link text containing a span with data-auto-link=true","suites":["Autolink","integration","auto-linking typed-in text"],"line":294,"updatePoint":{"line":294,"column":78,"index":15803},"code":"      it('should not auto-link text containing a span with data-auto-link=true', function () {\n        this.el.innerHTML = 'Click this <span data-href=\"http://www.example.com\" data-auto-link=\"true\">' + 'www.example.com</span>foo/bar/baz link';\n        selectElementContentsAndFire(this.el.firstChild);\n        triggerAutolinking(this.el);\n        expect(this.el.getElementsByTagName('a').length).toBe(0, 'should not create a link');\n        expect(this.el.getElementsByTagName('span').length).toBe(1, 'span should remain in place');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should remove a span with data-auto-link=true when the text no longer matches the original link","suites":["Autolink","integration","auto-linking typed-in text"],"line":301,"updatePoint":{"line":301,"column":105,"index":16373},"code":"      it('should remove a span with data-auto-link=true when the text no longer matches the original link', function () {\n        this.el.innerHTML = 'Click this <span data-auto-link=\"true\" data-href=\"http://www.example.com\">' + 'foo</span> link';\n        triggerAutolinking(this.el);\n        expect(this.el.getElementsByTagName('span').length).toBe(0, 'span should have been removed');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should create a link with target=\"_blank\" when respective option is set to true","suites":["Autolink","integration","auto-linking typed-in text"],"line":312,"updatePoint":{"line":312,"column":89,"index":17329},"code":"      it('should create a link with target=\"_blank\" when respective option is set to true', function () {\n        this.el = this.createElement('div', 'editor-blank', '');\n        this.newMediumEditor('.editor-blank', {\n          autoLink: true,\n          targetBlank: true\n        });\n        this.el.innerHTML = 'http://www.example.com';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(1);\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].target).toBe('_blank');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should stop attempting to auto-link on keypress if an error is encountered","suites":["Autolink","integration","auto-linking typed-in text"],"line":326,"updatePoint":{"line":326,"column":84,"index":17976},"code":"      it('should stop attempting to auto-link on keypress if an error is encountered', function () {\n        var spy = spyOn(MediumEditor.extensions.autoLink.prototype, 'performLinking');\n        this.el.innerHTML = '<span><a href=\"http://www.google.com>http://www.google.com</a></span>';\n\n        // This will cause an error\n        triggerAutolinking(this.el);\n        expect(spy.calls.count()).toBe(1);\n\n        // The previous error should prevent performLiking from being called again\n        triggerAutolinking(this.el);\n        expect(spy.calls.count()).toBe(2);\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should create a link for a url within a list item","suites":["Autolink","integration","auto-linking typed-in text"],"line":338,"updatePoint":{"line":338,"column":59,"index":18531},"code":"      it('should create a link for a url within a list item', function () {\n        this.el.innerHTML = '<p>This is my list of links:</p><ol><li>http://www.example.com</li></ol><p>It is very impressive</p>';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a'),\n          li = this.el.querySelector('li');\n        expect(links.length).toBe(1, 'A single link was not automatically created');\n        expect(li.firstChild).toBe(links[0]);\n        expect(li.textContent).toBe('http://www.example.com');\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(links[0].firstChild.getAttribute('data-auto-link')).toBe('true');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not create a link when text in consecutive list items could be a valid url when combined","suites":["Autolink","integration","auto-linking typed-in text"],"line":352,"updatePoint":{"line":352,"column":105,"index":19391},"code":"      it('should not create a link when text in consecutive list items could be a valid url when combined', function () {\n        this.el.innerHTML = '<ul><li>text ending in a period.</li><li>name - text starting with a TLD</li></ul>';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(0, 'A link was created without a valid url being in the text');\n        expect(this.el.innerHTML).toBe('<ul><li>text ending in a period.</li><li>name - text starting with a TLD</li></ul>', 'Content does not contain a valid url, but auto-link caused the content to change');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not create a link which spans multiple list items","suites":["Autolink","integration","auto-linking typed-in text"],"line":362,"updatePoint":{"line":362,"column":66,"index":20105},"code":"      it('should not create a link which spans multiple list items', function () {\n        this.el.innerHTML = '<blockquote><ol><li>abc</li><li>www.example.com</li></ol></blockquote>';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a'),\n          lastLi = this.el.querySelector('ol').lastChild;\n        expect(links.length).toBe(1, 'There should have been exactly 1 link created');\n        expect(links[0].getAttribute('href')).toBe('http://www.example.com');\n        expect(lastLi.firstChild).toBe(links[0]);\n        expect(lastLi.textContent).toBe('www.example.com');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should not create a link which spans multiple list items","suites":["Autolink","integration","auto-linking typed-in text"],"line":373,"updatePoint":{"line":373,"column":66,"index":20772},"code":"      it('should not create a link which spans multiple list items', function () {\n        this.el.innerHTML = '<blockquote><ol><li>www</li><li>.example.com</li></ol></blockquote>';\n        selectElementContentsAndFire(this.el);\n        triggerAutolinking(this.el);\n        var links = this.el.getElementsByTagName('a');\n        expect(links.length).toBe(0, 'There should not have been any links created');\n      });","file":"auto-link.spec.js","skipped":false,"dir":"spec"},{"name":"should set active class on click","suites":["Buttons TestCase","Button click"],"line":25,"updatePoint":{"line":25,"column":40,"index":742},"code":"    it('should set active class on click', function () {\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      fireEvent(button, 'click');\n      expect(button.className).toContain('medium-editor-button-active');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should check for selection when selection is undefined","suites":["Buttons TestCase","Button click"],"line":34,"updatePoint":{"line":34,"column":62,"index":1198},"code":"    it('should check for selection when selection is undefined', function () {\n      spyOn(MediumEditor.prototype, 'checkSelection');\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      fireEvent(button, 'click');\n      expect(editor.checkSelection).toHaveBeenCalled();\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should remove active class if button has it","suites":["Buttons TestCase","Button click"],"line":44,"updatePoint":{"line":44,"column":51,"index":1681},"code":"    it('should remove active class if button has it', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      expect(button.className).toContain('medium-editor-button-active');\n      fireEvent(button, 'click');\n      expect(button.className).not.toContain('medium-editor-button-active');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should execute the button action","suites":["Buttons TestCase","Button click"],"line":55,"updatePoint":{"line":55,"column":40,"index":2240},"code":"    it('should execute the button action', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      fireEvent(button, 'click');\n      expect(editor.execAction).toHaveBeenCalledWith('bold');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should be accesible via defaults property of the button prototype","suites":["Buttons TestCase","Button default config"],"line":67,"updatePoint":{"line":67,"column":73,"index":2803},"code":"    it('should be accesible via defaults property of the button prototype', function () {\n      expect(MediumEditor.extensions.button.prototype.defaults['bold']).toBeTruthy();\n      expect(MediumEditor.extensions.button.prototype.defaults['anchor']).toBeFalsy();\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should be check-able via static Button.isBuiltInButton() method","suites":["Buttons TestCase","Button default config"],"line":71,"updatePoint":{"line":71,"column":71,"index":3072},"code":"    it('should be check-able via static Button.isBuiltInButton() method', function () {\n      expect(MediumEditor.extensions.button.isBuiltInButton('bold')).toBe(true);\n      expect(MediumEditor.extensions.button.isBuiltInButton('anchor')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a set of config options","suites":["Buttons TestCase","Button constructor"],"line":77,"updatePoint":{"line":77,"column":45,"index":3360},"code":"    it('should accept a set of config options', function () {\n      var italicConfig = MediumEditor.extensions.button.prototype.defaults['italic'],\n        italicButton = new MediumEditor.extensions.button(italicConfig);\n      Object.keys(italicConfig).forEach(function (prop) {\n        expect(italicButton[prop]).toBe(italicConfig[prop]);\n      });\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a built-in button name","suites":["Buttons TestCase","Button constructor"],"line":84,"updatePoint":{"line":84,"column":44,"index":3717},"code":"    it('should accept a built-in button name', function () {\n      var italicButtonOne = new MediumEditor.extensions.button(MediumEditor.extensions.button.prototype.defaults['italic']),\n        italicButtonTwo = new MediumEditor.extensions.button('italic');\n      expect(italicButtonOne).toEqual(italicButtonTwo);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should support overriding defaults","suites":["Buttons TestCase","Button options"],"line":91,"updatePoint":{"line":91,"column":42,"index":4086},"code":"    it('should support overriding defaults', function () {\n      this.el.innerHTML = '<h2>lorem</h2><h3>ipsum</h3>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold', {\n              name: 'h1',\n              action: 'append-h2',\n              aria: 'fake h1',\n              tagNames: ['h2'],\n              contentDefault: '<b>H1</b>',\n              classList: ['customClassName'],\n              attrs: {\n                'data-custom-attr': 'custom-value'\n              }\n            }, {\n              name: 'h2',\n              getAction: function () {\n                return 'append-h3';\n              },\n              getAria: function () {\n                return 'fake h2';\n              },\n              getTagNames: function () {\n                return ['h3'];\n              },\n              contentDefault: '<b>H2</b>'\n            }]\n          }\n        }),\n        headerOneButton = editor.getExtensionByName('h1'),\n        headerTwoButton = editor.getExtensionByName('h2'),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('button').length).toBe(3);\n      var button = toolbar.getToolbarElement().querySelector('.medium-editor-action-h1'),\n        buttonTwo = toolbar.getToolbarElement().querySelector('.medium-editor-action-h2');\n      expect(button).toBe(headerOneButton.getButton());\n      expect(button.getAttribute('aria-label')).toBe('fake h1');\n      expect(button.getAttribute('title')).toBe('fake h1');\n      expect(button.getAttribute('data-custom-attr')).toBe('custom-value');\n      expect(button.classList.contains('customClassName')).toBe(true);\n      expect(button.innerHTML).toBe('<b>H1</b>');\n      selectElementContentsAndFire(editor.elements[0].querySelector('h2').firstChild);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo).toBe(headerTwoButton.getButton());\n      expect(buttonTwo.getAttribute('aria-label')).toBe('fake h2');\n      expect(buttonTwo.getAttribute('title')).toBe('fake h2');\n      expect(buttonTwo.innerHTML).toBe('<b>H2</b>');\n      selectElementContentsAndFire(editor.elements[0].querySelector('h3'), {\n        eventToFire: 'mouseup'\n      });\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should have aria-label and title attributes set","suites":["Buttons TestCase","Buttons with various labels"],"line":208,"updatePoint":{"line":208,"column":55,"index":8807},"code":"    it('should have aria-label and title attributes set', function () {\n      var button,\n        editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: allButtons\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      Object.keys(customLabels).forEach(function (buttonName) {\n        button = toolbar.getToolbarElement().querySelector('.medium-editor-action-' + buttonName);\n        expect(button).not.toBeUndefined();\n        expect(button.getAttribute('aria-label')).toBe(customLabels[buttonName]);\n        expect(button.getAttribute('title')).toBe(customLabels[buttonName]);\n      });\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should contain default content if no custom labels are provided","suites":["Buttons TestCase","Buttons with various labels"],"line":223,"updatePoint":{"line":223,"column":71,"index":9481},"code":"    it('should contain default content if no custom labels are provided', function () {\n      var button,\n        editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: allButtons\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('button').length).toBe(allButtons.length);\n      selectElementContentsAndFire(editor.elements[0]);\n      Object.keys(defaultLabels).forEach(function (buttonName) {\n        button = toolbar.getToolbarElement().querySelector('.medium-editor-action-' + buttonName);\n        expect(button).not.toBeUndefined();\n        expect(button.innerHTML).toBe(defaultLabels[buttonName].label);\n      });\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should contain fontawesome labels and execute the button action when clicked","suites":["Buttons TestCase","Buttons with various labels"],"line":239,"updatePoint":{"line":239,"column":84,"index":10239},"code":"    it('should contain fontawesome labels and execute the button action when clicked', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var action,\n        button,\n        editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: allButtons\n          },\n          buttonLabels: 'fontawesome'\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('button').length).toBe(allButtons.length);\n      selectElementContentsAndFire(editor.elements[0]);\n      Object.keys(fontAwesomeLabels).forEach(function (buttonName) {\n        action = defaultLabels[buttonName].action;\n        button = toolbar.getToolbarElement().querySelector('.medium-editor-action-' + buttonName);\n        expect(button).not.toBeUndefined();\n        fireEvent(button, 'click');\n        if (action) {\n          expect(editor.execAction).toHaveBeenCalledWith(action);\n        }\n        expect(button.innerHTML).toBe(fontAwesomeLabels[buttonName]);\n      });\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should contain custom labels and execute the button action when clicked","suites":["Buttons TestCase","Buttons with various labels"],"line":263,"updatePoint":{"line":263,"column":79,"index":11285},"code":"    it('should contain custom labels and execute the button action when clicked', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var action,\n        button,\n        editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: customButtons\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('button').length).toBe(allButtons.length);\n      selectElementContentsAndFire(editor.elements[0]);\n      Object.keys(customLabels).forEach(function (buttonName) {\n        action = defaultLabels[buttonName].action;\n        button = toolbar.getToolbarElement().querySelector('.medium-editor-action-' + buttonName);\n        expect(button).not.toBeUndefined();\n        fireEvent(button, 'click');\n        if (action) {\n          expect(editor.execAction).toHaveBeenCalledWith(action);\n        }\n        expect(button.innerHTML).toBe(customLabels[buttonName]);\n      });\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should call the document.execCommand method when button action is append","suites":["Buttons TestCase","AppendEl"],"line":288,"updatePoint":{"line":288,"column":80,"index":12329},"code":"    it('should call the document.execCommand method when button action is append', function () {\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      spyOn(document, 'execCommand');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"append-h3\"]');\n      fireEvent(button, 'click');\n      if (isIE()) {\n        expect(document.execCommand).toHaveBeenCalledWith('formatBlock', false, '<h3>');\n      } else {\n        expect(document.execCommand).toHaveBeenCalledWith('formatBlock', false, 'h3');\n      }\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should create an h3 element when h3 is clicked","suites":["Buttons TestCase","AppendEl"],"line":302,"updatePoint":{"line":302,"column":54,"index":12966},"code":"    it('should create an h3 element when h3 is clicked', function () {\n      this.el.innerHTML = '<p><b>lorem ipsum</b></p>';\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"append-h3\"]');\n      fireEvent(button, 'click');\n      // depending on the styling you have,\n      // IE might strip the <b> out when it applies the H3 here.\n      // so, make the <b> match optional in the output:\n      expect(this.el.innerHTML).toMatch(/<h3>(<b>)?lorem ipsum(<\\/b>)?<\\/h3>/);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should get back to a p element if parent element is the same as the action","suites":["Buttons TestCase","AppendEl"],"line":315,"updatePoint":{"line":315,"column":82,"index":13674},"code":"    it('should get back to a p element if parent element is the same as the action', function () {\n      this.el.innerHTML = '<h3><b>lorem ipsum</b></h3>';\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"append-h3\"]');\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toBe('<p><b>lorem ipsum</b></p>');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should add a special class to the first and last buttons","suites":["Buttons TestCase","First and Last"],"line":327,"updatePoint":{"line":327,"column":64,"index":14248},"code":"    it('should add a special class to the first and last buttons', function () {\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        buttons = toolbar.getToolbarElement().querySelectorAll('button');\n      expect(buttons[0].className).toContain('medium-editor-button-first');\n      expect(buttons[1].className).not.toContain('medium-editor-button-first');\n      expect(buttons[1].className).not.toContain('medium-editor-button-last');\n      expect(buttons[buttons.length - 1].className).toContain('medium-editor-button-last');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Bold"],"line":338,"updatePoint":{"line":338,"column":72,"index":14893},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      this.el.innerHTML = '<strong>lorem ipsum</strong>';\n      selectElementContentsAndFire(editor.elements[0], {\n        eventToFire: 'mouseup'\n      });\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection is bold and queryCommandState fails","suites":["Buttons TestCase","Bold"],"line":357,"updatePoint":{"line":357,"column":84,"index":15814},"code":"    it('button should be active if the selection is bold and queryCommandState fails', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      spyOn(document, 'queryCommandState').and.throwError('DOM ERROR');\n      this.el.innerHTML = '<b><i><u>lorem ipsum</u></i></b>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('u'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active for other cases when text is bold","suites":["Buttons TestCase","Bold"],"line":372,"updatePoint":{"line":372,"column":65,"index":16582},"code":"    it('button should be active for other cases when text is bold', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]');\n      this.el.innerHTML = '<p><span id=\"bold-span\" style=\"font-weight: bold\">lorem ipsum</span></p>';\n      selectElementContentsAndFire(document.getElementById('bold-span'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      this.el.innerHTML = stripAttrIfEmpty(this.el, 'style');\n\n      // style=\"font-weight: bold\" prevents IE9+10 from doing anything when 'bold' is triggered\n      // but it should work in other browsers\n      expect(!isOldIE() && button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(!isOldIE() && this.el.innerHTML !== '<p><span id=\"bold-span\">lorem ipsum</span></p>').toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should call the execCommand for native actions","suites":["Buttons TestCase","Italics"],"line":393,"updatePoint":{"line":393,"column":54,"index":17679},"code":"    it('should call the execCommand for native actions', function () {\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      spyOn(document, 'execCommand').and.callThrough();\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"italic\"]');\n      fireEvent(button, 'click');\n      expect(document.execCommand).toHaveBeenCalled();\n      // IE won't generate an `<i>` tag here. it generates an `<em>`:\n      expect(this.el.innerHTML).toMatch(/(<i>|<em>)lorem ipsum(<\\/i>|<\\/em>)/);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Italics"],"line":405,"updatePoint":{"line":405,"column":72,"index":18335},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"italic\"]');\n      this.el.innerHTML = '<i>lorem ipsum</i>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      this.el.innerHTML = '<em>lorem ipsum</em>';\n      selectElementContentsAndFire(editor.elements[0], {\n        eventToFire: 'mouseup'\n      });\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection is italic and queryCommandState fails","suites":["Buttons TestCase","Italics"],"line":424,"updatePoint":{"line":424,"column":86,"index":19254},"code":"    it('button should be active if the selection is italic and queryCommandState fails', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"italic\"]');\n      spyOn(document, 'queryCommandState').and.throwError('DOM ERROR');\n      this.el.innerHTML = '<i><b><u>lorem ipsum</u></b></i>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('u'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active for other cases when text is italic","suites":["Buttons TestCase","Italics"],"line":439,"updatePoint":{"line":439,"column":67,"index":20028},"code":"    it('button should be active for other cases when text is italic', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"italic\"]');\n      this.el.innerHTML = '<p><span id=\"italic-span\" style=\"font-style: italic\">lorem ipsum</span></p>';\n      selectElementContentsAndFire(document.getElementById('italic-span'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      this.el.innerHTML = stripAttrIfEmpty(this.el, 'style');\n\n      // style=\"font-style: italic\" prevents IE9+10 from doing anything when 'italic' is triggered\n      // but it should work in other browsers\n      expect(!isOldIE() && button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(!isOldIE() && this.el.innerHTML !== '<p><span id=\"italic-span\">lorem ipsum</span></p>').toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Underline"],"line":460,"updatePoint":{"line":460,"column":72,"index":21159},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['underline']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"underline\"]');\n      this.el.innerHTML = '<u>lorem ipsum</u>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(this.el.innerHTML).toBe('lorem ipsum');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection is underlined and queryCommandState fails","suites":["Buttons TestCase","Underline"],"line":475,"updatePoint":{"line":475,"column":90,"index":21910},"code":"    it('button should be active if the selection is underlined and queryCommandState fails', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['underline']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"underline\"]');\n      spyOn(document, 'queryCommandState').and.throwError('DOM ERROR');\n      this.el.innerHTML = '<u><b><i>lorem ipsum</i></b></u>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('i'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active for other cases when text is underlined","suites":["Buttons TestCase","Underline"],"line":490,"updatePoint":{"line":490,"column":71,"index":22694},"code":"    it('button should be active for other cases when text is underlined', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['underline']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"underline\"]');\n      this.el.innerHTML = '<p><span id=\"underline-span\" style=\"text-decoration: underline\">lorem ipsum</span></p>';\n      selectElementContentsAndFire(document.getElementById('underline-span'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      this.el.innerHTML = stripAttrIfEmpty(this.el, 'style');\n\n      // style=\"text-decoration: underline\" prevents IE9+10 from doing anything when 'underline' is triggered\n      // but it should work in other browsers\n      expect(!isOldIE() && button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(!isOldIE() && this.el.innerHTML !== '<p><span id=\"underline-span\">lorem ipsum</span></p>').toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Strikethrough"],"line":511,"updatePoint":{"line":511,"column":72,"index":23863},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['strikethrough']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"strikethrough\"]');\n      this.el.innerHTML = '<s>lorem ipsum</s>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(this.el.innerHTML).toBe('lorem ipsum');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection is strikethrough and queryCommandState fails","suites":["Buttons TestCase","Strikethrough"],"line":526,"updatePoint":{"line":526,"column":93,"index":24625},"code":"    it('button should be active if the selection is strikethrough and queryCommandState fails', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['strikethrough']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"strikethrough\"]');\n      spyOn(document, 'queryCommandState').and.throwError('DOM ERROR');\n      this.el.innerHTML = '<s><b><i>lorem ipsum</i></b></s>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('i'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active for other cases when text is strikethrough","suites":["Buttons TestCase","Strikethrough"],"line":541,"updatePoint":{"line":541,"column":74,"index":25420},"code":"    it('button should be active for other cases when text is strikethrough', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['strikethrough']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"strikethrough\"]');\n      this.el.innerHTML = '<p><span id=\"strike-span\" style=\"text-decoration: line-through\">lorem ipsum</span></p>';\n      selectElementContentsAndFire(document.getElementById('strike-span'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      this.el.innerHTML = stripAttrIfEmpty(this.el, 'style');\n\n      // style=\"text-decoration: line-through\" prevents IE9+10 from doing anything when 'strikethrough' is triggered\n      // but it should work in other browsers\n      expect(!isOldIE() && button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(!isOldIE() && this.el.innerHTML !== '<p><span id=\"strike-span\">lorem ipsum</span></p>').toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Superscript"],"line":562,"updatePoint":{"line":562,"column":72,"index":26596},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['superscript']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"superscript\"]');\n      this.el.innerHTML = '<sup>lorem ipsum</sub>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(this.el.innerHTML).toBe('lorem ipsum');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Subscript"],"line":579,"updatePoint":{"line":579,"column":72,"index":27381},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['subscript']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"subscript\"]');\n      this.el.innerHTML = '<sub>lorem ipsum</sub>';\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(this.el.innerHTML).toBe('lorem ipsum');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Anchor"],"line":596,"updatePoint":{"line":596,"column":72,"index":28159},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['anchor']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      this.el.innerHTML = '<p><span id=\"span-lorem\">lorem</span> <a href=\"#\" id=\"link\">ipsum</a></p>';\n      selectElementContentsAndFire(document.getElementById('link'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      selectElementContentsAndFire(document.getElementById('span-lorem'), {\n        eventToFire: 'mouseup'\n      });\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should call the anchorExtension.showForm() method","suites":["Buttons TestCase","Anchor"],"line":612,"updatePoint":{"line":612,"column":64,"index":28980},"code":"    it('button should call the anchorExtension.showForm() method', function () {\n      spyOn(MediumEditor.extensions.anchor.prototype, 'showForm');\n      var button,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"createLink\"]');\n      fireEvent(button, 'click');\n      expect(editor.getExtensionByName('anchor').showForm).toHaveBeenCalled();\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should not be active if the selection is not inside a blockquote","suites":["Buttons TestCase","Quote"],"line":624,"updatePoint":{"line":624,"column":79,"index":29572},"code":"    it('button should not be active if the selection is not inside a blockquote', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['quote']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"append-blockquote\"]');\n      this.el.innerHTML = '<span id=\"span-lorem\">lorem ipsum</span>';\n      selectElementContentsAndFire(document.getElementById('span-lorem'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      fireEvent(button, 'click');\n      selectElementContentsAndFire(document.getElementById('span-lorem'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should create an image","suites":["Buttons TestCase","Image"],"line":641,"updatePoint":{"line":641,"column":30,"index":30370},"code":"    it('should create an image', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['image']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"image\"]');\n      spyOn(document, 'execCommand').and.callThrough();\n      this.el.innerHTML = '<span id=\"span-image\">http://i.imgur.com/twlXfUq.jpg  \\n\\n</span>';\n      selectElementContentsAndFire(document.getElementById('span-image'));\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toContain('<img src=\"http://i.imgur.com/twlXfUq.jpg\">');\n      expect(document.execCommand).toHaveBeenCalledWith('insertImage', false, 'http://i.imgur.com/twlXfUq.jpg');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should create an evaluated html tag","suites":["Buttons TestCase","Html"],"line":658,"updatePoint":{"line":658,"column":43,"index":31209},"code":"    it('should create an evaluated html tag', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['html']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"html\"]');\n      spyOn(document, 'execCommand').and.callThrough();\n      this.el.innerHTML = '<span id=\"span-html\">&lt;iframe width=\"854\" height=\"480\" src=\"https://www.youtube.com/embed/QHH3iSeDBLo\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;  \\n\\n</span>';\n      selectElementContentsAndFire(document.getElementById('span-html'));\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toMatch(/<iframe(?: width=\"854\"| height=\"480\"| src=\"https:\\/\\/www.youtube.com\\/embed\\/QHH3iSeDBLo\"| frameborder=\"0\"| allowfullscreen=\"\"){5}>(<br>)?<\\/iframe>/gi);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","OrderedList"],"line":674,"updatePoint":{"line":674,"column":72,"index":32177},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['orderedlist', 'unorderedlist']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"insertorderedlist\"]');\n      this.el.innerHTML = '<ol><li id=\"li-lorem\">lorem ipsum</li></ol>';\n      selectElementContentsAndFire(document.getElementById('li-lorem'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      // Unordered list should not be active\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"insertunorderedlist\"]').classList.contains('medium-editor-button-active')).toBe(false);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      // Unordered list should not be active\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"insertunorderedlist\"]').classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","UnorderedList"],"line":694,"updatePoint":{"line":694,"column":72,"index":33380},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['unorderedlist', 'orderedlist']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"insertunorderedlist\"]');\n      this.el.innerHTML = '<ul><li id=\"li-lorem\">lorem ipsum</li></ul>';\n      selectElementContentsAndFire(document.getElementById('li-lorem'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      // Ordered list button should not be active\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"insertorderedlist\"]').classList.contains('medium-editor-button-active')).toBe(false);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n      // Ordered list button should not be active\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"insertorderedlist\"]').classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be active if the selection already has the element","suites":["Buttons TestCase","Pre"],"line":714,"updatePoint":{"line":714,"column":72,"index":34581},"code":"    it('button should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['pre']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"append-pre\"]');\n      this.el.innerHTML = '<pre><span id=\"span-lorem\">lorem ipsum</span></pre>';\n      selectElementContentsAndFire(document.getElementById('span-lorem'));\n      expect(button.classList.contains('medium-editor-button-active')).toBe(true);\n      fireEvent(button, 'click');\n      expect(button.classList.contains('medium-editor-button-active')).toBe(false);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"button should be activated based on text-align values","suites":["Buttons TestCase","Justify"],"line":730,"updatePoint":{"line":730,"column":61,"index":35339},"code":"    it('button should be activated based on text-align values', function () {\n      this.el.innerHTML = '<div><p id=\"justify-para-one\">lorem ipsum</p></div>';\n      document.body.style.setProperty('text-align', 'center');\n      try {\n        var editor = this.newMediumEditor('.editor', {\n            toolbar: {\n              buttons: ['justifyCenter', 'justifyRight']\n            }\n          }),\n          toolbar = editor.getExtensionByName('toolbar'),\n          rightButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyRight\"]'),\n          centerButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyCenter\"]');\n        selectElementContentsAndFire(document.getElementById('justify-para-one'));\n        expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n        expect(centerButton.classList.contains('medium-editor-button-active')).toBe(true);\n        fireEvent(rightButton, 'click');\n        expect(rightButton.classList.contains('medium-editor-button-active')).toBe(true);\n        expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      } finally {\n        document.body.style.removeProperty('text-align');\n      }\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"buttons should deactivate other justify buttons","suites":["Buttons TestCase","Justify"],"line":752,"updatePoint":{"line":752,"column":55,"index":36568},"code":"    it('buttons should deactivate other justify buttons', function () {\n      this.el.innerHTML = '<p id=\"justify-para-one\">lorem ipsum</p>' + '<p id=\"justify-para-two\" align=\"left\">lorem ipsum</p>' + '<p id=\"justify-para-three\" align=\"right\">lorem ipsum</p>' + '<p id=\"justify-para-four\" align=\"center\">lorem ipsum</p>' + '<p id=\"justify-para-five\" align=\"justify\">lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        leftButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyLeft\"]'),\n        rightButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyRight\"]'),\n        centerButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyCenter\"]'),\n        fullButton = toolbar.getToolbarElement().querySelector('[data-action=\"justifyFull\"]');\n\n      // First paragraph should have nothing activated (IE will select align-left)\n      selectElementContentsAndFire(document.getElementById('justify-para-one'));\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Trigger justify full, only it should be active\n      fireEvent(fullButton, 'click');\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(true);\n\n      // Second paragraph should have justifyLeft activated\n      selectElementContentsAndFire(document.getElementById('justify-para-two'), {\n        eventToFire: 'mouseup'\n      });\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Trigger justify center, only it should be active\n      fireEvent(centerButton, 'click');\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Third paragraph should have justifyRight activated\n      selectElementContentsAndFire(document.getElementById('justify-para-three'), {\n        eventToFire: 'mouseup'\n      });\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Trigger justify left, only it should be active\n      fireEvent(leftButton, 'click');\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Fourth paragraph should have justifyCenter activated\n      selectElementContentsAndFire(document.getElementById('justify-para-four'), {\n        eventToFire: 'mouseup'\n      });\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Trigger justify right, only it should be active\n      fireEvent(rightButton, 'click');\n      selectElementContentsAndFire(document.getElementById('justify-para-four'), {\n        eventToFire: 'mouseup'\n      });\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(false);\n\n      // Fifth paragraph should have justifyFull activated\n      selectElementContentsAndFire(document.getElementById('justify-para-five'), {\n        eventToFire: 'mouseup'\n      });\n      expect(leftButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(rightButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(centerButton.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(fullButton.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should unwrap basic things","suites":["Buttons TestCase","Remove Formatting"],"line":840,"updatePoint":{"line":840,"column":34,"index":42131},"code":"    it('should unwrap basic things', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['removeFormat']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"removeFormat\"]');\n      expect(button).toBeTruthy();\n      this.el.innerHTML = '<p>foo<b>bar</b><i>baz</i><strong>bam</strong></p>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('p'));\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toBe('<p>foobarbazbam</p>');\n      this.el.innerHTML = '<div><p><b>foo</b></p><p><i>bar</i></p><ul><li>on<b>e</b></li></ul></div>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('div'));\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toBe('<div><p>foo</p><p>bar</p><ul><li>one</li></ul></div>');\n\n      // TODO: IE does not unwrap something like <p><span style='color:red'>bar</span></p>\n      this.el.innerHTML = '<div><h2>b<i>a</i>r</h2><p><em><strong><u><sub><sup>foo</sup></sub></u></strong></em></p><pre>foo<i>bar</i>baz</pre></div>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('div'));\n      fireEvent(button, 'click');\n      expect(this.el.innerHTML).toBe('<div><h2>bar</h2><p>foo</p><pre>foobarbaz</pre></div>');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"buttons should be active if the selection already has the element","suites":["Buttons TestCase","Header"],"line":866,"updatePoint":{"line":866,"column":73,"index":43597},"code":"    it('buttons should be active if the selection already has the element', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['h3', 'h4']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        buttonOne = toolbar.getToolbarElement().querySelector('[data-action=\"append-h3\"]'),\n        buttonTwo = toolbar.getToolbarElement().querySelector('[data-action=\"append-h4\"]');\n      this.el.innerHTML = '<h2>lorem</h2><h3>ipsum</h3><h4>dolor</h4>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('h2'));\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      selectElementContentsAndFire(editor.elements[0].querySelector('h3'), {\n        eventToFire: 'mouseup'\n      });\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      selectElementContentsAndFire(editor.elements[0].querySelector('h4'), {\n        eventToFire: 'mouseup'\n      });\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"buttons should be active if the selection already custom defined element types","suites":["Buttons TestCase","Header"],"line":890,"updatePoint":{"line":890,"column":86,"index":44984},"code":"    it('buttons should be active if the selection already custom defined element types', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['h1', 'h5']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        buttonOne = toolbar.getToolbarElement().querySelector('[data-action=\"append-h1\"]'),\n        buttonTwo = toolbar.getToolbarElement().querySelector('[data-action=\"append-h5\"]');\n      expect(buttonOne).toBeTruthy();\n      expect(buttonTwo).toBeTruthy();\n      this.el.innerHTML = '<h1>lorem</h1><h3>ipsum</h3><h5>dolor</h5>';\n      selectElementContentsAndFire(editor.elements[0].querySelector('h1'));\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      selectElementContentsAndFire(editor.elements[0].querySelector('h3'), {\n        eventToFire: 'mouseup'\n      });\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      selectElementContentsAndFire(editor.elements[0].querySelector('h5'), {\n        eventToFire: 'mouseup'\n      });\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"buttons should convert between element types and \"undo\" back to original type","suites":["Buttons TestCase","Header"],"line":916,"updatePoint":{"line":916,"column":85,"index":46446},"code":"    it('buttons should convert between element types and \"undo\" back to original type', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['h1', 'h4']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        buttonOne = toolbar.getToolbarElement().querySelector('[data-action=\"append-h1\"]'),\n        buttonTwo = toolbar.getToolbarElement().querySelector('[data-action=\"append-h4\"]');\n      this.el.innerHTML = '<p>lorem ipsum dolor</p>';\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      fireEvent(buttonOne, 'click');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(editor.elements[0].innerHTML).toBe('<h1>lorem ipsum dolor</h1>');\n      fireEvent(buttonTwo, 'click');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(true);\n      expect(editor.elements[0].innerHTML).toBe('<h4>lorem ipsum dolor</h4>');\n      fireEvent(buttonTwo, 'click');\n      expect(buttonOne.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(buttonTwo.classList.contains('medium-editor-button-active')).toBe(false);\n      expect(editor.elements[0].innerHTML).toBe('<p>lorem ipsum dolor</p>');\n    });","file":"buttons.spec.js","skipped":false,"dir":"spec"},{"name":"should remove paragraphs when a list is inserted inside of it","suites":["Content TestCase"],"line":17,"updatePoint":{"line":17,"column":67,"index":513},"code":"  it('should remove paragraphs when a list is inserted inside of it', function () {\n    this.el.innerHTML = '<p>lorem ipsum<ul><li>dolor</li></ul></p>';\n    var editor = this.newMediumEditor('.editor', {\n        toolbar: {\n          buttons: ['orderedlist']\n        }\n      }),\n      target = editor.elements[0].querySelector('p'),\n      toolbar = editor.getExtensionByName('toolbar'),\n      range,\n      sel;\n    selectElementContentsAndFire(target);\n    fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"insertorderedlist\"]'), 'click');\n    expect(this.el.innerHTML).toMatch(/^<ol><li>lorem ipsum(<br>)?<\\/li><\\/ol><ul><li>dolor<\\/li><\\/ul>?/);\n    sel = document.getSelection();\n    expect(sel.rangeCount).toBe(1);\n    range = sel.getRangeAt(0);\n\n    // Chrome and Safari collapse the range at the end of the 'lorem ipsum' li\n    // Firefox, IE, and Edge select the 'lorem ipsum' contents\n    if (range.collapsed) {\n      expect(range.startContainer.nodeValue).toBe('lorem ipsum');\n      expect(range.endContainer.nodeValue).toBe('lorem ipsum');\n      expect(range.startOffset).toBe('lorem ipsum'.length);\n      expect(range.endOffset).toBe('lorem ipsum'.length);\n    } else {\n      expect(range.toString()).toBe('lorem ipsum');\n      expect(range.startContainer.nodeName.toLowerCase()).toBe('li');\n      expect(range.endContainer.nodeName.toLowerCase()).toBe('li');\n      expect(range.startOffset).toBe(0);\n      expect(range.endOffset).toBe(1);\n    }\n  });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should indent when within an <li>","suites":["Content TestCase","when the tab key is pressed"],"line":51,"updatePoint":{"line":51,"column":41,"index":2022},"code":"    it('should indent when within an <li>', function () {\n      this.el.innerHTML = '<ol><li>lorem</li><li>ipsum</li></ol>';\n      var editor = this.newMediumEditor('.editor'),\n        target = editor.elements[0].querySelector('ol').lastChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      selectElementContents(target);\n      fireEvent(target, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.TAB\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('indent', false, null);\n      // Firefox (annoyingly) throws a NS_ERROR_FAILURE when attempting to mimic this through a test case\n      // I was unable to find a workaround, and this works fine in a browser\n      // so let's just skip skip the innerHTML check in firefox\n      if (!isFirefox()) {\n        expect(this.el.innerHTML).toBe('<ol><li>lorem</li><ol><li>ipsum</li></ol></ol>');\n      }\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"with shift key, should outdent when within an <li>","suites":["Content TestCase","when the tab key is pressed"],"line":68,"updatePoint":{"line":68,"column":58,"index":2929},"code":"    it('with shift key, should outdent when within an <li>', function () {\n      this.el.innerHTML = '<ol><li>lorem</li><ol><li><span><span>ipsum</span></span></li></ol></ol>';\n      var editor = this.newMediumEditor('.editor'),\n        target = editor.elements[0].querySelector('ol').lastChild.firstChild.firstChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      selectElementContents(target);\n      fireEvent(target, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.TAB,\n        shiftKey: true\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('outdent', false, null);\n      // Firefox (annoyingly) throws a NS_ERROR_FAILURE when attempting to mimic this through a test case\n      // I was unable to find a workaround, and this works fine in a browser\n      // so let's just skip skip the innerHTML check in firefox\n      if (!isFirefox()) {\n        // Webkit removes the nested spans, IE does not\n        expect(this.el.innerHTML).toMatch(/<ol><li>lorem<\\/li><li>(<span><span>)?ipsum(<br>|<\\/span><\\/span>)<\\/li><\\/ol>/);\n      }\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should insert a space when within a pre node","suites":["Content TestCase","when the tab key is pressed"],"line":87,"updatePoint":{"line":87,"column":52,"index":4003},"code":"    it('should insert a space when within a pre node', function () {\n      this.el.innerHTML = '<pre>lorem ipsum</pre>';\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('pre');\n      placeCursorInsideElement(targetNode, 0);\n      fireEvent(targetNode, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.TAB\n      });\n      expect(this.el.innerHTML).toBe('<pre>    lorem ipsum</pre>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not prevent new spaces from being inserted when disableExtraSpaces options is false","suites":["Content TestCase","when the space key is pressed"],"line":99,"updatePoint":{"line":99,"column":98,"index":4569},"code":"    it('should not prevent new spaces from being inserted when disableExtraSpaces options is false', function () {\n      this.el.innerHTML = '<p>lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableExtraSpaces: false\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.SPACE\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new spaces from being inserted when disableExtraSpaces options is true","suites":["Content TestCase","when the space key is pressed"],"line":113,"updatePoint":{"line":113,"column":93,"index":5193},"code":"    it('should prevent new spaces from being inserted when disableExtraSpaces options is true', function () {\n      this.el.innerHTML = '<p>lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableExtraSpaces: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.SPACE\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should allow one space at the end of a line when disableExtraSpaces options is true","suites":["Content TestCase","when the space key is pressed"],"line":127,"updatePoint":{"line":127,"column":91,"index":5810},"code":"    it('should allow one space at the end of a line when disableExtraSpaces options is true', function () {\n      this.el.innerHTML = '<p>lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableExtraSpaces: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0].getElementsByTagName('p')[0], 1);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.SPACE\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent more spaces from being inserted at the end of a line when disableExtraSpaces options is true","suites":["Content TestCase","when the space key is pressed"],"line":141,"updatePoint":{"line":141,"column":115,"index":6484},"code":"    it('should prevent more spaces from being inserted at the end of a line when disableExtraSpaces options is true', function () {\n      this.el.innerHTML = '<p>lorem ipsum    <br /></p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableExtraSpaces: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0].getElementsByTagName('p')[0], 1);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.SPACE\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent more spaces from being inserted when a space already exists and disableExtraSpaces options is true","suites":["Content TestCase","when the space key is pressed"],"line":157,"updatePoint":{"line":157,"column":121,"index":7253},"code":"    it('should prevent more spaces from being inserted when a space already exists and disableExtraSpaces options is true', function () {\n      this.el.innerHTML = '<p>lorem<span> ipsum</span></p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableExtraSpaces: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0].getElementsByTagName('p')[0], 1);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.SPACE\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new lines from being inserted when disableReturn options is true","suites":["Content TestCase","when the enter key is pressed"],"line":173,"updatePoint":{"line":173,"column":87,"index":7972},"code":"    it('should prevent new lines from being inserted when disableReturn options is true', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      var editor = this.newMediumEditor('.editor', {\n          disableReturn: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new lines from being inserted when data-disable-return is defined","suites":["Content TestCase","when the enter key is pressed"],"line":187,"updatePoint":{"line":187,"column":88,"index":8574},"code":"    it('should prevent new lines from being inserted when data-disable-return is defined', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      this.el.setAttribute('data-disable-return', true);\n      var editor = this.newMediumEditor('.editor'),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should allow to get out of list when enter is pressed twice","suites":["Content TestCase","when the enter key is pressed"],"line":200,"updatePoint":{"line":200,"column":67,"index":9169},"code":"    it('should allow to get out of list when enter is pressed twice', function () {\n      this.el.innerHTML = '<li><br></li>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].querySelector('li'),\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should allow a line to be added when pressed enter at end of the <p> tag when disableDoubleReturn is true and contains <br> as the previous sibling","suites":["Content TestCase","when the enter key is pressed"],"line":215,"updatePoint":{"line":215,"column":155,"index":9851},"code":"    it('should allow a line to be added when pressed enter at end of the <p> tag when disableDoubleReturn is true and contains <br> as the previous sibling', function () {\n      this.el.innerHTML = '<p>it is a test</p><br><p>because tests are great..!!</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        targetNode = editor.elements[0].querySelector('p:last-child'),\n        evt;\n      placeCursorInsideElement(targetNode, 0);\n      evt = prepareEvent(targetNode, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, targetNode, 'keydown');\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted when disableDoubleReturn is true","suites":["Content TestCase","when the enter key is pressed"],"line":230,"updatePoint":{"line":230,"column":97,"index":10565},"code":"    it('should prevent consecutive new lines from being inserted when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p><br></p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].querySelector('p'),\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted when data-disable-double-return is defined","suites":["Content TestCase","when the enter key is pressed"],"line":245,"updatePoint":{"line":245,"column":107,"index":11192},"code":"    it('should prevent consecutive new lines from being inserted when data-disable-double-return is defined', function () {\n      this.el.innerHTML = '<p><br></p>';\n      this.el.setAttribute('data-disable-double-return', true);\n      var editor = this.newMediumEditor('.editor'),\n        p = editor.elements[0].querySelector('p'),\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted inside a sentence when disableDoubleReturn is true","suites":["Content TestCase","when the enter key is pressed"],"line":259,"updatePoint":{"line":259,"column":115,"index":11842},"code":"    it('should prevent consecutive new lines from being inserted inside a sentence when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p>hello</p><p><br></p><p>word</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].getElementsByTagName('p')[2],\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should call formatBlock when inside a non-header and non-anchor","suites":["Content TestCase","when the enter key is pressed"],"line":274,"updatePoint":{"line":274,"column":71,"index":12466},"code":"    it('should call formatBlock when inside a non-header and non-anchor', function () {\n      this.el.innerHTML = '<p>lorem <span>ipsum</span></p>';\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('span').firstChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(targetNode, targetNode.textContent.length - 1);\n      fireEvent(targetNode, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('formatBlock', false, 'p');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not call formatBlock when inside an anchor","suites":["Content TestCase","when the enter key is pressed"],"line":285,"updatePoint":{"line":285,"column":57,"index":13052},"code":"    it('should not call formatBlock when inside an anchor', function () {\n      var html = '<p>lorem <a href=\"#\">ipsum</a></p>';\n      this.el.innerHTML = html;\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('a').firstChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(targetNode, targetNode.textContent.length - 1);\n      fireEvent(targetNode, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENETER\n      });\n      expect(document.execCommand).not.toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe(html);\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not call formatBlock when inside a figCaption","suites":["Content TestCase","when the enter key is pressed"],"line":300,"updatePoint":{"line":300,"column":60,"index":13742},"code":"    it('should not call formatBlock when inside a figCaption', function () {\n      var html = '<figure><img src=\"../demo/img/medium-editor.jpg\"><figcaption>ipsum</figcaption></figure>';\n      this.el.innerHTML = html;\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('figCaption').firstChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(targetNode, targetNode.textContent.length - 1);\n      fireEvent(targetNode, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENETER\n      });\n      expect(document.execCommand).not.toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe(html);\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not call formatBlock when inside a header","suites":["Content TestCase","when the enter key is pressed"],"line":313,"updatePoint":{"line":313,"column":56,"index":14433},"code":"    it('should not call formatBlock when inside a header', function () {\n      var html = '<h1>lorem ipsum</h1>';\n      this.el.innerHTML = html;\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('h1').firstChild;\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(targetNode, targetNode.textContent.length - 1);\n      fireEvent(targetNode, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENETER\n      });\n      expect(document.execCommand).not.toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe(html);\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"with ctrl key, should not call formatBlock","suites":["Content TestCase","when the enter key is pressed"],"line":326,"updatePoint":{"line":326,"column":50,"index":15042},"code":"    it('with ctrl key, should not call formatBlock', function () {\n      this.el.innerHTML = '<p>lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor'),\n        p = editor.elements[0].querySelector('p');\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(p, 0);\n      fireEvent(p, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER,\n        ctrlKey: true\n      });\n      expect(document.execCommand).not.toHaveBeenCalledWith('formatBlock', false, 'p');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"inside an anchor the anchors should be unlinked","suites":["Content TestCase","when the enter key is pressed"],"line":338,"updatePoint":{"line":338,"column":55,"index":15567},"code":"    it('inside an anchor the anchors should be unlinked', function () {\n      this.el.innerHTML = '<a href=\"#\">test</a>';\n      var editor = this.newMediumEditor('.editor'),\n        target = editor.elements[0].querySelector('a');\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(target, 1);\n      fireEvent(target, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('unlink', false, null);\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"at the end of the blockquote, p tag should be created next, not blockquote","suites":["Content TestCase","when the enter key is pressed","within a blockquote element"],"line":350,"updatePoint":{"line":350,"column":84,"index":16165},"code":"      it('at the end of the blockquote, p tag should be created next, not blockquote', function () {\n        this.el.innerHTML = '<blockquote>lorem ipsum</blockquote>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('blockquote').firstChild;\n        placeCursorInsideElement(target, target.textContent.length);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.ENTER\n        });\n        expect(this.el.innerHTML).toBe('<blockquote>lorem ipsum</blockquote><p><br></p>');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"NOT at the start of the blockqoute, no formatting should be changed","suites":["Content TestCase","when the enter key is pressed","within a blockquote element"],"line":360,"updatePoint":{"line":360,"column":77,"index":16731},"code":"      it('NOT at the start of the blockqoute, no formatting should be changed', function () {\n        this.el.innerHTML = '<blockquote>lorem ipsum</blockquote>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('blockquote').firstChild;\n        placeCursorInsideElement(target, 0);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.ENTER\n        });\n        expect(this.el.innerHTML).toBe('<blockquote>lorem ipsum</blockquote>');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new lines from being inserted when disableReturn options is true","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":373,"updatePoint":{"line":373,"column":87,"index":17353},"code":"    it('should prevent new lines from being inserted when disableReturn options is true', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      var editor = this.newMediumEditor('.editor', {\n          disableReturn: true\n        }),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        ctrlKey: true,\n        keyCode: MediumEditor.util.keyCode.M\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new lines from being inserted when data-disable-return is defined","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":388,"updatePoint":{"line":388,"column":88,"index":17974},"code":"    it('should prevent new lines from being inserted when data-disable-return is defined', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      this.el.setAttribute('data-disable-return', true);\n      var editor = this.newMediumEditor('.editor'),\n        evt;\n      placeCursorInsideElement(editor.elements[0], 0);\n      evt = prepareEvent(editor.elements[0], 'keydown', {\n        ctrlKey: true,\n        keyCode: MediumEditor.util.keyCode.M\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, editor.elements[0], 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted when disableDoubleReturn is true","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":402,"updatePoint":{"line":402,"column":97,"index":18618},"code":"    it('should prevent consecutive new lines from being inserted when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p><br></p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].querySelector('p'),\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        ctrlKey: true,\n        keyCode: MediumEditor.util.keyCode.M\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted when data-disable-double-return is defined","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":418,"updatePoint":{"line":418,"column":107,"index":19264},"code":"    it('should prevent consecutive new lines from being inserted when data-disable-double-return is defined', function () {\n      this.el.innerHTML = '<p><br></p>';\n      this.el.setAttribute('data-disable-double-return', true);\n      var editor = this.newMediumEditor('.editor'),\n        p = editor.elements[0].querySelector('p'),\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        ctrlKey: true,\n        keyCode: MediumEditor.util.keyCode.M\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent consecutive new lines from being inserted inside a sentence when disableDoubleReturn is true","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":433,"updatePoint":{"line":433,"column":115,"index":19933},"code":"    it('should prevent consecutive new lines from being inserted inside a sentence when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p>hello</p><p><br></p><p>word</p>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].getElementsByTagName('p')[2],\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        ctrlKey: true,\n        keyCode: MediumEditor.util.keyCode.M\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should add a new line when selected node is an h2/h3 tag with text in it and when disableDoubleReturn is true","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":449,"updatePoint":{"line":449,"column":117,"index":20622},"code":"    it('should add a new line when selected node is an h2/h3 tag with text in it and when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p>lorem</p><h2>ipsum<br></h2>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].getElementsByTagName('h2')[0],\n        evt;\n      placeCursorInsideElement(p, 0);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should prevent new line being added when selected node is an empty h2/h3 tag and when disableDoubleReturn is true","suites":["Content TestCase","when the ctrl key and m key is pressed"],"line":464,"updatePoint":{"line":464,"column":121,"index":21297},"code":"    it('should prevent new line being added when selected node is an empty h2/h3 tag and when disableDoubleReturn is true', function () {\n      this.el.innerHTML = '<p>lorem</p><h2><br></h2>';\n      var editor = this.newMediumEditor('.editor', {\n          disableDoubleReturn: true\n        }),\n        p = editor.elements[0].getElementsByTagName('h2')[0],\n        evt;\n      placeCursorInsideElement(p, 1);\n      evt = prepareEvent(p, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      spyOn(evt, 'preventDefault').and.callThrough();\n      firePreparedEvent(evt, p, 'keydown');\n      expect(evt.preventDefault).toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe('<p>lorem</p><h2><br></h2>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"at the start of the blockquote, the blockquote tag should be replaced with a p tag","suites":["Content TestCase","when backspace is pressed","within a blockquote element"],"line":483,"updatePoint":{"line":483,"column":92,"index":22119},"code":"      it('at the start of the blockquote, the blockquote tag should be replaced with a p tag', function () {\n        this.el.innerHTML = '<blockquote>lorem ipsum</blockquote>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('blockquote');\n        placeCursorInsideElement(target, 0);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.BACKSPACE\n        });\n        expect(this.el.innerHTML).toBe('<p>lorem ipsum</p>');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"NOT at the start of the blockqoute, no formatting should be changed","suites":["Content TestCase","when backspace is pressed","within a blockquote element"],"line":493,"updatePoint":{"line":493,"column":77,"index":22625},"code":"      it('NOT at the start of the blockqoute, no formatting should be changed', function () {\n        this.el.innerHTML = '<blockquote>lorem ipsum</blockquote>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('blockquote');\n        placeCursorInsideElement(target, 1);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.BACKSPACE\n        });\n        expect(this.el.innerHTML).toBe('<blockquote>lorem ipsum</blockquote>');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should insert a paragraph before the list if it is the first element in the editor","suites":["Content TestCase","when backspace is pressed","within an empty first list item"],"line":505,"updatePoint":{"line":505,"column":92,"index":23234},"code":"      it('should insert a paragraph before the list if it is the first element in the editor', function () {\n        this.el.innerHTML = '<ul><li></li><li>lorem ipsum</li></ul>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('li'),\n          range;\n        placeCursorInsideElement(target, 0);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.BACKSPACE\n        });\n        expect(this.el.innerHTML).toBe('<p><br></p><ul><li>lorem ipsum</li></ul>');\n        range = document.getSelection().getRangeAt(0);\n        expect(range.commonAncestorContainer.nodeName.toLowerCase()).toBe('p');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not insert a paragraph before the list if it is NOT the first element in the editor","suites":["Content TestCase","when backspace is pressed","within an empty first list item"],"line":518,"updatePoint":{"line":518,"column":100,"index":23931},"code":"      it('should not insert a paragraph before the list if it is NOT the first element in the editor', function () {\n        this.el.innerHTML = '<p>lorem ipsum</p><ul><li></li><li>lorem ipsum</li></ul>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('li');\n        placeCursorInsideElement(target, 0);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.BACKSPACE\n        });\n        expect(this.el.innerHTML).toMatch(/^<p>lorem ipsum<\\/p><ul><li>(<br>)?<\\/li><li>lorem ipsum<\\/li><\\/ul>$/);\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should delete the paragraph and place the caret to the next paragraph","suites":["Content TestCase","when backspace is pressed","within an empty paragraph which is the first element of the editor"],"line":530,"updatePoint":{"line":530,"column":79,"index":24610},"code":"      it('should delete the paragraph and place the caret to the next paragraph', function () {\n        this.el.innerHTML = '<p class=\"\"><br></p><p>test</p>';\n        var editor = this.newMediumEditor('.editor'),\n          target = editor.elements[0].querySelector('p'),\n          range;\n        placeCursorInsideElement(target, 0);\n        fireEvent(target, 'keydown', {\n          keyCode: MediumEditor.util.keyCode.BACKSPACE\n        });\n        expect(this.el.innerHTML).toBe('<p>test</p>');\n        range = document.getSelection().getRangeAt(0);\n        expect(range.commonAncestorContainer.textContent).toBe('test');\n      });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should insert a breaking paragraph before header when hitting enter key at front of header","suites":["Content TestCase","with header tags"],"line":546,"updatePoint":{"line":546,"column":98,"index":25319},"code":"    it('should insert a breaking paragraph before header when hitting enter key at front of header', function () {\n      this.el.innerHTML = '<h2>lorem</h2><h3>ipsum</h3>';\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('h3');\n      placeCursorInsideElement(targetNode, 0);\n      fireEvent(targetNode, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(this.el.innerHTML).toBe('<h2>lorem</h2><p><br></p><h3>ipsum</h3>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should remove empty element if hitting delete key inside empty element before a header tag","suites":["Content TestCase","with header tags"],"line":556,"updatePoint":{"line":556,"column":98,"index":25841},"code":"    it('should remove empty element if hitting delete key inside empty element before a header tag', function () {\n      this.el.innerHTML = '<h2>lorem</h2><p><br></p><h3>ipsum</h3>';\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('p');\n      selectElementContents(targetNode);\n      fireEvent(targetNode, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.DELETE\n      });\n      expect(this.el.innerHTML).toBe('<h2>lorem</h2><h3>ipsum</h3>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not create a <p> tag when hitting enter","suites":["Content TestCase","with header tags"],"line":566,"updatePoint":{"line":566,"column":54,"index":26313},"code":"    it('should not create a <p> tag when hitting enter', function () {\n      this.el.innerHTML = '<h2>lorem ipsum</h2>';\n      var editor = this.newMediumEditor('.editor'),\n        targetNode = editor.elements[0].querySelector('h2');\n      spyOn(document, 'execCommand').and.callThrough();\n      placeCursorInsideElement(targetNode, 0);\n      fireEvent(targetNode, 'keyup', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      expect(document.execCommand).not.toHaveBeenCalledWith('formatBlock', false, 'p');\n      expect(this.el.innerHTML).toBe('<h2>lorem ipsum</h2>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should call formatBlock when a keyup results in an empty element","suites":["Content TestCase","with header tags"],"line":579,"updatePoint":{"line":579,"column":70,"index":26928},"code":"  it('should call formatBlock when a keyup results in an empty element', function () {\n    this.el.innerHTML = ' ';\n    var editor = this.newMediumEditor('.editor'),\n      target = editor.elements[0].firstChild;\n    spyOn(document, 'execCommand').and.callThrough();\n    selectElementContents(target);\n    target.parentNode.removeChild(target);\n    fireEvent(editor.elements[0], 'keyup', {\n      keyCode: MediumEditor.util.keyCode.BACKSPACE\n    });\n    expect(document.execCommand).toHaveBeenCalledWith('formatBlock', false, 'p');\n    // Webkit inserts a <p> tag, firefox & ie do not\n    expect(this.el.innerHTML).toMatch(/(<p><br><\\/p>)?/);\n  });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not throw an error when keyup occurs within a non-div editor","suites":["Content TestCase","with header tags"],"line":595,"updatePoint":{"line":595,"column":73,"index":27634},"code":"  it('should not throw an error when keyup occurs within a non-div editor', function () {\n    var origEC = document.execCommand,\n      errorCount = 0;\n    // Wrap document.execCommand so we can detect browser errors when it's called\n    document.execCommand = function () {\n      try {\n        origEC.apply(document, arguments);\n      } catch (err) {\n        errorCount++;\n        throw err;\n      }\n    };\n    this.el.parentNode.removeChild(this.el);\n    this.el = this.createElement('h1', 'editor', 'Lorem ipsum dolor sit amet');\n    var editor = this.newMediumEditor('h1.editor');\n    editor.elements[0].focus();\n    selectElementContentsAndFire(editor.elements[0]);\n    jasmine.clock().tick(1);\n    fireEvent(editor.elements[0], 'keyup', {\n      keyCode: MediumEditor.util.keyCode.M\n    });\n\n    // Restore original document.execCommand\n    document.execCommand = origEC;\n    expect(errorCount).toBe(0, 'there was an error thrown when calling document.execCommand()');\n  });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should have spellcheck attribute set to true by default","suites":["Content TestCase","spellcheck"],"line":622,"updatePoint":{"line":622,"column":63,"index":28642},"code":"    it('should have spellcheck attribute set to true by default', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements[0].getAttribute('spellcheck')).toBe('true');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should accept spellcheck as an options","suites":["Content TestCase","spellcheck"],"line":626,"updatePoint":{"line":626,"column":46,"index":28839},"code":"    it('should accept spellcheck as an options', function () {\n      var editor = this.newMediumEditor('.editor', {\n        spellcheck: false\n      });\n      expect(editor.elements[0].getAttribute('spellcheck')).toBe('false');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not replace line breaks inside header elements with div elements","suites":["Content TestCase","justify actions"],"line":634,"updatePoint":{"line":634,"column":79,"index":29157},"code":"    it('should not replace line breaks inside header elements with div elements', function () {\n      this.el.innerHTML = '<h2>lorem ipsum<br />lorem ipsum<br />lorem ipsum<br /></h2><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>';\n      var editor = this.newMediumEditor('.editor'),\n        h2 = this.el.querySelector('h2');\n      selectElementContentsAndFire(h2.firstChild);\n      editor.execAction('justifyRight');\n      h2 = this.el.querySelector('h2');\n      expect(h2.querySelectorAll('br').length).toBe(3, 'Some of the <br> elements have been removed from the <h2>');\n      expect(h2.querySelectorAll('div').length).toBe(0, 'Some <br> elements were replaced with <div> elements within the <h2>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not replace line breaks inside blockquote elements with div elements","suites":["Content TestCase","justify actions"],"line":644,"updatePoint":{"line":644,"column":83,"index":29881},"code":"    it('should not replace line breaks inside blockquote elements with div elements', function () {\n      this.el.innerHTML = '<ul><li>item 1</li><li>item 2</li></ul><blockquote>lorem ipsum<br />lorem ipsum<br />lorem ipsum<br /></blockquote><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>';\n      var editor = this.newMediumEditor('.editor'),\n        blockquote = this.el.querySelector('blockquote');\n      selectElementContentsAndFire(blockquote);\n      editor.execAction('justifyCenter');\n      blockquote = this.el.querySelector('blockquote');\n      // Edge adds another <br /> automatically for some reason...\n      expect(blockquote.querySelectorAll('br').length).toBeGreaterThan(2, 'Some of the <br> elements have been removed from the <blockquote>');\n      expect(blockquote.querySelectorAll('div').length).toBe(0, 'Some <br> elements were replaced with <div> elements within the <blckquote>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not replace line breaks inside pre elements with div elements","suites":["Content TestCase","justify actions"],"line":655,"updatePoint":{"line":655,"column":76,"index":30792},"code":"    it('should not replace line breaks inside pre elements with div elements', function () {\n      this.el.innerHTML = '<ul><li>item 1</li><li>item 2</li></ul><pre>lorem ipsum<br />lorem ipsum<br />lorem ipsum<br /></pre><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>';\n      var editor = this.newMediumEditor('.editor'),\n        pre = this.el.querySelector('pre');\n      selectElementContentsAndFire(pre);\n      editor.execAction('justifyCenter');\n      pre = this.el.querySelector('pre');\n      expect(pre.querySelectorAll('br').length).toBe(3, 'Some of the <br> elements have been removed from the <pre>');\n      expect(pre.querySelectorAll('div').length).toBe(0, 'Some <br> elements were replaced with <div> elements within the <pre>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should not replace line breaks inside p elements with div elements","suites":["Content TestCase","justify actions"],"line":665,"updatePoint":{"line":665,"column":74,"index":31547},"code":"    it('should not replace line breaks inside p elements with div elements', function () {\n      this.el.innerHTML = '<ul><li>item 1</li><li>item 2</li></ul><p>lorem ipsum<br />lorem ipsum<br />lorem ipsum<br /></p><ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>';\n      var editor = this.newMediumEditor('.editor'),\n        para = this.el.querySelector('p');\n      selectElementContentsAndFire(para);\n      editor.execAction('justifyCenter');\n      para = this.el.querySelector('p');\n      expect(para.querySelectorAll('br').length).toBe(3, 'Some of the <br> elements have been removed from the <p>');\n      expect(para.querySelectorAll('div').length).toBe(0, 'Some <br> elements were replaced with <div> elements within the <p>');\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should fix markup when one list element is unlisted","suites":["Content TestCase","when list element is unlisted"],"line":677,"updatePoint":{"line":677,"column":59,"index":32344},"code":"    it('should fix markup when one list element is unlisted', function () {\n      this.el.innerHTML = '<ul><li>lorem</li><li>ipsum</li><li>dolor</li></ul>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['unorderedlist']\n          }\n        }),\n        target = editor.elements[0].querySelector('li'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(target);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"insertunorderedlist\"]'), 'click');\n      if (getEdgeVersion() > 0) {\n        // Edge wraps elements in div\n        expect(this.el.innerHTML).toBe('<div>lorem</div><ul><li>ipsum</li><li>dolor</li></ul>');\n      } else {\n        // Other browsers should wrap them in p\n        expect(this.el.innerHTML).toBe('<p>lorem</p><ul><li>ipsum</li><li>dolor</li></ul>');\n      }\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should fix markup when miltiple list elements are unlisted","suites":["Content TestCase","when list element is unlisted"],"line":696,"updatePoint":{"line":696,"column":66,"index":33251},"code":"    it('should fix markup when miltiple list elements are unlisted', function () {\n      this.el.innerHTML = '<ol><li>lorem</li><li>ipsum</li><li>dolor</li></ol>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['orderedlist']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        selection = document.getSelection(),\n        range = document.createRange();\n      range.setStart(this.el.querySelectorAll('li')[0].firstChild, 0);\n      range.setEnd(this.el.querySelectorAll('li')[1].firstChild, 5);\n      selection.removeAllRanges();\n      selection.addRange(range);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"insertorderedlist\"]'), 'click');\n      if (getEdgeVersion() > 0) {\n        // Edge wraps elements in div\n        expect(this.el.innerHTML).toBe('<div>lorem</div><div>ipsum</div><ol><li>dolor</li></ol>');\n      } else {\n        // Other browsers should wrap them in p\n        expect(this.el.innerHTML).toBe('<p>lorem</p><p>ipsum</p><ol><li>dolor</li></ol>');\n      }\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should fix markup when all list elements are unlisted","suites":["Content TestCase","when list element is unlisted"],"line":719,"updatePoint":{"line":719,"column":61,"index":34341},"code":"    it('should fix markup when all list elements are unlisted', function () {\n      this.el.innerHTML = '<ul><li>lorem</li><li>ipsum</li><li>dolor</li></ul>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['unorderedlist']\n          }\n        }),\n        target = editor.elements[0].querySelector('ul'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(target);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"insertunorderedlist\"]'), 'click');\n      if (getEdgeVersion() > 0) {\n        // Edge wraps elements in div\n        expect(this.el.innerHTML).toBe('<div>lorem</div><div>ipsum</div><div>dolor</div>');\n      } else {\n        // Other browsers should wrap them in p\n        expect(this.el.innerHTML).toBe('<p>lorem</p><p>ipsum</p><p>dolor</p>');\n      }\n    });","file":"content.spec.js","skipped":false,"dir":"spec"},{"name":"should return the element which currently has a data-medium-focused attribute","suites":["Core-API","getFocusedElement"],"line":15,"updatePoint":{"line":15,"column":85,"index":449},"code":"    it('should return the element which currently has a data-medium-focused attribute', function () {\n      var elementOne = this.createElement('div', 'editor', 'lorem ipsum'),\n        elementTwo = this.createElement('div', 'editor', 'lorem ipsum');\n      elementTwo.setAttribute('data-medium-focused', true);\n      var editor = this.newMediumEditor('.editor'),\n        focused = editor.getFocusedElement();\n      expect(focused).not.toBe(elementOne);\n      expect(focused).toBe(elementTwo);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should return the element focused via call to selectElement","suites":["Core-API","getFocusedElement"],"line":24,"updatePoint":{"line":24,"column":67,"index":931},"code":"    it('should return the element focused via call to selectElement', function () {\n      var elementOne = this.createElement('div', 'editor', 'lorem ipsum'),\n        elementTwo = this.createElement('div', 'editor', 'lorem ipsum');\n      elementTwo.setAttribute('data-medium-focused', true);\n      var editor = this.newMediumEditor('.editor');\n      editor.selectElement(elementOne.firstChild);\n      var focused = editor.getFocusedElement();\n      expect(focused).toBe(elementOne);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should set the content of the editor's element","suites":["Core-API","setContent"],"line":35,"updatePoint":{"line":35,"column":55,"index":1455},"code":"    it('should set the content of the editor\\'s element', function () {\n      var newHTML = 'Lorem ipsum dolor',\n        otherHTML = 'something different',\n        elementOne = this.createElement('div', 'editor', 'lorem ipsum'),\n        editor = this.newMediumEditor('.editor');\n      editor.setContent(newHTML);\n      expect(this.el.innerHTML).toEqual(newHTML);\n      expect(elementOne.innerHTML).not.toEqual(newHTML);\n      editor.setContent(otherHTML, 1);\n      expect(elementOne.innerHTML).toEqual(otherHTML);\n      expect(this.el.innerHTML).not.toEqual(otherHTML);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should retrieve the content of the first element","suites":["Core-API","getContent"],"line":49,"updatePoint":{"line":49,"column":56,"index":2079},"code":"    it('should retrieve the content of the first element', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.getContent()).toEqual('lore ipsum');\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should retrieve the content of the element at the specified index","suites":["Core-API","getContent"],"line":53,"updatePoint":{"line":53,"column":73,"index":2286},"code":"    it('should retrieve the content of the element at the specified index', function () {\n      var otherHTML = 'something different';\n      this.createElement('div', 'editor', otherHTML);\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.getContent(1)).toEqual(otherHTML);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should return null if no element exists","suites":["Core-API","getContent"],"line":59,"updatePoint":{"line":59,"column":47,"index":2564},"code":"    it('should return null if no element exists', function () {\n      var editor = this.newMediumEditor('.no-valid-selector');\n      expect(editor.getContent()).toBeNull();\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should reset the content of all editor elements to their initial values","suites":["Core-API","resetContent"],"line":65,"updatePoint":{"line":65,"column":79,"index":2824},"code":"    it('should reset the content of all editor elements to their initial values', function () {\n      var initialOne = this.el.innerHTML,\n        initialTwo = 'Lorem ipsum dolor',\n        elementTwo = this.createElement('div', 'editor', initialTwo),\n        editor = this.newMediumEditor('.editor');\n      editor.setContent('<p>changed content</p>');\n      expect(this.el.innerHTML).not.toEqual(initialOne);\n      editor.setContent('<p>changed content</p>', 1);\n      expect(elementTwo.innerHTML).not.toEqual(initialTwo);\n      editor.resetContent();\n      expect(this.el.innerHTML).toEqual(initialOne);\n      expect(elementTwo.innerHTML).toEqual(initialTwo);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should reset the content of a specific element when provided","suites":["Core-API","resetContent"],"line":78,"updatePoint":{"line":78,"column":68,"index":3481},"code":"    it('should reset the content of a specific element when provided', function () {\n      var initialOne = this.el.innerHTML,\n        initialTwo = 'Lorem ipsum dolor',\n        elementTwo = this.createElement('div', 'editor', initialTwo),\n        editor = this.newMediumEditor('.editor');\n      editor.setContent('<p>changed content</p>');\n      expect(this.el.innerHTML).not.toEqual(initialOne);\n      editor.setContent('<p>changed content</p>', 1);\n      expect(elementTwo.innerHTML).not.toEqual(initialTwo);\n      editor.resetContent(elementTwo);\n      expect(this.el.innerHTML).not.toEqual(initialOne);\n      expect(elementTwo.innerHTML).toEqual(initialTwo);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should not reset anything if an invalid element is provided","suites":["Core-API","resetContent"],"line":91,"updatePoint":{"line":91,"column":67,"index":4151},"code":"    it('should not reset anything if an invalid element is provided', function () {\n      var initialOne = this.el.innerHTML,\n        initialTwo = 'Lorem ipsum dolor',\n        elementTwo = this.createElement('div', 'editor', initialTwo),\n        dummyElement = this.createElement('div', 'not-editor', '<p>dummy element</p>'),\n        editor = this.newMediumEditor('.editor');\n      editor.setContent('<p>changed content</p>');\n      expect(this.el.innerHTML).not.toEqual(initialOne);\n      editor.setContent('<p>changed content</p>', 1);\n      expect(elementTwo.innerHTML).not.toEqual(initialTwo);\n      editor.resetContent(dummyElement);\n      expect(this.el.innerHTML).not.toEqual(initialOne);\n      expect(elementTwo.innerHTML).not.toEqual(initialTwo);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should be applicable if html changes but text does not","suites":["Core-API","saveSelection/restoreSelection"],"line":107,"updatePoint":{"line":107,"column":62,"index":4975},"code":"    it('should be applicable if html changes but text does not', function () {\n      this.el.innerHTML = 'lorem <i>ipsum</i> dolor';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic', 'underline', 'strikethrough']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        // Beacuse not all browsers use <strike> or <s>, check for both\n        sTagO = '<(s|strike)>',\n        sTagC = '</(s|strike)>',\n        // Edge breaks this into 3 separate <u> tags for some reason...\n        regex = new RegExp(['^<u>lorem ', '(<i>' + sTagO + '|' + sTagO + '<i>|</u><i><u>' + sTagO + ')', 'ipsum', '(</i>' + sTagC + '|' + sTagC + '</i>|' + sTagC + '</u></i><u>)', ' dolor</u>$'].join(''));\n\n      // Save selection around <i> tag\n      selectElementContents(editor.elements[0].querySelector('i'));\n      editor.saveSelection();\n\n      // Underline entire element\n      selectElementContents(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"underline\"]');\n      fireEvent(button, 'click');\n\n      // Restore selection back to <i> tag and add a <s> tag\n      editor.restoreSelection();\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"strikethrough\"]');\n      fireEvent(button, 'click');\n      expect(editor.elements[0].innerHTML).toMatch(regex);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should have an index in the exported selection when it is in the second contenteditable","suites":["Core-API","exportSelection"],"line":139,"updatePoint":{"line":139,"column":95,"index":6468},"code":"    it('should have an index in the exported selection when it is in the second contenteditable', function () {\n      this.createElement('div', 'editor', 'lorem <i>ipsum</i> dolor');\n      var editor = this.newMediumEditor('.editor', {\n        toolbar: {\n          buttons: ['italic', 'underline', 'strikethrough']\n        }\n      });\n      selectElementContents(editor.elements[1].querySelector('i'));\n      var exportedSelection = editor.exportSelection();\n      expect(Object.keys(exportedSelection).sort()).toEqual(['editableElementIndex', 'end', 'start']);\n      expect(exportedSelection.editableElementIndex).toEqual(1);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should pass opt directly to document.execCommand","suites":["Core-API","execAction"],"line":153,"updatePoint":{"line":153,"column":56,"index":7109},"code":"    it('should pass opt directly to document.execCommand', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      editor.execAction('foreColor', {\n        value: 'red'\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('foreColor', false, 'red');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"fontName support old style","suites":["Core-API","execAction"],"line":166,"updatePoint":{"line":166,"column":34,"index":7843},"code":"    it('fontName support old style', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      editor.execAction('fontName', {\n        name: 'Tahoma'\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('fontName', false, 'Tahoma');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"fontName support new stle","suites":["Core-API","execAction"],"line":179,"updatePoint":{"line":179,"column":33,"index":8579},"code":"    it('fontName support new stle', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      editor.execAction('fontName', {\n        value: 'Tahoma'\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('fontName', false, 'Tahoma');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"fontSize support old style","suites":["Core-API","execAction"],"line":192,"updatePoint":{"line":192,"column":34,"index":9317},"code":"    it('fontSize support old style', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      editor.execAction('fontSize', {\n        size: 14\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('fontSize', false, 14);\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"fontSize support new stle","suites":["Core-API","execAction"],"line":205,"updatePoint":{"line":205,"column":33,"index":10041},"code":"    it('fontSize support new stle', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      editor.execAction('fontSize', {\n        value: 14\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('fontSize', false, 14);\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"createLink support old style","suites":["Core-API","execAction"],"line":218,"updatePoint":{"line":218,"column":36,"index":10769},"code":"    it('createLink support old style', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      jasmine.clock().tick(1);\n      editor.execAction('createLink', {\n        url: 'http://www.test.com'\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('createLink', false, 'http://www.test.com');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"createLink support new style","suites":["Core-API","execAction"],"line":233,"updatePoint":{"line":233,"column":36,"index":11635},"code":"    it('createLink support new style', function () {\n      // In order to safely spy on document.execCommand we need to disable functionality\n      // which overrides document.execCommand in IE & Edge\n      var origSupported = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = true;\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      jasmine.clock().tick(1);\n      editor.execAction('createLink', {\n        value: 'http://www.test.com'\n      });\n      expect(document.execCommand).toHaveBeenCalledWith('createLink', false, 'http://www.test.com');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = origSupported;\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger editableInput when called after the html has changed","suites":["Core-API","checkContentChanged"],"line":250,"updatePoint":{"line":250,"column":75,"index":12596},"code":"    it('should trigger editableInput when called after the html has changed', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic', 'underline', 'strikethrough']\n          }\n        }),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('editableInput', spy);\n      expect(spy).not.toHaveBeenCalled();\n      selectElementContentsAndFire(this.el.firstChild);\n      jasmine.clock().tick(1);\n      this.el.innerHTML = 'lorem ipsum';\n      expect(spy).not.toHaveBeenCalled();\n      var obj = {\n        target: this.el,\n        currentTarget: this.el\n      };\n      editor.checkContentChanged();\n      expect(spy).toHaveBeenCalledWith(obj, this.el);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should not trigger editableInput when called after the html has not changed","suites":["Core-API","checkContentChanged"],"line":270,"updatePoint":{"line":270,"column":83,"index":13339},"code":"    it('should not trigger editableInput when called after the html has not changed', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['italic', 'underline', 'strikethrough']\n          }\n        }),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('editableInput', spy);\n      expect(spy).not.toHaveBeenCalled();\n      selectElementContentsAndFire(this.el.firstChild);\n      jasmine.clock().tick(1);\n      this.el.innerHTML = 'lore ipsum';\n      expect(spy).not.toHaveBeenCalled();\n      editor.checkContentChanged();\n      expect(spy).not.toHaveBeenCalled();\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should return the editor instance the element belongs to","suites":["Core-API","getEditorFromElement"],"line":288,"updatePoint":{"line":288,"column":64,"index":14022},"code":"    it('should return the editor instance the element belongs to', function () {\n      var elTwo = this.createElement('div', 'editor-two', 'lore ipsum'),\n        editorOne = this.newMediumEditor('.editor'),\n        editorTwo = this.newMediumEditor('.editor-two');\n      expect(editorOne.elements[0]).toBe(this.el);\n      expect(editorTwo.elements[0]).toBe(elTwo);\n      expect(MediumEditor.getEditorFromElement(this.el)).toBe(editorOne);\n      expect(MediumEditor.getEditorFromElement(elTwo)).toBe(editorTwo);\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should return null if the element is not within an editor","suites":["Core-API","getEditorFromElement"],"line":297,"updatePoint":{"line":297,"column":65,"index":14541},"code":"    it('should return null if the element is not within an editor', function () {\n      expect(MediumEditor.getEditorFromElement(this.el)).toBeNull();\n    });","file":"core-api.spec.js","skipped":false,"dir":"spec"},{"name":"should call function after delay","suites":["Delay TestCase"],"line":11,"updatePoint":{"line":11,"column":38,"index":284},"code":"  it('should call function after delay', function () {\n    var editor, spy;\n    editor = this.newMediumEditor('.editor', {\n      delay: 100\n    });\n    spy = jasmine.createSpy('spy');\n    editor.delay(spy);\n    jasmine.clock().tick(50);\n    expect(spy).not.toHaveBeenCalled();\n    jasmine.clock().tick(150);\n    expect(spy).toHaveBeenCalled();\n  });","file":"delay.spec.js","skipped":false,"dir":"spec"},{"name":"should not call function if editor not active","suites":["Delay TestCase"],"line":23,"updatePoint":{"line":23,"column":51,"index":647},"code":"  it('should not call function if editor not active', function () {\n    var editor, spy;\n    editor = this.newMediumEditor('.editor', {\n      delay: 1\n    });\n    spy = jasmine.createSpy('spy');\n    editor.destroy();\n    editor.delay(spy);\n    jasmine.clock().tick(100);\n    expect(spy).not.toHaveBeenCalled();\n  });","file":"delay.spec.js","skipped":false,"dir":"spec"},{"name":"should add medium-editor-dragover class","suites":["Drag and Drop TestCase","drag"],"line":14,"updatePoint":{"line":14,"column":47,"index":357},"code":"    it('should add medium-editor-dragover class', function () {\n      var editor = this.newMediumEditor(this.el);\n      fireEvent(editor.elements[0], 'dragover');\n      expect(editor.elements[0].className).toContain('medium-editor-dragover');\n    });","file":"drag-and-drop.spec.js","skipped":false,"dir":"spec"},{"name":"should add medium-editor-dragover class even when data is invalid","suites":["Drag and Drop TestCase","drag"],"line":19,"updatePoint":{"line":19,"column":73,"index":634},"code":"    it('should add medium-editor-dragover class even when data is invalid', function () {\n      var editor = this.newMediumEditor(this.el, {\n        imageDragging: false\n      });\n      fireEvent(editor.elements[0], 'dragover');\n      expect(editor.elements[0].className).toContain('medium-editor-dragover');\n    });","file":"drag-and-drop.spec.js","skipped":false,"dir":"spec"},{"name":"should remove medium-editor-dragover class on drag leave","suites":["Drag and Drop TestCase","drag"],"line":26,"updatePoint":{"line":26,"column":64,"index":942},"code":"    it('should remove medium-editor-dragover class on drag leave', function () {\n      var editor = this.newMediumEditor(this.el);\n      fireEvent(editor.elements[0], 'dragover');\n      expect(editor.elements[0].className).toContain('medium-editor-dragover');\n      fireEvent(editor.elements[0], 'dragleave');\n      expect(editor.elements[0].className).not.toContain('medium-editor-dragover');\n    });","file":"drag-and-drop.spec.js","skipped":false,"dir":"spec"},{"name":"should remove medium-editor-dragover class and add the image to the editor content","suites":["Drag and Drop TestCase","drop"],"line":50,"updatePoint":{"line":50,"column":90,"index":2006},"code":"    it('should remove medium-editor-dragover class and add the image to the editor content', function () {\n      var editor = this.newMediumEditor(this.el),\n        editableInputListener = jasmine.createSpy();\n      editor.subscribe('editableInput', editableInputListener);\n      expect(editableInputListener).not.toHaveBeenCalled();\n      fireEvent(editor.elements[0], 'dragover');\n      expect(editor.elements[0].className).toContain('medium-editor-dragover');\n      fireEvent(editor.elements[0], 'drop');\n      expect(editor.elements[0].className).not.toContain('medium-editor-dragover');\n\n      // File API just doesn't work in IE9, so only verify this functionality if it's not IE9\n      if (typeof FileReader === 'function') {\n        // Ensure that the load event is bound to the FileReader\n        expect(eventListener.calls.mostRecent().args[0]).toEqual('load');\n        // Pass into the event handler our dummy image source\n        eventListener.calls.mostRecent().args[1]({\n          target: {\n            result: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n          }\n        });\n\n        // Expect that the image is inserted\n        expect(MediumEditor.util.insertHTMLCommand).toHaveBeenCalled();\n        // Expect that the editableInput event is fired\n        expect(editableInputListener).toHaveBeenCalled();\n      }\n    });","file":"drag-and-drop.spec.js","skipped":false,"dir":"spec"},{"name":"should remove medium-editor-dragover class and NOT add the image to the editor content","suites":["Drag and Drop TestCase","drop"],"line":77,"updatePoint":{"line":77,"column":94,"index":3388},"code":"    it('should remove medium-editor-dragover class and NOT add the image to the editor content', function () {\n      var editor = this.newMediumEditor(this.el, {\n          imageDragging: false\n        }),\n        editableInputListener = jasmine.createSpy();\n      editor.subscribe('editableInput', editableInputListener);\n      fireEvent(editor.elements[0], 'dragover');\n      expect(editor.elements[0].className).toContain('medium-editor-dragover');\n      fireEvent(editor.elements[0], 'drop');\n      expect(editor.elements[0].className).not.toContain('medium-editor-dragover');\n\n      //The following ensures that MediumEditor.Extension.insertImageFile is not called:\n      // 1. Ensure that a load event is not bound to the FileReader\n      expect(eventListener.calls.mostRecent()).toEqual(undefined);\n      // 2. Expect that the image is not inserted\n      expect(MediumEditor.util.insertHTMLCommand).not.toHaveBeenCalled();\n      // 3. Expect that the editableInput event is not fired\n      expect(editableInputListener).not.toHaveBeenCalled();\n    });","file":"drag-and-drop.spec.js","skipped":false,"dir":"spec"},{"name":"should initialize dom element properly when adding dynamically","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":16,"updatePoint":{"line":16,"column":70,"index":555},"code":"    it('should initialize dom element properly when adding dynamically', function () {\n      var editor = this.newMediumEditor('.editor'),\n        focusedEditable,\n        blurredEditable,\n        focusListener = function (event, editable) {\n          focusedEditable = editable;\n        },\n        blurListener = function (event, editable) {\n          blurredEditable = editable;\n        };\n      editor.subscribe('focus', focusListener);\n      editor.subscribe('blur', blurListener);\n      editor.addElements(this.addOne);\n      expect(this.addOne.getAttribute('data-medium-editor-element')).toBeDefined();\n      expect(editor.elements.length).toBe(2);\n      editor.addElements(this.addOne);\n      expect(editor.elements.length).toBe(2);\n      editor.selectElement(this.addOne.firstChild);\n      expect(focusedEditable).toBe(this.addOne);\n      expect(blurredEditable).toBeUndefined();\n      fireEvent(document.body, 'mousedown');\n      fireEvent(document.body, 'mouseup');\n      fireEvent(document.body, 'click');\n      expect(blurredEditable).toBe(this.addOne);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should attach all event handlers to an element when adding an element","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":41,"updatePoint":{"line":41,"column":77,"index":1636},"code":"    it('should attach all event handlers to an element when adding an element', function () {\n      var listenerWrapper = function () {\n        this.listenerInfo.push([arguments[0], arguments[1], arguments[2]]);\n        this._addEventListner.apply(this, arguments);\n      };\n      this.el._addEventListner = this.el.addEventListener;\n      this.el.listenerInfo = [];\n      this.el.addEventListener = listenerWrapper.bind(this.el);\n      this.addOne._addEventListner = this.addOne.addEventListener;\n      this.addOne.listenerInfo = [];\n      this.addOne.addEventListener = listenerWrapper.bind(this.addOne);\n\n      // Instatiating editor will trigger adding event handlers to each element\n      expect(this.el.listenerInfo.length).toBe(0);\n      var editor = this.newMediumEditor('.editor', {\n        anchorPreview: false\n      });\n      expect(this.el.listenerInfo.length).not.toBe(0);\n      var listenerCount = this.el.listenerInfo.length;\n      editor.subscribe('editableBlur', function blurHandler() {});\n      expect(this.el.listenerInfo.length).toBe(listenerCount + 1);\n\n      // When adding a new element, all handlers should also be added to that element\n      expect(this.addOne.listenerInfo.length).toBe(0);\n      editor.addElements(this.addOne);\n      expect(this.addOne.listenerInfo.length).toBe(this.el.listenerInfo.length);\n\n      // When attaching a new handler, the handler should be added to dynamically added elements too\n      editor.subscribe('editableMouseover', function mouseoverHandler() {});\n      expect(this.el.listenerInfo.length).toBe(listenerCount + 2);\n      expect(this.addOne.listenerInfo.length).toBe(listenerCount + 2);\n\n      // Check that the same handlers have been added to each element\n      this.el.listenerInfo.forEach(function (elListener) {\n        var found = this.addOne.listenerInfo.some(function (addOneListener) {\n          return elListener[0] === addOneListener[0] && elListener[0].name === addOneListener[0].name;\n        });\n        expect(found).toBe(true);\n      }, this);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a selector to specify elements to add","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":81,"updatePoint":{"line":81,"column":59,"index":3653},"code":"    it('should accept a selector to specify elements to add', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      editor.addElements('.add-one');\n      expect(editor.elements.length).toBe(2);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a NodeList to specify elements to add","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":87,"updatePoint":{"line":87,"column":59,"index":3919},"code":"    it('should accept a NodeList to specify elements to add', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      editor.addElements(document.getElementsByClassName('add-one'));\n      expect(editor.elements.length).toBe(2);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should not add an element that is already an editor element","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":93,"updatePoint":{"line":93,"column":67,"index":4225},"code":"    it('should not add an element that is already an editor element', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      editor.addElements('.editor');\n      expect(editor.elements.length).toBe(1);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should attach editableKeydownEnter to the editor when adding an element with a data-disable-return attribute","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":99,"updatePoint":{"line":99,"column":116,"index":4547},"code":"    it('should attach editableKeydownEnter to the editor when adding an element with a data-disable-return attribute', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.events.customEvents['editableKeydownEnter'].length).toBe(1);\n      this.addOne.setAttribute('data-disable-return', true);\n      editor.addElements(this.addOne);\n      expect(editor.events.customEvents['editableKeydownEnter'].length).toBe(2, 'editableKeydownEnter should be subscribed to when adding a data-disbale-return element');\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger addElement custom event for each element","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":106,"updatePoint":{"line":106,"column":63,"index":5039},"code":"    it('should trigger addElement custom event for each element', function () {\n      var editor = this.newMediumEditor('.editor'),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('addElement', spy);\n      editor.addElements('.add-one');\n      expect(spy).toHaveBeenCalledWith({\n        target: this.addOne,\n        currentTarget: this.addOne\n      }, this.addOne);\n      editor.addElements(document.getElementsByClassName('add-two'));\n      expect(spy).toHaveBeenCalledWith({\n        target: this.addTwo,\n        currentTarget: this.addTwo\n      }, this.addTwo);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should re-attach element properly when removed from dom, cleaned up and injected to dom again","suites":["MediumEditor.DynamicElements TestCase","addElements"],"line":122,"updatePoint":{"line":122,"column":103,"index":5712},"code":"      it('should re-attach element properly when removed from dom, cleaned up and injected to dom again', function () {\n        var originalInputSupport = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n        MediumEditor.Events.prototype.InputEventOnContenteditableSupported = inputSupported;\n        var editor = this.newMediumEditor('.editor'),\n          focusedEditable,\n          firedTarget,\n          firedCounter,\n          handler = function (event, editable) {\n            firedTarget = editable;\n            firedCounter++;\n          },\n          focusListener = function (event, editable) {\n            focusedEditable = editable;\n          };\n        firedCounter = 0;\n        editor.subscribe('focus', focusListener);\n        editor.subscribe('editableInput', handler);\n        editor.addElements(this.addOne);\n        expect(this.addOne.getAttribute('data-medium-editor-element')).toBeDefined();\n        expect(editor.elements.length).toBe(2);\n\n        // Detach + exec fn + reattach, asynchronous.\n        detach(this.addOne, true, function (reattach) {\n          editor.removeElements(this.addOne);\n          expect(editor.elements.length).toBe(1);\n          reattach();\n          editor.addElements(this.addTwo);\n          expect(editor.elements.length).toBe(2);\n          expect(this.addTwo.getAttribute('data-medium-editor-element')).toBeDefined();\n          editor.selectElement(this.addTwo.firstChild);\n          expect(focusedEditable).toBe(this.addTwo);\n          editor.selectElement(this.addTwo.firstChild);\n          this.addTwo.textContent = 'lore ipsum!';\n\n          // trigger onInput\n          fireEvent(this.addTwo, 'input');\n\n          // trigger faked 'selectionchange' event\n          fireEvent(document, 'selectionchange', {\n            target: document,\n            currentTarget: this.addTwo\n          });\n          jasmine.clock().tick(1);\n          expect(firedTarget).toBe(this.addTwo);\n          expect(firedCounter).toBe(1);\n          MediumEditor.Events.prototype.InputEventOnContenteditableSupported = originalInputSupport;\n        }.bind(this));\n      });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should accept specific elements to remove","suites":["MediumEditor.DynamicElements TestCase","removeElements"],"line":175,"updatePoint":{"line":175,"column":49,"index":7882},"code":"    it('should accept specific elements to remove', function () {\n      var editor = this.newMediumEditor('.editor, .add-one');\n      expect(editor.elements.indexOf(this.addOne)).not.toBe(-1);\n      expect(editor.elements.indexOf(this.el)).not.toBe(-1);\n      editor.removeElements(this.addOne);\n      expect(editor.elements.indexOf(this.addOne)).toBe(-1);\n      expect(editor.elements.indexOf(this.el)).not.toBe(-1);\n      editor.removeElements(this.el);\n      expect(editor.elements.indexOf(this.el)).toBe(-1);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a selector to specify elements to remove","suites":["MediumEditor.DynamicElements TestCase","removeElements"],"line":185,"updatePoint":{"line":185,"column":62,"index":8416},"code":"    it('should accept a selector to specify elements to remove', function () {\n      var editor = this.newMediumEditor('.editor, .add-one');\n      expect(editor.elements.length).toBe(2);\n      editor.removeElements('.editor');\n      expect(editor.elements.length).toBe(1);\n      editor.removeElements('.add-one');\n      expect(editor.elements.length).toBe(0);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a NodeList to specify elements to remove","suites":["MediumEditor.DynamicElements TestCase","removeElements"],"line":193,"updatePoint":{"line":193,"column":62,"index":8784},"code":"    it('should accept a NodeList to specify elements to remove', function () {\n      var editor = this.newMediumEditor('.editor, .add-one');\n      expect(editor.elements.length).toBe(2);\n      editor.removeElements(document.getElementsByClassName('editor'));\n      expect(editor.elements.length).toBe(1);\n      editor.removeElements(document.getElementsByClassName('add-one'));\n      expect(editor.elements.length).toBe(0);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should detach all event handlers from an element","suites":["MediumEditor.DynamicElements TestCase","removeElements"],"line":201,"updatePoint":{"line":201,"column":56,"index":9210},"code":"    it('should detach all event handlers from an element', function () {\n      var attached = [],\n        origAdd = this.el.addEventListener,\n        origRemove = this.el.removeEventListener;\n      this.el.removeEventListener = function () {\n        var args = arguments;\n        attached = attached.filter(function (props) {\n          if (props[0] === args[0] && props[1] === args[1] && props[2] === args[2]) {\n            return false;\n          }\n          return true;\n        });\n        origRemove.apply(this, arguments);\n      }.bind(this.el);\n      this.el.addEventListener = function () {\n        attached.push([arguments[0], arguments[1], arguments[2]]);\n        origAdd.apply(this, arguments);\n      }.bind(this.el);\n\n      // Instatiating editor will trigger adding event handlers to each element\n      var editor = this.newMediumEditor('.editor, .add-one');\n      expect(attached.length).not.toBe(0);\n\n      // Removing should make calls to remove each individual event handler\n      editor.removeElements(this.el);\n      expect(attached.length).toBe(0);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger removeElement custom event for each element","suites":["MediumEditor.DynamicElements TestCase","removeElements"],"line":228,"updatePoint":{"line":228,"column":66,"index":10296},"code":"    it('should trigger removeElement custom event for each element', function () {\n      var editor = this.newMediumEditor('.editor, .add-one, .add-two'),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('removeElement', spy);\n      editor.removeElements('.add-one');\n      expect(spy).toHaveBeenCalledWith({\n        target: this.addOne,\n        currentTarget: this.addOne\n      }, this.addOne);\n      editor.removeElements(document.getElementsByClassName('add-two'));\n      expect(spy).toHaveBeenCalledWith({\n        target: this.addTwo,\n        currentTarget: this.addTwo\n      }, this.addTwo);\n    });","file":"dyn-elements.spec.js","skipped":false,"dir":"spec"},{"name":"should set element contenteditable attribute to true","suites":["Elements TestCase","Initialization"],"line":12,"updatePoint":{"line":12,"column":60,"index":352},"code":"    it('should set element contenteditable attribute to true', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('contenteditable')).toEqual('true');\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should not set element contenteditable when disableEditing is true","suites":["Elements TestCase","Initialization"],"line":17,"updatePoint":{"line":17,"column":74,"index":620},"code":"    it('should not set element contenteditable when disableEditing is true', function () {\n      var editor = this.newMediumEditor('.editor', {\n        disableEditing: true\n      });\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('contenteditable')).toBeFalsy();\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should not set element contenteditable when data-disable-editing is true","suites":["Elements TestCase","Initialization"],"line":24,"updatePoint":{"line":24,"column":80,"index":930},"code":"    it('should not set element contenteditable when data-disable-editing is true', function () {\n      this.el.setAttribute('data-disable-editing', true);\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('contenteditable')).toBeFalsy();\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should set element data attr medium-editor-element to true and add medium-editor-element class","suites":["Elements TestCase","Initialization"],"line":30,"updatePoint":{"line":30,"column":102,"index":1280},"code":"    it('should set element data attr medium-editor-element to true and add medium-editor-element class', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('data-medium-editor-element')).toEqual('true');\n      expect(this.el.className).toBe('editor medium-editor-element');\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should set element role attribute to textbox","suites":["Elements TestCase","Initialization"],"line":36,"updatePoint":{"line":36,"column":52,"index":1607},"code":"    it('should set element role attribute to textbox', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('role')).toEqual('textbox');\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should set element aria multiline attribute to true","suites":["Elements TestCase","Initialization"],"line":41,"updatePoint":{"line":41,"column":59,"index":1852},"code":"    it('should set element aria multiline attribute to true', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.getAttribute('aria-multiline')).toEqual('true');\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should set the data-medium-editor-editor-index attribute to be the id of the editor instance","suites":["Elements TestCase","Initialization"],"line":46,"updatePoint":{"line":46,"column":100,"index":2145},"code":"    it('should set the data-medium-editor-editor-index attribute to be the id of the editor instance', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements[0]).toBe(this.el);\n      expect(parseInt(this.el.getAttribute('data-medium-editor-editor-index'))).toBe(editor.id);\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the contenteditable attribute","suites":["Elements TestCase","Destroy"],"line":53,"updatePoint":{"line":53,"column":51,"index":2460},"code":"    it('should remove the contenteditable attribute', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.getAttribute('contenteditable')).toEqual('true');\n      editor.destroy();\n      expect(this.el.hasAttribute('contenteditable')).toBe(false);\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the medium-editor-element attribute and class name","suites":["Elements TestCase","Destroy"],"line":59,"updatePoint":{"line":59,"column":72,"index":2771},"code":"    it('should remove the medium-editor-element attribute and class name', function () {\n      this.el.classList.add('temp-class');\n      expect(this.el.className).toBe('editor temp-class');\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.getAttribute('data-medium-editor-element')).toEqual('true');\n      expect(this.el.className).toBe('editor temp-class medium-editor-element');\n      editor.destroy();\n      expect(this.el.hasAttribute('data-medium-editor-element')).toBe(false);\n      expect(this.el.className).toBe('editor temp-class');\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the role attribute","suites":["Elements TestCase","Destroy"],"line":69,"updatePoint":{"line":69,"column":40,"index":3314},"code":"    it('should remove the role attribute', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.getAttribute('role')).toEqual('textbox');\n      editor.destroy();\n      expect(this.el.hasAttribute('role')).toBe(false);\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the aria-multiline attribute","suites":["Elements TestCase","Destroy"],"line":75,"updatePoint":{"line":75,"column":50,"index":3584},"code":"    it('should remove the aria-multiline attribute', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.getAttribute('aria-multiline')).toEqual('true');\n      editor.destroy();\n      expect(this.el.hasAttribute('aria-multiline')).toBe(false);\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the data-medium-editor-editor-index attribute","suites":["Elements TestCase","Destroy"],"line":81,"updatePoint":{"line":81,"column":67,"index":3888},"code":"    it('should remove the data-medium-editor-editor-index attribute', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(parseInt(this.el.getAttribute('data-medium-editor-editor-index'))).toBe(editor.id);\n      editor.destroy();\n      expect(this.el.hasAttribute('data-medium-editor-editor-index')).toBe(false);\n    });","file":"elements.spec.js","skipped":false,"dir":"spec"},{"name":"should bind listener","suites":["MediumEditor.Events TestCase","On"],"line":15,"updatePoint":{"line":15,"column":28,"index":404},"code":"    it('should bind listener', function () {\n      var el, editor, spy;\n      el = this.createElement('div');\n      spy = jasmine.createSpy('handler');\n      editor = this.newMediumEditor('.editor');\n      editor.on(el, 'click', spy);\n      fireEvent(el, 'click');\n      jasmine.clock().tick(1);\n      expect(spy).toHaveBeenCalled();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should bind listener even to list of elements","suites":["MediumEditor.Events TestCase","On"],"line":25,"updatePoint":{"line":25,"column":53,"index":771},"code":"    it('should bind listener even to list of elements', function () {\n      var el1, el2, elements, editor, spy;\n      el1 = this.createElement('div');\n      el1.classList.add('test-element');\n      el2 = this.createElement('div');\n      el2.classList.add('test-element');\n      elements = document.getElementsByClassName('test-element');\n      spy = jasmine.createSpy('handler');\n      editor = this.newMediumEditor('.editor');\n      editor.on(elements, 'click', spy);\n      fireEvent(el1, 'click');\n      jasmine.clock().tick(1);\n      expect(spy).toHaveBeenCalled();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should unbind listener","suites":["MediumEditor.Events TestCase","Off"],"line":41,"updatePoint":{"line":41,"column":30,"index":1364},"code":"    it('should unbind listener', function () {\n      var el, editor, spy;\n      el = this.createElement('div');\n      spy = jasmine.createSpy('handler');\n      editor = this.newMediumEditor('.editor');\n      editor.on(el, 'click', spy);\n      editor.off(el, 'click', spy);\n      fireEvent(el, 'click');\n      jasmine.clock().tick(1);\n      expect(spy).not.toHaveBeenCalled();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should unbind listener even from list of elements","suites":["MediumEditor.Events TestCase","Off"],"line":52,"updatePoint":{"line":52,"column":57,"index":1775},"code":"    it('should unbind listener even from list of elements', function () {\n      var el1, el2, elements, editor, spy;\n      el1 = this.createElement('div');\n      el1.classList.add('test-element');\n      el2 = this.createElement('div');\n      el2.classList.add('test-element');\n      elements = document.getElementsByClassName('test-element');\n      spy = jasmine.createSpy('handler');\n      editor = this.newMediumEditor('.editor');\n      editor.on(elements, 'click', spy);\n      editor.off(elements, 'click', spy);\n      fireEvent(el1, 'click');\n      jasmine.clock().tick(1);\n      expect(spy).not.toHaveBeenCalled();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should be attachable and triggerable if they are not built-in events","suites":["MediumEditor.Events TestCase","Custom Events"],"line":69,"updatePoint":{"line":69,"column":76,"index":2470},"code":"    it('should be attachable and triggerable if they are not built-in events', function () {\n      var editor = this.newMediumEditor('.editor'),\n        spy = jasmine.createSpy('handler'),\n        tempData = {\n          temp: 'data'\n        };\n      editor.subscribe('myIncredibleEvent', spy);\n      expect(spy).not.toHaveBeenCalled();\n      editor.trigger('myIncredibleEvent', tempData, editor.elements[0]);\n      expect(spy).toHaveBeenCalledWith(tempData, editor.elements[0]);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"can be disabled for a temporary period of time on a named basis","suites":["MediumEditor.Events TestCase","Custom Events"],"line":80,"updatePoint":{"line":80,"column":71,"index":2952},"code":"    it('can be disabled for a temporary period of time on a named basis', function () {\n      var editor = this.newMediumEditor('.editor'),\n        spy = jasmine.createSpy('handler'),\n        tempData = {\n          temp: 'data'\n        };\n      editor.subscribe('myIncredibleEvent', spy);\n      expect(spy).not.toHaveBeenCalled();\n      editor.events.disableCustomEvent('myIncredibleEvent');\n      editor.trigger('myIncredibleEvent', tempData, editor.elements[0]);\n      expect(spy).not.toHaveBeenCalled();\n      editor.events.enableCustomEvent('myIncredibleEvent');\n      editor.trigger('myIncredibleEvent', tempData, editor.elements[0]);\n      expect(spy).toHaveBeenCalledWith(tempData, editor.elements[0]);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should be called and passed the editable element when the editable gets focus","suites":["MediumEditor.Events TestCase","Custom Focus/Blur Listener"],"line":97,"updatePoint":{"line":97,"column":85,"index":3745},"code":"    it('should be called and passed the editable element when the editable gets focus', function () {\n      var editor = this.newMediumEditor('.editor'),\n        focusedEditable,\n        blurredEditable,\n        focusListener = function (event, editable) {\n          focusedEditable = editable;\n        },\n        blurListener = function (event, editable) {\n          blurredEditable = editable;\n        };\n      editor.subscribe('focus', focusListener);\n      editor.subscribe('blur', blurListener);\n      editor.selectElement(this.el.firstChild);\n      expect(focusedEditable).toBe(this.el);\n      expect(blurredEditable).toBeUndefined();\n      fireEvent(document.body, 'mousedown');\n      fireEvent(document.body, 'mouseup');\n      fireEvent(document.body, 'click');\n      expect(blurredEditable).toBe(this.el);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should not trigger after detaching","suites":["MediumEditor.Events TestCase","Custom Focus/Blur Listener"],"line":117,"updatePoint":{"line":117,"column":42,"index":4525},"code":"    it('should not trigger after detaching', function () {\n      var focusSpy = jasmine.createSpy('handler'),\n        blurSpy = jasmine.createSpy('handler'),\n        editor = this.newMediumEditor('.editor');\n      editor.subscribe('focus', focusSpy);\n      editor.subscribe('blur', blurSpy);\n      editor.selectElement(this.el.firstChild);\n      expect(focusSpy.calls.count()).toBe(1);\n      expect(blurSpy).not.toHaveBeenCalled();\n      fireEvent(document.body, 'click');\n      expect(blurSpy).toHaveBeenCalled();\n      editor.unsubscribe('focus', focusSpy);\n      editor.selectElement(this.el.firstChild);\n      expect(focusSpy.calls.count()).toBe(1);\n      editor.unsubscribe('blur', blurSpy);\n      fireEvent(document.body, 'click');\n      expect(blurSpy.calls.count()).toBe(1);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should not be called after destroying editor","suites":["MediumEditor.Events TestCase","Custom Focus/Blur Listener"],"line":135,"updatePoint":{"line":135,"column":52,"index":5326},"code":"    it('should not be called after destroying editor', function () {\n      var editor = this.newMediumEditor('.editor'),\n        focusSpy = jasmine.createSpy('handler'),\n        blurSpy = jasmine.createSpy('handler');\n      editor.subscribe('focus', focusSpy);\n      editor.subscribe('blur', blurSpy);\n      this.el.focus();\n      fireEvent(this.el, 'focus');\n      expect(focusSpy.calls.count()).toBe(1);\n      expect(blurSpy).not.toHaveBeenCalled();\n      fireEvent(document.body, 'click');\n      expect(blurSpy).toHaveBeenCalled();\n      editor.destroy();\n      this.el.focus();\n      fireEvent(this.el, 'focus');\n      expect(focusSpy.calls.count()).toBe(1);\n      fireEvent(document.body, 'click');\n      expect(blurSpy.calls.count()).toBe(1);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should only wrap document.execCommand when required","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":156,"updatePoint":{"line":156,"column":59,"index":6145},"code":"    it('should only wrap document.execCommand when required', function () {\n      var origExecCommand = document.execCommand;\n      this.newMediumEditor('.editor', {\n        placeholder: false\n      });\n      expect(document.execCommand).toBe(origExecCommand);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should wrap document.execCommand with a custom method","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":163,"updatePoint":{"line":163,"column":61,"index":6416},"code":"    it('should wrap document.execCommand with a custom method', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      var origExecCommand = document.execCommand,\n        mockInstance = {\n          options: {\n            ownerDocument: document\n          }\n        },\n        events = new MediumEditor.Events(mockInstance),\n        handler = spyOn(events, 'handleDocumentExecCommand');\n      events.attachToExecCommand();\n      expect(document.execCommand).not.toBe(origExecCommand);\n      expect(document.execCommand.listeners.length).toBe(1);\n\n      // Creating a real contenteditable to select to keep firefox happy during tests\n      var tempEl = this.createElement('div', '', 'firefox is lame');\n      tempEl.setAttribute('contenteditable', true);\n      selectElementContents(tempEl);\n      document.execCommand('bold', false, null);\n      expect(handler).toHaveBeenCalled();\n      expect(origExecCommand).toHaveBeenCalledWith('bold', false, null);\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should notify all listeners when execCommand is called","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":185,"updatePoint":{"line":185,"column":62,"index":7400},"code":"    it('should notify all listeners when execCommand is called', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      var origExecCommand = document.execCommand,\n        mockInstance = {\n          options: {\n            ownerDocument: document\n          }\n        },\n        eventsOne = new MediumEditor.Events(mockInstance),\n        eventsTwo = new MediumEditor.Events(mockInstance),\n        handlerOne = spyOn(eventsOne, 'handleDocumentExecCommand'),\n        handlerTwo = spyOn(eventsTwo, 'handleDocumentExecCommand'),\n        args = ['bold', false, 'something'];\n      eventsOne.attachToExecCommand();\n      eventsTwo.attachToExecCommand();\n      expect(document.execCommand).not.toBe(origExecCommand);\n      expect(document.execCommand.listeners.length).toBe(2);\n      expect(handlerOne).not.toHaveBeenCalled();\n      expect(handlerTwo).not.toHaveBeenCalled();\n\n      // Creating a real contenteditable to select to keep firefox happy during tests\n      var tempEl = this.createElement('div', '', 'firefox is lame');\n      tempEl.setAttribute('contenteditable', true);\n      selectElementContents(tempEl);\n      document.execCommand.apply(document, args);\n      var expectedObj = {\n        command: 'bold',\n        value: 'something',\n        args: args,\n        result: true\n      };\n      expect(handlerOne).toHaveBeenCalledWith(expectedObj);\n      expect(handlerTwo).toHaveBeenCalledWith(expectedObj);\n      expect(origExecCommand).toHaveBeenCalledWith('bold', false, 'something');\n      eventsOne.destroy();\n      eventsTwo.destroy();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should revert back to original execCommand when all listeners are removed","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":222,"updatePoint":{"line":222,"column":81,"index":8993},"code":"    it('should revert back to original execCommand when all listeners are removed', function () {\n      var origExecCommand = document.execCommand,\n        mockInstance = {\n          options: {\n            ownerDocument: document\n          }\n        },\n        eventsOne = new MediumEditor.Events(mockInstance),\n        eventsTwo = new MediumEditor.Events(mockInstance);\n      expect(document.execCommand).toBe(origExecCommand);\n      eventsOne.attachToExecCommand();\n      eventsTwo.attachToExecCommand();\n      expect(document.execCommand).not.toBe(origExecCommand);\n      eventsOne.detachExecCommand();\n      expect(document.execCommand).not.toBe(origExecCommand);\n      eventsTwo.detachExecCommand();\n      expect(document.execCommand).toBe(origExecCommand);\n      eventsOne.destroy();\n      eventsTwo.destroy();\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should wrap and unwrap execCommand when using MediumEditor methods","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":242,"updatePoint":{"line":242,"column":74,"index":9811},"code":"    it('should wrap and unwrap execCommand when using MediumEditor methods', function () {\n      var originalInputSupport = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = false;\n      spyOn(document, 'execCommand').and.callThrough();\n      var origExecCommand = document.execCommand,\n        editor = this.newMediumEditor('.editor');\n      editor.subscribe('editableInput', function () {});\n      expect(document.execCommand).not.toBe(origExecCommand);\n      editor.selectElement(editor.elements[0].firstChild);\n      document.execCommand('bold', null, false);\n      expect(origExecCommand).toHaveBeenCalledWith('bold', null, false);\n      editor.destroy();\n      expect(document.execCommand).toBe(origExecCommand);\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = originalInputSupport;\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should expose a method for calling all listeners manually","suites":["MediumEditor.Events TestCase","ExecCommand Listener"],"line":257,"updatePoint":{"line":257,"column":65,"index":10719},"code":"    it('should expose a method for calling all listeners manually', function () {\n      var originalInputSupport = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = false;\n      spyOn(document, 'execCommand').and.callThrough();\n      var origExecCommand = document.execCommand,\n        mockInstance = {\n          options: {\n            ownerDocument: document\n          }\n        },\n        eventsOne = new MediumEditor.Events(mockInstance),\n        eventsTwo = new MediumEditor.Events(mockInstance),\n        handlerOne = spyOn(eventsOne, 'handleDocumentExecCommand'),\n        handlerTwo = spyOn(eventsTwo, 'handleDocumentExecCommand'),\n        args = ['bold', false, 'something'];\n      eventsOne.attachToExecCommand();\n      eventsTwo.attachToExecCommand();\n      expect(document.execCommand).not.toBe(origExecCommand);\n      expect(document.execCommand.listeners.length).toBe(2);\n      expect(document.execCommand.callListeners).not.toBeUndefined();\n      expect(handlerOne).not.toHaveBeenCalled();\n      expect(handlerTwo).not.toHaveBeenCalled();\n      document.execCommand.callListeners(args, true);\n      var expectedObj = {\n        command: 'bold',\n        value: 'something',\n        args: args,\n        result: true\n      };\n      expect(handlerOne).toHaveBeenCalledWith(expectedObj);\n      expect(handlerTwo).toHaveBeenCalledWith(expectedObj);\n      expect(origExecCommand).not.toHaveBeenCalled();\n      eventsOne.destroy();\n      eventsTwo.destroy();\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = originalInputSupport;\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger when bolding text when input event is NOT supported","suites":["MediumEditor.Events TestCase","Custom EditableInput Listener"],"line":379,"updatePoint":{"line":379,"column":74,"index":16641},"code":"    it('should trigger when bolding text when input event is NOT supported', function () {\n      var originalInputSupport = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = false;\n      var editableTwo = this.createElement('div', 'editor', 'lore ipsum'),\n        firedTarget,\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button = toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]'),\n        handler = function (event, editable) {\n          firedTarget = editable;\n        };\n      expect(editor.elements.length).toBe(2);\n      editor.subscribe('editableInput', handler);\n      selectElementContentsAndFire(editableTwo.firstChild);\n      expect(firedTarget).toBeUndefined();\n      fireEvent(button, 'click');\n      jasmine.clock().tick(1);\n      expect(firedTarget).toBe(editableTwo);\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = originalInputSupport;\n    });","file":"events.spec.js","skipped":false,"dir":"spec"},{"name":"Should not execute javascript with disableReturn false","suites":["Exploits"],"line":12,"updatePoint":{"line":12,"column":60,"index":326},"code":"  it('Should not execute javascript with disableReturn false', function () {\n    var evt,\n      range,\n      editorEl = this.el,\n      sel = window.getSelection(),\n      editor = this.newMediumEditor('.editor', {\n        delay: 200,\n        disableReturn: false\n      }),\n      pasteHandler = editor.getExtensionByName('paste'),\n      test = {\n        source: 'img onerror handler',\n        paste: '><img src=\"x\" onerror=\"alert(\\'xss\\')\">',\n        output: '<span id=\"editor-inner\">&gt;&lt;img src=\"x\" onerror=\"alert(\\'xss\\')\"&gt;</span>'\n      };\n\n    // mock event with clipboardData API\n    // test requires creating a function, so can't loop or jslint balks\n    evt = {\n      preventDefault: function () {\n        return;\n      },\n      clipboardData: {\n        getData: function () {\n          // do we need to return different results for the different types? text/plain, text/html\n          return test.paste;\n        }\n      }\n    };\n    editorEl.innerHTML = '<span id=\"editor-inner\">&nbsp</span>';\n    range = document.createRange();\n    range.selectNodeContents(editorEl.firstChild);\n    sel.removeAllRanges();\n    sel.addRange(range);\n    pasteHandler.handlePaste(evt, editorEl);\n    jasmine.clock().tick(100);\n    expect(editorEl.innerHTML).toEqual(test.output);\n  });","file":"exploits.spec.js","skipped":false,"dir":"spec"},{"name":"Should not execute javascript with disableReturn true","suites":["Exploits"],"line":50,"updatePoint":{"line":50,"column":59,"index":1606},"code":"  it('Should not execute javascript with disableReturn true', function () {\n    var evt,\n      range,\n      editorEl = this.el,\n      sel = window.getSelection(),\n      editor = this.newMediumEditor('.editor', {\n        delay: 200,\n        disableReturn: true\n      }),\n      pasteHandler = editor.getExtensionByName('paste'),\n      test = {\n        source: 'img onerror handler',\n        paste: '><img src=\"x\" onerror=\"alert(\\'xss\\')\">',\n        output: '<span id=\"editor-inner\">&gt;&lt;img src=\"x\" onerror=\"alert(\\'xss\\')\"&gt;</span>'\n      };\n\n    // mock event with clipboardData API\n    // test requires creating a function, so can't loop or jslint balks\n    evt = {\n      preventDefault: function () {\n        return;\n      },\n      clipboardData: {\n        getData: function () {\n          // do we need to return different results for the different types? text/plain, text/html\n          return test.paste;\n        }\n      }\n    };\n    editorEl.innerHTML = '<span id=\"editor-inner\">&nbsp</span>';\n    range = document.createRange();\n    range.selectNodeContents(document.getElementById('editor-inner'));\n    sel.removeAllRanges();\n    sel.addRange(range);\n    pasteHandler.handlePaste(evt, editorEl);\n    jasmine.clock().tick(100);\n    expect(editorEl.innerHTML).toEqual(test.output);\n  });","file":"exploits.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a number of extensions as parameter","suites":["Extensions TestCase","Editor"],"line":14,"updatePoint":{"line":14,"column":57,"index":396},"code":"    it('should accept a number of extensions as parameter', function () {\n      var extensions = {\n          'extension1': {},\n          'extension2': {}\n        },\n        editor = this.newMediumEditor('.editor', {\n          extensions: extensions\n        });\n      expect(editor.options.extensions).toBe(extensions);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should set the base property to an instance of MediumEditor","suites":["Extensions TestCase","Editor"],"line":24,"updatePoint":{"line":24,"column":67,"index":733},"code":"    it('should set the base property to an instance of MediumEditor', function () {\n      var extOne = new MediumEditor.Extension(),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'one': extOne\n          }\n        });\n      expect(editor instanceof MediumEditor).toBeTruthy();\n      expect(extOne.base instanceof MediumEditor).toBeTruthy();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should not override the base or name properties of an extension if overriden","suites":["Extensions TestCase","Editor"],"line":34,"updatePoint":{"line":34,"column":84,"index":1139},"code":"    it('should not override the base or name properties of an extension if overriden', function () {\n      var TempExtension = MediumEditor.Extension.extend({\n          name: 'tempExtension',\n          base: 'something'\n        }),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'one': new TempExtension()\n          }\n        });\n      expect(editor.getExtensionByName('one')).toBeUndefined();\n      expect(editor.getExtensionByName('tempExtension').base).toBe('something');\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should set the name of property of extensions","suites":["Extensions TestCase","Editor"],"line":47,"updatePoint":{"line":47,"column":53,"index":1631},"code":"    it('should set the name of property of extensions', function () {\n      var ExtensionOne = function () {},\n        ExtensionTwo = function () {},\n        extOne = new ExtensionOne(),\n        extTwo = new ExtensionTwo(),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'one': extOne,\n            'two': extTwo\n          }\n        });\n      expect(extOne.name).toBe('one');\n      expect(extTwo.name).toBe('two');\n      expect(editor.getExtensionByName('one')).toBe(extOne);\n      expect(editor.getExtensionByName('two')).toBe(extTwo);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should set window and document properties on each extension","suites":["Extensions TestCase","Editor"],"line":63,"updatePoint":{"line":63,"column":67,"index":2229},"code":"    it('should set window and document properties on each extension', function () {\n      var TempExtension = MediumEditor.Extension.extend({}),\n        extInstance = new TempExtension(),\n        fakeDocument = {\n          body: document.body,\n          documentElement: document.documentElement,\n          querySelectorAll: function () {\n            return document.querySelectorAll.apply(document, arguments);\n          },\n          createElement: function () {\n            return document.createElement.apply(document, arguments);\n          },\n          execCommand: function () {\n            return document.execCommand.apply(document, arguments);\n          },\n          getElementById: function () {\n            return document.getElementById.apply(document, arguments);\n          }\n        },\n        fakeWindow = {\n          addEventListener: function () {\n            return window.addEventListener.apply(window, arguments);\n          },\n          removeEventListener: function () {\n            return window.removeEventListener.apply(window, arguments);\n          }\n        };\n      this.newMediumEditor('.editor', {\n        ownerDocument: fakeDocument,\n        contentWindow: fakeWindow,\n        extensions: {\n          'temp-extension': extInstance\n        }\n      });\n      expect(extInstance.window).toBe(fakeWindow);\n      expect(extInstance.document).toBe(fakeDocument);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should call destroy on extensions when being destroyed","suites":["Extensions TestCase","Editor"],"line":100,"updatePoint":{"line":100,"column":62,"index":3618},"code":"    it('should call destroy on extensions when being destroyed', function () {\n      var TempExtension = MediumEditor.Extension.extend({\n          destroy: function () {}\n        }),\n        extInstance = new TempExtension();\n      spyOn(extInstance, 'destroy');\n      var editor = this.newMediumEditor('.editor', {\n        extensions: {\n          'temp-extension': extInstance\n        }\n      });\n      editor.destroy();\n      expect(extInstance.destroy).toHaveBeenCalled();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"exists","suites":["Extensions TestCase","Core Extension"],"line":116,"updatePoint":{"line":116,"column":14,"index":4103},"code":"    it('exists', function () {\n      expect(MediumEditor.Extension).toBeTruthy();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"provides an .extend method","suites":["Extensions TestCase","Core Extension"],"line":119,"updatePoint":{"line":119,"column":34,"index":4213},"code":"    it('provides an .extend method', function () {\n      expect(MediumEditor.Extension.extend).toBeTruthy();\n      var Extended = MediumEditor.Extension.extend({\n        foo: 'bar'\n      });\n      expect(Extended.prototype.foo).toBe('bar');\n      expect(Extended.extend).toBe(MediumEditor.Extension.extend);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"can be passed as an extension","suites":["Extensions TestCase","Core Extension"],"line":127,"updatePoint":{"line":127,"column":37,"index":4532},"code":"    it('can be passed as an extension', function () {\n      var Sub, editor, e1, e2;\n      Sub = MediumEditor.Extension.extend({\n        y: 10\n      });\n      e1 = new Sub();\n      e2 = new Sub({\n        y: 20\n      });\n      spyOn(e1, 'init');\n      editor = this.newMediumEditor('.editor', {\n        extensions: {\n          'foo': e1,\n          'bar': e2\n        }\n      });\n      expect(e1.y).toBe(10);\n      expect(e2.y).toBe(20);\n      expect(e1.init).toHaveBeenCalledWith();\n      expect(e1.base).toBe(editor);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should not add default extensions when overriden","suites":["Extensions TestCase","Core Extension"],"line":148,"updatePoint":{"line":148,"column":56,"index":5076},"code":"    it('should not add default extensions when overriden', function () {\n      var editor, Preview, Placeholder, AutoLink, FileDragging, extPreview, extPlaceholder, extAutoLink, extFileDragging;\n      Preview = MediumEditor.Extension.extend({\n        name: 'anchor-preview'\n      });\n      Placeholder = MediumEditor.Extension.extend({\n        name: 'placeholder'\n      });\n      AutoLink = MediumEditor.Extension.extend({\n        name: 'auto-link'\n      });\n      FileDragging = MediumEditor.Extension.extend({\n        name: 'fileDragging'\n      });\n      extPreview = new Preview();\n      extPlaceholder = new Placeholder();\n      extAutoLink = new AutoLink();\n      extFileDragging = new FileDragging();\n      editor = this.newMediumEditor('.editor', {\n        extensions: {\n          'anchor-preview': extPreview,\n          'placeholder': extPlaceholder,\n          'auto-link': extAutoLink,\n          'fileDragging': extFileDragging\n        }\n      });\n      expect(editor.getExtensionByName('anchor-preview')).toBe(extPreview);\n      expect(editor.getExtensionByName('placeholder')).toBe(extPlaceholder);\n      expect(editor.getExtensionByName('auto-link')).toBe(extAutoLink);\n      expect(editor.getExtensionByName('fileDragging')).toBe(extFileDragging);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should call constructor function if it exists","suites":["Extensions TestCase","Core Extension"],"line":179,"updatePoint":{"line":179,"column":53,"index":6342},"code":"    it('should call constructor function if it exists', function () {\n      var editor, Sub, SubExtend, e1;\n      SubExtend = {\n        name: 'Sub',\n        constructor: function () {\n          // dummy constructor\n          return this;\n        }\n      };\n      spyOn(SubExtend, 'constructor');\n      Sub = MediumEditor.Extension.extend(SubExtend);\n      e1 = new Sub();\n      editor = this.newMediumEditor('.editor', {\n        extensions: {\n          'sub': e1\n        }\n      });\n      expect(SubExtend.constructor).toHaveBeenCalled();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should get helper methods to call into base instance methods","suites":["Extensions TestCase","All extensions"],"line":200,"updatePoint":{"line":200,"column":68,"index":6953},"code":"    it('should get helper methods to call into base instance methods', function () {\n      var noop = function () {},\n        helpers = {\n          'on': [document, 'click', noop, false],\n          'off': [document, 'click', noop, false],\n          'subscribe': ['editableClick', noop],\n          'execAction': ['bold'],\n          'trigger': ['someEvent', noop, this.el]\n        },\n        tempExtension = new MediumEditor.Extension(),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'temp-extension': tempExtension\n          }\n        });\n      Object.keys(helpers).forEach(function (helper) {\n        spyOn(editor, helper);\n      });\n      Object.keys(helpers).forEach(function (helper) {\n        tempExtension[helper].apply(tempExtension, helpers[helper]);\n        expect(editor[helper].calls.count()).toBe(1);\n      });\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to access the editor id via getEditorId()","suites":["Extensions TestCase","All extensions"],"line":223,"updatePoint":{"line":223,"column":64,"index":7820},"code":"    it('should be able to access the editor id via getEditorId()', function () {\n      var tempExtension = new MediumEditor.Extension(),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'temp-extension': tempExtension\n          }\n        });\n      expect(tempExtension.getEditorId()).toBe(editor.id);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to access elements in this editor via getEditorElements()","suites":["Extensions TestCase","All extensions"],"line":232,"updatePoint":{"line":232,"column":80,"index":8183},"code":"    it('should be able to access elements in this editor via getEditorElements()', function () {\n      var tempExtension = new MediumEditor.Extension(),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'temp-extension': tempExtension\n          }\n        });\n      expect(tempExtension.getEditorElements()).toBe(editor.elements);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to access editor options via getEditorOption()","suites":["Extensions TestCase","All extensions"],"line":241,"updatePoint":{"line":241,"column":69,"index":8547},"code":"    it('should be able to access editor options via getEditorOption()', function () {\n      var tempExtension = new MediumEditor.Extension(),\n        editor = this.newMediumEditor('.editor', {\n          disableReturn: true,\n          extensions: {\n            'temp-extension': tempExtension\n          }\n        });\n      expect(tempExtension.getEditorOption('disableReturn')).toBe(true);\n      expect(tempExtension.getEditorOption('spellcheck')).toBe(editor.options.spellcheck);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to prevent blur on the editor when user iteracts with extension elements","suites":["Extensions TestCase","All extensions"],"line":252,"updatePoint":{"line":252,"column":95,"index":9061},"code":"    it('should be able to prevent blur on the editor when user iteracts with extension elements', function () {\n      var sampleElOne = this.createElement('button', null, 'Test Button'),\n        sampleElTwo = this.createElement('textarea', null, 'Test Div'),\n        externalEl = this.createElement('div', 'external-element', 'External Element'),\n        TempExtension = MediumEditor.Extension.extend({\n          getInteractionElements: function () {\n            return [sampleElOne, sampleElTwo];\n          }\n        }),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'temp-extension': new TempExtension()\n          }\n        }),\n        spy = jasmine.createSpy('handler');\n      selectElementContentsAndFire(editor.elements[0]);\n      jasmine.clock().tick(1);\n      expect(editor.getExtensionByName('toolbar').isDisplayed()).toBe(true);\n      editor.subscribe('blur', spy);\n      fireEvent(sampleElTwo, 'mousedown');\n      fireEvent(sampleElTwo, 'mouseup');\n      fireEvent(sampleElTwo, 'click');\n      jasmine.clock().tick(51);\n      expect(spy).not.toHaveBeenCalled();\n      fireEvent(externalEl, 'mousedown');\n      fireEvent(document.body, 'mouseup');\n      fireEvent(document.body, 'click');\n      expect(spy).toHaveBeenCalled();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should include extensions button into toolbar","suites":["Extensions TestCase","Button integration"],"line":300,"updatePoint":{"line":300,"column":53,"index":10882},"code":"    it('should include extensions button into toolbar', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['dummy']\n          },\n          extensions: {\n            'dummy': ExtensionWithElement\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('.extension-button').length).toBe(1);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should call checkState on extensions when toolbar selection updates","suites":["Extensions TestCase","Button integration"],"line":312,"updatePoint":{"line":312,"column":75,"index":11342},"code":"    it('should call checkState on extensions when toolbar selection updates', function () {\n      var editor = this.newMediumEditor('.editor', {\n        toolbar: {\n          buttons: ['dummy']\n        },\n        extensions: {\n          'dummy': ExtensionWithElement\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0].firstChild, {\n        eventToFire: 'focus'\n      });\n      spyOn(ExtensionWithElement, 'checkState').and.callThrough();\n      editor.checkSelection();\n      jasmine.clock().tick(51);\n      expect(ExtensionWithElement.checkState.calls.count()).toEqual(1);\n      jasmine.clock().uninstall();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should include extensions button by string into the toolbar","suites":["Extensions TestCase","Button integration"],"line":330,"updatePoint":{"line":330,"column":67,"index":11972},"code":"    it('should include extensions button by string into the toolbar', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['dummy']\n          },\n          extensions: {\n            'dummy': ExtensionWithString\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('.extension-button').length).toBe(1);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should not include extensions button into toolbar that are not in \"buttons\"","suites":["Extensions TestCase","Button integration"],"line":342,"updatePoint":{"line":342,"column":83,"index":12439},"code":"    it('should not include extensions button into toolbar that are not in \"buttons\"', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold']\n          },\n          extensions: {\n            'dummy': ExtensionWithElement\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('.extension-button').length).toBe(0);\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should not include buttons into the toolbar when an overriding extension is present","suites":["Extensions TestCase","Button integration"],"line":354,"updatePoint":{"line":354,"column":91,"index":12914},"code":"    it('should not include buttons into the toolbar when an overriding extension is present', function () {\n      var ext = new ExtensionWithNoButton(),\n        editor;\n      spyOn(ext, 'init');\n      editor = this.newMediumEditor('.editor', {\n        toolbar: {\n          buttons: ['bold', 'italic']\n        },\n        extensions: {\n          'bold': ext\n        }\n      });\n      var toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('button').length).toBe(1);\n      expect(toolbar.getToolbarElement().querySelectorAll('button[data-action=\"italic\"]').length).toBe(1);\n      expect(toolbar.getToolbarElement().querySelectorAll('button[data-action=\"bold\"]').length).toBe(0);\n      expect(ext.init).toHaveBeenCalled();\n    });","file":"extension.spec.js","skipped":false,"dir":"spec"},{"name":"should display the font name form when toolbar is visible","suites":["Font Name Button TestCase","Click"],"line":28,"updatePoint":{"line":28,"column":65,"index":835},"code":"    it('should display the font name form when toolbar is visible', function () {\n      spyOn(MediumEditor.extensions.fontName.prototype, 'showForm').and.callThrough();\n      var button,\n        editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontName\"]');\n      fireEvent(button, 'click');\n      expect(toolbar.getToolbarActionsElement().style.display).toBe('none');\n      expect(fontNameExtension.isDisplayed()).toBe(true);\n      expect(fontNameExtension.showForm).toHaveBeenCalled();\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should change font name when select is changed","suites":["Font Name Button TestCase","Font Name"],"line":43,"updatePoint":{"line":43,"column":54,"index":1625},"code":"    it('should change font name when select is changed', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['fontname']\n          },\n          buttonLabels: 'fontawesome'\n        }),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        select;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontName\"]');\n      fireEvent(button, 'click');\n      select = fontNameExtension.getSelect();\n      select.value = 'Arial';\n      selectElementContents(this.el);\n      fireEvent(select, 'change');\n      expect(document.execCommand).toHaveBeenCalledWith('fontName', false, 'Arial');\n      fireEvent(fontNameExtension.getForm().querySelector('a.medium-editor-toobar-save'), 'click');\n      testFontNameContents(this.el, 'Arial');\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should display current font name when displayed","suites":["Font Name Button TestCase","Font Name"],"line":66,"updatePoint":{"line":66,"column":55,"index":2643},"code":"    it('should display current font name when displayed', function () {\n      spyOn(MediumEditor.extensions.fontName.prototype, 'showForm').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        toolbar = editor.getExtensionByName('toolbar');\n      this.el.innerHTML = '<font face=\"Arial\">lorem ipsum dolor</font>';\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"fontName\"]'), 'click');\n      expect(fontNameExtension.showForm).toHaveBeenCalledWith('Arial');\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should revert font name when select value is set to empty","suites":["Font Name Button TestCase","Font Name"],"line":76,"updatePoint":{"line":76,"column":65,"index":3321},"code":"    it('should revert font name when select value is set to empty', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      spyOn(MediumEditor.extensions.fontName.prototype, 'clearFontName').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        select;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontName\"]');\n      fireEvent(button, 'click');\n      select = fontNameExtension.getSelect();\n      select.value = 'Arial';\n      selectElementContents(editor.elements[0]);\n      fireEvent(select, 'change');\n      expect(document.execCommand).toHaveBeenCalledWith('fontName', false, 'Arial');\n      expect(fontNameExtension.clearFontName).not.toHaveBeenCalled();\n      testFontNameContents(this.el, 'Arial');\n      select.value = '';\n      selectElementContents(editor.elements[0]);\n      fireEvent(select, 'change');\n      fireEvent(fontNameExtension.getForm().querySelector('a.medium-editor-toobar-save'), 'click');\n      testFontNameContents(this.el, null); // TODO: remove the <font> element entirely instead of just the `size` attribute\n      expect(fontNameExtension.clearFontName).toHaveBeenCalled();\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should close the font name form when user clicks on cancel","suites":["Font Name Button TestCase","Cancel"],"line":103,"updatePoint":{"line":103,"column":66,"index":4761},"code":"    it('should close the font name form when user clicks on cancel', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'showAndUpdateToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        select,\n        cancel;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontName\"]');\n      cancel = fontNameExtension.getForm().querySelector('a.medium-editor-toobar-close');\n      fireEvent(button, 'click');\n      expect(fontNameExtension.isDisplayed()).toBe(true);\n      select = editor.getExtensionByName('fontname').getSelect();\n      select.value = 'Arial';\n      fireEvent(select, 'change');\n      fireEvent(cancel, 'click');\n      expect(this.el.innerHTML).toMatch(/^(<font>)?lorem ipsum(<\\/font>)?$/i);\n      expect(select.value).toBe('');\n      expect(toolbar.showAndUpdateToolbar).toHaveBeenCalled();\n      expect(fontNameExtension.isDisplayed()).toBe(false);\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should destroy the font name extension and remove the form","suites":["Font Name Button TestCase","Destroying MediumEditor"],"line":127,"updatePoint":{"line":127,"column":66,"index":5975},"code":"    it('should destroy the font name extension and remove the form', function () {\n      spyOn(MediumEditor.extensions.fontName.prototype, 'destroy').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontNameExtension = editor.getExtensionByName('fontname'),\n        form = fontNameExtension.getForm();\n      expect(MediumEditor.util.isDescendant(document.body, form)).toBe(true);\n      editor.destroy();\n      expect(fontNameExtension.destroy).toHaveBeenCalled();\n      expect(MediumEditor.util.isDescendant(document.body, form)).toBe(false);\n    });","file":"fontname.spec.js","skipped":false,"dir":"spec"},{"name":"should display the font size form when toolbar is visible","suites":["Font Size Button TestCase","Click"],"line":28,"updatePoint":{"line":28,"column":65,"index":842},"code":"    it('should display the font size form when toolbar is visible', function () {\n      spyOn(MediumEditor.extensions.fontSize.prototype, 'showForm').and.callThrough();\n      var button,\n        editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontSize\"]');\n      fireEvent(button, 'click');\n      expect(toolbar.getToolbarActionsElement().style.display).toBe('none');\n      expect(fontSizeExtension.isDisplayed()).toBe(true);\n      expect(fontSizeExtension.showForm).toHaveBeenCalled();\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should change font size when slider is moved","suites":["Font Size Button TestCase","Font Size"],"line":43,"updatePoint":{"line":43,"column":52,"index":1630},"code":"    it('should change font size when slider is moved', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['fontsize']\n          },\n          buttonLabels: 'fontawesome'\n        }),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontSize\"]');\n      fireEvent(button, 'click');\n      input = fontSizeExtension.getInput();\n      input.value = '7';\n      selectElementContents(this.el);\n      fireEvent(input, 'change');\n      expect(document.execCommand).toHaveBeenCalledWith('fontSize', false, '7');\n      fireEvent(fontSizeExtension.getForm().querySelector('a.medium-editor-toobar-save'), 'click');\n      testFontSizeContents(this.el, '7');\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should display current font size when displayed","suites":["Font Size Button TestCase","Font Size"],"line":66,"updatePoint":{"line":66,"column":55,"index":2631},"code":"    it('should display current font size when displayed', function () {\n      spyOn(MediumEditor.extensions.fontSize.prototype, 'showForm').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        toolbar = editor.getExtensionByName('toolbar');\n      this.el.innerHTML = '<font size=\"7\">lorem ipsum dolor</font>';\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"fontSize\"]'), 'click');\n      expect(fontSizeExtension.showForm).toHaveBeenCalledWith('7');\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should revert font size when slider value is set to 4","suites":["Font Size Button TestCase","Font Size"],"line":76,"updatePoint":{"line":76,"column":61,"index":3297},"code":"    it('should revert font size when slider value is set to 4', function () {\n      spyOn(document, 'execCommand').and.callThrough();\n      spyOn(MediumEditor.extensions.fontSize.prototype, 'clearFontSize').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontSize\"]');\n      fireEvent(button, 'click');\n      input = fontSizeExtension.getInput();\n      input.value = '1';\n      selectElementContents(editor.elements[0]);\n      fireEvent(input, 'change');\n      expect(document.execCommand).toHaveBeenCalledWith('fontSize', false, '1');\n      expect(fontSizeExtension.clearFontSize).not.toHaveBeenCalled();\n      testFontSizeContents(this.el, '1');\n      input.value = '4';\n      selectElementContents(editor.elements[0]);\n      fireEvent(input, 'change');\n      fireEvent(fontSizeExtension.getForm().querySelector('a.medium-editor-toobar-save'), 'click');\n      testFontSizeContents(this.el, null); // TODO: remove the <font> element entirely instead of just the `size` attribute\n      expect(fontSizeExtension.clearFontSize).toHaveBeenCalled();\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should close the font size form when user clicks on cancel","suites":["Font Size Button TestCase","Cancel"],"line":103,"updatePoint":{"line":103,"column":66,"index":4719},"code":"    it('should close the font size form when user clicks on cancel', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'showAndUpdateToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        button,\n        input,\n        cancel;\n      selectElementContentsAndFire(editor.elements[0]);\n      button = toolbar.getToolbarElement().querySelector('[data-action=\"fontSize\"]');\n      cancel = fontSizeExtension.getForm().querySelector('a.medium-editor-toobar-close');\n      fireEvent(button, 'click');\n      expect(fontSizeExtension.isDisplayed()).toBe(true);\n      input = editor.getExtensionByName('fontsize').getInput();\n      input.value = '7';\n      fireEvent(input, 'change');\n      fireEvent(cancel, 'click');\n      expect(this.el.innerHTML).toMatch(/^(<font>)?lorem ipsum(<\\/font>)?$/i);\n      // IE9 doesn't support sliders\n      if (isIE9()) {\n        expect(input.value).toBe('');\n      } else {\n        expect(input.value).toBe('4');\n      }\n      expect(toolbar.showAndUpdateToolbar).toHaveBeenCalled();\n      expect(fontSizeExtension.isDisplayed()).toBe(false);\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should destroy the font size extension and remove the form","suites":["Font Size Button TestCase","Destroying MediumEditor"],"line":132,"updatePoint":{"line":132,"column":66,"index":6045},"code":"    it('should destroy the font size extension and remove the form', function () {\n      spyOn(MediumEditor.extensions.fontSize.prototype, 'destroy').and.callThrough();\n      var editor = this.newMediumEditor('.editor', this.mediumOpts),\n        fontSizeExtension = editor.getExtensionByName('fontsize'),\n        form = fontSizeExtension.getForm();\n      expect(MediumEditor.util.isDescendant(document.body, form)).toBe(true);\n      editor.destroy();\n      expect(fontSizeExtension.destroy).toHaveBeenCalled();\n      expect(MediumEditor.util.isDescendant(document.body, form)).toBe(false);\n    });","file":"fontsize.spec.js","skipped":false,"dir":"spec"},{"name":"should be bolded and unbolded when using a full-bold command","suites":["Full Content Action TestCase","All editable contents"],"line":14,"updatePoint":{"line":14,"column":68,"index":421},"code":"    it('should be bolded and unbolded when using a full-bold command', function () {\n      /*jslint regexp: true*/\n      var resultRegEx = /^<(b|strong)>lorem ipsum<\\/(b|strong)>$/gi;\n      /*jslint regexp: false*/\n\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0]);\n      editor.execAction('full-bold');\n      expect(this.el.innerHTML).toBe('lorem ipsum');\n      editor.execAction('full-bold');\n      expect(resultRegEx.test(this.el.innerHTML)).toBe(true);\n    });","file":"full-content.spec.js","skipped":false,"dir":"spec"},{"name":"should preserve selection after multiple full-content commands","suites":["Full Content Action TestCase","Selection"],"line":29,"updatePoint":{"line":29,"column":70,"index":1038},"code":"    it('should preserve selection after multiple full-content commands', function () {\n      this.el.innerHTML = '<p>lorem <u>ipsum</u> dolor</p>';\n      var editor = this.newMediumEditor('.editor'),\n        // Beacuse not all browsers use <strike> or <s>, check for both\n        sTagO = '<(s|strike)>',\n        sTagC = '</(s|strike)>',\n        regex = new RegExp('^<p><u>lorem ' + sTagO + 'ipsum' + sTagC + ' dolor</u></p>$');\n      selectElementContentsAndFire(editor.elements[0].querySelector('u'));\n      editor.execAction('full-underline');\n      expect(this.el.innerHTML).toBe('<p>lorem ipsum dolor</p>');\n      editor.execAction('full-underline');\n      expect(this.el.innerHTML).toBe('<p><u>lorem ipsum dolor</u></p>');\n\n      // Ensure the selection is still maintained\n      editor.execAction('strikethrough');\n      expect(this.el.innerHTML).toMatch(regex);\n    });","file":"full-content.spec.js","skipped":false,"dir":"spec"},{"name":"should justify all contents including multiple block elements","suites":["Full Content Action TestCase","Selection"],"line":46,"updatePoint":{"line":46,"column":69,"index":1914},"code":"    it('should justify all contents including multiple block elements', function () {\n      this.el.innerHTML = '<p align=\"center\">lorem ipsum dolor</p><p align=\"left\">lorem ipsum dolor</p>';\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(window.getComputedStyle(editor.elements[0].childNodes[0]).getPropertyValue('text-align').indexOf('center')).not.toBe(-1);\n      expect(window.getComputedStyle(editor.elements[0].childNodes[1]).getPropertyValue('text-align').indexOf('left')).not.toBe(-1);\n      editor.execAction('full-justifyRight');\n      expect(window.getComputedStyle(editor.elements[0].childNodes[0]).getPropertyValue('text-align').indexOf('right')).not.toBe(-1);\n      expect(window.getComputedStyle(editor.elements[0].childNodes[1]).getPropertyValue('text-align').indexOf('right')).not.toBe(-1);\n\n      // Ensure only original selected <p> is affected\n      editor.execAction('justifyFull');\n      expect(window.getComputedStyle(editor.elements[0].childNodes[0]).getPropertyValue('text-align')).toBe('justify');\n      expect(window.getComputedStyle(editor.elements[0].childNodes[1]).getPropertyValue('text-align').indexOf('right')).not.toBe(-1);\n    });","file":"full-content.spec.js","skipped":false,"dir":"spec"},{"name":"header intact after leading return","suites":["Protect Header Tags TestCase","ProtectHeaderTags"],"line":15,"updatePoint":{"line":15,"column":42,"index":451},"code":"    it('header intact after leading return', function () {\n      // place cursor at begining of header\n      var editor = this.newMediumEditor('.editor'),\n        el = document.getElementById('header'),\n        range = document.createRange(),\n        sel = window.getSelection();\n      range.setStart(el, 0);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n\n      // hit return\n      fireEvent(editor.elements[0], 'keypress', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      el = document.getElementById('header');\n      expect(el).toBeDefined();\n      expect(el.nodeName.toLowerCase()).toBe('h2');\n    });","file":"header-tags.spec.js","skipped":false,"dir":"spec"},{"name":"header leading return inserts paragraph, not additional header","suites":["Protect Header Tags TestCase","ProtectHeaderTags"],"line":34,"updatePoint":{"line":34,"column":70,"index":1140},"code":"    it('header leading return inserts paragraph, not additional header', function () {\n      // place cursor at begining of header\n      var editor = this.newMediumEditor('.editor'),\n        el = document.getElementById('header'),\n        range = document.createRange(),\n        sel = window.getSelection();\n      range.setStart(el, 0);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n\n      // hit return\n      fireEvent(editor.elements[0], 'keypress', {\n        keyCode: MediumEditor.util.keyCode.ENTER\n      });\n      el = document.getElementById('header');\n      expect(el.previousElementSibling.nodeName.toLowerCase()).toBe('p');\n    });","file":"header-tags.spec.js","skipped":false,"dir":"spec"},{"name":"header leading backspace into empty p preserves header","suites":["Protect Header Tags TestCase","ProtectHeaderTags"],"line":52,"updatePoint":{"line":52,"column":62,"index":1811},"code":"    it('header leading backspace into empty p preserves header', function () {\n      // place cursor at begining of header\n      var editor = this.newMediumEditor('.editor'),\n        originalHTML = document.getElementById('editor').innerHTML,\n        el = document.getElementById('header'),\n        range = document.createRange(),\n        sel = window.getSelection();\n      range.setStart(el, 0);\n      range.collapse(true);\n      sel.removeAllRanges();\n      sel.addRange(range);\n\n      // hit backspace\n      fireEvent(editor.elements[0].querySelector(el.nodeName.toLowerCase()), 'keydown', {\n        keyCode: MediumEditor.util.keyCode.BACKSPACE\n      });\n      el = document.getElementById('header');\n      expect(el).toBeDefined();\n      expect(el.nodeName.toLowerCase()).toBe('h2');\n      el = document.getElementById('editor');\n      expect(el.innerHTML).not.toBe(originalHTML);\n    });","file":"header-tags.spec.js","skipped":false,"dir":"spec"},{"name":"should call init when instantiated","suites":["Initialization TestCase","Objects"],"line":14,"updatePoint":{"line":14,"column":42,"index":349},"code":"    it('should call init when instantiated', function () {\n      spyOn(MediumEditor.prototype, 'init');\n      var editor = this.newMediumEditor('.test');\n      expect(editor.init).toHaveBeenCalled();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should accept multiple instances","suites":["Initialization TestCase","Objects"],"line":19,"updatePoint":{"line":19,"column":40,"index":555},"code":"    it('should accept multiple instances', function () {\n      spyOn(MediumEditor.prototype, 'init');\n      var editor1 = this.newMediumEditor('.test'),\n        editor2 = this.newMediumEditor('.test');\n      expect(editor1 === editor2).toBe(false);\n      expect(MediumEditor.prototype.init).toHaveBeenCalled();\n      expect(MediumEditor.prototype.init.calls.count()).toBe(2);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should do nothing when selector does not return any elements","suites":["Initialization TestCase","Objects"],"line":27,"updatePoint":{"line":27,"column":68,"index":967},"code":"    it('should do nothing when selector does not return any elements', function () {\n      spyOn(MediumEditor.prototype, 'setup');\n      var editor = this.newMediumEditor('.test');\n      expect(editor.isActive).toBeFalsy();\n      expect(editor.events).toBeUndefined();\n      expect(editor.getExtensionByName('toolbar')).toBeUndefined();\n      expect(editor.getExtensionByName('anchor')).toBeUndefined();\n      expect(editor.getExtensionByName('anchor-preview')).toBeUndefined();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should allow a string as parameter","suites":["Initialization TestCase","Elements"],"line":38,"updatePoint":{"line":38,"column":42,"index":1471},"code":"    it('should allow a string as parameter', function () {\n      spyOn(document, 'querySelectorAll').and.callThrough();\n      this.newMediumEditor('.test');\n      expect(document.querySelectorAll).toHaveBeenCalled();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should allow a list of html elements as parameters","suites":["Initialization TestCase","Elements"],"line":43,"updatePoint":{"line":43,"column":58,"index":1712},"code":"    it('should allow a list of html elements as parameters', function () {\n      var elements = document.querySelectorAll('span'),\n        editor = this.newMediumEditor(elements);\n      expect(editor.elements.length).toEqual(elements.length);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should allow a single element as parameter","suites":["Initialization TestCase","Elements"],"line":48,"updatePoint":{"line":48,"column":50,"index":1955},"code":"    it('should allow a single element as parameter', function () {\n      var element = document.querySelector('span'),\n        editor = this.newMediumEditor(element);\n      expect(editor.elements).toEqual([element]);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should always initalize elements as an Array","suites":["Initialization TestCase","Elements"],"line":53,"updatePoint":{"line":53,"column":52,"index":2182},"code":"    it('should always initalize elements as an Array', function () {\n      var nodeList = document.querySelectorAll('span'),\n        node = document.querySelector('span'),\n        editor = this.newMediumEditor(nodeList);\n\n      // nodeList is a NodeList, similar to an array but not of the same type\n      expect(editor.elements.length).toEqual(nodeList.length);\n      expect(Array.isArray(nodeList)).toBe(false);\n      expect(typeof editor.elements.forEach).toBe('function');\n      editor.destroy();\n      editor = this.newMediumEditor('span');\n      expect(editor.elements.length).toEqual(nodeList.length);\n      editor.destroy();\n      editor = this.newMediumEditor(node);\n      expect(editor.elements.length).toEqual(1);\n      expect(editor.elements[0]).toBe(node);\n      editor.destroy();\n      editor = this.newMediumEditor();\n      expect(editor.elements).not.toBe(null);\n      expect(editor.elements.length).toBe(0);\n      editor.destroy();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should be available after destroying and calling setup again","suites":["Initialization TestCase","Elements"],"line":75,"updatePoint":{"line":75,"column":68,"index":3155},"code":"    it('should be available after destroying and calling setup again', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements.length).toBe(1);\n      editor.destroy();\n      expect(editor.elements.length).toBe(0);\n      editor.setup();\n      expect(editor.elements.length).toBe(1);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should have a default set of options","suites":["Initialization TestCase","With a valid element"],"line":85,"updatePoint":{"line":85,"column":44,"index":3515},"code":"    it('should have a default set of options', function () {\n      var defaultOptions = {\n          delay: 0,\n          disableReturn: false,\n          disableDoubleReturn: false,\n          disableExtraSpaces: false,\n          disableEditing: false,\n          autoLink: false,\n          elementsContainer: document.body,\n          contentWindow: window,\n          ownerDocument: document,\n          buttonLabels: false,\n          targetBlank: false,\n          extensions: {},\n          activeButtonClass: 'medium-editor-button-active',\n          spellcheck: true\n        },\n        editor = this.newMediumEditor('.editor');\n      expect(Object.keys(editor.options).length).toBe(Object.keys(defaultOptions).length);\n      expect(_.isEqual(editor.options, defaultOptions)).toBe(true);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should accept custom options values","suites":["Initialization TestCase","With a valid element"],"line":106,"updatePoint":{"line":106,"column":43,"index":4305},"code":"    it('should accept custom options values', function () {\n      var options = {\n          delay: 300,\n          toolbar: {\n            diffLeft: 10,\n            diffTop: 5\n          },\n          anchor: {\n            placeholderText: 'test',\n            targetCheckboxText: 'new window?'\n          },\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        },\n        editor = this.newMediumEditor('.editor', options);\n      Object.keys(options).forEach(function (customOption) {\n        expect(editor.options[customOption]).toBe(options[customOption]);\n      });\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should call the default initialization methods","suites":["Initialization TestCase","With a valid element"],"line":127,"updatePoint":{"line":127,"column":54,"index":4942},"code":"    it('should call the default initialization methods', function () {\n      spyOn(MediumEditor.prototype, 'setup').and.callThrough();\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'createToolbar').and.callThrough();\n      spyOn(MediumEditor.extensions.anchor.prototype, 'createForm').and.callThrough();\n      spyOn(MediumEditor.extensions.anchorPreview.prototype, 'createPreview').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        anchorExtension = editor.getExtensionByName('anchor'),\n        anchorPreview = editor.getExtensionByName('anchor-preview'),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(editor.setup).toHaveBeenCalled();\n      expect(toolbar).not.toBeUndefined();\n      expect(toolbar.createToolbar).toHaveBeenCalled();\n      expect(anchorExtension).not.toBeUndefined();\n      expect(anchorExtension.createForm).toHaveBeenCalled();\n      expect(anchorPreview).not.toBeUndefined();\n      expect(anchorPreview.createPreview).toHaveBeenCalled();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should set the ID according to the numbers of editors instantiated","suites":["Initialization TestCase","With a valid element"],"line":144,"updatePoint":{"line":144,"column":74,"index":5989},"code":"    it('should set the ID according to the numbers of editors instantiated', function () {\n      var editor1 = this.newMediumEditor('.editor'),\n        firstId = editor1.id,\n        editor2 = this.newMediumEditor(this.createElement('div')),\n        editor3 = this.newMediumEditor(this.createElement('div'));\n      expect(editor2.id).toBe(firstId + 1);\n      expect(editor3.id).toBe(firstId + 2);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should not reset id when destroyed and then re-initialized","suites":["Initialization TestCase","With a valid element"],"line":152,"updatePoint":{"line":152,"column":66,"index":6385},"code":"    it('should not reset id when destroyed and then re-initialized', function () {\n      var editor1 = this.newMediumEditor('.editor'),\n        origId = editor1.id,\n        editor2;\n      this.createElement('div', 'editor-two');\n      editor2 = this.newMediumEditor('.editor-two');\n      editor1.destroy();\n      editor1.init('.editor');\n      expect(editor1.id).not.toEqual(editor2.id);\n      expect(editor1.id).toBe(origId);\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should use document.body as element container when no container element is specified","suites":["Initialization TestCase","With a valid element"],"line":163,"updatePoint":{"line":163,"column":92,"index":6846},"code":"    it('should use document.body as element container when no container element is specified', function () {\n      spyOn(document.body, 'appendChild').and.callThrough();\n      this.newMediumEditor('.editor');\n      expect(document.body.appendChild).toHaveBeenCalled();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a custom element container for MediumEditor elements","suites":["Initialization TestCase","With a valid element"],"line":168,"updatePoint":{"line":168,"column":74,"index":7105},"code":"    it('should accept a custom element container for MediumEditor elements', function () {\n      var div = this.createElement('div');\n      spyOn(div, 'appendChild').and.callThrough();\n      this.newMediumEditor('.editor', {\n        elementsContainer: div\n      });\n      expect(div.appendChild).toHaveBeenCalled();\n    });","file":"init.spec.js","skipped":false,"dir":"spec"},{"name":"should be executed when the keys are pressed","suites":["KeyboardCommands TestCase","execAction"],"line":14,"updatePoint":{"line":14,"column":52,"index":402},"code":"    it('should be executed when the keys are pressed', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0]);\n      // bold\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'B'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('bold');\n\n      // italics\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'I'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('italic');\n\n      // underline\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'U'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('underline');\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should be executed for custom commands","suites":["KeyboardCommands TestCase","execAction"],"line":42,"updatePoint":{"line":42,"column":46,"index":1297},"code":"    it('should be executed for custom commands', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor', {\n        keyboardCommands: {\n          commands: [{\n            command: 'superscript',\n            key: 'p',\n            meta: true,\n            shift: false,\n            alt: false\n          }, {\n            command: 'subscript',\n            key: 'p',\n            meta: true,\n            shift: true,\n            alt: false\n          }]\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'p'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('subscript');\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'p'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('superscript');\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should execute custom command functions","suites":["KeyboardCommands TestCase","execAction"],"line":76,"updatePoint":{"line":76,"column":47,"index":2327},"code":"    it('should execute custom command functions', function () {\n      var foo, editor;\n      foo = {\n        bar: function () {\n          return true;\n        }\n      };\n      spyOn(foo, 'bar');\n      editor = this.newMediumEditor('.editor', {\n        keyboardCommands: {\n          commands: [{\n            command: foo.bar,\n            key: 'f',\n            meta: true,\n            shift: false,\n            alt: false\n          }]\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'f'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: false\n      });\n      expect(foo.bar).toHaveBeenCalled();\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should be executed for custom command without alt defined","suites":["KeyboardCommands TestCase","execAction"],"line":106,"updatePoint":{"line":106,"column":65,"index":3122},"code":"    it('should be executed for custom command without alt defined', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor', {\n        keyboardCommands: {\n          commands: [{\n            command: 'superscript',\n            key: 'p',\n            meta: true,\n            shift: false\n          }, {\n            command: 'subscript',\n            key: 'r',\n            meta: true,\n            shift: false\n          }]\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0]);\n      // If alt-key is not pressed, command should still be executed\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'p'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        altKey: false\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('superscript');\n\n      // If alt-key is pressed, command should stil be executed\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'r'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        altKey: true\n      });\n      expect(editor.execAction).toHaveBeenCalledWith('subscript');\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should support the use of Alt key","suites":["KeyboardCommands TestCase","execAction"],"line":142,"updatePoint":{"line":142,"column":41,"index":4254},"code":"    it('should support the use of Alt key', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor', {\n        keyboardCommands: {\n          commands: [{\n            command: 'append-h1',\n            key: '1',\n            meta: true,\n            shift: false,\n            alt: true\n          }, {\n            command: 'append-h2',\n            key: '2',\n            meta: true,\n            shift: false,\n            alt: true\n          }, {\n            command: 'append-h3',\n            key: '3',\n            meta: true,\n            shift: false,\n            alt: true\n          }, {\n            command: 'append-h4',\n            key: '4',\n            meta: true,\n            shift: false,\n            alt: true\n          }, {\n            command: 'append-h5',\n            key: '5',\n            meta: true,\n            shift: false,\n            alt: true\n          }, {\n            command: 'append-h6',\n            key: '6',\n            meta: true,\n            shift: false,\n            alt: true\n          }]\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0]);\n      ['1', '2', '3', '4', '5', '6'].forEach(function (heading) {\n        fireEvent(editor.elements[0], 'keydown', {\n          keyCode: heading.toString().charCodeAt(0),\n          ctrlKey: true,\n          metaKey: true,\n          altKey: true\n        });\n        expect(editor.execAction).toHaveBeenCalledWith('append-h' + heading);\n      });\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should not execute the button action when shift key is pressed","suites":["KeyboardCommands TestCase","execAction"],"line":196,"updatePoint":{"line":196,"column":70,"index":5779},"code":"    it('should not execute the button action when shift key is pressed', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor');\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'B'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true\n      });\n      expect(editor.execAction).not.toHaveBeenCalled();\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should not execute when keyboard-commands are disabled","suites":["KeyboardCommands TestCase","execAction"],"line":208,"updatePoint":{"line":208,"column":62,"index":6245},"code":"    it('should not execute when keyboard-commands are disabled', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var editor = this.newMediumEditor('.editor', {\n        keyboardCommands: false\n      });\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'B'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true\n      });\n      expect(editor.execAction).not.toHaveBeenCalled();\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should not execute when the command key are false","suites":["KeyboardCommands TestCase","execAction"],"line":221,"updatePoint":{"line":221,"column":57,"index":6725},"code":"    it('should not execute when the command key are false', function () {\n      spyOn(MediumEditor.prototype, 'execAction');\n      var result,\n        editor = this.newMediumEditor('.editor', {\n          keyboardCommands: {\n            commands: [{\n              command: false,\n              key: 'J',\n              meta: true,\n              shift: false\n            }]\n          }\n        });\n      selectElementContentsAndFire(editor.elements[0]);\n      fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'J'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: false\n      });\n      expect(editor.execAction).not.toHaveBeenCalled();\n      result = fireEvent(editor.elements[0], 'keydown', {\n        keyCode: 'J'.charCodeAt(0),\n        ctrlKey: true,\n        metaKey: true,\n        shiftKey: true\n      });\n      expect(result).toBe(false, 'The command was not blocked because shift key was pressed');\n    });","file":"keyboard-commands.spec.js","skipped":false,"dir":"spec"},{"name":"should filter multi-line rich-text pastes","suites":["Pasting content","using cleanPastedHTML option"],"line":93,"updatePoint":{"line":93,"column":49,"index":24622},"code":"    it('should filter multi-line rich-text pastes', function () {\n      var i,\n        editorEl = this.el,\n        editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteHandler = editor.getExtensionByName('paste'),\n        // mock event with clipboardData API\n        // test requires creating a function, so can't loop or jslint balks\n        evt = {\n          pasteText: null,\n          preventDefault: function () {\n            return;\n          },\n          clipboardData: {\n            types: ['text/plain', 'text/html'],\n            getData: function () {\n              // do we need to return different results for the different types? text/plain, text/html\n              return this.pasteText;\n            }\n          }\n        };\n      for (i = 0; i < multiLineTests.length; i += 1) {\n        // move caret to editor\n        editorEl.innerHTML = '<span id=\"editor-inner\">&nbsp</span>';\n        selectElementContentsAndFire(editorEl);\n        evt.clipboardData.pasteText = multiLineTests[i].paste;\n        pasteHandler.handlePaste(evt, editorEl);\n        jasmine.clock().tick(100);\n        expect(editorEl.innerHTML).toEqual(multiLineTests[i].output);\n      }\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should add paragraphs to pasted plain-text","suites":["Pasting content","using cleanPastedHTML option"],"line":129,"updatePoint":{"line":129,"column":50,"index":25935},"code":"    it('should add paragraphs to pasted plain-text', function () {\n      var editorEl = this.el,\n        editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteHandler = editor.getExtensionByName('paste'),\n        // mock event with clipboardData API\n        // test requires creating a function, so can't loop or jslint balks\n        evt = {\n          preventDefault: function () {\n            return;\n          },\n          clipboardData: {\n            types: ['text/plain'],\n            getData: function (clipboardType) {\n              if (clipboardType === 'text/plain') {\n                return 'One\\n\\nTwo\\n\\nThree';\n              }\n            }\n          }\n        };\n\n      // move caret to editor\n      editorEl.innerHTML = '<span id=\"editor-inner\">&nbsp</span>';\n      selectElementContentsAndFire(editorEl);\n      pasteHandler.handlePaste(evt, editorEl);\n      jasmine.clock().tick(100);\n      expect(editorEl.innerHTML).toEqual('<p>One</p><p>Two</p><p>Three</p>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger editablePaste","suites":["Pasting content","using cleanPastedHTML option"],"line":162,"updatePoint":{"line":162,"column":36,"index":27043},"code":"    it('should trigger editablePaste', function () {\n      var editorEl = this.el,\n        editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('editablePaste', spy);\n\n      // move caret to editor\n      editorEl.innerHTML = '<span id=\"editor-inner\">&nbsp</span>';\n      selectElementContentsAndFire(editorEl);\n      expect(spy).not.toHaveBeenCalled();\n      var evt = prepareEvent(editorEl, 'paste');\n      firePreparedEvent(evt, editorEl, 'paste');\n      jasmine.clock().tick(1);\n      expect(spy).toHaveBeenCalledWith(evt, this.el);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should filter multi-line rich-text pastes when \"insertHTML\" command is not supported","suites":["Pasting content","using cleanPastedHTML option"],"line":182,"updatePoint":{"line":182,"column":92,"index":27812},"code":"    it('should filter multi-line rich-text pastes when \"insertHTML\" command is not supported', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      spyOn(document, 'queryCommandSupported').and.returnValue(false);\n      multiLineTests.forEach(function (test) {\n        this.el.innerHTML = '<span id=\"editor-inner\">lorem ipsum</span>';\n        selectElementContentsAndFire(this.el);\n        editor.cleanPaste(test.paste);\n        expect(this.el.innerHTML).toEqual(test.output);\n      }.bind(this));\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should add target=\"_blank\" on anchor","suites":["Pasting content","using cleanPastedHTML option"],"line":197,"updatePoint":{"line":197,"column":44,"index":28391},"code":"    it('should add target=\"_blank\" on anchor', function () {\n      var editor = this.newMediumEditor('.editor', {\n        targetBlank: true,\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      spyOn(document, 'queryCommandSupported').and.returnValue(false);\n      this.el.innerHTML = '<span id=\"editor-inner\">lorem ipsum</span>';\n      selectElementContentsAndFire(this.el);\n      editor.cleanPaste('<a href=\"http://0.0.0.0/bar.html\">foo<a>');\n      expect(this.el.innerHTML).toContain('target=\"_blank\"');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should insert a custom paste-bin on keydown of CTRL + V","suites":["Pasting content","using keyboard"],"line":213,"updatePoint":{"line":213,"column":63,"index":29029},"code":"    it('should insert a custom paste-bin on keydown of CTRL + V', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var pasteBin = contentEditables[1];\n      expect(pasteBin.innerHTML).toBe('%ME_PASTEBIN%');\n      expect(pasteBin.parentNode).toBe(document.body);\n      var range = document.getSelection().getRangeAt(0);\n      expect(MediumEditor.util.isDescendant(pasteBin, range.commonAncestorContainer, true)).toBe(true, 'Select is not within the paste bin');\n      expect(range.toString()).toBe('%ME_PASTEBIN%');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger handlePasteBinPaste when pasting into paste-bin","suites":["Pasting content","using keyboard"],"line":237,"updatePoint":{"line":237,"column":70,"index":30155},"code":"    it('should trigger handlePasteBinPaste when pasting into paste-bin', function () {\n      spyOn(MediumEditor.extensions.paste.prototype, 'handlePasteBinPaste').and.callThrough();\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteHandler = editor.getExtensionByName('paste');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var pasteBin = contentEditables[1],\n        evt = prepareEvent(pasteBin, 'paste');\n      firePreparedEvent(evt, pasteBin, 'paste');\n      expect(pasteHandler.handlePasteBinPaste).toHaveBeenCalledWith(evt);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should fire editablePaste event when pasting","suites":["Pasting content","using keyboard"],"line":261,"updatePoint":{"line":261,"column":52,"index":31233},"code":"    it('should fire editablePaste event when pasting', function () {\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('editablePaste', spy);\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(spy).not.toHaveBeenCalled();\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var evt = {\n          type: 'paste',\n          defaultPrevented: false,\n          preventDefault: function () {},\n          clipboardData: {\n            types: ['text/plain', 'text/html'],\n            getData: function () {\n              // do we need to return different results for the different types? text/plain, text/html\n              return 'pasted content';\n            }\n          }\n        },\n        pasteExtension = editor.getExtensionByName('paste');\n      pasteExtension.handlePasteBinPaste(evt);\n      jasmine.clock().tick(1);\n      expect(spy).toHaveBeenCalledWith({\n        currentTarget: editor.elements[0],\n        target: editor.elements[0]\n      }, editor.elements[0]);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should do nothing if default was prevented on paste event of the paste-bin","suites":["Pasting content","using keyboard"],"line":299,"updatePoint":{"line":299,"column":82,"index":32674},"code":"    it('should do nothing if default was prevented on paste event of the paste-bin', function () {\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteExtension = editor.getExtensionByName('paste');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var evt = {\n        type: 'paste',\n        defaultPrevented: true,\n        preventDefault: function () {},\n        clipboardData: {\n          types: ['text/plain', 'text/html'],\n          getData: function () {\n            // do we need to return different results for the different types? text/plain, text/html\n            return 'pasted content';\n          }\n        }\n      };\n      spyOn(evt, 'preventDefault');\n\n      // Paste should insert data from the clipboard, and prevent paste from happening in the paste-bin\n      pasteExtension.handlePasteBinPaste(evt);\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe('hhh');\n\n      // paste-bin should be gone\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should use clipboard data if available and not allow paste to happen","suites":["Pasting content","using keyboard"],"line":340,"updatePoint":{"line":340,"column":76,"index":34312},"code":"    it('should use clipboard data if available and not allow paste to happen', function () {\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteExtension = editor.getExtensionByName('paste');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var evt = {\n        type: 'paste',\n        preventDefault: function () {},\n        clipboardData: {\n          types: ['text/plain', 'text/html'],\n          getData: function () {\n            // do we need to return different results for the different types? text/plain, text/html\n            return 'pasted content';\n          }\n        }\n      };\n      spyOn(evt, 'preventDefault');\n\n      // Paste should insert data from the clipboard, and prevent paste from happening in the paste-bin\n      pasteExtension.handlePasteBinPaste(evt);\n      expect(evt.preventDefault).toHaveBeenCalled();\n      expect(this.el.innerHTML).toBe('pasted content');\n\n      // paste-bin should be gone\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should use html from the paste bin when clipboard data is not available","suites":["Pasting content","using keyboard"],"line":380,"updatePoint":{"line":380,"column":79,"index":35928},"code":"    it('should use html from the paste bin when clipboard data is not available', function () {\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteExtension = editor.getExtensionByName('paste');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var evt = {\n          type: 'paste',\n          preventDefault: function () {},\n          clipboardData: {\n            types: ['text/plain'],\n            getData: function () {\n              // do we need to return different results for the different types? text/plain, text/html\n              return null;\n            }\n          }\n        },\n        testHTML = '<b>HTML from <u>paste bin</u></b>',\n        pasteBin = contentEditables[1];\n      pasteBin.innerHTML = testHTML;\n      spyOn(evt, 'preventDefault');\n\n      // Paste should not be prevented on the paste bin\n      pasteExtension.handlePasteBinPaste(evt);\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n      jasmine.clock().tick(1);\n\n      // HTML from paste-bin should now be in the editor\n      expect(this.el.innerHTML).toMatch(new RegExp(testHTML + '(<br/?>)?'));\n\n      // paste-bin should be gone\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should use plain text when clipboard data is not available and paste-bin does not have real content","suites":["Pasting content","using keyboard"],"line":426,"updatePoint":{"line":426,"column":107,"index":37766},"code":"    it('should use plain text when clipboard data is not available and paste-bin does not have real content', function () {\n      var editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        }),\n        pasteExtension = editor.getExtensionByName('paste');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      var contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n      fireEvent(this.el, 'keydown', {\n        keyCode: MediumEditor.util.keyCode.V,\n        ctrlKey: true,\n        metaKey: true\n      });\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(2);\n      var evt = {\n          type: 'paste',\n          preventDefault: function () {},\n          clipboardData: {\n            types: ['text/plain'],\n            getData: function () {\n              // do we need to return different results for the different types? text/plain, text/html\n              return 'Plain Text';\n            }\n          }\n        },\n        pasteBin = contentEditables[1];\n      pasteBin.innerHTML = '';\n      spyOn(evt, 'preventDefault');\n\n      // Paste should not be prevented on the paste bin\n      pasteExtension.handlePasteBinPaste(evt);\n      expect(evt.preventDefault).not.toHaveBeenCalled();\n      jasmine.clock().tick(1);\n\n      // plaintext from the clipboard should now be in the editor\n      expect(this.el.innerHTML).toBe('Plain Text');\n\n      // paste-bin should be gone\n      contentEditables = document.body.querySelectorAll('[contentEditable=true]');\n      expect(contentEditables.length).toBe(1);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should filter inline rich-text","suites":["Pasting content","using cleanPaste"],"line":473,"updatePoint":{"line":473,"column":38,"index":39516},"code":"    it('should filter inline rich-text', function () {\n      var i,\n        editorEl = this.el,\n        editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true\n          }\n        });\n      for (i = 0; i < inlineTests.length; i += 1) {\n        // move caret to editor\n        editorEl.innerHTML = 'Before&nbsp;<span id=\"editor-inner\">&nbsp;</span>&nbsp;after.';\n        selectElementContents(document.getElementById('editor-inner'));\n        editor.cleanPaste(inlineTests[i].paste);\n        jasmine.clock().tick(100);\n\n        // Firefox and IE: doing an insertHTML while this <span> is selected results in the html being inserted inside of the span\n        // Firefox replace the &nbsp; other either side of the <span> with a space\n        // Webkit: doing an insertHTML while this <span> is selected results in the span being replaced completely\n        expect(editorEl.innerHTML).toMatch(new RegExp('^Before(&nbsp;|\\\\s)(<span id=\"editor-inner\">)?' + inlineTests[i].output + '(</span>)?(&nbsp;|\\\\s)after\\\\.$'));\n      }\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should filter inline rich-text when \"insertHTML\" command is not supported","suites":["Pasting content","using cleanPaste"],"line":496,"updatePoint":{"line":496,"column":81,"index":40686},"code":"    it('should filter inline rich-text when \"insertHTML\" command is not supported', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      spyOn(document, 'queryCommandSupported').and.returnValue(false);\n      inlineTests.forEach(function (test) {\n        this.el.innerHTML = 'Before&nbsp;<span id=\"editor-inner\">&nbsp;</span>&nbsp;after.';\n        selectElementContents(document.getElementById('editor-inner'));\n        editor.cleanPaste(test.paste);\n\n        // Firefox and IE: doing an insertHTML while this <span> is selected results in the html being inserted inside of the span\n        // Firefox replace the &nbsp; other either side of the <span> with a space\n        // Webkit: doing an insertHTML while this <span> is selected results in the span being replaced completely\n        expect(this.el.innerHTML).toMatch(new RegExp('^Before(&nbsp;|\\\\s)(<span id=\"editor-inner\">)?' + test.output + '(</span>)?(&nbsp;|\\\\s)after\\\\.$'));\n      }.bind(this));\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should respect custom replacments when passed during instantiation","suites":["Pasting content","using cleanPaste"],"line":515,"updatePoint":{"line":515,"column":74,"index":41765},"code":"    it('should respect custom replacments when passed during instantiation', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true,\n          cleanReplacements: [[new RegExp(/<label>/gi), '<sub>'], [new RegExp(/<\\/label>/gi), '</sub>']]\n        }\n      });\n      this.el.innerHTML = 'Before&nbsp;<span id=\"editor-inner\">&nbsp;</span>&nbsp;after.';\n      selectElementContents(document.getElementById('editor-inner'));\n      editor.cleanPaste('<label>div one</label><label>div two</label>');\n      expect(this.el.innerHTML).toMatch(new RegExp('^Before(&nbsp;|\\\\s)(<span id=\"editor-inner\">)?<sub>div one</sub><sub>div two</sub>(</span>)?(&nbsp;|\\\\s)after\\\\.$'));\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should respect custom replacements before builtin replacements.","suites":["Pasting content","using cleanPaste"],"line":528,"updatePoint":{"line":528,"column":71,"index":42526},"code":"    it('should respect custom replacements before builtin replacements.', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true,\n          preCleanReplacements: [[new RegExp(/<\\/?o:[a-z]*>/gi), 'foo']]\n        }\n      });\n      this.el.innerHTML = 'Before&nbsp;<span id=\"editor-inner\">&nbsp;</span>&nbsp;after.';\n      selectElementContents(document.getElementById('editor-inner'));\n\n      // Normally, the paste extension's regular expressions would clear the `<o:p></o:p>` tags,\n      // but our `preCleanReplacements` should transform them each to \"foo\" before the default\n      // cleanReplacement has a chance to see it.\n      editor.cleanPaste('<div><o:p></o:p></div>');\n      expect(this.el.innerHTML).toMatch(new RegExp('foofoo'));\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should cleanup only pasted element on multi-line when nothing is selected","suites":["Pasting content","using cleanPaste"],"line":545,"updatePoint":{"line":545,"column":81,"index":43379},"code":"    it('should cleanup only pasted element on multi-line when nothing is selected', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      this.el.innerHTML = '<div><img src=\"http://0.0.0.0/ohyeah.png\" /></div>';\n      selectElementContents(this.el.firstChild, {\n        collapse: true\n      });\n      editor.cleanPaste('<table><tr><td>test</td><td><br/></td></tr></table>');\n      expect(this.el.innerHTML).toContain('<img src=\"http://0.0.0.0/ohyeah.png\"></div>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should remove certain attributes and tags by default","suites":["Pasting content","using pasteHTML"],"line":561,"updatePoint":{"line":561,"column":60,"index":44002},"code":"    it('should remove certain attributes and tags by default', function () {\n      var editor = this.newMediumEditor('.editor');\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<p class=\"some-class\" style=\"font-weight: bold\" dir=\"ltr\"><meta name=\"description\" content=\"test\" />test</p>');\n      expect(editor.elements[0].innerHTML).toBe('<p>test</p>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should not remove node with \"empty\" content","suites":["Pasting content","using pasteHTML"],"line":567,"updatePoint":{"line":567,"column":51,"index":44379},"code":"    it('should not remove node with \"empty\" content', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          forcePlainText: false,\n          cleanPastedHTML: true\n        }\n      });\n      this.el.innerHTML = '<div>this is a div</div><figure id=\"editor-inner\">and this is a figure</figure>.';\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<table><tr><td>test</td><td><br/></td></tr></table>');\n      expect(this.el.innerHTML).toContain('<table><tbody><tr><td>test</td><td><br></td></tr></tbody></table>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a list of attrs to clean up","suites":["Pasting content","using pasteHTML"],"line":579,"updatePoint":{"line":579,"column":49,"index":44958},"code":"    it('should accept a list of attrs to clean up', function () {\n      var editor = this.newMediumEditor('.editor');\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<table class=\"medium-editor-table\" dir=\"ltr\" style=\"border: 1px solid red;\"><tbody><tr><td>test</td></tr></tbody></table>', {\n        cleanAttrs: ['style', 'dir']\n      });\n      expect(editor.elements[0].innerHTML).toBe('<table class=\"medium-editor-table\"><tbody><tr><td>test</td></tr></tbody></table>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a list of tags to clean up","suites":["Pasting content","using pasteHTML"],"line":587,"updatePoint":{"line":587,"column":48,"index":45462},"code":"    it('should accept a list of tags to clean up', function () {\n      var editor = this.newMediumEditor('.editor');\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<div><i>test</i><meta name=\"description\" content=\"test\" /><b>test</b></div>', {\n        cleanTags: ['meta', 'b']\n      });\n      expect(editor.elements[0].innerHTML).toBe('<div><i>test</i></div>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a list of tags to unwrap","suites":["Pasting content","using pasteHTML"],"line":595,"updatePoint":{"line":595,"column":46,"index":45856},"code":"    it('should accept a list of tags to unwrap', function () {\n      var editor = this.newMediumEditor('.editor');\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<div><i>test</i><sub><b>test</b></sub><sup>test</sup></div>', {\n        unwrapTags: ['sub', 'sup']\n      });\n      expect(editor.elements[0].innerHTML).toBe('<div><i>test</i><b>test</b>test</div>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should respect custom clean up options passed during instantiation","suites":["Pasting content","using pasteHTML"],"line":603,"updatePoint":{"line":603,"column":74,"index":46279},"code":"    it('should respect custom clean up options passed during instantiation', function () {\n      var editor = this.newMediumEditor('.editor', {\n        paste: {\n          cleanAttrs: ['style', 'dir'],\n          cleanTags: ['meta', 'b'],\n          unwrapTags: ['sub', 'sup']\n        }\n      });\n      selectElementContents(this.el.firstChild);\n      editor.pasteHTML('<table class=\"medium-editor-table\" dir=\"ltr\" style=\"border: 1px solid red;\"><tbody><tr><td>test</td></tr></tbody></table>' + '<div><i>test</i><meta name=\"description\" content=\"test\" /><b>test</b></div>' + '<div><i>test</i><sub><b>test</b></sub><sup>test</sup></div>');\n      expect(editor.elements[0].innerHTML).toBe('<table class=\"medium-editor-table\"><tbody><tr><td>test</td></tr></tbody></table>' + '<div><i>test</i></div>' + '<div><i>test</i>test</div>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should be handled consistantly","suites":["Pasting content","text with/without linebreaks"],"line":617,"updatePoint":{"line":617,"column":38,"index":47141},"code":"    it('should be handled consistantly', function () {\n      var range,\n        i,\n        editorEl = this.el,\n        sel = window.getSelection(),\n        editor = this.newMediumEditor('.editor', {\n          delay: 200,\n          disableReturn: false\n        }),\n        pasteHandler = editor.getExtensionByName('paste'),\n        // mock event with clipboardData API\n        // test requires creating a function, so can't loop or jslint balks\n        evt = {\n          pasteText: null,\n          preventDefault: function () {\n            return;\n          },\n          clipboardData: {\n            types: ['text/plain', 'text/html'],\n            getData: function () {\n              // do we need to return different results for the different types? text/plain, text/html\n              return this.pasteText;\n            }\n          }\n        };\n      for (i = 0; i < textTests.length; i += 1) {\n        editorEl.innerHTML = '<div id=\"editor-inner\">&nbsp;</div>';\n        range = document.createRange();\n        range.selectNodeContents(editorEl.firstChild);\n        sel.removeAllRanges();\n        sel.addRange(range);\n        evt.clipboardData.pasteText = textTests[i].paste;\n        pasteHandler.handlePaste(evt, editorEl);\n        jasmine.clock().tick(100);\n        expect(editorEl.innerHTML).toEqual(textTests[i].output);\n      }\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should be overrideable via paste options","suites":["Pasting content","using custom paste handler"],"line":656,"updatePoint":{"line":656,"column":48,"index":48555},"code":"    it('should be overrideable via paste options', function () {\n      var origInit = spyOn(MediumEditor.extensions.paste.prototype, 'init'),\n        newInit = jasmine.createSpy('spy'),\n        editor = this.newMediumEditor('.editor', {\n          paste: {\n            forcePlainText: false,\n            cleanPastedHTML: true,\n            init: newInit\n          }\n        });\n      expect(origInit).not.toHaveBeenCalled();\n      expect(newInit).toHaveBeenCalled();\n      selectElementContents(this.el.firstChild);\n      editor.cleanPaste('<p>One\\nTwo\\n</p>\\n\\n<p>Three Four</p>');\n      expect(editor.elements[0].innerHTML).toBe('<p>One Two </p><p>Three Four</p>');\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should be overrideable via custom extension","suites":["Pasting content","using custom paste handler"],"line":672,"updatePoint":{"line":672,"column":51,"index":49232},"code":"    it('should be overrideable via custom extension', function () {\n      var origInit = spyOn(MediumEditor.extensions.paste.prototype, 'init'),\n        newInit = jasmine.createSpy('spy'),\n        origPasteHTML = spyOn(MediumEditor.extensions.paste.prototype, 'pasteHTML'),\n        newPasteHTML = jasmine.createSpy('spy'),\n        customPasteHandler = {\n          name: 'paste',\n          init: newInit,\n          pasteHTML: newPasteHTML\n        },\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            paste: customPasteHandler\n          }\n        }),\n        testString = '<p>test</p>';\n      expect(origInit).not.toHaveBeenCalled();\n      expect(newInit).toHaveBeenCalled();\n      expect(editor.getExtensionByName('paste')).toBe(customPasteHandler);\n      editor.pasteHTML(testString);\n      expect(origPasteHTML).not.toHaveBeenCalled();\n      expect(newPasteHTML).toHaveBeenCalledWith(testString, undefined);\n    });","file":"paste.spec.js","skipped":false,"dir":"spec"},{"name":"should set placeholder for empty elements","suites":["MediumEditor.extensions.placeholder TestCase"],"line":13,"updatePoint":{"line":13,"column":47,"index":366},"code":"  it('should set placeholder for empty elements', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set a placeholder for elements with text content","suites":["MediumEditor.extensions.placeholder TestCase"],"line":17,"updatePoint":{"line":17,"column":65,"index":585},"code":"  it('should not set a placeholder for elements with text content', function () {\n    this.el.innerHTML = 'some text';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set a placeholder for elements with images only","suites":["MediumEditor.extensions.placeholder TestCase"],"line":22,"updatePoint":{"line":22,"column":64,"index":844},"code":"  it('should not set a placeholder for elements with images only', function () {\n    this.el.innerHTML = '<img src=\"../demo/img/roman.jpg\">';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set a placeholder for elements with unorderedlist","suites":["MediumEditor.extensions.placeholder TestCase"],"line":27,"updatePoint":{"line":27,"column":66,"index":1129},"code":"  it('should not set a placeholder for elements with unorderedlist', function () {\n    this.el.innerHTML = '<ul><li></li></ul>';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set a placeholder for elements with orderedlist","suites":["MediumEditor.extensions.placeholder TestCase"],"line":32,"updatePoint":{"line":32,"column":64,"index":1397},"code":"  it('should not set a placeholder for elements with orderedlist', function () {\n    this.el.innerHTML = '<ol><li></li></ol>';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set a placeholder for elements with table","suites":["MediumEditor.extensions.placeholder TestCase"],"line":37,"updatePoint":{"line":37,"column":58,"index":1659},"code":"  it('should not set a placeholder for elements with table', function () {\n    this.el.innerHTML = '<table></table>';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should set placeholder for elements with empty children","suites":["MediumEditor.extensions.placeholder TestCase"],"line":42,"updatePoint":{"line":42,"column":61,"index":1921},"code":"  it('should set placeholder for elements with empty children', function () {\n    this.el.innerHTML = '<p><br></p><div class=\"empty\"></div>';\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the placeholder on focus","suites":["MediumEditor.extensions.placeholder TestCase"],"line":47,"updatePoint":{"line":47,"column":44,"index":2183},"code":"  it('should remove the placeholder on focus', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    selectElementContentsAndFire(editor.elements[0]);\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the placeholder on click","suites":["MediumEditor.extensions.placeholder TestCase"],"line":53,"updatePoint":{"line":53,"column":44,"index":2520},"code":"  it('should remove the placeholder on click', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    fireEvent(editor.elements[0], 'click');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n    fireEvent(document.body, 'mousedown');\n    fireEvent(document.body, 'mouseup');\n    fireEvent(document.body, 'click');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    this.el.innerHTML = '<p>lorem</p><p id=\"target\">ipsum</p><p>dolor</p>';\n    fireEvent(document.getElementById('target'), 'click');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the placeholder on input, and NOT on click","suites":["MediumEditor.extensions.placeholder TestCase"],"line":66,"updatePoint":{"line":66,"column":62,"index":3289},"code":"  it('should remove the placeholder on input, and NOT on click', function () {\n    var editor = this.newMediumEditor('.editor', {\n      placeholder: {\n        hideOnClick: false\n      }\n    });\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    fireEvent(editor.elements[0], 'click');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    fireEvent(document.body, 'mousedown');\n    fireEvent(document.body, 'mouseup');\n    fireEvent(document.body, 'click');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    this.el.innerHTML = '<p>lorem</p><p id=\"target\">ipsum</p><p>dolor</p>';\n    editor.trigger('editableInput', {}, editor.elements[0]);\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n    this.el.innerHTML = '';\n    editor.trigger('editableInput', {}, editor.elements[0]);\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should add a placeholder to empty elements on blur","suites":["MediumEditor.extensions.placeholder TestCase"],"line":86,"updatePoint":{"line":86,"column":56,"index":4285},"code":"  it('should add a placeholder to empty elements on blur', function () {\n    this.el.innerHTML = 'some text';\n    var editor = this.newMediumEditor('.editor');\n    editor.elements[0].focus();\n    fireEvent(editor.elements[0], 'focus');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n    editor.elements[0].innerHTML = '';\n    fireEvent(document.body, 'mousedown');\n    fireEvent(document.body, 'mouseup');\n    fireEvent(document.body, 'click');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not add a placeholder to elements with text on blur","suites":["MediumEditor.extensions.placeholder TestCase"],"line":98,"updatePoint":{"line":98,"column":64,"index":4863},"code":"  it('should not add a placeholder to elements with text on blur', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    editor.elements[0].innerHTML = 'some text';\n    editor.selectElement(this.el.firstChild);\n    fireEvent(document.body, 'mousedown');\n    fireEvent(document.body, 'mouseup');\n    fireEvent(document.body, 'click');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the placeholder when the content is updated manually","suites":["MediumEditor.extensions.placeholder TestCase"],"line":110,"updatePoint":{"line":110,"column":72,"index":5447},"code":"  it('should remove the placeholder when the content is updated manually', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    editor.setContent('<p>lorem ipsum</p>');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not show a placeholder when input changes but editor is still empty","suites":["MediumEditor.extensions.placeholder TestCase"],"line":118,"updatePoint":{"line":118,"column":80,"index":5867},"code":"  it('should not show a placeholder when input changes but editor is still empty', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements[0].className).toContain('medium-editor-placeholder');\n    fireEvent(editor.elements[0], 'click');\n    editor.elements[0].focus();\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n    var toolbar = editor.getExtensionByName('toolbar');\n    fireEvent(editor.elements[0], 'blur');\n    fireEvent(toolbar.getToolbarElement().querySelector('[data-action=\"append-h2\"]'), 'click');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should add the default placeholder text when data-placeholder is not present","suites":["MediumEditor.extensions.placeholder TestCase"],"line":148,"updatePoint":{"line":148,"column":82,"index":7413},"code":"  it('should add the default placeholder text when data-placeholder is not present', function () {\n    var editor = this.newMediumEditor('.editor');\n    validatePlaceholderContent(editor.elements[0], MediumEditor.extensions.placeholder.prototype.text);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should add the default placeholder text when data-placeholder is not present on dynamically added elements","suites":["MediumEditor.extensions.placeholder TestCase"],"line":152,"updatePoint":{"line":152,"column":112,"index":7702},"code":"  it('should add the default placeholder text when data-placeholder is not present on dynamically added elements', function () {\n    var editor = this.newMediumEditor('.editor');\n    expect(editor.elements.length).toBe(1);\n    var newEl = this.createElement('div', 'other-element');\n    editor.addElements(newEl);\n    validatePlaceholderContent(newEl, MediumEditor.extensions.placeholder.prototype.text);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the added data-placeholder attribute when destroyed","suites":["MediumEditor.extensions.placeholder TestCase"],"line":159,"updatePoint":{"line":159,"column":71,"index":8072},"code":"  it('should remove the added data-placeholder attribute when destroyed', function () {\n    expect(this.el.hasAttribute('data-placeholder')).toBe(false);\n    var editor = this.newMediumEditor('.editor');\n    expect(this.el.getAttribute('data-placeholder')).toBe(MediumEditor.extensions.placeholder.prototype.text);\n    editor.destroy();\n    expect(this.el.hasAttribute('data-placeholder')).toBe(false);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the added data-placeholder attribute when elements are removed dynamically from the editor","suites":["MediumEditor.extensions.placeholder TestCase"],"line":166,"updatePoint":{"line":166,"column":110,"index":8520},"code":"  it('should remove the added data-placeholder attribute when elements are removed dynamically from the editor', function () {\n    var editor = this.newMediumEditor('.editor'),\n      newEl = this.createElement('div', 'other-element');\n    expect(newEl.hasAttribute('other-element')).toBe(false);\n    editor.addElements(newEl);\n    expect(newEl.getAttribute('data-placeholder')).toBe(MediumEditor.extensions.placeholder.prototype.text);\n    editor.removeElements('.other-element');\n    expect(newEl.hasAttribute('data-placeholder')).toBe(false);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not remove custom data-placeholder attribute when destroyed","suites":["MediumEditor.extensions.placeholder TestCase"],"line":175,"updatePoint":{"line":175,"column":72,"index":9033},"code":"  it('should not remove custom data-placeholder attribute when destroyed', function () {\n    var placeholderText = 'Custom placeholder';\n    this.el.setAttribute('data-placeholder', placeholderText);\n    var editor = this.newMediumEditor('.editor');\n    expect(this.el.getAttribute('data-placeholder')).toBe(placeholderText);\n    editor.destroy();\n    expect(this.el.getAttribute('data-placeholder')).toBe(placeholderText);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should use the data-placeholder when it is present","suites":["MediumEditor.extensions.placeholder TestCase"],"line":183,"updatePoint":{"line":183,"column":56,"index":9447},"code":"  it('should use the data-placeholder when it is present', function () {\n    var editor,\n      placeholderText = 'Custom placeholder';\n    this.el.setAttribute('data-placeholder', placeholderText);\n    editor = this.newMediumEditor('.editor');\n    validatePlaceholderContent(editor.elements[0], placeholderText);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should use custom placeholder text when passed as the placeholder.text option","suites":["MediumEditor.extensions.placeholder TestCase"],"line":190,"updatePoint":{"line":190,"column":83,"index":9793},"code":"  it('should use custom placeholder text when passed as the placeholder.text option', function () {\n    var placeholderText = 'Custom placeholder',\n      editor = this.newMediumEditor('.editor', {\n        placeholder: {\n          text: placeholderText\n        }\n      });\n    validatePlaceholderContent(editor.elements[0], placeholderText);\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not set placeholder for empty elements when placeholder is set to false","suites":["MediumEditor.extensions.placeholder TestCase"],"line":199,"updatePoint":{"line":199,"column":84,"index":10141},"code":"  it('should not set placeholder for empty elements when placeholder is set to false', function () {\n    var editor = this.newMediumEditor('.editor', {\n      placeholder: false\n    });\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"should not add a placeholder to empty elements on blur when placeholder is set to false","suites":["MediumEditor.extensions.placeholder TestCase"],"line":205,"updatePoint":{"line":205,"column":93,"index":10426},"code":"  it('should not add a placeholder to empty elements on blur when placeholder is set to false', function () {\n    this.el.innerHTML = 'some text';\n    var editor = this.newMediumEditor('.editor', {\n      placeholder: false\n    });\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n    editor.elements[0].innerHTML = '';\n    fireEvent(document.querySelector('div'), 'click');\n    expect(editor.elements[0].className).not.toContain('medium-editor-placeholder');\n  });","file":"placeholder.spec.js","skipped":false,"dir":"spec"},{"name":"is exposed on the MediumEditor ctor","suites":["MediumEditor.selection TestCase","Exposure"],"line":14,"updatePoint":{"line":14,"column":43,"index":415},"code":"    it('is exposed on the MediumEditor ctor', function () {\n      expect(MediumEditor.selection).toBeTruthy();\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should not export a position indicating the cursor is before an empty paragraph","suites":["MediumEditor.selection TestCase","exportSelection"],"line":19,"updatePoint":{"line":19,"column":87,"index":628},"code":"    it('should not export a position indicating the cursor is before an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>';\n      placeCursorInsideElement(this.el.querySelector('span'), 1); // end of first span\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(undefined);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a position indicating the cursor is at the beginning of a paragraph","suites":["MediumEditor.selection TestCase","exportSelection"],"line":25,"updatePoint":{"line":25,"column":89,"index":1079},"code":"    it('should export a position indicating the cursor is at the beginning of a paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><b>Whatever</b></p>';\n      placeCursorInsideElement(this.el.querySelector('b'), 0); // beginning of <b> tag\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(0);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should not export a position indicating the cursor is after an empty paragraph","suites":["MediumEditor.selection TestCase","exportSelection"],"line":31,"updatePoint":{"line":31,"column":86,"index":1513},"code":"    it('should not export a position indicating the cursor is after an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p>' + '<p class=\"target\">Whatever</p>';\n      // After the 'W' in whatever\n      placeCursorInsideElement(this.el.querySelector('p.target').firstChild, 1);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(undefined);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should not export a position indicating the cursor is after an empty paragraph (in a complicated markup case)","suites":["MediumEditor.selection TestCase","exportSelection"],"line":38,"updatePoint":{"line":38,"column":117,"index":2041},"code":"    it('should not export a position indicating the cursor is after an empty paragraph (in a complicated markup case)', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p>' + '<p>What<span class=\"target\">ever</span></p>';\n      // Before the 'e' in whatever\n      placeCursorInsideElement(this.el.querySelector('span.target').firstChild, 0);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(undefined);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a position indicating the cursor is in an empty paragraph","suites":["MediumEditor.selection TestCase","exportSelection"],"line":52,"updatePoint":{"line":52,"column":79,"index":3112},"code":"    it('should export a position indicating the cursor is in an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>';\n      placeCursorInsideElement(this.el.getElementsByTagName('p')[1], 0);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(1);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a position indicating the cursor is after an empty paragraph","suites":["MediumEditor.selection TestCase","exportSelection"],"line":58,"updatePoint":{"line":58,"column":82,"index":3534},"code":"    it('should export a position indicating the cursor is after an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>';\n      placeCursorInsideElement(this.el.getElementsByTagName('p')[2], 0);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(2);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a position indicating the cursor is after an empty block element","suites":["MediumEditor.selection TestCase","exportSelection"],"line":64,"updatePoint":{"line":64,"column":86,"index":3960},"code":"    it('should export a position indicating the cursor is after an empty block element', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><h1><br /></h1><h2><br /></h2><p>Whatever</p>';\n      placeCursorInsideElement(this.el.querySelector('h2'), 0);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.emptyBlocksIndex).toEqual(2);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a selection that specifies an image is the selection","suites":["MediumEditor.selection TestCase","exportSelection"],"line":70,"updatePoint":{"line":70,"column":74,"index":4382},"code":"    it('should export a selection that specifies an image is the selection', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" /></a> dolor</p>';\n      selectElementContents(this.el.querySelector('a'));\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.trailingImageCount).toBe(1);\n      expect(exportedSelection.start).toBe(12);\n      expect(exportedSelection.end).toBe(12);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a selection that can be imported when the selection starts with an image","suites":["MediumEditor.selection TestCase","exportSelection"],"line":78,"updatePoint":{"line":78,"column":94,"index":4915},"code":"    it('should export a selection that can be imported when the selection starts with an image', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" />img</a> dolor</p>';\n      selectElementContents(this.el.querySelector('a'));\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.trailingImageCount).toBe(undefined);\n      expect(exportedSelection.start).toBe(12);\n      expect(exportedSelection.end).toBe(15);\n      selectElementContents(this.el);\n      MediumEditor.selection.importSelection(exportedSelection, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('img');\n      if (range.startContainer.nodeName.toLowerCase() === 'a') {\n        expect(range.startContainer).toBe(this.el.querySelector('a'));\n        expect(range.startOffset).toBe(0);\n      } else {\n        expect(range.startContainer.nextSibling).toBe(this.el.querySelector('a'));\n        expect(range.startOffset).toBe(12);\n      }\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should export a selection that specifies an image is at the end of a selection","suites":["MediumEditor.selection TestCase","exportSelection"],"line":97,"updatePoint":{"line":97,"column":86,"index":6001},"code":"    it('should export a selection that specifies an image is at the end of a selection', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\">img<b><img src=\"../demo/img/medium-editor.jpg\" /><img src=\"../demo/img/roman.jpg\" /></b></a> dolor</p>';\n      selectElementContents(this.el.querySelector('a'));\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection.trailingImageCount).toBe(2);\n      expect(exportedSelection.start).toBe(12);\n      expect(exportedSelection.end).toBe(15);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to import an exported selection","suites":["MediumEditor.selection TestCase","importSelection"],"line":107,"updatePoint":{"line":107,"column":54,"index":6589},"code":"    it('should be able to import an exported selection', function () {\n      this.el.innerHTML = 'lorem <i>ipsum</i> dolor';\n      selectElementContents(this.el.querySelector('i'));\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(Object.keys(exportedSelection).sort()).toEqual(['end', 'start']);\n      selectElementContents(this.el);\n      expect(exportedSelection).not.toEqual(MediumEditor.selection.exportSelection(this.el, document));\n      MediumEditor.selection.importSelection(exportedSelection, this.el, document);\n      expect(exportedSelection).toEqual(MediumEditor.selection.exportSelection(this.el, document));\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should be able to import an exported selection that contain nodeTypes > 3","suites":["MediumEditor.selection TestCase","importSelection"],"line":117,"updatePoint":{"line":117,"column":81,"index":7300},"code":"    it('should be able to import an exported selection that contain nodeTypes > 3', function (done) {\n      this.el.innerHTML = '<div><p>stuff here <!-- comment nodeType is 8 --> additional stuff here </p></div>';\n      selectElementContents(this.el.querySelector('p'));\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(Object.keys(exportedSelection).sort()).toEqual(['end', 'start']);\n      selectElementContents(this.el);\n      expect(exportedSelection).toEqual(MediumEditor.selection.exportSelection(this.el, document));\n      MediumEditor.selection.importSelection(exportedSelection, this.el, document);\n      expect(exportedSelection).toEqual(MediumEditor.selection.exportSelection(this.el, document));\n      done();\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import an exported selection outside any anchor tag","suites":["MediumEditor.selection TestCase","importSelection"],"line":128,"updatePoint":{"line":128,"column":66,"index":8068},"code":"    it('should import an exported selection outside any anchor tag', function () {\n      this.el.innerHTML = '<p id=1>Hello world: <a href=\"#\">http://www.example.com</a></p><p id=2><br></p>';\n      var link = this.el.getElementsByTagName('a')[0];\n      placeCursorInsideElement(link.childNodes[0], link.childNodes[0].nodeValue.length);\n      expect(MediumEditor.util.isDescendant(link, window.getSelection().getRangeAt(0).startContainer, true)).toBe(true);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      MediumEditor.selection.importSelection(exportedSelection, this.el, document, true);\n      var range = window.getSelection().getRangeAt(0),\n        node = range.startContainer;\n\n      // For some reason, Safari mucks with the selection range and makes this case not hold\n      // since we only really care about whether this works in IE, and it works as expected\n      // in other browsers, just skip this assertion for Safari\n      if (!isSafari()) {\n        expect(MediumEditor.util.isDescendant(link, node, true)).toBe(false);\n      }\n      // Even though we set the range to use the P tag as the start container, Safari normalizes the range\n      // down to the text node. Setting the range to use the P tag for the start is necessary to support\n      // MSIE, where it removes the link when the cursor is placed at the end of the text node in the anchor.\n      while (node.nodeName.toLowerCase() !== 'p') {\n        node = node.parentNode;\n      }\n      expect(node.nodeName.toLowerCase()).toBe('p');\n      expect(node.getAttribute('id')).toBe('1');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import an exported non-collapsed selection after an empty paragraph","suites":["MediumEditor.selection TestCase","importSelection"],"line":155,"updatePoint":{"line":155,"column":82,"index":9755},"code":"    it('should import an exported non-collapsed selection after an empty paragraph', function () {\n      this.el.innerHTML = '<p>This is <a href=\"#\">a link</a></p><p><br/></p><p>not a link</p>';\n      var lastTextNode = this.el.childNodes[2].firstChild;\n      MediumEditor.selection.select(document, lastTextNode, 0, lastTextNode, 'not a link'.length);\n      var exportedSelection = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exportedSelection).toEqual({\n        start: 14,\n        end: 24,\n        emptyBlocksIndex: 2\n      });\n      MediumEditor.selection.importSelection(exportedSelection, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.startContainer === lastTextNode || range.startContainer === lastTextNode.parentNode).toBe(true, 'The selection is starting at the wrong element');\n      expect(range.startOffset).toBe(0, 'The start of the selection is not at the beginning of the text node');\n      expect(range.endContainer === lastTextNode || range.endContainer === lastTextNode.parentNode).toBe(true, 'The selection is ending at the wrong element');\n      expect(range.endOffset).toBe('not a link'.length, 'The end of the selection is not at the end of the text node');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor in an empty paragraph","suites":["MediumEditor.selection TestCase","importSelection"],"line":172,"updatePoint":{"line":172,"column":70,"index":11006},"code":"    it('should import a position with the cursor in an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>';\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 1\n      }, this.el, document);\n      var startParagraph = MediumEditor.util.getClosestTag(window.getSelection().getRangeAt(0).startContainer, 'p');\n      expect(startParagraph).toBe(this.el.getElementsByTagName('p')[1], 'empty paragraph');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor after an empty paragraph","suites":["MediumEditor.selection TestCase","importSelection"],"line":182,"updatePoint":{"line":182,"column":73,"index":11551},"code":"    it('should import a position with the cursor after an empty paragraph', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>';\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 2\n      }, this.el, document);\n      var startParagraph = MediumEditor.util.getClosestTag(window.getSelection().getRangeAt(0).startContainer, 'p');\n      expect(startParagraph).toBe(this.el.getElementsByTagName('p')[2], 'paragraph after empty paragraph');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor after an empty paragraph when there are multipled editable elements","suites":["MediumEditor.selection TestCase","importSelection"],"line":192,"updatePoint":{"line":192,"column":116,"index":12155},"code":"    it('should import a position with the cursor after an empty paragraph when there are multipled editable elements', function () {\n      var el = this.createElement('div', 'editor', '<p><span>www.google.com</span></p><p><br /></p><p>Whatever</p>');\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'editableElementIndex': 1,\n        'emptyBlocksIndex': 2\n      }, el, document);\n      var startParagraph = MediumEditor.util.getClosestTag(window.getSelection().getRangeAt(0).startContainer, 'p');\n      expect(startParagraph).toBe(el.getElementsByTagName('p')[2], 'paragraph after empty paragraph');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor after an empty block element","suites":["MediumEditor.selection TestCase","importSelection"],"line":203,"updatePoint":{"line":203,"column":77,"index":12771},"code":"    it('should import a position with the cursor after an empty block element', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><h1><br /></h1><h2><br /></h2><p>Whatever</p>';\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 2\n      }, this.el, document);\n      var startParagraph = MediumEditor.util.getClosestTag(window.getSelection().getRangeAt(0).startContainer, 'h2');\n      expect(startParagraph).toBe(this.el.querySelector('h2'), 'block element after empty block element');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor after an empty block element when there are nested block elements","suites":["MediumEditor.selection TestCase","importSelection"],"line":213,"updatePoint":{"line":213,"column":114,"index":13390},"code":"    it('should import a position with the cursor after an empty block element when there are nested block elements', function () {\n      this.el.innerHTML = '<blockquote><p><span>www.google.com</span></p></blockquote><h1><br /></h1><h2><br /></h2><p>Whatever</p>';\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 2\n      }, this.el, document);\n      var startParagraph = MediumEditor.util.getClosestTag(window.getSelection().getRangeAt(0).startContainer, 'h2');\n      expect(startParagraph).toBe(this.el.querySelector('h2'), 'block element after empty block element');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should import a position with the cursor after an empty block element inside an element with various children","suites":["MediumEditor.selection TestCase","importSelection"],"line":223,"updatePoint":{"line":223,"column":117,"index":14037},"code":"    it('should import a position with the cursor after an empty block element inside an element with various children', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><h1><br /></h1><h2><br /></h2><p><b><i>Whatever</i></b></p>';\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 3\n      }, this.el, document);\n      var innerElement = window.getSelection().getRangeAt(0).startContainer;\n      expect(MediumEditor.util.isDescendant(this.el.querySelector('i'), innerElement, true)).toBe(true, 'nested inline elment inside block element after empty block element');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should not import a selection into focusing on an empty element in a table","suites":["MediumEditor.selection TestCase","importSelection"],"line":248,"updatePoint":{"line":248,"column":82,"index":15552},"code":"    it('should not import a selection into focusing on an empty element in a table', function () {\n      this.el.innerHTML = '<p>Hello</p><table><colgroup><col /></colgroup>' + '<thead><tr><th>Head</th></tr></thead>' + '<tbody><tr><td>Body</td></tr></tbody></table><p>World<p>';\n      MediumEditor.selection.importSelection({\n        'start': 5,\n        'end': 5,\n        'emptyBlocksIndex': 1\n      }, this.el, document);\n      var innerElement = window.getSelection().getRangeAt(0).startContainer;\n      // The behavior varies from browser to browser for this case, some select TH, some #textNode\n      expect(MediumEditor.util.isDescendant(this.el.querySelector('th'), innerElement, true)).toBe(true, 'expect selection to be of TH or a descendant');\n      expect(innerElement).toBe(window.getSelection().getRangeAt(0).endContainer);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should not import a selection beyond any block elements that have text, even when emptyBlocksIndex indicates it should ","suites":["MediumEditor.selection TestCase","importSelection"],"line":260,"updatePoint":{"line":260,"column":127,"index":16441},"code":"    it('should not import a selection beyond any block elements that have text, even when emptyBlocksIndex indicates it should ', function () {\n      this.el.innerHTML = '<p><span>www.google.com</span></p><h1><br /></h1><h2>Not Empty</h2><p><b><i>Whatever</i></b></p>';\n      // Import a selection that indicates the text should be at the end of the 'www.google.com' word, but in the 3rd paragraph (at the beginning of 'Whatever')\n      MediumEditor.selection.importSelection({\n        'start': 14,\n        'end': 14,\n        'emptyBlocksIndex': 3\n      }, this.el, document);\n      var innerElement = window.getSelection().getRangeAt(0).startContainer;\n      expect(MediumEditor.util.isDescendant(this.el.querySelectorAll('p')[1], innerElement, true)).toBe(false, 'moved selection beyond non-empty block element');\n      expect(MediumEditor.util.isDescendant(this.el.querySelector('h2'), innerElement, true)).toBe(true, 'moved selection to element to incorrect block element');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support a selection correctly when space + newlines are separating block elements","suites":["MediumEditor.selection TestCase","importSelection"],"line":274,"updatePoint":{"line":274,"column":96,"index":17455},"code":"    it('should support a selection correctly when space + newlines are separating block elements', function () {\n      this.el.innerHTML = '<ul>\\n' + '    <li><a href=\"#\">a link</a></li>\\n' + '    <li>a list item</li>\\n' + '    <li>target</li>\\n' + '</ul>';\n      var lastLi = this.el.querySelectorAll('ul > li')[2];\n\n      // Select the <li> with 'target'\n      selectElementContents(lastLi.firstChild);\n      var selectionData = MediumEditor.selection.exportSelection(this.el, document);\n      expect(selectionData.emptyBlocksIndex).toBeUndefined();\n      MediumEditor.selection.importSelection(selectionData, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('target', 'The selection is around the wrong element');\n      expect(MediumEditor.util.isDescendant(lastLi, range.startContainer, true)).toBe(true, 'The start of the selection is invalid');\n      expect(MediumEditor.util.isDescendant(lastLi, range.endContainer, true)).toBe(true, 'The end of the selection is invalid');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support a selection that specifies an image is the selection","suites":["MediumEditor.selection TestCase","importSelection"],"line":288,"updatePoint":{"line":288,"column":75,"index":18485},"code":"    it('should support a selection that specifies an image is the selection', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" /></a> dolor</p>';\n      MediumEditor.selection.importSelection({\n        start: 12,\n        end: 12,\n        startsWithImage: true,\n        trailingImageCount: 1\n      }, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('');\n      expect(MediumEditor.util.isDescendant(range.endContainer, this.el.querySelector('img'), true)).toBe(true, 'the image is not within the selection');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support a selection that starts with an image","suites":["MediumEditor.selection TestCase","importSelection"],"line":300,"updatePoint":{"line":300,"column":60,"index":19107},"code":"    it('should support a selection that starts with an image', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" />img</a> dolor</p>';\n      MediumEditor.selection.importSelection({\n        start: 12,\n        end: 15,\n        startsWithImage: true\n      }, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('img');\n      if (range.startContainer.nodeName.toLowerCase() === 'a') {\n        expect(range.startContainer).toBe(this.el.querySelector('a'));\n        expect(range.startOffset).toBe(0);\n      } else {\n        expect(range.startContainer.nextSibling).toBe(this.el.querySelector('a'));\n        expect(range.startOffset).toBe(12);\n      }\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support a selection that ends with an image","suites":["MediumEditor.selection TestCase","importSelection"],"line":317,"updatePoint":{"line":317,"column":58,"index":19877},"code":"    it('should support a selection that ends with an image', function () {\n      this.el.innerHTML = '<p>lorem ipsum <a href=\"#\">img<img src=\"../demo/img/medium-editor.jpg\" /><img src=\"../demo/img/roman.jpg\" /></a> dolor</p>';\n      MediumEditor.selection.importSelection({\n        start: 12,\n        end: 15,\n        trailingImageCount: 2\n      }, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('img');\n      expect(MediumEditor.util.isDescendant(range.endContainer, this.el.querySelector('img'), true)).toBe(true, 'the image is not within the selection');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support a selection that is after white-space at the beginning of a paragraph","suites":["MediumEditor.selection TestCase","importSelection"],"line":330,"updatePoint":{"line":330,"column":92,"index":20599},"code":"    it('should support a selection that is after white-space at the beginning of a paragraph', function () {\n      this.el.innerHTML = '   <p>one two<br><a href=\"transindex.hu\">three</a><br></p><p><a href=\"amazon.com\">one</a> two three</p>';\n      this.newMediumEditor(this.el);\n      var firstText = this.el.querySelector('p').firstChild;\n      MediumEditor.selection.select(document, firstText, 0, firstText, 'one'.length);\n      var exported = MediumEditor.selection.exportSelection(this.el, document);\n      MediumEditor.selection.importSelection(exported, this.el, document);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.toString()).toBe('one');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should support importing a collapsed selection at the end of all content","suites":["MediumEditor.selection TestCase","importSelection"],"line":340,"updatePoint":{"line":340,"column":80,"index":21275},"code":"    it('should support importing a collapsed selection at the end of all content', function () {\n      this.el.innerHTML = '<p>lorem ipsum <b>dolor</b></p>';\n      var boldText = this.el.querySelector('b').firstChild;\n      placeCursorInsideElement(boldText, boldText.length);\n      var range = window.getSelection().getRangeAt(0);\n      expect(range.collapsed).toBe(true);\n      expect(MediumEditor.util.isDescendant(boldText.parentNode, range.startContainer, true)).toBe(true);\n      expect(MediumEditor.util.isDescendant(boldText.parentNode, range.endContainer, true)).toBe(true);\n      var exported = MediumEditor.selection.exportSelection(this.el, document);\n      expect(exported.start).toBe('lorem ipsum dolor'.length);\n      expect(exported.end).toBe('lorem ipsum dolor'.length);\n      MediumEditor.selection.importSelection(exported, this.el, document);\n      range = window.getSelection().getRangeAt(0);\n      expect(range.collapsed).toBe(true);\n      expect(MediumEditor.util.isDescendant(boldText.parentNode, range.startContainer, true)).toBe(true);\n      expect(MediumEditor.util.isDescendant(boldText.parentNode, range.endContainer, true)).toBe(true);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"no selected elements on empty selection","suites":["MediumEditor.selection TestCase","getSelectedElements"],"line":359,"updatePoint":{"line":359,"column":47,"index":22470},"code":"    it('no selected elements on empty selection', function () {\n      window.getSelection().removeAllRanges();\n      var elements = MediumEditor.selection.getSelectedElements(document);\n      expect(elements.length).toBe(0);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should select element from selection","suites":["MediumEditor.selection TestCase","getSelectedElements"],"line":364,"updatePoint":{"line":364,"column":44,"index":22700},"code":"    it('should select element from selection', function () {\n      this.el.innerHTML = 'lorem <i>ipsum</i> dolor';\n      selectElementContents(this.el.querySelector('i').firstChild);\n      var elements = MediumEditor.selection.getSelectedElements(document);\n      expect(elements.length).toBe(1);\n      expect(elements[0].nodeName.toLowerCase()).toBe('i');\n      expect(elements[0].innerHTML).toBe('ipsum');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should select first element when selection is global (ie: all the editor)","suites":["MediumEditor.selection TestCase","getSelectedElements"],"line":372,"updatePoint":{"line":372,"column":81,"index":23153},"code":"    it('should select first element when selection is global (ie: all the editor)', function () {\n      this.el.innerHTML = 'lorem <i>ipsum</i> dolor';\n      selectElementContents(this.el);\n      var elements = MediumEditor.selection.getSelectedElements(document);\n      expect(elements.length).toBe(1);\n      expect(elements[0].nodeName.toLowerCase()).toBe('i');\n      expect(elements[0].innerHTML).toBe('ipsum');\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should return null on bad range","suites":["MediumEditor.selection TestCase","getSelectedParentElement"],"line":382,"updatePoint":{"line":382,"column":39,"index":23593},"code":"    it('should return null on bad range', function () {\n      expect(MediumEditor.selection.getSelectedParentElement(null)).toBe(null);\n      expect(MediumEditor.selection.getSelectedParentElement(false)).toBe(null);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should select the document","suites":["MediumEditor.selection TestCase","getSelectedParentElement"],"line":386,"updatePoint":{"line":386,"column":34,"index":23813},"code":"    it('should select the document', function () {\n      this.el.innerHTML = '<p>lorem <i>ipsum</i> dolor <span>hello</span> <b>you</b> </p>';\n      var range = document.createRange(),\n        sel = window.getSelection(),\n        element;\n      range.setStart(document, 0);\n      range.setEnd(this.el.querySelector('b').firstChild, 2);\n      sel.removeAllRanges();\n      sel.addRange(range);\n      element = MediumEditor.selection.getSelectedParentElement(range);\n      expect(element).toBe(document);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should return true for non-empty text","suites":["MediumEditor.selection TestCase","selectionContainsContent"],"line":400,"updatePoint":{"line":400,"column":45,"index":24393},"code":"    it('should return true for non-empty text', function () {\n      this.el.innerHTML = '<p>this is<span> </span>text</p>';\n      selectElementContents(this.el.querySelector('p'));\n      expect(MediumEditor.selection.selectionContainsContent(document)).toBe(true);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should return false for white-space only selections","suites":["MediumEditor.selection TestCase","selectionContainsContent"],"line":405,"updatePoint":{"line":405,"column":59,"index":24680},"code":"    it('should return false for white-space only selections', function () {\n      this.el.innerHTML = '<p>this is<span> </span>text</p>';\n      selectElementContents(this.el.querySelector('span'));\n      expect(MediumEditor.selection.selectionContainsContent(document)).toBe(false);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should return true for image with link selections","suites":["MediumEditor.selection TestCase","selectionContainsContent"],"line":410,"updatePoint":{"line":410,"column":57,"index":24969},"code":"    it('should return true for image with link selections', function () {\n      this.el.innerHTML = '<p>this is <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" /></a> image test</p>';\n      selectElementContents(this.el.querySelector('a'));\n      expect(MediumEditor.selection.selectionContainsContent(document)).toBe(true);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should clear the selection and set the caret to the start of the prior range when specified","suites":["MediumEditor.selection TestCase","clearSelection"],"line":417,"updatePoint":{"line":417,"column":99,"index":25398},"code":"    it('should clear the selection and set the caret to the start of the prior range when specified', function () {\n      this.el.innerHTML = '<p>this is<span> </span>text</p>';\n      selectElementContents(this.el.querySelector('p'));\n      var selectionStart = document.getSelection().anchorOffset;\n      MediumEditor.selection.clearSelection(document, true);\n      expect(document.getSelection().focusOffset).toBe(selectionStart);\n      var newSelectionEnd = document.getSelection().focusOffset;\n      expect(newSelectionEnd).toBe(selectionStart);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should clear the selection and set the caret to the end of the prior range by default","suites":["MediumEditor.selection TestCase","clearSelection"],"line":426,"updatePoint":{"line":426,"column":93,"index":25950},"code":"    it('should clear the selection and set the caret to the end of the prior range by default', function () {\n      this.el.innerHTML = '<p>this is<span> </span>text</p>';\n      selectElementContents(this.el.querySelector('p'));\n      var selectionEnd = document.getSelection().focusOffset;\n      MediumEditor.selection.clearSelection(document);\n      expect(document.getSelection().anchorOffset).toBe(selectionEnd);\n      var newSelectionStart = document.getSelection().anchorOffset;\n      expect(newSelectionStart).toBe(selectionEnd);\n    });","file":"selection.spec.js","skipped":false,"dir":"spec"},{"name":"should return the editor content as a JSON object","suites":["Anchor Button TestCase"],"line":12,"updatePoint":{"line":12,"column":55,"index":373},"code":"  it('should return the editor content as a JSON object', function () {\n    var editor = this.newMediumEditor('.editor'),\n      json = editor.serialize();\n    expect(json).toEqual({\n      'medium-editor-test': {\n        value: '<p>lorem <strong>ipsum</strong></p>'\n      }\n    });\n  });","file":"serialize.spec.js","skipped":false,"dir":"spec"},{"name":"should set a custom id when elements have no ids","suites":["Anchor Button TestCase"],"line":21,"updatePoint":{"line":21,"column":54,"index":659},"code":"  it('should set a custom id when elements have no ids', function () {\n    this.el.removeAttribute('id');\n    var editor = this.newMediumEditor('.editor'),\n      json = editor.serialize();\n    expect(json).toEqual({\n      'element-0': {\n        value: '<p>lorem <strong>ipsum</strong></p>'\n      }\n    });\n  });","file":"serialize.spec.js","skipped":false,"dir":"spec"},{"name":"should toggle the isActive property","suites":["Setup/Destroy TestCase"],"line":13,"updatePoint":{"line":13,"column":41,"index":348},"code":"  it('should toggle the isActive property', function () {\n    var editor = this.newMediumEditor('.editor');\n    editor.destroy();\n    expect(editor.isActive).toBe(false);\n    editor.setup();\n    expect(editor.isActive).toBe(true);\n    editor.destroy();\n    expect(editor.isActive).toBe(false);\n  });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should init the toolbar and editor elements","suites":["Setup/Destroy TestCase","Setup"],"line":23,"updatePoint":{"line":23,"column":51,"index":692},"code":"    it('should init the toolbar and editor elements', function () {\n      var editor = this.newMediumEditor('.editor');\n      editor.destroy();\n      spyOn(MediumEditor.prototype, 'setup').and.callThrough();\n      editor.setup();\n      expect(editor.setup).toHaveBeenCalled();\n      expect(document.querySelector('[data-medium-editor-element]')).toBeTruthy();\n      expect(document.querySelector('[aria-multiline]')).toBeTruthy();\n      expect(document.querySelector('[medium-editor-index]')).toBeTruthy();\n      expect(document.querySelector('[role]')).toBeTruthy();\n      expect(document.querySelector('[spellcheck]')).toBeTruthy();\n      expect(document.querySelector('[contenteditable]')).toBeTruthy();\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should know about defaults","suites":["Setup/Destroy TestCase","Setup"],"line":36,"updatePoint":{"line":36,"column":34,"index":1390},"code":"    it('should know about defaults', function () {\n      expect(MediumEditor.prototype.defaults).toBeTruthy();\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should remove mediumEditor elements from DOM","suites":["Setup/Destroy TestCase","Destroy"],"line":41,"updatePoint":{"line":41,"column":52,"index":1569},"code":"    it('should remove mediumEditor elements from DOM', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(document.querySelector('.medium-editor-toolbar')).toBeTruthy();\n      editor.destroy();\n      expect(document.querySelector('.medium-editor-toolbar')).toBeFalsy();\n\n      // ensure only initial attributes are here: the editor class\n      expect(this.el.getAttribute('class')).toBe('editor');\n      expect(this.el.attributes.length).toBe(1);\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should remove all the added events","suites":["Setup/Destroy TestCase","Destroy"],"line":51,"updatePoint":{"line":51,"column":42,"index":2042},"code":"    it('should remove all the added events', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.events.events.length).toBeGreaterThan(0);\n      editor.destroy();\n      expect(editor.events.events.length).toBe(0);\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should abort any pending throttled event handlers","suites":["Setup/Destroy TestCase","Destroy"],"line":57,"updatePoint":{"line":57,"column":57,"index":2313},"code":"    it('should abort any pending throttled event handlers', function () {\n      var editor, triggerEvents, toolbar;\n      editor = this.newMediumEditor('.editor', {\n        delay: 5\n      });\n      triggerEvents = function () {\n        fireEvent(window, 'resize');\n        fireEvent(document.body, 'click', {\n          target: document.body\n        });\n        fireEvent(document.body, 'blur');\n      };\n      // Store toolbar, since destroy will remove the reference from the editor\n      toolbar = editor.getExtensionByName('toolbar');\n\n      // fire event (handler executed immediately)\n      triggerEvents();\n      jasmine.clock().tick(1);\n\n      // fire event again (handler delayed because of throttle)\n      triggerEvents();\n      spyOn(toolbar, 'positionToolbarIfShown').and.callThrough(); // via: handleResize\n      spyOn(editor, 'checkSelection').and.callThrough(); // via: handleBlur\n      editor.destroy();\n      jasmine.clock().tick(1000); // arbitrary – must be longer than THROTTLE_INTERVAL\n      expect(toolbar.positionToolbarIfShown).not.toHaveBeenCalled();\n      expect(editor.checkSelection).not.toHaveBeenCalled();\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should not crash when destroy immediately after a mouse click","suites":["Setup/Destroy TestCase","Destroy"],"line":87,"updatePoint":{"line":87,"column":69,"index":3546},"code":"    it('should not crash when destroy immediately after a mouse click', function () {\n      var editor = this.newMediumEditor('.editor');\n      // selected some content and let the toolbar appear\n      selectElementContentsAndFire(editor.elements[0], {\n        testDelay: 501\n      });\n\n      // fire a mouse up somewhere else (i.e. a button which click handler could have called destroy() )\n      fireEvent(document.documentElement, 'mouseup');\n      editor.destroy();\n      jasmine.clock().tick(501);\n      expect(true).toBe(true);\n    });","file":"setup.spec.js","skipped":false,"dir":"spec"},{"name":"should accept a textarea element and \"convert\" it to a div, preserving all attributes","suites":["Textarea TestCase","MediumEditor constructor"],"line":22,"updatePoint":{"line":22,"column":93,"index":864},"code":"    it('should accept a textarea element and \"convert\" it to a div, preserving all attributes', function () {\n      var editor = this.newMediumEditor('.editor'),\n        textarea = this.el;\n      expect(editor.elements[0].nodeName.toLowerCase()).toBe('div');\n      var attributes = ['data-disable-editing', 'data-disable-toolbar', 'data-placeholder', 'data-disable-return', 'data-disable-double-return', 'data-disable-preview', 'spellcheck', 'data-imhere'];\n      attributes.forEach(function (attr) {\n        expect(editor.elements[0].getAttribute(attr)).toBe(textarea.getAttribute(attr));\n      });\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should sync editor changes with the original textarea element","suites":["Textarea TestCase","MediumEditor constructor"],"line":31,"updatePoint":{"line":31,"column":69,"index":1448},"code":"    it('should sync editor changes with the original textarea element', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.value).toEqual('test content');\n      editor.elements[0].innerHTML = 'new content';\n      fireEvent(editor.elements[0], 'input');\n      fireEvent(editor.elements[0], 'keypress');\n      jasmine.clock().tick(1);\n      expect(this.el.value).toEqual('new content');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should preserve textarea className","suites":["Textarea TestCase","MediumEditor constructor"],"line":40,"updatePoint":{"line":40,"column":42,"index":1850},"code":"    it('should preserve textarea className', function () {\n      this.el.className += ' test-class test-class-2';\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements[0].className).toBe('editor test-class test-class-2 medium-editor-element');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should create unique div ids for multiple textareas","suites":["Textarea TestCase","MediumEditor constructor"],"line":45,"updatePoint":{"line":45,"column":59,"index":2146},"code":"    it('should create unique div ids for multiple textareas', function () {\n      var origDateNow = Date.now;\n      Date.now = function () {\n        return 1464448478887;\n      };\n      for (var i = 0; i < 12; i++) {\n        var ta = this.createElement('textarea', 'editor');\n        ta.value = 'test content';\n      }\n      var editor = this.newMediumEditor('.editor');\n      editor.elements.forEach(function (el) {\n        expect(document.querySelectorAll('div#' + el.id).length).toEqual(1);\n      });\n      Date.now = origDateNow;\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should create unique medium-editor-textarea-ids across all editor instances","suites":["Textarea TestCase","MediumEditor constructor"],"line":60,"updatePoint":{"line":60,"column":83,"index":2712},"code":"    it('should create unique medium-editor-textarea-ids across all editor instances', function () {\n      var origDateNow = Date.now;\n      Date.now = function () {\n        return 1464448478887;\n      };\n      var tas = [];\n      for (var i = 0; i < 12; i++) {\n        var ta = this.createElement('textarea', 'editor');\n        ta.value = 'test content';\n        tas.push(ta);\n      }\n      tas.forEach(function (el) {\n        this.newMediumEditor(el);\n      }, this);\n      this.editors.forEach(function (editor) {\n        expect(document.querySelectorAll('textarea[medium-editor-textarea-id=\"' + editor.elements[0].getAttribute('medium-editor-textarea-id') + '\"]').length).toEqual(1);\n      });\n      Date.now = origDateNow;\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should cleanup after destroy","suites":["Textarea TestCase","MediumEditor constructor"],"line":79,"updatePoint":{"line":79,"column":36,"index":3400},"code":"    it('should cleanup after destroy', function () {\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(true);\n      editor.destroy();\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(false);\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should reset the value of created div when form containing textarea is reset","suites":["Textarea TestCase","MediumEditor constructor"],"line":85,"updatePoint":{"line":85,"column":84,"index":3740},"code":"    it('should reset the value of created div when form containing textarea is reset', function () {\n      var form = this.createElement('form', null, null, true),\n        initialContent = this.el.value;\n      form.appendChild(this.el);\n      document.body.appendChild(form);\n      var editor = this.newMediumEditor('.editor');\n      expect(editor.elements[0].innerHTML).toEqual(initialContent);\n      editor.setContent('<p>custom content</p>');\n      expect(editor.elements[0].innerHTML).not.toEqual(initialContent);\n      form.reset();\n      expect(editor.elements[0].innerHTML).toEqual(initialContent);\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should \"convert\" it to a div, preserving all attributes","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":115,"updatePoint":{"line":115,"column":63,"index":5125},"code":"    it('should \"convert\" it to a div, preserving all attributes', function () {\n      var editor = this.newMediumEditor('.editable-div'),\n        textarea = this.el;\n      expect(editor.elements[0]).toBe(this.div);\n      expect(editor.elements.length).toBe(1);\n      editor.addElements(this.el);\n      expect(editor.elements.length).toBe(2);\n      var attributes = ['data-disable-editing', 'data-disable-toolbar', 'data-placeholder', 'data-disable-return', 'data-disable-double-return', 'data-disable-preview', 'spellcheck', 'data-imhere'],\n        tempDiv = editor.elements[1];\n      attributes.forEach(function (attr) {\n        expect(tempDiv.getAttribute(attr)).toBe(textarea.getAttribute(attr));\n      });\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should sync editor changes with the original textarea element","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":128,"updatePoint":{"line":128,"column":69,"index":5849},"code":"    it('should sync editor changes with the original textarea element', function () {\n      var editor = this.newMediumEditor('.editable-div');\n      editor.addElements(this.el);\n      expect(this.el.value).toEqual('test content');\n      expect(editor.elements[1].innerHTML).toEqual('test content');\n      editor.elements[1].innerHTML = 'new content';\n      fireEvent(editor.elements[1], 'input');\n      fireEvent(editor.elements[1], 'keypress');\n      jasmine.clock().tick(1);\n      expect(this.el.value).toEqual('new content');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should preserve textarea className","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":139,"updatePoint":{"line":139,"column":42,"index":6360},"code":"    it('should preserve textarea className', function () {\n      this.el.className += ' test-class test-class-2';\n      var editor = this.newMediumEditor('.editable-div');\n      editor.addElements(this.el);\n      expect(editor.elements[1].className).toBe('editor test-class test-class-2 medium-editor-element');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should create unique div ids for multiple textareas","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":145,"updatePoint":{"line":145,"column":59,"index":6697},"code":"    it('should create unique div ids for multiple textareas', function () {\n      this.div.setAttribute('id', 'medium-editor-12345');\n      for (var i = 0; i < 12; i++) {\n        var ta = this.createElement('textarea', 'editor');\n        ta.value = 'test content';\n      }\n      var editor = this.newMediumEditor('.editable-div');\n      expect(editor.elements.length).toBe(1);\n      editor.addElements(document.querySelectorAll('.editor'));\n      expect(editor.elements.length).toBe(14);\n      editor.elements.forEach(function (el) {\n        expect(document.querySelectorAll('div#' + el.id).length).toEqual(1);\n      });\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should create unique medium-editor-textarea-ids across all editor instances","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":159,"updatePoint":{"line":159,"column":83,"index":7350},"code":"    it('should create unique medium-editor-textarea-ids across all editor instances', function () {\n      var tas = [];\n      for (var i = 0; i < 12; i++) {\n        var ta = this.createElement('textarea', 'editor');\n        ta.value = 'test content';\n        tas.push(ta);\n        var div = this.createElement('div', 'editable-div');\n        div.innerHTML = 'test div';\n        this.newMediumEditor(div);\n      }\n      tas.forEach(function (el, idx) {\n        this.editors[idx].addElements(el);\n      }, this);\n      this.editors.forEach(function (editor) {\n        expect(document.querySelectorAll('textarea[medium-editor-textarea-id=\"' + editor.elements[1].getAttribute('medium-editor-textarea-id') + '\"]').length).toEqual(1);\n      });\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should cleanup after destroy","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":176,"updatePoint":{"line":176,"column":36,"index":8050},"code":"    it('should cleanup after destroy', function () {\n      var editor = this.newMediumEditor('.editable-div');\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(false);\n      editor.addElements(this.el);\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(true);\n      editor.destroy();\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(false);\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should reset the value of created div when form containing textarea is reset","suites":["Textarea TestCase","Dynamically adding textarea elements to the editor"],"line":184,"updatePoint":{"line":184,"column":84,"index":8509},"code":"    it('should reset the value of created div when form containing textarea is reset', function () {\n      var form = this.createElement('form', null, null, true),\n        initialContent = 'initial text',\n        otherTextarea = this.createElement('textarea', 'editor', initialContent, true),\n        editor = this.newMediumEditor('.editor');\n      otherTextarea.value = initialContent;\n      expect(editor.elements.length).toBe(1);\n      form.appendChild(otherTextarea);\n      document.body.appendChild(form);\n      editor.addElements(otherTextarea);\n      var createdDiv = editor.elements[1];\n      expect(createdDiv.innerHTML).toEqual(initialContent);\n      editor.setContent('<p>custom content</p>', 1);\n      expect(createdDiv.innerHTML).not.toEqual(initialContent);\n      form.reset();\n      expect(createdDiv.innerHTML).toEqual(initialContent);\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the created div and show the textarea when passed a div created for a textarea","suites":["Textarea TestCase","Calling removeElements"],"line":213,"updatePoint":{"line":213,"column":100,"index":9784},"code":"    it('should remove the created div and show the textarea when passed a div created for a textarea', function () {\n      var editor = this.newMediumEditor('.editor'),\n        createdDiv = editor.elements[0],\n        divParent = createdDiv.parentNode;\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(true);\n      editor.addElements(this.div);\n      expect(editor.elements.length).toBe(2);\n      editor.removeElements(createdDiv);\n      expect(editor.elements.length).toBe(1);\n      expect(createdDiv.parentNode).not.toBe(divParent, 'The div created for the textarea should have been removed');\n      expect(this.el.hasAttribute('medium-editor-textarea-id')).toBe(false, 'The textarea should not have a medium-editor-textarea-id attribute when its editor div is removed');\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(false, 'The textarea should be hidden when its editor div is removed');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should remove the created div and show the textaarea when passed the actual textarea","suites":["Textarea TestCase","Calling removeElements"],"line":227,"updatePoint":{"line":227,"column":92,"index":10767},"code":"    it('should remove the created div and show the textaarea when passed the actual textarea', function () {\n      var editor = this.newMediumEditor('.editor'),\n        createdDiv = editor.elements[0],\n        divParent = createdDiv.parentNode;\n      expect(editor.elements.length).toBe(1);\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(true);\n      editor.addElements(this.div);\n      expect(editor.elements.length).toBe(2);\n      editor.removeElements(this.el);\n      expect(editor.elements.length).toBe(1);\n      expect(createdDiv.parentNode).not.toBe(divParent, 'The div created for the textarea should have been removed');\n      expect(this.el.hasAttribute('medium-editor-textarea-id')).toBe(false, 'The textarea should not have a medium-editor-textarea-id attribute when its editor div is removed');\n      expect(this.el.classList.contains('medium-editor-hidden')).toBe(false, 'The textarea should be hidden when its editor div is removed');\n    });","file":"textarea.spec.js","skipped":false,"dir":"spec"},{"name":"should call the createToolbar method","suites":["MediumEditor.extensions.toolbar TestCase","Initialization"],"line":16,"updatePoint":{"line":16,"column":44,"index":465},"code":"    it('should call the createToolbar method', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'createToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar).not.toBeUndefined();\n      expect(toolbar.createToolbar).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should create a new element for the editor toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Initialization"],"line":23,"updatePoint":{"line":23,"column":58,"index":846},"code":"    it('should create a new element for the editor toolbar', function () {\n      expect(document.querySelectorAll('.medium-editor-toolbar').length).toBe(0);\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar').getToolbarElement();\n      expect(toolbar.className).toMatch(/medium-editor-toolbar/);\n      expect(document.querySelectorAll('.medium-editor-toolbar').length).toBe(1);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not create an anchor form element or anchor extension if anchor is not passed as a button","suites":["MediumEditor.extensions.toolbar TestCase","Initialization"],"line":30,"updatePoint":{"line":30,"column":104,"index":1333},"code":"    it('should not create an anchor form element or anchor extension if anchor is not passed as a button', function () {\n      expect(document.querySelectorAll('.medium-editor-toolbar-form-anchor').length).toBe(0);\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            buttons: ['bold', 'italic', 'underline']\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().querySelectorAll('.medium-editor-toolbar-form-anchor').length).toBe(0);\n      expect(editor.getExtensionByName('anchor')).toBeUndefined();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should enable bold button in toolbar when bold text is selected","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":43,"updatePoint":{"line":43,"column":71,"index":1953},"code":"    it('should enable bold button in toolbar when bold text is selected', function () {\n      var editor = null,\n        newElement = this.createElement('div', '', 'lorem ipsum <b><div id=\"bold_dolorOne\">dolor</div></b>');\n      newElement.id = 'editor-for-toolbar-test';\n      editor = this.newMediumEditor(document.getElementById('editor-for-toolbar-test'), {\n        delay: 0\n      });\n      var toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(document.getElementById('bold_dolorOne'));\n      expect(toolbar.getToolbarElement().querySelector('button[data-action=\"bold\"]').classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not activate buttons in toolbar when stopSelectionUpdates has been called, but should activate buttons after startSelectionUpdates is called","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":54,"updatePoint":{"line":54,"column":155,"index":2718},"code":"    it('should not activate buttons in toolbar when stopSelectionUpdates has been called, but should activate buttons after startSelectionUpdates is called', function () {\n      this.el.innerHTML = 'lorem ipsum <b><div id=\"bold_dolorTwo\">dolor</div></b>';\n      var editor = this.newMediumEditor(document.querySelectorAll('.editor'), {\n          delay: 0\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      editor.stopSelectionUpdates();\n      selectElementContentsAndFire(document.getElementById('bold_dolorTwo'));\n      expect(toolbar.getToolbarElement().querySelector('button[data-action=\"bold\"]').classList.contains('medium-editor-button-active')).toBe(false);\n      editor.startSelectionUpdates();\n      selectElementContentsAndFire(document.getElementById('bold_dolorTwo'), {\n        eventToFire: 'mouseup'\n      });\n      expect(toolbar.getToolbarElement().querySelector('button[data-action=\"bold\"]').classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger the showToolbar custom event when toolbar is shown","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":69,"updatePoint":{"line":69,"column":73,"index":3637},"code":"    it('should trigger the showToolbar custom event when toolbar is shown', function () {\n      var editor = this.newMediumEditor('.editor'),\n        callback = jasmine.createSpy();\n      this.el.innerHTML = 'specOnShowToolbarTest';\n      editor.subscribe('showToolbar', callback);\n      selectElementContentsAndFire(this.el);\n      expect(callback).toHaveBeenCalledWith({}, this.el);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger positionToolbar custom event when toolbar is moved","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":77,"updatePoint":{"line":77,"column":73,"index":4030},"code":"    it('should trigger positionToolbar custom event when toolbar is moved', function () {\n      var editor = this.newMediumEditor('.editor'),\n        callback = jasmine.createSpy();\n      this.el.innerHTML = 'specOnUpdateToolbarTest';\n      editor.subscribe('positionToolbar', callback);\n      selectElementContentsAndFire(this.el);\n      expect(callback).toHaveBeenCalledWith({}, this.el);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger positionedToolbar custom event when toolbar is moved","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":85,"updatePoint":{"line":85,"column":75,"index":4431},"code":"    it('should trigger positionedToolbar custom event when toolbar is moved', function () {\n      var editor = this.newMediumEditor('.editor'),\n        callback = jasmine.createSpy();\n      this.el.innerHTML = 'specOnUpdateToolbarTest';\n      editor.subscribe('positionedToolbar', callback);\n      selectElementContentsAndFire(this.el);\n      expect(callback).toHaveBeenCalledWith({}, this.el);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger positionToolbar before setToolbarPosition is called","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":93,"updatePoint":{"line":93,"column":74,"index":4833},"code":"    it('should trigger positionToolbar before setToolbarPosition is called', function () {\n      this.el.innerHTML = 'position sanity check';\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        triggerCount = 0,\n        temp = {\n          update: function () {\n            // selectElementContents will select the contents and trigger 'click'\n            // Since we're manually triggering things, in Edge we have to trigger\n            // 'click' or the toolbar won't detect the change.  However, in some\n            // browsers the selection action itself triggers a 'focus' which the toolbar\n            // picks up.  This means for some browsers (ie Chrome, FF) the 'positionToolbar'\n            // event will trigger twice.  So, let's just make sure the first time the\n            // event triggers, that it was triggered BEFORE the first call to setToolbarPosition\n            if (triggerCount === 0) {\n              expect(toolbar.setToolbarPosition).not.toHaveBeenCalled();\n            }\n            triggerCount++;\n          }\n        };\n      selectElementContents(this.el);\n      jasmine.clock().tick(1);\n      spyOn(toolbar, 'setToolbarPosition').and.callThrough();\n      spyOn(temp, 'update').and.callThrough();\n      editor.subscribe('positionToolbar', temp.update);\n      selectElementContentsAndFire(this.el);\n      expect(temp.update).toHaveBeenCalled();\n      expect(toolbar.setToolbarPosition).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger positionedToolbar after setToolbarPosition and showToolbar is called","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":122,"updatePoint":{"line":122,"column":91,"index":6355},"code":"    it('should trigger positionedToolbar after setToolbarPosition and showToolbar is called', function () {\n      this.el.innerHTML = 'position sanity check';\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        temp = {\n          update: function () {\n            expect(toolbar.setToolbarPosition).toHaveBeenCalled();\n            expect(toolbar.showToolbar).toHaveBeenCalled();\n          }\n        };\n      selectElementContents(this.el);\n      jasmine.clock().tick(1);\n      spyOn(toolbar, 'setToolbarPosition').and.callThrough();\n      spyOn(toolbar, 'showToolbar').and.callThrough();\n      spyOn(temp, 'update').and.callThrough();\n      editor.subscribe('positionedToolbar', temp.update);\n      selectElementContentsAndFire(this.el);\n      expect(temp.update).toHaveBeenCalled();\n      expect(toolbar.setToolbarPosition).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger the hideToolbar custom event when toolbar is hidden","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":142,"updatePoint":{"line":142,"column":74,"index":7255},"code":"    it('should trigger the hideToolbar custom event when toolbar is hidden', function () {\n      var editor = this.newMediumEditor('.editor'),\n        callback = jasmine.createSpy();\n      this.el.innerHTML = 'specOnShowToolbarTest';\n      editor.subscribe('hideToolbar', callback);\n      selectElementContentsAndFire(this.el);\n\n      // Remove selection and call check selection, which should make the toolbar be hidden\n      window.getSelection().removeAllRanges();\n      editor.checkSelection();\n      expect(callback).toHaveBeenCalledWith({}, this.el);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should be possible to listen to toolbar events from extensions","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":154,"updatePoint":{"line":154,"column":70,"index":7816},"code":"    it('should be possible to listen to toolbar events from extensions', function () {\n      var callbackShow = jasmine.createSpy('show'),\n        callbackHide = jasmine.createSpy('hide'),\n        TestExtension = MediumEditor.Extension.extend({\n          parent: true,\n          init: function () {\n            this.base.subscribe('showToolbar', callbackShow);\n            this.base.subscribe('hideToolbar', callbackHide);\n          }\n        }),\n        editor = this.newMediumEditor('.editor', {\n          extensions: {\n            'testExtension': new TestExtension()\n          }\n        });\n      this.el.innerHTML = 'specOnShowToolbarTest';\n      selectElementContentsAndFire(this.el);\n      expect(callbackShow).toHaveBeenCalledWith({}, this.el);\n\n      // Remove selection and call check selection, which should make the toolbar be hidden\n      window.getSelection().removeAllRanges();\n      editor.checkSelection();\n      expect(callbackHide).toHaveBeenCalledWith({}, this.el);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should work with multiple elements of the same class","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":180,"updatePoint":{"line":180,"column":60,"index":8878},"code":"    it('should work with multiple elements of the same class', function () {\n      var editor, el, i;\n      this.el.textContent = '0. Lorem ipsum dolor sit amet';\n      for (i = 1; i < 3; i += 1) {\n        el = this.createElement('div', 'editor');\n        el.textContent = i + '. Lorem ipsum dolor sit amet';\n      }\n      expect(document.querySelectorAll('.editor').length).toBe(3);\n      editor = this.newMediumEditor('.editor');\n      var toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(toolbar.isDisplayed()).toBe(true);\n      selectElementContentsAndFire(editor.elements[1]);\n      expect(toolbar.isDisplayed()).toBe(true);\n      selectElementContentsAndFire(editor.elements[2]);\n      expect(toolbar.isDisplayed()).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not hide when selecting a link containing only an image","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":197,"updatePoint":{"line":197,"column":70,"index":9698},"code":"    it('should not hide when selecting a link containing only an image', function () {\n      this.el.innerHTML = '<p>Here is an <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\"></a> image</p>';\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0].querySelector('a'));\n      fireEvent(editor.elements[0], 'mousedown');\n      fireEvent(document.body, 'mouseup');\n      fireEvent(document.body, 'click');\n      jasmine.clock().tick(51);\n      expect(toolbar.isDisplayed()).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not hide when selecting text within editor, but release mouse outside of editor","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":208,"updatePoint":{"line":208,"column":94,"index":10325},"code":"    it('should not hide when selecting text within editor, but release mouse outside of editor', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      fireEvent(editor.elements[0], 'mousedown');\n      fireEvent(document.body, 'mouseup');\n      fireEvent(document.body, 'click');\n      jasmine.clock().tick(51);\n      expect(toolbar.isDisplayed()).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should hide when clicking outside the toolbar on an element that does not clear selection","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":219,"updatePoint":{"line":219,"column":97,"index":10877},"code":"    it('should hide when clicking outside the toolbar on an element that does not clear selection', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      var outsideElement = this.createElement('div', '', 'Click Me, I don\\'t clear selection'),\n        editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      outsideElement.setAttribute('style', '-webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;');\n      selectElementContentsAndFire(editor.elements[0].firstChild);\n      expect(toolbar.isDisplayed()).toBe(true);\n      fireEvent(outsideElement, 'mousedown');\n      fireEvent(outsideElement, 'mouseup');\n      fireEvent(outsideElement, 'click');\n      jasmine.clock().tick(51);\n      expect(document.getSelection().rangeCount).toBe(1);\n      expect(toolbar.isDisplayed()).toBe(false);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should hide when selecting multiple paragraphs and the allowMultiParagraphSelection option is false","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":234,"updatePoint":{"line":234,"column":107,"index":11778},"code":"    it('should hide when selecting multiple paragraphs and the allowMultiParagraphSelection option is false', function () {\n      this.el.innerHTML = '<p id=\"p-one\">lorem ipsum</p><p id=\"p-two\">lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            allowMultiParagraphSelection: false\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(document.getElementById('p-one'));\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      selectElementContentsAndFire(this.el, {\n        eventToFire: 'mouseup'\n      });\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should check for selection on mouseup event","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":249,"updatePoint":{"line":249,"column":51,"index":12512},"code":"    it('should check for selection on mouseup event', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'checkState');\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      fireEvent(editor.elements[0], 'mouseup');\n      expect(toolbar.checkState).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should check for selection on keyup","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":256,"updatePoint":{"line":256,"column":43,"index":12859},"code":"    it('should check for selection on keyup', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'checkState');\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      fireEvent(editor.elements[0], 'keyup');\n      expect(toolbar.checkState).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should hide if selection is empty","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":263,"updatePoint":{"line":263,"column":41,"index":13202},"code":"    it('should hide if selection is empty', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'setToolbarPosition').and.callThrough();\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'setToolbarButtonStates').and.callThrough();\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'showAndUpdateToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      toolbar.getToolbarElement().style.display = 'block';\n      toolbar.getToolbarElement().classList.add('medium-editor-toolbar-active');\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      editor.checkSelection();\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n      expect(toolbar.setToolbarPosition).not.toHaveBeenCalled();\n      expect(toolbar.setToolbarButtonStates).not.toHaveBeenCalled();\n      expect(toolbar.showAndUpdateToolbar).not.toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should hide when selecting multiple paragraphs and the deprecated allowMultiParagraphSelection option is false","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":278,"updatePoint":{"line":278,"column":118,"index":14330},"code":"    it('should hide when selecting multiple paragraphs and the deprecated allowMultiParagraphSelection option is false', function () {\n      this.el.innerHTML = '<p id=\"p-one\">lorem ipsum</p><p id=\"p-two\">lorem ipsum</p>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            allowMultiParagraphSelection: false\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(document.getElementById('p-one'));\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      selectElementContentsAndFire(this.el, {\n        eventToFire: 'mouseup'\n      });\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should show when something is selected","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":293,"updatePoint":{"line":293,"column":46,"index":15059},"code":"    it('should show when something is selected', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n      selectElementContentsAndFire(this.el);\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should update position and button states when something is selected","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":301,"updatePoint":{"line":301,"column":75,"index":15564},"code":"    it('should update position and button states when something is selected', function () {\n      this.el.innerHTML = 'lorem ipsum';\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'setToolbarPosition').and.callThrough();\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'setToolbarButtonStates').and.callThrough();\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'showAndUpdateToolbar').and.callThrough();\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(this.el);\n      expect(toolbar.setToolbarPosition).toHaveBeenCalled();\n      expect(toolbar.setToolbarButtonStates).toHaveBeenCalled();\n      expect(toolbar.showAndUpdateToolbar).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should correctly update position even if elementsContainer is absolute","suites":["MediumEditor.extensions.toolbar TestCase","Toolbars"],"line":313,"updatePoint":{"line":313,"column":78,"index":16344},"code":"    it('should correctly update position even if elementsContainer is absolute', function () {\n      var container = document.createElement('div'),\n        editor,\n        toolbar;\n      container.style.position = 'absolute';\n      container.style.left = '200px';\n      container.style.top = '200px';\n      document.body.appendChild(container);\n      this.el.innerHTML = 'lorem';\n      editor = this.newMediumEditor('.editor', {\n        elementsContainer: container\n      });\n      toolbar = editor.getExtensionByName('toolbar').getToolbarElement();\n      selectElementContentsAndFire(this.el);\n      expect(toolbar.classList.contains('medium-editor-toolbar-active')).toBe(true);\n      expect(parseInt(toolbar.style.left, 10)).toBeLessThan(200);\n      expect(parseInt(toolbar.style.top, 10)).toBeLessThan(200);\n      document.body.removeChild(container);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should let the user click outside of the selected area to leave","suites":["MediumEditor.extensions.toolbar TestCase","Static Toolbars"],"line":334,"updatePoint":{"line":334,"column":71,"index":17250},"code":"    it('should let the user click outside of the selected area to leave', function () {\n      this.el.innerHTML = 'This is my text<span>and this is some other text</span>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            updateOnEmptySelection: true,\n            standardizeSelectionStart: true\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      placeCursorInsideElement(this.el.firstChild, 'This is my text'.length);\n      fireEvent(this.el.parentNode, 'click', {\n        target: this.el.parentNode,\n        currentTarget: this.el\n      });\n      jasmine.clock().tick(1);\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n      expect(this.el.getAttribute('medium-editor-focused')).not.toBeTruthy();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not throw an error when check selection is called when there is an empty selection","suites":["MediumEditor.extensions.toolbar TestCase","Static Toolbars"],"line":353,"updatePoint":{"line":353,"column":97,"index":18140},"code":"    it('should not throw an error when check selection is called when there is an empty selection', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(this.el.querySelector('b'));\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]').classList.contains('medium-editor-button-active')).toBe(true);\n      window.getSelection().removeAllRanges();\n      editor.checkSelection();\n      jasmine.clock().tick(1); // checkSelection delay\n      expect(true).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should show and update toolbar buttons when toolbar is static and updateOnEmptySelection option is set to true","suites":["MediumEditor.extensions.toolbar TestCase","Static Toolbars"],"line":370,"updatePoint":{"line":370,"column":118,"index":19011},"code":"    it('should show and update toolbar buttons when toolbar is static and updateOnEmptySelection option is set to true', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true,\n            updateOnEmptySelection: true\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(this.el.querySelector('b'), {\n        eventToFire: 'focus',\n        testDelay: -1\n      });\n      window.getSelection().removeAllRanges();\n      editor.checkSelection();\n      jasmine.clock().tick(1); // checkSelection delay\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      expect(toolbar.getToolbarElement().querySelector('[data-action=\"bold\"]').classList.contains('medium-editor-button-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should be hidden for one medium-editor instance when another medium-editor instance shows its toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Static Toolbars"],"line":390,"updatePoint":{"line":390,"column":109,"index":19947},"code":"    it('should be hidden for one medium-editor instance when another medium-editor instance shows its toolbar', function () {\n      var editorOne,\n        editorTwo,\n        elTwo = this.createElement('div', '', '<span id=\"editor-span-2\">lorem ipsum</span>');\n      elTwo.id = 'editor-div-two';\n      this.el.innerHTML = '<span id=\"editor-span-1\">lorem ipsum</span>';\n      editorOne = this.newMediumEditor('.editor', {\n        toolbar: {\n          static: true\n        }\n      });\n      editorTwo = this.newMediumEditor(document.getElementById('editor-div-two'), {\n        toolbar: {\n          static: true\n        }\n      });\n      var toolbarOne = editorOne.getExtensionByName('toolbar'),\n        toolbarTwo = editorTwo.getExtensionByName('toolbar');\n      selectElementContents(document.getElementById('editor-span-1'));\n      fireEvent(this.el, 'click', {\n        target: this.el,\n        relatedTarget: elTwo\n      });\n      jasmine.clock().tick(1); // checkSelection delay\n\n      expect(toolbarOne.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n      expect(toolbarTwo.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n      selectElementContents(document.getElementById('editor-span-2'));\n      fireEvent(elTwo, 'click', {\n        target: elTwo,\n        relatedTarget: this.el\n      });\n      jasmine.clock().tick(1); // checkSelection delay\n\n      expect(toolbarOne.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n      expect(toolbarTwo.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should update button states when updateOnEmptySelection is true and the selection is empty","suites":["MediumEditor.extensions.toolbar TestCase","Static Toolbars"],"line":427,"updatePoint":{"line":427,"column":98,"index":21584},"code":"    it('should update button states when updateOnEmptySelection is true and the selection is empty', function () {\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'setToolbarButtonStates').and.callThrough();\n      var editor = this.newMediumEditor('.editor', {\n        toolbar: {\n          updateOnEmptySelection: true,\n          static: true\n        }\n      });\n      selectElementContentsAndFire(this.el, {\n        collapse: 'toStart'\n      });\n      expect(editor.getExtensionByName('toolbar').setToolbarButtonStates).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should remove select event from elements","suites":["MediumEditor.extensions.toolbar TestCase","Deactive"],"line":442,"updatePoint":{"line":442,"column":48,"index":22133},"code":"    it('should remove select event from elements', function () {\n      spyOn(this.el, 'addEventListener');\n      var editor = this.newMediumEditor('.editor');\n      expect(this.el.addEventListener).toHaveBeenCalled();\n      spyOn(this.el, 'removeEventListener');\n      editor.destroy();\n      expect(this.el.removeEventListener).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not show the toolbar on elements when toolbar option is set to false","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":452,"updatePoint":{"line":452,"column":83,"index":22567},"code":"    it('should not show the toolbar on elements when toolbar option is set to false', function () {\n      var editor = this.newMediumEditor('.editor', {\n        toolbar: false\n      });\n      expect(editor.options.toolbar).toBe(false);\n      expect(document.getElementsByClassName('medium-editor-toolbar-actions').length).toBe(0);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not create the toolbar if all elements has data attr of disable-toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":459,"updatePoint":{"line":459,"column":86,"index":22909},"code":"    it('should not create the toolbar if all elements has data attr of disable-toolbar', function () {\n      this.el.setAttribute('data-disable-toolbar', 'true');\n      var editor = this.newMediumEditor('.editor');\n      expect(document.getElementsByClassName('medium-editor-toolbar-actions').length).toBe(0);\n      expect(editor.getExtensionByName('toolbar')).toBeUndefined();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not show the toolbar when one element has a data attr of disable-toolbar set and text is selected","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":465,"updatePoint":{"line":465,"column":112,"index":23321},"code":"    it('should not show the toolbar when one element has a data attr of disable-toolbar set and text is selected', function () {\n      var element = this.createElement('div', 'editor', 'lorem ipsum'),\n        editor = null;\n      element.setAttribute('data-disable-toolbar', 'true');\n      editor = this.newMediumEditor(document.querySelectorAll('.editor'));\n      var toolbar = editor.getExtensionByName('toolbar');\n      expect(editor.elements.length).toBe(2);\n      expect(toolbar.getToolbarElement().style.display).toBe('');\n      selectElementContentsAndFire(element);\n      expect(toolbar.getToolbarElement().style.display).toBe('');\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not display toolbar when selected text within an element with contenteditable=\"false\"","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":476,"updatePoint":{"line":476,"column":100,"index":23957},"code":"    it('should not display toolbar when selected text within an element with contenteditable=\"false\"', function () {\n      this.createElement('div', 'editor');\n      this.el.innerHTML = 'lorem ipsum <div id=\"cef_el\" contenteditable=\"false\">dolor</div>';\n      var editor = this.newMediumEditor(document.querySelectorAll('.editor'), {\n          delay: 0\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(document.getElementById('cef_el'));\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(false);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should show the toolbar if its text are selected even though one or more elements that has a data attr of disable-toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":486,"updatePoint":{"line":486,"column":129,"index":24592},"code":"    it('should show the toolbar if its text are selected even though one or more elements that has a data attr of disable-toolbar', function () {\n      var editor,\n        element = this.createElement('div', 'editor');\n      element.setAttribute('data-disable-toolbar', 'true');\n      this.el.innerHTML = 'lorem ipsum';\n      editor = this.newMediumEditor(document.querySelectorAll('.editor'));\n      var toolbar = editor.getExtensionByName('toolbar');\n      expect(editor.elements.length).toBe(2);\n      expect(toolbar.getToolbarElement().style.display).toBe('');\n      selectElementContentsAndFire(this.el);\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-toolbar-active')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not try to toggle toolbar when toolbar option is set to false","suites":["MediumEditor.extensions.toolbar TestCase","Disable"],"line":498,"updatePoint":{"line":498,"column":76,"index":25262},"code":"    it('should not try to toggle toolbar when toolbar option is set to false', function () {\n      this.createElement('div', 'editor');\n      this.el.innerHTML = 'lorem ipsum';\n      var editor = this.newMediumEditor(document.querySelectorAll('.editor'), {\n          toolbar: false\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar).toBeUndefined();\n      selectElementContents(this.el);\n      editor.checkSelection();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should position static + sticky toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Scroll"],"line":511,"updatePoint":{"line":511,"column":47,"index":25740},"code":"    it('should position static + sticky toolbar', function () {\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      spyOn(MediumEditor.extensions.toolbar.prototype, 'positionToolbarIfShown');\n      fireEvent(window, 'scroll');\n      expect(toolbar.positionToolbarIfShown).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should reset toolbar position","suites":["MediumEditor.extensions.toolbar TestCase","Resizing"],"line":528,"updatePoint":{"line":528,"column":37,"index":26311},"code":"    it('should reset toolbar position', function () {\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(toolbar.getToolbarElement().className.indexOf('active')).toBeGreaterThan(-1);\n      spyOn(toolbar, 'setToolbarPosition');\n      fireEvent(window, 'resize');\n      jasmine.clock().tick(1);\n      expect(toolbar.setToolbarPosition).toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should not call setToolbarPosition when toolbar is not visible","suites":["MediumEditor.extensions.toolbar TestCase","Resizing"],"line":538,"updatePoint":{"line":538,"column":70,"index":26832},"code":"    it('should not call setToolbarPosition when toolbar is not visible', function () {\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar');\n      spyOn(toolbar, 'setToolbarPosition').and.callThrough();\n      fireEvent(window, 'resize');\n      jasmine.clock().tick(1);\n      expect(toolbar.getToolbarElement().className.indexOf('active')).toBe(-1);\n      expect(toolbar.setToolbarPosition).not.toHaveBeenCalled();\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should throttle multiple calls to position toolbar","suites":["MediumEditor.extensions.toolbar TestCase","Resizing"],"line":547,"updatePoint":{"line":547,"column":58,"index":27296},"code":"    it('should throttle multiple calls to position toolbar', function () {\n      var editor = this.newMediumEditor('.editor'),\n        toolbar = editor.getExtensionByName('toolbar'),\n        tickTime = 60,\n        totalTicks;\n      selectElementContentsAndFire(editor.elements[0]);\n      expect(toolbar.getToolbarElement().className.indexOf('active')).toBeGreaterThan(-1);\n      spyOn(toolbar, 'setToolbarPosition').and.callThrough();\n      for (totalTicks = 0; totalTicks < tickTime; totalTicks += 10) {\n        fireEvent(window, 'resize');\n        jasmine.clock().tick(10);\n      }\n      expect(toolbar.setToolbarPosition.calls.count()).toBeLessThan(3);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should position static + sticky toolbar on the left","suites":["MediumEditor.extensions.toolbar TestCase","Static & sticky toolbar position"],"line":563,"updatePoint":{"line":563,"column":59,"index":28028},"code":"    it('should position static + sticky toolbar on the left', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true,\n            align: 'left'\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar').getToolbarElement();\n      selectElementContentsAndFire(this.el.querySelector('b'));\n      window.getSelection().getRangeAt(0).collapse(false);\n      editor.checkSelection();\n      jasmine.clock().tick(1); // checkSelection delay\n\n      expect(toolbar.style.left).not.toBe('');\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should position static + sticky toolbar on the right","suites":["MediumEditor.extensions.toolbar TestCase","Static & sticky toolbar position"],"line":580,"updatePoint":{"line":580,"column":60,"index":28670},"code":"    it('should position static + sticky toolbar on the right', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true,\n            align: 'right'\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar').getToolbarElement();\n      selectElementContentsAndFire(this.el.querySelector('b'));\n      window.getSelection().getRangeAt(0).collapse(false);\n      editor.checkSelection();\n      jasmine.clock().tick(1); // checkSelection delay\n\n      expect(toolbar.style.left).not.toBe('');\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should position static + sticky toolbar on the center","suites":["MediumEditor.extensions.toolbar TestCase","Static & sticky toolbar position"],"line":597,"updatePoint":{"line":597,"column":61,"index":29314},"code":"    it('should position static + sticky toolbar on the center', function () {\n      this.el.innerHTML = '<b>lorem ipsum</b>';\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            static: true,\n            sticky: true,\n            align: 'center'\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar').getToolbarElement();\n      selectElementContentsAndFire(this.el.querySelector('b'));\n      window.getSelection().getRangeAt(0).collapse(false);\n      editor.checkSelection();\n      jasmine.clock().tick(1); // checkSelection delay\n\n      expect(toolbar.style.left).not.toBe('');\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should contain relative toolbar class","suites":["MediumEditor.extensions.toolbar TestCase","Relative Toolbars"],"line":616,"updatePoint":{"line":616,"column":45,"index":29995},"code":"    it('should contain relative toolbar class', function () {\n      var relativeContainer = this.createElement('div');\n      relativeContainer.setAttribute('id', 'someRelativeDiv');\n      window.document.body.appendChild(relativeContainer);\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            relativeContainer: document.getElementById('someRelativeDiv')\n          }\n        }),\n        toolbar = editor.getExtensionByName('toolbar');\n      expect(toolbar.getToolbarElement().classList.contains('medium-editor-relative-toolbar')).toBe(true);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"should be included in relative node","suites":["MediumEditor.extensions.toolbar TestCase","Relative Toolbars"],"line":628,"updatePoint":{"line":628,"column":43,"index":30577},"code":"    it('should be included in relative node', function () {\n      var relativeContainer = this.createElement('div');\n      relativeContainer.setAttribute('id', 'someRelativeDiv');\n      window.document.body.appendChild(relativeContainer);\n      var editor = this.newMediumEditor('.editor', {\n          toolbar: {\n            relativeContainer: document.getElementById('someRelativeDiv')\n          }\n        }),\n        toolbarHTML = editor.getExtensionByName('toolbar').getToolbarElement().outerHTML;\n      expect(document.getElementById('someRelativeDiv').innerHTML).toBe(toolbarHTML);\n    });","file":"toolbar.spec.js","skipped":false,"dir":"spec"},{"name":"is exposed on the MediumEditor ctor","suites":["MediumEditor.util","Exposure"],"line":13,"updatePoint":{"line":13,"column":43,"index":329},"code":"    it('is exposed on the MediumEditor ctor', function () {\n      expect(MediumEditor.util).toBeTruthy();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should overwrite values from right to left","suites":["MediumEditor.util","Extend"],"line":18,"updatePoint":{"line":18,"column":50,"index":491},"code":"    it('should overwrite values from right to left', function () {\n      var objOne = {\n          one: 'one'\n        },\n        objTwo = {\n          one: 'two',\n          three: 'three'\n        },\n        objThree = {\n          three: 'four',\n          five: 'six'\n        },\n        objFour,\n        result = MediumEditor.util.extend({}, objOne, objTwo, objThree, objFour);\n      expect(result).toEqual({\n        one: 'two',\n        three: 'four',\n        five: 'six'\n      });\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should overwrite values from left to right","suites":["MediumEditor.util","Defaults"],"line":40,"updatePoint":{"line":40,"column":50,"index":1021},"code":"    it('should overwrite values from left to right', function () {\n      var objOne = {\n          one: 'one'\n        },\n        objTwo = {\n          one: 'two',\n          three: 'three'\n        },\n        objThree = {\n          three: 'four',\n          five: 'six'\n        },\n        objFour,\n        result = MediumEditor.util.defaults({}, objOne, objTwo, objThree, objFour);\n      expect(result).toEqual({\n        one: 'one',\n        three: 'three',\n        five: 'six'\n      });\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should overwrite nothing without args","suites":["MediumEditor.util","Defaults"],"line":60,"updatePoint":{"line":60,"column":45,"index":1506},"code":"    it('should overwrite nothing without args', function () {\n      var result = MediumEditor.util.defaults();\n      expect(result).toEqual({});\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should warn when a method is deprecated","suites":["MediumEditor.util","Deprecated"],"line":66,"updatePoint":{"line":66,"column":47,"index":1706},"code":"    it('should warn when a method is deprecated', function () {\n      var testObj = {\n        newMethod: function () {}\n      };\n      spyOn(testObj, 'newMethod').and.callThrough();\n      spyOn(MediumEditor.util, 'warn').and.callThrough();\n      MediumEditor.util.deprecatedMethod.call(testObj, 'test', 'newMethod', ['arg1', true], 'some version');\n      expect(testObj.newMethod).toHaveBeenCalledWith('arg1', true);\n      expect(MediumEditor.util.warn).toHaveBeenCalledWith('test is deprecated, please use newMethod instead. Will be removed in some version');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should warn when an option is deprecated","suites":["MediumEditor.util","Deprecated"],"line":76,"updatePoint":{"line":76,"column":48,"index":2276},"code":"    it('should warn when an option is deprecated', function () {\n      spyOn(MediumEditor.util, 'warn').and.callThrough();\n      MediumEditor.util.deprecated('oldOption', 'sub.newOption');\n      expect(MediumEditor.util.warn).toHaveBeenCalledWith('oldOption is deprecated, please use sub.newOption instead.');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should allow passing a version when the removal will happen","suites":["MediumEditor.util","Deprecated"],"line":81,"updatePoint":{"line":81,"column":67,"index":2613},"code":"    it('should allow passing a version when the removal will happen', function () {\n      spyOn(MediumEditor.util, 'warn').and.callThrough();\n      MediumEditor.util.deprecated('old', 'new', '11tybillion');\n      expect(MediumEditor.util.warn).toHaveBeenCalledWith('old is deprecated, please use new instead. Will be removed in 11tybillion');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"sets target blank on a A element from a A element","suites":["MediumEditor.util","settargetblank"],"line":88,"updatePoint":{"line":88,"column":57,"index":3003},"code":"    it('sets target blank on a A element from a A element', function () {\n      var el = this.createElement('a', '', 'lorem ipsum');\n      el.attributes.href = 'http://0.0.0.0/bar.html';\n      MediumEditor.util.setTargetBlank(el);\n      expect(el.target).toBe('_blank');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"sets target blank on a A element from a DIV element","suites":["MediumEditor.util","settargetblank"],"line":94,"updatePoint":{"line":94,"column":59,"index":3284},"code":"    it('sets target blank on a A element from a DIV element', function () {\n      var el = this.createElement('div', '', '<a href=\"http://1.1.1.1/foo.html\">foo</a> <a href=\"http://0.0.0.0/bar.html\">bar</a>');\n      MediumEditor.util.setTargetBlank(el, 'http://0.0.0.0/bar.html');\n      var nodes = el.getElementsByTagName('a');\n      expect(nodes[0].target).not.toBe('_blank');\n      expect(nodes[1].target).toBe('_blank');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"removes target blank from a A element","suites":["MediumEditor.util","removetargetblank"],"line":103,"updatePoint":{"line":103,"column":45,"index":3754},"code":"    it('removes target blank from a A element', function () {\n      var el = this.createElement('a', '', 'lorem ipsum');\n      el.attributes.href = 'http://0.0.0.0/bar.html';\n      el.attributes.target = '_blank';\n      MediumEditor.util.removeTargetBlank(el, 'http://0.0.0.0/bar.html');\n      expect(el.target).toBe('');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"removes target blank on a A element from a DIV element","suites":["MediumEditor.util","removetargetblank"],"line":110,"updatePoint":{"line":110,"column":62,"index":4101},"code":"    it('removes target blank on a A element from a DIV element', function () {\n      var el = this.createElement('div', '', '<a href=\"http://1.1.1.1/foo.html\" target=\"_blank\">foo</a> <a href=\"http://0.0.0.0/bar.html\" target=\"_blank\">bar</a>');\n      MediumEditor.util.removeTargetBlank(el, 'http://0.0.0.0/bar.html');\n      var nodes = el.getElementsByTagName('a');\n      expect(nodes[0].target).toBe('_blank');\n      expect(nodes[1].target).toBe('');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"add class to anchors on a A element from a A element","suites":["MediumEditor.util","addClassToAnchors"],"line":119,"updatePoint":{"line":119,"column":60,"index":4611},"code":"    it('add class to anchors on a A element from a A element', function () {\n      var el = this.createElement('a', '', 'lorem ipsum');\n      el.attributes.href = 'http://0.0.0.0/bar.html';\n      MediumEditor.util.addClassToAnchors(el, 'firstclass');\n      expect(el.classList.length).toBe(1);\n      expect(el.classList.contains('firstclass')).toBe(true);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"add class to anchors on a A element from a DIV element","suites":["MediumEditor.util","addClassToAnchors"],"line":126,"updatePoint":{"line":126,"column":62,"index":4977},"code":"    it('add class to anchors on a A element from a DIV element', function () {\n      var el = this.createElement('div', '', '<a href=\"http://1.1.1.1/foo.html\">foo</a> <a href=\"http://0.0.0.0/bar.html\">bar</a>');\n      MediumEditor.util.addClassToAnchors(el, 'firstclass');\n      var nodes = el.getElementsByTagName('a');\n      expect(nodes[0].classList.length).toBe(1);\n      expect(nodes[1].classList.length).toBe(1);\n      expect(nodes[0].classList.contains('firstclass')).toBe(true);\n      expect(nodes[1].classList.contains('firstclass')).toBe(true);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"exists","suites":["MediumEditor.util","warn"],"line":137,"updatePoint":{"line":137,"column":14,"index":5531},"code":"    it('exists', function () {\n      expect(typeof MediumEditor.util.warn).toBe('function');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"ends up calling console.warn","suites":["MediumEditor.util","warn"],"line":140,"updatePoint":{"line":140,"column":36,"index":5654},"code":"    it('ends up calling console.warn', function () {\n      // IE9 mock for SauceLabs\n      if (window.console === undefined) {\n        window.console = {\n          warn: function (msg) {\n            return msg;\n          }\n        };\n      } else if (typeof window.console.warn !== 'function') {\n        window.console.warn = function (msg) {\n          return msg;\n        };\n      }\n      var spy = spyOn(window.console.warn, 'apply').and.callThrough();\n      MediumEditor.util.warn('message');\n      expect(spy).toHaveBeenCalled();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should split a complex tree correctly when splitting off right part of tree","suites":["MediumEditor.util","splitOffDOMTree"],"line":175,"updatePoint":{"line":175,"column":83,"index":6658},"code":"    it('should split a complex tree correctly when splitting off right part of tree', function () {\n      var el = this.createElement('div', '', '<span><b>1</b><i>2</i></span><span><b>3</b><u>4</u></span><span><b>5</b><i>6</i></span>'),\n        splitOn = el.querySelector('u').firstChild,\n        result = MediumEditor.util.splitOffDOMTree(el, splitOn);\n      expect(el.outerHTML).toBe('<div><span><b>1</b><i>2</i></span><span><b>3</b></span></div>');\n      expect(result.outerHTML).toBe('<div><span><u>4</u></span><span><b>5</b><i>6</i></span></div>');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should split a complex tree correctly when splitting off left part of tree","suites":["MediumEditor.util","splitOffDOMTree"],"line":199,"updatePoint":{"line":199,"column":82,"index":7549},"code":"    it('should split a complex tree correctly when splitting off left part of tree', function () {\n      var el = this.createElement('div', '', '<span><b>1</b><i>2</i></span><span><b>3</b><u>4</u></span><span><b>5</b><i>6</i></span>'),\n        splitOn = el.querySelector('u').firstChild,\n        result = MediumEditor.util.splitOffDOMTree(el, splitOn, true);\n      expect(el.outerHTML).toBe('<div><span><b>5</b><i>6</i></span></div>');\n      expect(result.outerHTML).toBe('<div><span><b>1</b><i>2</i></span><span><b>3</b><u>4</u></span></div>');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false and bail if no elements are passed","suites":["MediumEditor.util","moveTextRangeIntoElement"],"line":208,"updatePoint":{"line":208,"column":62,"index":8142},"code":"    it('should return false and bail if no elements are passed', function () {\n      expect(MediumEditor.util.moveTextRangeIntoElement(null, null)).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false and bail if elemenets do not share a root","suites":["MediumEditor.util","moveTextRangeIntoElement"],"line":211,"updatePoint":{"line":211,"column":69,"index":8318},"code":"    it('should return false and bail if elemenets do not share a root', function () {\n      var el = this.createElement('div', '', 'text'),\n        elTwo = this.createElement('div', '', 'more text', true),\n        temp = this.createElement('div', '');\n      expect(MediumEditor.util.moveTextRangeIntoElement(el, elTwo, temp)).toBe(false);\n      expect(temp.innerHTML).toBe('');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should create a parent element that spans multiple root elements","suites":["MediumEditor.util","moveTextRangeIntoElement"],"line":218,"updatePoint":{"line":218,"column":72,"index":8707},"code":"    it('should create a parent element that spans multiple root elements', function () {\n      var el = this.createElement('div', '', '<span>Link = http</span>' + '<span>://</span>' + '<span>www.exam</span>' + '<span>ple.com</span>' + '<span>:443/</span>' + '<span>path/to</span>' + '<span>somewhere#</span>' + '<span>index notLink</span>'),\n        firstText = el.firstChild.firstChild.splitText('Link = '.length),\n        lastText = el.lastChild.firstChild,\n        para = this.createElement('p', '');\n      lastText.splitText('index'.length);\n      MediumEditor.util.moveTextRangeIntoElement(firstText, lastText, para);\n      expect(el.innerHTML).toBe('<span>Link = </span>' + '<p>' + '<span>http</span>' + '<span>://</span>' + '<span>www.exam</span>' + '<span>ple.com</span>' + '<span>:443/</span>' + '<span>path/to</span>' + '<span>somewhere#</span>' + '<span>index</span>' + '</p>' + '<span> notLink</span>');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should get closed tag","suites":["MediumEditor.util","getClosestTag"],"line":229,"updatePoint":{"line":229,"column":29,"index":9636},"code":"    it('should get closed tag', function () {\n      var el = this.createElement('div', '', '<span>my <b>text</b></span>'),\n        tag = el.querySelector('b').firstChild,\n        closestTag = MediumEditor.util.getClosestTag(tag, 'span');\n      expect(closestTag.nodeName.toLowerCase()).toBe('span');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not get closed tag with data-medium-editor-element","suites":["MediumEditor.util","getClosestTag"],"line":235,"updatePoint":{"line":235,"column":65,"index":9980},"code":"    it('should not get closed tag with data-medium-editor-element', function () {\n      var el = this.createElement('div', '', '<p>youpi<span data-medium-editor-element=\"true\">my <b>text</b></span></p>'),\n        tag = el.querySelector('b').firstChild,\n        closestTag = MediumEditor.util.getClosestTag(tag, 'p');\n      expect(closestTag).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not get closed tag from empty element","suites":["MediumEditor.util","getClosestTag"],"line":241,"updatePoint":{"line":241,"column":52,"index":10330},"code":"    it('should not get closed tag from empty element', function () {\n      var closestTag = MediumEditor.util.getClosestTag(false, 'span');\n      expect(closestTag).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should be a list item but inside a ul","suites":["MediumEditor.util","isListItem"],"line":247,"updatePoint":{"line":247,"column":45,"index":10554},"code":"    it('should be a list item but inside a ul', function () {\n      var el = this.createElement('ul', '', '<li>test</li>'),\n        result = MediumEditor.util.isListItem(el);\n      expect(result).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should be a list item","suites":["MediumEditor.util","isListItem"],"line":252,"updatePoint":{"line":252,"column":29,"index":10755},"code":"    it('should be a list item', function () {\n      var el = this.createElement('ul', '', '<li>test</li>'),\n        li = el.querySelector('li'),\n        result = MediumEditor.util.isListItem(li);\n      expect(result).toBe(true);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not be a list item","suites":["MediumEditor.util","isListItem"],"line":258,"updatePoint":{"line":258,"column":33,"index":10996},"code":"    it('should not be a list item', function () {\n      var result = MediumEditor.util.isListItem(false);\n      expect(result).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not be a list item","suites":["MediumEditor.util","isListItem"],"line":262,"updatePoint":{"line":262,"column":33,"index":11144},"code":"    it('should not be a list item', function () {\n      var el = this.createElement('p', '', '<b>test</b>'),\n        result = MediumEditor.util.isListItem(el);\n      expect(result).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return true no matter how the key associated to the event is defined","suites":["MediumEditor.util","isKey"],"line":269,"updatePoint":{"line":269,"column":83,"index":11436},"code":"    it('should return true no matter how the key associated to the event is defined', function () {\n      var event;\n      event = {\n        which: 13,\n        keyCode: null,\n        charCode: null\n      };\n      expect(MediumEditor.util.isKey(event, 13)).toBeTruthy();\n      event = {\n        which: null,\n        keyCode: 13,\n        charCode: null\n      };\n      expect(MediumEditor.util.isKey(event, 13)).toBeTruthy();\n      event = {\n        which: null,\n        keyCode: null,\n        charCode: 13\n      };\n      expect(MediumEditor.util.isKey(event, 13)).toBeTruthy();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return true when a key associated to event is listed to one we are looking for","suites":["MediumEditor.util","isKey"],"line":290,"updatePoint":{"line":290,"column":93,"index":12030},"code":"    it('should return true when a key associated to event is listed to one we are looking for', function () {\n      var event = {\n        which: 13\n      };\n      expect(MediumEditor.util.isKey(event, 13)).toBeTruthy();\n      expect(MediumEditor.util.isKey(event, [13])).toBeTruthy();\n      expect(MediumEditor.util.isKey(event, [13, 12])).toBeTruthy();\n      expect(MediumEditor.util.isKey(event, [12, 13])).toBeTruthy();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false when a key associated to event is NOT listed to one we are looking for","suites":["MediumEditor.util","isKey"],"line":299,"updatePoint":{"line":299,"column":98,"index":12466},"code":"    it('should return false when a key associated to event is NOT listed to one we are looking for', function () {\n      var event = {\n        which: 13\n      };\n      expect(MediumEditor.util.isKey(event, 65)).toBeFalsy();\n      expect(MediumEditor.util.isKey(event, [65])).toBeFalsy();\n      expect(MediumEditor.util.isKey(event, [65, 66])).toBeFalsy();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should execute indent command when called with blockquote when selection is inside a nested block element within a blockquote","suites":["MediumEditor.util","execFormatBlock"],"line":309,"updatePoint":{"line":309,"column":133,"index":12915},"code":"    it('should execute indent command when called with blockquote when selection is inside a nested block element within a blockquote', function () {\n      var el = this.createElement('div', '', '<blockquote><p>Some <b>Text</b></p></blockquote>');\n      el.setAttribute('contenteditable', true);\n      selectElementContents(el.querySelector('b'));\n      spyOn(document, 'execCommand');\n      MediumEditor.util.execFormatBlock(document, 'blockquote');\n      expect(document.execCommand).toHaveBeenCalledWith('outdent', false, null);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should execute indent command when called with blockquote when isIE is true","suites":["MediumEditor.util","execFormatBlock"],"line":317,"updatePoint":{"line":317,"column":83,"index":13405},"code":"    it('should execute indent command when called with blockquote when isIE is true', function () {\n      var origIsIE = MediumEditor.util.isIE,\n        el = this.createElement('div', '', '<p>Some <b>Text</b></p>');\n      MediumEditor.util.isIE = true;\n      el.setAttribute('contenteditable', true);\n      selectElementContents(el.querySelector('b'));\n      spyOn(document, 'execCommand');\n      MediumEditor.util.execFormatBlock(document, 'blockquote');\n      expect(document.execCommand).toHaveBeenCalledWith('indent', false, 'blockquote');\n      MediumEditor.util.isIE = origIsIE;\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not remove the contenteditable element when calling insert into an empty contenteditable element","suites":["MediumEditor.util","insertHTMLCommand"],"line":330,"updatePoint":{"line":330,"column":111,"index":14078},"code":"    it('should not remove the contenteditable element when calling insert into an empty contenteditable element', function () {\n      var el = this.createElement('div', 'editable', ''),\n        origQCS = document.queryCommandSupported;\n      // Force our custom implementation to run\n      spyOn(document, 'queryCommandSupported').and.callFake(function (command) {\n        if (command === 'insertHTML') {\n          return false;\n        }\n        return origQCS.apply(document, arguments);\n      });\n      // Mimic an editor element\n      el.setAttribute('contenteditable', true);\n      el.setAttribute('data-medium-editor-element', true);\n\n      // Make sure the element has 0 child nodes\n      while (el.firstChild) {\n        el.remove(el.firstChild);\n      }\n      selectElementContents(el);\n      MediumEditor.util.insertHTMLCommand(document, '<p>some pasted html</p>', true);\n      expect(el.innerHTML).toBe('<p>some pasted html</p>');\n      expect(document.body.contains(el)).toBe(true, 'The editor element has been removed from the page');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should trigger editableInput when using custom insertHTML implementation and contenteditable does not support input event","suites":["MediumEditor.util","insertHTMLCommand"],"line":355,"updatePoint":{"line":355,"column":129,"index":15209},"code":"    it('should trigger editableInput when using custom insertHTML implementation and contenteditable does not support input event', function () {\n      // Ensure custom implementation\n      var originalInputSupport = MediumEditor.Events.prototype.InputEventOnContenteditableSupported;\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = false;\n      var el = this.createElement('div', 'editable', '<p>orig text</p>'),\n        origQCS = document.queryCommandSupported;\n      // Force our custom implementation to run\n      spyOn(document, 'queryCommandSupported').and.callFake(function (command) {\n        if (command === 'insertHTML') {\n          return false;\n        }\n        return origQCS.apply(document, arguments);\n      });\n      var editor = this.newMediumEditor('.editable'),\n        spy = jasmine.createSpy('handler');\n      editor.subscribe('editableInput', spy);\n      selectElementContentsAndFire(el.firstChild);\n      MediumEditor.util.insertHTMLCommand(document, '<p>some pasted html</p>', true);\n      var obj = {\n        target: el,\n        currentTarget: el\n      };\n      expect(spy).toHaveBeenCalledWith(obj, el);\n      expect(el.innerHTML).toBe('<p>some pasted html</p>');\n      expect(document.body.contains(el)).toBe(true, 'The editor element has been removed from the page');\n      MediumEditor.Events.prototype.InputEventOnContenteditableSupported = originalInputSupport;\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return true for an element which is a descendant of another","suites":["MediumEditor.util","isDescendant"],"line":384,"updatePoint":{"line":384,"column":74,"index":16630},"code":"    it('should return true for an element which is a descendant of another', function () {\n      var parent = this.createElement('div'),\n        child = parent.appendChild(document.createTextNode('text'));\n      expect(MediumEditor.util.isDescendant(parent, child)).toBe(true);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false for an element which is not a descendant of another","suites":["MediumEditor.util","isDescendant"],"line":389,"updatePoint":{"line":389,"column":79,"index":16921},"code":"    it('should return false for an element which is not a descendant of another', function () {\n      var parent = this.createElement('div'),\n        child = document.createTextNode('text');\n      expect(MediumEditor.util.isDescendant(parent, child)).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false when checking the same element","suites":["MediumEditor.util","isDescendant"],"line":394,"updatePoint":{"line":394,"column":58,"index":17172},"code":"    it('should return false when checking the same element', function () {\n      var parent = this.createElement('div');\n      expect(MediumEditor.util.isDescendant(parent, parent)).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return true when checking the same element but using the equality param","suites":["MediumEditor.util","isDescendant"],"line":398,"updatePoint":{"line":398,"column":86,"index":17403},"code":"    it('should return true when checking the same element but using the equality param', function () {\n      var parent = this.createElement('div');\n      expect(MediumEditor.util.isDescendant(parent, parent, true)).toBe(true);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false when the elements are null","suites":["MediumEditor.util","isDescendant"],"line":402,"updatePoint":{"line":402,"column":54,"index":17607},"code":"    it('should return false when the elements are null', function () {\n      var parent = this.createElement('div');\n      expect(MediumEditor.util.isDescendant(parent, null)).toBe(false);\n      expect(MediumEditor.util.isDescendant(null, parent)).toBe(false);\n      expect(MediumEditor.util.isDescendant(null, null)).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return false when the parent element is a text node","suites":["MediumEditor.util","isDescendant"],"line":408,"updatePoint":{"line":408,"column":66,"index":17958},"code":"    it('should return false when the parent element is a text node', function () {\n      var parent = document.createTextNode('text'),\n        child = this.createElement('div');\n      expect(MediumEditor.util.isDescendant(parent, child)).toBe(false);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return block elements without block elements as children","suites":["MediumEditor.util","splitByBlockElements"],"line":415,"updatePoint":{"line":415,"column":71,"index":18277},"code":"    it('should return block elements without block elements as children', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '' + '<blockquote><ol>' + '<li><div><table><thead><tr><th>Head</th></tr></thead></table></div></li>' + '<li>List Item</li>' + '</ol>' + '<p>paragraph</p>' + '</blockquote>';\n      var parts = MediumEditor.util.splitByBlockElements(el);\n      expect(parts.length).toBe(3);\n\n      // <th>Head</th>\n      expect(parts[0].nodeName.toLowerCase()).toBe('th');\n      expect(parts[0].textContent).toBe('Head');\n      // <li>List Item</li>\n      expect(parts[1].nodeName.toLowerCase()).toBe('li');\n      expect(parts[1].textContent).toBe('List Item');\n      // <p>paragraph</p>\n      expect(parts[2].nodeName.toLowerCase()).toBe('p');\n      expect(parts[2].textContent).toBe('paragraph');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return inline elements and text nodes if they are siblings of blocks","suites":["MediumEditor.util","splitByBlockElements"],"line":431,"updatePoint":{"line":431,"column":83,"index":19128},"code":"    it('should return inline elements and text nodes if they are siblings of blocks', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '' + '<blockquote>' + '<span>Text <b>bold <i>bold + italics</i></b> <u>underlined</u></span>' + '<ol><li>List Item</li></ol>' + 'Text Node' + '</blockquote>';\n      var parts = MediumEditor.util.splitByBlockElements(el);\n      expect(parts.length).toBe(3);\n\n      // <span>Text <b>bold <i>bold + italics</i></b> <u>underlined</u></span>\n      expect(parts[0].nodeName.toLowerCase()).toBe('span');\n      expect(parts[0].textContent).toBe('Text bold bold + italics underlined');\n      // <li>List Item</li>\n      expect(parts[1].nodeName.toLowerCase()).toBe('li');\n      expect(parts[1].textContent).toBe('List Item');\n      // Text Node\n      expect(parts[2].nodeName.toLowerCase()).toBe('#text');\n      expect(parts[2].textContent).toBe('Text Node');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should ignore comments","suites":["MediumEditor.util","splitByBlockElements"],"line":447,"updatePoint":{"line":447,"column":30,"index":19997},"code":"    it('should ignore comments', function () {\n      var comment = document.createComment('comment'),\n        parts = MediumEditor.util.splitByBlockElements(comment);\n      expect(parts.length).toBe(0);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should ignore nested comments","suites":["MediumEditor.util","splitByBlockElements"],"line":452,"updatePoint":{"line":452,"column":37,"index":20215},"code":"    it('should ignore nested comments', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '' + '<p>Text</p>' + '<!---->';\n      var parts = MediumEditor.util.splitByBlockElements(el);\n      expect(parts.length).toBe(1);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the closest block container","suites":["MediumEditor.util","getClosestBlockContainer"],"line":460,"updatePoint":{"line":460,"column":49,"index":20541},"code":"    it('should return the closest block container', function () {\n      var el = this.createElement('div', '', '<blockquote><p>paragraph</p><ul><li><span>list item</span></li></ul></blockquote>'),\n        span = el.querySelector('span'),\n        container = MediumEditor.util.getClosestBlockContainer(span);\n      expect(container).toBe(el.querySelector('li'));\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the parent editable if element is a text node child of the editor","suites":["MediumEditor.util","getClosestBlockContainer"],"line":466,"updatePoint":{"line":466,"column":87,"index":20949},"code":"    it('should return the parent editable if element is a text node child of the editor', function () {\n      var el = this.createElement('div', 'editable', ' <p>text</p>'),\n        emptyTextNode = el.firstChild;\n      this.newMediumEditor('.editable');\n      var container = MediumEditor.util.getClosestBlockContainer(emptyTextNode);\n      expect(container).toBe(el);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the highest level block container","suites":["MediumEditor.util","getTopBlockContainer"],"line":475,"updatePoint":{"line":475,"column":55,"index":21349},"code":"    it('should return the highest level block container', function () {\n      var el = this.createElement('div', '', '<blockquote><p>paragraph</p><ul><li><span>list item</span></li></ul></blockquote>'),\n        span = el.querySelector('span'),\n        container = MediumEditor.util.getTopBlockContainer(span);\n      expect(container).toBe(el.querySelector('blockquote'));\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the parent editable if element is a text node child of the editor","suites":["MediumEditor.util","getTopBlockContainer"],"line":481,"updatePoint":{"line":481,"column":87,"index":21761},"code":"    it('should return the parent editable if element is a text node child of the editor', function () {\n      var el = this.createElement('div', 'editable', ' <p>text</p>'),\n        emptyTextNode = el.firstChild;\n      this.newMediumEditor('.editable');\n      var container = MediumEditor.util.getTopBlockContainer(emptyTextNode);\n      expect(container).toBe(el);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the previous sibling of an element if it exists","suites":["MediumEditor.util","findPreviousSibling"],"line":490,"updatePoint":{"line":490,"column":69,"index":22170},"code":"    it('should return the previous sibling of an element if it exists', function () {\n      var el = this.createElement('div', '', '<p>first <b>second </b><i>third</i></p><ul><li>fourth</li></ul>'),\n        second = el.querySelector('b'),\n        third = el.querySelector('i'),\n        prevSibling = MediumEditor.util.findPreviousSibling(third);\n      expect(prevSibling).toBe(second);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the previous sibling on an ancestor if a previous sibling does not exist","suites":["MediumEditor.util","findPreviousSibling"],"line":497,"updatePoint":{"line":497,"column":94,"index":22589},"code":"    it('should return the previous sibling on an ancestor if a previous sibling does not exist', function () {\n      var el = this.createElement('div', '', '<p>first <b>second </b><i>third</i></p><ul><li>fourth</li></ul>'),\n        fourth = el.querySelector('li').firstChild,\n        p = el.querySelector('p'),\n        prevSibling = MediumEditor.util.findPreviousSibling(fourth);\n      expect(prevSibling).toBe(p);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should not find a previous sibling if the element is at the beginning of an editor element","suites":["MediumEditor.util","findPreviousSibling"],"line":504,"updatePoint":{"line":504,"column":98,"index":23016},"code":"    it('should not find a previous sibling if the element is at the beginning of an editor element', function () {\n      var el = this.createElement('div', 'editable', '<p>first <b>second </b><i>third</i></p><ul><li>fourth</li></ul>'),\n        first = el.querySelector('p').firstChild;\n      this.newMediumEditor('.editable');\n      var prevSibling = MediumEditor.util.findPreviousSibling(first);\n      expect(prevSibling).toBeFalsy();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return text nodes within an element","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":513,"updatePoint":{"line":513,"column":50,"index":23476},"code":"    it('should return text nodes within an element', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\">link</a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 0,\n        end: el.textContent.length\n      });\n      expect(textNodes.length).toBe(11);\n      expect(textNodes[0].nodeValue).toBe('Plain ');\n      expect(textNodes[9].nodeValue).toBe('span1 ');\n      expect(textNodes[10].nodeValue).toBe('span2');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return text nodes within an element given a start and end range","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":525,"updatePoint":{"line":525,"column":78,"index":24109},"code":"    it('should return text nodes within an element given a start and end range', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\">link</a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 11,\n        end: 22\n      });\n      expect(textNodes.length).toBe(3);\n      expect(textNodes[0].nodeValue).toBe('link');\n      expect(textNodes[1].nodeValue).toBe(' ');\n      expect(textNodes[2].nodeValue).toBe('italic');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should split text nodes if start and end range are in the middle of a text node","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":537,"updatePoint":{"line":537,"column":87,"index":24725},"code":"    it('should split text nodes if start and end range are in the middle of a text node', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\">link</a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 13,\n        end: 19\n      });\n      expect(el.querySelector('a').childNodes.length).toBe(2);\n      expect(el.querySelector('i').childNodes.length).toBe(2);\n      expect(textNodes.length).toBe(3);\n      expect(textNodes[0].nodeValue).toBe('nk');\n      expect(textNodes[1].nodeValue).toBe(' ');\n      expect(textNodes[2].nodeValue).toBe('ita');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return an image when it falls within the specified range","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":551,"updatePoint":{"line":551,"column":71,"index":25446},"code":"    it('should return an image when it falls within the specified range', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\">li<img src=\"../demo/img/medium-editor.jpg\" />nk</a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 11,\n        end: 15\n      });\n      expect(textNodes.length).toBe(3);\n      expect(textNodes[0].nodeValue).toBe('li');\n      expect(textNodes[1].nodeName.toLowerCase()).toBe('img');\n      expect(textNodes[2].nodeValue).toBe('nk');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return an image when it is at the end of the specified range","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":563,"updatePoint":{"line":563,"column":75,"index":26102},"code":"    it('should return an image when it is at the end of the specified range', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\">link<img src=\"../demo/img/medium-editor.jpg\" /></a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 11,\n        end: 15\n      });\n      expect(textNodes.length).toBe(2);\n      expect(textNodes[0].nodeValue).toBe('link');\n      expect(textNodes[1].nodeName.toLowerCase()).toBe('img');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return an image when it is the only content in the specified range","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":574,"updatePoint":{"line":574,"column":81,"index":26717},"code":"    it('should return an image when it is the only content in the specified range', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" /></a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 11,\n        end: 11\n      });\n      expect(textNodes.length).toBe(1);\n      expect(textNodes[0].nodeName.toLowerCase()).toBe('img');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return images when they are at the beginning of the specified range","suites":["MediumEditor.util","findOrCreateMatchingTextNodes"],"line":584,"updatePoint":{"line":584,"column":82,"index":27278},"code":"    it('should return images when they are at the beginning of the specified range', function () {\n      var el = this.createElement('div');\n      el.innerHTML = '<p>Plain <b>bold</b> <a href=\"#\"><img src=\"../demo/img/medium-editor.jpg\" /><img src=\"../demo/img/roman.jpg\" />link</a> <i>italic</i> <u>underline</u> <span>span1 <span>span2</span></span></p>';\n      var textNodes = MediumEditor.util.findOrCreateMatchingTextNodes(document, el, {\n        start: 11,\n        end: 15\n      });\n      expect(textNodes.length).toBe(3);\n      expect(textNodes[0].nodeName.toLowerCase()).toBe('img');\n      expect(textNodes[1].nodeName.toLowerCase()).toBe('img');\n      expect(textNodes[2].nodeValue).toBe('link');\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should find the first text node within an element","suites":["MediumEditor.util","getFirstTextNode"],"line":600,"updatePoint":{"line":600,"column":57,"index":28094},"code":"    it('should find the first text node within an element', function () {\n      var el = this.createElement('div', '', '<p><b><i><u><a href=\"#\">First</a> text</u> in</i> editor</b>!</p>'),\n        anchorText = el.querySelector('a').firstChild,\n        firstText = MediumEditor.util.getFirstTextNode(el);\n      expect(firstText).toBe(anchorText);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return the text node if passed a text node","suites":["MediumEditor.util","getFirstTextNode"],"line":606,"updatePoint":{"line":606,"column":57,"index":28448},"code":"    it('should return the text node if passed a text node', function () {\n      var el = this.createElement('div', '', '<p>text</p>'),\n        textNode = el.querySelector('p').firstChild,\n        firstText = MediumEditor.util.getFirstTextNode(textNode);\n      expect(firstText).toBe(textNode);\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"should return null if no text node exists in element","suites":["MediumEditor.util","getFirstTextNode"],"line":612,"updatePoint":{"line":612,"column":60,"index":28753},"code":"    it('should return null if no text node exists in element', function () {\n      var el = this.createElement('div'),\n        firstText = MediumEditor.util.getFirstTextNode(el);\n      expect(firstText).toBeNull();\n    });","file":"util.spec.js","skipped":false,"dir":"spec"},{"name":"exists","suites":["Core MediumEditor"],"line":2,"updatePoint":{"line":2,"column":12,"index":57},"code":"  it('exists', function () {\n    expect(MediumEditor).toBeTruthy();\n  });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"exists","suites":["Core MediumEditor","MediumEditor.version"],"line":6,"updatePoint":{"line":6,"column":14,"index":182},"code":"    it('exists', function () {\n      expect(MediumEditor.version).toBeTruthy();\n    });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"has major/minor/revision ints","suites":["Core MediumEditor","MediumEditor.version"],"line":9,"updatePoint":{"line":9,"column":37,"index":293},"code":"    it('has major/minor/revision ints', function () {\n      expect(MediumEditor.version.major).toBeDefined();\n      expect(MediumEditor.version.minor).toBeDefined();\n      expect(MediumEditor.version.revision).toBeDefined();\n      expect(MediumEditor.version.preRelease).toBeDefined();\n    });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"exposes the major/minor/revison as a string","suites":["Core MediumEditor","MediumEditor.version"],"line":15,"updatePoint":{"line":15,"column":51,"index":601},"code":"    it('exposes the major/minor/revison as a string', function () {\n      var v = '' + MediumEditor.version;\n      expect(typeof v).toEqual('string');\n    });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"exists","suites":["Core MediumEditor","MediumEditor.parseVersionString"],"line":21,"updatePoint":{"line":21,"column":14,"index":789},"code":"    it('exists', function () {\n      expect(MediumEditor.parseVersionString).toBeTruthy();\n    });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"parses a normal version string","suites":["Core MediumEditor","MediumEditor.parseVersionString"],"line":24,"updatePoint":{"line":24,"column":38,"index":912},"code":"    it('parses a normal version string', function () {\n      var info = MediumEditor.parseVersionString('1.2.3');\n      expect(info.major).toBe(1);\n      expect(info.minor).toBe(2);\n      expect(info.revision).toBe(3);\n      expect(info.preRelease).toBe('');\n      expect(info.toString()).toBe('1.2.3');\n    });","file":"version.spec.js","skipped":false,"dir":"spec"},{"name":"parses pre-release versions","suites":["Core MediumEditor","MediumEditor.parseVersionString"],"line":32,"updatePoint":{"line":32,"column":35,"index":1221},"code":"    it('parses pre-release versions', function () {\n      var info = MediumEditor.parseVersionString('5.0.0-alpha.1');\n      expect(info.major).toBe(5);\n      expect(info.minor).toBe(0);\n      expect(info.revision).toBe(0);\n      expect(info.preRelease).toBe('alpha.1');\n      expect(info.toString()).toBe('5.0.0-alpha.1');\n    });","file":"version.spec.js","skipped":false,"dir":"spec"}]}