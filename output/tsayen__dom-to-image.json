{"repo":"tsayen/dom-to-image","url":"https://github.com/tsayen/dom-to-image","branch":"master","configs":[{"package":"dom-to-image","lang":"js","dir":"spec","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"should load","suites":["domtoimage"],"updatePoint":{"line":12,"column":19,"index":348},"line":12,"code":"    it('should load', function () {\n      assert.ok(domtoimage);\n    });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render to svg","suites":["domtoimage","regression"],"updatePoint":{"line":16,"column":30,"index":473},"line":16,"code":"      it('should render to svg', function (done) {\n        loadTestPage('small/dom-node.html', 'small/style.css', 'small/control-image').then(function () {\n          return domtoimage.toSvg(domNode());\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render to png","suites":["domtoimage","regression"],"updatePoint":{"line":21,"column":30,"index":732},"line":21,"code":"      it('should render to png', function (done) {\n        loadTestPage('small/dom-node.html', 'small/style.css', 'small/control-image').then(function () {\n          return domtoimage.toPng(domNode());\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should handle border","suites":["domtoimage","regression"],"updatePoint":{"line":26,"column":30,"index":991},"line":26,"code":"      it('should handle border', function (done) {\n        loadTestPage('border/dom-node.html', 'border/style.css', 'border/control-image').then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render to jpeg","suites":["domtoimage","regression"],"updatePoint":{"line":29,"column":31,"index":1187},"line":29,"code":"      it('should render to jpeg', function (done) {\n        loadTestPage('small/dom-node.html', 'small/style.css', 'small/control-image-jpeg').then(function () {\n          return domtoimage.toJpeg(domNode());\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should use quality parameter when rendering to jpeg","suites":["domtoimage","regression"],"updatePoint":{"line":34,"column":61,"index":1483},"line":34,"code":"      it('should use quality parameter when rendering to jpeg', function (done) {\n        loadTestPage('small/dom-node.html', 'small/style.css', 'small/control-image-jpeg-low').then(function () {\n          return domtoimage.toJpeg(domNode(), {\n            quality: 0.5\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render to blob","suites":["domtoimage","regression"],"updatePoint":{"line":41,"column":31,"index":1793},"line":41,"code":"      it('should render to blob', function (done) {\n        loadTestPage('small/dom-node.html', 'small/style.css', 'small/control-image').then(function () {\n          return domtoimage.toBlob(domNode());\n        }).then(function (blob) {\n          return global.URL.createObjectURL(blob);\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render bigger node","suites":["domtoimage","regression"],"updatePoint":{"line":48,"column":35,"index":2143},"line":48,"code":"      it('should render bigger node', function (done) {\n        loadTestPage('bigger/dom-node.html', 'bigger/style.css', 'bigger/control-image').then(function () {\n          var parent = $('#dom-node');\n          var child = $('.dom-child-node');\n          for (var i = 0; i < 10; i++) {\n            parent.append(child.clone());\n          }\n        }).then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should handle \"#\" in colors and attributes","suites":["domtoimage","regression"],"updatePoint":{"line":57,"column":52,"index":2568},"line":57,"code":"      it('should handle \"#\" in colors and attributes', function (done) {\n        loadTestPage('hash/dom-node.html', 'hash/style.css', 'small/control-image').then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render nested svg with broken namespace","suites":["domtoimage","regression"],"updatePoint":{"line":60,"column":56,"index":2784},"line":60,"code":"      it('should render nested svg with broken namespace', function (done) {\n        loadTestPage('svg-ns/dom-node.html', 'svg-ns/style.css', 'svg-ns/control-image').then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render svg <rect> with width and heigth","suites":["domtoimage","regression"],"updatePoint":{"line":63,"column":56,"index":3005},"line":63,"code":"      it('should render svg <rect> with width and heigth', function (done) {\n        loadTestPage('svg-rect/dom-node.html', 'svg-rect/style.css', 'svg-rect/control-image').then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render whole node when its scrolled","suites":["domtoimage","regression"],"updatePoint":{"line":66,"column":52,"index":3228},"line":66,"code":"      it('should render whole node when its scrolled', function (done) {\n        var domNode;\n        loadTestPage('scroll/dom-node.html', 'scroll/style.css', 'scroll/control-image').then(function () {\n          domNode = $('#scrolled')[0];\n        }).then(function () {\n          return renderToPng(domNode);\n        }).then(makeImgElement).then(function (image) {\n          return drawImgElement(image, domNode);\n        }).then(compareToControlImage).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render text nodes","suites":["domtoimage","regression"],"updatePoint":{"line":76,"column":34,"index":3698},"line":76,"code":"      it('should render text nodes', function (done) {\n        this.timeout(10000);\n        loadTestPage('text/dom-node.html', 'text/style.css').then(renderToPng).then(drawDataUrl).then(assertTextRendered(['SOME TEXT', 'SOME MORE TEXT'])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should preserve content of ::before and ::after pseudo elements","suites":["domtoimage","regression"],"updatePoint":{"line":80,"column":73,"index":4010},"line":80,"code":"      it('should preserve content of ::before and ::after pseudo elements', function (done) {\n        this.timeout(10000);\n        loadTestPage('pseudo/dom-node.html', 'pseudo/style.css').then(renderToPng).then(drawDataUrl).then(assertTextRendered([\"JUSTBEFORE\", \"BOTHBEFORE\"])).then(assertTextRendered([\"JUSTAFTER\", \"BOTHAFTER\"])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should use node filter","suites":["domtoimage","regression"],"updatePoint":{"line":84,"column":32,"index":4335},"line":84,"code":"      it('should use node filter', function (done) {\n        function filter(node) {\n          if (node.classList) return !node.classList.contains('omit');\n          return true;\n        }\n        loadTestPage('filter/dom-node.html', 'filter/style.css', 'filter/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            filter: filter\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should not apply node filter to root node","suites":["domtoimage","regression"],"updatePoint":{"line":95,"column":51,"index":4796},"line":95,"code":"      it('should not apply node filter to root node', function (done) {\n        function filter(node) {\n          if (node.classList) return node.classList.contains('include');\n          return false;\n        }\n        loadTestPage('filter/dom-node.html', 'filter/style.css', 'filter/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            filter: filter\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render with external stylesheet","suites":["domtoimage","regression"],"updatePoint":{"line":106,"column":48,"index":5257},"line":106,"code":"      it('should render with external stylesheet', function (done) {\n        loadTestPage('sheet/dom-node.html', 'sheet/style.css', 'sheet/control-image').then(delay(1000)).then(renderAndCheck).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render web fonts","suites":["domtoimage","regression"],"updatePoint":{"line":109,"column":33,"index":5470},"line":109,"code":"      it('should render web fonts', function (done) {\n        this.timeout(10000);\n        loadTestPage('fonts/dom-node.html', 'fonts/style.css').then(delay(1000)).then(renderToPng).then(drawDataUrl).then(assertTextRendered(['O'])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render images","suites":["domtoimage","regression"],"updatePoint":{"line":113,"column":30,"index":5733},"line":113,"code":"      it('should render images', function (done) {\n        loadTestPage('images/dom-node.html', 'images/style.css').then(delay(500)).then(renderToPng).then(drawDataUrl).then(assertTextRendered([\"PNG\", \"JPG\"])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render background images","suites":["domtoimage","regression"],"updatePoint":{"line":116,"column":41,"index":5988},"line":116,"code":"      it('should render background images', function (done) {\n        loadTestPage('css-bg/dom-node.html', 'css-bg/style.css').then(renderToPng).then(drawDataUrl).then(assertTextRendered([\"JPG\"])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render user input from <textarea>","suites":["domtoimage","regression"],"updatePoint":{"line":119,"column":50,"index":6228},"line":119,"code":"      it('should render user input from <textarea>', function (done) {\n        loadTestPage('textarea/dom-node.html', 'textarea/style.css').then(function () {\n          document.getElementById('input').value = \"USER\\nINPUT\";\n        }).then(renderToPng).then(drawDataUrl).then(assertTextRendered([\"USER\\nINPUT\"])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render user input from <input>","suites":["domtoimage","regression"],"updatePoint":{"line":124,"column":47,"index":6573},"line":124,"code":"      it('should render user input from <input>', function (done) {\n        loadTestPage('input/dom-node.html', 'input/style.css').then(function () {\n          document.getElementById('input').value = \"USER INPUT\";\n        }).then(renderToPng).then(drawDataUrl).then(assertTextRendered([\"USER INPUT\"])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render content from <canvas>","suites":["domtoimage","regression"],"updatePoint":{"line":129,"column":45,"index":6908},"line":129,"code":"      it('should render content from <canvas>', function (done) {\n        loadTestPage('canvas/dom-node.html', 'canvas/style.css').then(function () {\n          var canvas = document.getElementById('content');\n          var ctx = canvas.getContext('2d');\n          ctx.fillStyle = '#ffffff';\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\n          ctx.fillStyle = '#000000';\n          ctx.font = '100px monospace';\n          ctx.fillText('0', canvas.width / 2, canvas.height / 2);\n        }).then(renderToPng).then(drawDataUrl).then(assertTextRendered(['0'])).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render bgcolor","suites":["domtoimage","regression"],"updatePoint":{"line":140,"column":31,"index":7500},"line":140,"code":"      it('should render bgcolor', function (done) {\n        loadTestPage('bgcolor/dom-node.html', 'bgcolor/style.css', 'bgcolor/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            bgcolor: \"#ff0000\"\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should render bgcolor in SVG","suites":["domtoimage","regression"],"updatePoint":{"line":147,"column":38,"index":7819},"line":147,"code":"      it('should render bgcolor in SVG', function (done) {\n        loadTestPage('bgcolor/dom-node.html', 'bgcolor/style.css', 'bgcolor/control-image').then(function () {\n          return domtoimage.toSvg(domNode(), {\n            bgcolor: \"#ff0000\"\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should not crash when loading external stylesheet causes error","suites":["domtoimage","regression"],"updatePoint":{"line":154,"column":72,"index":8172},"line":154,"code":"      it('should not crash when loading external stylesheet causes error', function (done) {\n        loadTestPage('ext-css/dom-node.html', 'ext-css/style.css').then(delay(1000)).then(renderToPng).then(function () {\n          done();\n        }).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should convert an element to an array of pixels","suites":["domtoimage","regression"],"updatePoint":{"line":159,"column":57,"index":8424},"line":159,"code":"      it('should convert an element to an array of pixels', function (done) {\n        loadTestPage('pixeldata/dom-node.html', 'pixeldata/style.css').then(delay(1000)).then(function () {\n          return domtoimage.toPixelData(domNode());\n        }).then(function (pixels) {\n          for (var y = 0; y < domNode().scrollHeight; ++y) {\n            for (var x = 0; x < domNode().scrollWidth; ++x) {\n              var rgba = [0, 0, 0, 0];\n              if (y < 10) {\n                rgba[0] = 255;\n              } else if (y < 20) {\n                rgba[1] = 255;\n              } else {\n                rgba[2] = 255;\n              }\n              if (x < 10) {\n                rgba[3] = 255;\n              } else if (x < 20) {\n                rgba[3] = 0.4 * 255;\n              } else {\n                rgba[3] = 0.2 * 255;\n              }\n              var offset = 4 * y * domNode().scrollHeight + 4 * x;\n              assert.deepEqual(pixels.slice(offset, offset + 4), Uint8Array.from(rgba));\n            }\n          }\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should apply width and height options to node copy being rendered","suites":["domtoimage","regression"],"updatePoint":{"line":186,"column":75,"index":9507},"line":186,"code":"      it('should apply width and height options to node copy being rendered', function (done) {\n        loadTestPage('dimensions/dom-node.html', 'dimensions/style.css', 'dimensions/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            width: 200,\n            height: 200\n          });\n        }).then(function (dataUrl) {\n          return drawDataUrl(dataUrl, {\n            width: 200,\n            height: 200\n          });\n        }).then(compareToControlImage).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should apply style text to node copy being rendered","suites":["domtoimage","regression"],"updatePoint":{"line":199,"column":61,"index":10030},"line":199,"code":"      it('should apply style text to node copy being rendered', function (done) {\n        loadTestPage('style/dom-node.html', 'style/style.css', 'style/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            style: {\n              'background-color': 'red',\n              'transform': 'scale(0.5)'\n            }\n          });\n        }).then(check).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should combine dimensions and style","suites":["domtoimage","regression"],"updatePoint":{"line":209,"column":45,"index":10435},"line":209,"code":"      it('should combine dimensions and style', function (done) {\n        loadTestPage('scale/dom-node.html', 'scale/style.css', 'scale/control-image').then(function () {\n          return domtoimage.toPng(domNode(), {\n            width: 200,\n            height: 200,\n            style: {\n              'transform': 'scale(2)',\n              'transform-origin': 'top left'\n            }\n          });\n        }).then(function (dataUrl) {\n          return drawDataUrl(dataUrl, {\n            width: 200,\n            height: 200\n          });\n        }).then(compareToControlImage).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should parse urls","suites":["domtoimage","inliner"],"updatePoint":{"line":280,"column":27,"index":12999},"line":280,"code":"      it('should parse urls', function () {\n        var parse = domtoimage.impl.inliner.impl.readUrls;\n        assert.deepEqual(parse('url(\"http://acme.com/file\")'), ['http://acme.com/file']);\n        assert.deepEqual(parse('url(foo.com), url(\\'bar.org\\')'), ['foo.com', 'bar.org']);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should ignore data urls","suites":["domtoimage","inliner"],"updatePoint":{"line":285,"column":33,"index":13299},"line":285,"code":"      it('should ignore data urls', function () {\n        var parse = domtoimage.impl.inliner.impl.readUrls;\n        assert.deepEqual(parse('url(foo.com), url(data:AAA)'), ['foo.com']);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should inline url","suites":["domtoimage","inliner"],"updatePoint":{"line":289,"column":27,"index":13489},"line":289,"code":"      it('should inline url', function (done) {\n        var inline = domtoimage.impl.inliner.impl.inline;\n        inline('url(http://acme.com/image.png), url(foo.com)', 'http://acme.com/image.png', NO_BASE_URL, function () {\n          return Promise.resolve('AAA');\n        }).then(function (result) {\n          assert.equal(result, 'url(data:image/png;base64,AAA), url(foo.com)');\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should resolve urls if base url given","suites":["domtoimage","inliner"],"updatePoint":{"line":297,"column":47,"index":13936},"line":297,"code":"      it('should resolve urls if base url given', function (done) {\n        var inline = domtoimage.impl.inliner.impl.inline;\n        inline('url(images/image.png)', 'images/image.png', 'http://acme.com/', function (url) {\n          return Promise.resolve({\n            'http://acme.com/images/image.png': 'AAA'\n          }[url]);\n        }).then(function (result) {\n          assert.equal(result, 'url(data:image/png;base64,AAA)');\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should inline all urls","suites":["domtoimage","inliner"],"updatePoint":{"line":307,"column":32,"index":14399},"line":307,"code":"      it('should inline all urls', function (done) {\n        var inlineAll = domtoimage.impl.inliner.inlineAll;\n        inlineAll('url(http://acme.com/image.png), url(\"foo.com/font.ttf\")', NO_BASE_URL, function (url) {\n          return Promise.resolve({\n            'http://acme.com/image.png': 'AAA',\n            'foo.com/font.ttf': 'BBB'\n          }[url]);\n        }).then(function (result) {\n          assert.equal(result, 'url(data:image/png;base64,AAA), url(\"data:application/font-truetype;base64,BBB\")');\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should get and encode resource","suites":["domtoimage","util"],"updatePoint":{"line":320,"column":40,"index":15006},"line":320,"code":"      it('should get and encode resource', function (done) {\n        var getAndEncode = domtoimage.impl.util.getAndEncode;\n        getResource('util/fontawesome.base64').then(function (testResource) {\n          return getAndEncode(BASE_URL + 'util/fontawesome.woff2').then(function (resource) {\n            assert.equal(resource, testResource);\n          });\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should return empty result if cannot get resource","suites":["domtoimage","util"],"updatePoint":{"line":328,"column":59,"index":15429},"line":328,"code":"      it('should return empty result if cannot get resource', function (done) {\n        domtoimage.impl.util.getAndEncode(BASE_URL + 'util/not-found').then(function (resource) {\n          assert.equal(resource, '');\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should return placeholder result if cannot get resource and placeholder is provided","suites":["domtoimage","util"],"updatePoint":{"line":333,"column":93,"index":15724},"line":333,"code":"      it('should return placeholder result if cannot get resource and placeholder is provided', function (done) {\n        var placeholder = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY7h79y4ABTICmGnXPbMAAAAASUVORK5CYII=\";\n        var original = domtoimage.impl.options.imagePlaceholder;\n        domtoimage.impl.options.imagePlaceholder = placeholder;\n        domtoimage.impl.util.getAndEncode(BASE_URL + 'util/not-found').then(function (resource) {\n          var placeholderData = placeholder.split(/,/)[1];\n          assert.equal(resource, placeholderData);\n          domtoimage.impl.options.imagePlaceholder = original;\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should parse extension","suites":["domtoimage","util"],"updatePoint":{"line":343,"column":32,"index":16434},"line":343,"code":"      it('should parse extension', function () {\n        var parse = domtoimage.impl.util.parseExtension;\n        assert.equal(parse('http://acme.com/font.woff'), 'woff');\n        assert.equal(parse('../FONT.TTF'), 'TTF');\n        assert.equal(parse('../font'), '');\n        assert.equal(parse('font'), '');\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should guess mime type from url","suites":["domtoimage","util"],"updatePoint":{"line":350,"column":41,"index":16761},"line":350,"code":"      it('should guess mime type from url', function () {\n        var mime = domtoimage.impl.util.mimeType;\n        assert.equal(mime('http://acme.com/font.woff'), 'application/font-woff');\n        assert.equal(mime('IMAGE.PNG'), 'image/png');\n        assert.equal(mime('http://acme.com/image'), '');\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should resolve url","suites":["domtoimage","util"],"updatePoint":{"line":356,"column":28,"index":17059},"line":356,"code":"      it('should resolve url', function () {\n        var resolve = domtoimage.impl.util.resolveUrl;\n        assert.equal(resolve('font.woff', 'http://acme.com'), 'http://acme.com/font.woff');\n        assert.equal(resolve('/font.woff', 'http://acme.com/fonts/woff'), 'http://acme.com/font.woff');\n        assert.equal(resolve('../font.woff', 'http://acme.com/fonts/woff/'), 'http://acme.com/fonts/font.woff');\n        assert.equal(resolve('../font.woff', 'http://acme.com/fonts/woff'), 'http://acme.com/font.woff');\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should generate uids","suites":["domtoimage","util"],"updatePoint":{"line":363,"column":30,"index":17586},"line":363,"code":"      it('should generate uids', function () {\n        var uid = domtoimage.impl.util.uid;\n        assert(uid().length >= 4);\n        assert.notEqual(uid(), uid());\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should read non-local font faces","suites":["domtoimage","web fonts"],"updatePoint":{"line":371,"column":42,"index":17870},"line":371,"code":"      it('should read non-local font faces', function (done) {\n        loadTestPage('fonts/web-fonts/empty.html', 'fonts/web-fonts/rules.css').then(function () {\n          return fontFaces.impl.readAll();\n        }).then(function (webFonts) {\n          assert.equal(webFonts.length, 3);\n          var sources = webFonts.map(function (webFont) {\n            return webFont.src();\n          });\n          assertSomeIncludesAll(sources, ['http://fonts.com/font1.woff', 'http://fonts.com/font1.woff2']);\n          assertSomeIncludesAll(sources, ['http://fonts.com/font2.ttf?v1.1.3']);\n          assertSomeIncludesAll(sources, ['data:font/woff2;base64,AAA']);\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"},{"name":"should not inline images with data url","suites":["domtoimage","images"],"updatePoint":{"line":393,"column":48,"index":18967},"line":393,"code":"      it('should not inline images with data url', function (done) {\n        var originalSrc = 'data:image/jpeg;base64,AAA';\n        var img = new Image();\n        img.src = originalSrc;\n        domtoimage.impl.images.impl.newImage(img).inline(function () {\n          return Promise.resolve('XXX');\n        }).then(function () {\n          assert.equal(img.src, originalSrc);\n        }).then(done).catch(done);\n      });","file":"dom-to-image.spec.js","skipped":false,"dir":"spec"}]}