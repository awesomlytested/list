{"repo":"microsoft/vscode","url":"https://github.com/microsoft/vscode","branch":"main","configs":[{"package":"code-oss-dev","lang":"js","dir":"test","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"},{"package":"code-oss-dev-smoke-test","lang":"js","dir":"test/smoke/test","framework":"mocha","pattern":"**/*.{js,ts}"}],"tests":[{"name":"verifies opened editors are restored","suites":["Data Loss (insiders -> insiders)"],"updatePoint":{"line":16,"column":44,"index":934},"line":16,"code":"    it('verifies opened editors are restored', async function () {\n      app = createApp({\n        ...this.defaultOptions,\n        logsPath: suiteLogsPath(this.defaultOptions, 'test_verifies_opened_editors_are_restored'),\n        crashesPath: suiteCrashPath(this.defaultOptions, 'test_verifies_opened_editors_are_restored')\n      });\n      await app.start();\n\n      // Open 3 editors\n      await app.workbench.quickaccess.openFile(join(app.workspacePathOrFolder, 'bin', 'www'));\n      await app.workbench.quickaccess.runCommand('View: Keep Editor');\n      await app.workbench.quickaccess.openFile(join(app.workspacePathOrFolder, 'app.js'));\n      await app.workbench.quickaccess.runCommand('View: Keep Editor');\n      await app.workbench.editors.newUntitledFile();\n      await app.restart();\n\n      // Verify 3 editors are open\n      await app.workbench.editors.selectTab('Untitled-1');\n      await app.workbench.editors.selectTab('app.js');\n      await app.workbench.editors.selectTab('www');\n      await app.stop();\n      app = undefined;\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies editors can save and restore","suites":["Data Loss (insiders -> insiders)"],"updatePoint":{"line":39,"column":45,"index":1984},"line":39,"code":"    it('verifies editors can save and restore', async function () {\n      app = createApp({\n        ...this.defaultOptions,\n        logsPath: suiteLogsPath(this.defaultOptions, 'test_verifies_editors_can_save_and_restore'),\n        crashesPath: suiteCrashPath(this.defaultOptions, 'test_verifies_editors_can_save_and_restore')\n      });\n      await app.start();\n      const textToType = 'Hello, Code';\n\n      // open editor and type\n      await app.workbench.quickaccess.openFile(join(app.workspacePathOrFolder, 'app.js'));\n      await app.workbench.editor.waitForTypeInEditor('app.js', textToType);\n      await app.workbench.editors.waitForTab('app.js', true);\n\n      // save\n      await app.workbench.editors.saveOpenedFile();\n      await app.workbench.editors.waitForTab('app.js', false);\n\n      // restart\n      await app.restart();\n\n      // verify contents\n      await app.workbench.editor.waitForEditorContents('app.js', contents => contents.indexOf(textToType) > -1);\n      await app.stop();\n      app = undefined;\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies that \"hot exit\" works for dirty files (without delay)","suites":["Data Loss (insiders -> insiders)"],"updatePoint":{"line":65,"column":70,"index":3040},"line":65,"code":"    it('verifies that \"hot exit\" works for dirty files (without delay)', function () {\n      return testHotExit.call(this, 'test_verifies_that_hot_exit_works_for_dirty_files_without_delay', undefined);\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies that \"hot exit\" works for dirty files (with delay)","suites":["Data Loss (insiders -> insiders)"],"updatePoint":{"line":68,"column":67,"index":3247},"line":68,"code":"    it('verifies that \"hot exit\" works for dirty files (with delay)', function () {\n      return testHotExit.call(this, 'test_verifies_that_hot_exit_works_for_dirty_files_with_delay', 2000);\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies that auto save triggers on shutdown","suites":["Data Loss (insiders -> insiders)"],"updatePoint":{"line":71,"column":52,"index":3431},"line":71,"code":"    it('verifies that auto save triggers on shutdown', function () {\n      return testHotExit.call(this, 'test_verifies_that_auto_save_triggers_on_shutdown', undefined, true);\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies opened editors are restored","suites":["Data Loss (stable -> insiders)"],"updatePoint":{"line":117,"column":44,"index":5747},"line":117,"code":"    it('verifies opened editors are restored', async function () {\n      const stableCodePath = ensureStableCode();\n      if (!stableCodePath) {\n        this.skip();\n      }\n\n      // macOS: the first launch of stable Code will trigger\n      // additional checks in the OS (notarization validation)\n      // so it can take a very long time. as such we install\n      // a retry handler to make sure we do not fail as a\n      // consequence.\n      if (process.platform === 'darwin') {\n        this.retries(2);\n      }\n      const userDataDir = getRandomUserDataDir(this.defaultOptions);\n      const logsPath = suiteLogsPath(this.defaultOptions, 'test_verifies_opened_editors_are_restored_from_stable');\n      const crashesPath = suiteCrashPath(this.defaultOptions, 'test_verifies_opened_editors_are_restored_from_stable');\n      const stableOptions = Object.assign({}, this.defaultOptions);\n      stableOptions.codePath = stableCodePath;\n      stableOptions.userDataDir = userDataDir;\n      stableOptions.quality = Quality.Stable;\n      stableOptions.logsPath = logsPath;\n      stableOptions.crashesPath = crashesPath;\n      stableApp = new Application(stableOptions);\n      await stableApp.start();\n\n      // Open 3 editors\n      await stableApp.workbench.quickaccess.openFile(join(stableApp.workspacePathOrFolder, 'bin', 'www'));\n      await stableApp.workbench.quickaccess.runCommand('View: Keep Editor');\n      await stableApp.workbench.quickaccess.openFile(join(stableApp.workspacePathOrFolder, 'app.js'));\n      await stableApp.workbench.quickaccess.runCommand('View: Keep Editor');\n      await stableApp.workbench.editors.newUntitledFile();\n      await stableApp.stop();\n      stableApp = undefined;\n      const insiderOptions = Object.assign({}, this.defaultOptions);\n      insiderOptions.userDataDir = userDataDir;\n      insiderOptions.logsPath = logsPath;\n      insiderOptions.crashesPath = crashesPath;\n      insidersApp = new Application(insiderOptions);\n      await insidersApp.start();\n\n      // Verify 3 editors are open\n      await insidersApp.workbench.editors.selectTab('Untitled-1');\n      await insidersApp.workbench.editors.selectTab('app.js');\n      await insidersApp.workbench.editors.selectTab('www');\n      await insidersApp.stop();\n      insidersApp = undefined;\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies that \"hot exit\" works for dirty files (without delay)","suites":["Data Loss (stable -> insiders)"],"updatePoint":{"line":165,"column":70,"index":8068},"line":165,"code":"    it('verifies that \"hot exit\" works for dirty files (without delay)', async function () {\n      return testHotExit.call(this, `test_verifies_that_hot_exit_works_for_dirty_files_without_delay_from_stable`, undefined);\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"},{"name":"verifies that \"hot exit\" works for dirty files (with delay)","suites":["Data Loss (stable -> insiders)"],"updatePoint":{"line":168,"column":67,"index":8293},"line":168,"code":"    it('verifies that \"hot exit\" works for dirty files (with delay)', async function () {\n      return testHotExit.call(this, `test_verifies_that_hot_exit_works_for_dirty_files_with_delay_from_stable`, 2000);\n    });","file":"smoke/src/areas/workbench/data-loss.test.ts","skipped":false,"dir":"test"}]}