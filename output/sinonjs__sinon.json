{"repo":"sinonjs/sinon","url":"https://github.com/sinonjs/sinon","branch":"master","configs":[{"package":"sinon","lang":"js","dir":"test","framework":"mocha","pattern":"**/*[._-]{test,spec,unittest,unit}.{ts,js}"}],"tests":[{"name":"should fail with non-function fake","suites":[],"updatePoint":{"line":13,"column":40,"index":488},"line":13,"code":"  it(\"should fail with non-function fake\", function () {\n    assert.exception(function () {\n      sinonAssert[method]({});\n    });\n  });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"is object","suites":["assert"],"updatePoint":{"line":32,"column":15,"index":1008},"line":32,"code":"  it(\"is object\", function () {\n    assert.isObject(sinonAssert);\n  });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"supports proxy property","suites":["assert"],"updatePoint":{"line":35,"column":29,"index":1094},"line":35,"code":"  it(\"supports proxy property\", function () {\n    const api = {\n      method: function () {\n        return;\n      }\n    };\n    api.method.proxy = function () {\n      return;\n    };\n    sinonSpy(api, \"method\");\n    api.method();\n    refute.exception(function () {\n      sinonAssert.calledOnce(api.method);\n    });\n  });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"throws exception","suites":["assert",".fail"],"updatePoint":{"line":57,"column":24,"index":1623},"line":57,"code":"    it(\"throws exception\", function () {\n      assert.exception(function () {\n        sinonAssert.fail(\"Some message\");\n      }, {\n        name: \"AssertError\"\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"throws configured exception type","suites":["assert",".fail"],"updatePoint":{"line":64,"column":40,"index":1816},"line":64,"code":"    it(\"throws configured exception type\", function () {\n      sinonAssert.failException = \"CustomError\";\n      assert.exception(function () {\n        sinonAssert.fail(\"Some message\");\n      }, {\n        name: \"CustomError\"\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when arguments to not match","suites":["assert","with stubs",".match"],"updatePoint":{"line":81,"column":43,"index":2269},"line":81,"code":"      it(\"fails when arguments to not match\", function () {\n        assert.exception(function () {\n          sinonAssert.match(\"foo\", \"bar\");\n        });\n        assert(sinonAssert.fail.calledOnce);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when arguments match","suites":["assert","with stubs",".match"],"updatePoint":{"line":87,"column":37,"index":2472},"line":87,"code":"      it(\"passes when arguments match\", function () {\n        sinonAssert.match(\"foo\", \"foo\");\n        assert(sinonAssert.pass.calledOnce);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".called"],"updatePoint":{"line":95,"column":42,"index":2769},"line":95,"code":"      it(\"fails when method does not exist\", function () {\n        assert.exception(function () {\n          sinonAssert.called();\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".called"],"updatePoint":{"line":101,"column":39,"index":2959},"line":101,"code":"      it(\"fails when method is not stub\", function () {\n        assert.exception(function () {\n          sinonAssert.called(function () {\n            return;\n          });\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was not called","suites":["assert","with stubs",".called"],"updatePoint":{"line":109,"column":42,"index":3197},"line":109,"code":"      it(\"fails when method was not called\", function () {\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.called(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".called"],"updatePoint":{"line":116,"column":55,"index":3439},"line":116,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        stub();\n        assert.exception(function () {\n          sinonAssert.called(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"does not fail when method was called","suites":["assert","with stubs",".called"],"updatePoint":{"line":123,"column":46,"index":3650},"line":123,"code":"      it(\"does not fail when method was called\", function () {\n        const stub = this.stub;\n        stub();\n        refute.exception(function () {\n          sinonAssert.called(stub);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".called"],"updatePoint":{"line":131,"column":29,"index":3890},"line":131,"code":"      it(\"calls pass callback\", function () {\n        const stub = this.stub;\n        stub();\n        refute.exception(function () {\n          sinonAssert.called(stub);\n        });\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"called\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":144,"column":42,"index":4342},"line":144,"code":"      it(\"fails when method does not exist\", function () {\n        assert.exception(function () {\n          sinonAssert.notCalled();\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":150,"column":39,"index":4535},"line":150,"code":"      it(\"fails when method is not stub\", function () {\n        assert.exception(function () {\n          sinonAssert.notCalled(function () {\n            return;\n          });\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was called","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":158,"column":38,"index":4772},"line":158,"code":"      it(\"fails when method was called\", function () {\n        const stub = this.stub;\n        stub();\n        assert.exception(function () {\n          sinonAssert.notCalled(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":166,"column":55,"index":5033},"line":166,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.notCalled(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method was not called","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":172,"column":43,"index":5228},"line":172,"code":"      it(\"passes when method was not called\", function () {\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.notCalled(stub);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"should call pass callback","suites":["assert","with stubs",".notCalled"],"updatePoint":{"line":179,"column":35,"index":5461},"line":179,"code":"      it(\"should call pass callback\", function () {\n        const stub = this.stub;\n        sinonAssert.notCalled(stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"notCalled\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":189,"column":42,"index":5852},"line":189,"code":"      it(\"fails when method does not exist\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnce();\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":195,"column":39,"index":6046},"line":195,"code":"      it(\"fails when method is not stub\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnce(function () {\n            return;\n          });\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was not called","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":203,"column":42,"index":6288},"line":203,"code":"      it(\"fails when method was not called\", function () {\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOnce(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":210,"column":55,"index":6534},"line":210,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnce(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method was called","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":217,"column":39,"index":6742},"line":217,"code":"      it(\"passes when method was called\", function () {\n        const stub = this.stub;\n        stub();\n        refute.exception(function () {\n          sinonAssert.calledOnce(stub);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was called more than once","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":225,"column":53,"index":7010},"line":225,"code":"      it(\"fails when method was called more than once\", function () {\n        const stub = this.stub;\n        stub();\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnce(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledOnce"],"updatePoint":{"line":234,"column":29,"index":7262},"line":234,"code":"      it(\"calls pass callback\", function () {\n        const stub = this.stub;\n        stub();\n        sinonAssert.calledOnce(stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledOnce\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if called once","suites":["assert","with stubs",".calledTwice"],"updatePoint":{"line":245,"column":30,"index":7661},"line":245,"code":"      it(\"fails if called once\", function () {\n        const stub = this.stub;\n        this.stub();\n        assert.exception(function () {\n          sinonAssert.calledTwice(stub);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".calledTwice"],"updatePoint":{"line":252,"column":55,"index":7888},"line":252,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        this.stub();\n        this.stub();\n        assert.exception(function () {\n          sinonAssert.calledTwice(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes if called twice","suites":["assert","with stubs",".calledTwice"],"updatePoint":{"line":260,"column":32,"index":8116},"line":260,"code":"      it(\"passes if called twice\", function () {\n        const stub = this.stub;\n        this.stub();\n        this.stub();\n        refute.exception(function () {\n          sinonAssert.calledTwice(stub);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledTwice"],"updatePoint":{"line":268,"column":29,"index":8338},"line":268,"code":"      it(\"calls pass callback\", function () {\n        const stub = this.stub;\n        stub();\n        stub();\n        sinonAssert.calledTwice(stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledTwice\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if called once","suites":["assert","with stubs",".calledThrice"],"updatePoint":{"line":280,"column":30,"index":8757},"line":280,"code":"      it(\"fails if called once\", function () {\n        const stub = this.stub;\n        this.stub();\n        assert.exception(function () {\n          sinonAssert.calledThrice(stub);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".calledThrice"],"updatePoint":{"line":287,"column":55,"index":8985},"line":287,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        this.stub();\n        this.stub();\n        this.stub();\n        assert.exception(function () {\n          sinonAssert.calledThrice(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes if called thrice","suites":["assert","with stubs",".calledThrice"],"updatePoint":{"line":296,"column":33,"index":9236},"line":296,"code":"      it(\"passes if called thrice\", function () {\n        const stub = this.stub;\n        this.stub();\n        this.stub();\n        this.stub();\n        refute.exception(function () {\n          sinonAssert.calledThrice(stub);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledThrice"],"updatePoint":{"line":305,"column":29,"index":9480},"line":305,"code":"      it(\"calls pass callback\", function () {\n        const stub = this.stub;\n        stub();\n        stub();\n        stub();\n        sinonAssert.calledThrice(stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledThrice\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when calls were done in right order","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":316,"column":52,"index":9834},"line":316,"code":"      it(\"passes when calls were done in right order\", function () {\n        const spy1 = sinonSpy();\n        const spy2 = sinonSpy();\n        spy1();\n        spy2();\n        refute.exception(function () {\n          sinonAssert.callOrder(spy1, spy2);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when calls were done in wrong order","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":325,"column":51,"index":10106},"line":325,"code":"      it(\"fails when calls were done in wrong order\", function () {\n        const spy1 = sinonSpy();\n        const spy2 = sinonSpy();\n        spy2();\n        spy1();\n        assert.exception(function () {\n          sinonAssert.callOrder(spy1, spy2);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when many calls were done in right order","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":335,"column":57,"index":10425},"line":335,"code":"      it(\"passes when many calls were done in right order\", function () {\n        const spy1 = sinonSpy();\n        const spy2 = sinonSpy();\n        const spy3 = sinonSpy();\n        const spy4 = sinonSpy();\n        spy1();\n        spy2();\n        spy3();\n        spy4();\n        refute.exception(function () {\n          sinonAssert.callOrder(spy1, spy2, spy3, spy4);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when one of many calls were done in wrong order","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":348,"column":63,"index":10819},"line":348,"code":"      it(\"fails when one of many calls were done in wrong order\", function () {\n        const spy1 = sinonSpy();\n        const spy2 = sinonSpy();\n        const spy3 = sinonSpy();\n        const spy4 = sinonSpy();\n        spy1();\n        spy2();\n        spy4();\n        spy3();\n        assert.exception(function () {\n          sinonAssert.callOrder(spy1, spy2, spy3, spy4);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":362,"column":29,"index":11220},"line":362,"code":"      it(\"calls pass callback\", function () {\n        const stubs = [sinonSpy(), sinonSpy()];\n        stubs[0]();\n        stubs[1]();\n        sinonAssert.callOrder(stubs[0], stubs[1]);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"callOrder\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes for multiple calls to same spy","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":370,"column":47,"index":11536},"line":370,"code":"      it(\"passes for multiple calls to same spy\", function () {\n        const first = sinonSpy();\n        const second = sinonSpy();\n        first();\n        second();\n        first();\n        refute.exception(function () {\n          sinonAssert.callOrder(first, second, first);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if first spy was not called","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":380,"column":43,"index":11833},"line":380,"code":"      it(\"fails if first spy was not called\", function () {\n        const first = sinonSpy();\n        const second = sinonSpy();\n        second();\n        assert.exception(function () {\n          sinonAssert.callOrder(first, second);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if second spy was not called","suites":["assert","with stubs",".callOrder"],"updatePoint":{"line":388,"column":44,"index":12090},"line":388,"code":"      it(\"fails if second spy was not called\", function () {\n        const first = sinonSpy();\n        const second = sinonSpy();\n        first();\n        assert.exception(function () {\n          sinonAssert.callOrder(first, second);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":398,"column":42,"index":12392},"line":398,"code":"      it(\"fails when method does not exist\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOn\");\n        assert.exception(function () {\n          sinonAssert.calledOn(null, object);\n        });\n        assert.isFalse(this.stub.calledOn.calledWith(object));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":407,"column":39,"index":12728},"line":407,"code":"      it(\"fails when method is not stub\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOn\");\n        assert.exception(function () {\n          sinonAssert.calledOn(function () {\n            return;\n          }, object);\n        });\n        assert.isFalse(this.stub.calledOn.calledWith(object));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":418,"column":33,"index":13099},"line":418,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOn\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOn(stub, object);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":427,"column":41,"index":13421},"line":427,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOn\").returns(true);\n        const stub = this.stub;\n        sinonAssert.calledOn(stub, object);\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":434,"column":29,"index":13685},"line":434,"code":"      it(\"calls pass callback\", function () {\n        const obj = {};\n        this.stub.call(obj);\n        sinonAssert.calledOn(this.stub, obj);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledOn\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"works with spyCall","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":441,"column":28,"index":13941},"line":441,"code":"      it(\"works with spyCall\", function () {\n        const spy = sinonSpy();\n        const target = {};\n        spy();\n        spy.call(target);\n        sinonAssert.calledOn(spy.lastCall, target);\n        assert(sinonAssert.pass.calledOn);\n        assert(sinonAssert.pass.calledWith(\"calledOn\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when spyCall failed","suites":["assert","with stubs",".calledOn"],"updatePoint":{"line":450,"column":35,"index":14255},"line":450,"code":"      it(\"fails when spyCall failed\", function () {\n        const spy = sinonSpy();\n        const target = {};\n        spy();\n        spy.call(target);\n        assert.exception(function () {\n          sinonAssert.calledOn(spy.lastCall, 1);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":464,"column":42,"index":14721},"line":464,"code":"      it(\"fails when method does not exist\", function () {\n        sinonStub(this.stub, \"calledWithNew\");\n        assert.exception(function () {\n          sinonAssert.calledWithNew(null);\n        });\n        assert.isFalse(this.stub.calledWithNew.called);\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":472,"column":39,"index":15025},"line":472,"code":"      it(\"fails when method is not stub\", function () {\n        sinonStub(this.stub, \"calledWithNew\");\n        assert.exception(function () {\n          sinonAssert.calledWithNew(function () {\n            return;\n          });\n        });\n        assert.isFalse(this.stub.calledWithNew.called);\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":482,"column":33,"index":15364},"line":482,"code":"      it(\"fails when method fails\", function () {\n        sinonStub(this.stub, \"calledWithNew\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledWithNew(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":490,"column":41,"index":15661},"line":490,"code":"      it(\"passes when method doesn't fail\", function () {\n        sinonStub(this.stub, \"calledWithNew\").returns(true);\n        const stub = this.stub;\n        sinonAssert.calledWithNew(stub);\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":496,"column":29,"index":15900},"line":496,"code":"      it(\"calls pass callback\", function () {\n        new this.stub(); // eslint-disable-line no-new, new-cap\n        sinonAssert.calledWithNew(this.stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledWithNew\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"works with spyCall","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":502,"column":28,"index":16172},"line":502,"code":"      it(\"works with spyCall\", function () {\n        const spy = sinonSpy();\n        spy();\n        new spy(); // eslint-disable-line no-new, new-cap\n\n        sinonAssert.calledWithNew(spy.lastCall);\n        assert(sinonAssert.pass.calledWithNew);\n        assert(sinonAssert.pass.calledWith(\"calledWithNew\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when spyCall failed","suites":["assert","with stubs",".calledWithNew"],"updatePoint":{"line":511,"column":35,"index":16499},"line":511,"code":"      it(\"fails when spyCall failed\", function () {\n        const spy = sinonSpy();\n        spy();\n        new spy(); // eslint-disable-line no-new, new-cap\n\n        assert.exception(function () {\n          sinonAssert.calledWithNew(spy.firstCall);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".alwaysCalledWithNew"],"updatePoint":{"line":525,"column":42,"index":16986},"line":525,"code":"      it(\"fails when method does not exist\", function () {\n        sinonStub(this.stub, \"alwaysCalledWithNew\");\n        assert.exception(function () {\n          sinonAssert.alwaysCalledWithNew(null);\n        });\n        assert.isFalse(this.stub.alwaysCalledWithNew.called);\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".alwaysCalledWithNew"],"updatePoint":{"line":533,"column":39,"index":17308},"line":533,"code":"      it(\"fails when method is not stub\", function () {\n        sinonStub(this.stub, \"alwaysCalledWithNew\");\n        assert.exception(function () {\n          sinonAssert.alwaysCalledWithNew(function () {\n            return;\n          });\n        });\n        assert.isFalse(this.stub.alwaysCalledWithNew.called);\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".alwaysCalledWithNew"],"updatePoint":{"line":543,"column":33,"index":17665},"line":543,"code":"      it(\"fails when method fails\", function () {\n        sinonStub(this.stub, \"alwaysCalledWithNew\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.alwaysCalledWithNew(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".alwaysCalledWithNew"],"updatePoint":{"line":551,"column":41,"index":17974},"line":551,"code":"      it(\"passes when method doesn't fail\", function () {\n        sinonStub(this.stub, \"alwaysCalledWithNew\").returns(true);\n        const stub = this.stub;\n        sinonAssert.alwaysCalledWithNew(stub);\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".alwaysCalledWithNew"],"updatePoint":{"line":557,"column":29,"index":18225},"line":557,"code":"      it(\"calls pass callback\", function () {\n        new this.stub(); // eslint-disable-line no-new, new-cap\n        sinonAssert.alwaysCalledWithNew(this.stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"alwaysCalledWithNew\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledWith"],"updatePoint":{"line":565,"column":33,"index":18564},"line":565,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledWith\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledWith(stub, object, 1);\n        });\n        assert(this.stub.calledWith.calledWith(object, 1));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledWith"],"updatePoint":{"line":575,"column":41,"index":18953},"line":575,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledWith\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.calledWith(stub, object, 1);\n        });\n        assert(this.stub.calledWith.calledWith(object, 1));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledWith"],"updatePoint":{"line":585,"column":29,"index":19337},"line":585,"code":"      it(\"calls pass callback\", function () {\n        this.stub(\"yeah\");\n        sinonAssert.calledWith(this.stub, \"yeah\");\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledWith\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"works with spyCall","suites":["assert","with stubs",".calledWith"],"updatePoint":{"line":591,"column":28,"index":19574},"line":591,"code":"      it(\"works with spyCall\", function () {\n        const spy = sinonSpy();\n        const object = {};\n        spy();\n        spy(object);\n        sinonAssert.calledWith(spy.lastCall, object);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledWith\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when spyCall failed","suites":["assert","with stubs",".calledWith"],"updatePoint":{"line":600,"column":35,"index":19889},"line":600,"code":"      it(\"fails when spyCall failed\", function () {\n        const spy = sinonSpy();\n        const object = {};\n        spy();\n        spy(object);\n        assert.exception(function () {\n          sinonAssert.calledWith(spy.lastCall, 1);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledWithExactly"],"updatePoint":{"line":612,"column":33,"index":20244},"line":612,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledWithExactly\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledWithExactly(stub, object, 1);\n        });\n        assert(this.stub.calledWithExactly.calledWithExactly(object, 1));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledWithExactly"],"updatePoint":{"line":622,"column":41,"index":20661},"line":622,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledWithExactly\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.calledWithExactly(stub, object, 1);\n        });\n        assert(this.stub.calledWithExactly.calledWithExactly(object, 1));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledWithExactly"],"updatePoint":{"line":632,"column":29,"index":21073},"line":632,"code":"      it(\"calls pass callback\", function () {\n        this.stub(\"yeah\");\n        sinonAssert.calledWithExactly(this.stub, \"yeah\");\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledWithExactly\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"works with spyCall","suites":["assert","with stubs",".calledWithExactly"],"updatePoint":{"line":638,"column":28,"index":21324},"line":638,"code":"      it(\"works with spyCall\", function () {\n        const spy = sinonSpy();\n        const object = {};\n        spy();\n        spy(object);\n        sinonAssert.calledWithExactly(spy.lastCall, object);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledWithExactly\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when spyCall failed","suites":["assert","with stubs",".calledWithExactly"],"updatePoint":{"line":647,"column":35,"index":21653},"line":647,"code":"      it(\"fails when spyCall failed\", function () {\n        const spy = sinonSpy();\n        const object = {};\n        spy();\n        spy(object);\n        assert.exception(function () {\n          sinonAssert.calledWithExactly(spy.lastCall, 1);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":661,"column":33,"index":22130},"line":661,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOnceWithExactly\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub, object, 1);\n        });\n        assert(this.stub.calledOnceWithExactly.calledOnceWithExactly(object, 1));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":671,"column":41,"index":22563},"line":671,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOnceWithExactly\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub, object, 1);\n        });\n        assert(this.stub.calledOnceWithExactly.calledOnceWithExactly(object, 1));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":681,"column":29,"index":22991},"line":681,"code":"      it(\"calls pass callback\", function () {\n        this.stub(\"yeah\");\n        sinonAssert.calledOnceWithExactly(this.stub, \"yeah\");\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledOnceWithExactly\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":687,"column":42,"index":23264},"line":687,"code":"      it(\"fails when method does not exist\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly();\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":693,"column":39,"index":23469},"line":693,"code":"      it(\"fails when method is not stub\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly(function () {\n            return;\n          });\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was not called","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":701,"column":42,"index":23722},"line":701,"code":"      it(\"fails when method was not called\", function () {\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":708,"column":55,"index":23979},"line":708,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method was called","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":715,"column":39,"index":24198},"line":715,"code":"      it(\"passes when method was called\", function () {\n        const stub = this.stub;\n        stub();\n        refute.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was called more than once","suites":["assert","with stubs",".calledOnceWithExactly"],"updatePoint":{"line":723,"column":53,"index":24477},"line":723,"code":"      it(\"fails when method was called more than once\", function () {\n        const stub = this.stub;\n        stub();\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnceWithExactly(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":736,"column":33,"index":24912},"line":736,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOnceWithMatch\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub, object, 1);\n        });\n        assert(this.stub.calledOnceWithMatch.calledOnceWithMatch(object, 1));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":746,"column":41,"index":25337},"line":746,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"calledOnceWithMatch\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub, object, 1);\n        });\n        assert(this.stub.calledOnceWithMatch.calledOnceWithMatch(object, 1));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":756,"column":29,"index":25757},"line":756,"code":"      it(\"calls pass callback\", function () {\n        this.stub(\"yeah\");\n        sinonAssert.calledOnceWithMatch(this.stub, \"yeah\");\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"calledOnceWithMatch\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method does not exist","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":762,"column":42,"index":26026},"line":762,"code":"      it(\"fails when method does not exist\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch();\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method is not stub","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":768,"column":39,"index":26229},"line":768,"code":"      it(\"fails when method is not stub\", function () {\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch(function () {\n            return;\n          });\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was not called","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":776,"column":42,"index":26480},"line":776,"code":"      it(\"fails when method was not called\", function () {\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when called with more than one argument","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":783,"column":55,"index":26735},"line":783,"code":"      it(\"fails when called with more than one argument\", function () {\n        const stub = this.stub;\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub, 1);\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method was called","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":790,"column":39,"index":26952},"line":790,"code":"      it(\"passes when method was called\", function () {\n        const stub = this.stub;\n        stub();\n        refute.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method was called more than once","suites":["assert","with stubs",".calledOnceWithMatch"],"updatePoint":{"line":798,"column":53,"index":27229},"line":798,"code":"      it(\"fails when method was called more than once\", function () {\n        const stub = this.stub;\n        stub();\n        stub();\n        assert.exception(function () {\n          sinonAssert.calledOnceWithMatch(stub);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".neverCalledWith"],"updatePoint":{"line":809,"column":33,"index":27549},"line":809,"code":"      it(\"fails when method fails\", function () {\n        const object = {};\n        sinonStub(this.stub, \"neverCalledWith\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.neverCalledWith(stub, object, 1);\n        });\n        assert(this.stub.neverCalledWith.calledWith(object, 1));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".neverCalledWith"],"updatePoint":{"line":819,"column":41,"index":27953},"line":819,"code":"      it(\"passes when method doesn't fail\", function () {\n        const object = {};\n        sinonStub(this.stub, \"neverCalledWith\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.neverCalledWith(stub, object, 1);\n        });\n        assert(this.stub.neverCalledWith.calledWith(object, 1));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".neverCalledWith"],"updatePoint":{"line":829,"column":29,"index":28352},"line":829,"code":"      it(\"calls pass callback\", function () {\n        this.stub(\"yeah\");\n        sinonAssert.neverCalledWith(this.stub, \"nah!\");\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"neverCalledWith\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".threw"],"updatePoint":{"line":837,"column":33,"index":28649},"line":837,"code":"      it(\"fails when method fails\", function () {\n        sinonStub(this.stub, \"threw\").returns(false);\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.threw(stub, 1, 2);\n        });\n        assert(this.stub.threw.calledWithExactly(1, 2));\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".threw"],"updatePoint":{"line":846,"column":41,"index":28993},"line":846,"code":"      it(\"passes when method doesn't fail\", function () {\n        sinonStub(this.stub, \"threw\").returns(true);\n        const stub = this.stub;\n        refute.exception(function () {\n          sinonAssert.threw(stub, 1, 2);\n        });\n        assert(this.stub.threw.calledWithExactly(1, 2));\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".threw"],"updatePoint":{"line":855,"column":29,"index":29332},"line":855,"code":"      it(\"calls pass callback\", function () {\n        sinonStub(this.stub, \"threw\").returns(true);\n        this.stub();\n        sinonAssert.threw(this.stub);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"threw\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"works with spyCall","suites":["assert","with stubs",".threw"],"updatePoint":{"line":862,"column":28,"index":29598},"line":862,"code":"      it(\"works with spyCall\", function () {\n        const stub = sinonStub().throws(\"Error\");\n        assert.exception(function () {\n          stub();\n        });\n        sinonAssert.threw(stub.firstCall, \"Error\");\n        assert(sinonAssert.pass.threw);\n        assert(sinonAssert.pass.calledWith(\"threw\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when spyCall failed","suites":["assert","with stubs",".threw"],"updatePoint":{"line":871,"column":35,"index":29925},"line":871,"code":"      it(\"fails when spyCall failed\", function () {\n        const stub = sinonStub().returns(\"Error\");\n        stub();\n        assert.exception(function () {\n          sinonAssert.threw(stub.firstCall, \"Error\");\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails when method fails","suites":["assert","with stubs",".callCount"],"updatePoint":{"line":883,"column":33,"index":30346},"line":883,"code":"      it(\"fails when method fails\", function () {\n        this.stub();\n        this.stub();\n        const stub = this.stub;\n        assert.exception(function () {\n          sinonAssert.callCount(stub, 3);\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes when method doesn't fail","suites":["assert","with stubs",".callCount"],"updatePoint":{"line":892,"column":41,"index":30622},"line":892,"code":"      it(\"passes when method doesn't fail\", function () {\n        const stub = this.stub;\n        this.stub.callCount = 3;\n        refute.exception(function () {\n          sinonAssert.callCount(stub, 3);\n        });\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".callCount"],"updatePoint":{"line":900,"column":29,"index":30885},"line":900,"code":"      it(\"calls pass callback\", function () {\n        this.stub();\n        sinonAssert.callCount(this.stub, 1);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"callCount\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if method is missing","suites":["assert","with stubs",".alwaysCalledOn"],"updatePoint":{"line":908,"column":36,"index":31171},"line":908,"code":"      it(\"fails if method is missing\", function () {\n        assert.exception(function () {\n          sinonAssert.alwaysCalledOn();\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if method is not fake","suites":["assert","with stubs",".alwaysCalledOn"],"updatePoint":{"line":913,"column":37,"index":31326},"line":913,"code":"      it(\"fails if method is not fake\", function () {\n        assert.exception(function () {\n          sinonAssert.alwaysCalledOn(function () {\n            return;\n          }, {});\n        });\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if stub returns false","suites":["assert","with stubs",".alwaysCalledOn"],"updatePoint":{"line":920,"column":37,"index":31530},"line":920,"code":"      it(\"fails if stub returns false\", function () {\n        const stub = sinonStub();\n        sinonStub(stub, \"alwaysCalledOn\").returns(false);\n        assert.exception(function () {\n          sinonAssert.alwaysCalledOn(stub, {});\n        });\n        assert(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes if stub returns true","suites":["assert","with stubs",".alwaysCalledOn"],"updatePoint":{"line":928,"column":37,"index":31826},"line":928,"code":"      it(\"passes if stub returns true\", function () {\n        const stub = sinonStub();\n        sinonStub(stub, \"alwaysCalledOn\").returns(true);\n        sinonAssert.alwaysCalledOn(stub, {});\n        assert.isFalse(sinonAssert.fail.called);\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert","with stubs",".alwaysCalledOn"],"updatePoint":{"line":934,"column":29,"index":32068},"line":934,"code":"      it(\"calls pass callback\", function () {\n        this.stub();\n        sinonAssert.alwaysCalledOn(this.stub, this);\n        assert(sinonAssert.pass.calledOnce);\n        assert(sinonAssert.pass.calledWith(\"alwaysCalledOn\"));\n      });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if method is missing","suites":["assert",".alwaysCalledWith"],"updatePoint":{"line":951,"column":34,"index":32597},"line":951,"code":"    it(\"fails if method is missing\", function () {\n      assert.exception(function () {\n        sinonAssert.alwaysCalledWith();\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if method is not fake","suites":["assert",".alwaysCalledWith"],"updatePoint":{"line":956,"column":35,"index":32744},"line":956,"code":"    it(\"fails if method is not fake\", function () {\n      assert.exception(function () {\n        sinonAssert.alwaysCalledWith(function () {\n          return;\n        });\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if stub returns false","suites":["assert",".alwaysCalledWith"],"updatePoint":{"line":963,"column":35,"index":32932},"line":963,"code":"    it(\"fails if stub returns false\", function () {\n      const stub = sinonStub();\n      sinonStub(stub, \"alwaysCalledWith\").returns(false);\n      assert.exception(function () {\n        sinonAssert.alwaysCalledWith(stub, {}, []);\n      });\n      assert(sinonAssert.fail.called);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes if stub returns true","suites":["assert",".alwaysCalledWith"],"updatePoint":{"line":971,"column":35,"index":33220},"line":971,"code":"    it(\"passes if stub returns true\", function () {\n      const stub = sinonStub();\n      sinonStub(stub, \"alwaysCalledWith\").returns(true);\n      sinonAssert.alwaysCalledWith(stub, {}, []);\n      assert.isFalse(sinonAssert.fail.called);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert",".alwaysCalledWith"],"updatePoint":{"line":977,"column":27,"index":33458},"line":977,"code":"    it(\"calls pass callback\", function () {\n      const spy = sinonSpy();\n      spy(\"Hello\");\n      sinonAssert.alwaysCalledWith(spy, \"Hello\");\n      assert(sinonAssert.pass.calledOnce);\n      assert(sinonAssert.pass.calledWith(\"alwaysCalledWith\"));\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails if stub returns false","suites":["assert",".alwaysCalledWithExactly"],"updatePoint":{"line":994,"column":35,"index":34000},"line":994,"code":"    it(\"fails if stub returns false\", function () {\n      const stub = sinonStub();\n      sinonStub(stub, \"alwaysCalledWithExactly\").returns(false);\n      sinonAssert.alwaysCalledWithExactly(stub, {}, []);\n      assert(sinonAssert.fail.called);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"passes if stub returns true","suites":["assert",".alwaysCalledWithExactly"],"updatePoint":{"line":1000,"column":35,"index":34253},"line":1000,"code":"    it(\"passes if stub returns true\", function () {\n      const stub = sinonStub();\n      sinonStub(stub, \"alwaysCalledWithExactly\").returns(true);\n      sinonAssert.alwaysCalledWithExactly(stub, {}, []);\n      assert.isFalse(sinonAssert.fail.called);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"calls pass callback","suites":["assert",".alwaysCalledWithExactly"],"updatePoint":{"line":1006,"column":27,"index":34505},"line":1006,"code":"    it(\"calls pass callback\", function () {\n      const spy = sinonSpy();\n      spy(\"Hello\");\n      sinonAssert.alwaysCalledWithExactly(spy, \"Hello\");\n      assert(sinonAssert.pass.calledOnce);\n      assert(sinonAssert.pass.calledWith(\"alwaysCalledWithExactly\"));\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"exposes asserts into object","suites":["assert",".expose"],"updatePoint":{"line":1015,"column":35,"index":34827},"line":1015,"code":"    it(\"exposes asserts into object\", function () {\n      const test = {};\n      sinonAssert.expose(test);\n      assert.isFunction(test.fail);\n      assert.isString(test.failException);\n      assert.isFunction(test.assertCalled);\n      assert.isFunction(test.assertCalledOn);\n      assert.isFunction(test.assertCalledWith);\n      assert.isFunction(test.assertCalledWithExactly);\n      assert.isFunction(test.assertCalledOnceWithExactly);\n      assert.isFunction(test.assertThrew);\n      assert.isFunction(test.assertCallCount);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"exposes asserts into global","suites":["assert",".expose"],"updatePoint":{"line":1028,"column":35,"index":35363},"line":1028,"code":"    it(\"exposes asserts into global\", function () {\n      sinonAssert.expose(this.global, {\n        includeFail: false\n      });\n      assert.equals(typeof failException, \"undefined\");\n      /*eslint-disable no-undef*/\n      assert.isFunction(assertCalled);\n      assert.isFunction(assertCalledOn);\n      assert.isFunction(assertCalledWith);\n      assert.isFunction(assertCalledWithExactly);\n      assert.isFunction(assertCalledOnceWithExactly);\n      assert.isFunction(assertThrew);\n      assert.isFunction(assertCallCount);\n      /*eslint-enable no-undef*/\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"fails exposed asserts without errors","suites":["assert",".expose"],"updatePoint":{"line":1044,"column":44,"index":35940},"line":1044,"code":"    it(\"fails exposed asserts without errors\", function () {\n      sinonAssert.expose(this.global, {\n        includeFail: false\n      });\n      assert.exception(function () {\n        assertCalled(sinonSpy()); // eslint-disable-line no-undef\n      }, {\n        message: \"expected spy to have been called at least once but was never called\"\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"exposes asserts into object without prefixes","suites":["assert",".expose"],"updatePoint":{"line":1054,"column":52,"index":36305},"line":1054,"code":"    it(\"exposes asserts into object without prefixes\", function () {\n      const test = {};\n      sinonAssert.expose(test, {\n        prefix: \"\"\n      });\n      assert.isFunction(test.fail);\n      assert.isString(test.failException);\n      assert.isFunction(test.called);\n      assert.isFunction(test.calledOn);\n      assert.isFunction(test.calledWith);\n      assert.isFunction(test.calledWithExactly);\n      assert.isFunction(test.calledOnceWithExactly);\n      assert.isFunction(test.threw);\n      assert.isFunction(test.callCount);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"does not expose 'expose'","suites":["assert",".expose"],"updatePoint":{"line":1069,"column":32,"index":36826},"line":1069,"code":"    it(\"does not expose 'expose'\", function () {\n      const test = {};\n      sinonAssert.expose(test, {\n        prefix: \"\"\n      });\n      refute(test.expose, \"Expose should not be exposed\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"throws if target is undefined","suites":["assert",".expose"],"updatePoint":{"line":1076,"column":37,"index":37032},"line":1076,"code":"    it(\"throws if target is undefined\", function () {\n      assert.exception(function () {\n        sinonAssert.expose();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"throws if target is null","suites":["assert",".expose"],"updatePoint":{"line":1083,"column":32,"index":37203},"line":1083,"code":"    it(\"throws if target is null\", function () {\n      assert.exception(function () {\n        sinonAssert.expose(null);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.called exception message","suites":["assert","message"],"updatePoint":{"line":1118,"column":39,"index":38356},"line":1118,"code":"    it(\"assert.called exception message\", function () {\n      assert.equals(this.message(\"called\", this.obj.doSomething), \"expected doSomething to have been called at least once but was never called\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.notCalled exception message one call","suites":["assert","message"],"updatePoint":{"line":1121,"column":51,"index":38578},"line":1121,"code":"    it(\"assert.notCalled exception message one call\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"notCalled\", this.obj.doSomething), \"expected doSomething to not have been called but was called once\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.notCalled exception message four calls","suites":["assert","message"],"updatePoint":{"line":1125,"column":53,"index":38843},"line":1125,"code":"    it(\"assert.notCalled exception message four calls\", function () {\n      this.obj.doSomething();\n      this.obj.doSomething();\n      this.obj.doSomething();\n      this.obj.doSomething();\n      assert.equals(this.message(\"notCalled\", this.obj.doSomething), \"expected doSomething to not have been called \" + \"but was called 4 times\\n    doSomething()\\n    \" + \"doSomething()\\n    doSomething()\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.notCalled exception message with calls with arguments","suites":["assert","message"],"updatePoint":{"line":1132,"column":68,"index":39283},"line":1132,"code":"    it(\"assert.notCalled exception message with calls with arguments\", function () {\n      this.obj.doSomething();\n      this.obj.doSomething(3);\n      this.obj.doSomething(42, 1);\n      this.obj.doSomething();\n      assert.equals(this.message(\"notCalled\", this.obj.doSomething), \"expected doSomething to not have been called \" + \"but was called 4 times\\n    doSomething()\\n    \" + \"doSomething(3)\\n    doSomething(42, 1)\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.callOrder exception message","suites":["assert","message"],"updatePoint":{"line":1139,"column":42,"index":39709},"line":1139,"code":"    it(\"assert.callOrder exception message\", function () {\n      const obj = {\n        doop: function () {\n          return;\n        },\n        foo: function () {\n          return;\n        }\n      };\n      sinonSpy(obj, \"doop\");\n      sinonSpy(obj, \"foo\");\n      obj.doop();\n      this.obj.doSomething();\n      obj.foo();\n      const message = this.message(\"callOrder\", this.obj.doSomething, obj.doop, obj.foo);\n      assert.equals(message, \"expected doSomething, doop, foo to be called in order but were called as doop, doSomething, foo\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.callOrder with missing first call exception message","suites":["assert","message"],"updatePoint":{"line":1156,"column":66,"index":40282},"line":1156,"code":"    it(\"assert.callOrder with missing first call exception message\", function () {\n      const obj = {\n        doop: function () {\n          return;\n        },\n        foo: function () {\n          return;\n        }\n      };\n      sinonSpy(obj, \"doop\");\n      sinonSpy(obj, \"foo\");\n      obj.foo();\n      const message = this.message(\"callOrder\", obj.doop, obj.foo);\n      assert.equals(message, \"expected doop, foo to be called in order but were called as foo\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.callOrder with missing last call exception message","suites":["assert","message"],"updatePoint":{"line":1171,"column":65,"index":40752},"line":1171,"code":"    it(\"assert.callOrder with missing last call exception message\", function () {\n      const obj = {\n        doop: function () {\n          return;\n        },\n        foo: function () {\n          return;\n        }\n      };\n      sinonSpy(obj, \"doop\");\n      sinonSpy(obj, \"foo\");\n      obj.doop();\n      const message = this.message(\"callOrder\", obj.doop, obj.foo);\n      assert.equals(message, \"expected doop, foo to be called in order but were called as doop\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.callCount exception message","suites":["assert","message"],"updatePoint":{"line":1186,"column":42,"index":41201},"line":1186,"code":"    it(\"assert.callCount exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"callCount\", this.obj.doSomething, 3), \"expected doSomething to be called thrice but was called once\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.callCount exception message with non-numeric argument","suites":["assert","message"],"updatePoint":{"line":1190,"column":68,"index":41480},"line":1190,"code":"    it(\"assert.callCount exception message with non-numeric argument\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"callCount\", this.obj.doSomething, \"3\"), \"expected '3' to be a number but was of type string\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledOnce exception message","suites":["assert","message"],"updatePoint":{"line":1194,"column":43,"index":41707},"line":1194,"code":"    it(\"assert.calledOnce exception message\", function () {\n      this.obj.doSomething();\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledOnce\", this.obj.doSomething), \"expected doSomething to be called once but was called twice\\n    doSomething()\\n    doSomething()\");\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledOnce\", this.obj.doSomething), \"expected doSomething to be called once but was called \" + \"thrice\\n    doSomething()\\n    doSomething()\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledTwice exception message","suites":["assert","message"],"updatePoint":{"line":1201,"column":44,"index":42235},"line":1201,"code":"    it(\"assert.calledTwice exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledTwice\", this.obj.doSomething), \"expected doSomething to be called twice but was called once\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledThrice exception message","suites":["assert","message"],"updatePoint":{"line":1205,"column":45,"index":42489},"line":1205,"code":"    it(\"assert.calledThrice exception message\", function () {\n      this.obj.doSomething();\n      this.obj.doSomething();\n      this.obj.doSomething();\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledThrice\", this.obj.doSomething), \"expected doSomething to be called thrice but was called 4 times\\n\" + \"    doSomething()\\n    doSomething()\\n    doSomething()\\n    doSomething()\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledOn exception message","suites":["assert","message"],"updatePoint":{"line":1212,"column":41,"index":42896},"line":1212,"code":"    it(\"assert.calledOn exception message\", function () {\n      this.obj.toString = function () {\n        return \"[Oh yeah]\";\n      };\n      const obj = {\n        toString: function () {\n          return \"[Oh no]\";\n        }\n      };\n      const obj2 = {\n        toString: function () {\n          return \"[Oh well]\";\n        }\n      };\n      this.obj.doSomething.call(obj);\n      this.obj.doSomething.call(obj2);\n      assert.equals(this.message(\"calledOn\", this.obj.doSomething, this.obj), `expected doSomething to be called with ${inspect(this.obj)} as this but was called with ${inspect(obj)}, ${inspect(obj2)}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysCalledOn exception message","suites":["assert","message"],"updatePoint":{"line":1230,"column":47,"index":43527},"line":1230,"code":"    it(\"assert.alwaysCalledOn exception message\", function () {\n      this.obj.toString = function () {\n        return \"[Oh yeah]\";\n      };\n      const obj = {\n        toString: function () {\n          return \"[Oh no]\";\n        }\n      };\n      const obj2 = {\n        toString: function () {\n          return \"[Oh well]\";\n        }\n      };\n      this.obj.doSomething.call(obj);\n      this.obj.doSomething.call(obj2);\n      this.obj.doSomething();\n      assert.equals(this.message(\"alwaysCalledOn\", this.obj.doSomething, this.obj), `expected doSomething to always be called with ${inspect(this.obj)} as this but was called with ${inspect(obj)}, ${inspect(obj2)}, ${inspect(this.obj)}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWithNew exception message","suites":["assert","message"],"updatePoint":{"line":1249,"column":46,"index":44222},"line":1249,"code":"    it(\"assert.calledWithNew exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWithNew\", this.obj.doSomething), \"expected doSomething to be called with new\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysCalledWithNew exception message","suites":["assert","message"],"updatePoint":{"line":1253,"column":52,"index":44449},"line":1253,"code":"    it(\"assert.alwaysCalledWithNew exception message\", function () {\n      new this.obj.doSomething(); // eslint-disable-line no-new, new-cap\n      this.obj.doSomething();\n      assert.equals(this.message(\"alwaysCalledWithNew\", this.obj.doSomething), \"expected doSomething to always be called with new\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message","suites":["assert","message"],"updatePoint":{"line":1258,"column":43,"index":44753},"line":1258,"code":"    it(\"assert.calledWith exception message\", function () {\n      this.obj.doSomething(4, 3, \"hey\");\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, 1, 3, \"hey\"), `expected doSomething to be called with arguments \\n${color.red(\"4\")} ${color.green(\"1\")} \\n3\\n${inspect('\"hey\"')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message with multiple calls","suites":["assert","message"],"updatePoint":{"line":1262,"column":63,"index":45083},"line":1262,"code":"    it(\"assert.calledWith exception message with multiple calls\", function () {\n      this.obj.doSomething(4, 3, \"hey\");\n      this.obj.doSomething(1, 3, \"not\");\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, 1, 3, \"hey\"), `${\"expected doSomething to be called with arguments \\n\" + \"Call 1:\\n\"}${color.red(\"4\")} ${color.green(\"1\")} \\n` + `3\\n${inspect('\"hey\"')}\\n` + `Call 2:\\n` + `1\\n` + `3\\n${color.red(inspect('\"not\"'))} ${color.green(inspect('\"hey\"'))} `);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message with large object arguments","suites":["assert","message"],"updatePoint":{"line":1267,"column":71,"index":45582},"line":1267,"code":"    it(\"assert.calledWith exception message with large object arguments\", function () {\n      const calledArg = [{\n        first: \"a\",\n        second: {\n          nest: true\n        },\n        third: [{\n          fourth: {\n            nest: true\n          }\n        }],\n        mismatchKey: true\n      }, \"fifth\"];\n      this.obj.doSomething(calledArg);\n      const expectedArg = [{\n        first: \"a\",\n        second: {\n          nest: true\n        },\n        third: [{\n          fourth: {\n            nest: false\n          }\n        }],\n        mismatchKeyX: true\n      }, \"fifth\"];\n      const actual = this.message(\"calledWith\", this.obj.doSomething, expectedArg);\n\n      /**\n       * Unfortunately, `util.inspect` behaves differently in node than\n       * it does in browsers, so we need to detect the difference in order\n       * to set the correct value for expected `expected`.\n       *\n       * In node the output uses more whitespace than in browsers.\n       *\n       * @type {boolean}\n       */\n      const usesCondensedFormat = inspect([{\n        apple: \"e4d13f88-9b9b-4e05-8abb-f76df2d4ef40\"\n      }, {\n        pear: \"841b661f-80f4-4560-9cf4-133dcffd240c\"\n      }]).indexOf(\"[ {\") === 0;\n      const expected = usesCondensedFormat ? `${\"expected doSomething to be called with arguments \\n\" + \"[ { first: 'a',\\n\" + \"    second: { nest: true },\\n\" + \"    third: [ [Object] ],\\n\"}${color.red(\"    mismatchKey: true },\\n\")}${color.green(\"    mismatchKeyX: true },\\n\")}  'fifth' ]` : `${\"expected doSomething to be called with arguments \\n\" + \"[\\n\" + \"  {\\n\" + \"    first: 'a',\\n\" + \"    second: { nest: true },\\n\" + \"    third: [ [Object] ],\\n\"}${color.red(\"    mismatchKey: true\\n\")}${color.green(\"    mismatchKeyX: true\\n\")}  },\\n` + `  'fifth'\\n` + `]`;\n      assert.equals(actual, expected);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message with a missing argument","suites":["assert","message"],"updatePoint":{"line":1312,"column":67,"index":47391},"line":1312,"code":"    it(\"assert.calledWith exception message with a missing argument\", function () {\n      this.obj.doSomething(4);\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, 1, 3), `expected doSomething to be called with arguments \\n${color.red(\"4\")} ${color.green(\"1\")} \\n${color.green(\"3\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message with an excess argument","suites":["assert","message"],"updatePoint":{"line":1316,"column":67,"index":47705},"line":1316,"code":"    it(\"assert.calledWith exception message with an excess argument\", function () {\n      this.obj.doSomething(4, 3);\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, 1), `expected doSomething to be called with arguments \\n${color.red(\"4\")} ${color.green(\"1\")} \\n${color.red(\"3\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.any exception message","suites":["assert","message"],"updatePoint":{"line":1320,"column":53,"index":48003},"line":1320,"code":"    it(\"assert.calledWith match.any exception message\", function () {\n      this.obj.doSomething(true, true);\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match.any, false), `${\"expected doSomething to be called with arguments \\n\" + \"true any\\n\"}${color.red(\"true\")} ${color.green(\"false\")} `);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.defined exception message","suites":["assert","message"],"updatePoint":{"line":1324,"column":57,"index":48334},"line":1324,"code":"    it(\"assert.calledWith match.defined exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match.defined), `expected doSomething to be called with arguments \\n ${color.red(\"defined\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.truthy exception message","suites":["assert","message"],"updatePoint":{"line":1328,"column":56,"index":48610},"line":1328,"code":"    it(\"assert.calledWith match.truthy exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match.truthy), `expected doSomething to be called with arguments \\n ${color.red(\"truthy\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.falsy exception message","suites":["assert","message"],"updatePoint":{"line":1332,"column":55,"index":48883},"line":1332,"code":"    it(\"assert.calledWith match.falsy exception message\", function () {\n      this.obj.doSomething(true);\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match.falsy), `expected doSomething to be called with arguments \\n${color.green(\"true\")} ${color.red(\"falsy\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.same exception message","suites":["assert","message"],"updatePoint":{"line":1336,"column":54,"index":49179},"line":1336,"code":"    it(\"assert.calledWith match.same exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match.same(1)), `expected doSomething to be called with arguments \\n ${color.red(\"same(1)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.typeOf exception message","suites":["assert","message"],"updatePoint":{"line":1340,"column":56,"index":49455},"line":1340,"code":"    it(\"assert.calledWith match.typeOf exception message\", function () {\n      this.obj.doSomething();\n      const matcher = match.typeOf(\"string\");\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, matcher), `expected doSomething to be called with arguments \\n ${color.red('typeOf(\"string\")')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match.instanceOf exception message","suites":["assert","message"],"updatePoint":{"line":1345,"column":60,"index":49784},"line":1345,"code":"    it(\"assert.calledWith match.instanceOf exception message\", function () {\n      this.obj.doSomething();\n      const matcher = match.instanceOf(function CustomType() {\n        return;\n      });\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, matcher), `expected doSomething to be called with arguments \\n ${color.red(\"instanceOf(CustomType)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match object exception message","suites":["assert","message"],"updatePoint":{"line":1352,"column":56,"index":50158},"line":1352,"code":"    it(\"assert.calledWith match object exception message\", function () {\n      this.obj.doSomething();\n      const matcher = match({\n        some: \"value\",\n        and: 123\n      });\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, matcher), `expected doSomething to be called with arguments \\n ${color.red(\"match(some: value, and: 123)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match boolean exception message","suites":["assert","message"],"updatePoint":{"line":1360,"column":57,"index":50530},"line":1360,"code":"    it(\"assert.calledWith match boolean exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match(true)), `expected doSomething to be called with arguments \\n ${color.red(\"match(true)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match number exception message","suites":["assert","message"],"updatePoint":{"line":1364,"column":56,"index":50808},"line":1364,"code":"    it(\"assert.calledWith match number exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match(123)), `expected doSomething to be called with arguments \\n ${color.red(\"match(123)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match string exception message","suites":["assert","message"],"updatePoint":{"line":1368,"column":56,"index":51084},"line":1368,"code":"    it(\"assert.calledWith match string exception message\", function () {\n      this.obj.doSomething();\n      const matcher = match(\"Sinon\");\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, matcher), `expected doSomething to be called with arguments \\n ${color.red('match(\"Sinon\")')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match regexp exception message","suites":["assert","message"],"updatePoint":{"line":1373,"column":56,"index":51399},"line":1373,"code":"    it(\"assert.calledWith match regexp exception message\", function () {\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, match(/[a-z]+/)), `expected doSomething to be called with arguments \\n ${color.red(\"match(/[a-z]+/)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith match test function exception message","suites":["assert","message"],"updatePoint":{"line":1377,"column":63,"index":51692},"line":1377,"code":"    it(\"assert.calledWith match test function exception message\", function () {\n      this.obj.doSomething();\n      const matcher = match({\n        test: function custom() {\n          return;\n        }\n      });\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, matcher), `expected doSomething to be called with arguments \\n ${color.red(\"match(custom)\")}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWithMatch exception message","suites":["assert","message"],"updatePoint":{"line":1386,"column":48,"index":52062},"line":1386,"code":"    it(\"assert.calledWithMatch exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      assert.equals(this.message(\"calledWithMatch\", this.obj.doSomething, 4, 3, \"hey\"), `expected doSomething to be called with match \\n${color.red(\"1\")} ${color.green(\"4\")} \\n3\\n${inspect('\"hey\"')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysCalledWith exception message","suites":["assert","message"],"updatePoint":{"line":1390,"column":49,"index":52379},"line":1390,"code":"    it(\"assert.alwaysCalledWith exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      this.obj.doSomething(1, \"hey\");\n      assert.equals(this.message(\"alwaysCalledWith\", this.obj.doSomething, 1, \"hey\"), `${\"expected doSomething to always be called with arguments \\n\" + \"Call 1:\\n\" + \"1\\n\"}${color.red(\"3\")} ${color.green(inspect('\"hey\"'))} \\n${color.red(inspect('\"hey\"'))}\\n` + `Call 2:\\n` + `1\\n${inspect('\"hey\"')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysCalledWithMatch exception message","suites":["assert","message"],"updatePoint":{"line":1395,"column":54,"index":52839},"line":1395,"code":"    it(\"assert.alwaysCalledWithMatch exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      this.obj.doSomething(1, \"hey\");\n      assert.equals(this.message(\"alwaysCalledWithMatch\", this.obj.doSomething, 1, \"hey\"), `${\"expected doSomething to always be called with match \\n\" + \"Call 1:\\n\" + \"1\\n\"}${color.red(\"3\")} ${color.green(inspect('\"hey\"'))} \\n${color.red(inspect('\"hey\"'))}\\n` + `Call 2:\\n` + `1\\n${inspect('\"hey\"')}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWithExactly exception message","suites":["assert","message"],"updatePoint":{"line":1400,"column":50,"index":53296},"line":1400,"code":"    it(\"assert.calledWithExactly exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      assert.equals(this.message(\"calledWithExactly\", this.obj.doSomething, 1, 3), `expected doSomething to be called with exact arguments \\n1\\n3\\n${color.red(inspect('\"hey\"'))}`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledOnceWithExactly exception messages","suites":["assert","message"],"updatePoint":{"line":1404,"column":55,"index":53598},"line":1404,"code":"    it(\"assert.calledOnceWithExactly exception messages\", function () {\n      assert.equals(this.message(\"calledOnceWithExactly\", this.obj.doSomething, 1, 3, \"bob\"), \"expected doSomething to be called once and with exact arguments \");\n      this.obj.doSomething(4, 3, \"bob\");\n      assert.equals(this.message(\"calledOnceWithExactly\", this.obj.doSomething, 1, 3, \"bob\"), `expected doSomething to be called once and with exact arguments \\n${color.red(\"4\")} ${color.green(\"1\")} \\n3\\n${inspect('\"bob\"')}`);\n      this.obj.doSomething();\n      assert.equals(this.message(\"calledOnceWithExactly\", this.obj.doSomething), `${\"expected doSomething to be called once and with exact arguments \\n\" + \"Call 1:\\n\"}${color.red(\"4\")}\\n${color.red(\"3\")}\\n${color.red(inspect('\"bob\"'))}\\nCall 2:`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith exception message with equal string representations","suites":["assert","message"],"updatePoint":{"line":1411,"column":77,"index":54409},"line":1411,"code":"    it(\"assert.calledWith exception message with equal string representations\", function () {\n      this.obj.doSomething(1234);\n      assert.equals(this.message(\"calledWith\", this.obj.doSomething, \"1234\"), `expected doSomething to be called with arguments \\n${color.red(1234)} ${color.green(inspect('\"1234\"'))} `);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.calledWith message is idempotent","suites":["assert","message"],"updatePoint":{"line":1415,"column":47,"index":54702},"line":1415,"code":"    it(\"assert.calledWith message is idempotent\", function () {\n      this.obj.doSomething(\"hey\");\n      this.message(\"calledWith\", this.obj.doSomething, \"\");\n      this.message(\"calledWith\", this.obj.doSomething, \"\");\n      this.message(\"calledWith\", this.obj.doSomething, \"\");\n      assert.contains(this.message(\"calledWith\", this.obj.doSomething, \"\"), '\"hey\"');\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysCalledWithExactly exception message","suites":["assert","message"],"updatePoint":{"line":1422,"column":56,"index":55084},"line":1422,"code":"    it(\"assert.alwaysCalledWithExactly exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      this.obj.doSomething(1, 3);\n      assert.equals(this.message(\"alwaysCalledWithExactly\", this.obj.doSomething, 1, 3), `${\"expected doSomething to always be called with exact arguments \\n\" + \"Call 1:\\n\" + \"1\\n\" + \"3\\n\"}${color.red(inspect('\"hey\"'))}\\n` + `Call 2:\\n` + `1\\n` + `3`);\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.neverCalledWith exception message","suites":["assert","message"],"updatePoint":{"line":1427,"column":48,"index":55485},"line":1427,"code":"    it(\"assert.neverCalledWith exception message\", function () {\n      this.obj.doSomething(1, 2, 3);\n      assert.equals(this.message(\"neverCalledWith\", this.obj.doSomething, 1, 2), \"expected doSomething to never be called with arguments 1, 2\\n    doSomething(1, 2, 3)\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.neverCalledWithMatch exception message","suites":["assert","message"],"updatePoint":{"line":1431,"column":53,"index":55771},"line":1431,"code":"    it(\"assert.neverCalledWithMatch exception message\", function () {\n      this.obj.doSomething(1, 2, 3);\n      assert.equals(this.message(\"neverCalledWithMatch\", this.obj.doSomething, 1, 2), \"expected doSomething to never be called with match 1, 2\\n    doSomething(1, 2, 3)\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.threw exception message","suites":["assert","message"],"updatePoint":{"line":1435,"column":38,"index":56043},"line":1435,"code":"    it(\"assert.threw exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      this.obj.doSomething(1, 3);\n      assert.equals(this.message(\"threw\", this.obj.doSomething), \"doSomething did not throw exception\\n    doSomething(1, 3, 'hey')\\n    doSomething(1, 3)\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.alwaysThrew exception message","suites":["assert","message"],"updatePoint":{"line":1440,"column":44,"index":56345},"line":1440,"code":"    it(\"assert.alwaysThrew exception message\", function () {\n      this.obj.doSomething(1, 3, \"hey\");\n      this.obj.doSomething(1, 3);\n      assert.equals(this.message(\"alwaysThrew\", this.obj.doSomething), \"doSomething did not always throw exception\\n    doSomething(1, 3, 'hey')\\n    doSomething(1, 3)\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"assert.match exception message","suites":["assert","message"],"updatePoint":{"line":1445,"column":38,"index":56654},"line":1445,"code":"    it(\"assert.match exception message\", function () {\n      assert.equals(this.message(\"match\", {\n        foo: 1\n      }, [1, 3]), \"expected value to match\\n    expected = [ 1, 3 ]\\n    actual = { foo: 1 }\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"should use the symbol's description in exception messages","suites":["assert","with symbol method names"],"updatePoint":{"line":1472,"column":65,"index":57423},"line":1472,"code":"    it(\"should use the symbol's description in exception messages\", function () {\n      const symbol = Symbol(\"Something Symbolic\");\n      setupSymbol(symbol);\n      assert.equals(createExceptionMessage(\"called\", obj[symbol]), \"expected Symbol(Something Symbolic) to have been called at least once but was never called\");\n    });","file":"assert-test.js","skipped":false,"dir":"test"},{"name":"adds and uses a custom behavior","suites":["behaviors"],"updatePoint":{"line":6,"column":37,"index":179},"line":6,"code":"  it(\"adds and uses a custom behavior\", function () {\n    sinon.addBehavior(\"returnsNum\", function (fake, n) {\n      fake.returns(n);\n    });\n    const stub = sinon.stub().returnsNum(42);\n    assert.equals(stub(), 42);\n  });","file":"behavior-test.js","skipped":false,"dir":"test"},{"name":"stubs existing methods","suites":["createStubInstance"],"updatePoint":{"line":9,"column":28,"index":318},"line":9,"code":"  it(\"stubs existing methods\", function () {\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    const stub = createStubInstance(Class);\n    stub.method.returns(3);\n    assert.equals(3, stub.method());\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"throws with no methods to stub","suites":["createStubInstance"],"updatePoint":{"line":20,"column":36,"index":603},"line":20,"code":"  it(\"throws with no methods to stub\", function () {\n    const Class = function () {\n      return;\n    };\n    assert.exception(function () {\n      createStubInstance(Class);\n    }, {\n      message: \"Found no methods on object to which we could apply mutations\"\n    });\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"doesn't call the constructor","suites":["createStubInstance"],"updatePoint":{"line":30,"column":34,"index":876},"line":30,"code":"  it(\"doesn't call the constructor\", function () {\n    const Class = function (a, b) {\n      const c = a + b;\n      throw c;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    const stub = createStubInstance(Class);\n    refute.exception(function () {\n      stub.method(3);\n    });\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"retains non function values","suites":["createStubInstance"],"updatePoint":{"line":43,"column":33,"index":1186},"line":43,"code":"  it(\"retains non function values\", function () {\n    const TYPE = \"some-value\";\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    Class.prototype.type = TYPE;\n    const stub = createStubInstance(Class);\n    assert.equals(TYPE, stub.type);\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"has no side effects on the prototype","suites":["createStubInstance"],"updatePoint":{"line":55,"column":42,"index":1512},"line":55,"code":"  it(\"has no side effects on the prototype\", function () {\n    const proto = {\n      method: function () {\n        throw new Error(\"error\");\n      }\n    };\n    const Class = function () {\n      return;\n    };\n    Class.prototype = proto;\n    const stub = createStubInstance(Class);\n    refute.exception(stub.method);\n    assert.exception(proto.method);\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"throws exception for non function params","suites":["createStubInstance"],"updatePoint":{"line":69,"column":46,"index":1875},"line":69,"code":"  it(\"throws exception for non function params\", function () {\n    const types = [{}, 3, \"hi!\"];\n    for (let i = 0; i < types.length; i++) {\n      // yes, it's silly to create functions in a loop, it's also a test\n      // eslint-disable-next-line no-loop-func\n      assert.exception(function () {\n        createStubInstance(types[i]);\n      });\n    }\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"allows providing optional overrides","suites":["createStubInstance"],"updatePoint":{"line":79,"column":41,"index":2229},"line":79,"code":"  it(\"allows providing optional overrides\", function () {\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    const stub = createStubInstance(Class, {\n      method: createStub().returns(3)\n    });\n    assert.equals(3, stub.method());\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"allows providing optional returned values","suites":["createStubInstance"],"updatePoint":{"line":91,"column":47,"index":2544},"line":91,"code":"  it(\"allows providing optional returned values\", function () {\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    const stub = createStubInstance(Class, {\n      method: 3\n    });\n    assert.equals(3, stub.method());\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"allows providing null as a return value","suites":["createStubInstance"],"updatePoint":{"line":103,"column":45,"index":2835},"line":103,"code":"  it(\"allows providing null as a return value\", function () {\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    const stub = createStubInstance(Class, {\n      method: null\n    });\n    assert.equals(null, stub.method());\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"throws an exception when trying to override non-existing property","suites":["createStubInstance"],"updatePoint":{"line":115,"column":71,"index":3158},"line":115,"code":"  it(\"throws an exception when trying to override non-existing property\", function () {\n    const Class = function () {\n      return;\n    };\n    Class.prototype.method = function () {\n      return;\n    };\n    assert.exception(function () {\n      createStubInstance(Class, {\n        foo: createStub().returns(3)\n      });\n    }, {\n      message: \"Cannot stub foo. Property does not exist!\"\n    });\n  });","file":"create-stub-instance-test.js","skipped":false,"dir":"test"},{"name":"should return unaltered target when only one argument","suites":["extend"],"updatePoint":{"line":7,"column":59,"index":241},"line":7,"code":"  it(\"should return unaltered target when only one argument\", function () {\n    const target = {\n      hello: \"world\"\n    };\n    extend(target);\n    assert.equals(target, {\n      hello: \"world\"\n    });\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"should copy all (own) properties into first argument, from all subsequent arguments","suites":["extend"],"updatePoint":{"line":16,"column":89,"index":479},"line":16,"code":"  it(\"should copy all (own) properties into first argument, from all subsequent arguments\", function () {\n    const target = {\n      hello: \"world\"\n    };\n    extend(target, {\n      a: \"a\"\n    }, {\n      b: \"b\"\n    });\n    assert.equals(target.hello, \"world\");\n    assert.equals(target.a, \"a\");\n    assert.equals(target.b, \"b\");\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"should copy toString method into target","suites":["extend"],"updatePoint":{"line":29,"column":45,"index":770},"line":29,"code":"  it(\"should copy toString method into target\", function () {\n    const target = {\n      hello: \"world\",\n      toString: function () {\n        return \"hello world\";\n      }\n    };\n    const source = {\n      toString: function () {\n        return \"hello source\";\n      }\n    };\n    extend(target, source);\n    assert.same(target.toString, source.toString);\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"must copy the last occurring property into the target","suites":["extend"],"updatePoint":{"line":44,"column":59,"index":1146},"line":44,"code":"  it(\"must copy the last occurring property into the target\", function () {\n    const target = {\n      a: 0,\n      b: 0,\n      c: 0,\n      d: 0\n    };\n    const source1 = {\n      a: 1,\n      b: 1,\n      c: 1\n    };\n    const source2 = {\n      a: 2,\n      b: 2\n    };\n    const source3 = {\n      a: 3\n    };\n    extend(target, source1, source2, source3);\n    assert.equals(target.a, 3);\n    assert.equals(target.b, 2);\n    assert.equals(target.c, 1);\n    assert.equals(target.d, 0);\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"copies all properties","suites":["extend"],"updatePoint":{"line":69,"column":27,"index":1602},"line":69,"code":"  it(\"copies all properties\", function () {\n    const object1 = {\n      prop1: null,\n      prop2: false\n    };\n    const object2 = {\n      prop3: \"hey\",\n      prop4: 4\n    };\n    const result = extend({}, object1, object2);\n    const expected = {\n      prop1: null,\n      prop2: false,\n      prop3: \"hey\",\n      prop4: 4\n    };\n    assert.equals(result, expected);\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"copies accessor properties into the target","suites":["extend"],"updatePoint":{"line":87,"column":48,"index":1994},"line":87,"code":"  it(\"copies accessor properties into the target\", function () {\n    const target = {\n      hello: \"hello\"\n    };\n    const obj = {\n      private: 1\n    };\n    Object.defineProperty(obj, \"lexical\", {\n      configurable: true,\n      enumerable: true,\n      get: () => this.private,\n      set: value => {\n        this.private = value;\n      }\n    });\n    Object.defineProperty(obj, \"instance\", {\n      configurable: true,\n      enumerable: true,\n      get: () => obj.private,\n      set: value => {\n        obj.private = value;\n      }\n    });\n    Object.defineProperty(obj, \"bound\", {\n      configurable: true,\n      enumerable: true,\n      get: function () {\n        return this.private;\n      },\n      set: function (value) {\n        this.private = value;\n      }\n    });\n    extend(target, obj);\n    assert.equals(target.hello, \"hello\");\n    assert.equals(target.lexical === undefined, true);\n    assert.equals(target.instance, 1);\n    assert.equals(target.bound, 1);\n    target.lexical = 2;\n    assert.equals(target.lexical, 2);\n    assert.equals(target.instance, 1);\n    assert.equals(target.bound, 1);\n    target.instance = 3;\n    assert.equals(target.lexical, 2);\n    assert.equals(target.instance, 3);\n    assert.equals(target.bound, 1);\n    target.bound = 4;\n    assert.equals(target.lexical, 2);\n    assert.equals(target.instance, 3);\n    assert.equals(target.bound, 4);\n  });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"does not attempt to write to the property","suites":["extend","when 'name' property is not writable"],"updatePoint":{"line":139,"column":49,"index":3444},"line":139,"code":"    it(\"does not attempt to write to the property\", function () {\n      const object1 = {\n        prop1: null\n      };\n      Object.defineProperty(object1, \"name\", {\n        configurable: false,\n        enumerable: true,\n        value: \"not-writable\",\n        writable: false\n      });\n      const object2 = {\n        prop2: \"hey\",\n        name: \"write-attempt\"\n      };\n      const result = extend(object1, object2);\n      const expected = {\n        prop1: null,\n        prop2: \"hey\",\n        name: \"not-writable\"\n      };\n      assert.equals(result, expected);\n    });","file":"extend-test.js","skipped":false,"dir":"test"},{"name":"should return a Sinon proxy","suites":[],"updatePoint":{"line":22,"column":33,"index":759},"line":22,"code":"  it(\"should return a Sinon proxy\", function () {\n    const actual = argument ? func(argument) : func();\n    assert.isProxy(actual);\n  });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return a unary Function named 'fake'","suites":["fake","module"],"updatePoint":{"line":38,"column":51,"index":1164},"line":38,"code":"    it(\"should return a unary Function named 'fake'\", function () {\n      assert.equals(fake.length, 1);\n      if (hasFunctionNameSupport) {\n        assert.equals(fake.name, \"fake\");\n      }\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should keep the `this` context of the wrapped function","suites":["fake","when passed a Function"],"updatePoint":{"line":50,"column":62,"index":1548},"line":50,"code":"    it(\"should keep the `this` context of the wrapped function\", function () {\n      function method() {\n        return this.foo;\n      }\n      const o = {\n        foo: 42\n      };\n      const fakeMethod = fake(method);\n      const result = fakeMethod.call(o);\n      assert.equals(fakeMethod.callCount, 1);\n      assert.equals(result, 42);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should reject non-Function argument","suites":["fake","when passed no value"],"updatePoint":{"line":67,"column":41,"index":2018},"line":67,"code":"  it(\"should reject non-Function argument\", function () {\n    const nonFuncs = [\"\", 123, new Date(), {}, false, undefined, true, null];\n    nonFuncs.forEach(function (nf) {\n      assert.exception(function () {\n        fake(nf);\n      });\n    });\n  });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"it should be a reference for the callback in the last call","suites":["fake",".callback"],"updatePoint":{"line":76,"column":66,"index":2333},"line":76,"code":"    it(\"it should be a reference for the callback in the last call\", function () {\n      const f = fake();\n      const callback1 = function () {\n        return;\n      };\n      const callback2 = function () {\n        return;\n      };\n      f(1, 2, 3, callback1);\n      assert.equals(f.callback, callback1);\n      f(1, 2, 3, callback2);\n      assert.equals(f.callback, callback2);\n      f(1, 2, 3);\n      assert.isUndefined(f.callback);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should be 'fake'","suites":["fake",".displayName"],"updatePoint":{"line":93,"column":24,"index":2781},"line":93,"code":"    it(\"should be 'fake'\", function () {\n      const fakes = [fake(), fake.returns(42), fake.throws(new Error()), fake.resolves(42), fake.rejects(new Error()), fake.yields(42), fake.yieldsAsync(42)];\n      fakes.forEach(function (f) {\n        assert.equals(f.displayName, \"fake\");\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should start with 'fake#'","suites":["fake",".id"],"updatePoint":{"line":101,"column":33,"index":3127},"line":101,"code":"    it(\"should start with 'fake#'\", function () {\n      for (let i = 0; i < 100; i++) {\n        assert.isTrue(fake().id.indexOf(\"fake#\") === 0);\n      }\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should be the first argument from the last call","suites":["fake",".firstArg"],"updatePoint":{"line":108,"column":55,"index":3354},"line":108,"code":"    it(\"should be the first argument from the last call\", function () {\n      const f = fake();\n      f(41, 42, 43);\n      assert.equals(f.firstArg, 41);\n      f(44, 45);\n      assert.equals(f.firstArg, 44);\n      f(46);\n      assert.equals(f.firstArg, 46);\n      f(false, true, 47, \"string\");\n      assert.isFalse(f.firstArg);\n      f(\"string\", false, true, 47);\n      assert.equals(f.firstArg, \"string\");\n      f(47, \"string\", false, true);\n      assert.equals(f.firstArg, 47);\n      f(true, 47, \"string\", false);\n      assert.isTrue(f.firstArg);\n      f();\n      assert.isUndefined(f.firstArg);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should be the last argument from the last call","suites":["fake",".lastArg"],"updatePoint":{"line":129,"column":54,"index":4002},"line":129,"code":"    it(\"should be the last argument from the last call\", function () {\n      const f = fake();\n      f(41, 42, 43);\n      assert.equals(f.lastArg, 43);\n      f(44, 45);\n      assert.equals(f.lastArg, 45);\n      f(46);\n      assert.equals(f.lastArg, 46);\n      f(false, true, 47, \"string\");\n      assert.equals(f.lastArg, \"string\");\n      f(\"string\", false, true, 47);\n      assert.equals(f.lastArg, 47);\n      f(47, \"string\", false, true);\n      assert.isTrue(f.lastArg);\n      f(true, 47, \"string\", false);\n      assert.isFalse(f.lastArg);\n      f();\n      assert.isUndefined(f.lastArg);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return a function that returns the argument","suites":["fake",".returns"],"updatePoint":{"line":150,"column":58,"index":4646},"line":150,"code":"    it(\"should return a function that returns the argument\", function () {\n      const expected = 42;\n      const myFake = fake.returns(expected);\n      const actual = myFake();\n      assert.equals(actual, expected);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return a function that throws an Error, that is the argument","suites":["fake",".throws"],"updatePoint":{"line":161,"column":75,"index":5027},"line":161,"code":"    it(\"should return a function that throws an Error, that is the argument\", function () {\n      const expectedMessage = \"42\";\n      const myFake = fake.throws(expectedMessage);\n      assert.exception(function () {\n        myFake();\n      });\n\n      /* eslint-disable no-restricted-syntax */\n      try {\n        myFake();\n      } catch (error) {\n        assert.equals(error.message, expectedMessage);\n      }\n      /* eslint-disable no-restricted-syntax */\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return the same error type as it is passed","suites":["fake",".throws"],"updatePoint":{"line":179,"column":57,"index":5571},"line":179,"code":"    it(\"should return the same error type as it is passed\", function () {\n      const expected = new TypeError(\"hello sailor\");\n      const myFake = fake.throws(expected);\n\n      /* eslint-disable no-restricted-syntax */\n      try {\n        myFake();\n      } catch (actual) {\n        assert.isTrue(actual instanceof TypeError);\n      }\n      /* eslint-disable no-restricted-syntax */\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should throw an Error","suites":["fake",".throws","when passed a String"],"updatePoint":{"line":193,"column":31,"index":5989},"line":193,"code":"      it(\"should throw an Error\", function () {\n        const expected = \"lorem ipsum\";\n        const myFake = fake.throws(expected);\n\n        /* eslint-disable no-restricted-syntax */\n        try {\n          myFake();\n        } catch (actual) {\n          assert.isTrue(actual instanceof Error);\n        }\n        /* eslint-disable no-restricted-syntax */\n      });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return a function that resolves to the argument","suites":["fake",".resolves"],"updatePoint":{"line":210,"column":62,"index":6474},"line":210,"code":"    it(\"should return a function that resolves to the argument\", function () {\n      const expected = 42;\n      const myFake = fake.resolves(expected);\n      return myFake().then(function (actual) {\n        assert.equals(actual, expected);\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return a function that rejects to the argument","suites":["fake",".rejects"],"updatePoint":{"line":223,"column":61,"index":6907},"line":223,"code":"    it(\"should return a function that rejects to the argument\", function () {\n      const expectedMessage = \"42\";\n      const myFake = fake.rejects(expectedMessage);\n      return myFake().catch(function (actual) {\n        assert.equals(actual.message, expectedMessage);\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return the same error type as it is passed","suites":["fake",".rejects"],"updatePoint":{"line":233,"column":57,"index":7288},"line":233,"code":"    it(\"should return the same error type as it is passed\", function () {\n      const expected = new TypeError(\"hello world\");\n      const myFake = fake.rejects(expected);\n      return myFake().catch(function (actual) {\n        assert.isTrue(actual instanceof TypeError);\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should reject with an Error when passed a String","suites":["fake",".rejects"],"updatePoint":{"line":240,"column":56,"index":7577},"line":240,"code":"    it(\"should reject with an Error when passed a String\", function () {\n      const expected = \"lorem ipsum\";\n      const myFake = fake.rejects(expected);\n      return myFake().catch(function (actual) {\n        assert.isTrue(actual instanceof Error);\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should call a callback with the provided values","suites":["fake",".yields"],"updatePoint":{"line":251,"column":55,"index":7995},"line":251,"code":"    it(\"should call a callback with the provided values\", function () {\n      const callback = sinon.spy();\n      const myFake = fake.yields(\"one\", \"two\", \"three\");\n      myFake(callback);\n      sinon.assert.calledOnce(callback);\n      sinon.assert.calledWith(callback, \"one\", \"two\", \"three\");\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should call the last function argument","suites":["fake",".yields"],"updatePoint":{"line":258,"column":46,"index":8288},"line":258,"code":"    it(\"should call the last function argument\", function () {\n      const callback = sinon.spy();\n      const myFake = fake.yields();\n      myFake(function () {\n        return;\n      }, callback);\n      sinon.assert.calledOnce(callback);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should throw if the last argument is not a function","suites":["fake",".yields"],"updatePoint":{"line":266,"column":59,"index":8548},"line":266,"code":"    it(\"should throw if the last argument is not a function\", function () {\n      const myFake = fake.yields();\n      assert.exception(function () {\n        myFake(function () {\n          return;\n        }, \"not a function\");\n      }, /TypeError: Expected last argument to be a function/);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should call the callback asynchronously with the provided values","suites":["fake",".yieldsAsync"],"updatePoint":{"line":278,"column":72,"index":9018},"line":278,"code":"    it(\"should call the callback asynchronously with the provided values\", function (done) {\n      const callback = sinon.spy();\n      const myFake = fake.yieldsAsync(\"one\", \"two\", \"three\");\n      myFake(callback);\n      sinon.assert.notCalled(callback);\n      setTimeout(function () {\n        sinon.assert.calledOnce(callback);\n        sinon.assert.calledWith(callback, \"one\", \"two\", \"three\");\n        done();\n      }, 5); // IE 11 and Edge are sometimes slow\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should call the last function argument","suites":["fake",".yieldsAsync"],"updatePoint":{"line":290,"column":46,"index":9462},"line":290,"code":"    it(\"should call the last function argument\", function (done) {\n      const callback = sinon.spy();\n      const myFake = fake.yieldsAsync();\n      myFake(function () {\n        return;\n      }, callback);\n      sinon.assert.notCalled(callback);\n      setTimeout(function () {\n        sinon.assert.calledOnce(callback);\n        done();\n      }, 5); // IE 11 and Edge are sometimes slow\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should throw if the last argument is not a function","suites":["fake",".yieldsAsync"],"updatePoint":{"line":303,"column":59,"index":9871},"line":303,"code":"    it(\"should throw if the last argument is not a function\", function () {\n      const myFake = fake.yieldsAsync();\n      assert.exception(function () {\n        myFake(function () {\n          return;\n        }, \"not a function\");\n      }, /TypeError: Expected last argument to be a function/);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should set the name of the fake to the given string","suites":["fake",".named"],"updatePoint":{"line":319,"column":59,"index":10400},"line":319,"code":"    it(\"should set the name of the fake to the given string\", function () {\n      const myFake = fake().named(\"something\");\n      assert.equals(myFake.name, \"something\");\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return true if called before","suites":["fake",".calledBefore/After"],"updatePoint":{"line":333,"column":43,"index":10758},"line":333,"code":"    it(\"should return true if called before\", function () {\n      assert.isTrue(fakeA.calledBefore(fakeB));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return false if not called before","suites":["fake",".calledBefore/After"],"updatePoint":{"line":336,"column":48,"index":10879},"line":336,"code":"    it(\"should return false if not called before\", function () {\n      assert.isFalse(fakeB.calledBefore(fakeA));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return true if called after","suites":["fake",".calledBefore/After"],"updatePoint":{"line":339,"column":42,"index":10995},"line":339,"code":"    it(\"should return true if called after\", function () {\n      assert.isTrue(fakeB.calledAfter(fakeA));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return false if not called after","suites":["fake",".calledBefore/After"],"updatePoint":{"line":342,"column":47,"index":11114},"line":342,"code":"    it(\"should return false if not called after\", function () {\n      assert.isFalse(fakeA.calledAfter(fakeB));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should pass sinon.assert.callOrder","suites":["fake",".calledBefore/After"],"updatePoint":{"line":345,"column":42,"index":11229},"line":345,"code":"    it(\"should pass sinon.assert.callOrder\", function () {\n      refute.exception(function () {\n        sinon.assert.callOrder(fakeA, fakeB);\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should fail sinon.assert.callOrder","suites":["fake",".calledBefore/After"],"updatePoint":{"line":350,"column":42,"index":11389},"line":350,"code":"    it(\"should fail sinon.assert.callOrder\", function () {\n      assert.exception(function () {\n        sinon.assert.callOrder(fakeB, fakeA);\n      }, {\n        name: \"AssertError\"\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return true if called immediately before","suites":["fake",".calledBefore/After"],"updatePoint":{"line":357,"column":55,"index":11601},"line":357,"code":"    it(\"should return true if called immediately before\", function () {\n      assert.isTrue(fakeA.calledImmediatelyBefore(fakeB));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return false if not called immediately before","suites":["fake",".calledBefore/After"],"updatePoint":{"line":360,"column":60,"index":11745},"line":360,"code":"    it(\"should return false if not called immediately before\", function () {\n      assert.isFalse(fakeB.calledImmediatelyBefore(fakeA));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return true if called immediately after","suites":["fake",".calledBefore/After"],"updatePoint":{"line":363,"column":54,"index":11884},"line":363,"code":"    it(\"should return true if called immediately after\", function () {\n      assert.isTrue(fakeB.calledImmediatelyAfter(fakeA));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should return false if not called immediately after","suites":["fake",".calledBefore/After"],"updatePoint":{"line":366,"column":59,"index":12026},"line":366,"code":"    it(\"should return false if not called immediately after\", function () {\n      assert.isFalse(fakeA.calledImmediatelyAfter(fakeB));\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"is delegated to proxy","suites":["fake",".printf"],"updatePoint":{"line":371,"column":29,"index":12181},"line":371,"code":"    it(\"is delegated to proxy\", function () {\n      const myFake = fake();\n      const proxy = createProxy(noop, noop);\n      assert.same(myFake.printf, proxy.printf);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should exist and be a function","suites":["fake",".usingPromise"],"updatePoint":{"line":379,"column":38,"index":12449},"line":379,"code":"    it(\"should exist and be a function\", function () {\n      assert(fake.usingPromise);\n      assert.isFunction(fake.usingPromise);\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should set the promise used by resolve","suites":["fake",".usingPromise"],"updatePoint":{"line":383,"column":46,"index":12597},"line":383,"code":"    it(\"should set the promise used by resolve\", function () {\n      const promise = {\n        resolve: function (value) {\n          return Promise.resolve(value);\n        }\n      };\n      const object = {};\n      const myFake = fake.usingPromise(promise).resolves(object);\n      return myFake().then(function (actual) {\n        assert.same(actual, object, \"Same object resolved\");\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"should set the promise used by reject","suites":["fake",".usingPromise"],"updatePoint":{"line":395,"column":45,"index":12996},"line":395,"code":"    it(\"should set the promise used by reject\", function () {\n      const promise = {\n        reject: function (err) {\n          return Promise.reject(err);\n        }\n      };\n      const reason = new Error();\n      const myFake = fake.usingPromise(promise).rejects(reason);\n      return myFake().then(function () {\n        referee.fail(\"this should not resolve\");\n      }).catch(function (actual) {\n        assert.same(actual, reason, \"Same object resolved\");\n      });\n    });","file":"fake-test.js","skipped":false,"dir":"test"},{"name":"#283","suites":["issues"],"updatePoint":{"line":18,"column":10,"index":561},"line":18,"code":"  it(\"#283\", function () {\n    function testSinonFakeTimersWith(interval, ticks) {\n      const clock = sinon.useFakeTimers();\n      const spy = sinon.spy();\n      const id = setInterval(spy, interval);\n      assert(!spy.calledOnce);\n      clock.tick(ticks);\n      assert(spy.callCount === Math.floor(ticks / interval));\n      clearInterval(id);\n      clock.restore();\n    }\n    testSinonFakeTimersWith(10, 101);\n    testSinonFakeTimersWith(99, 101);\n    testSinonFakeTimersWith(100, 200);\n    testSinonFakeTimersWith(199, 200);\n    testSinonFakeTimersWith(500, 1001);\n    testSinonFakeTimersWith(1000, 1001);\n  });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"stub out fs.readFileSync","suites":["issues","#458","on node"],"updatePoint":{"line":43,"column":34,"index":1409},"line":43,"code":"      it(\"stub out fs.readFileSync\", function () {\n        const fs = require(\"fs\");\n        const testCase = this;\n        refute.exception(function () {\n          testCase.sandbox.stub(fs, \"readFileSync\");\n        });\n      });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"useFakeTimers should be idempotent","suites":["issues","#624"],"line":54,"code":"    it.skip(\"useFakeTimers should be idempotent\", function () {","file":"issues/issues-test.js","skipped":true,"dir":"test"},{"name":"must not throw error","suites":["issues","#852 - createStubInstance on inherited constructors"],"updatePoint":{"line":68,"column":28,"index":2420},"line":68,"code":"    it(\"must not throw error\", function () {\n      const A = function () {\n        return;\n      };\n      const B = function () {\n        return;\n      };\n      B.prototype = Object.create(A.prototype);\n      B.prototype.constructor = A;\n      B.prototype.noop = function () {\n        return;\n      };\n      refute.exception(function () {\n        sinon.createStubInstance(B);\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"must be idempotent","suites":["issues","#852(2) - createStubInstance should on same constructor"],"updatePoint":{"line":86,"column":26,"index":2902},"line":86,"code":"    it(\"must be idempotent\", function () {\n      const A = function () {\n        return;\n      };\n      A.prototype.meth = function () {\n        return;\n      };\n      refute.exception(function () {\n        sinon.createStubInstance(A);\n        sinon.createStubInstance(A);\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not rename spies","suites":["issues","#950 - first execution of a spy as a method renames that spy"],"updatePoint":{"line":109,"column":31,"index":3478},"line":109,"code":"    it(\"should not rename spies\", function () {\n      const nameDescriptor = Object.getOwnPropertyDescriptor(bob, \"name\");\n      const expectedName = nameDescriptor && nameDescriptor.configurable ? \"bob\" : \"proxy\";\n      const spy = sinon.spy(bob);\n      assert.equals(spy.name, expectedName);\n      const obj = {\n        methodName: spy\n      };\n      assert.equals(spy.name, expectedName);\n      spy();\n      assert.equals(spy.name, expectedName);\n      obj.methodName.call(null);\n      assert.equals(spy.name, expectedName);\n      obj.methodName();\n      assert.equals(spy.name, expectedName);\n      obj.otherProp = spy;\n      obj.otherProp();\n      assert.equals(spy.name, expectedName);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should stub `watch` method on any Object","suites":["issues","#1026"],"updatePoint":{"line":130,"column":48,"index":4235},"line":130,"code":"    it(\"should stub `watch` method on any Object\", function () {\n      // makes sure that Object.prototype.watch is set back to its old value\n      function restore(oldWatch) {\n        if (oldWatch) {\n          Object.prototype.watch = oldWatch; // eslint-disable-line no-extend-native\n        } else {\n          delete Object.prototype.watch;\n        }\n      }\n      let oldWatch;\n\n      // eslint-disable-next-line no-restricted-syntax\n      try {\n        oldWatch = Object.prototype.watch;\n        if (typeof Object.prototype.watch !== \"function\") {\n          // eslint-disable-next-line no-extend-native\n          Object.prototype.watch = function rolex() {\n            return;\n          };\n        }\n        const stubbedObject = sinon.stub({\n          watch: function () {\n            return;\n          }\n        });\n        stubbedObject.watch();\n        assert.isArray(stubbedObject.watch.args);\n      } catch (error) {\n        restore(oldWatch);\n        throw error;\n      }\n      restore(oldWatch);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"Ensures different matchers will not be tested against each other","suites":["issues","#1154"],"updatePoint":{"line":165,"column":72,"index":5316},"line":165,"code":"    it(\"Ensures different matchers will not be tested against each other\", function () {\n      const match = sinon.match;\n      const stub = sinon.stub;\n      const readFile = stub();\n      function endsWith(str, suffix) {\n        return str.indexOf(suffix) + suffix.length === str.length;\n      }\n      function suffixA(fileName) {\n        return endsWith(fileName, \"suffixa\");\n      }\n      function suffixB(fileName) {\n        return endsWith(fileName, \"suffixb\");\n      }\n      const argsA = match(suffixA);\n      const argsB = match(suffixB);\n      const firstFake = readFile.withArgs(argsA);\n      const secondFake = readFile.withArgs(argsB);\n      assert(firstFake !== secondFake);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should reset spies","suites":["issues","#1372 - sandbox.resetHistory"],"updatePoint":{"line":186,"column":26,"index":6030},"line":186,"code":"    it(\"should reset spies\", function () {\n      const spy = this.sandbox.spy();\n      spy();\n      assert.equals(spy.callCount, 1);\n      spy();\n      assert.equals(spy.callCount, 2);\n      this.sandbox.resetHistory();\n      spy();\n      assert.equals(spy.callCount, 1); // should not fail but fails\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"Call order takes into account both calledBefore and callCount","suites":["issues","#1398"],"updatePoint":{"line":199,"column":69,"index":6423},"line":199,"code":"    it(\"Call order takes into account both calledBefore and callCount\", function () {\n      const s1 = sinon.spy();\n      const s2 = sinon.spy();\n      s1();\n      s2();\n      s1();\n      assert.exception(function () {\n        sinon.assert.callOrder(s2, s1, s2);\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"stub.onCall","suites":["issues","#1474 - promise library should be propagated through fakes and behaviors"],"updatePoint":{"line":235,"column":19,"index":7413},"line":235,"code":"    it(\"stub.onCall\", function () {\n      stub.onSecondCall().resolves(\"resolved again\");\n      makeAssertions(stub(), \"tap resolved\");\n      makeAssertions(stub(), \"tap resolved again\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"stub.withArgs","suites":["issues","#1474 - promise library should be propagated through fakes and behaviors"],"updatePoint":{"line":240,"column":21,"index":7611},"line":240,"code":"    it(\"stub.withArgs\", function () {\n      stub.withArgs(42).resolves(\"resolved again\");\n      stub.withArgs(true).resolves(\"okay\");\n      makeAssertions(stub(), \"tap resolved\");\n      makeAssertions(stub(42), \"tap resolved again\");\n      makeAssertions(stub(true), \"tap okay\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"stub window innerHeight","suites":["issues","#1456"],"updatePoint":{"line":278,"column":31,"index":8799},"line":278,"code":"    it(\"stub window innerHeight\", function () {\n      sandbox.stub(window, \"innerHeight\").value(111);\n      assert.equals(window.innerHeight, 111);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"sets correct firstCall.returnValue","suites":["issues","#1487 - withArgs() returnValue"],"updatePoint":{"line":289,"column":42,"index":9203},"line":289,"code":"    it(\"sets correct firstCall.returnValue\", function () {\n      assert.equals(this.stub.withArgs(\"arg\").firstCall.returnValue, \"return value\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"sets correct lastCall.returnValue","suites":["issues","#1487 - withArgs() returnValue"],"updatePoint":{"line":292,"column":41,"index":9355},"line":292,"code":"    it(\"sets correct lastCall.returnValue\", function () {\n      assert.equals(this.stub.withArgs(\"arg\").lastCall.returnValue, \"return value\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"can stub methods on the prototype","suites":["issues","#1512 - sandbox.stub(obj,protoMethod)"],"updatePoint":{"line":304,"column":41,"index":9732},"line":304,"code":"    it(\"can stub methods on the prototype\", function () {\n      const proto = {\n        someFunction: function () {\n          return;\n        }\n      };\n      const instance = Object.create(proto);\n      const stub = sandbox.stub(instance, \"someFunction\");\n      instance.someFunction();\n      assert(stub.called);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should be possible stub filter","suites":["issues","#1521 - stubbing Array.prototype.filter"],"updatePoint":{"line":325,"column":38,"index":10342},"line":325,"code":"    it(\"should be possible stub filter\", function () {\n      const stub = sinon.stub(Array.prototype, \"filter\");\n      [1, 2, 3].filter(function () {\n        return false;\n      });\n      assert(stub.calledOnce);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should create a fake server without throwing","suites":["issues","#1531 - some copied functions on root sinon module throw"],"updatePoint":{"line":334,"column":52,"index":10668},"line":334,"code":"    it(\"should create a fake server without throwing\", function () {\n      refute.exception(function () {\n        sinon.createFakeServer();\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should create a fake server with clock without throwing","suites":["issues","#1531 - some copied functions on root sinon module throw"],"updatePoint":{"line":339,"column":63,"index":10837},"line":339,"code":"    it(\"should create a fake server with clock without throwing\", function () {\n      refute.exception(function () {\n        sinon.createFakeServerWithClock();\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should call original method","suites":["issues","#1442 - callThrough with a mock expectation"],"updatePoint":{"line":346,"column":35,"index":11065},"line":346,"code":"    it(\"should call original method\", function () {\n      const foo = {\n        bar: function () {\n          return;\n        }\n      };\n      const mock = this.sandbox.mock(foo);\n      mock.expects(\"bar\").callThrough();\n      foo.bar();\n      mock.verify();\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should reset property spies","suites":["issues","#1648 - resetHistory "],"updatePoint":{"line":359,"column":35,"index":11387},"line":359,"code":"    it(\"should reset property spies\", function () {\n      const obj = {\n        func: function () {\n          return;\n        },\n        get prop() {\n          return 1;\n        }\n      };\n      const sandbox = sinon.createSandbox();\n      const spyFunc = sandbox.spy(obj, \"func\");\n      const spyProp = sandbox.spy(obj, \"prop\", [\"get\"]);\n      refute.isTrue(spyFunc.called);\n      refute.isTrue(spyProp.get.called);\n      obj.func();\n      //eslint-disable-next-line no-unused-expressions\n      obj.prop;\n      assert.isTrue(spyFunc.called);\n      assert.isTrue(spyProp.get.called);\n      sandbox.resetHistory();\n      refute.isTrue(spyFunc.called);\n      refute.isTrue(spyProp.get.called);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore all stubs","suites":["issues","#1775 - sinon.restore"],"updatePoint":{"line":387,"column":32,"index":12269},"line":387,"code":"    it(\"should restore all stubs\", function () {\n      const myApi = {\n        someMethod: function someMethod() {\n          // eslint-disable-next-line no-console\n          console.log(\"test method!\");\n        }\n      };\n      sinon.stub(myApi, \"someMethod\");\n      sinon.restore();\n      sinon.stub(myApi, \"someMethod\");\n      // TypeError: Attempted to wrap someMethod which is already wrapped\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore all spies","suites":["issues","#1775 - sinon.restore"],"updatePoint":{"line":400,"column":32,"index":12675},"line":400,"code":"    it(\"should restore all spies\", function () {\n      const myApi = {\n        someMethod: function someMethod() {\n          // eslint-disable-next-line no-console\n          console.log(\"test method!\");\n        }\n      };\n      sinon.spy(myApi, \"someMethod\");\n      sinon.restore();\n      sinon.spy(myApi, \"someMethod\");\n      // TypeError: Attempted to wrap someMethod which is already wrapped\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore all mocks","suites":["issues","#1775 - sinon.restore"],"updatePoint":{"line":413,"column":32,"index":13079},"line":413,"code":"    it(\"should restore all mocks\", function () {\n      const myApi = {\n        someMethod: function someMethod() {\n          // eslint-disable-next-line no-console\n          console.log(\"test method!\");\n        }\n      };\n      sinon.mock(myApi);\n      sinon.restore();\n      sinon.mock(myApi);\n      // TypeError: Attempted to wrap someMethod which is already wrapped\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore spied fake timers","suites":["issues","#1801 - sinon.restore spied fakeTimers"],"updatePoint":{"line":428,"column":40,"index":13538},"line":428,"code":"    it(\"should restore spied fake timers\", function () {\n      const originalSetTimeout = setTimeout;\n      sinon.useFakeTimers();\n      sinon.spy(globalContext, \"setTimeout\");\n      sinon.restore();\n      assert.same(originalSetTimeout, globalContext.setTimeout, \"fakeTimers restored\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore XMLHttpRequest and ActiveXObject","suites":["issues","#1840 - sinon.restore useFakeXMLHttpRequest"],"updatePoint":{"line":437,"column":55,"index":13927},"line":437,"code":"    it(\"should restore XMLHttpRequest and ActiveXObject\", function () {\n      sinon.useFakeXMLHttpRequest();\n      sinon.restore();\n      assert.same(globalContext.XMLHttpRequest, globalXHR);\n      assert.same(globalContext.ActiveXObject, globalAXO);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not blow up","suites":["issues","#1709 - deepEqual fails on cyclic references"],"updatePoint":{"line":445,"column":26,"index":14236},"line":445,"code":"    it(\"should not blow up\", function () {\n      const spy = sinon.spy();\n      const firstObj = {};\n      firstObj.aKeyName = firstObj;\n      const secondObj = {};\n      secondObj.aKeyName = secondObj;\n      spy(firstObj);\n      sinon.assert.calledWith(spy, secondObj);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"it should not fail with RangeError","suites":["issues","#1796 - cannot stub Array.prototype.sort"],"updatePoint":{"line":456,"column":42,"index":14606},"line":456,"code":"    it(\"it should not fail with RangeError\", function () {\n      const stub = sinon.stub(Array.prototype, \"sort\");\n      refute.exception(function () {\n        [1, 2, 3].sort();\n      });\n      stub.restore();\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should return false when call args don't match","suites":["issues","#1900 - calledWith returns false positive"],"updatePoint":{"line":465,"column":54,"index":14912},"line":465,"code":"    it(\"should return false when call args don't match\", function () {\n      const spy = sinon.spy();\n      const dateOne = new Date(\"2018-07-01\");\n      const dateTwo = new Date(\"2018-07-31\");\n      spy(dateOne);\n      const calledWith = spy.calledWith(dateTwo);\n      assert.same(calledWith, false);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should use constructor name when checking deepEquality","suites":["issues","#1882"],"updatePoint":{"line":475,"column":62,"index":15270},"line":475,"code":"    it(\"should use constructor name when checking deepEquality\", function () {\n      function ClassWithoutProps() {\n        return;\n      }\n      function AnotherClassWithoutProps() {\n        return;\n      }\n      ClassWithoutProps.prototype.constructor = ClassWithoutProps;\n      AnotherClassWithoutProps.prototype.constructor = AnotherClassWithoutProps;\n      const arg1 = new ClassWithoutProps(); //arg1.constructor.name === ClassWithoutProps\n      const arg2 = new AnotherClassWithoutProps(); //arg2.constructor.name === Object\n      const stub = sinon.stub();\n      stub.withArgs(arg1).returns(5);\n      const result = stub(arg2);\n      assert.same(result, undefined); //[ERR_ASSERTION]: 5 === undefined\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not break stub behavior using multiple `match.any`","suites":["issues","#1887"],"updatePoint":{"line":494,"column":65,"index":16031},"line":494,"code":"    it(\"should not break stub behavior using multiple `match.any`\", function () {\n      const stub = sinon.stub();\n      stub.withArgs(sinon.match.any, sinon.match.any, sinon.match(\"a\")).returns(\"a\");\n      stub.withArgs(sinon.match.any, sinon.match.any, sinon.match(\"b\")).returns(\"b\");\n      assert.equals(stub({}, [], \"a\"), \"a\");\n      assert.equals(stub({}, [], \"b\"), \"b\");\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not set `lastArg` to undefined when last argument is `false`","suites":["issues","#1986"],"updatePoint":{"line":503,"column":75,"index":16466},"line":503,"code":"    it(\"should not set `lastArg` to undefined when last argument is `false`\", function () {\n      const fake = sinon.fake();\n      fake(99, false);\n      assert.isFalse(fake.lastArg);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should allow callThrough on a withArgs fake","suites":["issues","#1964"],"updatePoint":{"line":510,"column":51,"index":16674},"line":510,"code":"    it(\"should allow callThrough on a withArgs fake\", function () {\n      let calledThrough = false;\n      const obj = {\n        method: function () {\n          calledThrough = true;\n        }\n      };\n      const baseStub = sinon.stub(obj, \"method\");\n      baseStub.throws(\"Should always hit the withArgs fake\");\n      const argsStub = baseStub.withArgs(\"foo\").callThrough();\n      obj.method(\"foo\");\n      sinon.assert.calledOnce(argsStub);\n      assert.isTrue(calledThrough);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should clear 'called' status on stub","suites":["issues","#2016","called on individual stub method"],"updatePoint":{"line":542,"column":46,"index":17586},"line":542,"code":"      it(\"should clear 'called' status on stub\", function () {\n        sandbox.testMethod();\n        assert.isTrue(sandbox.testMethod.called);\n        sandbox.testMethod.resetHistory();\n        assert.isFalse(sandbox.testMethod.called);\n      });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should clear 'called' status on all stubs","suites":["issues","#2016","called on module"],"updatePoint":{"line":550,"column":51,"index":17893},"line":550,"code":"      it(\"should clear 'called' status on all stubs\", function () {\n        sandbox.testMethod();\n        assert.isTrue(sandbox.testMethod.called);\n        sinon.resetHistory();\n        assert.isFalse(sandbox.testMethod.called);\n      });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should override the method","suites":["issues","#2073 - sinon.createStubInstance()"],"updatePoint":{"line":567,"column":34,"index":18361},"line":567,"code":"    it(\"should override the method\", function () {\n      const thing = sinon.createStubInstance(Foo, {\n        testMethod: sinon.stub().returns(2)\n      });\n      assert.equals(thing.testMethod(), 2);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should support calling without object binding","suites":["issues","#2073 - sinon.createStubInstance()"],"updatePoint":{"line":573,"column":53,"index":18589},"line":573,"code":"    it(\"should support calling without object binding\", function () {\n      const createStubInstance = sinon.createStubInstance;\n      refute.exception(function () {\n        createStubInstance(Foo);\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore the state of lastArg on the stub when resetting the sandbox","suites":["issues","#2065"],"updatePoint":{"line":581,"column":82,"index":18875},"line":581,"code":"    it(\"should restore the state of lastArg on the stub when resetting the sandbox\", function () {\n      const sandbox = sinon.createSandbox();\n      const fake = sandbox.fake();\n      fake(1, 2, 3);\n      assert.equals(fake.lastArg, 3);\n      sandbox.reset();\n      refute.equals(fake.lastArg, 3);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore fakes shadowing prototype props correctly","suites":["issues","#2226 - props on prototype are not restored correctly"],"updatePoint":{"line":601,"column":64,"index":19510},"line":601,"code":"    it(\"should restore fakes shadowing prototype props correctly\", function () {\n      const obj = createObjectWithPropFromPrototype();\n      const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      sinon.replace(obj, \"test\", 2);\n      const replacedPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      sinon.restore();\n      const restoredPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      assert.isUndefined(originalPropertyDescriptor);\n      refute.isUndefined(replacedPropertyDescriptor);\n      assert.isUndefined(restoredPropertyDescriptor);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should restore stubs shadowing prototype props correctly","suites":["issues","#2226 - props on prototype are not restored correctly"],"updatePoint":{"line":612,"column":64,"index":20137},"line":612,"code":"    it(\"should restore stubs shadowing prototype props correctly\", function () {\n      const obj = createObjectWithPropFromPrototype();\n      const originalPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      sinon.stub(obj, \"test\").value(2);\n      const replacedPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      sinon.restore();\n      const restoredPropertyDescriptor = Object.getOwnPropertyDescriptor(obj, \"test\");\n      assert.isUndefined(originalPropertyDescriptor);\n      refute.isUndefined(replacedPropertyDescriptor);\n      assert.isUndefined(restoredPropertyDescriptor);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should be able call through to the underlying function on the prototype","suites":["issues","#2501 - createStubInstance stubs are not able to call through to the underlying function on the prototype"],"updatePoint":{"line":625,"column":79,"index":20922},"line":625,"code":"    it(\"should be able call through to the underlying function on the prototype\", function () {\n      class Foo {\n        testMethod() {\n          this.wasCalled = true;\n          return 42;\n        }\n      }\n      const fooStubInstance = this.sandbox.createStubInstance(Foo);\n      assert.isUndefined(fooStubInstance.wasCalled);\n      fooStubInstance.testMethod.callThrough();\n      fooStubInstance.testMethod();\n      assert.isTrue(fooStubInstance.wasCalled);\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should ensure copied object descriptors are always configurable for spies","suites":["issues","#2491 - unable to restore spies on an instance where the prototype has an unconfigurable property descriptor"],"updatePoint":{"line":653,"column":81,"index":21896},"line":653,"code":"    it(\"should ensure copied object descriptors are always configurable for spies\", function () {\n      const instance = createInstanceFromClassWithReadOnlyPropertyDescriptor();\n      this.sandbox.spy(instance, \"aMethod\");\n      refute.exception(() => {\n        this.sandbox.restore(); // #2491: this throws TypeError: Cannot assign to read only property 'myMethod' of object '#<BaseClass>'\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not throw if the unconfigurable object descriptor to be used for a Stub is on the prototype","suites":["issues","#2491 - unable to restore spies on an instance where the prototype has an unconfigurable property descriptor"],"updatePoint":{"line":661,"column":106,"index":22331},"line":661,"code":"    it(\"should not throw if the unconfigurable object descriptor to be used for a Stub is on the prototype\", function () {\n      const instance = createInstanceFromClassWithReadOnlyPropertyDescriptor();\n\n      // per #2491 this throws 'TypeError: Descriptor for property aMethod is non-configurable and non-writable'\n      // that makes sense for descriptors taken from the object, but not its prototype, as we are free to change\n      // the latter when setting it\n      refute.exception(() => {\n        this.sandbox.stub(instance, \"aMethod\").returns(\"a stub\");\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should not throw if the unconfigurable object descriptor to be used for a Mock is on the prototype","suites":["issues","#2491 - unable to restore spies on an instance where the prototype has an unconfigurable property descriptor"],"updatePoint":{"line":671,"column":106,"index":22912},"line":671,"code":"    it(\"should not throw if the unconfigurable object descriptor to be used for a Mock is on the prototype\", function () {\n      const instance = createInstanceFromClassWithReadOnlyPropertyDescriptor();\n      const mock = this.sandbox.mock(instance);\n\n      // per #2491 this throws 'TypeError: Attempted to wrap undefined property myMethod as function\n      refute.exception(() => {\n        mock.expects(\"aMethod\").once();\n      });\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"should be able to assign and restore unconfigurable descriptors that are writable","suites":["issues","#2514 (regression from fixing #2491) - writable object descriptors that are unconfigurable should be assignable"],"updatePoint":{"line":693,"column":89,"index":23788},"line":693,"code":"    it(\"should be able to assign and restore unconfigurable descriptors that are writable\", function () {\n      const o = createInstanceWithWritableUconfigurablePropertyDescriptor();\n      refute.exception(() => this.sandbox.stub(o, \"aMethod\").returns(\"stubbed\"));\n      assert.equals(\"stubbed\", o.aMethod());\n      this.sandbox.restore();\n    });","file":"issues/issues-test.js","skipped":false,"dir":"test"},{"name":"creates anonymous mock functions","suites":["sinonMock"],"updatePoint":{"line":12,"column":38,"index":462},"line":12,"code":"  it(\"creates anonymous mock functions\", function () {\n    const expectation = sinonMock();\n    assert.equals(expectation.method, \"Anonymous mock\");\n  });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"creates named anonymous mock functions","suites":["sinonMock"],"updatePoint":{"line":16,"column":44,"index":623},"line":16,"code":"  it(\"creates named anonymous mock functions\", function () {\n    const expectation = sinonMock(\"functionName\");\n    assert.equals(expectation.method, \"functionName\");\n  });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns function with expects method","suites":["sinonMock",".create"],"updatePoint":{"line":21,"column":44,"index":832},"line":21,"code":"    it(\"returns function with expects method\", function () {\n      const mock = sinonMock.create({});\n      assert.isFunction(mock.expects);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without object","suites":["sinonMock",".create"],"updatePoint":{"line":25,"column":29,"index":966},"line":25,"code":"    it(\"throws without object\", function () {\n      assert.exception(function () {\n        sinonMock.create();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without method","suites":["sinonMock",".expects"],"updatePoint":{"line":41,"column":29,"index":1321},"line":41,"code":"    it(\"throws without method\", function () {\n      const mock = this.mock;\n      assert.exception(function () {\n        mock.expects();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation","suites":["sinonMock",".expects"],"updatePoint":{"line":49,"column":27,"index":1511},"line":49,"code":"    it(\"returns expectation\", function () {\n      const result = this.mock.expects(\"someMethod\");\n      assert.isFunction(result);\n      assert.equals(result.method, \"someMethod\");\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws if expecting a non-existent method","suites":["sinonMock",".expects"],"updatePoint":{"line":54,"column":49,"index":1722},"line":54,"code":"    it(\"throws if expecting a non-existent method\", function () {\n      const mock = this.mock;\n      assert.exception(function () {\n        mock.expects(\"someMethod2\");\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"creates unnamed expectation","suites":["sinonMock",".expectation"],"updatePoint":{"line":66,"column":35,"index":2073},"line":66,"code":"    it(\"creates unnamed expectation\", function () {\n      const anonMock = sinonExpectation.create();\n      anonMock.never();\n      assert(anonMock.verify());\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"uses 'anonymous mock expectation' for unnamed expectation","suites":["sinonMock",".expectation"],"updatePoint":{"line":71,"column":65,"index":2270},"line":71,"code":"    it(\"uses 'anonymous mock expectation' for unnamed expectation\", function () {\n      const anonMock = sinonExpectation.create();\n      anonMock.once();\n      assert.exception(function () {\n        anonMock.verify();\n      }, {\n        message: \"anonymous mock expectation\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"call expectation","suites":["sinonMock",".expectation"],"updatePoint":{"line":80,"column":24,"index":2523},"line":80,"code":"    it(\"call expectation\", function () {\n      this.expectation();\n      assert.isFunction(this.expectation.invoke);\n      assert(this.expectation.called);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is invokable","suites":["sinonMock",".expectation"],"updatePoint":{"line":85,"column":20,"index":2683},"line":85,"code":"    it(\"is invokable\", function () {\n      const expectation = this.expectation;\n      refute.exception(function () {\n        expectation();\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns configured return value","suites":["sinonMock",".expectation",".returns"],"updatePoint":{"line":92,"column":41,"index":2902},"line":92,"code":"      it(\"returns configured return value\", function () {\n        const object = {};\n        this.expectation.returns(object);\n        assert.same(this.expectation(), object);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is called with correct this value","suites":["sinonMock",".expectation","call"],"updatePoint":{"line":99,"column":43,"index":3133},"line":99,"code":"      it(\"is called with correct this value\", function () {\n        const object = {\n          method: this.expectation\n        };\n        object.method();\n        assert(this.expectation.calledOn(object));\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"onlys be invokable once by default","suites":["sinonMock",".expectation",".callCount"],"updatePoint":{"line":108,"column":44,"index":3400},"line":108,"code":"      it(\"onlys be invokable once by default\", function () {\n        const expectation = this.expectation;\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throw readable error","suites":["sinonMock",".expectation",".callCount"],"updatePoint":{"line":117,"column":30,"index":3650},"line":117,"code":"      it(\"throw readable error\", function () {\n        const expectation = this.expectation;\n        expectation();\n        assert.exception(expectation, {\n          message: \"myMeth already called once\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is not callable","suites":["sinonMock",".expectation",".callCountNever"],"updatePoint":{"line":126,"column":25,"index":3925},"line":126,"code":"      it(\"is not callable\", function () {\n        const expectation = this.expectation;\n        expectation.never();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".callCountNever"],"updatePoint":{"line":135,"column":42,"index":4193},"line":135,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.never(), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows one call","suites":["sinonMock",".expectation",".callCountOnce"],"updatePoint":{"line":140,"column":25,"index":4363},"line":140,"code":"      it(\"allows one call\", function () {\n        const expectation = this.expectation;\n        expectation.once();\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".callCountOnce"],"updatePoint":{"line":150,"column":42,"index":4653},"line":150,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.once(), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows two calls","suites":["sinonMock",".expectation",".callCountTwice"],"updatePoint":{"line":155,"column":26,"index":4824},"line":155,"code":"      it(\"allows two calls\", function () {\n        const expectation = this.expectation;\n        expectation.twice();\n        expectation();\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".callCountTwice"],"updatePoint":{"line":166,"column":42,"index":5138},"line":166,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.twice(), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows three calls","suites":["sinonMock",".expectation",".callCountThrice"],"updatePoint":{"line":171,"column":28,"index":5313},"line":171,"code":"      it(\"allows three calls\", function () {\n        const expectation = this.expectation;\n        expectation.thrice();\n        expectation();\n        expectation();\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".callCountThrice"],"updatePoint":{"line":183,"column":42,"index":5651},"line":183,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.thrice(), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows specified number of calls","suites":["sinonMock",".expectation",".callCountExactly"],"updatePoint":{"line":188,"column":42,"index":5842},"line":188,"code":"      it(\"allows specified number of calls\", function () {\n        const expectation = this.expectation;\n        expectation.exactly(2);\n        expectation();\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".callCountExactly"],"updatePoint":{"line":199,"column":42,"index":6159},"line":199,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.exactly(2), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without argument","suites":["sinonMock",".expectation",".callCountExactly"],"updatePoint":{"line":202,"column":33,"index":6287},"line":202,"code":"      it(\"throws without argument\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.exactly();\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without number","suites":["sinonMock",".expectation",".callCountExactly"],"updatePoint":{"line":210,"column":31,"index":6516},"line":210,"code":"      it(\"throws without number\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.exactly(\"12\");\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws with Symbol","suites":["sinonMock",".expectation",".callCountExactly"],"updatePoint":{"line":218,"column":28,"index":6746},"line":218,"code":"      it(\"throws with Symbol\", function () {\n        if (typeof Symbol === \"function\") {\n          const expectation = this.expectation;\n          assert.exception(function () {\n            expectation.exactly(Symbol(\"apple pie\"));\n          }, function (err) {\n            return err.message === \"'Symbol(apple pie)' is not a number\";\n          });\n        }\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without argument","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":230,"column":33,"index":7168},"line":230,"code":"      it(\"throws without argument\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.atLeast();\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without number","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":238,"column":31,"index":7397},"line":238,"code":"      it(\"throws without number\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.atLeast({});\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws with Symbol","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":246,"column":28,"index":7625},"line":246,"code":"      it(\"throws with Symbol\", function () {\n        if (typeof Symbol === \"function\") {\n          const expectation = this.expectation;\n          assert.exception(function () {\n            expectation.atLeast(Symbol(\"apple pie\"));\n          }, function (err) {\n            return err.message === \"'Symbol(apple pie)' is not number\";\n          });\n        }\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":256,"column":42,"index":8007},"line":256,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.atLeast(2), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows any number of calls","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":259,"column":36,"index":8138},"line":259,"code":"      it(\"allows any number of calls\", function () {\n        const expectation = this.expectation;\n        expectation.atLeast(2);\n        expectation();\n        expectation();\n        refute.exception(function () {\n          expectation();\n          expectation();\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not be met with too few calls","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":269,"column":46,"index":8436},"line":269,"code":"      it(\"should not be met with too few calls\", function () {\n        this.expectation.atLeast(2);\n        this.expectation();\n        assert.isFalse(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with exact calls","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":274,"column":33,"index":8609},"line":274,"code":"      it(\"is met with exact calls\", function () {\n        this.expectation.atLeast(2);\n        this.expectation();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with excessive calls","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":280,"column":37,"index":8806},"line":280,"code":"      it(\"is met with excessive calls\", function () {\n        this.expectation.atLeast(2);\n        this.expectation();\n        this.expectation();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not throw when exceeding at least expectation","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":287,"column":62,"index":9056},"line":287,"code":"      it(\"should not throw when exceeding at least expectation\", function () {\n        const obj = {\n          foobar: function () {\n            return;\n          }\n        };\n        const mock = sinonMock(obj);\n        mock.expects(\"foobar\").atLeast(1);\n        obj.foobar();\n        refute.exception(function () {\n          obj.foobar();\n          mock.verify();\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not throw when exceeding at least expectation and withargs","suites":["sinonMock",".expectation",".atLeast"],"updatePoint":{"line":301,"column":75,"index":9457},"line":301,"code":"      it(\"should not throw when exceeding at least expectation and withargs\", function () {\n        const obj = {\n          foobar: function () {\n            return;\n          }\n        };\n        const mock = sinonMock(obj);\n        mock.expects(\"foobar\").withArgs(\"arg1\");\n        mock.expects(\"foobar\").atLeast(1).withArgs(\"arg2\");\n        obj.foobar(\"arg1\");\n        obj.foobar(\"arg2\");\n        obj.foobar(\"arg2\");\n        assert(mock.verify());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without argument","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":317,"column":33,"index":9921},"line":317,"code":"      it(\"throws without argument\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.atMost();\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws without number","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":325,"column":31,"index":10149},"line":325,"code":"      it(\"throws without number\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.atMost({});\n        }, {\n          name: \"TypeError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws with Symbol","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":333,"column":28,"index":10376},"line":333,"code":"      it(\"throws with Symbol\", function () {\n        if (typeof Symbol === \"function\") {\n          const expectation = this.expectation;\n          assert.exception(function () {\n            expectation.atMost(Symbol(\"apple pie\"));\n          }, function (err) {\n            return err.message === \"'Symbol(apple pie)' is not number\";\n          });\n        }\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":343,"column":42,"index":10757},"line":343,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.atMost(2), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows fewer calls","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":346,"column":28,"index":10879},"line":346,"code":"      it(\"allows fewer calls\", function () {\n        const expectation = this.expectation;\n        expectation.atMost(2);\n        refute.exception(function () {\n          expectation();\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with fewer calls","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":353,"column":33,"index":11092},"line":353,"code":"      it(\"is met with fewer calls\", function () {\n        this.expectation.atMost(2);\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with exact calls","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":358,"column":33,"index":11256},"line":358,"code":"      it(\"is met with exact calls\", function () {\n        this.expectation.atMost(2);\n        this.expectation();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not be met with excessive calls","suites":["sinonMock",".expectation",".atMost"],"updatePoint":{"line":364,"column":48,"index":11463},"line":364,"code":"      it(\"should not be met with excessive calls\", function () {\n        const expectation = this.expectation;\n        this.expectation.atMost(2);\n        this.expectation();\n        this.expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n        assert.isFalse(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not be met with too few calls","suites":["sinonMock",".expectation",".atMostAndAtLeast"],"updatePoint":{"line":382,"column":46,"index":12016},"line":382,"code":"      it(\"should not be met with too few calls\", function () {\n        this.expectation();\n        assert.isFalse(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with minimum calls","suites":["sinonMock",".expectation",".atMostAndAtLeast"],"updatePoint":{"line":386,"column":35,"index":12154},"line":386,"code":"      it(\"is met with minimum calls\", function () {\n        this.expectation();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met with maximum calls","suites":["sinonMock",".expectation",".atMostAndAtLeast"],"updatePoint":{"line":391,"column":35,"index":12312},"line":391,"code":"      it(\"is met with maximum calls\", function () {\n        this.expectation();\n        this.expectation();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws with excessive calls","suites":["sinonMock",".expectation",".atMostAndAtLeast"],"updatePoint":{"line":397,"column":37,"index":12500},"line":397,"code":"      it(\"throws with excessive calls\", function () {\n        const expectation = this.expectation;\n        expectation();\n        expectation();\n        expectation();\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not be met when not called enough times","suites":["sinonMock",".expectation",".met"],"updatePoint":{"line":410,"column":56,"index":12865},"line":410,"code":"      it(\"should not be met when not called enough times\", function () {\n        assert.isFalse(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"is met when called enough times","suites":["sinonMock",".expectation",".met"],"updatePoint":{"line":413,"column":41,"index":12981},"line":413,"code":"      it(\"is met when called enough times\", function () {\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not be met when called too many times","suites":["sinonMock",".expectation",".met"],"updatePoint":{"line":417,"column":54,"index":13130},"line":417,"code":"      it(\"should not be met when called too many times\", function () {\n        this.expectation();\n        assert.exception(this.expectation);\n        assert.isFalse(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":435,"column":42,"index":13682},"line":435,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.withArgs(1), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"accepts call with expected args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":438,"column":41,"index":13819},"line":438,"code":"      it(\"accepts call with expected args\", function () {\n        this.expectation.withArgs(1, 2, 3);\n        this.expectation(1, 2, 3);\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called without args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":443,"column":41,"index":14006},"line":443,"code":"      it(\"throws when called without args\", function () {\n        const expectation = this.expectation;\n        expectation.withArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called with too few args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":452,"column":46,"index":14288},"line":452,"code":"      it(\"throws when called with too few args\", function () {\n        const expectation = this.expectation;\n        expectation.withArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation(1, 2);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called with wrong args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":461,"column":44,"index":14572},"line":461,"code":"      it(\"throws when called with wrong args\", function () {\n        const expectation = this.expectation;\n        expectation.withArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation(2, 2, 3);\n        }, expectedException(\"ExpectationError\"));\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows excessive args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":468,"column":31,"index":14837},"line":468,"code":"      it(\"allows excessive args\", function () {\n        const expectation = this.expectation;\n        expectation.withArgs(1, 2, 3);\n        refute.exception(function () {\n          expectation(1, 2, 3, 4);\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"calls accept with no args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":475,"column":35,"index":15070},"line":475,"code":"      it(\"calls accept with no args\", function () {\n        this.expectation.withArgs();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows no args called with excessive args","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":480,"column":51,"index":15253},"line":480,"code":"      it(\"allows no args called with excessive args\", function () {\n        const expectation = this.expectation;\n        expectation.withArgs();\n        refute.exception(function () {\n          expectation(1, 2, 3);\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"works with sinon matchers","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":487,"column":35,"index":15476},"line":487,"code":"      it(\"works with sinon matchers\", function () {\n        this.expectation.withArgs(match.number, match.string, match.func);\n        this.expectation(1, \"test\", function () {\n          return;\n        });\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when sinon matchers fail","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":494,"column":41,"index":15739},"line":494,"code":"      it(\"throws when sinon matchers fail\", function () {\n        const expectation = this.expectation;\n        this.expectation.withArgs(match.number, match.string, match.func);\n        assert.exception(function () {\n          expectation(1, 2, 3);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not throw when expectation withArgs using matcher","suites":["sinonMock",".expectation",".withArgs"],"updatePoint":{"line":503,"column":66,"index":16084},"line":503,"code":"      it(\"should not throw when expectation withArgs using matcher\", function () {\n        const obj = {\n          foobar: function () {\n            return;\n          }\n        };\n        const mock = sinonMock(obj);\n        mock.expects(\"foobar\").withArgs(match.string);\n        refute.exception(function () {\n          obj.foobar(\"arg1\");\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":517,"column":42,"index":16476},"line":517,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.withExactArgs(1), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"accepts call with expected args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":520,"column":41,"index":16618},"line":520,"code":"      it(\"accepts call with expected args\", function () {\n        this.expectation.withExactArgs(1, 2, 3);\n        this.expectation(1, 2, 3);\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called without args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":525,"column":41,"index":16810},"line":525,"code":"      it(\"throws when called without args\", function () {\n        const expectation = this.expectation;\n        expectation.withExactArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called with too few args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":534,"column":46,"index":17097},"line":534,"code":"      it(\"throws when called with too few args\", function () {\n        const expectation = this.expectation;\n        expectation.withExactArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation(1, 2);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws when called with wrong args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":543,"column":44,"index":17386},"line":543,"code":"      it(\"throws when called with wrong args\", function () {\n        const expectation = this.expectation;\n        expectation.withExactArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation(2, 2, 3);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"should not allow excessive args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":552,"column":41,"index":17675},"line":552,"code":"      it(\"should not allow excessive args\", function () {\n        const expectation = this.expectation;\n        expectation.withExactArgs(1, 2, 3);\n        assert.exception(function () {\n          expectation(1, 2, 3, 4);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"accepts call with no expected args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":561,"column":44,"index":17970},"line":561,"code":"      it(\"accepts call with no expected args\", function () {\n        this.expectation.withExactArgs();\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"does not allow excessive args with no expected args","suites":["sinonMock",".expectation",".withExactArgs"],"updatePoint":{"line":566,"column":61,"index":18168},"line":566,"code":"      it(\"does not allow excessive args with no expected args\", function () {\n        const expectation = this.expectation;\n        expectation.withExactArgs();\n        assert.exception(function () {\n          expectation(1, 2, 3);\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns expectation for chaining","suites":["sinonMock",".expectation",".on"],"updatePoint":{"line":577,"column":42,"index":18493},"line":577,"code":"      it(\"returns expectation for chaining\", function () {\n        assert.same(this.expectation.on({}), this.expectation);\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows calls on object","suites":["sinonMock",".expectation",".on"],"updatePoint":{"line":580,"column":32,"index":18616},"line":580,"code":"      it(\"allows calls on object\", function () {\n        this.expectation.on(this);\n        this.expectation();\n        assert(this.expectation.met());\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws if called on wrong object","suites":["sinonMock",".expectation",".on"],"updatePoint":{"line":585,"column":42,"index":18788},"line":585,"code":"      it(\"throws if called on wrong object\", function () {\n        const expectation = this.expectation;\n        expectation.on({});\n        assert.exception(function () {\n          expectation();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws if calls on wrong Symbol","suites":["sinonMock",".expectation",".on"],"updatePoint":{"line":594,"column":41,"index":19054},"line":594,"code":"      it(\"throws if calls on wrong Symbol\", function () {\n        if (typeof Symbol === \"function\") {\n          const expectation = sinonExpectation.create(\"method\");\n          expectation.on(Symbol(\"apple pie\"));\n          assert.exception(function () {\n            expectation.call(Symbol(\"pear pie\"));\n          }, function (err) {\n            return err.message === \"method called with Symbol(pear pie) as thisValue, expected Symbol(apple pie)\";\n          });\n        }\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"pass if met","suites":["sinonMock",".expectation",".verify"],"updatePoint":{"line":607,"column":21,"index":19564},"line":607,"code":"      it(\"pass if met\", function () {\n        sinonStub(sinonExpectation, \"pass\");\n        const expectation = this.expectation;\n        expectation();\n        expectation.verify();\n        assert.equals(sinonExpectation.pass.callCount, 1);\n        sinonExpectation.pass.restore();\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws if not called enough times","suites":["sinonMock",".expectation",".verify"],"updatePoint":{"line":615,"column":43,"index":19878},"line":615,"code":"      it(\"throws if not called enough times\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.verify();\n        }, {\n          name: \"ExpectationError\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws readable error","suites":["sinonMock",".expectation",".verify"],"updatePoint":{"line":623,"column":31,"index":20113},"line":623,"code":"      it(\"throws readable error\", function () {\n        const expectation = this.expectation;\n        assert.exception(function () {\n          expectation.verify();\n        }, {\n          message: \"Expected myMeth('[...]') once (never called)\"\n        });\n      });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"restores mocks","suites":["sinonMock",".verify"],"updatePoint":{"line":643,"column":22,"index":20624},"line":643,"code":"    it(\"restores mocks\", function () {\n      this.object.method();\n      this.object.method.call(this.thisValue);\n      this.mock.verify();\n      assert.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"passes verified mocks","suites":["sinonMock",".verify"],"updatePoint":{"line":649,"column":29,"index":20831},"line":649,"code":"    it(\"passes verified mocks\", function () {\n      sinonStub(sinonExpectation, \"pass\");\n      this.mock.expects(\"method\").once();\n      this.object.method();\n      this.mock.verify();\n      assert.equals(sinonExpectation.pass.callCount, 1);\n      sinonExpectation.pass.restore();\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"restores if not met","suites":["sinonMock",".verify"],"updatePoint":{"line":657,"column":27,"index":21118},"line":657,"code":"    it(\"restores if not met\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\");\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        name: \"ExpectationError\"\n      });\n      assert.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes all calls in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":667,"column":43,"index":21412},"line":667,"code":"    it(\"includes all calls in error message\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").thrice();\n      mock.expects(\"method\").once().withArgs(42);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method('[...]') thrice (never called)\\n\" + \"Expected method(42, '[...]') once (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes exact expected arguments in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":677,"column":58,"index":21816},"line":677,"code":"    it(\"includes exact expected arguments in error message\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").once().withExactArgs(42);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method(42) once (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes received call count in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":686,"column":53,"index":22119},"line":686,"code":"    it(\"includes received call count in error message\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").thrice().withExactArgs(42);\n      this.object.method(42);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method(42) thrice (called once)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes unexpected calls in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":696,"column":50,"index":22452},"line":696,"code":"    it(\"includes unexpected calls in error message\", function () {\n      const mock = this.mock;\n      const object = this.object;\n      mock.expects(\"method\").thrice().withExactArgs(42);\n      assert.exception(function () {\n        object.method();\n      }, {\n        message: \"Unexpected call: method()\\n    Expected method(42) thrice (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes met expectations in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":706,"column":50,"index":22823},"line":706,"code":"    it(\"includes met expectations in error message\", function () {\n      const mock = this.mock;\n      const object = this.object;\n      mock.expects(\"method\").once().withArgs(1);\n      mock.expects(\"method\").thrice().withExactArgs(42);\n      object.method(1);\n      assert.exception(function () {\n        object.method();\n      }, {\n        message: \"Unexpected call: method()\\n\" + \"    Expectation met: method(1, '[...]') once\\n\" + \"    Expected method(42) thrice (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"includes met expectations in error message from verify","suites":["sinonMock",".verify"],"updatePoint":{"line":718,"column":62,"index":23335},"line":718,"code":"    it(\"includes met expectations in error message from verify\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").once().withArgs(1);\n      mock.expects(\"method\").thrice().withExactArgs(42);\n      this.object.method(1);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method(42) thrice (never called)\\nExpectation met: method(1, '[...]') once\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reports min calls in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":729,"column":42,"index":23751},"line":729,"code":"    it(\"reports min calls in error message\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").atLeast(1);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method('[...]') at least once (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reports max calls in error message","suites":["sinonMock",".verify"],"updatePoint":{"line":738,"column":42,"index":24043},"line":738,"code":"    it(\"reports max calls in error message\", function () {\n      const mock = this.mock;\n      const object = this.object;\n      mock.expects(\"method\").atMost(2);\n      assert.exception(function () {\n        object.method();\n        object.method();\n        object.method();\n      }, {\n        message: \"Unexpected call: method()\\n    Expectation met: method('[...]') at most twice\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reports min calls in met expectation","suites":["sinonMock",".verify"],"updatePoint":{"line":750,"column":44,"index":24446},"line":750,"code":"    it(\"reports min calls in met expectation\", function () {\n      const mock = this.mock;\n      const object = this.object;\n      mock.expects(\"method\").atLeast(1);\n      mock.expects(\"method\").withArgs(2).once();\n      assert.exception(function () {\n        object.method();\n        object.method(2);\n        object.method(2);\n      }, {\n        message: \"Unexpected call: method(2)\\n\" + \"    Expectation met: method('[...]') at least once\\n\" + \"    Expectation met: method(2, '[...]') once\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reports max and min calls in error messages","suites":["sinonMock",".verify"],"updatePoint":{"line":763,"column":51,"index":24965},"line":763,"code":"    it(\"reports max and min calls in error messages\", function () {\n      const mock = this.mock;\n      mock.expects(\"method\").atLeast(1).atMost(2);\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        message: \"Expected method('[...]') at least once and at most twice (never called)\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"fails even if the original expectation exception was caught","suites":["sinonMock",".verify"],"updatePoint":{"line":772,"column":67,"index":25310},"line":772,"code":"    it(\"fails even if the original expectation exception was caught\", function () {\n      const mock = this.mock;\n      const object = this.object;\n      mock.expects(\"method\").once();\n      object.method();\n      assert.exception(function () {\n        object.method();\n      });\n      assert.exception(function () {\n        mock.verify();\n      }, {\n        name: \"ExpectationError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"does not call pass if no expectations","suites":["sinonMock",".verify"],"updatePoint":{"line":786,"column":45,"index":25690},"line":786,"code":"    it(\"does not call pass if no expectations\", function () {\n      const pass = sinonStub(sinonExpectation, \"pass\");\n      const mock = this.mock;\n      mock.expects(\"method\").never();\n      delete mock.expectations;\n      mock.verify();\n      refute(pass.called, \"expectation.pass should not be called\");\n      pass.restore();\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"must be a function","suites":["sinonMock",".usingPromise"],"updatePoint":{"line":806,"column":26,"index":26260},"line":806,"code":"    it(\"must be a function\", function () {\n      assert.isFunction(this.mock.usingPromise);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"must return the mock","suites":["sinonMock",".usingPromise"],"updatePoint":{"line":809,"column":28,"index":26362},"line":809,"code":"    it(\"must return the mock\", function () {\n      const mockPromise = {};\n      const actual = this.mock.usingPromise(mockPromise);\n      assert.same(actual, this.mock);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"must set all expectations with mockPromise","suites":["sinonMock",".usingPromise"],"updatePoint":{"line":814,"column":50,"index":26563},"line":814,"code":"    it(\"must set all expectations with mockPromise\", function () {\n      if (typeof Promise === \"undefined\") {\n        return this.skip();\n      }\n      const resolveValue = {};\n      const mockPromise = {\n        resolve: sinonStub().resolves(resolveValue)\n      };\n      this.mock.usingPromise(mockPromise);\n      this.mock.expects(\"method\").resolves({});\n      return this.object.method().then(function (action) {\n        assert.same(resolveValue, action);\n        assert(mockPromise.resolve.calledOnce);\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"mocks object method","suites":["sinonMock","mock object"],"updatePoint":{"line":840,"column":27,"index":27316},"line":840,"code":"    it(\"mocks object method\", function () {\n      this.mock.expects(\"method\");\n      assert.isFunction(this.object.method);\n      refute.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reverts mocked method","suites":["sinonMock","mock object"],"updatePoint":{"line":845,"column":29,"index":27502},"line":845,"code":"    it(\"reverts mocked method\", function () {\n      this.mock.expects(\"method\");\n      this.object.method.restore();\n      assert.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reverts expectation","suites":["sinonMock","mock object"],"updatePoint":{"line":850,"column":27,"index":27677},"line":850,"code":"    it(\"reverts expectation\", function () {\n      this.mock.expects(\"method\");\n      this.object.method.restore();\n      assert.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"reverts mock","suites":["sinonMock","mock object"],"updatePoint":{"line":855,"column":20,"index":27845},"line":855,"code":"    it(\"reverts mock\", function () {\n      this.mock.expects(\"method\");\n      this.mock.restore();\n      assert.same(this.object.method, this.method);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"verifies mock","suites":["sinonMock","mock object"],"updatePoint":{"line":860,"column":21,"index":28005},"line":860,"code":"    it(\"verifies mock\", function () {\n      this.mock.expects(\"method\");\n      this.object.method();\n      const mock = this.mock;\n      refute.exception(function () {\n        assert(mock.verify());\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"verifies mock with unmet expectations","suites":["sinonMock","mock object"],"updatePoint":{"line":868,"column":45,"index":28246},"line":868,"code":"    it(\"verifies mock with unmet expectations\", function () {\n      this.mock.expects(\"method\");\n      const mock = this.mock;\n      assert.exception(function () {\n        assert(mock.verify());\n      }, {\n        name: \"ExpectationError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"queues expectations","suites":["sinonMock","mock method multiple times"],"updatePoint":{"line":891,"column":27,"index":28866},"line":891,"code":"    it(\"queues expectations\", function () {\n      const object = this.object;\n      refute.exception(function () {\n        object.method();\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"starts on next expectation when first is met","suites":["sinonMock","mock method multiple times"],"updatePoint":{"line":897,"column":52,"index":29049},"line":897,"code":"    it(\"starts on next expectation when first is met\", function () {\n      const object = this.object;\n      object.method();\n      assert.exception(function () {\n        object.method();\n      }, {\n        name: \"ExpectationError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"fails on last expectation","suites":["sinonMock","mock method multiple times"],"updatePoint":{"line":906,"column":33,"index":29280},"line":906,"code":"    it(\"fails on last expectation\", function () {\n      const object = this.object;\n      object.method();\n      object.method.call(this.thisValue);\n      assert.exception(function () {\n        object.method();\n      }, {\n        name: \"ExpectationError\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"allows mock calls in any order","suites":["sinonMock","mock method multiple times"],"updatePoint":{"line":916,"column":38,"index":29558},"line":916,"code":"    it(\"allows mock calls in any order\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      const mock = sinonMock(object);\n      mock.expects(\"method\").once().withArgs(42);\n      mock.expects(\"method\").twice().withArgs(\"Yeah\");\n      refute.exception(function () {\n        object.method(\"Yeah\");\n      });\n      refute.exception(function () {\n        object.method(42);\n      });\n      assert.exception(function () {\n        object.method(1);\n      });\n      refute.exception(function () {\n        object.method(\"Yeah\");\n      });\n      assert.exception(function () {\n        object.method(42);\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns mock method","suites":["sinonMock","mock function"],"updatePoint":{"line":943,"column":27,"index":30268},"line":943,"code":"    it(\"returns mock method\", function () {\n      const mock = sinonMock();\n      assert.isFunction(mock);\n      assert.isFunction(mock.atLeast);\n      assert.isFunction(mock.verify);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns mock object","suites":["sinonMock","mock function"],"updatePoint":{"line":949,"column":27,"index":30460},"line":949,"code":"    it(\"returns mock object\", function () {\n      const mock = sinonMock({});\n      assert.isObject(mock);\n      assert.isFunction(mock.expects);\n      assert.isFunction(mock.verify);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["sinonMock",".yields"],"updatePoint":{"line":957,"column":41,"index":30708},"line":957,"code":"    it(\"invokes only argument as callback\", function () {\n      const mock = sinonMock().yields();\n      const spy = sinonSpy();\n      mock(spy);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["sinonMock",".yields"],"updatePoint":{"line":964,"column":60,"index":30955},"line":964,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const mock = sinonMock().yields();\n      assert.exception(mock, {\n        message: \"stub expected to yield, but no callback was passed.\"\n      });\n    });","file":"mock-test.js","skipped":false,"dir":"test"},{"name":"returns an unresolved promise","suites":["promise","with default executor"],"updatePoint":{"line":28,"column":37,"index":598},"line":28,"code":"    it(\"returns an unresolved promise\", async function () {\n      const promise = sinon.promise();\n      const {\n        status,\n        value\n      } = await getPromiseStatus(promise);\n      assert.equals(promise.toString(), \"[object Promise]\");\n      assert.equals(status, \"pending\");\n      assert.isNull(value);\n      assert.equals(promise.status, status);\n      assert.isUndefined(promise.resolvedValue);\n      assert.isUndefined(promise.rejectedValue);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"resolves the promise","suites":["promise","with default executor"],"updatePoint":{"line":41,"column":28,"index":1055},"line":41,"code":"    it(\"resolves the promise\", async function () {\n      const result = Symbol(\"promise result\");\n      const promise = sinon.promise();\n      const returnValue = promise.resolve(result);\n      const {\n        status,\n        value\n      } = await getPromiseStatus(promise);\n      assert.equals(status, \"resolved\");\n      assert.same(value, result);\n      assert.equals(promise.status, status);\n      assert.same(promise.resolvedValue, result);\n      assert.isUndefined(promise.rejectedValue);\n      assert.same(returnValue, promise);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"rejects the promise","suites":["promise","with default executor"],"updatePoint":{"line":56,"column":27,"index":1597},"line":56,"code":"    it(\"rejects the promise\", async function () {\n      const error = new Error(\"promise error\");\n      const promise = sinon.promise();\n      const returnValue = promise.reject(error);\n      const {\n        status,\n        value\n      } = await getPromiseStatus(promise);\n      assert.equals(status, \"rejected\");\n      assert.same(value, error);\n      assert.equals(promise.status, status);\n      assert.isUndefined(promise.resolvedValue);\n      assert.same(promise.rejectedValue, error);\n      refute.same(returnValue, promise);\n      assert.equals(returnValue.toString(), \"[object Promise]\");\n      await assert.resolves(returnValue, undefined);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"fails to resolve again","suites":["promise","with default executor","with resolved promise"],"updatePoint":{"line":79,"column":32,"index":2433},"line":79,"code":"      it(\"fails to resolve again\", function () {\n        assert.exception(() => {\n          promise.resolve(2);\n        }, {\n          name: \"Error\",\n          message: \"Promise already resolved\"\n        });\n      });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"fails to reject","suites":["promise","with default executor","with resolved promise"],"updatePoint":{"line":87,"column":25,"index":2644},"line":87,"code":"      it(\"fails to reject\", function () {\n        assert.exception(() => {\n          promise.reject(2);\n        }, {\n          name: \"Error\",\n          message: \"Promise already resolved\"\n        });\n      });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"fails to reject again","suites":["promise","with default executor","with rejected promise"],"updatePoint":{"line":102,"column":31,"index":3041},"line":102,"code":"      it(\"fails to reject again\", function () {\n        assert.exception(() => {\n          promise.reject(2);\n        }, {\n          name: \"Error\",\n          message: \"Promise already rejected\"\n        });\n      });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"fails to resolve","suites":["promise","with default executor","with rejected promise"],"updatePoint":{"line":110,"column":26,"index":3252},"line":110,"code":"      it(\"fails to resolve\", function () {\n        assert.exception(() => {\n          promise.resolve(2);\n        }, {\n          name: \"Error\",\n          message: \"Promise already rejected\"\n        });\n      });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"accepts a fake as the custom executor","suites":["promise","with custom executor"],"updatePoint":{"line":121,"column":45,"index":3545},"line":121,"code":"    it(\"accepts a fake as the custom executor\", function () {\n      const executor = sinon.fake();\n      sinon.promise(executor);\n      assert.equals(executor.callCount, 1);\n      assert.equals(executor.firstCall.args.length, 2);\n      assert.isFunction(executor.firstCall.firstArg);\n      assert.isFunction(executor.firstCall.lastArg);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"accepts a stub as the custom executor","suites":["promise","with custom executor"],"updatePoint":{"line":129,"column":45,"index":3890},"line":129,"code":"    it(\"accepts a stub as the custom executor\", function () {\n      const executor = sinon.stub();\n      sinon.promise(executor);\n      assert.equals(executor.callCount, 1);\n      assert.equals(executor.firstCall.args.length, 2);\n      assert.isFunction(executor.firstCall.firstArg);\n      assert.isFunction(executor.firstCall.lastArg);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"accepts a function as the custom executor","suites":["promise","with custom executor"],"updatePoint":{"line":137,"column":49,"index":4239},"line":137,"code":"    it(\"accepts a function as the custom executor\", function () {\n      let args;\n      function executor(resolve, reject) {\n        args = [resolve, reject];\n      }\n      sinon.promise(executor);\n      assert.equals(args.length, 2);\n      assert.isFunction(args[0]);\n      assert.isFunction(args[1]);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"sets resolvedValue when custom executor resolves","suites":["promise","with custom executor"],"updatePoint":{"line":147,"column":56,"index":4557},"line":147,"code":"    it(\"sets resolvedValue when custom executor resolves\", async function () {\n      const result = Symbol(\"executor result\");\n      function executor(resolve) {\n        resolve(result);\n      }\n      const promise = sinon.promise(executor);\n      await assert.resolves(promise, result);\n      assert.equals(promise.status, \"resolved\");\n      assert.same(promise.resolvedValue, result);\n      assert.isUndefined(promise.rejectedValue);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"sets rejectedValue when custom executor fails","suites":["promise","with custom executor"],"updatePoint":{"line":158,"column":53,"index":4998},"line":158,"code":"    it(\"sets rejectedValue when custom executor fails\", async function () {\n      const reason = new Error(\"executor failure\");\n      function executor(resolve, reject) {\n        reject(reason);\n      }\n      const promise = sinon.promise(executor);\n      await assert.rejects(promise, reason);\n      assert.equals(promise.status, \"rejected\");\n      assert.same(promise.rejectedValue, reason);\n      assert.isUndefined(promise.resolvedValue);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"resolves the promise","suites":["promise","with custom executor"],"updatePoint":{"line":169,"column":28,"index":5424},"line":169,"code":"    it(\"resolves the promise\", async function () {\n      const result = Symbol(\"promise result\");\n      const promise = sinon.promise(sinon.fake());\n      promise.resolve(result);\n      await assert.resolves(promise, result);\n      assert.equals(promise.status, \"resolved\");\n      assert.same(promise.resolvedValue, result);\n      assert.isUndefined(promise.rejectedValue);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"rejects the promise","suites":["promise","with custom executor"],"updatePoint":{"line":178,"column":27,"index":5805},"line":178,"code":"    it(\"rejects the promise\", async function () {\n      const error = new Error(\"promise error\");\n      const promise = sinon.promise(sinon.fake());\n      promise.reject(error);\n      await assert.rejects(promise, error);\n      assert.equals(promise.status, \"rejected\");\n      assert.isUndefined(promise.resolvedValue);\n      assert.same(promise.rejectedValue, error);\n    });","file":"promise-test.js","skipped":false,"dir":"test"},{"name":"returns true if all args match","suites":[],"updatePoint":{"line":28,"column":38,"index":854},"line":28,"code":"    it(\"returns true if all args match\", function () {\n      const args = this.args;\n      assert(this.call[method](args[0], args[1], args[2]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true if first args match","suites":[],"updatePoint":{"line":32,"column":40,"index":1009},"line":32,"code":"    it(\"returns true if first args match\", function () {\n      const args = this.args;\n      assert(this.call[method](args[0], args[1]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true if first arg match","suites":[],"updatePoint":{"line":36,"column":39,"index":1154},"line":36,"code":"    it(\"returns true if first arg match\", function () {\n      const args = this.args;\n      assert(this.call[method](args[0]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true for no args","suites":[],"updatePoint":{"line":40,"column":32,"index":1283},"line":40,"code":"    it(\"returns true for no args\", function () {\n      assert(this.call[method]());\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for too many args","suites":[],"updatePoint":{"line":43,"column":39,"index":1382},"line":43,"code":"    it(\"returns false for too many args\", function () {\n      const args = this.args;\n      assert.isFalse(this.call[method](args[0], args[1], args[2], args[3], {}));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for wrong arg","suites":[],"updatePoint":{"line":47,"column":35,"index":1553},"line":47,"code":"    it(\"returns false for wrong arg\", function () {\n      const args = this.args;\n      assert.isFalse(this.call[method](args[0], args[2]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false if all args match","suites":[],"updatePoint":{"line":57,"column":39,"index":1888},"line":57,"code":"    it(\"returns false if all args match\", function () {\n      const args = this.args;\n      assert.isFalse(this.call[method](args[0], args[1], args[2]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false if first args match","suites":[],"updatePoint":{"line":61,"column":41,"index":2052},"line":61,"code":"    it(\"returns false if first args match\", function () {\n      const args = this.args;\n      assert.isFalse(this.call[method](args[0], args[1]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false if first arg match","suites":[],"updatePoint":{"line":65,"column":40,"index":2206},"line":65,"code":"    it(\"returns false if first arg match\", function () {\n      const args = this.args;\n      assert.isFalse(this.call[method](args[0]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for no args","suites":[],"updatePoint":{"line":69,"column":33,"index":2344},"line":69,"code":"    it(\"returns false for no args\", function () {\n      assert.isFalse(this.call[method]());\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true for too many args","suites":[],"updatePoint":{"line":72,"column":38,"index":2450},"line":72,"code":"    it(\"returns true for too many args\", function () {\n      const args = this.args;\n      assert(this.call[method](args[0], args[1], args[2], args[3], {}));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true for wrong arg","suites":[],"updatePoint":{"line":76,"column":34,"index":2612},"line":76,"code":"    it(\"returns true for wrong arg\", function () {\n      const args = this.args;\n      assert(this.call[method](args[0], args[2]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"gets call object","suites":["sinonSpy.call","call object"],"updatePoint":{"line":85,"column":24,"index":2859},"line":85,"code":"    it(\"gets call object\", function () {\n      const spy = sinonSpy();\n      spy();\n      const firstCall = spy.getCall(0);\n      assert.isFunction(firstCall.calledOn);\n      assert.isFunction(firstCall.calledWith);\n      assert.isFunction(firstCall.returned);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"stores given call id","suites":["sinonSpy.call","call object"],"updatePoint":{"line":93,"column":28,"index":3132},"line":93,"code":"    it(\"stores given call id\", function () {\n      const call = proxyCall(function () {\n        return;\n      }, {}, [], null, null, 42);\n      assert.same(call.callId, 42);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if callId is undefined","suites":["sinonSpy.call","call object"],"updatePoint":{"line":99,"column":37,"index":3323},"line":99,"code":"    it(\"throws if callId is undefined\", function () {\n      assert.exception(function () {\n        proxyCall.create(function () {\n          return;\n        }, {}, []);\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records ascending call id's","suites":["sinonSpy.call","call object"],"updatePoint":{"line":108,"column":35,"index":3544},"line":108,"code":"    it(\"records ascending call id's\", function () {\n      const spy = sinonSpy();\n      spy();\n      assert(this.call.callId < spy.getCall(0).callId);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"exposes thisValue property","suites":["sinonSpy.call","call object"],"updatePoint":{"line":113,"column":34,"index":3702},"line":113,"code":"    it(\"exposes thisValue property\", function () {\n      const spy = sinonSpy();\n      const obj = {};\n      spy.call(obj);\n      assert.same(spy.getCall(0).thisValue, obj);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"has methods to test relative ordering","suites":["sinonSpy.call","call object"],"updatePoint":{"line":119,"column":45,"index":3895},"line":119,"code":"    it(\"has methods to test relative ordering\", function () {\n      const spy = sinonSpy();\n      for (let i = 0; i < 4; i++) {\n        spy.call({});\n      }\n      const calls = [0, 1, 2, 3].map(function (idx) {\n        return spy.getCall(idx);\n      });\n      assert.isTrue(calls[1].calledBefore(calls[3]));\n      assert.isFalse(calls[1].calledBefore(calls[0]));\n      assert.isTrue(calls[3].calledAfter(calls[1]));\n      assert.isFalse(calls[1].calledAfter(calls[3]));\n      assert.isFalse(calls[0].calledImmediatelyBefore(calls[2]));\n      assert.isTrue(calls[1].calledImmediatelyBefore(calls[2]));\n      assert.isFalse(calls[3].calledImmediatelyBefore(calls[1]));\n      assert.isFalse(calls[3].calledImmediatelyAfter(calls[1]));\n      assert.isTrue(calls[2].calledImmediatelyAfter(calls[1]));\n      assert.isFalse(calls[1].calledImmediatelyAfter(calls[3]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calledOn should return true","suites":["sinonSpy.call","call calledOn"],"updatePoint":{"line":141,"column":35,"index":4833},"line":141,"code":"    it(\"calledOn should return true\", function () {\n      assert(this.call.calledOn(this.thisValue));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calledOn should return false","suites":["sinonSpy.call","call calledOn"],"updatePoint":{"line":144,"column":36,"index":4944},"line":144,"code":"    it(\"calledOn should return false\", function () {\n      assert.isFalse(this.call.calledOn({}));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true when all args match","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":160,"column":40,"index":5671},"line":160,"code":"    it(\"returns true when all args match\", function () {\n      const args = this.args;\n      assert(this.call.calledWithExactly(args[0], args[1], args[2], args[3]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for too many args","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":164,"column":39,"index":5844},"line":164,"code":"    it(\"returns false for too many args\", function () {\n      const args = this.args;\n      assert.isFalse(this.call.calledWithExactly(args[0], args[1], args[2], args[3], {}));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for too few args","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":168,"column":38,"index":6028},"line":168,"code":"    it(\"returns false for too few args\", function () {\n      const args = this.args;\n      assert.isFalse(this.call.calledWithExactly(args[0], args[1]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false for unmatching args","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":172,"column":41,"index":6193},"line":172,"code":"    it(\"returns false for unmatching args\", function () {\n      const args = this.args;\n      assert.isFalse(this.call.calledWithExactly(args[0], args[1], args[1]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns true for no arguments","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":176,"column":37,"index":6363},"line":176,"code":"    it(\"returns true for no arguments\", function () {\n      const call = proxyCall(function () {\n        return;\n      }, {}, [], null, null, 0);\n      assert(call.calledWithExactly());\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns false when called with no args but matching one","suites":["sinonSpy.call","call.calledWithExactly"],"updatePoint":{"line":182,"column":63,"index":6583},"line":182,"code":"    it(\"returns false when called with no args but matching one\", function () {\n      const call = proxyCall(function () {\n        return;\n      }, {}, [], null, null, 0);\n      assert.isFalse(call.calledWithExactly({}));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index","suites":["sinonSpy.call","call.callArg"],"updatePoint":{"line":191,"column":41,"index":6872},"line":191,"code":"    it(\"calls argument at specified index\", function () {\n      const callback = sinonSpy();\n      this.args.push(1, 2, callback);\n      this.call.callArg(2);\n      assert(callback.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at specified index is not callable","suites":["sinonSpy.call","call.callArg"],"updatePoint":{"line":197,"column":61,"index":7090},"line":197,"code":"    it(\"throws if argument at specified index is not callable\", function () {\n      this.args.push(1);\n      const call = this.call;\n      assert.exception(function () {\n        call.callArg(0);\n      }, {\n        message: \"Expected argument at position 0 to be a Function, but was number\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["sinonSpy.call","call.callArg"],"updatePoint":{"line":206,"column":39,"index":7376},"line":206,"code":"    it(\"throws if no index is specified\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.callArg();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.callArg"],"updatePoint":{"line":214,"column":38,"index":7577},"line":214,"code":"    it(\"returns callbacks return value\", function () {\n      const callback = sinonSpy(function () {\n        return \"useful value\";\n      });\n      this.args.push(1, 2, callback);\n      const returnValue = this.call.callArg(2);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["sinonSpy.call","call.callArg"],"updatePoint":{"line":222,"column":37,"index":7862},"line":222,"code":"    it(\"throws if index is not number\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.callArg({});\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index","suites":["sinonSpy.call","call.callArgOn"],"updatePoint":{"line":233,"column":41,"index":8151},"line":233,"code":"    it(\"calls argument at specified index\", function () {\n      const callback = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(1, 2, callback);\n      this.call.callArgOn(2, thisObj);\n      assert(callback.called);\n      assert(callback.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at specified index is not callable","suites":["sinonSpy.call","call.callArgOn"],"updatePoint":{"line":244,"column":61,"index":8504},"line":244,"code":"    it(\"throws if argument at specified index is not callable\", function () {\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(1);\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgOn(0, thisObj);\n      }, {\n        message: \"Expected argument at position 0 to be a Function, but was number\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.callArgOn"],"updatePoint":{"line":257,"column":38,"index":8882},"line":257,"code":"    it(\"returns callbacks return value\", function () {\n      const callback = sinonSpy(function () {\n        return \"useful value\";\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(1, 2, callback);\n      const returnValue = this.call.callArgOn(2, thisObj);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["sinonSpy.call","call.callArgOn"],"updatePoint":{"line":269,"column":37,"index":9260},"line":269,"code":"    it(\"throws if index is not number\", function () {\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgOn({}, thisObj);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":284,"column":60,"index":9663},"line":284,"code":"    it(\"calls argument at specified index with provided args\", function () {\n      const object = {};\n      const callback = sinonSpy();\n      this.args.push(1, callback);\n      this.call.callArgWith(1, object);\n      assert(callback.calledWith(object));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls callback without args","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":291,"column":35,"index":9901},"line":291,"code":"    it(\"calls callback without args\", function () {\n      const callback = sinonSpy();\n      this.args.push(1, callback);\n      this.call.callArgWith(1);\n      assert(callback.calledWith());\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls callback wit multiple args","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":297,"column":40,"index":10105},"line":297,"code":"    it(\"calls callback wit multiple args\", function () {\n      const object = {};\n      const array = [];\n      const callback = sinonSpy();\n      this.args.push(1, 2, callback);\n      this.call.callArgWith(2, object, array);\n      assert(callback.calledWith(object, array));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":305,"column":38,"index":10387},"line":305,"code":"    it(\"returns callbacks return value\", function () {\n      const object = {};\n      const callback = sinonSpy(function () {\n        return \"useful value\";\n      });\n      this.args.push(1, callback);\n      const returnValue = this.call.callArgWith(1, object);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":314,"column":39,"index":10708},"line":314,"code":"    it(\"throws if no index is specified\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgWith();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["sinonSpy.call","call.callArgWith"],"updatePoint":{"line":322,"column":37,"index":10912},"line":322,"code":"    it(\"throws if index is not number\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgWith({});\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":333,"column":60,"index":11228},"line":333,"code":"    it(\"calls argument at specified index with provided args\", function () {\n      const object = {};\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      const callback = sinonSpy();\n      this.args.push(1, callback);\n      this.call.callArgOnWith(1, thisObj, object);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls callback without args","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":345,"column":35,"index":11601},"line":345,"code":"    it(\"calls callback without args\", function () {\n      const callback = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(1, callback);\n      this.call.callArgOnWith(1, thisObj);\n      assert(callback.calledWith());\n      assert(callback.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"calls callback with multiple args","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":356,"column":41,"index":11941},"line":356,"code":"    it(\"calls callback with multiple args\", function () {\n      const object = {};\n      const array = [];\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      const callback = sinonSpy();\n      this.args.push(1, 2, callback);\n      this.call.callArgOnWith(2, thisObj, object, array);\n      assert(callback.calledWith(object, array));\n      assert(callback.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":369,"column":38,"index":12358},"line":369,"code":"    it(\"returns callbacks return value\", function () {\n      const object = {};\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      const callback = sinonSpy(function () {\n        return \"useful value\";\n      });\n      this.args.push(1, callback);\n      const returnValue = this.call.callArgOnWith(1, thisObj, object);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at specified index is not callable","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":382,"column":61,"index":12794},"line":382,"code":"    it(\"throws if argument at specified index is not callable\", function () {\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(1, 2, 1);\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgOnWith(2, thisObj);\n      }, {\n        message: \"Expected argument at position 2 to be a Function, but was number\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["sinonSpy.call","call.callArgOnWith"],"updatePoint":{"line":395,"column":37,"index":13181},"line":395,"code":"    it(\"throws if index is not number\", function () {\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      const call = this.call;\n      assert.exception(function () {\n        call.callArgOnWith({}, thisObj);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"it should be a reference for the callback","suites":["sinonSpy.call",".callback"],"updatePoint":{"line":409,"column":49,"index":13536},"line":409,"code":"    it(\"it should be a reference for the callback\", function () {\n      const spy = sinonSpy();\n      const callback1 = function () {\n        return;\n      };\n      const callback2 = function () {\n        return;\n      };\n      spy(1, 2, 3, callback1);\n      assert.equals(spy.getCall(0).callback, callback1);\n      spy(1, 2, 3, callback2);\n      assert.equals(spy.getCall(1).callback, callback2);\n      spy(1, 2, 3);\n      assert.isUndefined(spy.getCall(2).callback);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"should be the first argument from the call","suites":["sinonSpy.call",".firstArg"],"updatePoint":{"line":426,"column":50,"index":14058},"line":426,"code":"    it(\"should be the first argument from the call\", function () {\n      const spy = sinonSpy();\n      spy(41, 42, 43);\n      assert.equals(spy.getCall(0).firstArg, 41);\n      spy(44, 45);\n      assert.equals(spy.getCall(1).firstArg, 44);\n      spy(46);\n      assert.equals(spy.getCall(2).firstArg, 46);\n      spy();\n      assert.isUndefined(spy.getCall(3).firstArg);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"should be the last argument from the call","suites":["sinonSpy.call",".lastArg"],"updatePoint":{"line":439,"column":49,"index":14476},"line":439,"code":"    it(\"should be the last argument from the call\", function () {\n      const spy = sinonSpy();\n      spy(41, 42, 43);\n      assert.equals(spy.getCall(0).lastArg, 43);\n      spy(44, 45);\n      assert.equals(spy.getCall(1).lastArg, 45);\n      spy(46);\n      assert.equals(spy.getCall(2).lastArg, 46);\n      spy();\n      assert.isUndefined(spy.getCall(3).lastArg);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":453,"column":41,"index":14922},"line":453,"code":"    it(\"invokes only argument as callback\", function () {\n      const callback = sinonSpy();\n      this.args.push(callback);\n      this.call.yield();\n      assert(callback.calledOnce);\n      assert.equals(callback.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":460,"column":60,"index":15183},"line":460,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.yield();\n      }, {\n        message: \"spy cannot yield since no callback was passed.\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":468,"column":56,"index":15440},"line":468,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      this.proxy.displayName = \"somethingAwesome\";\n      this.args.push(23, 42);\n      const call = this.call;\n      assert.exception(function () {\n        call.yield();\n      }, {\n        message: \"somethingAwesome cannot yield since no callback was passed. Received [23, 42]\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes last argument as callback","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":478,"column":41,"index":15794},"line":478,"code":"    it(\"invokes last argument as callback\", function () {\n      const spy = sinonSpy();\n      this.args.push(24, {}, spy);\n      this.call.yield();\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two callbacks","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":485,"column":38,"index":16021},"line":485,"code":"    it(\"invokes first of two callbacks\", function () {\n      const spy = sinonSpy();\n      const spy2 = sinonSpy();\n      this.args.push(24, {}, spy, spy2);\n      this.call.yield();\n      assert(spy.calledOnce);\n      assert.isFalse(spy2.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":493,"column":39,"index":16277},"line":493,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const spy = sinonSpy();\n      this.args.push(spy);\n      this.call.yield(obj, \"Crazy\");\n      assert(spy.calledWith(obj, \"Crazy\"));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":502,"column":38,"index":16522},"line":502,"code":"    it(\"returns callbacks return value\", function () {\n      const spy = sinonSpy(function () {\n        return \"useful value\";\n      });\n      this.args.push(24, {}, spy);\n      const returnValue = this.call.yield();\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["sinonSpy.call","call.yieldTest"],"updatePoint":{"line":510,"column":33,"index":16792},"line":510,"code":"    it(\"throws if callback throws\", function () {\n      this.args.push(function () {\n        throw new Error(\"d'oh!\");\n      });\n      const call = this.call;\n      assert.exception(function () {\n        call.yield();\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"is alias for yield","suites":["sinonSpy.call","call.invokeCallback"],"updatePoint":{"line":521,"column":26,"index":17075},"line":521,"code":"    it(\"is alias for yield\", function () {\n      const call = proxyCall(function () {\n        return;\n      }, {}, [], null, null, 0);\n      assert.same(call.yield, call.invokeCallback);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":530,"column":41,"index":17370},"line":530,"code":"    it(\"invokes only argument as callback\", function () {\n      const callback = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(callback);\n      this.call.yieldOn(thisObj);\n      assert(callback.calledOnce);\n      assert(callback.calledOn(thisObj));\n      assert.equals(callback.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":542,"column":60,"index":17764},"line":542,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldOn(thisObj);\n      }, {\n        message: \"spy cannot yield since no callback was passed.\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":554,"column":56,"index":18112},"line":554,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      this.proxy.displayName = \"somethingAwesome\";\n      this.args.push(23, 42);\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldOn(thisObj);\n      }, {\n        message: \"somethingAwesome cannot yield since no callback was passed. Received [23, 42]\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes last argument as callback","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":568,"column":41,"index":18557},"line":568,"code":"    it(\"invokes last argument as callback\", function () {\n      const spy = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, spy);\n      this.call.yieldOn(thisObj);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n      assert(spy.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two callbacks","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":580,"column":38,"index":18912},"line":580,"code":"    it(\"invokes first of two callbacks\", function () {\n      const spy = sinonSpy();\n      const spy2 = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, spy, spy2);\n      this.call.yieldOn(thisObj);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(thisObj));\n      assert.isFalse(spy2.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":593,"column":39,"index":19296},"line":593,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const spy = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(spy);\n      this.call.yieldOn(thisObj, obj, \"Crazy\");\n      assert(spy.calledWith(obj, \"Crazy\"));\n      assert(spy.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":607,"column":38,"index":19671},"line":607,"code":"    it(\"returns callbacks return value\", function () {\n      const spy = sinonSpy(function () {\n        return \"useful value\";\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, spy);\n      const returnValue = this.call.yieldOn(thisObj);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["sinonSpy.call","call.yieldOnTest"],"updatePoint":{"line":619,"column":33,"index":20032},"line":619,"code":"    it(\"throws if callback throws\", function () {\n      this.args.push(function () {\n        throw new Error(\"d'oh!\");\n      });\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldOn(thisObj);\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":635,"column":41,"index":20448},"line":635,"code":"    it(\"invokes only argument as callback\", function () {\n      const callback = sinonSpy();\n      this.args.push({\n        success: callback\n      });\n      this.call.yieldTo(\"success\");\n      assert(callback.calledOnce);\n      assert.equals(callback.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":644,"column":60,"index":20747},"line":644,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const call = this.call;\n      assert.exception(function () {\n        call.yieldTo(\"success\");\n      }, {\n        message: \"spy cannot yield to 'success' since no callback was passed.\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":652,"column":56,"index":21028},"line":652,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      this.proxy.displayName = \"somethingAwesome\";\n      this.args.push(23, 42);\n      const call = this.call;\n      assert.exception(function () {\n        call.yieldTo(\"success\");\n      }, {\n        message: \"somethingAwesome cannot yield to 'success' since no callback was passed. \" + \"Received [23, 42]\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes property on last argument as callback","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":662,"column":53,"index":21423},"line":662,"code":"    it(\"invokes property on last argument as callback\", function () {\n      const spy = sinonSpy();\n      this.args.push(24, {}, {\n        success: spy\n      });\n      this.call.yieldTo(\"success\");\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two possible callbacks","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":671,"column":47,"index":21697},"line":671,"code":"    it(\"invokes first of two possible callbacks\", function () {\n      const spy = sinonSpy();\n      const spy2 = sinonSpy();\n      this.args.push(24, {}, {\n        error: spy\n      }, {\n        error: spy2\n      });\n      this.call.yieldTo(\"error\");\n      assert(spy.calledOnce);\n      assert.isFalse(spy2.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":683,"column":39,"index":22012},"line":683,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const spy = sinonSpy();\n      this.args.push({\n        success: spy\n      });\n      this.call.yieldTo(\"success\", obj, \"Crazy\");\n      assert(spy.calledWith(obj, \"Crazy\"));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":694,"column":38,"index":22297},"line":694,"code":"    it(\"returns callbacks return value\", function () {\n      const spy = sinonSpy(function () {\n        return \"useful value\";\n      });\n      this.args.push(24, {}, {\n        success: spy\n      });\n      const returnValue = this.call.yieldTo(\"success\");\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["sinonSpy.call","call.yieldTo"],"updatePoint":{"line":704,"column":33,"index":22605},"line":704,"code":"    it(\"throws if callback throws\", function () {\n      this.args.push({\n        success: function () {\n          throw new Error(\"d'oh!\");\n        }\n      });\n      const call = this.call;\n      assert.exception(function () {\n        call.yieldTo(\"success\");\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":718,"column":41,"index":22974},"line":718,"code":"    it(\"invokes only argument as callback\", function () {\n      const callback = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push({\n        success: callback\n      });\n      this.call.yieldToOn(\"success\", thisObj);\n      assert(callback.calledOnce);\n      assert.equals(callback.args[0].length, 0);\n      assert(callback.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":732,"column":60,"index":23408},"line":732,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldToOn(\"success\", thisObj);\n      }, {\n        message: \"spy cannot yield to 'success' since no callback was passed.\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if symbol prop is not found","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":744,"column":63,"index":23789},"line":744,"code":"    it(\"throws understandable error if symbol prop is not found\", function () {\n      if (typeof Symbol === \"function\") {\n        const call = this.call;\n        const symbol = Symbol(\"apple pie\");\n        assert.exception(function () {\n          call.yieldToOn(symbol, {});\n        }, {\n          message: \"spy cannot yield to 'Symbol(apple pie)' since no callback was passed.\"\n        });\n      }\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":755,"column":56,"index":24189},"line":755,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      this.proxy.displayName = \"somethingAwesome\";\n      this.args.push(23, 42);\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldToOn(\"success\", thisObj);\n      }, {\n        message: \"somethingAwesome cannot yield to 'success' since no callback was passed. \" + \"Received [23, 42]\"\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes property on last argument as callback","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":769,"column":53,"index":24677},"line":769,"code":"    it(\"invokes property on last argument as callback\", function () {\n      const spy = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, {\n        success: spy\n      });\n      this.call.yieldToOn(\"success\", thisObj);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(thisObj));\n      assert.equals(spy.args[0].length, 0);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two possible callbacks","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":783,"column":47,"index":25081},"line":783,"code":"    it(\"invokes first of two possible callbacks\", function () {\n      const spy = sinonSpy();\n      const spy2 = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, {\n        error: spy\n      }, {\n        error: spy2\n      });\n      this.call.yieldToOn(\"error\", thisObj);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(thisObj));\n      assert.isFalse(spy2.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":800,"column":39,"index":25526},"line":800,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const spy = sinonSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push({\n        success: spy\n      });\n      this.call.yieldToOn(\"success\", thisObj, obj, \"Crazy\");\n      assert(spy.calledWith(obj, \"Crazy\"));\n      assert(spy.calledOn(thisObj));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return value","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":816,"column":38,"index":25941},"line":816,"code":"    it(\"returns callbacks return value\", function () {\n      const spy = sinonSpy(function () {\n        return \"useful value\";\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      this.args.push(24, {}, {\n        success: spy\n      });\n      const returnValue = this.call.yieldToOn(\"success\", thisObj);\n      assert.equals(returnValue, \"useful value\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["sinonSpy.call","call.yieldToOn"],"updatePoint":{"line":830,"column":33,"index":26342},"line":830,"code":"    it(\"throws if callback throws\", function () {\n      this.args.push({\n        success: function () {\n          throw new Error(\"d'oh!\");\n        }\n      });\n      const call = this.call;\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        call.yieldToOn(\"success\", thisObj);\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes spy name","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":852,"column":25,"index":26853},"line":852,"code":"    it(\"includes spy name\", function () {\n      const object = {\n        doIt: sinonSpy()\n      };\n      object.doIt();\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt()\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes single argument","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":859,"column":32,"index":27076},"line":859,"code":"    it(\"includes single argument\", function () {\n      const object = {\n        doIt: sinonSpy()\n      };\n      object.doIt(42);\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt(42)\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes all arguments","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":866,"column":30,"index":27301},"line":866,"code":"    it(\"includes all arguments\", function () {\n      const object = {\n        doIt: sinonSpy()\n      };\n      object.doIt(42, \"Hey\");\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt(42, 'Hey')\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes explicit return value","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":873,"column":38,"index":27548},"line":873,"code":"    it(\"includes explicit return value\", function () {\n      const object = {\n        doIt: sinonStub().returns(42)\n      };\n      object.doIt(42, \"Hey\");\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt(42, 'Hey') => 42\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes empty string return value","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":880,"column":42,"index":27818},"line":880,"code":"    it(\"includes empty string return value\", function () {\n      const object = {\n        doIt: sinonStub().returns(\"\")\n      };\n      object.doIt(42, \"Hey\");\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt(42, 'Hey') => ''\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes exception","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":887,"column":26,"index":28072},"line":887,"code":"    it(\"includes exception\", function () {\n      const object = {\n        doIt: sinonStub().throws(\"TypeError\")\n      };\n      assert.exception(function () {\n        object.doIt();\n      });\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt() !TypeError\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes exception message if any","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":896,"column":41,"index":28385},"line":896,"code":"    it(\"includes exception message if any\", function () {\n      const object = {\n        doIt: sinonStub().throws(\"TypeError\", \"Oh noes!\")\n      };\n      assert.exception(function () {\n        object.doIt();\n      });\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt() !TypeError(Oh noes!)\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"formats arguments with sinonFormat","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":907,"column":42,"index":28799},"line":907,"code":"    it(\"formats arguments with sinonFormat\", function () {\n      const object = {\n        doIt: sinonSpy()\n      };\n      object.doIt(42);\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt(42)\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"formats return value with sinonFormat","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":914,"column":45,"index":29039},"line":914,"code":"    it(\"formats return value with sinonFormat\", function () {\n      const object = {\n        doIt: sinonStub().returns(42)\n      };\n      object.doIt();\n      assert.equals(object.doIt.getCall(0).toString().replace(/ at.*/g, \"\"), \"doIt() => 42\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"does not throw when the call stack is empty","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":924,"column":51,"index":29396},"line":924,"code":"    it(\"does not throw when the call stack is empty\", async function () {\n      if (typeof Promise === \"undefined\") {\n        this.skip();\n      }\n      const stub1 = sinonStub().resolves(1);\n      const stub2 = sinonStub().returns(1);\n      await stub2(await stub1());\n      assert.equals(stub2.getCall(0).toString().replace(/ at.*/g, \"\"), \"stub(1) => 1\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"includes first stack entry from end-user code","suites":["sinonSpy.call","call.toString"],"updatePoint":{"line":935,"column":53,"index":29807},"line":935,"code":"    it(\"includes first stack entry from end-user code\", function () {\n      /* We find the first stack frame that points to end-user code and\n       * add it to the error message. We do this by chopping off a\n       * constant number of stack frames, so if this test fails, you\n       * probably need to chop off a different number of frames\n       */\n      if (typeof __filename === \"undefined\") {\n        this.skip();\n      }\n      const object = {\n        doIt: sinonSpy()\n      };\n      object.doIt();\n      const [name, stackFrame] = object.doIt.getCall(0).toString().split(\" at \");\n      assert.equals(name, \"doIt()\");\n      assert.contains(stackFrame, __filename);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"creates original object","suites":["sinonSpy.call","constructor"],"updatePoint":{"line":961,"column":31,"index":30724},"line":961,"code":"    it(\"creates original object\", function () {\n      const myInstance = new this.CustomConstructor();\n      assert(this.customPrototype.isPrototypeOf(myInstance));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"does not interfere with instanceof","suites":["sinonSpy.call","constructor"],"updatePoint":{"line":965,"column":42,"index":30908},"line":965,"code":"    it(\"does not interfere with instanceof\", function () {\n      const myInstance = new this.CustomConstructor();\n      assert(myInstance instanceof this.CustomConstructor);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records usage","suites":["sinonSpy.call","constructor"],"updatePoint":{"line":969,"column":21,"index":31069},"line":969,"code":"    it(\"records usage\", function () {\n      const myInstance = new this.CustomConstructor(); // eslint-disable-line no-unused-vars\n\n      assert(this.CustomConstructor.called);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if spying on non-existent property","suites":["sinonSpy.call","functions"],"updatePoint":{"line":976,"column":49,"index":31326},"line":976,"code":"    it(\"throws if spying on non-existent property\", function () {\n      const myObj = {};\n      assert.exception(function () {\n        sinonSpy(myObj, \"ouch\");\n      });\n      assert.isUndefined(myObj.ouch);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"throws if spying on non-existent object","suites":["sinonSpy.call","functions"],"updatePoint":{"line":983,"column":47,"index":31540},"line":983,"code":"    it(\"throws if spying on non-existent object\", function () {\n      assert.exception(function () {\n        sinonSpy(undefined, \"ouch\");\n      });\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"haves toString method","suites":["sinonSpy.call","functions"],"updatePoint":{"line":988,"column":29,"index":31678},"line":988,"code":"    it(\"haves toString method\", function () {\n      const obj = {\n        meth: function () {\n          return;\n        }\n      };\n      sinonSpy(obj, \"meth\");\n      assert.equals(obj.meth.toString(), \"meth\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"toString should say 'spy' when unable to infer name","suites":["sinonSpy.call","functions"],"updatePoint":{"line":997,"column":59,"index":31926},"line":997,"code":"    it(\"toString should say 'spy' when unable to infer name\", function () {\n      const spy = sinonSpy();\n      assert.equals(spy.toString(), \"spy\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"toString should report name of spied function","suites":["sinonSpy.call","functions"],"updatePoint":{"line":1001,"column":53,"index":32078},"line":1001,"code":"    it(\"toString should report name of spied function\", function () {\n      function myTestFunc() {\n        return;\n      }\n      const spy = sinonSpy(myTestFunc);\n      assert.equals(spy.toString(), \"myTestFunc\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"toString should prefer displayName property if available","suites":["sinonSpy.call","functions"],"updatePoint":{"line":1008,"column":64,"index":32312},"line":1008,"code":"    it(\"toString should prefer displayName property if available\", function () {\n      function myTestFunc() {\n        return;\n      }\n      myTestFunc.displayName = \"My custom method\";\n      const spy = sinonSpy(myTestFunc);\n      assert.equals(spy.toString(), \"My custom method\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"toString should prefer property name if possible","suites":["sinonSpy.call","functions"],"updatePoint":{"line":1016,"column":56,"index":32595},"line":1016,"code":"    it(\"toString should prefer property name if possible\", function () {\n      const obj = {};\n      obj.meth = sinonSpy();\n      obj.meth();\n      assert.equals(obj.meth.toString(), \"meth\");\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"resets spy state","suites":["sinonSpy.call",".reset"],"updatePoint":{"line":1036,"column":24,"index":33228},"line":1036,"code":"    it(\"resets spy state\", function () {\n      const spy = sinonSpy();\n      spy();\n      spy.resetHistory();\n      assertReset(spy);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"resets call order state","suites":["sinonSpy.call",".reset"],"updatePoint":{"line":1042,"column":31,"index":33377},"line":1042,"code":"    it(\"resets call order state\", function () {\n      const spies = [sinonSpy(), sinonSpy()];\n      spies[0]();\n      spies[1]();\n      spies[0].resetHistory();\n      assert(!spies[0].calledBefore(spies[1]));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"resets fakes returned by withArgs","suites":["sinonSpy.call",".reset"],"updatePoint":{"line":1049,"column":41,"index":33604},"line":1049,"code":"    it(\"resets fakes returned by withArgs\", function () {\n      const spy = sinonSpy();\n      const fakeA = spy.withArgs(\"a\");\n      const fakeB = spy.withArgs(\"b\");\n      spy(\"a\");\n      spy(\"b\");\n      spy(\"c\");\n      const fakeC = spy.withArgs(\"c\");\n      spy.resetHistory();\n      assertReset(fakeA);\n      assertReset(fakeB);\n      assertReset(fakeC);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"defines withArgs method","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1064,"column":31,"index":34003},"line":1064,"code":"    it(\"defines withArgs method\", function () {\n      const spy = sinonSpy();\n      assert.isFunction(spy.withArgs);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records single call","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1068,"column":27,"index":34124},"line":1068,"code":"    it(\"records single call\", function () {\n      const spy = sinonSpy().withArgs(1);\n      spy(1);\n      assert.equals(spy.callCount, 1);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records non-matching call on original spy","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1073,"column":49,"index":34293},"line":1073,"code":"    it(\"records non-matching call on original spy\", function () {\n      const spy = sinonSpy();\n      const argSpy = spy.withArgs(1);\n      spy(1);\n      spy(2);\n      assert.equals(spy.callCount, 2);\n      assert.equals(argSpy.callCount, 1);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records non-matching call with several arguments separately","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1081,"column":67,"index":34562},"line":1081,"code":"    it(\"records non-matching call with several arguments separately\", function () {\n      const spy = sinonSpy();\n      const argSpy = spy.withArgs(1, \"str\", {});\n      spy(1);\n      spy(1, \"str\", {});\n      assert.equals(spy.callCount, 2);\n      assert.equals(argSpy.callCount, 1);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records for partial argument match","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1089,"column":42,"index":34828},"line":1089,"code":"    it(\"records for partial argument match\", function () {\n      const spy = sinonSpy();\n      const argSpy = spy.withArgs(1, \"str\", {});\n      spy(1);\n      spy(1, \"str\", {});\n      spy(1, \"str\", {}, []);\n      assert.equals(spy.callCount, 3);\n      assert.equals(argSpy.callCount, 2);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"records filtered spy when original throws","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1098,"column":49,"index":35130},"line":1098,"code":"    it(\"records filtered spy when original throws\", function () {\n      const spy = sinonSpy(function () {\n        throw new Error(\"Oops\");\n      });\n      const argSpy = spy.withArgs({}, []);\n      assert.exception(function () {\n        spy(1);\n      });\n      assert.exception(function () {\n        spy({}, []);\n      });\n      assert.equals(spy.callCount, 2);\n      assert.equals(argSpy.callCount, 1);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"returns existing override for arguments","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1112,"column":47,"index":35541},"line":1112,"code":"    it(\"returns existing override for arguments\", function () {\n      const spy = sinonSpy();\n      const argSpy = spy.withArgs({}, []);\n      const another = spy.withArgs({}, []);\n      spy();\n      spy({}, []);\n      spy({}, [], 2);\n      assert.same(another, argSpy);\n      refute.same(another, spy);\n      assert.equals(spy.callCount, 3);\n      assert.equals(spy.withArgs({}, []).callCount, 2);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"chains withArgs calls on original spy","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1124,"column":45,"index":35946},"line":1124,"code":"    it(\"chains withArgs calls on original spy\", function () {\n      const spy = sinonSpy();\n      const numArgSpy = spy.withArgs({}, []).withArgs(3);\n      spy();\n      spy({}, []);\n      spy(3);\n      assert.equals(spy.callCount, 3);\n      assert.equals(numArgSpy.callCount, 1);\n      assert.equals(spy.withArgs({}, []).callCount, 1);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with callCount","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1134,"column":47,"index":36292},"line":1134,"code":"    it(\"initializes filtered spy with callCount\", function () {\n      const spy = sinonSpy();\n      spy(\"a\");\n      spy(\"b\");\n      spy(\"b\");\n      spy(\"c\");\n      spy(\"c\");\n      spy(\"c\");\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      const argSpy3 = spy.withArgs(\"c\");\n      assert.equals(argSpy1.callCount, 1);\n      assert.equals(argSpy2.callCount, 2);\n      assert.equals(argSpy3.callCount, 3);\n      assert(argSpy1.called);\n      assert(argSpy2.called);\n      assert(argSpy3.called);\n      assert(argSpy1.calledOnce);\n      assert(argSpy2.calledTwice);\n      assert(argSpy3.calledThrice);\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with first, second, third and last call","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1155,"column":72,"index":36962},"line":1155,"code":"    it(\"initializes filtered spy with first, second, third and last call\", function () {\n      const spy = sinonSpy();\n      spy(\"a\", 1);\n      spy(\"b\", 2);\n      spy(\"b\", 3);\n      spy(\"b\", 4);\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy1.firstCall.calledWithExactly(\"a\", 1));\n      assert(argSpy1.lastCall.calledWithExactly(\"a\", 1));\n      assert(argSpy2.firstCall.calledWithExactly(\"b\", 2));\n      assert(argSpy2.secondCall.calledWithExactly(\"b\", 3));\n      assert(argSpy2.thirdCall.calledWithExactly(\"b\", 4));\n      assert(argSpy2.lastCall.calledWithExactly(\"b\", 4));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with arguments","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1170,"column":47,"index":37575},"line":1170,"code":"    it(\"initializes filtered spy with arguments\", function () {\n      const spy = sinonSpy();\n      spy(\"a\");\n      spy(\"b\");\n      spy(\"b\", \"c\", \"d\");\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy1.getCall(0).calledWithExactly(\"a\"));\n      assert(argSpy2.getCall(0).calledWithExactly(\"b\"));\n      assert(argSpy2.getCall(1).calledWithExactly(\"b\", \"c\", \"d\"));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with thisValues","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1181,"column":48,"index":37999},"line":1181,"code":"    it(\"initializes filtered spy with thisValues\", function () {\n      const spy = sinonSpy();\n      const thisValue1 = {};\n      const thisValue2 = {};\n      const thisValue3 = {};\n      spy.call(thisValue1, \"a\");\n      spy.call(thisValue2, \"b\");\n      spy.call(thisValue3, \"b\");\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy1.getCall(0).calledOn(thisValue1));\n      assert(argSpy2.getCall(0).calledOn(thisValue2));\n      assert(argSpy2.getCall(1).calledOn(thisValue3));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with return values","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1195,"column":51,"index":38538},"line":1195,"code":"    it(\"initializes filtered spy with return values\", function () {\n      const spy = sinonSpy(function (value) {\n        return value;\n      });\n      spy(\"a\");\n      spy(\"b\");\n      spy(\"b\");\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy1.getCall(0).returned(\"a\"));\n      assert(argSpy2.getCall(0).returned(\"b\"));\n      assert(argSpy2.getCall(1).returned(\"b\"));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with call order","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1208,"column":48,"index":38963},"line":1208,"code":"    it(\"initializes filtered spy with call order\", function () {\n      const spy = sinonSpy();\n      spy(\"a\");\n      spy(\"b\");\n      spy(\"b\");\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy2.getCall(0).calledAfter(argSpy1.getCall(0)));\n      assert(argSpy2.getCall(1).calledAfter(argSpy1.getCall(0)));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"initializes filtered spy with exceptions","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1218,"column":48,"index":39328},"line":1218,"code":"    it(\"initializes filtered spy with exceptions\", function () {\n      const spy = sinonSpy(function (x, y) {\n        const error = new Error();\n        error.name = y;\n        throw error;\n      });\n      assert.exception(function () {\n        spy(\"a\", \"1\");\n      });\n      assert.exception(function () {\n        spy(\"b\", \"2\");\n      });\n      assert.exception(function () {\n        spy(\"b\", \"3\");\n      });\n      const argSpy1 = spy.withArgs(\"a\");\n      const argSpy2 = spy.withArgs(\"b\");\n      assert(argSpy1.getCall(0).threw(\"1\"));\n      assert(argSpy2.getCall(0).threw(\"2\"));\n      assert(argSpy2.getCall(1).threw(\"3\"));\n    });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"captures a stack trace","suites":["sinonSpy.call",".withArgs"],"updatePoint":{"line":1240,"column":28,"index":39949},"line":1240,"code":"  it(\"captures a stack trace\", function () {\n    const spy = sinonSpy();\n    spy();\n    assert.isString(spy.getCall(0).stack);\n  });","file":"proxy-call-test.js","skipped":false,"dir":"test"},{"name":"named","suites":["proxy",".printf","name"],"updatePoint":{"line":33,"column":15,"index":893},"line":33,"code":"      it(\"named\", function () {\n        const named = createFaux(function cool() {\n          return;\n        });\n        assert.equals(named.printf(\"%n\"), \"cool\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"anon","suites":["proxy",".printf","name"],"updatePoint":{"line":39,"column":14,"index":1066},"line":39,"code":"      it(\"anon\", function () {\n        const anon = sinonSpy(function () {\n          return;\n        });\n        assert.equals(anon.printf(\"%n\"), \"spy\");\n        const noFn = sinonSpy();\n        assert.equals(noFn.printf(\"%n\"), \"spy\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"count","suites":["proxy",".printf","name"],"updatePoint":{"line":48,"column":13,"index":1319},"line":48,"code":"    it(\"count\", function () {\n      // Throwing just to make sure it has no effect.\n      const faux = createFaux(sinonStub().throws());\n      function call() {\n        assert.exception(function () {\n          faux();\n        });\n      }\n      call();\n      assert.equals(faux.printf(\"%c\"), \"once\");\n      call();\n      assert.equals(faux.printf(\"%c\"), \"twice\");\n      call();\n      assert.equals(faux.printf(\"%c\"), \"thrice\");\n      call();\n      assert.equals(faux.printf(\"%c\"), \"4 times\");\n    });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"oneLine","suites":["proxy",".printf","calls"],"updatePoint":{"line":66,"column":17,"index":1859},"line":66,"code":"      it(\"oneLine\", function () {\n        function verify(arg, expected) {\n          const faux = createFaux();\n          faux(arg);\n          assert.equals(faux.printf(\"%C\").replace(/ at.*/g, \"\"), `\\n    ${expected}`);\n        }\n        verify(true, \"faux(true)\");\n        verify(false, \"faux(false)\");\n        verify(undefined, \"faux(undefined)\");\n        verify(1, \"faux(1)\");\n        verify(0, \"faux(0)\");\n        verify(-1, \"faux(-1)\");\n        verify(-1.1, \"faux(-1.1)\");\n        verify(Infinity, \"faux(Infinity)\");\n        verify([\"a\"], \"faux([ 'a' ])\");\n        verify({\n          a: \"a\"\n        }, \"faux({ a: 'a' })\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"multiline","suites":["proxy",".printf","calls"],"updatePoint":{"line":85,"column":19,"index":2499},"line":85,"code":"      it(\"multiline\", function () {\n        const str = \"faux\\ntest\";\n        const faux = createFaux();\n        faux(str);\n        faux(str);\n        faux(str);\n        assert.equals(faux.printf(\"%C\").replace(/ at.*/g, \"\"), \"\\n    faux('faux\\\\ntest')\\n    faux('faux\\\\ntest')\\n    faux('faux\\\\ntest')\");\n        faux.resetHistory();\n        faux(\"test\");\n        faux(\"faux\\ntest\");\n        faux(\"faux\\ntest\");\n        assert.equals(faux.printf(\"%C\").replace(/ at.*/g, \"\"), \"\\n    faux('test')\\n    faux('faux\\\\ntest')\\n    faux('faux\\\\ntest')\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"thisValues","suites":["proxy",".printf","calls"],"updatePoint":{"line":99,"column":18,"index":3064},"line":99,"code":"    it(\"thisValues\", function () {\n      const faux = createFaux();\n      faux();\n      assert.equals(faux.printf(\"%t\"), \"undefined\");\n      faux.resetHistory();\n      faux.call(true);\n      assert.equals(faux.printf(\"%t\"), \"true\");\n    });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"unmatched","suites":["proxy",".printf","calls"],"updatePoint":{"line":107,"column":17,"index":3304},"line":107,"code":"    it(\"unmatched\", function () {\n      const faux = createFaux();\n      assert.equals(faux.printf(\"%λ\"), \"%λ\");\n    });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"*","suites":["proxy",".printf","calls"],"updatePoint":{"line":111,"column":9,"index":3417},"line":111,"code":"    it(\"*\", function () {\n      const faux = createFaux();\n      assert.equals(faux.printf(\"%*\", 1.4567, \"a\", true, {}, [], undefined, null), \"1.4567, 'a', true, {}, [], undefined, null\");\n      assert.equals(faux.printf(\"%*\", \"a\", \"b\", \"c\"), \"'a', 'b', 'c'\");\n    });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"no calls","suites":["proxy",".printf","arguments"],"updatePoint":{"line":117,"column":18,"index":3735},"line":117,"code":"      it(\"no calls\", function () {\n        const faux = createFaux();\n        assert.equals(faux.printf(\"%D\"), \"\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"single call with arguments","suites":["proxy",".printf","arguments"],"updatePoint":{"line":121,"column":36,"index":3879},"line":121,"code":"      it(\"single call with arguments\", function () {\n        const faux = createFaux();\n        faux(1, \"a\", true, false, [], {}, null, undefined);\n        assert.equals(faux.printf(\"%D\"), `\\n${color.red(\"1\")}\\n${color.red(\"'\\\"a\\\"'\")}\\n${color.red(\"true\")}\\n${color.red(\"false\")}\\n${color.red(\"[]\")}\\n${color.red(\"{}\")}\\n${color.red(\"null\")}\\n${color.red(\"undefined\")}`);\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"single call without arguments","suites":["proxy",".printf","arguments"],"updatePoint":{"line":126,"column":39,"index":4264},"line":126,"code":"      it(\"single call without arguments\", function () {\n        const faux = createFaux();\n        faux();\n        assert.equals(faux.printf(\"%D\"), \"\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"multiple calls with arguments","suites":["proxy",".printf","arguments"],"updatePoint":{"line":131,"column":39,"index":4427},"line":131,"code":"      it(\"multiple calls with arguments\", function () {\n        const faux = createFaux();\n        faux(1, \"a\", true);\n        faux(false, [], {});\n        faux(null, undefined);\n        assert.equals(faux.printf(\"%D\"), `${\"\\nCall 1:\\n\"}${color.red(\"1\")}\\n${color.red(\"'\\\"a\\\"'\")}\\n${color.red(\"true\")}\\nCall 2:` + `\\n${color.red(\"false\")}\\n${color.red(\"[]\")}\\n${color.red(\"{}\")}\\nCall 3:` + `\\n${color.red(\"null\")}\\n${color.red(\"undefined\")}`);\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"multiple calls without arguments","suites":["proxy",".printf","arguments"],"updatePoint":{"line":138,"column":42,"index":4885},"line":138,"code":"      it(\"multiple calls without arguments\", function () {\n        const faux = createFaux();\n        faux();\n        faux();\n        faux();\n        assert.equals(faux.printf(\"%D\"), \"\\nCall 1:\\nCall 2:\\nCall 3:\");\n      });","file":"proxy-test.js","skipped":false,"dir":"test"},{"name":"is defined","suites":["restore-object"],"updatePoint":{"line":11,"column":16,"index":378},"line":11,"code":"  it(\"is defined\", function () {\n    assert.isFunction(restoreObject);\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"throws on falsy input","suites":["restore-object"],"updatePoint":{"line":14,"column":27,"index":466},"line":14,"code":"  it(\"throws on falsy input\", function () {\n    assert.exception(function () {\n      restoreObject(false);\n    }, {\n      message: \"Trying to restore object but received false\"\n    });\n    assert.exception(function () {\n      restoreObject(null);\n    }, {\n      message: \"Trying to restore object but received null\"\n    });\n    assert.exception(function () {\n      restoreObject();\n    }, {\n      message: \"Trying to restore object but received undefined\"\n    });\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"throws with no spies or stubs","suites":["restore-object"],"updatePoint":{"line":31,"column":35,"index":944},"line":31,"code":"  it(\"throws with no spies or stubs\", function () {\n    assert.exception(function () {\n      restoreObject({\n        catpants: function () {},\n        meh: \"okay\"\n      });\n    }, {\n      message: \"Found no methods on object to which we could apply mutations\"\n    });\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"works with mixed spies and stubs","suites":["restore-object"],"updatePoint":{"line":41,"column":38,"index":1221},"line":41,"code":"  it(\"works with mixed spies and stubs\", function () {\n    let object = {\n      who: function () {},\n      what: function () {},\n      when: function () {},\n      why: \"I don't know\"\n    };\n    sinonSpy(object, \"who\");\n    sinonStub(object, \"what\");\n    refute.exception(function () {\n      object = restoreObject(object);\n    });\n    refute.isFunction(object.who.restore);\n    refute.isFunction(object.what.restore);\n    refute.isFunction(object.when.restore);\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"restores entire spied object","suites":["restore-object"],"updatePoint":{"line":57,"column":34,"index":1685},"line":57,"code":"  it(\"restores entire spied object\", function () {\n    let object = sinonSpy({\n      foo: function () {},\n      bar: function () {}\n    });\n    object = restoreObject(object);\n    refute.isFunction(object.foo.restore);\n    refute.isFunction(object.bar.restore);\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"restores entire stubbed object","suites":["restore-object"],"updatePoint":{"line":66,"column":36,"index":1955},"line":66,"code":"  it(\"restores entire stubbed object\", function () {\n    let object = sinonStub({\n      foo: function () {},\n      bar: function () {}\n    });\n    object = restoreObject(object);\n    refute.isFunction(object.foo.restore);\n    refute.isFunction(object.bar.restore);\n  });","file":"restore-object-test.js","skipped":false,"dir":"test"},{"name":"exposes match","suites":["Sandbox"],"updatePoint":{"line":38,"column":19,"index":1578},"line":38,"code":"  it(\"exposes match\", function () {\n    const sandbox = new Sandbox();\n    assert.same(sandbox.match, match);\n  });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"can be reset without failing when pre-configured to use a fake server","suites":["Sandbox"],"updatePoint":{"line":42,"column":75,"index":1750},"line":42,"code":"  it(\"can be reset without failing when pre-configured to use a fake server\", function () {\n    const sandbox = createSandbox({\n      useFakeServer: true\n    });\n    refute.exception(function () {\n      sandbox.reset();\n    });\n  });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"can be reset without failing when configured to use a fake server","suites":["Sandbox"],"updatePoint":{"line":50,"column":71,"index":1980},"line":50,"code":"  it(\"can be reset without failing when configured to use a fake server\", function () {\n    const sandbox = new Sandbox();\n    sandbox.useFakeServer();\n    refute.exception(function () {\n      sandbox.reset();\n    });\n  });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns a mock","suites":["Sandbox",".mock"],"updatePoint":{"line":61,"column":22,"index":2264},"line":61,"code":"    it(\"returns a mock\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      const actual = this.sandbox.mock(object);\n      actual.expects(\"method\");\n      assert.equals(typeof actual.verify, \"function\");\n      assert.equals(typeof object.method.restore, \"function\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"adds mock to fake array","suites":["Sandbox",".mock"],"updatePoint":{"line":72,"column":31,"index":2608},"line":72,"code":"    it(\"adds mock to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      const expected = this.sandbox.mock(object);\n      assert(fakes.indexOf(expected) !== -1);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"appends mocks to fake array","suites":["Sandbox",".mock"],"updatePoint":{"line":82,"column":35,"index":2899},"line":82,"code":"    it(\"appends mocks to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      this.sandbox.mock({});\n      this.sandbox.mock({});\n      assert.equals(fakes.length, 2);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"appends mocks and stubs to fake array","suites":["Sandbox","stub and mock test"],"updatePoint":{"line":93,"column":45,"index":3238},"line":93,"code":"    it(\"appends mocks and stubs to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      this.sandbox.mock({\n        method: function () {\n          return;\n        }\n      }, \"method\");\n      this.sandbox.stub({\n        method: function () {\n          return;\n        }\n      }, \"method\");\n      assert.equals(fakes.length, 2);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"many fakes are created","suites":["Sandbox","stub and mock test","warns of potential leak when"],"updatePoint":{"line":115,"column":32,"index":3828},"line":115,"code":"      it(\"many fakes are created\", function () {\n        assert.equals(typeof this.sandbox.leakThreshold, \"number\");\n        createTooManyFakes(this.sandbox);\n        assert(warn.called);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"a configurable number of fakes are created","suites":["Sandbox","stub and mock test","warns of potential leak when"],"updatePoint":{"line":120,"column":52,"index":4046},"line":120,"code":"      it(\"a configurable number of fakes are created\", function () {\n        this.sandbox.leakThreshold = 20;\n        createTooManyFakes(this.sandbox);\n        assert(warn.called);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"a leak warning has not already been output","suites":["Sandbox","stub and mock test","warns of potential leak when"],"updatePoint":{"line":125,"column":52,"index":4237},"line":125,"code":"      it(\"a leak warning has not already been output\", function () {\n        this.sandbox.leakThreshold = 20;\n        createTooManyFakes(this.sandbox);\n        this.sandbox.restore();\n        warn.resetHistory();\n        createTooManyFakes(this.sandbox);\n        assert(!warn.called);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a spy","suites":["Sandbox",".spy"],"updatePoint":{"line":141,"column":27,"index":4700},"line":141,"code":"    it(\"should return a spy\", function () {\n      const sandbox = createSandbox();\n      const spy = sandbox.spy();\n      assert.isFunction(spy);\n      assert.equals(spy.displayName, \"spy\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a spy to the internal collection","suites":["Sandbox",".spy"],"updatePoint":{"line":147,"column":51,"index":4923},"line":147,"code":"    it(\"should add a spy to the internal collection\", function () {\n      const sandbox = createSandbox();\n      const fakes = sandbox.getFakes();\n      const expected = sandbox.spy();\n      assert.isTrue(fakes.indexOf(expected) !== -1);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"stubs existing methods","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":158,"column":30,"index":5277},"line":158,"code":"    it(\"stubs existing methods\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class);\n      stub.method.returns(3);\n      assert.equals(3, stub.method());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should require a function","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":169,"column":33,"index":5592},"line":169,"code":"    it(\"should require a function\", function () {\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.createStubInstance(\"not a function\");\n      }, {\n        name: \"TypeError\",\n        message: \"The constructor should be a function.\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"resets all stub methods on reset()","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":178,"column":42,"index":5891},"line":178,"code":"    it(\"resets all stub methods on reset()\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method1 = function () {\n        return;\n      };\n      Class.prototype.method2 = function () {\n        return;\n      };\n      Class.prototype.method3 = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class);\n      stub.method1.returns(1);\n      stub.method2.returns(2);\n      stub.method3.returns(3);\n      assert.equals(3, stub.method3());\n      this.sandbox.reset();\n      assert.isUndefined(stub.method1());\n      assert.isUndefined(stub.method2());\n      assert.isUndefined(stub.method3());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"doesn't stub fake methods","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":201,"column":33,"index":6567},"line":201,"code":"    it(\"doesn't stub fake methods\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.noop = noop;\n      const stub = this.sandbox.createStubInstance(Class);\n      assert.exception(function () {\n        stub.method.returns(3);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"doesn't call the constructor","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":211,"column":36,"index":6860},"line":211,"code":"    it(\"doesn't call the constructor\", function () {\n      const Class = function (a, b) {\n        const c = a + b;\n        throw c;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class);\n      refute.exception(function () {\n        stub.method(3);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"retains non function values","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":224,"column":35,"index":7209},"line":224,"code":"    it(\"retains non function values\", function () {\n      const TYPE = \"some-value\";\n      const Class = function () {\n        return;\n      };\n      Class.prototype.noop = noop;\n      Class.prototype.type = TYPE;\n      const stub = this.sandbox.createStubInstance(Class);\n      assert.equals(TYPE, stub.type);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"has no side effects on the prototype","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":234,"column":44,"index":7537},"line":234,"code":"    it(\"has no side effects on the prototype\", function () {\n      const proto = {\n        method: function () {\n          throw new Error(\"error\");\n        }\n      };\n      const Class = function () {\n        return;\n      };\n      Class.prototype = proto;\n      const stub = this.sandbox.createStubInstance(Class);\n      refute.exception(stub.method);\n      assert.exception(proto.method);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"throws exception for non function params","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":248,"column":48,"index":7941},"line":248,"code":"    it(\"throws exception for non function params\", function () {\n      const types = [{}, 3, \"hi!\"];\n      for (let i = 0; i < types.length; i++) {\n        // yes, it's silly to create functions in a loop, it's also a test\n        /* eslint-disable-next-line no-loop-func */\n        assert.exception(function () {\n          this.sandbox.createStubInstance(types[i]);\n        });\n      }\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows providing optional overrides","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":258,"column":43,"index":8331},"line":258,"code":"    it(\"allows providing optional overrides\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class, {\n        method: sinonStub().returns(3)\n      });\n      assert.equals(3, stub.method());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows providing optional returned values","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":270,"column":49,"index":8682},"line":270,"code":"    it(\"allows providing optional returned values\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class, {\n        method: 3\n      });\n      assert.equals(3, stub.method());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows providing null as a return value","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":282,"column":47,"index":9010},"line":282,"code":"    it(\"allows providing null as a return value\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const stub = this.sandbox.createStubInstance(Class, {\n        method: null\n      });\n      assert.equals(null, stub.method());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"throws an exception when trying to override non-existing property","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":294,"column":73,"index":9370},"line":294,"code":"    it(\"throws an exception when trying to override non-existing property\", function () {\n      const Class = function () {\n        return;\n      };\n      Class.prototype.method = function () {\n        return;\n      };\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.createStubInstance(Class, {\n          foo: sinonStub().returns(3)\n        });\n      }, {\n        message: \"Cannot stub foo. Property does not exist!\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores an instance where every function of the prototype has been replaced by a no-op (#2477)","suites":["Sandbox",".createStubInstance"],"updatePoint":{"line":310,"column":103,"index":9876},"line":310,"code":"    it(\"restores an instance where every function of the prototype has been replaced by a no-op (#2477)\", function () {\n      const sandbox = this.sandbox;\n      class SystemUnderTest {\n        constructor() {\n          this.privateGetter = () => 42;\n        }\n        getValue() {\n          return this.privateGetter();\n        }\n      }\n      const stubInstance = sandbox.createStubInstance(SystemUnderTest);\n      sandbox.restore();\n      refute.exception(stubInstance.getValue);\n      assert.isUndefined(stubInstance.getValue());\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"fails if stubbing property on null","suites":["Sandbox",".stub"],"updatePoint":{"line":330,"column":42,"index":10472},"line":330,"code":"    it(\"fails if stubbing property on null\", function () {\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.stub(null, \"prop\");\n      }, {\n        message: \"Trying to stub property 'prop' of null\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"fails if stubbing symbol on null","suites":["Sandbox",".stub"],"updatePoint":{"line":338,"column":40,"index":10725},"line":338,"code":"    it(\"fails if stubbing symbol on null\", function () {\n      if (typeof Symbol === \"function\") {\n        const sandbox = this.sandbox;\n        assert.exception(function () {\n          sandbox.stub(null, Symbol(\"apple pie\"));\n        }, {\n          message: \"Trying to stub property 'Symbol(apple pie)' of null\"\n        });\n      }\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"creates a stub","suites":["Sandbox",".stub"],"updatePoint":{"line":348,"column":22,"index":11048},"line":348,"code":"    it(\"creates a stub\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      this.sandbox.stub(object, \"method\");\n      assert.equals(typeof object.method.restore, \"function\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"adds stub to fake array","suites":["Sandbox",".stub"],"updatePoint":{"line":357,"column":31,"index":11300},"line":357,"code":"    it(\"adds stub to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      const stub = this.sandbox.stub(object, \"method\");\n      assert.isTrue(fakes.indexOf(stub) !== -1);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"appends stubs to fake array","suites":["Sandbox",".stub"],"updatePoint":{"line":367,"column":35,"index":11600},"line":367,"code":"    it(\"appends stubs to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      this.sandbox.stub({\n        method: function () {\n          return;\n        }\n      }, \"method\");\n      this.sandbox.stub({\n        method: function () {\n          return;\n        }\n      }, \"method\");\n      assert.equals(fakes.length, 2);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"adds all object methods to fake array","suites":["Sandbox",".stub"],"updatePoint":{"line":381,"column":45,"index":11961},"line":381,"code":"    it(\"adds all object methods to fake array\", function () {\n      const fakes = this.sandbox.getFakes();\n      const object = {\n        method: function () {\n          return;\n        },\n        method2: function () {\n          return;\n        },\n        method3: function () {\n          return;\n        }\n      };\n      Object.defineProperty(object, \"method3\", {\n        enumerable: false\n      });\n      this.sandbox.stub(object);\n      assert.isTrue(fakes.indexOf(object.method) !== -1);\n      assert.isTrue(fakes.indexOf(object.method2) !== -2);\n      assert.isTrue(fakes.indexOf(object.method3) !== -3);\n      assert.equals(fakes.length, 3);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns a stubbed object","suites":["Sandbox",".stub"],"updatePoint":{"line":403,"column":32,"index":12605},"line":403,"code":"    it(\"returns a stubbed object\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      assert.equals(this.sandbox.stub(object), object);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns a stubbed method","suites":["Sandbox",".stub"],"updatePoint":{"line":411,"column":32,"index":12808},"line":411,"code":"    it(\"returns a stubbed method\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      assert.equals(this.sandbox.stub(object, \"method\"), object.method);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"stubs environment property","suites":["Sandbox",".stub","on node"],"updatePoint":{"line":428,"column":36,"index":13287},"line":428,"code":"      it(\"stubs environment property\", function () {\n        const originalPrintWarning = deprecated.printWarning;\n        deprecated.printWarning = function () {\n          return;\n        };\n        this.sandbox.stub(process.env, \"HELL\").value(\"froze over\");\n        assert.equals(process.env.HELL, \"froze over\");\n        deprecated.printWarning = originalPrintWarning;\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"stubs number property","suites":["Sandbox","stub anything"],"updatePoint":{"line":446,"column":29,"index":13842},"line":446,"code":"    it(\"stubs number property\", function () {\n      const originalPrintWarning = deprecated.printWarning;\n      deprecated.printWarning = function () {\n        return;\n      };\n      this.sandbox.stub(this.object, \"property\").value(1);\n      assert.equals(this.object.property, 1);\n      deprecated.printWarning = originalPrintWarning;\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores number property","suites":["Sandbox","stub anything"],"updatePoint":{"line":455,"column":32,"index":14189},"line":455,"code":"    it(\"restores number property\", function () {\n      const originalPrintWarning = deprecated.printWarning;\n      deprecated.printWarning = function () {\n        return;\n      };\n      this.sandbox.stub(this.object, \"property\").value(1);\n      this.sandbox.restore();\n      assert.equals(this.object.property, 42);\n      deprecated.printWarning = originalPrintWarning;\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"fails if property does not exist","suites":["Sandbox","stub anything"],"updatePoint":{"line":465,"column":40,"index":14575},"line":465,"code":"    it(\"fails if property does not exist\", function () {\n      const originalPrintWarning = deprecated.printWarning;\n      deprecated.printWarning = function () {\n        return;\n      };\n      const sandbox = this.sandbox;\n      const object = {};\n      assert.exception(function () {\n        sandbox.stub(object, \"prop\", 1);\n      });\n      deprecated.printWarning = originalPrintWarning;\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"fails if Symbol does not exist","suites":["Sandbox","stub anything"],"updatePoint":{"line":477,"column":38,"index":14972},"line":477,"code":"    it(\"fails if Symbol does not exist\", function () {\n      if (typeof Symbol === \"function\") {\n        const sandbox = this.sandbox;\n        const object = {};\n        const originalPrintWarning = deprecated.printWarning;\n        deprecated.printWarning = function () {\n          return;\n        };\n        assert.exception(function () {\n          sandbox.stub(object, Symbol(\"apple pie\"));\n        }, {\n          message: \"Cannot stub non-existent property Symbol(apple pie)\"\n        }, TypeError);\n        deprecated.printWarning = originalPrintWarning;\n      }\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake","suites":["Sandbox",".fake"],"updatePoint":{"line":495,"column":28,"index":15576},"line":495,"code":"    it(\"should return a fake\", function () {\n      const sandbox = createSandbox();\n      const fake = sandbox.fake();\n      assert.isFunction(fake);\n      assert.equals(fake.displayName, \"fake\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake to the internal collection","suites":["Sandbox",".fake"],"updatePoint":{"line":501,"column":52,"index":15805},"line":501,"code":"    it(\"should add a fake to the internal collection\", function () {\n      const sandbox = createSandbox();\n      const fakes = sandbox.getFakes();\n      const expected = sandbox.fake();\n      assert.isTrue(fakes.indexOf(expected) !== -1);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".returns"],"updatePoint":{"line":508,"column":39,"index":16079},"line":508,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.returns();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".returns"],"updatePoint":{"line":514,"column":63,"index":16337},"line":514,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.returns();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".throws"],"updatePoint":{"line":522,"column":39,"index":16636},"line":522,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.throws();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".throws"],"updatePoint":{"line":528,"column":63,"index":16893},"line":528,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.throws();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".resolves"],"updatePoint":{"line":536,"column":39,"index":17193},"line":536,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.resolves();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".resolves"],"updatePoint":{"line":542,"column":63,"index":17452},"line":542,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.resolves();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".rejects"],"updatePoint":{"line":550,"column":39,"index":17753},"line":550,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.rejects();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".rejects"],"updatePoint":{"line":556,"column":63,"index":18011},"line":556,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.rejects();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".yields"],"updatePoint":{"line":564,"column":39,"index":18310},"line":564,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.yields();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".yields"],"updatePoint":{"line":570,"column":63,"index":18567},"line":570,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.yields();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return a fake behavior","suites":["Sandbox",".fake",".yieldsAsync"],"updatePoint":{"line":578,"column":39,"index":18870},"line":578,"code":"      it(\"should return a fake behavior\", function () {\n        const sandbox = createSandbox();\n        const fake = sandbox.fake.yieldsAsync();\n        assert.isFunction(fake);\n        assert.equals(fake.displayName, \"fake\");\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should add a fake behavior to the internal collection","suites":["Sandbox",".fake",".yieldsAsync"],"updatePoint":{"line":584,"column":63,"index":19132},"line":584,"code":"      it(\"should add a fake behavior to the internal collection\", function () {\n        const sandbox = createSandbox();\n        const fakes = sandbox.getFakes();\n        const expected = sandbox.fake.yieldsAsync();\n        assert.isTrue(fakes.indexOf(expected) !== -1);\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls verify and restore","suites":["Sandbox",".verifyAndRestore"],"updatePoint":{"line":596,"column":32,"index":19517},"line":596,"code":"    it(\"calls verify and restore\", function () {\n      this.sandbox.verify = sinonSpy();\n      this.sandbox.restore = sinonSpy();\n      this.sandbox.verifyAndRestore();\n      assert(this.sandbox.verify.called);\n      assert(this.sandbox.restore.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"throws when restore throws","suites":["Sandbox",".verifyAndRestore"],"updatePoint":{"line":603,"column":34,"index":19781},"line":603,"code":"    it(\"throws when restore throws\", function () {\n      this.sandbox.verify = sinonSpy();\n      this.sandbox.restore = sinonStub().throws();\n      assert.exception(function () {\n        this.sandbox.verifyAndRestore();\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls restore when restore throws","suites":["Sandbox",".verifyAndRestore"],"updatePoint":{"line":610,"column":41,"index":20026},"line":610,"code":"    it(\"calls restore when restore throws\", function () {\n      const sandbox = this.sandbox;\n      sandbox.verify = sinonSpy();\n      sandbox.restore = sinonStub().throws();\n      assert.exception(function () {\n        sandbox.verifyAndRestore();\n      });\n      assert(sandbox.restore.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace a function property","suites":["Sandbox",".replace"],"updatePoint":{"line":624,"column":42,"index":20449},"line":624,"code":"    it(\"should replace a function property\", function () {\n      const replacement = function replacement() {\n        return;\n      };\n      const existing = function existing() {\n        return;\n      };\n      const object = {\n        property: existing\n      };\n      this.sandbox.replace(object, \"property\", replacement);\n      assert.equals(object.property, replacement);\n      this.sandbox.restore();\n      assert.equals(object.property, existing);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace a non-function property","suites":["Sandbox",".replace"],"updatePoint":{"line":639,"column":46,"index":20915},"line":639,"code":"    it(\"should replace a non-function property\", function () {\n      const replacement = \"replacement\";\n      const existing = \"existing\";\n      const object = {\n        property: existing\n      };\n      this.sandbox.replace(object, \"property\", replacement);\n      assert.equals(object.property, replacement);\n      this.sandbox.restore();\n      assert.equals(object.property, existing);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace an inherited property","suites":["Sandbox",".replace"],"updatePoint":{"line":650,"column":44,"index":21309},"line":650,"code":"    it(\"should replace an inherited property\", function () {\n      const replacement = \"replacement\";\n      const existing = \"existing\";\n      const object = Object.create({\n        property: existing\n      });\n      this.sandbox.replace(object, \"property\", replacement);\n      assert.equals(object.property, replacement);\n      this.sandbox.restore();\n      assert.equals(object.property, existing);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error on missing descriptor","suites":["Sandbox",".replace"],"updatePoint":{"line":661,"column":42,"index":21716},"line":661,"code":"    it(\"should error on missing descriptor\", function () {\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.replace({}, \"i-dont-exist\");\n      }, {\n        message: \"Cannot replace non-existent property i-dont-exist\",\n        name: \"TypeError\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error on missing replacement","suites":["Sandbox",".replace"],"updatePoint":{"line":670,"column":43,"index":22019},"line":670,"code":"    it(\"should error on missing replacement\", function () {\n      const sandbox = this.sandbox;\n      const object = Object.create({\n        property: \"catpants\"\n      });\n      assert.exception(function () {\n        sandbox.replace(object, \"property\");\n      }, {\n        message: \"Expected replacement argument to be defined\",\n        name: \"TypeError\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a non-function with a function","suites":["Sandbox",".replace"],"updatePoint":{"line":682,"column":63,"index":22412},"line":682,"code":"    it(\"should refuse to replace a non-function with a function\", function () {\n      const sandbox = this.sandbox;\n      const replacement = function () {\n        return \"replacement\";\n      };\n      const existing = \"existing\";\n      const object = {\n        property: existing\n      };\n      assert.exception(function () {\n        sandbox.replace(object, \"property\", replacement);\n      }, {\n        message: \"Cannot replace string with function\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a function with a non-function","suites":["Sandbox",".replace"],"updatePoint":{"line":697,"column":63,"index":22880},"line":697,"code":"    it(\"should refuse to replace a function with a non-function\", function () {\n      const sandbox = this.sandbox;\n      const replacement = \"replacement\";\n      const object = {\n        property: function () {\n          return \"apple pie\";\n        }\n      };\n      assert.exception(function () {\n        sandbox.replace(object, \"property\", replacement);\n      }, {\n        message: \"Cannot replace function with string\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a fake twice","suites":["Sandbox",".replace"],"updatePoint":{"line":711,"column":45,"index":23302},"line":711,"code":"    it(\"should refuse to replace a fake twice\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        property: function () {\n          return \"apple pie\";\n        }\n      };\n      sandbox.replace(object, \"property\", sinonFake());\n      assert.exception(function () {\n        sandbox.replace(object, \"property\", sinonFake());\n      }, {\n        message: \"Attempted to replace property which is already replaced\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a string twice","suites":["Sandbox",".replace"],"updatePoint":{"line":725,"column":47,"index":23761},"line":725,"code":"    it(\"should refuse to replace a string twice\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        property: \"original\"\n      };\n      sandbox.replace(object, \"property\", \"first\");\n      assert.exception(function () {\n        sandbox.replace(object, \"property\", \"second\");\n      }, {\n        message: \"Attempted to replace property which is already replaced\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return the replacement argument","suites":["Sandbox",".replace"],"updatePoint":{"line":737,"column":46,"index":24169},"line":737,"code":"    it(\"should return the replacement argument\", function () {\n      const replacement = \"replacement\";\n      const existing = \"existing\";\n      const object = {\n        property: existing\n      };\n      const actual = this.sandbox.replace(object, \"property\", replacement);\n      assert.equals(actual, replacement);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should throw an Error","suites":["Sandbox",".replace","when asked to replace a getter"],"updatePoint":{"line":747,"column":31,"index":24539},"line":747,"code":"      it(\"should throw an Error\", function () {\n        const sandbox = this.sandbox;\n        const object = {\n          get foo() {\n            return \"bar\";\n          }\n        };\n        assert.exception(function () {\n          sandbox.replace(object, \"foo\", sinonFake());\n        }, {\n          message: \"Use sandbox.replaceGetter for replacing getters\"\n        });\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should throw an Error","suites":["Sandbox",".replace","when asked to replace a setter"],"updatePoint":{"line":762,"column":31,"index":24988},"line":762,"code":"      it(\"should throw an Error\", function () {\n        const sandbox = this.sandbox;\n        const object = {\n          // eslint-disable-next-line accessor-pairs\n          set foo(value) {\n            this.prop = value;\n          }\n        };\n        assert.exception(function () {\n          sandbox.replace(object, \"foo\", sinonFake());\n        }, {\n          message: \"Use sandbox.replaceSetter for replacing setters\"\n        });\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace getters","suites":["Sandbox",".replaceGetter"],"updatePoint":{"line":782,"column":30,"index":25562},"line":782,"code":"    it(\"should replace getters\", function () {\n      const expected = \"baz\";\n      const object = {\n        get foo() {\n          return \"bar\";\n        }\n      };\n      this.sandbox.replaceGetter(object, \"foo\", sinonFake.returns(expected));\n      assert.equals(object.foo, expected);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return replacement","suites":["Sandbox",".replaceGetter"],"updatePoint":{"line":792,"column":33,"index":25857},"line":792,"code":"    it(\"should return replacement\", function () {\n      const replacement = sinonFake.returns(\"baz\");\n      const object = {\n        get foo() {\n          return \"bar\";\n        }\n      };\n      const actual = this.sandbox.replaceGetter(object, \"foo\", replacement);\n      assert.equals(actual, replacement);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace an inherited property","suites":["Sandbox",".replaceGetter"],"updatePoint":{"line":802,"column":44,"index":26183},"line":802,"code":"    it(\"should replace an inherited property\", function () {\n      const expected = \"baz\";\n      const replacement = sinonFake.returns(expected);\n      const existing = \"existing\";\n      const object = Object.create({\n        get foo() {\n          return existing;\n        }\n      });\n      this.sandbox.replaceGetter(object, \"foo\", replacement);\n      assert.equals(object.foo, expected);\n      this.sandbox.restore();\n      assert.equals(object.foo, existing);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error on missing descriptor","suites":["Sandbox",".replaceGetter"],"updatePoint":{"line":816,"column":42,"index":26652},"line":816,"code":"    it(\"should error on missing descriptor\", function () {\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.replaceGetter({}, \"i-dont-exist\");\n      }, {\n        message: \"Cannot replace non-existent property i-dont-exist\",\n        name: \"TypeError\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error when descriptor has no getter","suites":["Sandbox",".replaceGetter"],"updatePoint":{"line":825,"column":50,"index":26968},"line":825,"code":"    it(\"should error when descriptor has no getter\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        // eslint-disable-next-line accessor-pairs\n        set catpants(_) {\n          return;\n        }\n      };\n      assert.exception(function () {\n        sandbox.replaceGetter(object, \"catpants\", noop);\n      }, {\n        message: \"`object.property` is not a getter\",\n        name: \"Error\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should throw a TypeError","suites":["Sandbox",".replaceGetter","when called with a non-function replacement argument"],"updatePoint":{"line":841,"column":34,"index":27474},"line":841,"code":"      it(\"should throw a TypeError\", function () {\n        const sandbox = this.sandbox;\n        const expected = \"baz\";\n        const object = {\n          get foo() {\n            return \"bar\";\n          }\n        };\n        assert.exception(function () {\n          sandbox.replaceGetter(object, \"foo\", expected);\n        }, {\n          message: \"Expected replacement argument to be a function\"\n        });\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows restoring getters","suites":["Sandbox",".replaceGetter","when called with a non-function replacement argument"],"updatePoint":{"line":856,"column":32,"index":27897},"line":856,"code":"    it(\"allows restoring getters\", function () {\n      const expected = \"baz\";\n      const object = {\n        get foo() {\n          return \"bar\";\n        }\n      };\n      this.sandbox.replaceGetter(object, \"foo\", sinonFake.returns(expected));\n      this.sandbox.restore();\n      assert.equals(object.foo, \"bar\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a getter twice","suites":["Sandbox",".replaceGetter","when called with a non-function replacement argument"],"updatePoint":{"line":867,"column":47,"index":28233},"line":867,"code":"    it(\"should refuse to replace a getter twice\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        get foo() {\n          return \"bar\";\n        }\n      };\n      sandbox.replaceGetter(object, \"foo\", sinonFake.returns(\"one\"));\n      assert.exception(function () {\n        sandbox.replaceGetter(object, \"foo\", sinonFake.returns(\"two\"));\n      }, {\n        message: \"Attempted to replace foo which is already replaced\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace setter","suites":["Sandbox",".replaceSetter"],"updatePoint":{"line":886,"column":29,"index":28803},"line":886,"code":"    it(\"should replace setter\", function () {\n      const object = {\n        // eslint-disable-next-line accessor-pairs\n        set foo(value) {\n          this.prop = value;\n        },\n        prop: \"bar\"\n      };\n      this.sandbox.replaceSetter(object, \"foo\", function (val) {\n        this.prop = `${val}bla`;\n      });\n      object.foo = \"bla\";\n      assert.equals(object.prop, \"blabla\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return replacement","suites":["Sandbox",".replaceSetter"],"updatePoint":{"line":900,"column":33,"index":29207},"line":900,"code":"    it(\"should return replacement\", function () {\n      const object = {\n        // eslint-disable-next-line accessor-pairs\n        set foo(value) {\n          this.prop = value;\n        },\n        prop: \"bar\"\n      };\n      const replacement = function (val) {\n        this.prop = `${val}bla`;\n      };\n      const actual = this.sandbox.replaceSetter(object, \"foo\", replacement);\n      assert.equals(actual, replacement);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should replace an inherited property","suites":["Sandbox",".replaceSetter"],"updatePoint":{"line":914,"column":44,"index":29648},"line":914,"code":"    it(\"should replace an inherited property\", function () {\n      const object = Object.create({\n        // eslint-disable-next-line accessor-pairs\n        set foo(value) {\n          this.prop = value;\n        },\n        prop: \"bar\"\n      });\n      const replacement = function (value) {\n        this.prop = `${value}blabla`;\n      };\n      this.sandbox.replaceSetter(object, \"foo\", replacement);\n      object.foo = \"doodle\";\n      assert.equals(object.prop, \"doodleblabla\");\n      this.sandbox.restore();\n      object.foo = \"doodle\";\n      assert.equals(object.prop, \"doodle\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error on missing descriptor","suites":["Sandbox",".replaceSetter"],"updatePoint":{"line":932,"column":42,"index":30234},"line":932,"code":"    it(\"should error on missing descriptor\", function () {\n      const sandbox = this.sandbox;\n      assert.exception(function () {\n        sandbox.replaceSetter({}, \"i-dont-exist\");\n      }, {\n        message: \"Cannot replace non-existent property i-dont-exist\",\n        name: \"TypeError\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should error when descriptor has no setter","suites":["Sandbox",".replaceSetter"],"updatePoint":{"line":941,"column":50,"index":30550},"line":941,"code":"    it(\"should error when descriptor has no setter\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        get catpants() {\n          return;\n        }\n      };\n      assert.exception(function () {\n        sandbox.replaceSetter(object, \"catpants\", noop);\n      }, {\n        message: \"`object.property` is not a setter\",\n        name: \"Error\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should throw a TypeError","suites":["Sandbox",".replaceSetter","when called with a non-function replacement argument"],"updatePoint":{"line":956,"column":34,"index":31004},"line":956,"code":"      it(\"should throw a TypeError\", function () {\n        const sandbox = this.sandbox;\n        const object = {\n          // eslint-disable-next-line accessor-pairs\n          set foo(value) {\n            this.prop = value;\n          },\n          prop: \"bar\"\n        };\n        assert.exception(function () {\n          sandbox.replaceSetter(object, \"foo\", \"bla\");\n        }, {\n          message: \"Expected replacement argument to be a function\"\n        });\n      });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows restoring setters","suites":["Sandbox",".replaceSetter","when called with a non-function replacement argument"],"updatePoint":{"line":972,"column":32,"index":31478},"line":972,"code":"    it(\"allows restoring setters\", function () {\n      const object = {\n        // eslint-disable-next-line accessor-pairs\n        set foo(value) {\n          this.prop = value;\n        },\n        prop: \"bar\"\n      };\n      this.sandbox.replaceSetter(object, \"foo\", function (val) {\n        this.prop = `${val}bla`;\n      });\n      this.sandbox.restore();\n      object.prop = \"bla\";\n      assert.equals(object.prop, \"bla\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should refuse to replace a setter twice","suites":["Sandbox",".replaceSetter","when called with a non-function replacement argument"],"updatePoint":{"line":987,"column":47,"index":31924},"line":987,"code":"    it(\"should refuse to replace a setter twice\", function () {\n      const sandbox = this.sandbox;\n      const object = {\n        // eslint-disable-next-line accessor-pairs\n        set foo(value) {\n          return;\n        }\n      };\n      sandbox.replaceSetter(object, \"foo\", sinonFake());\n      assert.exception(function () {\n        sandbox.replaceSetter(object, \"foo\", sinonFake.returns(\"two\"));\n      }, {\n        message: \"Attempted to replace foo which is already replaced\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls reset on all fakes","suites":["Sandbox",".reset"],"updatePoint":{"line":1016,"column":32,"index":32760},"line":1016,"code":"    it(\"calls reset on all fakes\", function () {\n      const fake0 = this.sandbox.getFakes()[0];\n      const fake1 = this.sandbox.getFakes()[1];\n      this.sandbox.reset();\n      assert(fake0.reset.called);\n      assert(fake1.reset.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls resetHistory on all fakes","suites":["Sandbox",".reset"],"updatePoint":{"line":1023,"column":39,"index":33016},"line":1023,"code":"    it(\"calls resetHistory on all fakes\", function () {\n      const fake0 = this.sandbox.getFakes()[0];\n      const fake1 = this.sandbox.getFakes()[1];\n      this.sandbox.reset();\n      assert(fake0.resetHistory.called);\n      assert(fake1.resetHistory.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"resets fake behaviours","suites":["Sandbox",".reset"],"updatePoint":{"line":1030,"column":30,"index":33277},"line":1030,"code":"    it(\"resets fake behaviours\", function () {\n      const fake = this.sandbox.fake();\n      fake(1234);\n      this.sandbox.reset();\n      assert.equals(fake.getCalls(), []);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls resetBehavior on all fakes","suites":["Sandbox",".resetBehavior"],"updatePoint":{"line":1048,"column":40,"index":33776},"line":1048,"code":"    it(\"calls resetBehavior on all fakes\", function () {\n      const fake0 = this.sandbox.getFakes()[0];\n      const fake1 = this.sandbox.getFakes()[1];\n      this.sandbox.resetBehavior();\n      assert(fake0.resetBehavior.called);\n      assert(fake1.resetBehavior.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"resets the history on all fakes","suites":["Sandbox",".resetHistory"],"updatePoint":{"line":1067,"column":39,"index":34386},"line":1067,"code":"    it(\"resets the history on all fakes\", function () {\n      const fake0 = this.fakes[0];\n      const fake1 = this.fakes[1];\n      this.sandbox.resetHistory();\n      refute(fake0.called);\n      refute(fake1.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls reset on fake that does not have a resetHistory","suites":["Sandbox",".resetHistory"],"updatePoint":{"line":1074,"column":61,"index":34633},"line":1074,"code":"    it(\"calls reset on fake that does not have a resetHistory\", function () {\n      noop.reset = function reset() {\n        noop.reset.called = true;\n      };\n      this.fakes.push(noop);\n      this.sandbox.resetHistory();\n      assert.isTrue(noop.reset.called);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns clock object","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1090,"column":28,"index":35059},"line":1090,"code":"    it(\"returns clock object\", function () {\n      const clock = this.sandbox.useFakeTimers();\n      assert.isObject(clock);\n      assert.isFunction(clock.tick);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"exposes clock property","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1095,"column":30,"index":35231},"line":1095,"code":"    it(\"exposes clock property\", function () {\n      this.sandbox.useFakeTimers();\n      assert.isObject(this.sandbox.clock);\n      assert.isFunction(this.sandbox.clock.tick);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"uses restorable clock","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1100,"column":29,"index":35414},"line":1100,"code":"    it(\"uses restorable clock\", function () {\n      this.sandbox.useFakeTimers();\n      assert.clock(this.sandbox.clock);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"passes arguments to sinon.useFakeTimers","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1104,"column":47,"index":35562},"line":1104,"code":"    it(\"passes arguments to sinon.useFakeTimers\", function () {\n      const useFakeTimersStub = sinonStub(sinonClock, \"useFakeTimers\").returns({});\n      this.sandbox.useFakeTimers({\n        toFake: [\"Date\", \"setTimeout\"]\n      });\n      this.sandbox.useFakeTimers({\n        toFake: [\"setTimeout\", \"clearTimeout\", \"setInterval\"]\n      });\n      assert(useFakeTimersStub.calledWith({\n        toFake: [\"Date\", \"setTimeout\"]\n      }));\n      assert(useFakeTimersStub.calledWith({\n        toFake: [\"setTimeout\", \"clearTimeout\", \"setInterval\"]\n      }));\n      useFakeTimersStub.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores the fakeTimer clock created by the sandbox when the sandbox is restored","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1120,"column":88,"index":36196},"line":1120,"code":"    it(\"restores the fakeTimer clock created by the sandbox when the sandbox is restored\", function () {\n      const originalSetTimeout = setTimeout;\n      this.sandbox.useFakeTimers();\n      refute.same(setTimeout, originalSetTimeout, \"fakeTimers installed\");\n      this.sandbox.restore();\n      assert.same(setTimeout, originalSetTimeout, \"fakeTimers restored\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores spied fake timers when the sandbox is restored","suites":["Sandbox",".useFakeTimers"],"updatePoint":{"line":1127,"column":63,"index":36544},"line":1127,"code":"    it(\"restores spied fake timers when the sandbox is restored\", function () {\n      const originalSetTimeout = setTimeout;\n      this.sandbox.useFakeTimers();\n      this.sandbox.spy(globalContext, \"setTimeout\");\n      this.sandbox.restore();\n      assert.same(originalSetTimeout, globalContext.setTimeout, \"fakeTimers restored\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"must be a function","suites":["Sandbox",".usingPromise"],"updatePoint":{"line":1142,"column":26,"index":37034},"line":1142,"code":"    it(\"must be a function\", function () {\n      assert.isFunction(this.sandbox.usingPromise);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"must return the sandbox","suites":["Sandbox",".usingPromise"],"updatePoint":{"line":1145,"column":31,"index":37142},"line":1145,"code":"    it(\"must return the sandbox\", function () {\n      const mockPromise = {};\n      const actual = this.sandbox.usingPromise(mockPromise);\n      assert.same(actual, this.sandbox);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"must set all stubs created from sandbox with mockPromise","suites":["Sandbox",".usingPromise"],"updatePoint":{"line":1150,"column":64,"index":37363},"line":1150,"code":"    it(\"must set all stubs created from sandbox with mockPromise\", function () {\n      if (!supportPromise) {\n        return this.skip();\n      }\n      const resolveValue = {};\n      const mockPromise = {\n        resolve: sinonStub().resolves(resolveValue)\n      };\n      this.sandbox.usingPromise(mockPromise);\n      const stub = this.sandbox.stub().resolves();\n      return stub().then(function (action) {\n        assert.same(resolveValue, action);\n        assert(mockPromise.resolve.calledOnce);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"must set all stubs created from sandbox with mockPromise","suites":["Sandbox",".usingPromise"],"updatePoint":{"line":1167,"column":64,"index":37938},"line":1167,"code":"    it(\"must set all stubs created from sandbox with mockPromise\", function () {\n      if (!supportPromise) {\n        return this.skip();\n      }\n      const resolveValue = {};\n      const mockPromise = {\n        resolve: sinonStub().resolves(resolveValue)\n      };\n      const stubbedObject = {\n        stubbedMethod: function () {\n          return;\n        }\n      };\n      this.sandbox.usingPromise(mockPromise);\n      this.sandbox.stub(stubbedObject);\n      stubbedObject.stubbedMethod.resolves({});\n      return stubbedObject.stubbedMethod().then(function (action) {\n        assert.same(resolveValue, action);\n        assert(mockPromise.resolve.calledOnce);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"must set all mocks created from sandbox with mockPromise","suites":["Sandbox",".usingPromise"],"updatePoint":{"line":1188,"column":64,"index":38619},"line":1188,"code":"    it(\"must set all mocks created from sandbox with mockPromise\", function () {\n      if (!supportPromise) {\n        return this.skip();\n      }\n      const resolveValue = {};\n      const mockPromise = {\n        resolve: sinonStub().resolves(resolveValue)\n      };\n      const mockedObject = {\n        mockedMethod: function () {\n          return;\n        }\n      };\n      this.sandbox.usingPromise(mockPromise);\n      const mock = this.sandbox.mock(mockedObject);\n      mock.expects(\"mockedMethod\").resolves({});\n      return mockedObject.mockedMethod().then(function (action) {\n        assert.same(resolveValue, action);\n        assert(mockPromise.resolve.calledOnce);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls sinon.useFakeXMLHttpRequest","suites":["Sandbox","fake XHR/server",".useFakeXMLHttpRequest"],"updatePoint":{"line":1221,"column":45,"index":39676},"line":1221,"code":"        it(\"calls sinon.useFakeXMLHttpRequest\", function () {\n          const stubXhr = {\n            restore: function () {\n              return;\n            }\n          };\n          this.sandbox.stub(fakeXhr, \"useFakeXMLHttpRequest\").returns(stubXhr);\n          const returnedXhr = this.sandbox.useFakeXMLHttpRequest();\n          assert(fakeXhr.useFakeXMLHttpRequest.called);\n          assert.equals(stubXhr, returnedXhr);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns fake xhr object created by nise","suites":["Sandbox","fake XHR/server",".useFakeXMLHttpRequest"],"updatePoint":{"line":1232,"column":51,"index":40119},"line":1232,"code":"        it(\"returns fake xhr object created by nise\", function () {\n          this.sandbox.stub(fakeXhr, \"useFakeXMLHttpRequest\").returns({\n            restore: function () {\n              return;\n            }\n          });\n          this.sandbox.useFakeXMLHttpRequest();\n          assert(fakeXhr.useFakeXMLHttpRequest.called);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"doesn't secretly use useFakeServer","suites":["Sandbox","fake XHR/server",".useFakeXMLHttpRequest"],"updatePoint":{"line":1241,"column":46,"index":40455},"line":1241,"code":"        it(\"doesn't secretly use useFakeServer\", function () {\n          this.sandbox.stub(fakeServer, \"create\").returns({\n            restore: function () {\n              return;\n            }\n          });\n          this.sandbox.useFakeXMLHttpRequest();\n          assert(fakeServer.create.notCalled);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"adds fake xhr to fake collection","suites":["Sandbox","fake XHR/server",".useFakeXMLHttpRequest"],"updatePoint":{"line":1250,"column":44,"index":40768},"line":1250,"code":"        it(\"adds fake xhr to fake collection\", function () {\n          this.sandbox.useFakeXMLHttpRequest();\n          this.sandbox.restore();\n          assert.same(globalContext.XMLHttpRequest, globalXHR);\n          assert.same(globalContext.ActiveXObject, globalAXO);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"returns server","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1264,"column":26,"index":41252},"line":1264,"code":"        it(\"returns server\", function () {\n          const server = this.sandbox.useFakeServer();\n          assert.isObject(server);\n          assert.isFunction(server.restore);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"exposes server property","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1269,"column":35,"index":41451},"line":1269,"code":"        it(\"exposes server property\", function () {\n          const server = this.sandbox.useFakeServer();\n          assert.same(this.sandbox.server, server);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"creates server","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1273,"column":26,"index":41613},"line":1273,"code":"        it(\"creates server\", function () {\n          const server = this.sandbox.useFakeServer();\n          assert(fakeServer.isPrototypeOf(server));\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"creates server without clock by default","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1277,"column":51,"index":41800},"line":1277,"code":"        it(\"creates server without clock by default\", function () {\n          const server = this.sandbox.useFakeServer();\n          refute(fakeServerWithClock.isPrototypeOf(server));\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"creates server with clock","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1281,"column":37,"index":41982},"line":1281,"code":"        it(\"creates server with clock\", function () {\n          this.sandbox.serverPrototype = fakeServerWithClock;\n          const server = this.sandbox.useFakeServer();\n          assert(fakeServerWithClock.isPrototypeOf(server));\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"adds server to fake collection","suites":["Sandbox","fake XHR/server",".useFakeServer"],"updatePoint":{"line":1286,"column":42,"index":42231},"line":1286,"code":"        it(\"adds server to fake collection\", function () {\n          this.sandbox.useFakeServer();\n          this.sandbox.restore();\n          assert.same(globalContext.XMLHttpRequest, globalXHR);\n          assert.same(globalContext.ActiveXObject, globalAXO);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"injects spy, stub, mock, fake, replace, replaceSetter, createStubInstance","suites":["Sandbox",".inject"],"updatePoint":{"line":1303,"column":81,"index":42760},"line":1303,"code":"    it(\"injects spy, stub, mock, fake, replace, replaceSetter, createStubInstance\", function () {\n      this.sandbox.inject(this.obj);\n      assert.isFunction(this.obj.spy);\n      assert.isFunction(this.obj.stub);\n      assert.isFunction(this.obj.mock);\n      assert.isFunction(this.obj.createStubInstance);\n      assert.isFunction(this.obj.fake);\n      assert.isFunction(this.obj.replace);\n      assert.isFunction(this.obj.replaceSetter);\n      assert.isFunction(this.obj.replaceGetter);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should inject callable functions","suites":["Sandbox",".inject"],"updatePoint":{"line":1314,"column":40,"index":43216},"line":1314,"code":"    it(\"should inject callable functions\", function () {\n      /* eslint-disable no-empty-function, accessor-pairs */\n      this.sandbox.inject(this.obj);\n      const myObj = {\n        a: function () {}\n      };\n      function MyClass() {}\n      MyClass.prototype.method1 = noop;\n      Object.defineProperty(myObj, \"b\", {\n        get: function () {\n          return 42;\n        },\n        configurable: true\n      });\n      Object.defineProperty(myObj, \"c\", {\n        set: function () {},\n        configurable: true\n      });\n      refute.exception(function () {\n        this.obj.createStubInstance(MyClass);\n        const fake = this.obj.fake();\n        this.obj.replace(myObj, \"a\", fake);\n        this.obj.replaceGetter(myObj, \"b\", fake);\n        this.obj.replaceSetter(myObj, \"c\", fake);\n      }.bind(this));\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"does not define clock, server and requests objects","suites":["Sandbox",".inject"],"updatePoint":{"line":1340,"column":58,"index":44054},"line":1340,"code":"    it(\"does not define clock, server and requests objects\", function () {\n      this.sandbox.inject(this.obj);\n      assert.isFalse(\"clock\" in this.obj);\n      assert.isFalse(\"server\" in this.obj);\n      assert.isFalse(\"requests\" in this.obj);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"defines clock when using fake time","suites":["Sandbox",".inject"],"updatePoint":{"line":1346,"column":42,"index":44291},"line":1346,"code":"    it(\"defines clock when using fake time\", function () {\n      this.sandbox.useFakeTimers();\n      this.sandbox.inject(this.obj);\n      assert.isFunction(this.obj.spy);\n      assert.isFunction(this.obj.stub);\n      assert.isFunction(this.obj.mock);\n      assert.isObject(this.obj.clock);\n      assert.isFalse(\"server\" in this.obj);\n      assert.isFalse(\"requests\" in this.obj);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should return object","suites":["Sandbox",".inject"],"updatePoint":{"line":1356,"column":28,"index":44665},"line":1356,"code":"    it(\"should return object\", function () {\n      const injected = this.sandbox.inject({});\n      assert.isObject(injected);\n      assert.isFunction(injected.spy);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"defines server and requests when using fake time","suites":["Sandbox",".inject","ajax options"],"updatePoint":{"line":1363,"column":60,"index":44939},"line":1363,"code":"        it(\"defines server and requests when using fake time\", function () {\n          this.sandbox.useFakeServer();\n          this.sandbox.inject(this.obj);\n          assert.isFunction(this.obj.spy);\n          assert.isFunction(this.obj.stub);\n          assert.isFunction(this.obj.mock);\n          assert.isFalse(\"clock\" in this.obj);\n          assert.isObject(this.obj.server);\n          assert.equals(this.obj.requests, []);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should define all possible fakes","suites":["Sandbox",".inject","ajax options"],"updatePoint":{"line":1373,"column":44,"index":45363},"line":1373,"code":"        it(\"should define all possible fakes\", function () {\n          this.sandbox.useFakeServer();\n          this.sandbox.useFakeTimers();\n          this.sandbox.inject(this.obj);\n          const spy = sinonSpy();\n          setTimeout(spy, 10);\n          this.sandbox.clock.tick(10);\n          const xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(\"Microsoft.XMLHTTP\"); //eslint-disable-line no-undef\n\n          assert.isFunction(this.obj.spy);\n          assert.isFunction(this.obj.stub);\n          assert.isFunction(this.obj.mock);\n          assert(spy.called);\n          assert.isObject(this.obj.server);\n          assert.equals(this.obj.requests, [xhr]);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"calls verify on all fakes","suites":["Sandbox",".verify"],"updatePoint":{"line":1393,"column":33,"index":46105},"line":1393,"code":"    it(\"calls verify on all fakes\", function () {\n      const sandbox = createSandbox();\n      const fakes = sandbox.getFakes();\n      fakes.push({\n        verify: sinonSpy()\n      });\n      fakes.push({\n        verify: sinonSpy()\n      });\n      sandbox.verify();\n      fakes.forEach(function (f) {\n        assert(f.verify.calledOnce);\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"throws when passed arguments","suites":["Sandbox",".restore"],"updatePoint":{"line":1409,"column":36,"index":46506},"line":1409,"code":"    it(\"throws when passed arguments\", function () {\n      const sandbox = new Sandbox();\n      assert.exception(function () {\n        sandbox.restore(\"args\");\n      }, {\n        message: \"sandbox.restore() does not take any parameters. Perhaps you meant stub.restore()\"\n      });\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores all fields of a spied object","suites":["Sandbox",".restore"],"updatePoint":{"line":1419,"column":45,"index":46857},"line":1419,"code":"    it(\"restores all fields of a spied object\", function () {\n      const sandbox = new Sandbox();\n      const o = {\n        foo: function () {\n          return 42;\n        }\n      };\n      sandbox.spy(o);\n      sandbox.restore();\n      assert.isUndefined(o.foo.callCount);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"restores all fields of a stubbed object","suites":["Sandbox",".restore"],"updatePoint":{"line":1430,"column":47,"index":47141},"line":1430,"code":"    it(\"restores all fields of a stubbed object\", function () {\n      const sandbox = new Sandbox();\n      const o = {\n        foo: function () {\n          return 42;\n        }\n      };\n      sandbox.stub(o);\n      sandbox.restore();\n      assert.isUndefined(o.foo.callCount);\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"yields stub, mock as arguments","suites":["Sandbox","configurable sandbox"],"updatePoint":{"line":1455,"column":38,"index":47845},"line":1455,"code":"    it(\"yields stub, mock as arguments\", function () {\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"stub\", \"mock\"]\n      }));\n      assert.equals(sandbox.args.length, 2);\n      assert.stub(sandbox.args[0]());\n      assert.mock(sandbox.args[1]({}));\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"yields spy, stub, mock as arguments","suites":["Sandbox","configurable sandbox"],"updatePoint":{"line":1464,"column":43,"index":48159},"line":1464,"code":"    it(\"yields spy, stub, mock as arguments\", function () {\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"spy\", \"stub\", \"mock\"]\n      }));\n      assert.spy(sandbox.args[0]());\n      assert.stub(sandbox.args[1]());\n      assert.mock(sandbox.args[2]({}));\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"does not yield server when not faking xhr","suites":["Sandbox","configurable sandbox"],"updatePoint":{"line":1473,"column":49,"index":48478},"line":1473,"code":"    it(\"does not yield server when not faking xhr\", function () {\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"server\", \"stub\", \"mock\"],\n        useFakeServer: false\n      }));\n      assert.equals(sandbox.args.length, 2);\n      assert.stub(sandbox.args[0]());\n      assert.mock(sandbox.args[1]({}));\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"does not inject properties if they are already present","suites":["Sandbox","configurable sandbox"],"updatePoint":{"line":1483,"column":62,"index":48851},"line":1483,"code":"    it(\"does not inject properties if they are already present\", function () {\n      const server = function () {\n        return;\n      };\n      const clock = {};\n      const spy = false;\n      const object = {\n        server: server,\n        clock: clock,\n        spy: spy\n      };\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"server\", \"clock\", \"spy\"],\n        injectInto: object\n      }));\n      assert.same(object.server, server);\n      assert.same(object.clock, clock);\n      assert.same(object.spy, spy);\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"yields server when faking xhr","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1505,"column":41,"index":49469},"line":1505,"code":"        it(\"yields server when faking xhr\", function () {\n          const sandbox = createSandbox(sinonConfig({\n            properties: [\"server\", \"stub\", \"mock\"]\n          }));\n          assert.equals(sandbox.args.length, 3);\n          assert.equals(sandbox.args[0], this.fakeServer);\n          assert.stub(sandbox.args[1]());\n          assert.mock(sandbox.args[2]({}));\n          sandbox.restore();\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"uses serverWithClock when faking xhr","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1515,"column":48,"index":49889},"line":1515,"code":"        it(\"uses serverWithClock when faking xhr\", function () {\n          const sandbox = createSandbox(sinonConfig({\n            properties: [\"server\"],\n            useFakeServer: fakeServerWithClock\n          }));\n          assert.fakeServerWithClock(sandbox.args[0], this.fakeServer);\n          sandbox.restore();\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"uses fakeServer as the serverPrototype by default","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1523,"column":61,"index":50232},"line":1523,"code":"        it(\"uses fakeServer as the serverPrototype by default\", function () {\n          const sandbox = createSandbox();\n          assert.same(sandbox.serverPrototype, fakeServer);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"uses configured implementation as the serverPrototype","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1527,"column":65,"index":50429},"line":1527,"code":"        it(\"uses configured implementation as the serverPrototype\", function () {\n          const sandbox = createSandbox({\n            useFakeServer: fakeServerWithClock\n          });\n          assert.same(sandbox.serverPrototype, fakeServerWithClock);\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"yields clock when faking timers","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1533,"column":43,"index":50673},"line":1533,"code":"        it(\"yields clock when faking timers\", function () {\n          const sandbox = createSandbox(sinonConfig({\n            properties: [\"server\", \"clock\"]\n          }));\n          assert.same(sandbox.args[0], this.fakeServer);\n          assert.clock(sandbox.args[1]);\n          sandbox.restore();\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"injects properties into object","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1541,"column":42,"index":50984},"line":1541,"code":"        it(\"injects properties into object\", function () {\n          const object = {};\n          const sandbox = createSandbox(sinonConfig({\n            properties: [\"server\", \"clock\"],\n            injectInto: object\n          }));\n          assert.equals(sandbox.args.length, 0);\n          assert.equals(object.server, this.fakeServer);\n          assert.clock(object.clock);\n          assert.isUndefined(object.spy);\n          assert.isUndefined(object.stub);\n          assert.isUndefined(object.mock);\n          assert.isUndefined(object.requests);\n          sandbox.restore();\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should inject server and clock when only enabling them","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1556,"column":66,"index":51601},"line":1556,"code":"        it(\"should inject server and clock when only enabling them\", function () {\n          const object = {};\n          const sandbox = createSandbox(sinonConfig({\n            injectInto: object,\n            useFakeTimers: true,\n            useFakeServer: true\n          }));\n          assert.equals(sandbox.args.length, 0);\n          assert.equals(object.server, this.fakeServer);\n          assert.clock(object.clock);\n          assert.isFunction(object.spy);\n          assert.isFunction(object.stub);\n          assert.isFunction(object.mock);\n          assert.isArray(object.requests);\n          assert.isUndefined(object.sandbox);\n          sandbox.restore();\n        });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"fakes specified timers","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1578,"column":30,"index":52384},"line":1578,"code":"    it(\"fakes specified timers\", function () {\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"clock\"],\n        useFakeTimers: {\n          toFake: [\"Date\", \"setTimeout\"]\n        }\n      }));\n      assert(this.useFakeTimersSpy.calledWith({\n        toFake: [\"Date\", \"setTimeout\"]\n      }));\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"injects sandbox","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1590,"column":23,"index":52723},"line":1590,"code":"    it(\"injects sandbox\", function () {\n      const object = {};\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"sandbox\", \"spy\"],\n        injectInto: object\n      }));\n      assert.equals(sandbox.args.length, 0);\n      assert.isFunction(object.spy);\n      assert.isObject(object.sandbox);\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"injects match","suites":["Sandbox","configurable sandbox","ajax options"],"updatePoint":{"line":1601,"column":21,"index":53068},"line":1601,"code":"    it(\"injects match\", function () {\n      const object = {};\n      const sandbox = createSandbox(sinonConfig({\n        properties: [\"match\"],\n        injectInto: object\n      }));\n      assert.same(object.match, match);\n      sandbox.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows stubbing getters","suites":["Sandbox","getters and setters"],"updatePoint":{"line":1612,"column":31,"index":53387},"line":1612,"code":"    it(\"allows stubbing getters\", function () {\n      const object = {\n        foo: \"bar\"\n      };\n      const sandbox = new Sandbox();\n      sandbox.stub(object, \"foo\").get(function () {\n        return \"baz\";\n      });\n      assert.equals(object.foo, \"baz\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows restoring getters","suites":["Sandbox","getters and setters"],"updatePoint":{"line":1622,"column":32,"index":53656},"line":1622,"code":"    it(\"allows restoring getters\", function () {\n      const object = {\n        foo: \"bar\"\n      };\n      const sandbox = new Sandbox();\n      sandbox.stub(object, \"foo\").get(function () {\n        return \"baz\";\n      });\n      sandbox.restore();\n      assert.equals(object.foo, \"bar\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows stubbing setters","suites":["Sandbox","getters and setters"],"updatePoint":{"line":1633,"column":31,"index":53949},"line":1633,"code":"    it(\"allows stubbing setters\", function () {\n      const object = {\n        foo: undefined,\n        prop: \"bar\"\n      };\n      const sandbox = new Sandbox();\n      sandbox.stub(object, \"foo\").set(function (val) {\n        object.prop = `${val}bla`;\n      });\n      object.foo = \"bla\";\n      assert.equals(object.prop, \"blabla\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows restoring setters","suites":["Sandbox","getters and setters"],"updatePoint":{"line":1645,"column":32,"index":54289},"line":1645,"code":"    it(\"allows restoring setters\", function () {\n      const object = {\n        prop: \"bar\"\n      };\n      const sandbox = new Sandbox();\n      sandbox.stub(object, \"prop\").set(function setterFn(val) {\n        object.prop = `${val}bla`;\n      });\n      sandbox.restore();\n      object.prop = \"bla\";\n      assert.equals(object.prop, \"bla\");\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"allows rebinding of .fail on a per-sandbox level","suites":["Sandbox",".assert"],"updatePoint":{"line":1659,"column":56,"index":54703},"line":1659,"code":"    it(\"allows rebinding of .fail on a per-sandbox level\", function () {\n      const sandboxA = createSandbox();\n      const sandboxB = createSandbox();\n      sandboxA.assert.failException = \"CustomErrorA\";\n      sandboxB.assert.failException = \"CustomErrorB\";\n      assert.exception(function () {\n        sandboxA.assert.fail(\"Some message\");\n      }, {\n        name: \"CustomErrorA\"\n      });\n      assert.exception(function () {\n        sandboxB.assert.fail(\"Some message\");\n      }, {\n        name: \"CustomErrorB\"\n      });\n      sandboxA.restore();\n      sandboxB.restore();\n    });","file":"sandbox-test.js","skipped":false,"dir":"test"},{"name":"should be an instance of Sandbox","suites":["sinon module","exports","default sandbox"],"updatePoint":{"line":38,"column":42,"index":1106},"line":38,"code":"      it(\"should be an instance of Sandbox\", function () {\n        // use full sinon for this test as it compares sinon instance\n        // proxyquire changes the instance, so `actual instanceof Sandbox` returns `false`\n        // see https://github.com/sinonjs/sinon/pull/1586#issuecomment-354457231\n        sinon = require(\"../lib/sinon\");\n        assert.hasPrototype(sinon, Sandbox.prototype);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be a unary Function named 'createSandbox'","suites":["sinon module","exports","createSandbox"],"updatePoint":{"line":47,"column":58,"index":1581},"line":47,"code":"      it(\"should be a unary Function named 'createSandbox'\", function () {\n        assert.isFunction(sinon.createSandbox);\n        assert.equals(sinon.createSandbox.length, 1);\n        // Use helper because IE 11 doesn't support the `name` property:\n        assert.equals(functionName(sinon.createSandbox), \"createSandbox\");\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be the fakeServer export from nise","suites":["sinon module","exports","fakeServer"],"updatePoint":{"line":55,"column":51,"index":1958},"line":55,"code":"      it(\"should be the fakeServer export from nise\", function () {\n        assert.same(sinon.fakeServer, fakeNise.fakeServer);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be fakeServer.create from nise","suites":["sinon module","exports","createFakeServer"],"updatePoint":{"line":60,"column":47,"index":2147},"line":60,"code":"      it(\"should be fakeServer.create from nise\", function () {\n        assert.equals(sinon.createFakeServer(), fakeNise.fakeServer.create());\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be the fakeServerWithClock export from nise","suites":["sinon module","exports","fakeServerWithClock"],"updatePoint":{"line":65,"column":60,"index":2371},"line":65,"code":"      it(\"should be the fakeServerWithClock export from nise\", function () {\n        assert.same(sinon.fakeServerWithClock, fakeNise.fakeServerWithClock);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be fakeServerWithClock.create from nise","suites":["sinon module","exports","createFakeServerWithClock"],"updatePoint":{"line":70,"column":56,"index":2596},"line":70,"code":"      it(\"should be fakeServerWithClock.create from nise\", function () {\n        assert.equals(sinon.createFakeServerWithClock(), fakeNise.fakeServerWithClock.create());\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be the fakeXhr.xhr export from nise","suites":["sinon module","exports","xhr"],"updatePoint":{"line":75,"column":52,"index":2814},"line":75,"code":"      it(\"should be the fakeXhr.xhr export from nise\", function () {\n        assert.equals(sinon.xhr, fakeNise.fakeXhr.xhr);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be the fakeXhr.FakeXMLHttpRequest export from nise","suites":["sinon module","exports","FakeXMLHttpRequest"],"updatePoint":{"line":80,"column":67,"index":3021},"line":80,"code":"      it(\"should be the fakeXhr.FakeXMLHttpRequest export from nise\", function () {\n        assert.equals(sinon.FakeXMLHttpRequest, fakeNise.fakeXhr.FakeXMLHttpRequest);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should be the fakeXhr.useFakeXMLHttpRequest export from nise","suites":["sinon module","exports","useFakeXMLHttpRequest"],"updatePoint":{"line":96,"column":70,"index":3730},"line":96,"code":"      it(\"should be the fakeXhr.useFakeXMLHttpRequest export from nise\", function () {\n        sinon.spy(nise.fakeXhr, \"useFakeXMLHttpRequest\");\n        sinon.useFakeXMLHttpRequest();\n        assert.isTrue(nise.fakeXhr.useFakeXMLHttpRequest.called);\n      });","file":"sinon-test.js","skipped":false,"dir":"test"},{"name":"should not mutate matchers passed as arguments","suites":["formatter specifier \"D\""],"updatePoint":{"line":11,"column":52,"index":265},"line":11,"code":"  it(\"should not mutate matchers passed as arguments\", function () {\n    const matcher = sinon.match(function test() {\n      return false;\n    }, \"something\");\n    assert.equals(matcher.message, \"something\");\n    const stub = sinon.stub();\n    stub(1, 2, 3);\n    /* eslint-disable new-cap */\n    D(stub, [matcher]);\n    assert.equals(matcher.message, \"something\");\n  });","file":"spy-formatters-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy was not called","suites":[],"updatePoint":{"line":16,"column":43,"index":572},"line":16,"code":"    it(\"returns false if spy was not called\", function () {\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if spy was called with args","suites":[],"updatePoint":{"line":19,"column":48,"index":694},"line":19,"code":"    it(\"returns true if spy was called with args\", function () {\n      this.spy(1, 2, 3);\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if called with args at least once","suites":[],"updatePoint":{"line":23,"column":54,"index":839},"line":23,"code":"    it(\"returns true if called with args at least once\", function () {\n      this.spy(1, 3, 3);\n      this.spy(1, 2, 3);\n      this.spy(3, 2, 3);\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called with args","suites":[],"updatePoint":{"line":29,"column":45,"index":1025},"line":29,"code":"    it(\"returns false if not called with args\", function () {\n      this.spy(1, 3, 3);\n      this.spy(2);\n      this.spy();\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called with undefined","suites":[],"updatePoint":{"line":35,"column":50,"index":1211},"line":35,"code":"    it(\"returns false if not called with undefined\", function () {\n      this.spy();\n      assert.isFalse(this.spy[method](undefined));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for partial match","suites":[],"updatePoint":{"line":39,"column":38,"index":1343},"line":39,"code":"    it(\"returns true for partial match\", function () {\n      this.spy(1, 3, 3);\n      this.spy(2);\n      this.spy();\n      assert(this.spy[method](1, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"matchs all arguments individually, not as array","suites":[],"updatePoint":{"line":45,"column":55,"index":1523},"line":45,"code":"    it(\"matchs all arguments individually, not as array\", function () {\n      this.spy([1, 2, 3]);\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"uses matcher","suites":[],"updatePoint":{"line":49,"column":20,"index":1644},"line":49,"code":"    it(\"uses matcher\", function () {\n      this.spy(\"abc\");\n      assert(this.spy[method](match.typeOf(\"string\")));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"uses matcher in object","suites":[],"updatePoint":{"line":53,"column":30,"index":1778},"line":53,"code":"    it(\"uses matcher in object\", function () {\n      this.spy({\n        some: \"abc\"\n      });\n      assert(this.spy[method]({\n        some: match.typeOf(\"string\")\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"must not throw","suites":["when called with an Object without a prototype"],"updatePoint":{"line":66,"column":24,"index":2194},"line":66,"code":"      it(\"must not throw\", function () {\n        const spy = this.spy;\n        const objectWithoutPrototype = Object.create(null);\n        objectWithoutPrototype.something = 2;\n        spy[method]({\n          foo: 1,\n          objectWithoutPrototype: objectWithoutPrototype\n        });\n        refute.exception(function () {\n          spy.calledWithMatch({\n            objectWithoutPrototype: objectWithoutPrototype\n          });\n        });\n      });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy was not called","suites":["when called with an Object without a prototype"],"updatePoint":{"line":91,"column":43,"index":2949},"line":91,"code":"    it(\"returns false if spy was not called\", function () {\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if spy was called with args","suites":["when called with an Object without a prototype"],"updatePoint":{"line":96,"column":48,"index":3129},"line":96,"code":"    it(\"returns true if spy was called with args\", function () {\n      this.spy(1, 2, 3);\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if called with args only once","suites":["when called with an Object without a prototype"],"updatePoint":{"line":100,"column":51,"index":3271},"line":100,"code":"    it(\"returns false if called with args only once\", function () {\n      this.spy(1, 3, 3);\n      this.spy(1, 2, 3);\n      this.spy(3, 2, 3);\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called with args","suites":["when called with an Object without a prototype"],"updatePoint":{"line":108,"column":45,"index":3523},"line":108,"code":"    it(\"returns false if not called with args\", function () {\n      this.spy(1, 3, 3);\n      this.spy(2);\n      this.spy();\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for partial match","suites":["when called with an Object without a prototype"],"updatePoint":{"line":116,"column":38,"index":3755},"line":116,"code":"    it(\"returns true for partial match\", function () {\n      this.spy(1, 3, 3);\n      assert(this.spy[method](1, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for partial match on many calls","suites":["when called with an Object without a prototype"],"updatePoint":{"line":120,"column":52,"index":3895},"line":120,"code":"    it(\"returns true for partial match on many calls\", function () {\n      this.spy(1, 3, 3);\n      this.spy(1, 3);\n      this.spy(1, 3, 4, 5);\n      this.spy(1, 3, 1);\n      assert(this.spy[method](1, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"matchs all arguments individually, not as array","suites":["when called with an Object without a prototype"],"updatePoint":{"line":129,"column":55,"index":4171},"line":129,"code":"    it(\"matchs all arguments individually, not as array\", function () {\n      this.spy([1, 2, 3]);\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if spy was not called","suites":["when called with an Object without a prototype"],"updatePoint":{"line":141,"column":42,"index":4531},"line":141,"code":"    it(\"returns true if spy was not called\", function () {\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy was called with args","suites":["when called with an Object without a prototype"],"updatePoint":{"line":144,"column":49,"index":4646},"line":144,"code":"    it(\"returns false if spy was called with args\", function () {\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if called with args at least once","suites":["when called with an Object without a prototype"],"updatePoint":{"line":148,"column":55,"index":4800},"line":148,"code":"    it(\"returns false if called with args at least once\", function () {\n      this.spy(1, 3, 3);\n      this.spy(1, 2, 3);\n      this.spy(3, 2, 3);\n      assert.isFalse(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if not called with args","suites":["when called with an Object without a prototype"],"updatePoint":{"line":154,"column":44,"index":4993},"line":154,"code":"    it(\"returns true if not called with args\", function () {\n      this.spy(1, 3, 3);\n      this.spy(2);\n      this.spy();\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for partial match","suites":["when called with an Object without a prototype"],"updatePoint":{"line":160,"column":39,"index":5160},"line":160,"code":"    it(\"returns false for partial match\", function () {\n      this.spy(1, 3, 3);\n      this.spy(2);\n      this.spy();\n      assert.isFalse(this.spy[method](1, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"matchs all arguments individually, not as array","suites":["when called with an Object without a prototype"],"updatePoint":{"line":168,"column":55,"index":5406},"line":168,"code":"    it(\"matchs all arguments individually, not as array\", function () {\n      this.spy([1, 2, 3]);\n      assert(this.spy[method](1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"does not throw if called without function","suites":["spy"],"updatePoint":{"line":186,"column":47,"index":5999},"line":186,"code":"  it(\"does not throw if called without function\", function () {\n    refute.exception(function () {\n      createSpy();\n    });\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"does not throw when calling anonymous spy","suites":["spy"],"updatePoint":{"line":191,"column":47,"index":6131},"line":191,"code":"  it(\"does not throw when calling anonymous spy\", function () {\n    const spy = createSpy();\n    refute.exception(spy);\n    assert(spy.called);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns spy function","suites":["spy"],"updatePoint":{"line":196,"column":26,"index":6260},"line":196,"code":"  it(\"returns spy function\", function () {\n    const func = function () {\n      return;\n    };\n    const spy = createSpy(func);\n    assert.isFunction(spy);\n    refute.same(func, spy);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"mirrors custom properties on function","suites":["spy"],"updatePoint":{"line":204,"column":43,"index":6467},"line":204,"code":"  it(\"mirrors custom properties on function\", function () {\n    const func = function () {\n      return;\n    };\n    func.myProp = 42;\n    const spy = createSpy(func);\n    assert.equals(spy.myProp, func.myProp);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"does not define create method","suites":["spy"],"updatePoint":{"line":212,"column":35,"index":6676},"line":212,"code":"  it(\"does not define create method\", function () {\n    const spy = createSpy();\n    assert.isUndefined(spy.create);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"does not overwrite original create property","suites":["spy"],"updatePoint":{"line":216,"column":49,"index":6813},"line":216,"code":"  it(\"does not overwrite original create property\", function () {\n    const func = function () {\n      return;\n    };\n    const object = func.create = {};\n    const spy = createSpy(func);\n    assert.same(spy.create, object);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"sets up logging arrays","suites":["spy"],"updatePoint":{"line":224,"column":28,"index":7023},"line":224,"code":"  it(\"sets up logging arrays\", function () {\n    const spy = createSpy();\n    assert.isArray(spy.args);\n    assert.isArray(spy.returnValues);\n    assert.isArray(spy.thisValues);\n    assert.isArray(spy.exceptions);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"works with getters","suites":["spy"],"updatePoint":{"line":231,"column":24,"index":7239},"line":231,"code":"  it(\"works with getters\", function () {\n    const object = {\n      get property() {\n        return 42;\n      }\n    };\n    const spy = createSpy(object, \"property\", [\"get\"]);\n    assert.equals(object.property, 42);\n    assert(spy.get.calledOnce);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"works with setters","suites":["spy"],"updatePoint":{"line":241,"column":24,"index":7492},"line":241,"code":"  it(\"works with setters\", function () {\n    const object = {\n      get test() {\n        return this.property;\n      },\n      set test(value) {\n        this.property = value * 2;\n      }\n    };\n    const spy = createSpy(object, \"test\", [\"set\"]);\n    object.test = 42;\n    assert(spy.set.calledOnce);\n    assert(spy.set.calledWith(42));\n    assert.equals(object.test, 84);\n    assert.equals(object.property, 84);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"works with setters and getters combined","suites":["spy"],"updatePoint":{"line":257,"column":45,"index":7931},"line":257,"code":"  it(\"works with setters and getters combined\", function () {\n    const object = {\n      get test() {\n        return this.property;\n      },\n      set test(value) {\n        this.property = value * 2;\n      }\n    };\n    const spy = createSpy(object, \"test\", [\"get\", \"set\"]);\n    object.test = 42;\n    assert(spy.set.calledOnce);\n    assert.equals(object.test, 84);\n    assert(spy.get.calledOnce);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"sets wrappedMethod on getter and setter","suites":["spy"],"updatePoint":{"line":272,"column":45,"index":8333},"line":272,"code":"  it(\"sets wrappedMethod on getter and setter\", function () {\n    const object = {\n      get test() {\n        return this.property;\n      },\n      set test(value) {\n        this.property = value;\n      }\n    };\n    const descriptor1 = Object.getOwnPropertyDescriptor(object, \"test\");\n    const spy = createSpy(object, \"test\", [\"get\", \"set\"]);\n    const descriptor2 = Object.getOwnPropertyDescriptor(object, \"test\");\n    refute.equals(descriptor1, descriptor2);\n    refute.isUndefined(spy.get.wrappedMethod);\n    refute.isUndefined(spy.get.restore);\n    refute.isUndefined(spy.set.wrappedMethod);\n    refute.isUndefined(spy.set.restore);\n    assert.isUndefined(spy.wrappedMethod);\n    assert.isUndefined(spy.restore);\n    spy.get.restore();\n    spy.set.restore();\n    const descriptor3 = Object.getOwnPropertyDescriptor(object, \"test\");\n    assert.equals(descriptor1, descriptor3);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"creates a spy for Error","suites":["spy","global.Error"],"updatePoint":{"line":303,"column":31,"index":9416},"line":303,"code":"    it(\"creates a spy for Error\", function () {\n      refute.exception(function () {\n        createSpy(globalContext, \"Error\");\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should work with combination of withArgs arguments and order of calling withArgs","suites":["spy","global.Error"],"updatePoint":{"line":309,"column":86,"index":9623},"line":309,"code":"  it(\"should work with combination of withArgs arguments and order of calling withArgs\", function () {\n    function assertSpy(spy) {\n      // assert callCount\n      assert.equals(spy.callCount, 4);\n      assert.equals(spy.withArgs(1).callCount, 3);\n      assert.equals(spy.withArgs(1, 1).callCount, 1);\n      assert.equals(spy.withArgs(1, 2).callCount, 1);\n\n      // assert call\n      assert.isUndefined(spy.getCall(0).args[0]);\n      assert.equals(spy.getCall(1).args[0], 1);\n      assert.isUndefined(spy.getCall(1).args[1]);\n      assert.equals(spy.getCall(2).args[0], 1);\n      assert.equals(spy.getCall(2).args[1], 1);\n      assert.isUndefined(spy.getCall(2).args[2]);\n      assert.equals(spy.getCall(3).args[0], 1);\n      assert.equals(spy.getCall(3).args[1], 2);\n      assert.isUndefined(spy.getCall(3).args[2]);\n      [\"args\", \"callId\"].forEach(function (propName) {\n        assert.equals(spy.withArgs(1).getCall(0)[propName], spy.getCall(1)[propName]);\n        assert.equals(spy.withArgs(1).getCall(1)[propName], spy.getCall(2)[propName]);\n        assert.equals(spy.withArgs(1).getCall(2)[propName], spy.getCall(3)[propName]);\n        assert.isNull(spy.withArgs(1).getCall(3));\n        assert.equals(spy.withArgs(1, 1).getCall(0)[propName], spy.getCall(2)[propName]);\n        assert.isNull(spy.withArgs(1, 1).getCall(1));\n        assert.equals(spy.withArgs(1, 2).getCall(0)[propName], spy.getCall(3)[propName]);\n        assert.isNull(spy.withArgs(1, 2).getCall(1));\n      });\n\n      // assert firstCall, secondCall, thirdCall, and lastCall\n      assert.equals(spy.firstCall.callId, spy.getCall(0).callId);\n      assert.equals(spy.secondCall.callId, spy.getCall(1).callId);\n      assert.equals(spy.thirdCall.callId, spy.getCall(2).callId);\n      assert.equals(spy.lastCall.callId, spy.getCall(3).callId);\n      assert.equals(spy.withArgs(1).firstCall.callId, spy.withArgs(1).getCall(0).callId);\n      assert.equals(spy.withArgs(1).secondCall.callId, spy.withArgs(1).getCall(1).callId);\n      assert.equals(spy.withArgs(1).thirdCall.callId, spy.withArgs(1).getCall(2).callId);\n      assert.equals(spy.withArgs(1).lastCall.callId, spy.withArgs(1).getCall(2).callId);\n      assert.equals(spy.withArgs(1, 1).firstCall.callId, spy.withArgs(1, 1).getCall(0).callId);\n      assert.isNull(spy.withArgs(1, 1).secondCall);\n      assert.isNull(spy.withArgs(1, 1).thirdCall);\n      assert.equals(spy.withArgs(1, 1).lastCall.callId, spy.withArgs(1, 1).getCall(0).callId);\n      assert.equals(spy.withArgs(1, 2).firstCall.callId, spy.withArgs(1, 2).getCall(0).callId);\n      assert.isNull(spy.withArgs(1, 2).secondCall);\n      assert.isNull(spy.withArgs(1, 2).thirdCall);\n      assert.equals(spy.withArgs(1, 2).lastCall.callId, spy.withArgs(1, 2).getCall(0).callId);\n    }\n    const object = {\n      f1: function () {\n        return;\n      },\n      f2: function () {\n        return;\n      }\n    };\n\n    // f1: the order of withArgs(1), withArgs(1, 1)\n    const spy1 = createSpy(object, \"f1\");\n    assert.equals(spy1.callCount, 0);\n    assert.equals(spy1.withArgs(1).callCount, 0);\n    assert.equals(spy1.withArgs(1, 1).callCount, 0);\n    assert.isNull(spy1.getCall(0));\n    assert.isNull(spy1.getCall(1));\n    assert.isNull(spy1.getCall(2));\n    assert.isNull(spy1.getCall(3));\n    object.f1();\n    object.f1(1);\n    object.f1(1, 1);\n    object.f1(1, 2);\n    assertSpy(spy1);\n\n    // f2: the order of withArgs(1, 1), withArgs(1)\n    const spy2 = createSpy(object, \"f2\");\n    assert.equals(spy2.callCount, 0);\n    assert.equals(spy2.withArgs(1, 1).callCount, 0);\n    assert.equals(spy2.withArgs(1).callCount, 0);\n    assert.isNull(spy2.getCall(0));\n    assert.isNull(spy2.getCall(1));\n    assert.isNull(spy2.getCall(2));\n    assert.isNull(spy2.getCall(3));\n    object.f2();\n    object.f2(1);\n    object.f2(1, 1);\n    object.f2(1, 2);\n    assertSpy(spy2);\n  });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"sets name and displayName","suites":["spy",".named"],"updatePoint":{"line":396,"column":33,"index":13458},"line":396,"code":"    it(\"sets name and displayName\", function () {\n      const spy = createSpy();\n      const retval = spy.named(\"beep\");\n      assert.equals(spy.displayName, \"beep\");\n      verifyFunctionName(spy, \"beep\");\n      assert.same(spy, retval);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"calls underlying function","suites":["spy","call"],"updatePoint":{"line":405,"column":33,"index":13743},"line":405,"code":"    it(\"calls underlying function\", function () {\n      let called = false;\n      const spy = createSpy(function () {\n        called = true;\n      });\n      spy();\n      assert(called);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"passes 'new' to underlying function","suites":["spy","call"],"updatePoint":{"line":413,"column":43,"index":13947},"line":413,"code":"    it(\"passes 'new' to underlying function\", function () {\n      function TestClass() {\n        return;\n      }\n      const SpyClass = createSpy(TestClass);\n      const instance = new SpyClass();\n      assert(instance instanceof TestClass);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"passs arguments to function","suites":["spy","call"],"updatePoint":{"line":421,"column":35,"index":14189},"line":421,"code":"    it(\"passs arguments to function\", function () {\n      let actualArgs;\n      const func = function (a, b, c, d) {\n        actualArgs = [a, b, c, d];\n      };\n      const args = [1, {}, [], \"\"];\n      const spy = createSpy(func);\n      spy(args[0], args[1], args[2], args[3]);\n      assert.equals(actualArgs, args);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"maintains this binding","suites":["spy","call"],"updatePoint":{"line":431,"column":30,"index":14510},"line":431,"code":"    it(\"maintains this binding\", function () {\n      let actualThis;\n      const func = function () {\n        actualThis = this;\n      };\n      const object = {};\n      const spy = createSpy(func);\n      spy.call(object);\n      assert.same(actualThis, object);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns function's return value","suites":["spy","call"],"updatePoint":{"line":441,"column":39,"index":14788},"line":441,"code":"    it(\"returns function's return value\", function () {\n      const object = {};\n      const func = function () {\n        return object;\n      };\n      const spy = createSpy(func);\n      const actualReturn = spy();\n      assert.same(actualReturn, object);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if function throws","suites":["spy","call"],"updatePoint":{"line":450,"column":33,"index":15046},"line":450,"code":"    it(\"throws if function throws\", function () {\n      const err = new Error();\n      const spy = createSpy(function () {\n        throw err;\n      });\n      assert.exception(spy, err);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function name","suites":["spy","call"],"updatePoint":{"line":457,"column":29,"index":15236},"line":457,"code":"    it(\"retains function name\", function () {\n      function test() {\n        return;\n      }\n      const spy = createSpy(test);\n      assert.equals(spy.displayName, \"test\");\n      verifyFunctionName(spy, \"test\");\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 0","suites":["spy","call"],"updatePoint":{"line":465,"column":33,"index":15462},"line":465,"code":"    it(\"retains function length 0\", function () {\n      const spy = createSpy(function () {\n        return;\n      });\n      assert.equals(spy.length, 0);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 1","suites":["spy","call"],"updatePoint":{"line":471,"column":33,"index":15624},"line":471,"code":"    it(\"retains function length 1\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const spy = createSpy(function (a) {\n        return;\n      });\n      assert.equals(spy.length, 1);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 2","suites":["spy","call"],"updatePoint":{"line":478,"column":33,"index":15836},"line":478,"code":"    it(\"retains function length 2\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const spy = createSpy(function (a, b) {\n        return;\n      });\n      assert.equals(spy.length, 2);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 3","suites":["spy","call"],"updatePoint":{"line":485,"column":33,"index":16051},"line":485,"code":"    it(\"retains function length 3\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const spy = createSpy(function (a, b, c) {\n        return;\n      });\n      assert.equals(spy.length, 3);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 4","suites":["spy","call"],"updatePoint":{"line":492,"column":33,"index":16269},"line":492,"code":"    it(\"retains function length 4\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const spy = createSpy(function (a, b, c, d) {\n        return;\n      });\n      assert.equals(spy.length, 4);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"retains function length 12","suites":["spy","call"],"updatePoint":{"line":499,"column":34,"index":16491},"line":499,"code":"    it(\"retains function length 12\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const func12Args = function (a, b, c, d, e, f, g, h, i, j, k, l) {\n        return;\n      };\n      const spy = createSpy(func12Args);\n      assert.equals(spy.length, 12);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false prior to calling the spy","suites":["spy",".called"],"updatePoint":{"line":512,"column":41,"index":16891},"line":512,"code":"    it(\"is false prior to calling the spy\", function () {\n      assert.isFalse(this.spy.called);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true after calling the spy once","suites":["spy",".called"],"updatePoint":{"line":515,"column":42,"index":16997},"line":515,"code":"    it(\"is true after calling the spy once\", function () {\n      this.spy();\n      assert(this.spy.called);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true after calling the spy twice","suites":["spy",".called"],"updatePoint":{"line":519,"column":43,"index":17114},"line":519,"code":"    it(\"is true after calling the spy twice\", function () {\n      this.spy();\n      this.spy();\n      assert(this.spy.called);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true prior to calling the spy","suites":["spy",".notCalled"],"updatePoint":{"line":529,"column":40,"index":17358},"line":529,"code":"    it(\"is true prior to calling the spy\", function () {\n      assert.isTrue(this.spy.notCalled);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy once","suites":["spy",".notCalled"],"updatePoint":{"line":532,"column":43,"index":17467},"line":532,"code":"    it(\"is false after calling the spy once\", function () {\n      this.spy();\n      assert.isFalse(this.spy.notCalled);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false prior to calling the spy","suites":["spy",".calledOnce"],"updatePoint":{"line":541,"column":41,"index":17706},"line":541,"code":"    it(\"is false prior to calling the spy\", function () {\n      assert.isFalse(this.spy.calledOnce);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true after calling the spy once","suites":["spy",".calledOnce"],"updatePoint":{"line":544,"column":42,"index":17816},"line":544,"code":"    it(\"is true after calling the spy once\", function () {\n      this.spy();\n      assert(this.spy.calledOnce);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy twice","suites":["spy",".calledOnce"],"updatePoint":{"line":548,"column":44,"index":17938},"line":548,"code":"    it(\"is false after calling the spy twice\", function () {\n      this.spy();\n      this.spy();\n      assert.isFalse(this.spy.calledOnce);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false prior to calling the spy","suites":["spy",".calledTwice"],"updatePoint":{"line":558,"column":41,"index":18197},"line":558,"code":"    it(\"is false prior to calling the spy\", function () {\n      assert.isFalse(this.spy.calledTwice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy once","suites":["spy",".calledTwice"],"updatePoint":{"line":561,"column":43,"index":18309},"line":561,"code":"    it(\"is false after calling the spy once\", function () {\n      this.spy();\n      assert.isFalse(this.spy.calledTwice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true after calling the spy twice","suites":["spy",".calledTwice"],"updatePoint":{"line":565,"column":43,"index":18439},"line":565,"code":"    it(\"is true after calling the spy twice\", function () {\n      this.spy();\n      this.spy();\n      assert(this.spy.calledTwice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy thrice","suites":["spy",".calledTwice"],"updatePoint":{"line":570,"column":45,"index":18581},"line":570,"code":"    it(\"is false after calling the spy thrice\", function () {\n      this.spy();\n      this.spy();\n      this.spy();\n      assert.isFalse(this.spy.calledTwice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false prior to calling the spy","suites":["spy",".calledThrice"],"updatePoint":{"line":581,"column":41,"index":18860},"line":581,"code":"    it(\"is false prior to calling the spy\", function () {\n      assert.isFalse(this.spy.calledThrice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy twice","suites":["spy",".calledThrice"],"updatePoint":{"line":584,"column":44,"index":18974},"line":584,"code":"    it(\"is false after calling the spy twice\", function () {\n      this.spy();\n      this.spy();\n      assert.isFalse(this.spy.calledThrice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true after calling the spy thrice","suites":["spy",".calledThrice"],"updatePoint":{"line":589,"column":44,"index":19124},"line":589,"code":"    it(\"is true after calling the spy thrice\", function () {\n      this.spy();\n      this.spy();\n      this.spy();\n      assert(this.spy.calledThrice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false after calling the spy four times","suites":["spy",".calledThrice"],"updatePoint":{"line":595,"column":49,"index":19289},"line":595,"code":"    it(\"is false after calling the spy four times\", function () {\n      this.spy();\n      this.spy();\n      this.spy();\n      this.spy();\n      assert.isFalse(this.spy.calledThrice);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"reports 0 calls","suites":["spy",".callCount"],"updatePoint":{"line":607,"column":23,"index":19566},"line":607,"code":"    it(\"reports 0 calls\", function () {\n      assert.equals(this.spy.callCount, 0);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"records one call","suites":["spy",".callCount"],"updatePoint":{"line":610,"column":24,"index":19659},"line":610,"code":"    it(\"records one call\", function () {\n      this.spy();\n      assert.equals(this.spy.callCount, 1);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"records two calls","suites":["spy",".callCount"],"updatePoint":{"line":614,"column":25,"index":19771},"line":614,"code":"    it(\"records two calls\", function () {\n      this.spy();\n      this.spy();\n      assert.equals(this.spy.callCount, 2);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"increases call count for each call","suites":["spy",".callCount"],"updatePoint":{"line":619,"column":42,"index":19918},"line":619,"code":"    it(\"increases call count for each call\", function () {\n      this.spy();\n      this.spy();\n      assert.equals(this.spy.callCount, 2);\n      this.spy();\n      assert.equals(this.spy.callCount, 3);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if spy wasn't called","suites":["spy",".calledOn"],"updatePoint":{"line":631,"column":37,"index":20233},"line":631,"code":"    it(\"is false if spy wasn't called\", function () {\n      assert.isFalse(this.spy.calledOn({}));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with thisValue","suites":["spy",".calledOn"],"updatePoint":{"line":634,"column":40,"index":20343},"line":634,"code":"    it(\"is true if called with thisValue\", function () {\n      const object = {};\n      this.spy.call(object);\n      assert(this.spy.calledOn(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called on object at least once","suites":["spy",".calledOn","in browser"],"updatePoint":{"line":645,"column":51,"index":20670},"line":645,"code":"      it(\"is true if called on object at least once\", function () {\n        const object = {};\n        this.spy();\n        this.spy.call({});\n        this.spy.call(object);\n        this.spy.call(window);\n        assert(this.spy.calledOn(object));\n      });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called on object","suites":["spy",".calledOn","in browser"],"updatePoint":{"line":654,"column":45,"index":20929},"line":654,"code":"    it(\"returns false if not called on object\", function () {\n      const object = {};\n      this.spy.call(object);\n      this.spy();\n      assert.isFalse(this.spy.calledOn({}));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with matcher that returns true","suites":["spy",".calledOn","in browser"],"updatePoint":{"line":660,"column":56,"index":21127},"line":660,"code":"    it(\"is true if called with matcher that returns true\", function () {\n      const matcher = match(function () {\n        return true;\n      });\n      this.spy();\n      assert(this.spy.calledOn(matcher));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if called with matcher that returns false","suites":["spy",".calledOn","in browser"],"updatePoint":{"line":667,"column":58,"index":21343},"line":667,"code":"    it(\"is false if called with matcher that returns false\", function () {\n      const matcher = match(function () {\n        return false;\n      });\n      this.spy();\n      assert.isFalse(this.spy.calledOn(matcher));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes matcher.test with given object","suites":["spy",".calledOn","in browser"],"updatePoint":{"line":674,"column":46,"index":21556},"line":674,"code":"    it(\"invokes matcher.test with given object\", function () {\n      const expected = {};\n      let actual;\n      this.spy.call(expected);\n      this.spy.calledOn(match(function (value) {\n        actual = value;\n      }));\n      assert.same(actual, expected);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false prior to calling the spy","suites":["spy",".alwaysCalledOn"],"updatePoint":{"line":688,"column":41,"index":21936},"line":688,"code":"    it(\"is false prior to calling the spy\", function () {\n      assert.isFalse(this.spy.alwaysCalledOn({}));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with thisValue once","suites":["spy",".alwaysCalledOn"],"updatePoint":{"line":691,"column":45,"index":22057},"line":691,"code":"    it(\"is true if called with thisValue once\", function () {\n      const object = {};\n      this.spy.call(object);\n      assert(this.spy.alwaysCalledOn(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with thisValue many times","suites":["spy",".alwaysCalledOn"],"updatePoint":{"line":696,"column":51,"index":22234},"line":696,"code":"    it(\"is true if called with thisValue many times\", function () {\n      const object = {};\n      this.spy.call(object);\n      this.spy.call(object);\n      this.spy.call(object);\n      this.spy.call(object);\n      assert(this.spy.alwaysCalledOn(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if called with another object atleast once","suites":["spy",".alwaysCalledOn"],"updatePoint":{"line":704,"column":59,"index":22506},"line":704,"code":"    it(\"is false if called with another object atleast once\", function () {\n      const object = {};\n      this.spy.call(object);\n      this.spy.call(object);\n      this.spy.call(object);\n      this.spy();\n      this.spy.call(object);\n      assert.isFalse(this.spy.alwaysCalledOn(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if never called with expected object","suites":["spy",".alwaysCalledOn"],"updatePoint":{"line":713,"column":53,"index":22798},"line":713,"code":"    it(\"is false if never called with expected object\", function () {\n      const object = {};\n      this.spy();\n      this.spy();\n      this.spy();\n      assert.isFalse(this.spy.alwaysCalledOn(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if spy wasn't called","suites":["spy",".calledWithNew"],"updatePoint":{"line":725,"column":37,"index":23110},"line":725,"code":"    it(\"is false if spy wasn't called\", function () {\n      assert.isFalse(this.spy.calledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with new","suites":["spy",".calledWithNew"],"updatePoint":{"line":728,"column":34,"index":23217},"line":728,"code":"    it(\"is true if called with new\", function () {\n      const result = new this.spy(); // eslint-disable-line no-unused-vars, new-cap\n\n      assert(this.spy.calledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with new on custom constructor","suites":["spy",".calledWithNew"],"updatePoint":{"line":733,"column":56,"index":23423},"line":733,"code":"    it(\"is true if called with new on custom constructor\", function () {\n      function MyThing() {\n        return;\n      }\n      MyThing.prototype = {};\n      const ns = {\n        MyThing: MyThing\n      };\n      createSpy(ns, \"MyThing\");\n      const result = new ns.MyThing(); // eslint-disable-line no-unused-vars\n      assert(ns.MyThing.calledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if called as function","suites":["spy",".calledWithNew"],"updatePoint":{"line":745,"column":38,"index":23771},"line":745,"code":"    it(\"is false if called as function\", function () {\n      this.spy();\n      assert.isFalse(this.spy.calledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if called with new at least once","suites":["spy",".calledWithNew","in browser"],"updatePoint":{"line":755,"column":50,"index":24068},"line":755,"code":"      it(\"is true if called with new at least once\", function () {\n        const object = {};\n        this.spy();\n        const a = new this.spy(); // eslint-disable-line no-unused-vars, new-cap\n        this.spy(object);\n        this.spy(window);\n        assert(this.spy.calledWithNew());\n      });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true newed constructor returns object","suites":["spy",".calledWithNew","in browser"],"updatePoint":{"line":764,"column":48,"index":24373},"line":764,"code":"    it(\"is true newed constructor returns object\", function () {\n      function MyThing() {\n        return {};\n      }\n      const object = {\n        MyThing: MyThing\n      };\n      createSpy(object, \"MyThing\");\n      const result = new object.MyThing(); // eslint-disable-line no-unused-vars\n\n      assert(object.MyThing.calledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false when called on spied native function","suites":["spy",".calledWithNew","spied native function"],"updatePoint":{"line":786,"column":55,"index":25029},"line":786,"code":"      it(\"is false when called on spied native function\", function () {\n        const log = {\n          info: console.log\n        }; // eslint-disable-line no-console\n        createSpy(log, \"info\");\n\n        // by logging an empty string, we're not polluting the test console output\n        log.info(\"\");\n        assert.isFalse(log.info.calledWithNew());\n      });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if spy wasn't called","suites":["spy",".alwaysCalledWithNew"],"updatePoint":{"line":802,"column":37,"index":25506},"line":802,"code":"    it(\"is false if spy wasn't called\", function () {\n      assert.isFalse(this.spy.alwaysCalledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is true if always called with new","suites":["spy",".alwaysCalledWithNew"],"updatePoint":{"line":805,"column":41,"index":25626},"line":805,"code":"    it(\"is true if always called with new\", function () {\n      /*eslint-disable no-unused-vars, new-cap*/\n      const result = new this.spy();\n      const result2 = new this.spy();\n      const result3 = new this.spy();\n      /*eslint-enable no-unused-vars, new-cap*/\n\n      assert(this.spy.alwaysCalledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is false if called as function once","suites":["spy",".alwaysCalledWithNew"],"updatePoint":{"line":814,"column":43,"index":25951},"line":814,"code":"    it(\"is false if called as function once\", function () {\n      /*eslint-disable no-unused-vars, new-cap*/\n      const result = new this.spy();\n      const result2 = new this.spy();\n      /*eslint-enable no-unused-vars, new-cap*/\n      this.spy();\n      assert.isFalse(this.spy.alwaysCalledWithNew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains one object","suites":["spy",".thisValues"],"updatePoint":{"line":827,"column":27,"index":26360},"line":827,"code":"    it(\"contains one object\", function () {\n      const object = {};\n      this.spy.call(object);\n      assert.equals(this.spy.thisValues, [object]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stacks up objects","suites":["spy",".thisValues"],"updatePoint":{"line":832,"column":25,"index":26516},"line":832,"code":"    it(\"stacks up objects\", function () {\n      function MyConstructor() {\n        return;\n      }\n      const objects = [{}, [], new MyConstructor(), {\n        id: 243\n      }];\n      this.spy();\n      this.spy.call(objects[0]);\n      this.spy.call(objects[1]);\n      this.spy.call(objects[2]);\n      this.spy.call(objects[3]);\n      assert.equals(this.spy.thisValues, [this].concat(objects));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks substring match","suites":["spy",".calledWithMatchSpecial"],"updatePoint":{"line":856,"column":30,"index":27288},"line":856,"code":"    it(\"checks substring match\", function () {\n      this.spy(\"I like it\");\n      assert(this.spy.calledWithMatch(\"like\"));\n      assert.isFalse(this.spy.calledWithMatch(\"nope\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks for regexp match","suites":["spy",".calledWithMatchSpecial"],"updatePoint":{"line":861,"column":31,"index":27477},"line":861,"code":"    it(\"checks for regexp match\", function () {\n      this.spy(\"I like it\");\n      assert(this.spy.calledWithMatch(/[a-z ]+/i));\n      assert.isFalse(this.spy.calledWithMatch(/[0-9]+/));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks for partial object match","suites":["spy",".calledWithMatchSpecial"],"updatePoint":{"line":866,"column":39,"index":27680},"line":866,"code":"    it(\"checks for partial object match\", function () {\n      this.spy({\n        foo: \"foo\",\n        bar: \"bar\"\n      });\n      assert(this.spy.calledWithMatch({\n        bar: \"bar\"\n      }));\n      assert.isFalse(this.spy.calledWithMatch({\n        same: \"same\"\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks true","suites":["spy",".alwaysCalledWithMatchSpecial"],"updatePoint":{"line":889,"column":19,"index":28348},"line":889,"code":"    it(\"checks true\", function () {\n      this.spy(true);\n      assert(this.spy.alwaysCalledWithMatch(true));\n      assert.isFalse(this.spy.alwaysCalledWithMatch(false));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks false","suites":["spy",".alwaysCalledWithMatchSpecial"],"updatePoint":{"line":894,"column":20,"index":28528},"line":894,"code":"    it(\"checks false\", function () {\n      this.spy(false);\n      assert(this.spy.alwaysCalledWithMatch(false));\n      assert.isFalse(this.spy.alwaysCalledWithMatch(true));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks substring match","suites":["spy",".alwaysCalledWithMatchSpecial"],"updatePoint":{"line":899,"column":30,"index":28719},"line":899,"code":"    it(\"checks substring match\", function () {\n      this.spy(\"test case\");\n      this.spy(\"some test\");\n      this.spy(\"all tests\");\n      assert(this.spy.alwaysCalledWithMatch(\"test\"));\n      assert.isFalse(this.spy.alwaysCalledWithMatch(\"case\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks regexp match","suites":["spy",".alwaysCalledWithMatchSpecial"],"updatePoint":{"line":906,"column":27,"index":28974},"line":906,"code":"    it(\"checks regexp match\", function () {\n      this.spy(\"1\");\n      this.spy(\"2\");\n      this.spy(\"3\");\n      assert(this.spy.alwaysCalledWithMatch(/[123]/));\n      assert.isFalse(this.spy.alwaysCalledWithMatch(/[12]/));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks partial object match","suites":["spy",".alwaysCalledWithMatchSpecial"],"updatePoint":{"line":913,"column":35,"index":29214},"line":913,"code":"    it(\"checks partial object match\", function () {\n      this.spy({\n        a: \"a\",\n        b: \"b\"\n      });\n      this.spy({\n        c: \"c\",\n        b: \"b\"\n      });\n      this.spy({\n        b: \"b\",\n        d: \"d\"\n      });\n      assert(this.spy.alwaysCalledWithMatch({\n        b: \"b\"\n      }));\n      assert.isFalse(this.spy.alwaysCalledWithMatch({\n        a: \"a\"\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks substring match","suites":["spy",".neverCalledWithMatchSpecial"],"updatePoint":{"line":944,"column":30,"index":29996},"line":944,"code":"    it(\"checks substring match\", function () {\n      this.spy(\"a test\", \"b test\");\n      assert(this.spy.neverCalledWithMatch(\"a\", \"a\"));\n      assert(this.spy.neverCalledWithMatch(\"b\", \"b\"));\n      assert(this.spy.neverCalledWithMatch(\"b\", \"a\"));\n      assert.isFalse(this.spy.neverCalledWithMatch(\"a\", \"b\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks regexp match","suites":["spy",".neverCalledWithMatchSpecial"],"updatePoint":{"line":951,"column":27,"index":30312},"line":951,"code":"    it(\"checks regexp match\", function () {\n      this.spy(\"a test\", \"b test\");\n      assert(this.spy.neverCalledWithMatch(/a/, /a/));\n      assert(this.spy.neverCalledWithMatch(/b/, /b/));\n      assert(this.spy.neverCalledWithMatch(/b/, /a/));\n      assert.isFalse(this.spy.neverCalledWithMatch(/a/, /b/));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"checks partial object match","suites":["spy",".neverCalledWithMatchSpecial"],"updatePoint":{"line":958,"column":35,"index":30636},"line":958,"code":"    it(\"checks partial object match\", function () {\n      this.spy({\n        a: \"test\",\n        b: \"test\"\n      });\n      assert(this.spy.neverCalledWithMatch({\n        a: \"nope\"\n      }));\n      assert(this.spy.neverCalledWithMatch({\n        c: \"test\"\n      }));\n      assert.isFalse(this.spy.neverCalledWithMatch({\n        b: \"test\"\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains real arrays","suites":["spy",".args"],"updatePoint":{"line":978,"column":28,"index":31090},"line":978,"code":"    it(\"contains real arrays\", function () {\n      this.spy();\n      assert.isArray(this.spy.args[0]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains empty array when no arguments","suites":["spy",".args"],"updatePoint":{"line":982,"column":46,"index":31219},"line":982,"code":"    it(\"contains empty array when no arguments\", function () {\n      this.spy();\n      assert.equals(this.spy.args, [[]]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains array with first call's arguments","suites":["spy",".args"],"updatePoint":{"line":986,"column":50,"index":31354},"line":986,"code":"    it(\"contains array with first call's arguments\", function () {\n      this.spy(1, 2, 3);\n      assert.equals(this.spy.args, [[1, 2, 3]]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stacks up arguments in nested array","suites":["spy",".args"],"updatePoint":{"line":990,"column":43,"index":31496},"line":990,"code":"    it(\"stacks up arguments in nested array\", function () {\n      const objects = [{}, [], {\n        id: 324\n      }];\n      this.spy(1, objects[0], 3);\n      this.spy(1, 2, objects[1]);\n      this.spy(objects[2], 2, 3);\n      assert.equals(this.spy.args, [[1, objects[0], 3], [1, 2, objects[1]], [objects[2], 2, 3]]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for partial match","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1004,"column":39,"index":31939},"line":1004,"code":"    it(\"returns false for partial match\", function () {\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.calledWithExactly(1, 2));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for missing arguments","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1008,"column":43,"index":32088},"line":1008,"code":"    it(\"returns false for missing arguments\", function () {\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.calledWithExactly(1, 2, 3, 4));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for exact match","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1012,"column":36,"index":32236},"line":1012,"code":"    it(\"returns true for exact match\", function () {\n      this.spy(1, 2, 3);\n      assert(this.spy.calledWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"matchs by strict comparison","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1016,"column":35,"index":32372},"line":1016,"code":"    it(\"matchs by strict comparison\", function () {\n      this.spy({}, []);\n      assert.isFalse(this.spy.calledWithExactly({}, [], null));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for one exact match","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1020,"column":40,"index":32525},"line":1020,"code":"    it(\"returns true for one exact match\", function () {\n      const object = {};\n      const array = [];\n      this.spy({}, []);\n      this.spy(object, []);\n      this.spy(object, array);\n      assert(this.spy.calledWithExactly(object, array));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true when all properties of an object argument match","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1028,"column":68,"index":32807},"line":1028,"code":"    it(\"returns true when all properties of an object argument match\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        c: 3\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when a property of an object argument is set to undefined","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1040,"column":79,"index":33073},"line":1040,"code":"    it(\"returns false when a property of an object argument is set to undefined\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        c: undefined\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when a property of an object argument is set to a different value","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1052,"column":87,"index":33363},"line":1052,"code":"    it(\"returns false when a property of an object argument is set to a different value\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        c: \"blah\"\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when an object argument has a different property/value pair","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1064,"column":81,"index":33644},"line":1064,"code":"    it(\"returns false when an object argument has a different property/value pair\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        foo: \"blah\"\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when property of Object argument is set to undefined and has a different name","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1076,"column":99,"index":33945},"line":1076,"code":"    it(\"returns false when property of Object argument is set to undefined and has a different name\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        foo: undefined\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when any properties of an object argument aren't present","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1088,"column":78,"index":34228},"line":1088,"code":"    it(\"returns false when any properties of an object argument aren't present\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when an object argument has extra properties","suites":["spy",".calledWithExactly"],"updatePoint":{"line":1099,"column":66,"index":34475},"line":1099,"code":"    it(\"returns false when an object argument has extra properties\", function () {\n      this.spy({\n        a: 1,\n        b: 2,\n        c: 3\n      });\n      assert.isFalse(this.spy.calledWithExactly({\n        a: 1,\n        b: 2,\n        c: 3,\n        d: 4\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for not exact match","suites":["spy",".calledOnceWith"],"updatePoint":{"line":1117,"column":40,"index":34841},"line":1117,"code":"    it(\"returns true for not exact match\", function () {\n      this.spy(1, 2, 3, 4);\n      assert.isTrue(this.spy.calledOnceWith(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for matching calls but called more then once","suites":["spy",".calledOnceWith"],"updatePoint":{"line":1121,"column":66,"index":35015},"line":1121,"code":"    it(\"returns false for matching calls but called more then once\", function () {\n      this.spy(1, 2, 3, 4);\n      this.spy(1, 2, 3, 6);\n      assert.isFalse(this.spy.calledOnceWith(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call","suites":["spy",".calledOnceWith"],"updatePoint":{"line":1126,"column":44,"index":35196},"line":1126,"code":"    it(\"return false for one mismatched call\", function () {\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWith(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call with some other ","suites":["spy",".calledOnceWith"],"updatePoint":{"line":1130,"column":61,"index":35360},"line":1130,"code":"    it(\"return false for one mismatched call with some other \", function () {\n      this.spy(1, 2, 3);\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWith(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for exact match","suites":["spy",".calledOnceWithExactly"],"updatePoint":{"line":1140,"column":36,"index":35648},"line":1140,"code":"    it(\"returns true for exact match\", function () {\n      this.spy(1, 2, 3);\n      assert.isTrue(this.spy.calledOnceWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for exact parameters but called more then once","suites":["spy",".calledOnceWithExactly"],"updatePoint":{"line":1144,"column":68,"index":35828},"line":1144,"code":"    it(\"returns false for exact parameters but called more then once\", function () {\n      this.spy(1, 2, 3);\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.calledOnceWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call","suites":["spy",".calledOnceWithExactly"],"updatePoint":{"line":1149,"column":44,"index":36010},"line":1149,"code":"    it(\"return false for one mismatched call\", function () {\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call with some other ","suites":["spy",".calledOnceWithExactly"],"updatePoint":{"line":1153,"column":61,"index":36181},"line":1153,"code":"    it(\"return false for one mismatched call with some other \", function () {\n      this.spy(1, 2, 3);\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for exact match","suites":["spy",".calledOnceWithMatch"],"updatePoint":{"line":1163,"column":36,"index":36474},"line":1163,"code":"    it(\"returns true for exact match\", function () {\n      this.spy(1, 2, 3);\n      assert.isTrue(this.spy.calledOnceWithMatch(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for partial match","suites":["spy",".calledOnceWithMatch"],"updatePoint":{"line":1167,"column":38,"index":36622},"line":1167,"code":"    it(\"returns true for partial match\", function () {\n      this.spy(1, 2, 3);\n      assert.isTrue(this.spy.calledOnceWithMatch(1, 2));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for exact parameters but called more then once","suites":["spy",".calledOnceWithMatch"],"updatePoint":{"line":1171,"column":68,"index":36797},"line":1171,"code":"    it(\"returns false for exact parameters but called more then once\", function () {\n      this.spy(1, 2, 3);\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.calledOnceWithMatch(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call","suites":["spy",".calledOnceWithMatch"],"updatePoint":{"line":1176,"column":44,"index":36977},"line":1176,"code":"    it(\"return false for one mismatched call\", function () {\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWithMatch(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return false for one mismatched call with some other","suites":["spy",".calledOnceWithMatch"],"updatePoint":{"line":1180,"column":60,"index":37145},"line":1180,"code":"    it(\"return false for one mismatched call with some other\", function () {\n      this.spy(1, 2, 3);\n      this.spy(1, 2);\n      assert.isFalse(this.spy.calledOnceWithMatch(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for partial match","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1190,"column":39,"index":37443},"line":1190,"code":"    it(\"returns false for partial match\", function () {\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.alwaysCalledWithExactly(1, 2));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for missing arguments","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1194,"column":43,"index":37598},"line":1194,"code":"    it(\"returns false for missing arguments\", function () {\n      this.spy(1, 2, 3);\n      assert.isFalse(this.spy.alwaysCalledWithExactly(1, 2, 3, 4));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for exact match","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1198,"column":36,"index":37752},"line":1198,"code":"    it(\"returns true for exact match\", function () {\n      this.spy(1, 2, 3);\n      assert(this.spy.alwaysCalledWithExactly(1, 2, 3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for excess arguments","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1202,"column":42,"index":37901},"line":1202,"code":"    it(\"returns false for excess arguments\", function () {\n      this.spy({}, []);\n      assert.isFalse(this.spy.alwaysCalledWithExactly({}, [], null));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for one exact match","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1206,"column":41,"index":38061},"line":1206,"code":"    it(\"returns false for one exact match\", function () {\n      const object = {};\n      const array = [];\n      this.spy({}, []);\n      this.spy(object, []);\n      this.spy(object, array);\n      assert(this.spy.alwaysCalledWithExactly(object, array));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for only exact matches","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1214,"column":43,"index":38324},"line":1214,"code":"    it(\"returns true for only exact matches\", function () {\n      const object = {};\n      const array = [];\n      this.spy(object, array);\n      this.spy(object, array);\n      this.spy(object, array);\n      assert(this.spy.alwaysCalledWithExactly(object, array));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false for no exact matches","suites":["spy",".alwaysCalledWithExactly"],"updatePoint":{"line":1222,"column":42,"index":38596},"line":1222,"code":"    it(\"returns false for no exact matches\", function () {\n      const object = {};\n      const array = [];\n      this.spy(object, array, null);\n      this.spy(object, array, undefined);\n      this.spy(object, array, \"\");\n      assert.isFalse(this.spy.alwaysCalledWithExactly(object, array));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns exception thrown by function","suites":["spy",".threw"],"updatePoint":{"line":1242,"column":44,"index":39244},"line":1242,"code":"    it(\"returns exception thrown by function\", function () {\n      const err = new Error();\n      const spy = createSpy(function () {\n        throw err;\n      });\n      assert.exception(spy);\n      assert(spy.threw(err));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy did not throw","suites":["spy",".threw"],"updatePoint":{"line":1250,"column":42,"index":39472},"line":1250,"code":"    it(\"returns false if spy did not throw\", function () {\n      this.spy();\n      assert.isFalse(this.spy.threw());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if spy threw","suites":["spy",".threw"],"updatePoint":{"line":1254,"column":33,"index":39588},"line":1254,"code":"    it(\"returns true if spy threw\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.threw());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if string type matches","suites":["spy",".threw"],"updatePoint":{"line":1258,"column":43,"index":39748},"line":1258,"code":"    it(\"returns true if string type matches\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.threw(\"TypeError\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if string did not match","suites":["spy",".threw"],"updatePoint":{"line":1262,"column":45,"index":39921},"line":1262,"code":"    it(\"returns false if string did not match\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert.isFalse(this.spyWithTypeError.threw(\"Error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy did not throw specified error","suites":["spy",".threw"],"updatePoint":{"line":1266,"column":58,"index":40111},"line":1266,"code":"    it(\"returns false if spy did not throw specified error\", function () {\n      this.spy();\n      assert.isFalse(this.spy.threw(\"Error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if string matches","suites":["spy",".threw"],"updatePoint":{"line":1270,"column":38,"index":40239},"line":1270,"code":"    it(\"returns true if string matches\", function () {\n      assert.exception(this.spyWithStringError);\n      assert(this.spyWithStringError.threw(\"error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if strings do not match","suites":["spy",".threw"],"updatePoint":{"line":1274,"column":45,"index":40412},"line":1274,"code":"    it(\"returns false if strings do not match\", function () {\n      assert.exception(this.spyWithStringError);\n      assert.isFalse(this.spyWithStringError.threw(\"not the error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true when spy threw","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1286,"column":35,"index":40800},"line":1286,"code":"    it(\"returns true when spy threw\", function () {\n      const err = new Error();\n      const spy = createSpy(function () {\n        throw err;\n      });\n      assert.exception(spy);\n      assert(spy.alwaysThrew(err));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy did not throw","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1294,"column":42,"index":41034},"line":1294,"code":"    it(\"returns false if spy did not throw\", function () {\n      this.spy();\n      assert.isFalse(this.spy.alwaysThrew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if spy threw","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1298,"column":33,"index":41156},"line":1298,"code":"    it(\"returns true if spy threw\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.alwaysThrew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if string type matches","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1302,"column":43,"index":41322},"line":1302,"code":"    it(\"returns true if string type matches\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.alwaysThrew(\"TypeError\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if string did not match","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1306,"column":45,"index":41501},"line":1306,"code":"    it(\"returns false if string did not match\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert.isFalse(this.spyWithTypeError.alwaysThrew(\"Error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if spy did not throw specified error","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1310,"column":58,"index":41697},"line":1310,"code":"    it(\"returns false if spy did not throw specified error\", function () {\n      this.spy();\n      assert.isFalse(this.spy.alwaysThrew(\"Error\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if some calls did not throw","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1314,"column":49,"index":41842},"line":1314,"code":"    it(\"returns false if some calls did not throw\", function () {\n      let callCount = 0;\n      this.spy = createSpy(function () {\n        callCount += 1;\n        if (callCount === 1) {\n          throw new Error(\"throwing on first call\");\n        }\n      });\n      assert.exception(this.spy);\n      this.spy();\n      assert.isFalse(this.spy.alwaysThrew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if all calls threw","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1326,"column":39,"index":42198},"line":1326,"code":"    it(\"returns true if all calls threw\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.alwaysThrew());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if all calls threw same type","suites":["spy",".alwaysThrew"],"updatePoint":{"line":1331,"column":49,"index":42417},"line":1331,"code":"    it(\"returns true if all calls threw same type\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert.exception(this.spyWithTypeError);\n      assert(this.spyWithTypeError.alwaysThrew(\"TypeError\"));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains exception thrown by function","suites":["spy",".exceptions"],"updatePoint":{"line":1345,"column":45,"index":42878},"line":1345,"code":"    it(\"contains exception thrown by function\", function () {\n      assert.exception(this.spyWithTypeError);\n      assert.equals(this.spyWithTypeError.exceptions, [this.error]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains undefined entry when function did not throw","suites":["spy",".exceptions"],"updatePoint":{"line":1349,"column":60,"index":43079},"line":1349,"code":"    it(\"contains undefined entry when function did not throw\", function () {\n      this.spy();\n      assert.equals(this.spy.exceptions.length, 1);\n      assert.isUndefined(this.spy.exceptions[0]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stacks up exceptions and undefined","suites":["spy",".exceptions"],"updatePoint":{"line":1354,"column":42,"index":43266},"line":1354,"code":"    it(\"stacks up exceptions and undefined\", function () {\n      let calls = 0;\n      const err = this.error;\n      const spy = createSpy(function () {\n        calls += 1;\n        if (calls % 2 === 0) {\n          throw err;\n        }\n      });\n      spy();\n      assert.exception(spy);\n      spy();\n      assert.exception(spy);\n      spy();\n      assert.equals(spy.exceptions.length, 5);\n      assert.isUndefined(spy.exceptions[0]);\n      assert.equals(spy.exceptions[1], err);\n      assert.isUndefined(spy.exceptions[2]);\n      assert.equals(spy.exceptions[3], err);\n      assert.isUndefined(spy.exceptions[4]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true when no argument","suites":["spy",".returned"],"updatePoint":{"line":1377,"column":37,"index":43926},"line":1377,"code":"    it(\"returns true when no argument\", function () {\n      const spy = createSpy();\n      spy();\n      assert(spy.returned());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true for undefined when no explicit return","suites":["spy",".returned"],"updatePoint":{"line":1382,"column":58,"index":44083},"line":1382,"code":"    it(\"returns true for undefined when no explicit return\", function () {\n      const spy = createSpy();\n      spy();\n      assert(spy.returned(undefined));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true when returned value once","suites":["spy",".returned"],"updatePoint":{"line":1387,"column":45,"index":44236},"line":1387,"code":"    it(\"returns true when returned value once\", function () {\n      const values = [{}, 2, \"hey\", function () {\n        return;\n      }];\n      const spy = createSpy(function () {\n        return values[spy.callCount];\n      });\n      spy();\n      spy();\n      spy();\n      spy();\n      assert(spy.returned(values[3]));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false when value is never returned","suites":["spy",".returned"],"updatePoint":{"line":1400,"column":50,"index":44568},"line":1400,"code":"    it(\"returns false when value is never returned\", function () {\n      const values = [{}, 2, \"hey\", function () {\n        return;\n      }];\n      const spy = createSpy(function () {\n        return values[spy.callCount];\n      });\n      spy();\n      spy();\n      spy();\n      spy();\n      assert.isFalse(spy.returned({\n        id: 42\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true when value is returned several times","suites":["spy",".returned"],"updatePoint":{"line":1415,"column":57,"index":44930},"line":1415,"code":"    it(\"returns true when value is returned several times\", function () {\n      const object = {\n        id: 42\n      };\n      const spy = createSpy(function () {\n        return object;\n      });\n      spy();\n      spy();\n      spy();\n      assert(spy.returned(object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares values deeply","suites":["spy",".returned"],"updatePoint":{"line":1427,"column":30,"index":45182},"line":1427,"code":"    it(\"compares values deeply\", function () {\n      const object = {\n        deep: {\n          id: 42\n        }\n      };\n      const spy = createSpy(function () {\n        return object;\n      });\n      spy();\n      assert(spy.returned({\n        deep: {\n          id: 42\n        }\n      }));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares values strictly using match.same","suites":["spy",".returned"],"updatePoint":{"line":1443,"column":49,"index":45501},"line":1443,"code":"    it(\"compares values strictly using match.same\", function () {\n      const object = {\n        id: 42\n      };\n      const spy = createSpy(function () {\n        return object;\n      });\n      spy();\n      assert.isFalse(spy.returned(match.same({\n        id: 42\n      })));\n      assert(spy.returned(match.same(object)));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains undefined when function does not return explicitly","suites":["spy",".returnValues"],"updatePoint":{"line":1458,"column":67,"index":45898},"line":1458,"code":"    it(\"contains undefined when function does not return explicitly\", function () {\n      const spy = createSpy();\n      spy();\n      assert.equals(spy.returnValues.length, 1);\n      assert.isUndefined(spy.returnValues[0]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains return value","suites":["spy",".returnValues"],"updatePoint":{"line":1464,"column":29,"index":46092},"line":1464,"code":"    it(\"contains return value\", function () {\n      const object = {\n        id: 42\n      };\n      const spy = createSpy(function () {\n        return object;\n      });\n      spy();\n      assert.equals(spy.returnValues, [object]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains undefined when function throws","suites":["spy",".returnValues"],"updatePoint":{"line":1474,"column":47,"index":46348},"line":1474,"code":"    it(\"contains undefined when function throws\", function () {\n      const spy = createSpy(function () {\n        throw new Error();\n      });\n      assert.exception(spy);\n      assert.equals(spy.returnValues.length, 1);\n      assert.isUndefined(spy.returnValues[0]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains the created object for spied constructors","suites":["spy",".returnValues"],"updatePoint":{"line":1482,"column":58,"index":46635},"line":1482,"code":"    it(\"contains the created object for spied constructors\", function () {\n      const Spy = createSpy(function () {\n        return;\n      });\n      const result = new Spy();\n      assert.equals(Spy.returnValues[0], result);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains the return value for spied constructors that explicitly return objects","suites":["spy",".returnValues"],"updatePoint":{"line":1489,"column":87,"index":46897},"line":1489,"code":"    it(\"contains the return value for spied constructors that explicitly return objects\", function () {\n      const Spy = createSpy(function () {\n        return {\n          isExplicitlyCreatedValue: true\n        };\n      });\n      const result = new Spy();\n      assert.isTrue(result.isExplicitlyCreatedValue);\n      assert.equals(Spy.returnValues[0], result);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"contains the created object for spied constructors that explicitly return primitive values","suites":["spy",".returnValues"],"updatePoint":{"line":1499,"column":98,"index":47277},"line":1499,"code":"    it(\"contains the created object for spied constructors that explicitly return primitive values\", function () {\n      const Spy = createSpy(function () {\n        return 10;\n      });\n      const result = new Spy();\n      refute.equals(result, 10);\n      assert.equals(Spy.returnValues[0], result);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stacks up return values","suites":["spy",".returnValues"],"updatePoint":{"line":1507,"column":31,"index":47519},"line":1507,"code":"    it(\"stacks up return values\", function () {\n      let calls = 0;\n\n      /*eslint consistent-return: \"off\"*/\n      const spy = createSpy(function () {\n        calls += 1;\n        if (calls % 2 === 0) {\n          return calls;\n        }\n      });\n      spy();\n      spy();\n      spy();\n      spy();\n      spy();\n      assert.equals(spy.returnValues.length, 5);\n      assert.isUndefined(spy.returnValues[0]);\n      assert.equals(spy.returnValues[1], 2);\n      assert.isUndefined(spy.returnValues[2]);\n      assert.equals(spy.returnValues[3], 4);\n      assert.isUndefined(spy.returnValues[4]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".calledBefore"],"updatePoint":{"line":1535,"column":19,"index":48256},"line":1535,"code":"    it(\"is function\", function () {\n      assert.isFunction(this.spyA.calledBefore);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if first call to A was before first to B","suites":["spy",".calledBefore"],"updatePoint":{"line":1538,"column":61,"index":48391},"line":1538,"code":"    it(\"returns true if first call to A was before first to B\", function () {\n      this.spyA();\n      this.spyB();\n      assert(this.spyA.calledBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares call order of calls directly","suites":["spy",".calledBefore"],"updatePoint":{"line":1543,"column":45,"index":48548},"line":1543,"code":"    it(\"compares call order of calls directly\", function () {\n      this.spyA();\n      this.spyB();\n      assert(this.spyA.getCall(0).calledBefore(this.spyB.getCall(0)));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called","suites":["spy",".calledBefore"],"updatePoint":{"line":1548,"column":35,"index":48717},"line":1548,"code":"    it(\"returns false if not called\", function () {\n      this.spyB();\n      assert.isFalse(this.spyA.calledBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if other not called","suites":["spy",".calledBefore"],"updatePoint":{"line":1552,"column":40,"index":48858},"line":1552,"code":"    it(\"returns true if other not called\", function () {\n      this.spyA();\n      assert(this.spyA.calledBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other called first","suites":["spy",".calledBefore"],"updatePoint":{"line":1556,"column":43,"index":48994},"line":1556,"code":"    it(\"returns false if other called first\", function () {\n      this.spyB();\n      this.spyA();\n      this.spyB();\n      assert(this.spyA.calledBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".calledAfter"],"updatePoint":{"line":1568,"column":19,"index":49290},"line":1568,"code":"    it(\"is function\", function () {\n      assert.isFunction(this.spyA.calledAfter);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if first call to A was after first to B","suites":["spy",".calledAfter"],"updatePoint":{"line":1571,"column":60,"index":49423},"line":1571,"code":"    it(\"returns true if first call to A was after first to B\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyA.calledAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares calls directly","suites":["spy",".calledAfter"],"updatePoint":{"line":1576,"column":31,"index":49565},"line":1576,"code":"    it(\"compares calls directly\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyA.getCall(0).calledAfter(this.spyB.getCall(0)));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called","suites":["spy",".calledAfter"],"updatePoint":{"line":1581,"column":35,"index":49733},"line":1581,"code":"    it(\"returns false if not called\", function () {\n      this.spyB();\n      assert.isFalse(this.spyA.calledAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other not called","suites":["spy",".calledAfter"],"updatePoint":{"line":1585,"column":41,"index":49874},"line":1585,"code":"    it(\"returns false if other not called\", function () {\n      this.spyA();\n      assert.isFalse(this.spyA.calledAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if called anytime after other","suites":["spy",".calledAfter"],"updatePoint":{"line":1589,"column":50,"index":50024},"line":1589,"code":"    it(\"returns true if called anytime after other\", function () {\n      this.spyB();\n      this.spyA();\n      this.spyB();\n      assert.isTrue(this.spyA.calledAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1602,"column":19,"index":50368},"line":1602,"code":"    it(\"is function\", function () {\n      assert.isFunction(this.spyA.calledImmediatelyAfter);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if first call to A was immediately after first to B","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1605,"column":72,"index":50524},"line":1605,"code":"    it(\"returns true if first call to A was immediately after first to B\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyA.calledImmediatelyAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares calls directly","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1610,"column":31,"index":50677},"line":1610,"code":"    it(\"compares calls directly\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyA.getCall(0).calledImmediatelyAfter(this.spyB.getCall(0)));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1615,"column":35,"index":50856},"line":1615,"code":"    it(\"returns false if not called\", function () {\n      this.spyB();\n      assert.isFalse(this.spyA.calledImmediatelyAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other not called","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1619,"column":41,"index":51008},"line":1619,"code":"    it(\"returns false if other not called\", function () {\n      this.spyA();\n      assert.isFalse(this.spyA.calledImmediatelyAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other called last","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1623,"column":42,"index":51161},"line":1623,"code":"    it(\"returns false if other called last\", function () {\n      this.spyB();\n      this.spyA();\n      this.spyB();\n      assert.isFalse(this.spyA.calledImmediatelyAfter(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if another spy called between","suites":["spy",".calledImmediatelyAfter"],"updatePoint":{"line":1629,"column":51,"index":51361},"line":1629,"code":"    it(\"returns false if another spy called between\", function () {\n      this.spyA();\n      this.spyC();\n      this.spyB();\n      assert.isFalse(this.spyB.calledImmediatelyAfter(this.spyA));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1642,"column":19,"index":51718},"line":1642,"code":"    it(\"is function\", function () {\n      assert.isFunction(this.spyA.calledImmediatelyBefore);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns true if first call to A was immediately after first to B","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1645,"column":72,"index":51875},"line":1645,"code":"    it(\"returns true if first call to A was immediately after first to B\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyB.calledImmediatelyBefore(this.spyA));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"compares calls directly","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1650,"column":31,"index":52029},"line":1650,"code":"    it(\"compares calls directly\", function () {\n      this.spyB();\n      this.spyA();\n      assert(this.spyB.getCall(0).calledImmediatelyBefore(this.spyA.getCall(0)));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if not called","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1655,"column":35,"index":52209},"line":1655,"code":"    it(\"returns false if not called\", function () {\n      this.spyB();\n      assert.isFalse(this.spyA.calledImmediatelyBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other not called","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1659,"column":41,"index":52362},"line":1659,"code":"    it(\"returns false if other not called\", function () {\n      this.spyA();\n      assert.isFalse(this.spyA.calledImmediatelyBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if other called last","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1663,"column":42,"index":52516},"line":1663,"code":"    it(\"returns false if other called last\", function () {\n      this.spyB();\n      this.spyA();\n      this.spyB();\n      assert.isFalse(this.spyB.calledImmediatelyBefore(this.spyA));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns false if another spy called between","suites":["spy",".calledImmediatelyBefore"],"updatePoint":{"line":1669,"column":51,"index":52717},"line":1669,"code":"    it(\"returns false if another spy called between\", function () {\n      this.spyA();\n      this.spyC();\n      this.spyB();\n      assert.isFalse(this.spyA.calledImmediatelyBefore(this.spyB));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is undefined by default","suites":["spy",".firstCall"],"updatePoint":{"line":1677,"column":31,"index":52943},"line":1677,"code":"    it(\"is undefined by default\", function () {\n      const spy = createSpy();\n      assert.isNull(spy.firstCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(0) result after first call","suites":["spy",".firstCall"],"updatePoint":{"line":1681,"column":54,"index":53089},"line":1681,"code":"    it(\"is equal to getCall(0) result after first call\", function () {\n      const spy = createSpy();\n      spy();\n      const call0 = spy.getCall(0);\n      assert.equals(spy.firstCall.callId, call0.callId);\n      assert.same(spy.firstCall.spy, call0.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(0) after first call when control flow has continued after invocation","suites":["spy",".firstCall"],"updatePoint":{"line":1688,"column":96,"index":53396},"line":1688,"code":"    it(\"is equal to getCall(0) after first call when control flow has continued after invocation\", function () {\n      // eslint-disable-next-line\n      const spy = createSpy(runAsserts);\n      function runAsserts() {\n        const call0 = spy.getCall(0);\n        assert.equals(spy.firstCall.callId, call0.callId);\n        assert.same(spy.firstCall.spy, call0.spy);\n      }\n      spy();\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is tracked even if exceptions are thrown","suites":["spy",".firstCall"],"updatePoint":{"line":1698,"column":48,"index":53743},"line":1698,"code":"    it(\"is tracked even if exceptions are thrown\", function () {\n      const spy = createSpy(function () {\n        throw new Error(\"an exception\");\n      });\n      assert.exception(spy);\n      refute.isNull(spy.firstCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"has correct returnValue","suites":["spy",".firstCall"],"updatePoint":{"line":1705,"column":31,"index":53957},"line":1705,"code":"    it(\"has correct returnValue\", function () {\n      const spy = createSpy(function () {\n        return 42;\n      });\n      spy();\n      assert.equals(spy.firstCall.returnValue, 42);\n      assert(spy.firstCall.returned(42));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"has correct exception","suites":["spy",".firstCall"],"updatePoint":{"line":1713,"column":29,"index":54189},"line":1713,"code":"    it(\"has correct exception\", function () {\n      const err = new Error();\n      const spy = createSpy(function () {\n        throw err;\n      });\n      assert.exception(spy);\n      assert.same(spy.firstCall.exception, err);\n      assert(spy.firstCall.threw(err));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is null by default","suites":["spy",".secondCall"],"updatePoint":{"line":1724,"column":26,"index":54506},"line":1724,"code":"    it(\"is null by default\", function () {\n      const spy = createSpy();\n      assert.isNull(spy.secondCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stills be null after first call","suites":["spy",".secondCall"],"updatePoint":{"line":1728,"column":39,"index":54638},"line":1728,"code":"    it(\"stills be null after first call\", function () {\n      const spy = createSpy();\n      spy();\n      assert.isNull(spy.secondCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(1) result after second call","suites":["spy",".secondCall"],"updatePoint":{"line":1733,"column":55,"index":54799},"line":1733,"code":"    it(\"is equal to getCall(1) result after second call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      const call1 = spy.getCall(1);\n      assert.equals(spy.secondCall.callId, call1.callId);\n      assert.same(spy.secondCall.spy, call1.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is undefined by default","suites":["spy",".thirdCall"],"updatePoint":{"line":1743,"column":31,"index":55101},"line":1743,"code":"    it(\"is undefined by default\", function () {\n      const spy = createSpy();\n      assert.isNull(spy.thirdCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"stills be undefined after second call","suites":["spy",".thirdCall"],"updatePoint":{"line":1747,"column":45,"index":55238},"line":1747,"code":"    it(\"stills be undefined after second call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      assert.isNull(spy.thirdCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(1) result after second call","suites":["spy",".thirdCall"],"updatePoint":{"line":1753,"column":55,"index":55411},"line":1753,"code":"    it(\"is equal to getCall(1) result after second call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      const call2 = spy.getCall(2);\n      assert.equals(spy.thirdCall.callId, call2.callId);\n      assert.same(spy.thirdCall.spy, call2.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is null for indexes >= length","suites":["spy",".getCall"],"updatePoint":{"line":1764,"column":37,"index":55728},"line":1764,"code":"    it(\"is null for indexes >= length\", function () {\n      const spy = createSpy();\n      spy();\n      assert.isNull(spy.getCall(1));\n      assert.isNull(spy.getCall(2));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is null for indexes < -length","suites":["spy",".getCall"],"updatePoint":{"line":1770,"column":37,"index":55908},"line":1770,"code":"    it(\"is null for indexes < -length\", function () {\n      const spy = createSpy();\n      spy();\n      assert.isNull(spy.getCall(-2));\n      assert.isNull(spy.getCall(-3));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is same as last call when passed index -1","suites":["spy",".getCall"],"updatePoint":{"line":1776,"column":49,"index":56102},"line":1776,"code":"    it(\"is same as last call when passed index -1\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      assert.same(spy.getCall(-1).callId, spy.lastCall.callId);\n      assert.same(spy.getCall(-1).spy, spy.lastCall.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is same as n-1th call when passed index -2","suites":["spy",".getCall"],"updatePoint":{"line":1784,"column":50,"index":56369},"line":1784,"code":"    it(\"is same as n-1th call when passed index -2\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      assert.same(spy.getCall(-2).callId, spy.getCall(1).callId);\n      assert.same(spy.getCall(-2).spy, spy.getCall(1).spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is undefined by default","suites":["spy",".lastCall"],"updatePoint":{"line":1794,"column":31,"index":56665},"line":1794,"code":"    it(\"is undefined by default\", function () {\n      const spy = createSpy();\n      assert.isNull(spy.lastCall);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is same as firstCall after first call","suites":["spy",".lastCall"],"updatePoint":{"line":1798,"column":45,"index":56801},"line":1798,"code":"    it(\"is same as firstCall after first call\", function () {\n      const spy = createSpy();\n      spy();\n      assert.same(spy.lastCall.callId, spy.firstCall.callId);\n      assert.same(spy.lastCall.spy, spy.firstCall.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is same as secondCall after second call","suites":["spy",".lastCall"],"updatePoint":{"line":1804,"column":47,"index":57035},"line":1804,"code":"    it(\"is same as secondCall after second call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      assert.same(spy.lastCall.callId, spy.secondCall.callId);\n      assert.same(spy.lastCall.spy, spy.secondCall.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is same as thirdCall after third call","suites":["spy",".lastCall"],"updatePoint":{"line":1811,"column":45,"index":57282},"line":1811,"code":"    it(\"is same as thirdCall after third call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      assert.same(spy.lastCall.callId, spy.thirdCall.callId);\n      assert.same(spy.lastCall.spy, spy.thirdCall.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(3) result after fourth call","suites":["spy",".lastCall"],"updatePoint":{"line":1819,"column":55,"index":57550},"line":1819,"code":"    it(\"is equal to getCall(3) result after fourth call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      spy();\n      const call3 = spy.getCall(3);\n      assert.equals(spy.lastCall.callId, call3.callId);\n      assert.same(spy.lastCall.spy, call3.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is equal to getCall(4) result after fifth call","suites":["spy",".lastCall"],"updatePoint":{"line":1829,"column":54,"index":57852},"line":1829,"code":"    it(\"is equal to getCall(4) result after fifth call\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      spy();\n      spy();\n      spy();\n      const call4 = spy.getCall(4);\n      assert.equals(spy.lastCall.callId, call4.callId);\n      assert.same(spy.lastCall.spy, call4.spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns an empty Array by default","suites":["spy",".getCalls"],"updatePoint":{"line":1842,"column":41,"index":58198},"line":1842,"code":"    it(\"returns an empty Array by default\", function () {\n      const spy = createSpy();\n      assert.isArray(spy.getCalls());\n      assert.equals(spy.getCalls().length, 0);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is analogous to using getCall(n)","suites":["spy",".getCalls"],"updatePoint":{"line":1847,"column":40,"index":58379},"line":1847,"code":"    it(\"is analogous to using getCall(n)\", function () {\n      const spy = createSpy();\n      spy();\n      spy();\n      assert.equals(spy.getCalls(), [spy.getCall(0), spy.getCall(1)]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".callArg"],"updatePoint":{"line":1855,"column":19,"index":58594},"line":1855,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.callArg);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes argument at index for all calls","suites":["spy",".callArg"],"updatePoint":{"line":1859,"column":47,"index":58735},"line":1859,"code":"    it(\"invokes argument at index for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      spy.callArg(2);\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at index is not a function","suites":["spy",".callArg"],"updatePoint":{"line":1868,"column":53,"index":59035},"line":1868,"code":"    it(\"throws if argument at index is not a function\", function () {\n      const spy = createSpy();\n      spy();\n      assert.exception(function () {\n        spy.callArg(1);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".callArg"],"updatePoint":{"line":1877,"column":41,"index":59253},"line":1877,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      assert.exception(function () {\n        spy.callArg(0);\n      }, {\n        message: \"spy cannot call arg since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".callArg"],"updatePoint":{"line":1885,"column":42,"index":59502},"line":1885,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      assert.exception(function () {\n        spy.callArg(0);\n      }, {\n        message: \"someMethod cannot call arg since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not a number","suites":["spy",".callArg"],"updatePoint":{"line":1898,"column":39,"index":59863},"line":1898,"code":"    it(\"throws if index is not a number\", function () {\n      const spy = createSpy();\n      spy();\n      assert.exception(function () {\n        spy.callArg(\"\");\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"passs additional arguments","suites":["spy",".callArg"],"updatePoint":{"line":1907,"column":34,"index":60075},"line":1907,"code":"    it(\"passs additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      spy(callback);\n      spy.callArg(0, \"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".callArg"],"updatePoint":{"line":1916,"column":53,"index":60401},"line":1916,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      const returnValues = spy.callArg(2);\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".callArgOn"],"updatePoint":{"line":1930,"column":19,"index":60814},"line":1930,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.callArgOn);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes argument at index for all calls","suites":["spy",".callArgOn"],"updatePoint":{"line":1934,"column":47,"index":60957},"line":1934,"code":"    it(\"invokes argument at index for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      spy.callArgOn(2, thisObj);\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n      assert(callback.alwaysCalledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at index is not a function","suites":["spy",".callArgOn"],"updatePoint":{"line":1948,"column":53,"index":61398},"line":1948,"code":"    it(\"throws if argument at index is not a function\", function () {\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy();\n      assert.exception(function () {\n        spy.callArgOn(1, thisObj);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".callArgOn"],"updatePoint":{"line":1961,"column":41,"index":61709},"line":1961,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.callArgOn(0, thisObj);\n      }, {\n        message: \"spy cannot call arg since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".callArgOn"],"updatePoint":{"line":1973,"column":42,"index":62051},"line":1973,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.callArgOn(0, thisObj);\n      }, {\n        message: \"someMethod cannot call arg since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not a number","suites":["spy",".callArgOn"],"updatePoint":{"line":1990,"column":39,"index":62505},"line":1990,"code":"    it(\"throws if index is not a number\", function () {\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy();\n      assert.exception(function () {\n        spy.callArg(\"\", thisObj);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"pass additional arguments","suites":["spy",".callArgOn"],"updatePoint":{"line":2003,"column":33,"index":62807},"line":2003,"code":"    it(\"pass additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(callback);\n      spy.callArgOn(0, thisObj, \"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n      assert(callback.calledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".callArgOn"],"updatePoint":{"line":2017,"column":53,"index":63268},"line":2017,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      const returnValues = spy.callArgOn(2, thisObj);\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is alias for callArg","suites":["spy",".callArgWith"],"updatePoint":{"line":2035,"column":28,"index":63785},"line":2035,"code":"    it(\"is alias for callArg\", function () {\n      const spy = createSpy();\n      assert.same(spy.callArgWith, spy.callArg);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is alias for callArgOn","suites":["spy",".callArgOnWith"],"updatePoint":{"line":2041,"column":30,"index":63969},"line":2041,"code":"    it(\"is alias for callArgOn\", function () {\n      const spy = createSpy();\n      assert.same(spy.callArgOnWith, spy.callArgOn);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".yield"],"updatePoint":{"line":2047,"column":19,"index":64138},"line":2047,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.yield);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes first function arg for all calls","suites":["spy",".yield"],"updatePoint":{"line":2051,"column":48,"index":64278},"line":2051,"code":"    it(\"invokes first function arg for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      spy.yield();\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".yield"],"updatePoint":{"line":2060,"column":41,"index":64563},"line":2060,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      assert.exception(function () {\n        spy.yield();\n      }, {\n        message: \"spy cannot yield since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".yield"],"updatePoint":{"line":2068,"column":42,"index":64806},"line":2068,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      assert.exception(function () {\n        spy.yield();\n      }, {\n        message: \"someMethod cannot yield since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"passs additional arguments","suites":["spy",".yield"],"updatePoint":{"line":2081,"column":34,"index":65156},"line":2081,"code":"    it(\"passs additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      spy(callback);\n      spy.yield(\"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".yield"],"updatePoint":{"line":2090,"column":53,"index":65477},"line":2090,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      const returnValues = spy.yield();\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is alias for yield","suites":["spy",".invokeCallback"],"updatePoint":{"line":2104,"column":26,"index":65899},"line":2104,"code":"    it(\"is alias for yield\", function () {\n      const spy = createSpy();\n      assert.same(spy.invokeCallback, spy.yield);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".yieldOn"],"updatePoint":{"line":2110,"column":19,"index":66067},"line":2110,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.yieldOn);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes first function arg for all calls","suites":["spy",".yieldOn"],"updatePoint":{"line":2114,"column":48,"index":66209},"line":2114,"code":"    it(\"invokes first function arg for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      spy.yieldOn(thisObj);\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n      assert(callback.alwaysCalledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".yieldOn"],"updatePoint":{"line":2128,"column":41,"index":66633},"line":2128,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.yieldOn(thisObj);\n      }, {\n        message: \"spy cannot yield since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".yieldOn"],"updatePoint":{"line":2140,"column":42,"index":66967},"line":2140,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.yieldOn(thisObj);\n      }, {\n        message: \"someMethod cannot yield since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"pass additional arguments","suites":["spy",".yieldOn"],"updatePoint":{"line":2157,"column":33,"index":67407},"line":2157,"code":"    it(\"pass additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(callback);\n      spy.yieldOn(thisObj, \"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n      assert(callback.calledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".yieldOn"],"updatePoint":{"line":2171,"column":53,"index":67863},"line":2171,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, callback);\n      spy(3, 4, callback);\n      const returnValues = spy.yieldOn(thisObj);\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".yieldTo"],"updatePoint":{"line":2189,"column":19,"index":68362},"line":2189,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.yieldTo);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes first function arg for all calls","suites":["spy",".yieldTo"],"updatePoint":{"line":2193,"column":48,"index":68504},"line":2193,"code":"    it(\"invokes first function arg for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      spy(1, 2, {\n        success: callback\n      });\n      spy(3, 4, {\n        success: callback\n      });\n      spy.yieldTo(\"success\");\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".yieldTo"],"updatePoint":{"line":2206,"column":41,"index":68854},"line":2206,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      assert.exception(function () {\n        spy.yieldTo(\"success\");\n      }, {\n        message: \"spy cannot yield to 'success' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".yieldTo"],"updatePoint":{"line":2214,"column":42,"index":69121},"line":2214,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      assert.exception(function () {\n        spy.yieldTo(\"success\");\n      }, {\n        message: \"someMethod cannot yield to 'success' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws readable message for symbol when spy was not yet invoked","suites":["spy",".yieldTo"],"updatePoint":{"line":2227,"column":71,"index":69532},"line":2227,"code":"    it(\"throws readable message for symbol when spy was not yet invoked\", function () {\n      if (typeof Symbol !== \"function\") {\n        this.skip();\n      }\n      const spy = createSpy();\n      assert.exception(function () {\n        spy.yieldTo(Symbol(\"apple pie\"));\n      }, {\n        message: \"spy cannot yield to 'Symbol(apple pie)' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"pass additional arguments","suites":["spy",".yieldTo"],"updatePoint":{"line":2238,"column":33,"index":69881},"line":2238,"code":"    it(\"pass additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      spy({\n        test: callback\n      });\n      spy.yieldTo(\"test\", \"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".yieldTo"],"updatePoint":{"line":2249,"column":53,"index":70236},"line":2249,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      spy(1, 2, {\n        success: callback\n      });\n      spy(3, 4, {\n        success: callback\n      });\n      const returnValues = spy.yieldTo(\"success\");\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".yieldToOn"],"updatePoint":{"line":2267,"column":19,"index":70711},"line":2267,"code":"    it(\"is function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.yieldToOn);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"invokes first function arg for all calls","suites":["spy",".yieldToOn"],"updatePoint":{"line":2271,"column":48,"index":70855},"line":2271,"code":"    it(\"invokes first function arg for all calls\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, {\n        success: callback\n      });\n      spy(3, 4, {\n        success: callback\n      });\n      spy.yieldToOn(\"success\", thisObj);\n      assert(callback.calledTwice);\n      assert(callback.alwaysCalledWith());\n      assert(callback.alwaysCalledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if spy was not yet invoked","suites":["spy",".yieldToOn"],"updatePoint":{"line":2289,"column":41,"index":71346},"line":2289,"code":"    it(\"throws if spy was not yet invoked\", function () {\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.yieldToOn(\"success\", thisObj);\n      }, {\n        message: \"spy cannot yield to 'success' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"includes spy name in error message","suites":["spy",".yieldToOn"],"updatePoint":{"line":2301,"column":42,"index":71706},"line":2301,"code":"    it(\"includes spy name in error message\", function () {\n      const api = {\n        someMethod: function () {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.yieldToOn(\"success\", thisObj);\n      }, {\n        message: \"someMethod cannot yield to 'success' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws readable message for symbol when spy was not yet invoked","suites":["spy",".yieldToOn"],"updatePoint":{"line":2318,"column":71,"index":72210},"line":2318,"code":"    it(\"throws readable message for symbol when spy was not yet invoked\", function () {\n      if (typeof Symbol !== \"function\") {\n        this.skip();\n      }\n      const spy = createSpy();\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      assert.exception(function () {\n        spy.yieldToOn(Symbol(\"apple pie\"), thisObj);\n      }, {\n        message: \"spy cannot yield to 'Symbol(apple pie)' since it was not yet invoked.\"\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"pass additional arguments","suites":["spy",".yieldToOn"],"updatePoint":{"line":2333,"column":33,"index":72652},"line":2333,"code":"    it(\"pass additional arguments\", function () {\n      const spy = createSpy();\n      const callback = createSpy();\n      const array = [];\n      const object = {};\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy({\n        test: callback\n      });\n      spy.yieldToOn(\"test\", thisObj, \"abc\", 123, array, object);\n      assert(callback.calledWith(\"abc\", 123, array, object));\n      assert(callback.calledOn(thisObj));\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns callbacks return values for all calls","suites":["spy",".yieldToOn"],"updatePoint":{"line":2349,"column":53,"index":73142},"line":2349,"code":"    it(\"returns callbacks return values for all calls\", function () {\n      const spy = createSpy();\n      let i = 0;\n      const callback = createSpy(function () {\n        i++;\n        return `useful value ${i}`;\n      });\n      const thisObj = {\n        name1: \"value1\",\n        name2: \"value2\"\n      };\n      spy(1, 2, {\n        success: callback\n      });\n      spy(3, 4, {\n        success: callback\n      });\n      const returnValues = spy.yieldToOn(\"success\", thisObj);\n      assert.equals(returnValues, [\"useful value 1\", \"useful value 2\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should be a function","suites":["spy",".throwArg"],"updatePoint":{"line":2371,"column":28,"index":73718},"line":2371,"code":"    it(\"should be a function\", function () {\n      const spy = createSpy();\n      assert.isFunction(spy.throwArg);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should throw if spy hasn't been called","suites":["spy",".throwArg"],"updatePoint":{"line":2375,"column":46,"index":73859},"line":2375,"code":"    it(\"should throw if spy hasn't been called\", function () {\n      const spy = createSpy();\n      assert.exception(function () {\n        spy.throwArg(0);\n      }, function (error) {\n        return error.message === \"spy cannot throw arg since it was not yet invoked.\";\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should throw if there aren't enough arguments in the previous spy call","suites":["spy",".throwArg"],"updatePoint":{"line":2383,"column":78,"index":74180},"line":2383,"code":"    it(\"should throw if there aren't enough arguments in the previous spy call\", function () {\n      const spy = createSpy();\n      spy(\"only\", \"four\", \"arguments\", \"here\");\n      assert.exception(function () {\n        spy.throwArg(7);\n      }, function (error) {\n        return error.message === \"Not enough arguments: 7 required but only 4 present\";\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should throw specified argument","suites":["spy",".throwArg"],"updatePoint":{"line":2392,"column":39,"index":74511},"line":2392,"code":"    it(\"should throw specified argument\", function () {\n      const spy = createSpy();\n      const expectedError = new TypeError(\"catpants\");\n      spy(true, false, null, expectedError, \"meh\");\n      assert.exception(function () {\n        spy.throwArg(3);\n      }, function (error) {\n        return error instanceof TypeError && error.message === expectedError.message;\n      });\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return same object","suites":["spy",".resetHistory"],"updatePoint":{"line":2404,"column":26,"index":74934},"line":2404,"code":"    it(\"return same object\", function () {\n      const spy = createSpy();\n      const reset = spy.resetHistory();\n      assert(reset === spy);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"throws if called during spy invocation","suites":["spy",".resetHistory"],"updatePoint":{"line":2409,"column":46,"index":75105},"line":2409,"code":"    it(\"throws if called during spy invocation\", function () {\n      const spy = createSpy(function () {\n        spy.resetHistory();\n      });\n      assert.exception(spy, \"InvalidResetException\");\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is zero by default","suites":["spy",".length"],"updatePoint":{"line":2417,"column":26,"index":75332},"line":2417,"code":"    it(\"is zero by default\", function () {\n      const spy = createSpy();\n      assert.equals(spy.length, 0);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"matches the function length","suites":["spy",".length"],"updatePoint":{"line":2421,"column":35,"index":75459},"line":2421,"code":"    it(\"matches the function length\", function () {\n      const api = {\n        // eslint-disable-next-line no-unused-vars\n        someMethod: function (a, b, c) {\n          return;\n        }\n      };\n      const spy = createSpy(api, \"someMethod\");\n      assert.equals(spy.length, 3);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["spy",".matchingFakes"],"updatePoint":{"line":2436,"column":19,"index":75852},"line":2436,"code":"    it(\"is function\", function () {\n      assert.isFunction(this.spy.matchingFakes);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns an empty array by default","suites":["spy",".matchingFakes"],"updatePoint":{"line":2439,"column":41,"index":75967},"line":2439,"code":"    it(\"returns an empty array by default\", function () {\n      assert.equals(this.spy.matchingFakes([]), []);\n      assert.equals(this.spy.matchingFakes([1]), []);\n      assert.equals(this.spy.matchingFakes([1, 1]), []);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"returns one matched fake","suites":["spy",".matchingFakes"],"updatePoint":{"line":2444,"column":32,"index":76188},"line":2444,"code":"    it(\"returns one matched fake\", function () {\n      this.spy.withArgs(1);\n      this.spy.withArgs(2);\n      assert.equals(this.spy.matchingFakes([1]), [this.spy.withArgs(1)]);\n      assert.equals(this.spy.matchingFakes([2]), [this.spy.withArgs(2)]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"return some matched fake","suites":["spy",".matchingFakes"],"updatePoint":{"line":2450,"column":32,"index":76449},"line":2450,"code":"    it(\"return some matched fake\", function () {\n      this.spy.withArgs(1);\n      this.spy.withArgs(1, 1);\n      this.spy.withArgs(2);\n      assert.equals(this.spy.matchingFakes([]), []);\n      assert.equals(this.spy.matchingFakes([1]), [this.spy.withArgs(1)]);\n      assert.equals(this.spy.matchingFakes([1, 1]), [this.spy.withArgs(1), this.spy.withArgs(1, 1)]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"should start with 'spy#'","suites":["spy",".id"],"updatePoint":{"line":2460,"column":32,"index":76860},"line":2460,"code":"    it(\"should start with 'spy#'\", function () {\n      for (let i = 0; i < 10; i++) {\n        assert.isTrue(createSpy().id.indexOf(\"spy#\") === 0);\n      }\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"create and call spy apis","suites":["spy","non enumerable properties"],"updatePoint":{"line":2467,"column":32,"index":77083},"line":2467,"code":"    it(\"create and call spy apis\", function () {\n      const spy = createSpy();\n      assert.equals(Object.keys(spy), []);\n\n      // call spy and verify no enumerable properties are added\n      spy(15);\n      assert.equals(Object.keys(spy), []);\n\n      // it should still work to add properties\n      spy.fooBar = 1;\n      assert.equals(Object.keys(spy), [\"fooBar\"]);\n\n      // call some spy APIs and verify no enumerable properties are added\n      spy.withArgs(1);\n      spy.calledBefore(createSpy());\n      spy.calledAfter(createSpy());\n      spy.calledOn(undefined);\n      spy.calledWith(15);\n      spy.calledWithNew();\n      spy.threw();\n      spy.returned(\"ret\");\n      assert.equals(spy.thisValues.length, 1);\n      assert.equals(spy.exceptions.length, 1);\n      assert.equals(spy.returnValues.length, 1);\n      assert.equals(Object.keys(spy), [\"fooBar\"]);\n\n      // verify that reset history doesn't change enumerable properties\n      spy.resetHistory();\n      assert.equals(Object.keys(spy), [\"fooBar\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"create spy from function","suites":["spy","non enumerable properties"],"updatePoint":{"line":2497,"column":32,"index":78104},"line":2497,"code":"    it(\"create spy from function\", function () {\n      const func = function () {\n        throw new Error(\"aError\");\n      };\n      func.aProp = 42;\n      const spy = createSpy(func);\n      assert.equals(spy.aProp, 42);\n      assert.equals(Object.keys(spy), Object.keys(func));\n      assert.equals(Object.keys(spy), [\"aProp\"]);\n      assert.exception(function () {\n        spy();\n      });\n      assert(spy.threw());\n      spy.resetHistory();\n      assert.equals(Object.keys(spy), [\"aProp\"]);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is delegated to proxy","suites":["spy",".printf"],"updatePoint":{"line":2515,"column":29,"index":78644},"line":2515,"code":"    it(\"is delegated to proxy\", function () {\n      const f = function () {\n        throw new Error(\"aError\");\n      };\n      const spy = createSpy();\n      const proxy = createProxy(f, f);\n      assert.same(spy.printf, proxy.printf);\n    });","file":"spy-test.js","skipped":false,"dir":"test"},{"name":"is spy","suites":["stub"],"updatePoint":{"line":22,"column":12,"index":828},"line":22,"code":"  it(\"is spy\", function () {\n    const stub = createStub();\n    assert.isFalse(stub.called);\n    assert.isFunction(stub.calledWith);\n    assert.isFunction(stub.calledOn);\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not define create method","suites":["stub"],"updatePoint":{"line":28,"column":35,"index":1028},"line":28,"code":"  it(\"does not define create method\", function () {\n    const stub = createStub();\n    assert.isUndefined(stub.create);\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"fails if stubbing property on null","suites":["stub"],"updatePoint":{"line":32,"column":40,"index":1159},"line":32,"code":"  it(\"fails if stubbing property on null\", function () {\n    assert.exception(function () {\n      createStub(null, \"prop\");\n    }, {\n      message: \"Trying to stub property 'prop' of null\"\n    });\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws a readable error if stubbing Symbol on null","suites":["stub"],"updatePoint":{"line":39,"column":56,"index":1378},"line":39,"code":"  it(\"throws a readable error if stubbing Symbol on null\", function () {\n    if (typeof Symbol !== \"function\") {\n      this.skip();\n    }\n    assert.exception(function () {\n      createStub(null, Symbol(\"apple pie\"));\n    }, {\n      message: \"Trying to stub property 'Symbol(apple pie)' of null\"\n    });\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should contain asynchronous versions of callsArg*, and yields* methods","suites":["stub"],"updatePoint":{"line":49,"column":76,"index":1708},"line":49,"code":"  it(\"should contain asynchronous versions of callsArg*, and yields* methods\", function () {\n    const stub = createStub();\n    let syncVersions = 0;\n    let asyncVersions = 0;\n    for (const method in stub) {\n      if (stub.hasOwnProperty(method) && method.match(/^(callsArg|yields)/)) {\n        if (!method.match(/Async/)) {\n          syncVersions++;\n        } else if (method.match(/Async/)) {\n          asyncVersions++;\n        }\n      }\n    }\n    assert.same(syncVersions, asyncVersions, \"Stub prototype should contain same amount of synchronous and asynchronous methods\");\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should allow overriding async behavior with sync behavior","suites":["stub"],"updatePoint":{"line":64,"column":63,"index":2280},"line":64,"code":"  it(\"should allow overriding async behavior with sync behavior\", function () {\n    const stub = createStub();\n    const callback = createSpy();\n    stub.callsArgAsync(1);\n    stub.callsArg(1);\n    stub(1, callback);\n    assert(callback.called);\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should works with combination of withArgs arguments","suites":["stub"],"updatePoint":{"line":72,"column":57,"index":2526},"line":72,"code":"  it(\"should works with combination of withArgs arguments\", function () {\n    const stub = createStub();\n    stub.returns(0);\n    stub.withArgs(1, 1).returns(2);\n    stub.withArgs(1).returns(1);\n    assert.equals(stub(), 0);\n    assert.equals(stub(1), 1);\n    assert.equals(stub(1, 1), 2);\n    assert.equals(stub(1, 1, 1), 2);\n    assert.equals(stub(2), 0);\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should work with combination of withArgs arguments","suites":["stub"],"updatePoint":{"line":83,"column":56,"index":2889},"line":83,"code":"  it(\"should work with combination of withArgs arguments\", function () {\n    const stub = createStub();\n    stub.withArgs(1).returns(42);\n    stub(1);\n    refute.isNull(stub.withArgs(1).firstCall);\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function name","suites":["stub"],"updatePoint":{"line":89,"column":27,"index":3064},"line":89,"code":"  it(\"retains function name\", function () {\n    const object = {\n      test: function test() {\n        return;\n      }\n    };\n    const stub = createStub(object, \"test\");\n    assert.equals(stub.displayName, \"test\");\n    verifyFunctionName(stub, \"test\");\n  });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"create and call spy apis","suites":["stub","non enumerable properties"],"updatePoint":{"line":100,"column":32,"index":3383},"line":100,"code":"    it(\"create and call spy apis\", function () {\n      const stub = createStub();\n      assert.equals(Object.keys(stub), []);\n\n      // call spy and verify no enumerable properties are added\n      stub(15);\n      assert.equals(Object.keys(stub), []);\n\n      // it should still work to add properties\n      stub.fooBar = 1;\n      assert.equals(Object.keys(stub), [\"fooBar\"]);\n\n      // call some spy APIs and verify no enumerable properties are added\n      stub.withArgs(1);\n      stub.calledBefore(createStub());\n      stub.calledAfter(createStub());\n      stub.calledOn(undefined);\n      stub.calledWith(15);\n      stub.calledWithNew();\n      stub.threw();\n      stub.returned(\"ret\");\n      assert.equals(stub.thisValues.length, 1);\n      assert.equals(stub.exceptions.length, 1);\n      assert.equals(stub.returnValues.length, 1);\n      assert.equals(Object.keys(stub), [\"fooBar\"]);\n\n      // verify that reset history doesn't change enumerable properties\n      stub.resetHistory();\n      assert.equals(Object.keys(stub), [\"fooBar\"]);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"create stub from function on object","suites":["stub","non enumerable properties"],"updatePoint":{"line":130,"column":43,"index":4438},"line":130,"code":"    it(\"create stub from function on object\", function () {\n      const func = function () {\n        throw new Error(\"aError\");\n      };\n      const object = {\n        test: func\n      };\n      func.aProp = 42;\n      createStub(object, \"test\");\n      assert.equals(object.test.aProp, 42);\n      assert.equals(Object.keys(object.test), Object.keys(func));\n      assert.equals(Object.keys(object.test), [\"aProp\"]);\n      object.test();\n      object.test.resetHistory();\n      assert.equals(Object.keys(object.test), [\"aProp\"]);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns specified value","suites":["stub",".returns"],"updatePoint":{"line":148,"column":31,"index":5003},"line":148,"code":"    it(\"returns specified value\", function () {\n      const stub = createStub();\n      const object = {};\n      stub.returns(object);\n      assert.same(stub(), object);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns should return stub","suites":["stub",".returns"],"updatePoint":{"line":154,"column":34,"index":5183},"line":154,"code":"    it(\"returns should return stub\", function () {\n      const stub = createStub();\n      assert.same(stub.returns(\"\"), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns undefined","suites":["stub",".returns"],"updatePoint":{"line":158,"column":25,"index":5309},"line":158,"code":"    it(\"returns undefined\", function () {\n      const stub = createStub();\n      assert.isUndefined(stub());\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous throws","suites":["stub",".returns"],"updatePoint":{"line":162,"column":34,"index":5435},"line":162,"code":"    it(\"supersedes previous throws\", function () {\n      const stub = createStub();\n      stub.throws().returns(1);\n      refute.exception(function () {\n        stub();\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".returns"],"updatePoint":{"line":169,"column":37,"index":5625},"line":169,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().returns(2);\n      const stub = createStub().callsFake(fakeFn).returns(1);\n      assert.equals(stub(), 1);\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws only on the first call","suites":["stub",".returns"],"updatePoint":{"line":175,"column":37,"index":5856},"line":175,"code":"    it(\"throws only on the first call\", function () {\n      const stub = createStub();\n      stub.returns(\"no exception\");\n      stub.onFirstCall().throws();\n      assert.exception(function () {\n        stub();\n      });\n\n      // on the second call there is no exception\n      assert.same(stub(), \"no exception\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise to the specified value","suites":["stub",".resolves"],"updatePoint":{"line":198,"column":48,"index":6456},"line":198,"code":"    it(\"returns a promise to the specified value\", function () {\n      const stub = createStub();\n      const object = {};\n      stub.resolves(object);\n      return stub().then(function (actual) {\n        assert.same(actual, object);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return the same stub","suites":["stub",".resolves"],"updatePoint":{"line":206,"column":35,"index":6695},"line":206,"code":"    it(\"should return the same stub\", function () {\n      const stub = createStub();\n      assert.same(stub.resolves(\"\"), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous throws","suites":["stub",".resolves"],"updatePoint":{"line":210,"column":34,"index":6831},"line":210,"code":"    it(\"supersedes previous throws\", function () {\n      const stub = createStub();\n      stub.throws().resolves(1);\n      refute.exception(function () {\n        stub();\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous rejects","suites":["stub",".resolves"],"updatePoint":{"line":217,"column":35,"index":7020},"line":217,"code":"    it(\"supersedes previous rejects\", function () {\n      const stub = createStub();\n      stub.rejects(Error(\"should be superseded\")).resolves(1);\n      return stub().then();\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".resolves"],"updatePoint":{"line":222,"column":37,"index":7206},"line":222,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().resolves(2);\n      const stub = createStub().callsFake(fakeFn).resolves(1);\n      return stub().then(function (actual) {\n        assert.same(actual, 1);\n        refute(fakeFn.called);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be superseded by returns","suites":["stub",".resolves"],"updatePoint":{"line":230,"column":36,"index":7495},"line":230,"code":"    it(\"can be superseded by returns\", function () {\n      const stub = createStub();\n      stub.resolves(2).returns(1);\n      assert.equals(stub(), 1);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not invoke Promise.resolve when the behavior is added to the stub","suites":["stub",".resolves"],"updatePoint":{"line":235,"column":78,"index":7698},"line":235,"code":"    it(\"does not invoke Promise.resolve when the behavior is added to the stub\", function () {\n      const resolveSpy = createSpy(Promise, \"resolve\");\n      const stub = createStub();\n      stub.resolves(2);\n      assert.equals(resolveSpy.callCount, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise which rejects for the specified reason","suites":["stub",".rejects"],"updatePoint":{"line":253,"column":64,"index":8209},"line":253,"code":"    it(\"returns a promise which rejects for the specified reason\", function () {\n      const stub = createStub();\n      const reason = new Error();\n      stub.rejects(reason);\n      return stub().then(function () {\n        referee.fail(\"this should not resolve\");\n      }).catch(function (actual) {\n        assert.same(actual, reason);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return the same stub","suites":["stub",".rejects"],"updatePoint":{"line":263,"column":35,"index":8534},"line":263,"code":"    it(\"should return the same stub\", function () {\n      const stub = createStub();\n      assert.same(stub.rejects({}), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"specifies exception message","suites":["stub",".rejects"],"updatePoint":{"line":267,"column":35,"index":8670},"line":267,"code":"    it(\"specifies exception message\", function () {\n      const stub = createStub();\n      const message = \"Oh no!\";\n      stub.rejects(\"Error\", message);\n      return stub().then(function () {\n        referee.fail(\"Expected stub to reject\");\n      }).catch(function (reason) {\n        assert.equals(reason.message, message);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not specify exception message if not provided","suites":["stub",".rejects"],"updatePoint":{"line":277,"column":58,"index":9037},"line":277,"code":"    it(\"does not specify exception message if not provided\", function () {\n      const stub = createStub();\n      stub.rejects(\"Error\");\n      return stub().then(function () {\n        referee.fail(\"Expected stub to reject\");\n      }).catch(function (reason) {\n        assert.equals(reason.message, \"\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"rejects for a generic reason","suites":["stub",".rejects"],"updatePoint":{"line":286,"column":36,"index":9336},"line":286,"code":"    it(\"rejects for a generic reason\", function () {\n      const stub = createStub();\n      stub.rejects();\n      return stub().then(function () {\n        referee.fail(\"Expected stub to reject\");\n      }).catch(function (reason) {\n        assert.equals(reason.name, \"Error\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be superseded by returns","suites":["stub",".rejects"],"updatePoint":{"line":295,"column":36,"index":9630},"line":295,"code":"    it(\"can be superseded by returns\", function () {\n      const stub = createStub();\n      stub.rejects(2).returns(1);\n      assert.equals(stub(), 1);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".rejects"],"updatePoint":{"line":300,"column":37,"index":9791},"line":300,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().resolves(2);\n      const reason = new Error();\n      const stub = createStub().callsFake(fakeFn).rejects(reason);\n      return stub().then(function () {\n        referee.fail(\"this should not resolve\");\n      }).catch(function (actual) {\n        assert.same(actual, reason);\n        refute(fakeFn.called);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not invoke Promise.reject when the behavior is added to the stub","suites":["stub",".rejects"],"updatePoint":{"line":311,"column":77,"index":10242},"line":311,"code":"    it(\"does not invoke Promise.reject when the behavior is added to the stub\", function () {\n      const rejectSpy = createSpy(Promise, \"reject\");\n      const stub = createStub();\n      stub.rejects(2);\n      assert.equals(rejectSpy.callCount, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise resolved with this","suites":["stub",".resolvesThis"],"updatePoint":{"line":329,"column":44,"index":10736},"line":329,"code":"    it(\"returns a promise resolved with this\", function () {\n      const instance = {};\n      instance.stub = createStub();\n      instance.stub.resolvesThis();\n      return instance.stub().then(function (actual) {\n        assert.same(actual, instance);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise resolved with the context bound with stub#call","suites":["stub",".resolvesThis"],"updatePoint":{"line":337,"column":72,"index":11035},"line":337,"code":"    it(\"returns a promise resolved with the context bound with stub#call\", function () {\n      const stub = createStub();\n      stub.resolvesThis();\n      const object = {};\n      return stub.call(object).then(function (actual) {\n        assert.same(actual, object);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise resolved with the context bound with stub#apply","suites":["stub",".resolvesThis"],"updatePoint":{"line":345,"column":73,"index":11321},"line":345,"code":"    it(\"returns a promise resolved with the context bound with stub#apply\", function () {\n      const stub = createStub();\n      stub.resolvesThis();\n      const object = {};\n      return stub.apply(object).then(function (actual) {\n        assert.same(actual, object);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the stub itself, allowing to chain function calls","suites":["stub",".resolvesThis"],"updatePoint":{"line":353,"column":65,"index":11600},"line":353,"code":"    it(\"returns the stub itself, allowing to chain function calls\", function () {\n      const stub = createStub();\n      assert.same(stub.resolvesThis(), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"overrides throws behavior for error objects","suites":["stub",".resolvesThis"],"updatePoint":{"line":357,"column":51,"index":11755},"line":357,"code":"    it(\"overrides throws behavior for error objects\", function () {\n      const instance = {};\n      instance.stub = createStub().throws(new Error()).resolvesThis();\n      return instance.stub().then(function (actual) {\n        assert.same(actual, instance);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"overrides throws behavior for dynamically created errors","suites":["stub",".resolvesThis"],"updatePoint":{"line":364,"column":64,"index":12045},"line":364,"code":"    it(\"overrides throws behavior for dynamically created errors\", function () {\n      const instance = {};\n      instance.stub = createStub().throws().resolvesThis();\n      return instance.stub().then(function (actual) {\n        assert.same(actual, instance);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".resolvesThis"],"updatePoint":{"line":371,"column":37,"index":12297},"line":371,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeInstance = {};\n      const fakeFn = createStub().resolves(fakeInstance);\n      const instance = {};\n      instance.stub = createStub().callsFake(fakeFn).resolvesThis();\n      return instance.stub().then(function (actual) {\n        assert.same(actual, instance);\n        refute(fakeFn.called);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise to the argument at specified index","suites":["stub",".resolvesArg"],"updatePoint":{"line":393,"column":60,"index":12970},"line":393,"code":"    it(\"returns a promise to the argument at specified index\", function () {\n      const stub = createStub();\n      const object = {};\n      stub.resolvesArg(0);\n      return stub(object).then(function (actual) {\n        assert.same(actual, object);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns a promise to the argument at another specified index","suites":["stub",".resolvesArg"],"updatePoint":{"line":401,"column":68,"index":13246},"line":401,"code":"    it(\"returns a promise to the argument at another specified index\", function () {\n      const stub = createStub();\n      const object = {};\n      stub.resolvesArg(2);\n      return stub(\"ignored\", \"ignored again\", object).then(function (actual) {\n        assert.same(actual, object);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return the same stub","suites":["stub",".resolvesArg"],"updatePoint":{"line":409,"column":35,"index":13517},"line":409,"code":"    it(\"should return the same stub\", function () {\n      const stub = createStub();\n      assert.same(stub.resolvesArg(1), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous throws","suites":["stub",".resolvesArg"],"updatePoint":{"line":413,"column":34,"index":13655},"line":413,"code":"    it(\"supersedes previous throws\", function () {\n      const stub = createStub();\n      stub.throws().resolvesArg(1);\n      refute.exception(function () {\n        stub(\"zero\", \"one\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous rejects","suites":["stub",".resolvesArg"],"updatePoint":{"line":420,"column":35,"index":13860},"line":420,"code":"    it(\"supersedes previous rejects\", function () {\n      const stub = createStub();\n      stub.rejects(Error(\"should be superseded\")).resolvesArg(1);\n      return stub(\"zero\", \"one\").then(function (actual) {\n        assert.same(actual, \"one\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".resolvesArg"],"updatePoint":{"line":427,"column":37,"index":14125},"line":427,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().resolves(\"fake\");\n      const stub = createStub().callsFake(fakeFn).resolvesArg(1);\n      return stub(\"zero\", \"one\").then(function (actual) {\n        assert.same(actual, \"one\");\n        refute(fakeFn.called);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not invoke Promise.resolve when the behavior is added to the stub","suites":["stub",".resolvesArg"],"updatePoint":{"line":435,"column":78,"index":14481},"line":435,"code":"    it(\"does not invoke Promise.resolve when the behavior is added to the stub\", function () {\n      const resolveSpy = createSpy(Promise, \"resolve\");\n      const stub = createStub();\n      stub.resolvesArg(2);\n      assert(resolveSpy.notCalled);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not a number","suites":["stub",".resolvesArg"],"updatePoint":{"line":441,"column":39,"index":14697},"line":441,"code":"    it(\"throws if index is not a number\", function () {\n      const stub = createStub();\n      assert.exception(function () {\n        stub.resolvesArg();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws without enough arguments","suites":["stub",".resolvesArg"],"updatePoint":{"line":449,"column":39,"index":14906},"line":449,"code":"    it(\"throws without enough arguments\", function () {\n      const stub = createStub();\n      stub.resolvesArg(3);\n      assert.exception(function () {\n        stub(\"zero\", \"one\", \"two\");\n      }, {\n        name: \"TypeError\",\n        message: \"resolvesArg failed: 4 arguments required but only 3 present\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns argument at specified index","suites":["stub",".returnsArg"],"updatePoint":{"line":461,"column":43,"index":15280},"line":461,"code":"    it(\"returns argument at specified index\", function () {\n      const stub = createStub();\n      stub.returnsArg(0);\n      const object = {};\n      assert.same(stub(object), object);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".returnsArg"],"updatePoint":{"line":467,"column":20,"index":15450},"line":467,"code":"    it(\"returns stub\", function () {\n      const stub = createStub();\n      assert.same(stub.returnsArg(0), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".returnsArg"],"updatePoint":{"line":471,"column":37,"index":15590},"line":471,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().returns(\"fake\");\n      const stub = createStub().callsFake(fakeFn).returnsArg(0);\n      assert.equals(stub(\"myarg\"), \"myarg\");\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["stub",".returnsArg"],"updatePoint":{"line":477,"column":39,"index":15844},"line":477,"code":"    it(\"throws if no index is specified\", function () {\n      const stub = createStub();\n      assert.exception(function () {\n        stub.returnsArg();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should throw without enough arguments","suites":["stub",".returnsArg"],"updatePoint":{"line":485,"column":45,"index":16058},"line":485,"code":"    it(\"should throw without enough arguments\", function () {\n      const stub = createStub();\n      stub.returnsArg(3);\n      assert.exception(function () {\n        stub(\"only\", \"two arguments\");\n      }, {\n        name: \"TypeError\",\n        message: \"returnsArg failed: 4 arguments required but only 2 present\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws argument at specified index","suites":["stub",".throwsArg"],"updatePoint":{"line":497,"column":42,"index":16431},"line":497,"code":"    it(\"throws argument at specified index\", function () {\n      const stub = createStub();\n      stub.throwsArg(0);\n      const expectedError = new Error(\"The expected error message\");\n      assert.exception(function () {\n        stub(expectedError);\n      }, function (err) {\n        return err.message === expectedError.message;\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".throwsArg"],"updatePoint":{"line":507,"column":20,"index":16759},"line":507,"code":"    it(\"returns stub\", function () {\n      const stub = createStub();\n      assert.same(stub.throwsArg(0), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws TypeError if no index is specified","suites":["stub",".throwsArg"],"updatePoint":{"line":511,"column":49,"index":16910},"line":511,"code":"    it(\"throws TypeError if no index is specified\", function () {\n      const stub = createStub();\n      assert.exception(function () {\n        stub.throwsArg();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should throw without enough arguments","suites":["stub",".throwsArg"],"updatePoint":{"line":519,"column":45,"index":17123},"line":519,"code":"    it(\"should throw without enough arguments\", function () {\n      const stub = createStub();\n      stub.throwsArg(3);\n      assert.exception(function () {\n        stub(\"only\", \"two arguments\");\n      }, {\n        name: \"TypeError\",\n        message: \"throwsArg failed: 4 arguments required but only 2 present\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should work with call-based behavior","suites":["stub",".throwsArg"],"updatePoint":{"line":529,"column":44,"index":17451},"line":529,"code":"    it(\"should work with call-based behavior\", function () {\n      const stub = createStub();\n      const expectedError = new Error(\"catpants\");\n      stub.returns(1);\n      stub.onSecondCall().throwsArg(1);\n      refute.exception(function () {\n        assert.equals(1, stub(null, expectedError));\n      });\n      assert.exception(function () {\n        stub(null, expectedError);\n      }, function (error) {\n        return error.message === expectedError.message;\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should be reset by .resetBehavior","suites":["stub",".throwsArg"],"updatePoint":{"line":543,"column":41,"index":17930},"line":543,"code":"    it(\"should be reset by .resetBehavior\", function () {\n      const stub = createStub();\n      stub.throwsArg(0);\n      stub.resetBehavior();\n      refute.exception(function () {\n        stub(new Error(\"catpants\"));\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".throwsArg"],"updatePoint":{"line":551,"column":37,"index":18162},"line":551,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub();\n      const stub = createStub().callsFake(fakeFn).throwsArg(1);\n      const expectedError = new Error(\"catpants\");\n      assert.exception(function () {\n        stub(null, expectedError);\n      }, function (error) {\n        return error.message === expectedError.message;\n      });\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stub returns this","suites":["stub",".returnsThis"],"updatePoint":{"line":564,"column":25,"index":18604},"line":564,"code":"    it(\"stub returns this\", function () {\n      const instance = {};\n      instance.stub = createStub();\n      instance.stub.returnsThis();\n      assert.same(instance.stub(), instance);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stub returns undefined when detached","suites":["stub",".returnsThis"],"updatePoint":{"line":570,"column":44,"index":18817},"line":570,"code":"    it(\"stub returns undefined when detached\", function () {\n      const thisValue = function () {\n        return this;\n      }();\n      if (thisValue !== undefined) {\n        this.skip();\n      }\n      const stub = createStub();\n      stub.returnsThis();\n\n      // Due to strict mode, would be `global` otherwise\n      assert.same(stub(), undefined);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stub respects call/apply","suites":["stub",".returnsThis"],"updatePoint":{"line":583,"column":32,"index":19165},"line":583,"code":"    it(\"stub respects call/apply\", function () {\n      const stub = createStub();\n      stub.returnsThis();\n      const object = {};\n      assert.same(stub.call(object), object);\n      assert.same(stub.apply(object), object);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".returnsThis"],"updatePoint":{"line":590,"column":20,"index":19387},"line":590,"code":"    it(\"returns stub\", function () {\n      const stub = createStub();\n      assert.same(stub.returnsThis(), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".returnsThis"],"updatePoint":{"line":594,"column":37,"index":19527},"line":594,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeInstance = {};\n      const fakeFn = createStub().returns(fakeInstance);\n      const instance = {};\n      instance.stub = createStub();\n      instance.stub.callsFake(fakeFn).returnsThis();\n      assert.same(instance.stub(), instance);\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should exist and be a function","suites":["stub",".usingPromise"],"updatePoint":{"line":610,"column":38,"index":20023},"line":610,"code":"    it(\"should exist and be a function\", function () {\n      const stub = createStub();\n      assert(stub.usingPromise);\n      assert.isFunction(stub.usingPromise);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return the current stub","suites":["stub",".usingPromise"],"updatePoint":{"line":615,"column":38,"index":20196},"line":615,"code":"    it(\"should return the current stub\", function () {\n      const stub = createStub();\n      assert.same(stub.usingPromise(Promise), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should set the promise used by resolve","suites":["stub",".usingPromise"],"updatePoint":{"line":619,"column":46,"index":20353},"line":619,"code":"    it(\"should set the promise used by resolve\", function () {\n      const stub = createStub();\n      const promise = {\n        resolve: createStub().callsFake(function (value) {\n          return Promise.resolve(value);\n        })\n      };\n      const object = {};\n      stub.usingPromise(promise).resolves(object);\n      return stub().then(function (actual) {\n        assert.same(actual, object, \"Same object resolved\");\n        assert.isTrue(promise.resolve.calledOnce, \"Custom promise resolve called once\");\n        assert.isTrue(promise.resolve.calledWith(object), \"Custom promise resolve called once with expected\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should set the promise used by reject","suites":["stub",".usingPromise"],"updatePoint":{"line":634,"column":45,"index":20992},"line":634,"code":"    it(\"should set the promise used by reject\", function () {\n      const stub = createStub();\n      const promise = {\n        reject: createStub().callsFake(function (err) {\n          return Promise.reject(err);\n        })\n      };\n      const reason = new Error();\n      stub.usingPromise(promise).rejects(reason);\n      return stub().then(function () {\n        referee.fail(\"this should not resolve\");\n      }).catch(function (actual) {\n        assert.same(actual, reason, \"Same object resolved\");\n        assert.isTrue(promise.reject.calledOnce, \"Custom promise reject called once\");\n        assert.isTrue(promise.reject.calledWith(reason), \"Custom promise reject called once with expected\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws specified exception","suites":["stub",".throws"],"updatePoint":{"line":653,"column":34,"index":21738},"line":653,"code":"    it(\"throws specified exception\", function () {\n      const stub = createStub();\n      const error = new Error();\n      stub.throws(error);\n      assert.exception(stub, error);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".throws"],"updatePoint":{"line":659,"column":20,"index":21912},"line":659,"code":"    it(\"returns stub\", function () {\n      const stub = createStub();\n      assert.same(stub.throws({}), stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"sets type of exception to throw","suites":["stub",".throws"],"updatePoint":{"line":663,"column":39,"index":22051},"line":663,"code":"    it(\"sets type of exception to throw\", function () {\n      const stub = createStub();\n      const exceptionType = \"TypeError\";\n      stub.throws(exceptionType);\n      assert.exception(function () {\n        stub();\n      }, exceptionType);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"specifies exception message","suites":["stub",".throws"],"updatePoint":{"line":671,"column":35,"index":22297},"line":671,"code":"    it(\"specifies exception message\", function () {\n      const stub = createStub();\n      const message = \"Oh no!\";\n      stub.throws(\"Error\", message);\n      assert.exception(stub, {\n        message: message\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not specify exception message if not provided","suites":["stub",".throws"],"updatePoint":{"line":679,"column":58,"index":22548},"line":679,"code":"    it(\"does not specify exception message if not provided\", function () {\n      const stub = createStub();\n      stub.throws(\"Error\");\n      assert.exception(stub, {\n        message: \"\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws generic error","suites":["stub",".throws"],"updatePoint":{"line":686,"column":28,"index":22723},"line":686,"code":"    it(\"throws generic error\", function () {\n      const stub = createStub();\n      stub.throws();\n      assert.exception(stub, \"Error\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws an exception created using a function","suites":["stub",".throws"],"updatePoint":{"line":691,"column":52,"index":22893},"line":691,"code":"    it(\"throws an exception created using a function\", function () {\n      const stub = createStub();\n      stub.throws(function () {\n        return new Error(\"not implemented\");\n      });\n      assert.exception(stub, {\n        message: \"not implemented\"\n      });\n      assert.same(stub.firstCall.exception.message, \"not implemented\");\n      assert.contains(stub.firstCall.toString(), \"not implemented\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"uses a lazily created exception for the generic error","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":714,"column":63,"index":23763},"line":714,"code":"      it(\"uses a lazily created exception for the generic error\", function () {\n        const stub = createStub();\n        stub.throws();\n        assert.isFalse(errorSpy.called);\n        assert.exception(stub, \"Error\");\n        assert.isTrue(errorSpy.called);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"uses a lazily created exception for the named error","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":721,"column":61,"index":24031},"line":721,"code":"      it(\"uses a lazily created exception for the named error\", function () {\n        const stub = createStub();\n        stub.throws(\"Named Error\", \"error message\");\n        assert.isFalse(errorSpy.called);\n        assert.exception(stub, {\n          name: \"Named Error\",\n          message: \"error message\"\n        });\n        assert.isTrue(errorSpy.called);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"uses a lazily created exception provided by a function","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":731,"column":64,"index":24402},"line":731,"code":"      it(\"uses a lazily created exception provided by a function\", function () {\n        const stub = createStub();\n        stub.throws(function () {\n          return new Error(\"not implemented\");\n        });\n        assert.isFalse(errorSpy.called);\n        assert.exception(stub, {\n          message: \"not implemented\"\n        });\n        assert.isTrue(errorSpy.called);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not use a lazily created exception if the error object is provided","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":742,"column":81,"index":24801},"line":742,"code":"      it(\"does not use a lazily created exception if the error object is provided\", function () {\n        const stub = createStub();\n        const exception = new Error();\n        stub.throws(exception);\n        assert.same(errorSpy.callCount, 1);\n        assert.exception(stub, exception);\n        assert.same(errorSpy.callCount, 1);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"resets 'invoking' flag","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":751,"column":30,"index":25103},"line":751,"code":"    it(\"resets 'invoking' flag\", function () {\n      const stub = createStub();\n      stub.throws();\n      assert.exception(stub);\n      assert.isUndefined(stub.invoking);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".throws","lazy instantiation of exceptions"],"updatePoint":{"line":757,"column":37,"index":25290},"line":757,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub();\n      const expectedError = new Error(\"error\");\n      const stub = createStub().callsFake(fakeFn).throws(expectedError);\n      assert.exception(stub, {\n        message: expectedError.message\n      });\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index","suites":["stub",".callsArg"],"updatePoint":{"line":771,"column":41,"index":25734},"line":771,"code":"    it(\"calls argument at specified index\", function () {\n      this.stub.callsArg(2);\n      const callback = createStub();\n      this.stub(1, 2, callback);\n      assert(callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".callsArg"],"updatePoint":{"line":777,"column":20,"index":25909},"line":777,"code":"    it(\"returns stub\", function () {\n      assert.isFunction(this.stub.callsArg(2));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at specified index is not callable","suites":["stub",".callsArg"],"updatePoint":{"line":780,"column":61,"index":26043},"line":780,"code":"    it(\"throws if argument at specified index is not callable\", function () {\n      this.stub.callsArg(0);\n      assert.exception(function () {\n        this.stub(1);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["stub",".callsArg"],"updatePoint":{"line":788,"column":39,"index":26242},"line":788,"code":"    it(\"throws if no index is specified\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArg();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["stub",".callsArg"],"updatePoint":{"line":796,"column":37,"index":26443},"line":796,"code":"    it(\"throws if index is not number\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArg({});\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should throw without enough arguments","suites":["stub",".callsArg"],"updatePoint":{"line":804,"column":45,"index":26654},"line":804,"code":"    it(\"should throw without enough arguments\", function () {\n      const stub = createStub();\n      stub.callsArg(3);\n      assert.exception(function () {\n        stub(\"only\", \"two arguments\");\n      }, {\n        name: \"TypeError\",\n        message: \"callsArg failed: 4 arguments required but only 2 present\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns result of invocant","suites":["stub",".callsArg"],"updatePoint":{"line":814,"column":34,"index":26970},"line":814,"code":"    it(\"returns result of invocant\", function () {\n      const stub = this.stub.callsArg(0);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args","suites":["stub",".callsArgWith"],"updatePoint":{"line":825,"column":60,"index":27361},"line":825,"code":"    it(\"calls argument at specified index with provided args\", function () {\n      const object = {};\n      this.stub.callsArgWith(1, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns function","suites":["stub",".callsArgWith"],"updatePoint":{"line":832,"column":24,"index":27586},"line":832,"code":"    it(\"returns function\", function () {\n      const stub = this.stub.callsArgWith(2, 3);\n      assert.isFunction(stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls callback without args","suites":["stub",".callsArgWith"],"updatePoint":{"line":836,"column":35,"index":27726},"line":836,"code":"    it(\"calls callback without args\", function () {\n      this.stub.callsArgWith(1);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith());\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls callback with multiple args","suites":["stub",".callsArgWith"],"updatePoint":{"line":842,"column":41,"index":27929},"line":842,"code":"    it(\"calls callback with multiple args\", function () {\n      const object = {};\n      const array = [];\n      this.stub.callsArgWith(1, object, array);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object, array));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["stub",".callsArgWith"],"updatePoint":{"line":850,"column":39,"index":28207},"line":850,"code":"    it(\"throws if no index is specified\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgWith();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["stub",".callsArgWith"],"updatePoint":{"line":858,"column":37,"index":28412},"line":858,"code":"    it(\"throws if index is not number\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgWith({});\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns result of invocant","suites":["stub",".callsArgWith"],"updatePoint":{"line":866,"column":34,"index":28616},"line":866,"code":"    it(\"returns result of invocant\", function () {\n      const stub = this.stub.callsArgWith(0, \"test\");\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index","suites":["stub",".callsArgOn"],"updatePoint":{"line":880,"column":41,"index":29053},"line":880,"code":"    it(\"calls argument at specified index\", function () {\n      this.stub.callsArgOn(2, this.fakeContext);\n      const callback = createStub();\n      this.stub(1, 2, callback);\n      assert(callback.called);\n      assert(callback.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with undefined context","suites":["stub",".callsArgOn"],"updatePoint":{"line":887,"column":64,"index":29343},"line":887,"code":"    it(\"calls argument at specified index with undefined context\", function () {\n      this.stub.callsArgOn(2, undefined);\n      const callback = createStub();\n      this.stub(1, 2, callback);\n      assert(callback.called);\n      assert(callback.calledOn(undefined));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with number context","suites":["stub",".callsArgOn"],"updatePoint":{"line":894,"column":61,"index":29616},"line":894,"code":"    it(\"calls argument at specified index with number context\", function () {\n      this.stub.callsArgOn(2, 5);\n      const callback = createStub();\n      this.stub(1, 2, callback);\n      assert(callback.called);\n      assert(callback.calledOn(5));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns stub","suites":["stub",".callsArgOn"],"updatePoint":{"line":901,"column":20,"index":29832},"line":901,"code":"    it(\"returns stub\", function () {\n      const stub = this.stub.callsArgOn(2, this.fakeContext);\n      assert.isFunction(stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if argument at specified index is not callable","suites":["stub",".callsArgOn"],"updatePoint":{"line":905,"column":61,"index":30011},"line":905,"code":"    it(\"throws if argument at specified index is not callable\", function () {\n      this.stub.callsArgOn(0, this.fakeContext);\n      assert.exception(function () {\n        this.stub(1);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["stub",".callsArgOn"],"updatePoint":{"line":913,"column":39,"index":30230},"line":913,"code":"    it(\"throws if no index is specified\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgOn();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["stub",".callsArgOn"],"updatePoint":{"line":921,"column":37,"index":30433},"line":921,"code":"    it(\"throws if index is not number\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgOn(this.fakeContext, 2);\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns result of invocant","suites":["stub",".callsArgOn"],"updatePoint":{"line":929,"column":34,"index":30652},"line":929,"code":"    it(\"returns result of invocant\", function () {\n      const stub = this.stub.callsArgOn(0, this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n      assert(callback.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":944,"column":60,"index":31171},"line":944,"code":"    it(\"calls argument at specified index with provided args\", function () {\n      const object = {};\n      this.stub.callsArgOnWith(1, this.fakeContext, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args and undefined context","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":952,"column":82,"index":31525},"line":952,"code":"    it(\"calls argument at specified index with provided args and undefined context\", function () {\n      const object = {};\n      this.stub.callsArgOnWith(1, undefined, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(undefined));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args and number context","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":960,"column":79,"index":31862},"line":960,"code":"    it(\"calls argument at specified index with provided args and number context\", function () {\n      const object = {};\n      this.stub.callsArgOnWith(1, 5, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(5));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args with undefined context","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":968,"column":83,"index":32187},"line":968,"code":"    it(\"calls argument at specified index with provided args with undefined context\", function () {\n      const object = {};\n      this.stub.callsArgOnWith(1, undefined, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(undefined));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls argument at specified index with provided args with number context","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":976,"column":80,"index":32525},"line":976,"code":"    it(\"calls argument at specified index with provided args with number context\", function () {\n      const object = {};\n      this.stub.callsArgOnWith(1, 5, object);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object));\n      assert(callback.calledOn(5));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns function","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":984,"column":24,"index":32791},"line":984,"code":"    it(\"returns function\", function () {\n      const stub = this.stub.callsArgOnWith(2, this.fakeContext, 3);\n      assert.isFunction(stub);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls callback without args","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":988,"column":35,"index":32951},"line":988,"code":"    it(\"calls callback without args\", function () {\n      this.stub.callsArgOnWith(1, this.fakeContext);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith());\n      assert(callback.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls callback with multiple args","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":995,"column":41,"index":33225},"line":995,"code":"    it(\"calls callback with multiple args\", function () {\n      const object = {};\n      const array = [];\n      this.stub.callsArgOnWith(1, this.fakeContext, object, array);\n      const callback = createStub();\n      this.stub(1, callback);\n      assert(callback.calledWith(object, array));\n      assert(callback.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no index is specified","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":1004,"column":39,"index":33574},"line":1004,"code":"    it(\"throws if no index is specified\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgOnWith();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if index is not number","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":1012,"column":37,"index":33781},"line":1012,"code":"    it(\"throws if index is not number\", function () {\n      const stub = this.stub;\n      assert.exception(function () {\n        stub.callsArgOnWith({});\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns result of invocant","suites":["stub",".callsArgOnWith"],"updatePoint":{"line":1020,"column":34,"index":33987},"line":1020,"code":"    it(\"returns result of invocant\", function () {\n      const object = {};\n      const stub = this.stub.callsArgOnWith(0, this.fakeContext, object);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n      assert(callback.calledWith(object));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"uses provided function as stub","suites":["stub",".callsFake"],"updatePoint":{"line":1038,"column":38,"index":34569},"line":1038,"code":"    it(\"uses provided function as stub\", function () {\n      const fakeFn = createStub();\n      this.stub = createStub(this.object, \"method\");\n      this.stub.callsFake(fakeFn);\n      this.object.method(1, 2);\n      assert(fakeFn.calledWith(1, 2));\n      assert(fakeFn.calledOn(this.object));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"is overwritten by subsequent stub behavior","suites":["stub",".callsFake"],"updatePoint":{"line":1046,"column":50,"index":34882},"line":1046,"code":"    it(\"is overwritten by subsequent stub behavior\", function () {\n      const fakeFn = createStub();\n      this.stub = createStub(this.object, \"method\");\n      this.stub.callsFake(fakeFn).returns(3);\n      const returned = this.object.method(1, 2);\n      refute(fakeFn.called);\n      assert(returned === 3);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous throws(error)","suites":["stub",".callsFake"],"updatePoint":{"line":1054,"column":41,"index":35190},"line":1054,"code":"    it(\"supersedes previous throws(error)\", function () {\n      const fakeFn = createStub().returns(5);\n      this.stub = createStub(this.object, \"method\");\n      this.stub.throws(new Error(\"error\")).callsFake(fakeFn);\n      const returned = this.object.method(1, 2);\n      assert(fakeFn.called);\n      assert(returned === 5);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous throws()","suites":["stub",".callsFake"],"updatePoint":{"line":1062,"column":36,"index":35520},"line":1062,"code":"    it(\"supersedes previous throws()\", function () {\n      const fakeFn = createStub().returns(5);\n      this.stub = createStub(this.object, \"method\");\n      this.stub.throws().callsFake(fakeFn);\n      const returned = this.object.method(1, 2);\n      assert(fakeFn.called);\n      assert(returned === 5);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws when third argument is provided","suites":["stub",".objectMethod"],"updatePoint":{"line":1085,"column":46,"index":36183},"line":1085,"code":"    it(\"throws when third argument is provided\", function () {\n      const object = this.object;\n      assert.exception(function () {\n        createStub(object, \"method\", 1);\n      }, {\n        message: \"stub(obj, 'meth', fn) has been removed, see documentation\"\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stubbed method should be proper stub","suites":["stub",".objectMethod"],"updatePoint":{"line":1095,"column":44,"index":36499},"line":1095,"code":"    it(\"stubbed method should be proper stub\", function () {\n      const stub = createStub(this.object, \"method\");\n      assert.isFunction(stub.returns);\n      assert.isFunction(stub.throws);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stub should be spy","suites":["stub",".objectMethod"],"updatePoint":{"line":1100,"column":26,"index":36681},"line":1100,"code":"    it(\"stub should be spy\", function () {\n      const stub = createStub(this.object, \"method\");\n      this.object.method();\n      assert(stub.called);\n      assert(stub.calledOn(this.object));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stub should affect spy","suites":["stub",".objectMethod"],"updatePoint":{"line":1106,"column":30,"index":36887},"line":1106,"code":"    it(\"stub should affect spy\", function () {\n      const stub = createStub(this.object, \"method\");\n      stub.throws(\"TypeError\");\n      assert.exception(this.object.method);\n      assert(stub.threw(\"TypeError\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"handles threw properly for lazily instantiated Errors","suites":["stub",".objectMethod"],"updatePoint":{"line":1112,"column":61,"index":37142},"line":1112,"code":"    it(\"handles threw properly for lazily instantiated Errors\", function () {\n      const stub = createStub(this.object, \"method\");\n      stub.throws(function () {\n        return new TypeError();\n      });\n      assert.exception(this.object.method);\n      assert(stub.threw(\"TypeError\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns standalone stub without arguments","suites":["stub",".objectMethod"],"updatePoint":{"line":1120,"column":49,"index":37427},"line":1120,"code":"    it(\"returns standalone stub without arguments\", function () {\n      const stub = createStub();\n      assert.isFunction(stub);\n      assert.isFalse(stub.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"successfully stubs falsy properties","suites":["stub",".objectMethod"],"updatePoint":{"line":1125,"column":43,"index":37594},"line":1125,"code":"    it(\"successfully stubs falsy properties\", function () {\n      const obj = {\n        0: function () {\n          return;\n        }\n      };\n      createStub(obj, 0).callsFake(function () {\n        return \"stubbed value\";\n      });\n      assert.equals(obj[0](), \"stubbed value\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not stub string","suites":["stub",".objectMethod"],"updatePoint":{"line":1136,"column":28,"index":37868},"line":1136,"code":"    it(\"does not stub string\", function () {\n      assert.exception(function () {\n        createStub(\"test\");\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns function","suites":["stub","everything"],"updatePoint":{"line":1145,"column":24,"index":38159},"line":1145,"code":"    it(\"returns function\", function () {\n      const func = function () {\n        return;\n      };\n      assert.same(createStub(func), func);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"stubs methods of function","suites":["stub","everything"],"updatePoint":{"line":1151,"column":33,"index":38318},"line":1151,"code":"    it(\"stubs methods of function\", function () {\n      class FunctionType extends Function {\n        func2() {\n          return 42;\n        }\n      }\n      const func = new FunctionType();\n      func.func1 = function () {\n        return;\n      };\n      createStub(func);\n      assert.isFunction(func.func1.restore);\n      assert.isFunction(func.func2.restore);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not call getter during restore","suites":["stub","everything"],"updatePoint":{"line":1165,"column":43,"index":38698},"line":1165,"code":"    it(\"does not call getter during restore\", function () {\n      const obj = {\n        get prop() {\n          fail(\"should not call getter\");\n          return;\n        }\n      };\n      const stub = createStub(obj, \"prop\").get(function () {\n        return 43;\n      });\n      assert.equals(obj.prop, 43);\n      stub.restore();\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"has toString method","suites":["stub","stubbed function"],"updatePoint":{"line":1180,"column":27,"index":39068},"line":1180,"code":"    it(\"has toString method\", function () {\n      const obj = {\n        meth: function () {\n          return;\n        }\n      };\n      createStub(obj, \"meth\");\n      assert.equals(obj.meth.toString(), \"meth\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"toString should say 'stub' when unable to infer name","suites":["stub","stubbed function"],"updatePoint":{"line":1189,"column":60,"index":39319},"line":1189,"code":"    it(\"toString should say 'stub' when unable to infer name\", function () {\n      const stub = createStub();\n      assert.equals(stub.toString(), \"stub\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"toString should prefer property name if possible","suites":["stub","stubbed function"],"updatePoint":{"line":1193,"column":56,"index":39479},"line":1193,"code":"    it(\"toString should prefer property name if possible\", function () {\n      const obj = {};\n      obj.meth = createStub();\n      obj.meth();\n      assert.equals(obj.meth.toString(), \"meth\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["stub",".yields"],"updatePoint":{"line":1201,"column":41,"index":39708},"line":1201,"code":"    it(\"invokes only argument as callback\", function () {\n      const stub = createStub().yields();\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["stub",".yields"],"updatePoint":{"line":1208,"column":60,"index":39957},"line":1208,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const stub = createStub().yields();\n      assert.exception(stub, {\n        message: \"stub expected to yield, but no callback was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["stub",".yields"],"updatePoint":{"line":1214,"column":56,"index":40192},"line":1214,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      const myObj = {\n        somethingAwesome: function () {\n          return;\n        }\n      };\n      const stub = createStub(myObj, \"somethingAwesome\").yields();\n      assert.exception(function () {\n        stub(23, 42);\n      }, {\n        message: \"somethingAwesome expected to yield, but no callback was passed. Received [23, 42]\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes last argument as callback","suites":["stub",".yields"],"updatePoint":{"line":1227,"column":41,"index":40605},"line":1227,"code":"    it(\"invokes last argument as callback\", function () {\n      const stub = createStub().yields();\n      const spy = createSpy();\n      stub(24, {}, spy);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two callbacks","suites":["stub",".yields"],"updatePoint":{"line":1234,"column":38,"index":40840},"line":1234,"code":"    it(\"invokes first of two callbacks\", function () {\n      const stub = createStub().yields();\n      const spy = createSpy();\n      const spy2 = createSpy();\n      stub(24, {}, spy, spy2);\n      assert(spy.calledOnce);\n      assert(!spy2.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["stub",".yields"],"updatePoint":{"line":1242,"column":39,"index":41098},"line":1242,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yields(obj, \"Crazy\");\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledWith(obj, \"Crazy\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["stub",".yields"],"updatePoint":{"line":1251,"column":33,"index":41346},"line":1251,"code":"    it(\"throws if callback throws\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yields(obj, \"Crazy\");\n      const callback = createStub().throws();\n      assert.exception(function () {\n        stub(callback);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws takes precedent over yielded return value","suites":["stub",".yields"],"updatePoint":{"line":1261,"column":56,"index":41642},"line":1261,"code":"    it(\"throws takes precedent over yielded return value\", function () {\n      const stub = createStub().throws().yields();\n      const callback = createStub().returns(\"return value\");\n      assert.exception(function () {\n        stub(callback);\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns takes precedent over yielded return value","suites":["stub",".yields"],"updatePoint":{"line":1269,"column":57,"index":41942},"line":1269,"code":"    it(\"returns takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returns(obj).yields();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsArg takes precedent over yielded return value","suites":["stub",".yields"],"updatePoint":{"line":1276,"column":60,"index":42240},"line":1276,"code":"    it(\"returnsArg takes precedent over yielded return value\", function () {\n      const stub = createStub().returnsArg(0).yields();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), callback);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsThis takes precedent over yielded return value","suites":["stub",".yields"],"updatePoint":{"line":1282,"column":61,"index":42523},"line":1282,"code":"    it(\"returnsThis takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returnsThis().yields();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub.call(obj, callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the result of the yielded callback","suites":["stub",".yields"],"updatePoint":{"line":1289,"column":50,"index":42822},"line":1289,"code":"    it(\"returns the result of the yielded callback\", function () {\n      const stub = createStub().yields();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".yields"],"updatePoint":{"line":1295,"column":37,"index":43073},"line":1295,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().yields(1);\n      const stub = createStub().callsFake(fakeFn).yields(2);\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledWith, 2);\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["stub",".yieldsRight"],"updatePoint":{"line":1305,"column":41,"index":43402},"line":1305,"code":"    it(\"invokes only argument as callback\", function () {\n      const stub = createStub().yieldsRight();\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["stub",".yieldsRight"],"updatePoint":{"line":1312,"column":60,"index":43656},"line":1312,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      const stub = createStub().yieldsRight();\n      assert.exception(stub, {\n        message: \"stub expected to yield, but no callback was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["stub",".yieldsRight"],"updatePoint":{"line":1318,"column":56,"index":43896},"line":1318,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      const myObj = {\n        somethingAwesome: function () {\n          return;\n        }\n      };\n      const stub = createStub(myObj, \"somethingAwesome\").yieldsRight();\n      assert.exception(function () {\n        stub(23, 42);\n      }, {\n        message: \"somethingAwesome expected to yield, but no callback was passed. Received [23, 42]\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes last argument as callback","suites":["stub",".yieldsRight"],"updatePoint":{"line":1331,"column":41,"index":44314},"line":1331,"code":"    it(\"invokes last argument as callback\", function () {\n      const stub = createStub().yieldsRight();\n      const spy = createSpy();\n      stub(24, {}, spy);\n      assert(spy.calledOnce);\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes the last of two callbacks","suites":["stub",".yieldsRight"],"updatePoint":{"line":1338,"column":41,"index":44557},"line":1338,"code":"    it(\"invokes the last of two callbacks\", function () {\n      const stub = createStub().yieldsRight();\n      const spy = createSpy();\n      const spy2 = createSpy();\n      stub(24, {}, spy, spy2);\n      assert(!spy.called);\n      assert(spy2.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["stub",".yieldsRight"],"updatePoint":{"line":1346,"column":39,"index":44820},"line":1346,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yieldsRight(obj, \"Crazy\");\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledWith(obj, \"Crazy\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["stub",".yieldsRight"],"updatePoint":{"line":1355,"column":33,"index":45073},"line":1355,"code":"    it(\"throws if callback throws\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yieldsRight(obj, \"Crazy\");\n      const callback = createStub().throws();\n      assert.exception(function () {\n        stub(callback);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws takes precedent over yielded return value","suites":["stub",".yieldsRight"],"updatePoint":{"line":1365,"column":56,"index":45374},"line":1365,"code":"    it(\"throws takes precedent over yielded return value\", function () {\n      const stub = createStub().yieldsRight().throws();\n      const callback = createStub().returns(\"return value\");\n      assert.exception(function () {\n        stub(callback);\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns takes precedent over yielded return value","suites":["stub",".yieldsRight"],"updatePoint":{"line":1373,"column":57,"index":45679},"line":1373,"code":"    it(\"returns takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returns(obj).yieldsRight();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsArg takes precedent over yielded return value","suites":["stub",".yieldsRight"],"updatePoint":{"line":1380,"column":60,"index":45982},"line":1380,"code":"    it(\"returnsArg takes precedent over yielded return value\", function () {\n      const stub = createStub().returnsArg(0).yieldsRight();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), callback);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsThis takes precedent over yielded return value","suites":["stub",".yieldsRight"],"updatePoint":{"line":1386,"column":61,"index":46270},"line":1386,"code":"    it(\"returnsThis takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returnsThis().yieldsRight();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub.call(obj, callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the result of the yielded callback","suites":["stub",".yieldsRight"],"updatePoint":{"line":1393,"column":50,"index":46574},"line":1393,"code":"    it(\"returns the result of the yielded callback\", function () {\n      const stub = createStub().yields();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".yieldsRight"],"updatePoint":{"line":1399,"column":37,"index":46825},"line":1399,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().yieldsRight(1);\n      const stub = createStub().callsFake(fakeFn).yieldsRight(2);\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledWith, 2);\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes only argument as callback","suites":["stub",".yieldsOn"],"updatePoint":{"line":1415,"column":41,"index":47285},"line":1415,"code":"    it(\"invokes only argument as callback\", function () {\n      const spy = createSpy();\n      this.stub.yieldsOn(this.fakeContext);\n      this.stub(spy);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(this.fakeContext));\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if no context is specified","suites":["stub",".yieldsOn"],"updatePoint":{"line":1423,"column":41,"index":47568},"line":1423,"code":"    it(\"throws if no context is specified\", function () {\n      assert.exception(function () {\n        this.stub.yieldsOn();\n      }, {\n        name: \"TypeError\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no callback is passed","suites":["stub",".yieldsOn"],"updatePoint":{"line":1430,"column":60,"index":47767},"line":1430,"code":"    it(\"throws understandable error if no callback is passed\", function () {\n      this.stub.yieldsOn(this.fakeContext);\n      assert.exception(this.stub, {\n        message: \"stub expected to yield, but no callback was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["stub",".yieldsOn"],"updatePoint":{"line":1436,"column":56,"index":48009},"line":1436,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      const myObj = {\n        somethingAwesome: function () {\n          return;\n        }\n      };\n      const stub = createStub(myObj, \"somethingAwesome\").yieldsOn(this.fakeContext);\n      assert.exception(function () {\n        stub(23, 42);\n      }, {\n        message: \"somethingAwesome expected to yield, but no callback was passed. Received [23, 42]\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes last argument as callback","suites":["stub",".yieldsOn"],"updatePoint":{"line":1449,"column":41,"index":48440},"line":1449,"code":"    it(\"invokes last argument as callback\", function () {\n      const spy = createSpy();\n      this.stub.yieldsOn(this.fakeContext);\n      this.stub(24, {}, spy);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(this.fakeContext));\n      assert.equals(spy.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two callbacks","suites":["stub",".yieldsOn"],"updatePoint":{"line":1457,"column":38,"index":48728},"line":1457,"code":"    it(\"invokes first of two callbacks\", function () {\n      const spy = createSpy();\n      const spy2 = createSpy();\n      this.stub.yieldsOn(this.fakeContext);\n      this.stub(24, {}, spy, spy2);\n      assert(spy.calledOnce);\n      assert(spy.calledOn(this.fakeContext));\n      assert(!spy2.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["stub",".yieldsOn"],"updatePoint":{"line":1466,"column":39,"index":49039},"line":1466,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const spy = createSpy();\n      this.stub.yieldsOn(this.fakeContext, obj, \"Crazy\");\n      this.stub(spy);\n      assert(spy.calledWith(obj, \"Crazy\"));\n      assert(spy.calledOn(this.fakeContext));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["stub",".yieldsOn"],"updatePoint":{"line":1476,"column":33,"index":49342},"line":1476,"code":"    it(\"throws if callback throws\", function () {\n      const obj = {\n        id: 42\n      };\n      const callback = createStub().throws();\n      this.stub.yieldsOn(this.fakeContext, obj, \"Crazy\");\n      assert.exception(function () {\n        this.stub(callback);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws takes precedent over yielded return value","suites":["stub",".yieldsOn"],"updatePoint":{"line":1486,"column":56,"index":49647},"line":1486,"code":"    it(\"throws takes precedent over yielded return value\", function () {\n      const stub = this.stub.throws().yieldsOn(this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.exception(function () {\n        stub(callback);\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns takes precedent over yielded return value","suites":["stub",".yieldsOn"],"updatePoint":{"line":1494,"column":57,"index":49962},"line":1494,"code":"    it(\"returns takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = this.stub.returns(obj).yieldsOn(this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsArg takes precedent over yielded return value","suites":["stub",".yieldsOn"],"updatePoint":{"line":1501,"column":60,"index":50275},"line":1501,"code":"    it(\"returnsArg takes precedent over yielded return value\", function () {\n      const stub = this.stub.returnsArg(0).yieldsOn();\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), callback);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsThis takes precedent over yielded return value","suites":["stub",".yieldsOn"],"updatePoint":{"line":1507,"column":61,"index":50557},"line":1507,"code":"    it(\"returnsThis takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = this.stub.returnsThis().yieldsOn(this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub.call(obj, callback), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the result of the yielded callback","suites":["stub",".yieldsOn"],"updatePoint":{"line":1514,"column":50,"index":50871},"line":1514,"code":"    it(\"returns the result of the yielded callback\", function () {\n      const stub = this.stub.yieldsOn(this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub(callback), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".yieldsOn"],"updatePoint":{"line":1520,"column":37,"index":51137},"line":1520,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().yieldsOn(this.fakeContext, 1);\n      const stub = createStub().callsFake(fakeFn).yieldsOn(this.fakeContext, 2);\n      const spy = createSpy();\n      stub(spy);\n      assert(spy.calledWith, 2);\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"yields to property of object argument","suites":["stub",".yieldsTo"],"updatePoint":{"line":1530,"column":45,"index":51507},"line":1530,"code":"    it(\"yields to property of object argument\", function () {\n      const stub = createStub().yieldsTo(\"success\");\n      const callback = createSpy();\n      stub({\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no object with callback is passed","suites":["stub",".yieldsTo"],"updatePoint":{"line":1539,"column":72,"index":51826},"line":1539,"code":"    it(\"throws understandable error if no object with callback is passed\", function () {\n      const stub = createStub().yieldsTo(\"success\");\n      assert.exception(stub, {\n        message: \"stub expected to yield to 'success', but no object with such a property was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if failing to yield callback by symbol","suites":["stub",".yieldsTo"],"updatePoint":{"line":1545,"column":74,"index":52122},"line":1545,"code":"    it(\"throws understandable error if failing to yield callback by symbol\", function () {\n      if (typeof Symbol !== \"function\") {\n        this.skip();\n      }\n      const symbol = Symbol(\"apple pie\");\n      const stub = createStub().yieldsTo(symbol);\n      assert.exception(stub, {\n        message: \"stub expected to yield to 'Symbol(apple pie)', but no object with such a property was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["stub",".yieldsTo"],"updatePoint":{"line":1555,"column":56,"index":52520},"line":1555,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      const myObj = {\n        somethingAwesome: function () {\n          return;\n        }\n      };\n      const stub = createStub(myObj, \"somethingAwesome\").yieldsTo(\"success\");\n      assert.exception(function () {\n        stub(23, 42);\n      }, {\n        message: \"somethingAwesome expected to yield to 'success', but \" + \"no object with such a property was passed. \" + \"Received [23, 42]\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes property on last argument as callback","suites":["stub",".yieldsTo"],"updatePoint":{"line":1568,"column":53,"index":52998},"line":1568,"code":"    it(\"invokes property on last argument as callback\", function () {\n      const stub = createStub().yieldsTo(\"success\");\n      const callback = createSpy();\n      stub(24, {}, {\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two possible callbacks","suites":["stub",".yieldsTo"],"updatePoint":{"line":1577,"column":47,"index":53300},"line":1577,"code":"    it(\"invokes first of two possible callbacks\", function () {\n      const stub = createStub().yieldsTo(\"error\");\n      const callback = createSpy();\n      const callback2 = createSpy();\n      stub(24, {}, {\n        error: callback\n      }, {\n        error: callback2\n      });\n      assert(callback.calledOnce);\n      assert(!callback2.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["stub",".yieldsTo"],"updatePoint":{"line":1589,"column":39,"index":53647},"line":1589,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yieldsTo(\"success\", obj, \"Crazy\");\n      const callback = createSpy();\n      stub({\n        success: callback\n      });\n      assert(callback.calledWith(obj, \"Crazy\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["stub",".yieldsTo"],"updatePoint":{"line":1600,"column":33,"index":53950},"line":1600,"code":"    it(\"throws if callback throws\", function () {\n      const obj = {\n        id: 42\n      };\n      const stub = createStub().yieldsTo(\"error\", obj, \"Crazy\");\n      const callback = createStub().throws();\n      assert.exception(function () {\n        stub({\n          error: callback\n        });\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws takes precedent over yielded return value","suites":["stub",".yieldsTo"],"updatePoint":{"line":1612,"column":56,"index":54286},"line":1612,"code":"    it(\"throws takes precedent over yielded return value\", function () {\n      const stub = createStub().throws().yieldsTo(\"success\");\n      const callback = createStub().returns(\"return value\");\n      assert.exception(function () {\n        stub({\n          success: callback\n        });\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns takes precedent over yielded return value","suites":["stub",".yieldsTo"],"updatePoint":{"line":1622,"column":57,"index":54628},"line":1622,"code":"    it(\"returns takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returns(obj).yieldsTo(\"success\");\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub({\n        success: callback\n      }), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsArg takes precedent over yielded return value","suites":["stub",".yieldsTo"],"updatePoint":{"line":1631,"column":60,"index":54964},"line":1631,"code":"    it(\"returnsArg takes precedent over yielded return value\", function () {\n      const stub = createStub().returnsArg(0).yieldsTo(\"success\");\n      const callback = createStub().returns(\"return value\");\n      assert.equals(stub({\n        success: callback\n      }), {\n        success: callback\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsThis takes precedent over yielded return value","suites":["stub",".yieldsTo"],"updatePoint":{"line":1641,"column":61,"index":55314},"line":1641,"code":"    it(\"returnsThis takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = createStub().returnsThis().yieldsTo(\"success\");\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub.call(obj, {\n        success: callback\n      }), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the result of the yielded callback","suites":["stub",".yieldsTo"],"updatePoint":{"line":1650,"column":50,"index":55651},"line":1650,"code":"    it(\"returns the result of the yielded callback\", function () {\n      const stub = createStub().yieldsTo(\"success\");\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub({\n        success: callback\n      }), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".yieldsTo"],"updatePoint":{"line":1658,"column":37,"index":55940},"line":1658,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().yieldsTo(\"success\", 1);\n      const stub = createStub().callsFake(fakeFn).yieldsTo(\"success\", 2);\n      const callback = createSpy();\n      stub({\n        success: callback\n      });\n      assert(callback.calledWith(2));\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"yields to property of object argument","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1676,"column":45,"index":56464},"line":1676,"code":"    it(\"yields to property of object argument\", function () {\n      this.stub.yieldsToOn(\"success\", this.fakeContext);\n      const callback = createSpy();\n      this.stub({\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert(callback.calledOn(this.fakeContext));\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"yields to property of object argument with undefined context","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1686,"column":68,"index":56839},"line":1686,"code":"    it(\"yields to property of object argument with undefined context\", function () {\n      this.stub.yieldsToOn(\"success\", undefined);\n      const callback = createSpy();\n      this.stub({\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert(callback.calledOn(undefined));\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"yields to property of object argument with number context","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1696,"column":65,"index":57197},"line":1696,"code":"    it(\"yields to property of object argument with number context\", function () {\n      this.stub.yieldsToOn(\"success\", 5);\n      const callback = createSpy();\n      this.stub({\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert(callback.calledOn(5));\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws understandable error if no object with callback is passed","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1706,"column":72,"index":57546},"line":1706,"code":"    it(\"throws understandable error if no object with callback is passed\", function () {\n      this.stub.yieldsToOn(\"success\", this.fakeContext);\n      assert.exception(this.stub, {\n        message: \"stub expected to yield to 'success', but no object with such a property was passed.\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"includes stub name and actual arguments in error","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1712,"column":56,"index":57833},"line":1712,"code":"    it(\"includes stub name and actual arguments in error\", function () {\n      const myObj = {\n        somethingAwesome: function () {\n          return;\n        }\n      };\n      const stub = createStub(myObj, \"somethingAwesome\").yieldsToOn(\"success\", this.fakeContext);\n      assert.exception(function () {\n        stub(23, 42);\n      }, {\n        message: \"somethingAwesome expected to yield to 'success', but \" + \"no object with such a property was passed. \" + \"Received [23, 42]\"\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes property on last argument as callback","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1725,"column":53,"index":58331},"line":1725,"code":"    it(\"invokes property on last argument as callback\", function () {\n      const callback = createSpy();\n      this.stub.yieldsToOn(\"success\", this.fakeContext);\n      this.stub(24, {}, {\n        success: callback\n      });\n      assert(callback.calledOnce);\n      assert(callback.calledOn(this.fakeContext));\n      assert.equals(callback.args[0].length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes first of two possible callbacks","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1735,"column":47,"index":58693},"line":1735,"code":"    it(\"invokes first of two possible callbacks\", function () {\n      const callback = createSpy();\n      const callback2 = createSpy();\n      this.stub.yieldsToOn(\"error\", this.fakeContext);\n      this.stub(24, {}, {\n        error: callback\n      }, {\n        error: callback2\n      });\n      assert(callback.calledOnce);\n      assert(callback.calledOn(this.fakeContext));\n      assert(!callback2.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"invokes callback with arguments","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1748,"column":39,"index":59100},"line":1748,"code":"    it(\"invokes callback with arguments\", function () {\n      const obj = {\n        id: 42\n      };\n      const callback = createSpy();\n      this.stub.yieldsToOn(\"success\", this.fakeContext, obj, \"Crazy\");\n      this.stub({\n        success: callback\n      });\n      assert(callback.calledOn(this.fakeContext));\n      assert(callback.calledWith(obj, \"Crazy\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws if callback throws","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1760,"column":33,"index":59463},"line":1760,"code":"    it(\"throws if callback throws\", function () {\n      const obj = {\n        id: 42\n      };\n      const callback = createStub().throws();\n      this.stub.yieldsToOn(\"error\", this.fakeContext, obj, \"Crazy\");\n      assert.exception(function () {\n        this.stub({\n          error: callback\n        });\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws takes precedent over yielded return value","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1772,"column":56,"index":59808},"line":1772,"code":"    it(\"throws takes precedent over yielded return value\", function () {\n      const stub = this.stub.throws().yieldsToOn(\"success\", this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.exception(function () {\n        stub({\n          success: callback\n        });\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns takes precedent over yielded return value","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1782,"column":57,"index":60167},"line":1782,"code":"    it(\"returns takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = this.stub.returns(obj).yieldsToOn(\"success\", this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub({\n        success: callback\n      }), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsArg takes precedent over yielded return value","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1791,"column":60,"index":60520},"line":1791,"code":"    it(\"returnsArg takes precedent over yielded return value\", function () {\n      const stub = this.stub.returnsArg(0).yieldsToOn(\"success\", this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.equals(stub({\n        success: callback\n      }), {\n        success: callback\n      });\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returnsThis takes precedent over yielded return value","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1801,"column":61,"index":60887},"line":1801,"code":"    it(\"returnsThis takes precedent over yielded return value\", function () {\n      const obj = {};\n      const stub = this.stub.returnsThis().yieldsToOn(\"success\", this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub.call(obj, {\n        success: callback\n      }), obj);\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"returns the result of the yielded callback","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1810,"column":50,"index":61241},"line":1810,"code":"    it(\"returns the result of the yielded callback\", function () {\n      const stub = this.stub.yieldsToOn(\"success\", this.fakeContext);\n      const callback = createStub().returns(\"return value\");\n      assert.same(stub({\n        success: callback\n      }), \"return value\");\n      assert(callback.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supersedes previous callsFake","suites":["stub",".yieldsToOn"],"updatePoint":{"line":1818,"column":37,"index":61547},"line":1818,"code":"    it(\"supersedes previous callsFake\", function () {\n      const fakeFn = createStub().yieldsToOn(\"success\", this.fakeContext, 1);\n      const stub = createStub().callsFake(fakeFn).yieldsToOn(\"success\", this.fakeContext, 2);\n      const callback = createSpy();\n      stub({\n        success: callback\n      });\n      assert(callback.calledWith(2));\n      refute(fakeFn.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"defines withArgs method","suites":["stub",".withArgs"],"updatePoint":{"line":1830,"column":31,"index":61971},"line":1830,"code":"    it(\"defines withArgs method\", function () {\n      const stub = createStub();\n      assert.isFunction(stub.withArgs);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"creates filtered stub","suites":["stub",".withArgs"],"updatePoint":{"line":1834,"column":29,"index":62098},"line":1834,"code":"    it(\"creates filtered stub\", function () {\n      const stub = createStub();\n      const other = stub.withArgs(23);\n      refute.same(other, stub);\n      assert.isFunction(stub.returns);\n      assert.isFunction(other.returns);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"filters return values based on arguments","suites":["stub",".withArgs"],"updatePoint":{"line":1841,"column":48,"index":62354},"line":1841,"code":"    it(\"filters return values based on arguments\", function () {\n      const stub = createStub().returns(23);\n      stub.withArgs(42).returns(99);\n      assert.equals(stub(), 23);\n      assert.equals(stub(42), 99);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"filters exceptions based on arguments","suites":["stub",".withArgs"],"updatePoint":{"line":1847,"column":45,"index":62574},"line":1847,"code":"    it(\"filters exceptions based on arguments\", function () {\n      const stub = createStub().returns(23);\n      stub.withArgs(42).throws();\n      refute.exception(stub);\n      assert.exception(function () {\n        stub(42);\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"ensure stub recognizes samsam match fuzzy arguments","suites":["stub",".withArgs"],"updatePoint":{"line":1855,"column":59,"index":62832},"line":1855,"code":"    it(\"ensure stub recognizes samsam match fuzzy arguments\", function () {\n      const stub = createStub().returns(23);\n      stub.withArgs(match({\n        foo: \"bar\"\n      })).returns(99);\n      assert.equals(stub(), 23);\n      assert.equals(stub({\n        foo: \"bar\",\n        bar: \"foo\"\n      }), 99);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"ensure stub uses last matching arguments","suites":["stub",".withArgs"],"updatePoint":{"line":1866,"column":48,"index":63134},"line":1866,"code":"    it(\"ensure stub uses last matching arguments\", function () {\n      const unmatchedValue = \"d3ada6a0-8dac-4136-956d-033b5f23eadf\";\n      const firstMatchedValue = \"68128619-a639-4b32-a4a0-6519165bf301\";\n      const secondMatchedValue = \"4ac2dc8f-3f3f-4648-9838-a2825fd94c9a\";\n      const expectedArgument = \"3e1ed1ec-c377-4432-a33e-3c937f1406d1\";\n      const stub = createStub().returns(unmatchedValue);\n      stub.withArgs(expectedArgument).returns(firstMatchedValue);\n      stub.withArgs(expectedArgument).returns(secondMatchedValue);\n      assert.equals(stub(), unmatchedValue);\n      assert.equals(stub(expectedArgument), secondMatchedValue);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"ensure stub uses last matching samsam match arguments","suites":["stub",".withArgs"],"updatePoint":{"line":1877,"column":61,"index":63805},"line":1877,"code":"    it(\"ensure stub uses last matching samsam match arguments\", function () {\n      const unmatchedValue = \"0aa66a7d-3c50-49ef-8365-bdcab637b2dd\";\n      const firstMatchedValue = \"1ab2c601-7602-4658-9377-3346f6814caa\";\n      const secondMatchedValue = \"e2e31518-c4c4-4012-a61f-31942f603ffa\";\n      const expectedArgument = \"90dc4a22-ef53-4c62-8e05-4cf4b4bf42fa\";\n      const stub = createStub().returns(unmatchedValue);\n      stub.withArgs(expectedArgument).returns(firstMatchedValue);\n      stub.withArgs(match(expectedArgument)).returns(secondMatchedValue);\n      assert.equals(stub(), unmatchedValue);\n      assert.equals(stub(expectedArgument), secondMatchedValue);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously calls argument at specified index","suites":["stub",".callsArgAsync"],"updatePoint":{"line":1893,"column":56,"index":64596},"line":1893,"code":"    it(\"asynchronously calls argument at specified index\", function (done) {\n      this.stub.callsArgAsync(2);\n      const callback = createSpy(done);\n      this.stub(1, 2, callback);\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously calls callback at specified index with multiple args","suites":["stub",".callsArgWithAsync"],"updatePoint":{"line":1904,"column":75,"index":64961},"line":1904,"code":"    it(\"asynchronously calls callback at specified index with multiple args\", function (done) {\n      const object = {};\n      const array = [];\n      this.stub.callsArgWithAsync(1, object, array);\n      const callback = createSpy(function () {\n        assert(callback.calledWith(object, array));\n        done();\n      });\n      this.stub(1, callback);\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously calls argument at specified index with specified context","suites":["stub",".callsArgOnAsync"],"updatePoint":{"line":1923,"column":79,"index":65533},"line":1923,"code":"    it(\"asynchronously calls argument at specified index with specified context\", function (done) {\n      const context = this.fakeContext;\n      this.stub.callsArgOnAsync(2, context);\n      const callback = createSpy(function () {\n        assert(callback.calledOn(context));\n        done();\n      });\n      this.stub(1, 2, callback);\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously calls argument at specified index with provided context and args","suites":["stub",".callsArgOnWithAsync"],"updatePoint":{"line":1941,"column":87,"index":66095},"line":1941,"code":"    it(\"asynchronously calls argument at specified index with provided context and args\", function (done) {\n      const object = {};\n      const context = this.fakeContext;\n      this.stub.callsArgOnWithAsync(1, context, object);\n      const callback = createSpy(function () {\n        assert(callback.calledOn(context));\n        assert(callback.calledWith(object));\n        done();\n      });\n      this.stub(1, callback);\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously invokes only argument as callback","suites":["stub",".yieldsAsync"],"updatePoint":{"line":1955,"column":56,"index":66573},"line":1955,"code":"    it(\"asynchronously invokes only argument as callback\", function (done) {\n      const stub = createStub().yieldsAsync();\n      const spy = createSpy(done);\n      stub(spy);\n      assert(!spy.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously invokes only argument as callback with given context","suites":["stub",".yieldsOnAsync"],"updatePoint":{"line":1969,"column":75,"index":66976},"line":1969,"code":"    it(\"asynchronously invokes only argument as callback with given context\", function (done) {\n      const context = this.fakeContext;\n      this.stub.yieldsOnAsync(context);\n      const spy = createSpy(function () {\n        assert(spy.calledOnce);\n        assert(spy.calledOn(context));\n        assert.equals(spy.args[0].length, 0);\n        done();\n      });\n      this.stub(spy);\n      assert(!spy.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously yields to property of object argument","suites":["stub",".yieldsToAsync"],"updatePoint":{"line":1983,"column":60,"index":67428},"line":1983,"code":"    it(\"asynchronously yields to property of object argument\", function (done) {\n      const stub = createStub().yieldsToAsync(\"success\");\n      const callback = createSpy(function () {\n        assert(callback.calledOnce);\n        assert.equals(callback.args[0].length, 0);\n        done();\n      });\n      stub({\n        success: callback\n      });\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"asynchronously yields to property of object argument with given context","suites":["stub",".yieldsToOnAsync"],"updatePoint":{"line":2003,"column":79,"index":68011},"line":2003,"code":"    it(\"asynchronously yields to property of object argument with given context\", function (done) {\n      const context = this.fakeContext;\n      this.stub.yieldsToOnAsync(\"success\", context);\n      const callback = createSpy(function () {\n        assert(callback.calledOnce);\n        assert(callback.calledOn(context));\n        assert.equals(callback.args[0].length, 0);\n        done();\n      });\n      this.stub({\n        success: callback\n      });\n      assert(!callback.called);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with returns to produce sequence","suites":["stub",".onCall"],"updatePoint":{"line":2019,"column":52,"index":68518},"line":2019,"code":"    it(\"can be used with returns to produce sequence\", function () {\n      const stub = createStub().returns(3);\n      stub.onFirstCall().returns(1).onCall(2).returns(2);\n      assert.same(stub(), 1);\n      assert.same(stub(), 3);\n      assert.same(stub(), 2);\n      assert.same(stub(), 3);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with returnsArg to produce sequence","suites":["stub",".onCall"],"updatePoint":{"line":2027,"column":55,"index":68820},"line":2027,"code":"    it(\"can be used with returnsArg to produce sequence\", function () {\n      const stub = createStub().returns(\"default\");\n      stub.onSecondCall().returnsArg(0);\n      assert.same(stub(1), \"default\");\n      assert.same(stub(2), 2);\n      assert.same(stub(3), \"default\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with returnsThis to produce sequence","suites":["stub",".onCall"],"updatePoint":{"line":2034,"column":56,"index":69103},"line":2034,"code":"    it(\"can be used with returnsThis to produce sequence\", function () {\n      const instance = {};\n      instance.stub = createStub().returns(\"default\");\n      instance.stub.onSecondCall().returnsThis();\n      assert.same(instance.stub(), \"default\");\n      assert.same(instance.stub(), instance);\n      assert.same(instance.stub(), \"default\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with throwsException to produce sequence","suites":["stub",".onCall"],"updatePoint":{"line":2042,"column":60,"index":69460},"line":2042,"code":"    it(\"can be used with throwsException to produce sequence\", function () {\n      const stub = createStub();\n      const error = new Error();\n      stub.onSecondCall().throwsException(error);\n      stub();\n      assert.exception(stub, function (e) {\n        return e === error;\n      });\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"supports chained declaration of behavior","suites":["stub",".onCall"],"updatePoint":{"line":2051,"column":48,"index":69745},"line":2051,"code":"    it(\"supports chained declaration of behavior\", function () {\n      const stub = createStub().onCall(0).returns(1).onCall(1).returns(2).onCall(2).returns(3);\n      assert.same(stub(), 1);\n      assert.same(stub(), 2);\n      assert.same(stub(), 3);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can produce a sequence for a fake","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2058,"column":43,"index":70058},"line":2058,"code":"      it(\"can produce a sequence for a fake\", function () {\n        const stub = createStub().returns(0);\n        stub.withArgs(5).returns(-1).onFirstCall().returns(1).onSecondCall().returns(2);\n        assert.same(stub(0), 0);\n        assert.same(stub(5), 1);\n        assert.same(stub(0), 0);\n        assert.same(stub(5), 2);\n        assert.same(stub(5), -1);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"falls back to stub default behaviour if fake does not have its own default behaviour","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2067,"column":94,"index":70480},"line":2067,"code":"      it(\"falls back to stub default behaviour if fake does not have its own default behaviour\", function () {\n        const stub = createStub().returns(0);\n        stub.withArgs(5).onFirstCall().returns(1);\n        assert.same(stub(5), 1);\n        assert.same(stub(5), 0);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"falls back to stub behaviour for call if fake does not have its own behaviour for call","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2073,"column":96,"index":70766},"line":2073,"code":"      it(\"falls back to stub behaviour for call if fake does not have its own behaviour for call\", function () {\n        const stub = createStub().returns(0);\n        stub.withArgs(5).onFirstCall().returns(1);\n        stub.onSecondCall().returns(2);\n        assert.same(stub(5), 1);\n        assert.same(stub(5), 2);\n        assert.same(stub(4), 0);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"defaults to undefined behaviour once no more calls have been defined","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2081,"column":78,"index":71107},"line":2081,"code":"      it(\"defaults to undefined behaviour once no more calls have been defined\", function () {\n        const stub = createStub();\n        stub.withArgs(5).onFirstCall().returns(1).onSecondCall().returns(2);\n        assert.same(stub(5), 1);\n        assert.same(stub(5), 2);\n        assert.isUndefined(stub(5));\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not create undefined behaviour just by calling onCall","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2088,"column":68,"index":71417},"line":2088,"code":"      it(\"does not create undefined behaviour just by calling onCall\", function () {\n        const stub = createStub().returns(2);\n        stub.onFirstCall();\n        assert.same(stub(6), 2);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"works with fakes and reset","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2093,"column":36,"index":71587},"line":2093,"code":"      it(\"works with fakes and reset\", function () {\n        const stub = createStub();\n        stub.withArgs(5).onFirstCall().returns(1);\n        stub.withArgs(5).onSecondCall().returns(2);\n        assert.same(stub(5), 1);\n        assert.same(stub(5), 2);\n        assert.isUndefined(stub(5));\n        stub.reset();\n        assert.same(stub(5), undefined);\n        assert.same(stub(5), undefined);\n        assert.isUndefined(stub(5));\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"throws an understandable error when trying to use withArgs on behavior","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2105,"column":80,"index":72076},"line":2105,"code":"      it(\"throws an understandable error when trying to use withArgs on behavior\", function () {\n        assert.exception(function () {\n          createStub().onFirstCall().withArgs(1);\n        }, {\n          message: /not supported/\n        });\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with yields* to produce a sequence","suites":["stub",".onCall","in combination with withArgs"],"updatePoint":{"line":2113,"column":54,"index":72314},"line":2113,"code":"    it(\"can be used with yields* to produce a sequence\", function () {\n      const context = {\n        foo: \"bar\"\n      };\n      const obj = {\n        method1: createSpy(),\n        method2: createSpy()\n      };\n      const obj2 = {\n        method2: createSpy()\n      };\n      const stub = createStub().yieldsToOn(\"method2\", context, 7, 8);\n      stub.onFirstCall().yields(1, 2).onSecondCall().yieldsOn(context, 3, 4).onThirdCall().yieldsTo(\"method1\", 5, 6).onCall(3).yieldsToOn(\"method2\", context, 7, 8);\n      const spy1 = createSpy();\n      const spy2 = createSpy();\n      stub(spy1);\n      stub(spy2);\n      stub(obj);\n      stub(obj);\n      stub(obj2); // should continue with default behavior\n\n      assert(spy1.calledOnce);\n      assert(spy1.calledWithExactly(1, 2));\n      assert(spy2.calledOnce);\n      assert(spy2.calledAfter(spy1));\n      assert(spy2.calledOn(context));\n      assert(spy2.calledWithExactly(3, 4));\n      assert(obj.method1.calledOnce);\n      assert(obj.method1.calledAfter(spy2));\n      assert(obj.method1.calledWithExactly(5, 6));\n      assert(obj.method2.calledOnce);\n      assert(obj.method2.calledAfter(obj.method1));\n      assert(obj.method2.calledOn(context));\n      assert(obj.method2.calledWithExactly(7, 8));\n      assert(obj2.method2.calledOnce);\n      assert(obj2.method2.calledAfter(obj.method2));\n      assert(obj2.method2.calledOn(context));\n      assert(obj2.method2.calledWithExactly(7, 8));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with callsArg* to produce a sequence","suites":["stub",".onCall","method2"],"updatePoint":{"line":2152,"column":56,"index":73759},"line":2152,"code":"    it(\"can be used with callsArg* to produce a sequence\", function () {\n      const spy1 = createSpy();\n      const spy2 = createSpy();\n      const spy3 = createSpy();\n      const spy4 = createSpy();\n      const spy5 = createSpy();\n      const decoy = createSpy();\n      const context = {\n        foo: \"bar\"\n      };\n      const stub = createStub().callsArgOnWith(3, context, \"c\", \"d\");\n      stub.onFirstCall().callsArg(0).onSecondCall().callsArgWith(1, \"a\", \"b\").onThirdCall().callsArgOn(2, context).onCall(3).callsArgOnWith(3, context, \"c\", \"d\");\n      stub(spy1);\n      stub(decoy, spy2);\n      stub(decoy, decoy, spy3);\n      stub(decoy, decoy, decoy, spy4);\n      stub(decoy, decoy, decoy, spy5); // should continue with default behavior\n\n      assert(spy1.calledOnce);\n      assert(spy2.calledOnce);\n      assert(spy2.calledAfter(spy1));\n      assert(spy2.calledWithExactly(\"a\", \"b\"));\n      assert(spy3.calledOnce);\n      assert(spy3.calledAfter(spy2));\n      assert(spy3.calledOn(context));\n      assert(spy4.calledOnce);\n      assert(spy4.calledAfter(spy3));\n      assert(spy4.calledOn(context));\n      assert(spy4.calledWithExactly(\"c\", \"d\"));\n      assert(spy5.calledOnce);\n      assert(spy5.calledAfter(spy4));\n      assert(spy5.calledOn(context));\n      assert(spy5.calledWithExactly(\"c\", \"d\"));\n      assert(decoy.notCalled);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can be used with yields* and callsArg* in combination to produce a sequence","suites":["stub",".onCall","method2"],"updatePoint":{"line":2187,"column":83,"index":75136},"line":2187,"code":"    it(\"can be used with yields* and callsArg* in combination to produce a sequence\", function () {\n      const stub = createStub().yields(1, 2);\n      stub.onSecondCall().callsArg(1).onThirdCall().yieldsTo(\"method\").onCall(3).callsArgWith(2, \"a\", \"b\");\n      const obj = {\n        method: createSpy()\n      };\n      const spy1 = createSpy();\n      const spy2 = createSpy();\n      const spy3 = createSpy();\n      const decoy = createSpy();\n      stub(spy1);\n      stub(decoy, spy2);\n      stub(obj);\n      stub(decoy, decoy, spy3);\n      assert(spy1.calledOnce);\n      assert(spy2.calledOnce);\n      assert(spy2.calledAfter(spy1));\n      assert(obj.method.calledOnce);\n      assert(obj.method.calledAfter(spy2));\n      assert(spy3.calledOnce);\n      assert(spy3.calledAfter(obj.method));\n      assert(spy3.calledWithExactly(\"a\", \"b\"));\n      assert(decoy.notCalled);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should interact correctly with assertions (GH-231)","suites":["stub",".onCall","method2"],"updatePoint":{"line":2211,"column":58,"index":75986},"line":2211,"code":"    it(\"should interact correctly with assertions (GH-231)\", function () {\n      const stub = createStub();\n      const spy = createSpy();\n      stub.callsArgWith(0, \"a\");\n      stub(spy);\n      assert(spy.calledWith(\"a\"));\n      stub(spy);\n      assert(spy.calledWith(\"a\"));\n      stub.onThirdCall().callsArgWith(0, \"b\");\n      stub(spy);\n      assert(spy.calledWith(\"b\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"resets behavior","suites":["stub",".reset"],"updatePoint":{"line":2225,"column":23,"index":76375},"line":2225,"code":"    it(\"resets behavior\", function () {\n      const obj = {\n        a: function () {\n          return;\n        }\n      };\n      const spy = createSpy();\n      createStub(obj, \"a\").callsArg(1);\n      obj.a(null, spy);\n      obj.a.reset();\n      obj.a(null, spy);\n      assert(spy.calledOnce);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"resets call history","suites":["stub",".reset"],"updatePoint":{"line":2238,"column":27,"index":76679},"line":2238,"code":"    it(\"resets call history\", function () {\n      const stub = createStub();\n      stub(1);\n      stub.reset();\n      stub(2);\n      assert(stub.calledOnce);\n      assert.equals(stub.getCall(0).args[0], 2);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"resets history","suites":["stub",".resetHistory"],"updatePoint":{"line":2248,"column":22,"index":76937},"line":2248,"code":"    it(\"resets history\", function () {\n      const stub = createStub();\n      stub(1);\n      stub.reset();\n      stub(2);\n      assert(stub.calledOnce);\n      assert.equals(stub.getCall(0).args[0], 2);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"doesn't reset behavior defined using withArgs","suites":["stub",".resetHistory"],"updatePoint":{"line":2256,"column":53,"index":77178},"line":2256,"code":"    it(\"doesn't reset behavior defined using withArgs\", function () {\n      const stub = createStub();\n      stub.withArgs(\"test\").returns(10);\n      stub.resetHistory();\n      assert.equals(stub(\"test\"), 10);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"doesn't reset behavior","suites":["stub",".resetHistory"],"updatePoint":{"line":2262,"column":30,"index":77373},"line":2262,"code":"    it(\"doesn't reset behavior\", function () {\n      const stub = createStub();\n      stub.returns(10);\n      stub.resetHistory();\n      assert.equals(stub(\"test\"), 10);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"clears yields* and callsArg* sequence","suites":["stub",".resetBehavior"],"updatePoint":{"line":2270,"column":45,"index":77615},"line":2270,"code":"    it(\"clears yields* and callsArg* sequence\", function () {\n      const stub = createStub().yields(1);\n      stub.onFirstCall().callsArg(1);\n      stub.resetBehavior();\n      stub.yields(3);\n      const spyWanted = createSpy();\n      const spyNotWanted = createSpy();\n      stub(spyWanted, spyNotWanted);\n      assert(spyNotWanted.notCalled);\n      assert(spyWanted.calledOnce);\n      assert(spyWanted.calledWithExactly(3));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"cleans 'returns' behavior","suites":["stub",".resetBehavior"],"updatePoint":{"line":2282,"column":33,"index":78038},"line":2282,"code":"    it(\"cleans 'returns' behavior\", function () {\n      const stub = createStub().returns(1);\n      stub.resetBehavior();\n      assert.isUndefined(stub());\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"cleans behavior of fakes returned by withArgs","suites":["stub",".resetBehavior"],"updatePoint":{"line":2287,"column":53,"index":78222},"line":2287,"code":"    it(\"cleans behavior of fakes returned by withArgs\", function () {\n      const stub = createStub();\n      stub.withArgs(\"lolz\").returns(2);\n      stub.resetBehavior();\n      assert.isUndefined(stub(\"lolz\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not clean parents' behavior when called on a fake returned by withArgs","suites":["stub",".resetBehavior"],"updatePoint":{"line":2293,"column":83,"index":78471},"line":2293,"code":"    it(\"does not clean parents' behavior when called on a fake returned by withArgs\", function () {\n      const parentStub = createStub().returns(false);\n      const childStub = parentStub.withArgs(\"lolz\").returns(true);\n      childStub.resetBehavior();\n      assert.same(parentStub(\"lolz\"), false);\n      assert.same(parentStub(), false);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"cleans 'returnsArg' behavior","suites":["stub",".resetBehavior"],"updatePoint":{"line":2300,"column":36,"index":78772},"line":2300,"code":"    it(\"cleans 'returnsArg' behavior\", function () {\n      const stub = createStub().returnsArg(0);\n      stub.resetBehavior();\n      assert.isUndefined(stub(\"defined\"));\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"cleans 'returnsThis' behavior","suites":["stub",".resetBehavior"],"updatePoint":{"line":2305,"column":37,"index":78952},"line":2305,"code":"    it(\"cleans 'returnsThis' behavior\", function () {\n      const instance = {};\n      instance.stub = createStub();\n      instance.stub.returnsThis();\n      instance.stub.resetBehavior();\n      assert.isUndefined(instance.stub());\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"cleans 'resolvesThis' behavior, so the stub does not resolve nor returns anything","suites":["stub",".resetBehavior"],"updatePoint":{"line":2312,"column":89,"index":79244},"line":2312,"code":"    it(\"cleans 'resolvesThis' behavior, so the stub does not resolve nor returns anything\", function () {\n      const instance = {};\n      instance.stub = createStub();\n      instance.stub.resolvesThis();\n      instance.stub.resetBehavior();\n      assert.isUndefined(instance.stub());\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":".calledOnce","suites":["stub",".resetBehavior","does not touch properties that are reset by 'reset'"],"updatePoint":{"line":2320,"column":21,"index":79551},"line":2320,"code":"      it(\".calledOnce\", function () {\n        const stub = createStub();\n        stub(1);\n        stub.resetBehavior();\n        assert(stub.calledOnce);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"called multiple times","suites":["stub",".resetBehavior","does not touch properties that are reset by 'reset'"],"updatePoint":{"line":2326,"column":31,"index":79724},"line":2326,"code":"      it(\"called multiple times\", function () {\n        const stub = createStub();\n        stub(1);\n        stub(2);\n        stub(3);\n        stub.resetBehavior();\n        assert(stub.called);\n        assert.equals(stub.args.length, 3);\n        assert.equals(stub.returnValues.length, 3);\n        assert.equals(stub.exceptions.length, 3);\n        assert.equals(stub.thisValues.length, 3);\n        refute.isUndefined(stub.firstCall);\n        refute.isUndefined(stub.secondCall);\n        refute.isUndefined(stub.thirdCall);\n        refute.isUndefined(stub.lastCall);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"call order state","suites":["stub",".resetBehavior","does not touch properties that are reset by 'reset'"],"updatePoint":{"line":2342,"column":26,"index":80294},"line":2342,"code":"      it(\"call order state\", function () {\n        const stubs = [createStub(), createStub()];\n        stubs[0]();\n        stubs[1]();\n        stubs[0].resetBehavior();\n        assert(stubs[0].calledBefore(stubs[1]));\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"fakes returned by withArgs","suites":["stub",".resetBehavior","does not touch properties that are reset by 'reset'"],"updatePoint":{"line":2349,"column":36,"index":80532},"line":2349,"code":"      it(\"fakes returned by withArgs\", function () {\n        const stub = createStub();\n        const fakeA = stub.withArgs(\"a\");\n        const fakeB = stub.withArgs(\"b\");\n        stub(\"a\");\n        stub(\"b\");\n        stub(\"c\");\n        const fakeC = stub.withArgs(\"c\");\n        stub.resetBehavior();\n        assert(fakeA.calledOnce);\n        assert(fakeB.calledOnce);\n        assert(fakeC.calledOnce);\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"is zero by default","suites":["stub",".length"],"updatePoint":{"line":2365,"column":26,"index":80985},"line":2365,"code":"    it(\"is zero by default\", function () {\n      const stub = createStub();\n      assert.equals(stub.length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 0","suites":["stub",".length"],"updatePoint":{"line":2369,"column":33,"index":81113},"line":2369,"code":"    it(\"retains function length 0\", function () {\n      const object = {\n        test: function () {\n          return;\n        }\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 1","suites":["stub",".length"],"updatePoint":{"line":2378,"column":33,"index":81343},"line":2378,"code":"    it(\"retains function length 1\", function () {\n      const object = {\n        // eslint-disable-next-line no-unused-vars\n        test: function (a) {\n          return;\n        }\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 1);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 2","suites":["stub",".length"],"updatePoint":{"line":2388,"column":33,"index":81625},"line":2388,"code":"    it(\"retains function length 2\", function () {\n      const object = {\n        // eslint-disable-next-line no-unused-vars\n        test: function (a, b) {\n          return;\n        }\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 2);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 3","suites":["stub",".length"],"updatePoint":{"line":2398,"column":33,"index":81910},"line":2398,"code":"    it(\"retains function length 3\", function () {\n      const object = {\n        // eslint-disable-next-line no-unused-vars\n        test: function (a, b, c) {\n          return;\n        }\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 3);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 4","suites":["stub",".length"],"updatePoint":{"line":2408,"column":33,"index":82198},"line":2408,"code":"    it(\"retains function length 4\", function () {\n      const object = {\n        // eslint-disable-next-line no-unused-vars\n        test: function (a, b, c, d) {\n          return;\n        }\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 4);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"retains function length 12","suites":["stub",".length"],"updatePoint":{"line":2418,"column":34,"index":82490},"line":2418,"code":"    it(\"retains function length 12\", function () {\n      // eslint-disable-next-line no-unused-vars\n      const func12Args = function (a, b, c, d, e, f, g, h, i, j, k, l) {\n        return;\n      };\n      const object = {\n        test: func12Args\n      };\n      const stub = createStub(object, \"test\");\n      assert.equals(stub.length, 12);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not call original function when arguments match conditional stub","suites":["stub",".callThrough"],"updatePoint":{"line":2431,"column":77,"index":82928},"line":2431,"code":"    it(\"does not call original function when arguments match conditional stub\", function () {\n      // We need a function here because we can't wrap properties that are already stubs\n      let callCount = 0;\n      const originalFunc = function increaseCallCount() {\n        callCount++;\n      };\n      const myObj = {\n        prop: originalFunc\n      };\n      const propStub = createStub(myObj, \"prop\");\n      propStub.withArgs(\"foo\").returns(\"bar\");\n      propStub.callThrough();\n      const result = myObj.prop(\"foo\");\n      assert.equals(result, \"bar\");\n      assert.equals(callCount, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls original function when arguments do not match conditional stub","suites":["stub",".callThrough"],"updatePoint":{"line":2447,"column":76,"index":83527},"line":2447,"code":"    it(\"calls original function when arguments do not match conditional stub\", function () {\n      // We need a function here because we can't wrap properties that are already stubs\n      let callCount = 0;\n      const originalFunc = function increaseCallCount() {\n        callCount++;\n        return 1337;\n      };\n      const myObj = {\n        prop: originalFunc\n      };\n      const propStub = createStub(myObj, \"prop\");\n      propStub.withArgs(\"foo\").returns(\"bar\");\n      propStub.callThrough(propStub);\n      const result = myObj.prop(\"not foo\");\n      assert.equals(result, 1337);\n      assert.equals(callCount, 1);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls original function with same arguments when call does not match conditional stub","suites":["stub",".callThrough"],"updatePoint":{"line":2464,"column":93,"index":84175},"line":2464,"code":"    it(\"calls original function with same arguments when call does not match conditional stub\", function () {\n      // We need a function here because we can't wrap properties that are already stubs\n      let callArgs = [];\n      const originalFunc = function increaseCallCount() {\n        callArgs = arguments;\n      };\n      const myObj = {\n        prop: originalFunc\n      };\n      const propStub = createStub(myObj, \"prop\");\n      propStub.withArgs(\"foo\").returns(\"bar\");\n      propStub.callThrough();\n      myObj.prop(\"not foo\");\n      assert.equals(callArgs.length, 1);\n      assert.equals(callArgs[0], \"not foo\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls original function with same `this` reference when call does not match conditional stub","suites":["stub",".callThrough"],"updatePoint":{"line":2480,"column":100,"index":84811},"line":2480,"code":"    it(\"calls original function with same `this` reference when call does not match conditional stub\", function () {\n      // We need a function here because we can't wrap properties that are already stubs\n      let reference = {};\n      const originalFunc = function increaseCallCount() {\n        reference = this;\n      };\n      const myObj = {\n        prop: originalFunc\n      };\n      const propStub = createStub(myObj, \"prop\");\n      propStub.withArgs(\"foo\").returns(\"bar\");\n      propStub.callThrough();\n      myObj.prop(\"not foo\");\n      assert.equals(reference, myObj);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"does not call original function with new when arguments match conditional stub","suites":["stub",".callThroughWithNew"],"updatePoint":{"line":2497,"column":86,"index":85437},"line":2497,"code":"    it(\"does not call original function with new when arguments match conditional stub\", function () {\n      // We need a function here because we can't wrap properties that are already stubs\n      let callCount = 0;\n      const OriginalClass = function SomeClass() {\n        this.foo = \"bar\";\n        callCount++;\n      };\n      const myObj = {\n        MyClass: OriginalClass\n      };\n      const propStub = createStub(myObj, \"MyClass\");\n      propStub.withArgs(\"foo\").returns({\n        foo: \"bar\"\n      });\n      propStub.callThroughWithNew(propStub);\n      const result = new myObj.MyClass(\"foo\");\n      assert.equals(result.foo, \"bar\");\n      assert.equals(callCount, 0);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"calls original function with new with same arguments","suites":["stub",".callThroughWithNew","when call does not match conditional stub"],"updatePoint":{"line":2517,"column":62,"index":86168},"line":2517,"code":"      it(\"calls original function with new with same arguments\", function () {\n        // We need a function here because we can't wrap properties that are already stubs\n        let callArgs = [];\n        function OriginalClass() {\n          callArgs = arguments;\n          this.foo = \"baz\";\n        }\n        const myObj = {\n          MyClass: OriginalClass\n        };\n        const propStub = createStub(myObj, \"MyClass\");\n        propStub.withArgs(\"foo\").returns({\n          foo: \"bar\"\n        });\n        propStub.callThroughWithNew(propStub);\n        const result = new myObj.MyClass(\"not foo\", [\"definitely\", \"not\", \"foo\"]);\n        assert.equals(callArgs[0], \"not foo\");\n        assert.equals(callArgs[1], [\"definitely\", \"not\", \"foo\"]);\n        assert.equals(result.foo, \"baz\");\n      });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows users to stub getter functions for properties","suites":["stub",".get"],"updatePoint":{"line":2540,"column":60,"index":87009},"line":2540,"code":"    it(\"allows users to stub getter functions for properties\", function () {\n      const myObj = {\n        prop: \"foo\"\n      };\n      createStub(myObj, \"prop\").get(function getterFn() {\n        return \"bar\";\n      });\n      assert.equals(myObj.prop, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows users to stub getter functions for functions","suites":["stub",".get"],"updatePoint":{"line":2549,"column":59,"index":87274},"line":2549,"code":"    it(\"allows users to stub getter functions for functions\", function () {\n      const myObj = {\n        prop: function propGetter() {\n          return \"foo\";\n        }\n      };\n      createStub(myObj, \"prop\").get(function getterFn() {\n        return \"bar\";\n      });\n      assert.equals(myObj.prop, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"replaces old getters","suites":["stub",".get"],"updatePoint":{"line":2560,"column":28,"index":87560},"line":2560,"code":"    it(\"replaces old getters\", function () {\n      const myObj = {\n        get prop() {\n          fail(\"should not call the old getter\");\n          return;\n        }\n      };\n      createStub(myObj, \"prop\").get(function getterFn() {\n        return \"bar\";\n      });\n      assert.equals(myObj.prop, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can restore stubbed setters for functions","suites":["stub",".get"],"updatePoint":{"line":2572,"column":49,"index":87894},"line":2572,"code":"    it(\"can restore stubbed setters for functions\", function () {\n      const propFn = function propFn() {\n        return \"bar\";\n      };\n      const myObj = {\n        prop: propFn\n      };\n      const stub = createStub(myObj, \"prop\");\n      stub.get(function getterFn() {\n        return \"baz\";\n      });\n      stub.restore();\n      assert.equals(myObj.prop, propFn);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can restore stubbed getters for properties","suites":["stub",".get"],"updatePoint":{"line":2586,"column":50,"index":88271},"line":2586,"code":"    it(\"can restore stubbed getters for properties\", function () {\n      const myObj = {\n        get prop() {\n          return \"bar\";\n        }\n      };\n      const stub = createStub(myObj, \"prop\");\n      stub.get(function getterFn() {\n        return \"baz\";\n      });\n      stub.restore();\n      assert.equals(myObj.prop, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows users to stub setter functions for properties","suites":["stub",".set"],"updatePoint":{"line":2601,"column":60,"index":88658},"line":2601,"code":"    it(\"allows users to stub setter functions for properties\", function () {\n      const myObj = {\n        prop: \"foo\"\n      };\n      createStub(myObj, \"prop\").set(function setterFn() {\n        myObj.example = \"bar\";\n      });\n      myObj.prop = \"baz\";\n      assert.equals(myObj.example, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows users to stub setter functions for functions","suites":["stub",".set"],"updatePoint":{"line":2611,"column":59,"index":88961},"line":2611,"code":"    it(\"allows users to stub setter functions for functions\", function () {\n      const myObj = {\n        prop: function propSetter() {\n          return \"foo\";\n        }\n      };\n      createStub(myObj, \"prop\").set(function setterFn() {\n        myObj.example = \"bar\";\n      });\n      myObj.prop = \"baz\";\n      assert.equals(myObj.example, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"replaces old setters","suites":["stub",".set"],"updatePoint":{"line":2623,"column":28,"index":89285},"line":2623,"code":"    it(\"replaces old setters\", function () {\n      const myObj = {\n        // eslint-disable-next-line accessor-pairs\n        set prop(val) {\n          fail(\"should not call the old setter\");\n        }\n      };\n      createStub(myObj, \"prop\").set(function setterFn() {\n        myObj.example = \"bar\";\n      });\n      myObj.prop = \"foo\";\n      assert.equals(myObj.example, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can restore stubbed setters for functions","suites":["stub",".set"],"updatePoint":{"line":2636,"column":49,"index":89693},"line":2636,"code":"    it(\"can restore stubbed setters for functions\", function () {\n      const propFn = function propFn() {\n        return \"bar\";\n      };\n      const myObj = {\n        prop: propFn\n      };\n      const stub = createStub(myObj, \"prop\");\n      stub.set(function setterFn() {\n        myObj.otherProp = \"baz\";\n      });\n      stub.restore();\n      assert.equals(myObj.prop, propFn);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"can restore stubbed setters for properties","suites":["stub",".set"],"updatePoint":{"line":2650,"column":50,"index":90081},"line":2650,"code":"    it(\"can restore stubbed setters for properties\", function () {\n      const myObj = {\n        // eslint-disable-next-line accessor-pairs\n        set prop(val) {\n          this.otherProp = \"bar\";\n        }\n      };\n      const stub = createStub(myObj, \"prop\");\n      stub.set(function setterFn() {\n        myObj.otherProp = \"baz\";\n      });\n      stub.restore();\n      myObj.prop = \"foo\";\n      assert.equals(myObj.otherProp, \"bar\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows stubbing property descriptor values","suites":["stub",".value"],"updatePoint":{"line":2667,"column":50,"index":90566},"line":2667,"code":"    it(\"allows stubbing property descriptor values\", function () {\n      const myObj = {\n        prop: \"rawString\"\n      };\n      createStub(myObj, \"prop\").value(\"newString\");\n      assert.equals(myObj.prop, \"newString\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows restoring stubbed property descriptor values","suites":["stub",".value"],"updatePoint":{"line":2674,"column":59,"index":90805},"line":2674,"code":"    it(\"allows restoring stubbed property descriptor values\", function () {\n      const myObj = {\n        prop: \"rawString\"\n      };\n      const stub = createStub(myObj, \"prop\").value(\"newString\");\n      stub.restore();\n      assert.equals(myObj.prop, \"rawString\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows stubbing function static properties","suites":["stub",".value"],"updatePoint":{"line":2682,"column":50,"index":91070},"line":2682,"code":"    it(\"allows stubbing function static properties\", function () {\n      const myFunc = function () {\n        return;\n      };\n      myFunc.prop = \"rawString\";\n      createStub(myFunc, \"prop\").value(\"newString\");\n      assert.equals(myFunc.prop, \"newString\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows restoring function static properties","suites":["stub",".value"],"updatePoint":{"line":2690,"column":51,"index":91339},"line":2690,"code":"    it(\"allows restoring function static properties\", function () {\n      const myFunc = function () {\n        return;\n      };\n      myFunc.prop = \"rawString\";\n      const stub = createStub(myFunc, \"prop\").value(\"newString\");\n      stub.restore();\n      assert.equals(myFunc.prop, \"rawString\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"allows stubbing object props with configurable false","suites":["stub",".value"],"updatePoint":{"line":2699,"column":60,"index":91652},"line":2699,"code":"    it(\"allows stubbing object props with configurable false\", function () {\n      const myObj = {};\n      Object.defineProperty(myObj, \"prop\", {\n        configurable: false,\n        enumerable: true,\n        writable: true,\n        value: \"static\"\n      });\n      createStub(myObj, \"prop\").value(\"newString\");\n      assert.equals(myObj.prop, \"newString\");\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should start with 'stub#'","suites":["stub",".id"],"updatePoint":{"line":2712,"column":33,"index":92028},"line":2712,"code":"    it(\"should start with 'stub#'\", function () {\n      for (let i = 0; i < 10; i++) {\n        assert.isTrue(createStub().id.indexOf(\"stub#\") === 0);\n      }\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"is delegated to proxy","suites":["stub",".printf"],"updatePoint":{"line":2719,"column":29,"index":92232},"line":2719,"code":"    it(\"is delegated to proxy\", function () {\n      const f = function () {\n        throw new Error(\"aError\");\n      };\n      const stub = createStub();\n      const proxy = createProxy(f, f);\n      assert.same(stub.printf, proxy.printf);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return the original method being stubbed","suites":["stub",".wrappedMethod"],"updatePoint":{"line":2729,"column":55,"index":92553},"line":2729,"code":"    it(\"should return the original method being stubbed\", function () {\n      const myFn = function () {\n        return \"foo\";\n      };\n      const myObj = {\n        fn: myFn\n      };\n      createStub(myObj, \"fn\");\n      assert.same(myFn, myObj.fn.wrappedMethod);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should not exist for accessors","suites":["stub",".wrappedMethod"],"updatePoint":{"line":2739,"column":38,"index":92808},"line":2739,"code":"    it(\"should not exist for accessors\", function () {\n      const myObj = {\n        get prop() {\n          return \"foo\";\n        }\n      };\n      createStub(myObj, \"prop\").get(function () {\n        return \"bar\";\n      });\n      assert.isUndefined(myObj.prop.wrappedMethod);\n    });","file":"stub-test.js","skipped":false,"dir":"test"},{"name":"should return a colored string","suites":["color","when environment supports color"],"updatePoint":{"line":36,"column":42,"index":800},"line":36,"code":"        it(\"should return a colored string\", function () {\n          const string = \"lorem ipsum\";\n          const actual = color[method.name](string);\n          assert.contains(actual, `${method.code}m${string}`);\n        });","file":"util/core/color-test.js","skipped":false,"dir":"test"},{"name":"should return a regular string","suites":["color","when environment does not support color"],"updatePoint":{"line":58,"column":42,"index":1500},"line":58,"code":"        it(\"should return a regular string\", function () {\n          const string = \"lorem ipsum\";\n          const actual = color[method.name](string);\n          assert.equals(actual, string);\n        });","file":"util/core/color-test.js","skipped":false,"dir":"test"},{"name":"should create an async version","suites":["util/core/exportAsyncBehaviors","for methods with names starting with 'callsArg' or 'yields'"],"updatePoint":{"line":8,"column":38,"index":368},"line":8,"code":"    it(\"should create an async version\", function () {\n      const methods = {\n        yieldsOn: function yieldsOn() {\n          return \"2\";\n        },\n        callsArg: function callsArg() {\n          return \"3\";\n        }\n      };\n      assert.equals(Object.keys(exportAsyncBehaviors(methods)), [\"yieldsOnAsync\", \"callsArgAsync\"]);\n    });","file":"util/core/export-async-behaviors-test.js","skipped":false,"dir":"test"},{"name":"should not add any new methods","suites":["util/core/exportAsyncBehaviors","for methods with names not starting with 'callsArg' or 'yields'"],"updatePoint":{"line":21,"column":38,"index":808},"line":21,"code":"    it(\"should not add any new methods\", function () {\n      const methods = {\n        callsFake: function callsFake() {\n          return \"1\";\n        },\n        resolvesThisAsync: function resolvesThisAsync() {\n          return \"4\";\n        }\n      };\n      assert.equals(Object.keys(exportAsyncBehaviors(methods)), []);\n    });","file":"util/core/export-async-behaviors-test.js","skipped":false,"dir":"test"},{"name":"returns function's displayName property","suites":["util/core/functionToString"],"updatePoint":{"line":8,"column":45,"index":328},"line":8,"code":"  it(\"returns function's displayName property\", function () {\n    const fn = function () {\n      return;\n    };\n    fn.displayName = \"Larry\";\n    assert.equals(functionToString.call(fn), \"Larry\");\n  });","file":"util/core/function-to-string-test.js","skipped":false,"dir":"test"},{"name":"guesses name from last call's this object","suites":["util/core/functionToString"],"updatePoint":{"line":15,"column":47,"index":533},"line":15,"code":"  it(\"guesses name from last call's this object\", function () {\n    const obj = {};\n    obj.doStuff = createSpy();\n    obj.doStuff.call({});\n    obj.doStuff();\n    assert.equals(functionToString.call(obj.doStuff), \"doStuff\");\n  });","file":"util/core/function-to-string-test.js","skipped":false,"dir":"test"},{"name":"guesses name from any call where property can be located","suites":["util/core/functionToString"],"updatePoint":{"line":22,"column":62,"index":780},"line":22,"code":"  it(\"guesses name from any call where property can be located\", function () {\n    const obj = {};\n    const otherObj = {\n      id: 42\n    };\n    obj.doStuff = createSpy();\n    obj.doStuff.call({});\n    obj.doStuff();\n    obj.doStuff.call(otherObj);\n    assert.equals(functionToString.call(obj.doStuff), \"doStuff\");\n  });","file":"util/core/function-to-string-test.js","skipped":false,"dir":"test"},{"name":"ignores errors thrown by property accessors on thisValue","suites":["util/core/functionToString"],"updatePoint":{"line":35,"column":62,"index":1153},"line":35,"code":"  it(\"ignores errors thrown by property accessors on thisValue\", function () {\n    const obj = {};\n    Object.defineProperty(obj, \"foo\", {\n      enumerable: true,\n      get: function () {\n        throw new Error();\n      }\n    });\n\n    // this will cause `fn` to be after `foo` when enumerated\n    obj.fn = function () {\n      return \"foo\";\n    };\n\n    // validate that the keys are in the expected order that will cause the bug\n    const keys = Object.keys(obj);\n    assert.equals(keys[0], \"foo\");\n    assert.equals(keys[1], \"fn\");\n    const spy = createSpy(obj, \"fn\");\n    obj.fn();\n    assert.equals(spy.toString(), \"fn\");\n  });","file":"util/core/function-to-string-test.js","skipped":false,"dir":"test"},{"name":"gets copy of default config","suites":["core/util/getConfig",".getConfig"],"updatePoint":{"line":10,"column":35,"index":368},"line":10,"code":"    it(\"gets copy of default config\", function () {\n      const config = getConfig();\n      refute.same(config, defaultConfig);\n      assert.equals(config.injectInto, defaultConfig.injectInto);\n      assert.equals(config.properties, defaultConfig.properties);\n      assert.equals(config.useFakeTimers, defaultConfig.useFakeTimers);\n      assert.equals(config.useFakeServer, defaultConfig.useFakeServer);\n    });","file":"util/core/get-config-test.js","skipped":false,"dir":"test"},{"name":"should override specified properties","suites":["core/util/getConfig",".getConfig"],"updatePoint":{"line":18,"column":44,"index":789},"line":18,"code":"    it(\"should override specified properties\", function () {\n      const config = getConfig({\n        properties: [\"stub\", \"mock\"],\n        useFakeServer: false\n      });\n      refute.same(config, defaultConfig);\n      assert.equals(config.injectInto, defaultConfig.injectInto);\n      assert.equals(config.properties, [\"stub\", \"mock\"]);\n      assert.equals(config.useFakeTimers, defaultConfig.useFakeTimers);\n      assert.isFalse(config.useFakeServer);\n    });","file":"util/core/get-config-test.js","skipped":false,"dir":"test"},{"name":"should use process.nextTick when available","suites":["util/core/get-next-tick"],"updatePoint":{"line":7,"column":48,"index":265},"line":7,"code":"  it(\"should use process.nextTick when available\", function () {\n    const mockProcess = {\n      nextTick: function () {\n        return;\n      }\n    };\n    assert.same(getNextTick(mockProcess), mockProcess.nextTick);\n  });","file":"util/core/get-next-tick-test.js","skipped":false,"dir":"test"},{"name":"should use setImmediate when process.nextTick is not available","suites":["util/core/get-next-tick"],"updatePoint":{"line":15,"column":68,"index":508},"line":15,"code":"  it(\"should use setImmediate when process.nextTick is not available\", function () {\n    function mockSetImmediate() {\n      return;\n    }\n    assert.same(getNextTick(undefined, mockSetImmediate), mockSetImmediate);\n  });","file":"util/core/get-next-tick-test.js","skipped":false,"dir":"test"},{"name":"should fallback to setTimeout","suites":["util/core/get-next-tick"],"updatePoint":{"line":21,"column":35,"index":697},"line":21,"code":"  it(\"should fallback to setTimeout\", function () {\n    const nextTick = getNextTick(undefined, undefined);\n    assert.isFunction(nextTick);\n    assert.contains(String(nextTick), \"setTimeout(\");\n  });","file":"util/core/get-next-tick-test.js","skipped":false,"dir":"test"},{"name":"should use fallback","suites":["util/core/next-tick","browser environment"],"updatePoint":{"line":15,"column":27,"index":538},"line":15,"code":"    it(\"should use fallback\", function () {\n      assert.isFunction(nextTick);\n      assert.contains(String(nextTick), \"setTimeout(\");\n    });","file":"util/core/next-tick-test.js","skipped":false,"dir":"test"},{"name":"should use process.nextTick","suites":["util/core/next-tick","modern node environment"],"updatePoint":{"line":26,"column":35,"index":835},"line":26,"code":"    it(\"should use process.nextTick\", function () {\n      assert.same(nextTick, process.nextTick);\n    });","file":"util/core/next-tick-test.js","skipped":false,"dir":"test"},{"name":"should use setImmediate","suites":["util/core/next-tick","old node environment"],"updatePoint":{"line":36,"column":31,"index":1100},"line":36,"code":"    it(\"should use setImmediate\", function () {\n      assert.same(nextTick, setImmediate);\n    });","file":"util/core/next-tick-test.js","skipped":false,"dir":"test"},{"name":"should return \"once\" for input of 1","suites":["util/core/timesInWords"],"updatePoint":{"line":7,"column":41,"index":259},"line":7,"code":"  it('should return \"once\" for input of 1', function () {\n    const result = timesInWords(1);\n    assert.equals(result, \"once\");\n  });","file":"util/core/times-in-words-test.js","skipped":false,"dir":"test"},{"name":"should return \"twice\" for input of 2","suites":["util/core/timesInWords"],"updatePoint":{"line":11,"column":42,"index":395},"line":11,"code":"  it('should return \"twice\" for input of 2', function () {\n    const result = timesInWords(2);\n    assert.equals(result, \"twice\");\n  });","file":"util/core/times-in-words-test.js","skipped":false,"dir":"test"},{"name":"should return \"thrice\" for input of 3","suites":["util/core/timesInWords"],"updatePoint":{"line":15,"column":43,"index":533},"line":15,"code":"  it('should return \"thrice\" for input of 3', function () {\n    const result = timesInWords(3);\n    assert.equals(result, \"thrice\");\n  });","file":"util/core/times-in-words-test.js","skipped":false,"dir":"test"},{"name":"should return \"n times\" for n larger than 3","suites":["util/core/timesInWords"],"updatePoint":{"line":19,"column":49,"index":678},"line":19,"code":"  it('should return \"n times\" for n larger than 3', function () {\n    let result, i;\n    for (i = 4; i < 100; i++) {\n      result = timesInWords(i);\n      assert.equals(result, `${i} times`);\n    }\n  });","file":"util/core/times-in-words-test.js","skipped":false,"dir":"test"},{"name":"should return \"0 times\" for falsy input","suites":["util/core/timesInWords"],"updatePoint":{"line":26,"column":45,"index":878},"line":26,"code":"  it('should return \"0 times\" for falsy input', function () {\n    const falsies = [0, NaN, null, false, undefined, \"\"];\n    let result, i;\n    for (i = 0; i < falsies.length; i++) {\n      result = timesInWords(falsies[i]);\n      assert.equals(result, \"0 times\");\n    }\n  });","file":"util/core/times-in-words-test.js","skipped":false,"dir":"test"},{"name":"should still identify functions in environments","suites":["util/core/walk-object","without function.name support"],"updatePoint":{"line":25,"column":55,"index":893},"line":25,"code":"    it(\"should still identify functions in environments\", function () {\n      assert.exception(function () {\n        walkObject(fnWithNoName, false);\n      }, {\n        message: \"Trying to fnWithNoName object but received false\"\n      });\n      assert.exception(function () {\n        walkObject(fnWithNoName, {});\n      }, {\n        message: \"Found no methods on object to which we could apply mutations\"\n      });\n    });","file":"util/core/walk-object-test.js","skipped":false,"dir":"test"},{"name":"should work with anonymous functions","suites":["util/core/walk-object","without function.name support"],"updatePoint":{"line":37,"column":44,"index":1305},"line":37,"code":"    it(\"should work with anonymous functions\", function () {\n      assert.exception(function () {\n        walkObject(anonymousFn, false);\n      }, {\n        message: \"Trying to undefined object but received false\"\n      });\n      assert.exception(function () {\n        walkObject(anonymousFn, {});\n      }, {\n        message: \"Found no methods on object to which we could apply mutations\"\n      });\n    });","file":"util/core/walk-object-test.js","skipped":false,"dir":"test"},{"name":"should call iterator with value, key, and obj, with context as the receiver","suites":["util/core/walk"],"updatePoint":{"line":8,"column":81,"index":326},"line":8,"code":"  it(\"should call iterator with value, key, and obj, with context as the receiver\", function () {\n    const target = Object.create(null);\n    const rcvr = {};\n    const iterator = createSpy();\n    target.hello = \"world\";\n    target.foo = 15;\n    walk(target, iterator, rcvr);\n    assert(iterator.calledTwice);\n    assert(iterator.alwaysCalledOn(rcvr));\n    assert(iterator.calledWithExactly(\"hello\", target));\n    assert(iterator.calledWithExactly(\"foo\", target));\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"should work with non-enumerable properties","suites":["util/core/walk"],"updatePoint":{"line":20,"column":48,"index":764},"line":20,"code":"  it(\"should work with non-enumerable properties\", function () {\n    const target = Object.create(null);\n    const iterator = createSpy();\n    target.hello = \"world\";\n    Object.defineProperty(target, \"foo\", {\n      value: 15\n    });\n    walk(target, iterator);\n    assert(iterator.calledTwice);\n    assert(iterator.calledWith(\"hello\"));\n    assert(iterator.calledWith(\"foo\"));\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"should walk the prototype chain of an object","suites":["util/core/walk"],"updatePoint":{"line":32,"column":50,"index":1150},"line":32,"code":"  it(\"should walk the prototype chain of an object\", function () {\n    const parentProto = Object.create(null, {\n      nonEnumerableParentProp: {\n        value: \"non-enumerable parent prop\"\n      },\n      enumerableParentProp: {\n        value: \"enumerable parent prop\",\n        enumerable: true\n      }\n    });\n    const proto = Object.create(parentProto, {\n      nonEnumerableProp: {\n        value: \"non-enumerable prop\"\n      },\n      enumerableProp: {\n        value: \"enumerable prop\",\n        enumerable: true\n      }\n    });\n    const target = Object.create(proto, {\n      nonEnumerableOwnProp: {\n        value: \"non-enumerable own prop\"\n      },\n      enumerableOwnProp: {\n        value: \"enumerable own prop\",\n        enumerable: true\n      }\n    });\n    const iterator = createSpy();\n    walk(target, iterator);\n    assert.equals(iterator.callCount, 6);\n    assert(iterator.calledWith(\"nonEnumerableOwnProp\", target));\n    assert(iterator.calledWith(\"enumerableOwnProp\", target));\n    assert(iterator.calledWith(\"nonEnumerableProp\", proto));\n    assert(iterator.calledWith(\"enumerableProp\", proto));\n    assert(iterator.calledWith(\"nonEnumerableParentProp\", parentProto));\n    assert(iterator.calledWith(\"enumerableParentProp\", parentProto));\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"should not invoke getters on the original receiving object","suites":["util/core/walk"],"updatePoint":{"line":70,"column":64,"index":2421},"line":70,"code":"  it(\"should not invoke getters on the original receiving object\", function () {\n    const Target = function Target() {\n      return;\n    };\n    const getter = createSpy();\n    Object.defineProperty(Target.prototype, \"computedFoo\", {\n      enumerable: true,\n      get: getter\n    });\n    const target = new Target();\n    const iterator = createSpy();\n    walk(target, iterator);\n    assert(iterator.calledWith(\"computedFoo\", target));\n    assert(getter.notCalled);\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"should fall back to for..in if getOwnPropertyNames is not available","suites":["util/core/walk"],"updatePoint":{"line":85,"column":73,"index":2901},"line":85,"code":"  it(\"should fall back to for..in if getOwnPropertyNames is not available\", function () {\n    const getOwnPropertyNames = Object.getOwnPropertyNames;\n    const Target = function Target() {\n      this.hello = \"world\";\n    };\n    const target = new Target();\n    const rcvr = {};\n    const iterator = createSpy();\n    let err = null;\n    let numCalls = 0;\n    let placeholder;\n    Target.prototype.foo = 15;\n    Object.getOwnPropertyNames = null;\n\n    // Different environments may be inconsistent in how they handle for..in, therefore we\n    // use it to track the number of expected calls, rather than setting it to a hard\n    // number.\n    /* eslint-disable guard-for-in, no-unused-vars */\n    for (placeholder in target) {\n      numCalls++;\n    }\n    /* eslint-enable guard-for-in, no-unused-vars */\n\n    // eslint-disable-next-line no-restricted-syntax\n    try {\n      walk(target, iterator, rcvr);\n      assert.equals(iterator.callCount, numCalls);\n      assert(iterator.alwaysCalledOn(rcvr));\n      assert(iterator.calledWith(\"world\", \"hello\"));\n      assert(iterator.calledWith(15, \"foo\"));\n    } catch (e) {\n      err = e;\n    } finally {\n      Object.getOwnPropertyNames = getOwnPropertyNames;\n    }\n    assert.isNull(err, `walk tests failed with message '${err && err.message}'`);\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"does not walk the same property twice","suites":["util/core/walk"],"updatePoint":{"line":122,"column":43,"index":4168},"line":122,"code":"  it(\"does not walk the same property twice\", function () {\n    const parent = {\n      func: function parentFunc() {\n        return;\n      }\n    };\n    const child = Object.create(parent);\n    child.func = function childFunc() {\n      return;\n    };\n    const iterator = createSpy();\n    walk(child, iterator);\n    const propertyNames = iterator.args.map(function (call) {\n      return call[0];\n    });\n\n    // make sure that each property name only exists once\n    propertyNames.forEach(function (name, index) {\n      assert.equals(index, propertyNames.lastIndexOf(name));\n    });\n  });","file":"util/core/walk-test.js","skipped":false,"dir":"test"},{"name":"is function","suites":["util/core/wrapMethod"],"updatePoint":{"line":29,"column":17,"index":746},"line":29,"code":"  it(\"is function\", function () {\n    assert.isFunction(wrapMethod);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if first argument is not object","suites":["util/core/wrapMethod"],"updatePoint":{"line":32,"column":44,"index":848},"line":32,"code":"  it(\"throws if first argument is not object\", function () {\n    assert.exception(function () {\n      wrapMethod();\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if object defines property but is not function","suites":["util/core/wrapMethod"],"updatePoint":{"line":39,"column":59,"index":1026},"line":39,"code":"  it(\"throws if object defines property but is not function\", function () {\n    this.object.prop = 42;\n    const object = this.object;\n    assert.exception(function () {\n      wrapMethod(object, \"prop\", function () {\n        return;\n      });\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws Symbol() if object defines property but is not function","suites":["util/core/wrapMethod"],"updatePoint":{"line":50,"column":68,"index":1325},"line":50,"code":"  it(\"throws Symbol() if object defines property but is not function\", function () {\n    if (typeof Symbol !== \"function\") {\n      this.skip();\n    }\n    const symbol = Symbol(\"apple pie\");\n    const object = {};\n    object[symbol] = 42;\n    assert.exception(function () {\n      wrapMethod(object, symbol, function () {\n        return;\n      });\n    }, function (err) {\n      return err.message === \"Attempted to wrap number property Symbol(apple pie) as function\";\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if object does not define property","suites":["util/core/wrapMethod"],"updatePoint":{"line":65,"column":47,"index":1784},"line":65,"code":"  it(\"throws if object does not define property\", function () {\n    const object = this.object;\n    assert.exception(function () {\n      wrapMethod(object, \"prop\", function () {\n        return;\n      });\n    });\n    assert.exception(function () {\n      wrapMethod(object, \"prop\", function () {\n        return;\n      });\n    }, {\n      message: /Attempted to wrap .* property .* as function/\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if third argument is missing","suites":["util/core/wrapMethod"],"updatePoint":{"line":80,"column":41,"index":2183},"line":80,"code":"  it(\"throws if third argument is missing\", function () {\n    const object = this.object;\n    assert.exception(function () {\n      wrapMethod(object, \"method\");\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if third argument is not a function or a property descriptor","suites":["util/core/wrapMethod"],"updatePoint":{"line":88,"column":73,"index":2423},"line":88,"code":"  it(\"throws if third argument is not a function or a property descriptor\", function () {\n    const object = this.object;\n    assert.exception(function () {\n      wrapMethod(object, \"method\", 1);\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"replaces object method","suites":["util/core/wrapMethod"],"updatePoint":{"line":96,"column":28,"index":2621},"line":96,"code":"  it(\"replaces object method\", function () {\n    wrapMethod(this.object, \"method\", function () {\n      return;\n    });\n    refute.same(this.method, this.object.method);\n    assert.isFunction(this.object.method);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"replaces getter","suites":["util/core/wrapMethod"],"updatePoint":{"line":103,"column":21,"index":2832},"line":103,"code":"  it(\"replaces getter\", function () {\n    wrapMethod(this.object, \"property\", {\n      get: function () {\n        return;\n      }\n    });\n    refute.same(this.getter, Object.getOwnPropertyDescriptor(this.object, \"property\").get);\n    assert.isFunction(Object.getOwnPropertyDescriptor(this.object, \"property\").get);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"replaces setter","suites":["util/core/wrapMethod"],"updatePoint":{"line":112,"column":21,"index":3152},"line":112,"code":"  it(\"replaces setter\", function () {\n    wrapMethod(this.object, \"property\", {\n      // eslint-disable-line accessor-pairs\n      set: function () {\n        return;\n      }\n    });\n    refute.same(this.setter, Object.getOwnPropertyDescriptor(this.object, \"property\").set);\n    assert.isFunction(Object.getOwnPropertyDescriptor(this.object, \"property\").set);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if method is already wrapped","suites":["util/core/wrapMethod"],"updatePoint":{"line":122,"column":41,"index":3536},"line":122,"code":"  it(\"throws if method is already wrapped\", function () {\n    wrapMethod(this.object, \"method\", function () {\n      return;\n    });\n    assert.exception(function () {\n      wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws Symbol if method is already wrapped","suites":["util/core/wrapMethod"],"updatePoint":{"line":134,"column":48,"index":3837},"line":134,"code":"  it(\"throws Symbol if method is already wrapped\", function () {\n    if (typeof Symbol !== \"function\") {\n      this.skip();\n    }\n    const symbol = Symbol(\"apple pie\");\n    const object = {};\n    object[symbol] = function () {\n      return;\n    };\n    wrapMethod(object, symbol, function () {\n      return;\n    });\n    assert.exception(function () {\n      wrapMethod(object, symbol, function () {\n        return;\n      });\n    }, function (err) {\n      return err.message === \"Attempted to wrap Symbol(apple pie) which is already wrapped\";\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if property descriptor is already wrapped","suites":["util/core/wrapMethod"],"updatePoint":{"line":154,"column":54,"index":4398},"line":154,"code":"  it(\"throws if property descriptor is already wrapped\", function () {\n    wrapMethod(this.object, \"property\", {\n      get: function () {\n        return;\n      }\n    });\n    assert.exception(function () {\n      wrapMethod(this.object, \"property\", {\n        get: function () {\n          return;\n        }\n      });\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if method is already a spy","suites":["util/core/wrapMethod"],"updatePoint":{"line":170,"column":39,"index":4744},"line":170,"code":"  it(\"throws if method is already a spy\", function () {\n    const object = {\n      method: createSpy()\n    };\n    assert.exception(function () {\n      wrapMethod(object, \"method\", function () {\n        return;\n      });\n    }, {\n      name: \"TypeError\"\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if Symbol method is already a spy","suites":["util/core/wrapMethod"],"updatePoint":{"line":182,"column":46,"index":5018},"line":182,"code":"  it(\"throws if Symbol method is already a spy\", function () {\n    if (typeof Symbol !== \"function\") {\n      this.skip();\n    }\n    const symbol = Symbol(\"apple pie\");\n    const object = {};\n    object[symbol] = createSpy();\n    assert.exception(function () {\n      wrapMethod(object, symbol, function () {\n        return;\n      });\n    }, function (err) {\n      return err.message === \"Attempted to wrap Symbol(apple pie) which is already spied on\";\n    });\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws with stack trace showing original wrapMethod call","suites":["util/core/wrapMethod","originating stack traces"],"updatePoint":{"line":214,"column":64,"index":6077},"line":214,"code":"    it(\"throws with stack trace showing original wrapMethod call\", function () {\n      const object = {\n        method: function () {\n          return;\n        }\n      };\n      wrapMethod(object, \"method\", function () {\n        return \"original\";\n      });\n      assert.exception(function () {\n        wrapMethod(object, \"method\", function () {\n          return;\n        });\n      }, {\n        stack: \":STACK2:\\n--------------\\n:STACK1:\"\n      });\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"does not throw if object is window object","suites":["util/core/wrapMethod","in browser"],"updatePoint":{"line":238,"column":49,"index":6668},"line":238,"code":"    it(\"does not throw if object is window object\", function () {\n      window.sinonTestMethod = function () {\n        return;\n      };\n      refute.exception(function () {\n        wrapMethod(window, \"sinonTestMethod\", function () {\n          return;\n        });\n      });\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"mirrors function properties","suites":["util/core/wrapMethod","in browser"],"updatePoint":{"line":249,"column":33,"index":6939},"line":249,"code":"  it(\"mirrors function properties\", function () {\n    const object = {\n      method: function () {\n        return;\n      }\n    };\n    object.method.prop = 42;\n    wrapMethod(object, \"method\", function () {\n      return;\n    });\n    assert.equals(object.method.prop, 42);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"does not mirror and overwrite existing properties","suites":["util/core/wrapMethod","in browser"],"updatePoint":{"line":261,"column":55,"index":7238},"line":261,"code":"  it(\"does not mirror and overwrite existing properties\", function () {\n    const object = {\n      method: function () {\n        return;\n      }\n    };\n    object.method.called = 42;\n    createStub(object, \"method\");\n    assert.isFalse(object.method.called);\n  });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"defines restore method","suites":["util/core/wrapMethod","wrapped method"],"updatePoint":{"line":280,"column":30,"index":7676},"line":280,"code":"    it(\"defines restore method\", function () {\n      wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n      assert.isFunction(this.object.method.restore);\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"returns wrapper","suites":["util/core/wrapMethod","wrapped method"],"updatePoint":{"line":286,"column":23,"index":7857},"line":286,"code":"    it(\"returns wrapper\", function () {\n      const wrapper = wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n      assert.same(this.object.method, wrapper);\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"restore brings back original method","suites":["util/core/wrapMethod","wrapped method"],"updatePoint":{"line":292,"column":43,"index":8069},"line":292,"code":"    it(\"restore brings back original method\", function () {\n      wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n      this.object.method.restore();\n      assert.same(this.object.method, this.method);\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"wrap adds owned property","suites":["util/core/wrapMethod","wrapped prototype method"],"updatePoint":{"line":311,"column":32,"index":8589},"line":311,"code":"    it(\"wrap adds owned property\", function () {\n      const wrapper = wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n      assert.same(this.object.method, wrapper);\n      assert(this.object.hasOwnProperty(\"method\"));\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"restore removes owned property","suites":["util/core/wrapMethod","wrapped prototype method"],"updatePoint":{"line":318,"column":38,"index":8848},"line":318,"code":"    it(\"restore removes owned property\", function () {\n      wrapMethod(this.object, \"method\", function () {\n        return;\n      });\n      this.object.method.restore();\n      assert.same(this.object.method, this.type.prototype.method);\n      assert.isFalse(this.object.hasOwnProperty(\"method\"));\n    });","file":"util/core/wrap-method-test.js","skipped":false,"dir":"test"},{"name":"throws if no arguments","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":42,"column":30,"index":1440},"line":42,"code":"    it(\"throws if no arguments\", function () {\n      const clock = this.clock;\n      assert.exception(function () {\n        clock.setTimeout();\n      });\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns a timer id whose primitive representation is a number","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":48,"column":69,"index":1641},"line":48,"code":"    it(\"returns a timer id whose primitive representation is a number\", function () {\n      // eslint-disable-next-line no-empty-function\n      const noop = function () {};\n      const result = this.clock.setTimeout(noop);\n      assert.isNumber(Number(result));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns unique id","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":54,"column":25,"index":1867},"line":54,"code":"    it(\"returns unique id\", function () {\n      // eslint-disable-next-line no-empty-function\n      const noop = function () {};\n      const id1 = this.clock.setTimeout(noop);\n      const id2 = this.clock.setTimeout(noop);\n      refute.equals(id2, id1);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"sets timers on instance","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":61,"column":31,"index":2135},"line":61,"code":"    it(\"sets timers on instance\", function () {\n      const clock1 = fakeTimers.clock.create();\n      const clock2 = fakeTimers.clock.create();\n      const stubs = [sinonStub(), sinonStub()];\n      clock1.setTimeout(stubs[0], 100);\n      clock2.setTimeout(stubs[1], 100);\n      clock2.tick(200);\n      assert.isFalse(stubs[0].called);\n      assert(stubs[1].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws on non-function callbacks","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":72,"column":42,"index":2553},"line":72,"code":"      it(\"throws on non-function callbacks\", function () {\n        const string = \"apple pie\";\n        assert.exception(function () {\n          this.clock.setTimeout(string, 10);\n        }.bind(this), {\n          message: \"[ERR_INVALID_CALLBACK]: Callback must be a function. Received apple pie of type string\"\n        });\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes setTimeout parameters","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":81,"column":36,"index":2886},"line":81,"code":"    it(\"passes setTimeout parameters\", function () {\n      const clock = fakeTimers.clock.create();\n      const stub = sinonStub();\n      clock.setTimeout(stub, 2, \"the first\", \"the second\");\n      clock.tick(3);\n      assert.isTrue(stub.calledWithExactly(\"the first\", \"the second\"));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"calls correct timeout on recursive tick","suites":["fakeTimers.clock",".setTimeout"],"updatePoint":{"line":88,"column":47,"index":3190},"line":88,"code":"    it(\"calls correct timeout on recursive tick\", function () {\n      const clock = fakeTimers.clock.create();\n      const stub = sinonStub();\n      const recurseCallback = function () {\n        clock.tick(100);\n      };\n      clock.setTimeout(recurseCallback, 50);\n      clock.setTimeout(stub, 100);\n      clock.tick(50);\n      assert(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns a timer whose primitive representation is a number","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":105,"column":68,"index":3746},"line":105,"code":"      it(\"returns a timer whose primitive representation is a number\", function () {\n        const result = this.clock.setImmediate(function () {\n          return;\n        });\n        assert.isNumber(Number(result));\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"calls the given callback immediately","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":111,"column":46,"index":3951},"line":111,"code":"      it(\"calls the given callback immediately\", function () {\n        const stub = sinonStub();\n        this.clock.setImmediate(stub);\n        this.clock.tick(0);\n        assert(stub.called);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws if no arguments","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":117,"column":32,"index":4140},"line":117,"code":"      it(\"throws if no arguments\", function () {\n        const clock = this.clock;\n        assert.exception(function () {\n          clock.setImmediate();\n        });\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"manages separate timers per clock instance","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":123,"column":52,"index":4336},"line":123,"code":"      it(\"manages separate timers per clock instance\", function () {\n        const clock1 = fakeTimers.clock.create();\n        const clock2 = fakeTimers.clock.create();\n        const stubs = [sinonStub(), sinonStub()];\n        clock1.setImmediate(stubs[0]);\n        clock2.setImmediate(stubs[1]);\n        clock2.tick(0);\n        assert.isFalse(stubs[0].called);\n        assert(stubs[1].called);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes extra parameters through to the callback","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":133,"column":57,"index":4746},"line":133,"code":"      it(\"passes extra parameters through to the callback\", function () {\n        const stub = sinonStub();\n        this.clock.setImmediate(stub, \"value1\", 2);\n        this.clock.tick(1);\n        assert(stub.calledWithExactly(\"value1\", 2));\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"shouldn't install setImmediate","suites":["fakeTimers.clock",".setImmediate"],"updatePoint":{"line":140,"column":40,"index":4993},"line":140,"code":"      it(\"shouldn't install setImmediate\", function () {\n        refute.isFunction(this.clock.setImmediate);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"removes immediate callbacks","suites":["fakeTimers.clock",".clearImmediate"],"updatePoint":{"line":150,"column":37,"index":5296},"line":150,"code":"      it(\"removes immediate callbacks\", function () {\n        const callback = sinonStub();\n        const id = this.clock.setImmediate(callback);\n        this.clock.clearImmediate(id);\n        this.clock.tick(1);\n        assert.isFalse(callback.called);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"shouldn't install clearImmediate","suites":["fakeTimers.clock",".clearImmediate"],"updatePoint":{"line":158,"column":42,"index":5578},"line":158,"code":"      it(\"shouldn't install clearImmediate\", function () {\n        refute.isFunction(this.clock.clearImmediate);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers immediately without specified delay","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":170,"column":52,"index":5906},"line":170,"code":"    it(\"triggers immediately without specified delay\", function () {\n      const stub = sinonStub();\n      this.clock.setTimeout(stub);\n      this.clock.tick(0);\n      assert(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not trigger without sufficient delay","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":176,"column":49,"index":6100},"line":176,"code":"    it(\"does not trigger without sufficient delay\", function () {\n      const stub = sinonStub();\n      this.clock.setTimeout(stub, 100);\n      this.clock.tick(10);\n      assert.isFalse(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers after sufficient delay","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":182,"column":39,"index":6298},"line":182,"code":"    it(\"triggers after sufficient delay\", function () {\n      const stub = sinonStub();\n      this.clock.setTimeout(stub, 100);\n      this.clock.tick(100);\n      assert(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers simultaneous timers","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":188,"column":36,"index":6486},"line":188,"code":"    it(\"triggers simultaneous timers\", function () {\n      const spies = [sinonSpy(), sinonSpy()];\n      this.clock.setTimeout(spies[0], 100);\n      this.clock.setTimeout(spies[1], 100);\n      this.clock.tick(100);\n      assert(spies[0].called);\n      assert(spies[1].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers multiple simultaneous timers","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":196,"column":45,"index":6780},"line":196,"code":"    it(\"triggers multiple simultaneous timers\", function () {\n      const spies = [sinonSpy(), sinonSpy(), sinonSpy(), sinonSpy()];\n      this.clock.setTimeout(spies[0], 100);\n      this.clock.setTimeout(spies[1], 100);\n      this.clock.setTimeout(spies[2], 99);\n      this.clock.setTimeout(spies[3], 100);\n      this.clock.tick(100);\n      assert(spies[0].called);\n      assert(spies[1].called);\n      assert(spies[2].called);\n      assert(spies[3].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers multiple simultaneous timers with zero callAt","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":208,"column":62,"index":7264},"line":208,"code":"    it(\"triggers multiple simultaneous timers with zero callAt\", function () {\n      const test = this;\n      const spies = [sinonSpy(function () {\n        test.clock.setTimeout(spies[1], 0);\n      }), sinonSpy(), sinonSpy()];\n\n      // First spy calls another setTimeout with delay=0\n      this.clock.setTimeout(spies[0], 0);\n      this.clock.setTimeout(spies[2], 10);\n      this.clock.tick(10);\n      assert(spies[0].called);\n      assert(spies[1].called);\n      assert(spies[2].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"waits after setTimeout was called","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":222,"column":41,"index":7741},"line":222,"code":"    it(\"waits after setTimeout was called\", function () {\n      this.clock.tick(100);\n      const stub = sinonStub();\n      this.clock.setTimeout(stub, 150);\n      this.clock.tick(50);\n      assert.isFalse(stub.called);\n      this.clock.tick(100);\n      assert(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mini integration test","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":231,"column":29,"index":8012},"line":231,"code":"    it(\"mini integration test\", function () {\n      const stubs = [sinonStub(), sinonStub(), sinonStub()];\n      this.clock.setTimeout(stubs[0], 100);\n      this.clock.setTimeout(stubs[1], 120);\n      this.clock.tick(10);\n      this.clock.tick(89);\n      assert.isFalse(stubs[0].called);\n      assert.isFalse(stubs[1].called);\n      this.clock.setTimeout(stubs[2], 20);\n      this.clock.tick(1);\n      assert(stubs[0].called);\n      assert.isFalse(stubs[1].called);\n      assert.isFalse(stubs[2].called);\n      this.clock.tick(19);\n      assert.isFalse(stubs[1].called);\n      assert(stubs[2].called);\n      this.clock.tick(1);\n      assert(stubs[1].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers even when some throw","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":250,"column":37,"index":8687},"line":250,"code":"    it(\"triggers even when some throw\", function () {\n      const clock = this.clock;\n      const stubs = [sinonStub().throws(), sinonStub()];\n      clock.setTimeout(stubs[0], 100);\n      clock.setTimeout(stubs[1], 120);\n      assert.exception(function () {\n        clock.tick(120);\n      });\n      assert(stubs[0].called);\n      assert(stubs[1].called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"calls function with global object or null (strict mode) as this","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":261,"column":71,"index":9084},"line":261,"code":"    it(\"calls function with global object or null (strict mode) as this\", function () {\n      const clock = this.clock;\n      const stub = sinonStub().throws();\n      clock.setTimeout(stub, 100);\n      assert.exception(function () {\n        clock.tick(100);\n      });\n      assert(stub.calledOn(this.global) || stub.calledOn(null));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers in the order scheduled","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":270,"column":39,"index":9393},"line":270,"code":"    it(\"triggers in the order scheduled\", function () {\n      const spies = [sinonSpy(), sinonSpy()];\n      this.clock.setTimeout(spies[0], 13);\n      this.clock.setTimeout(spies[1], 11);\n      this.clock.tick(15);\n      assert(spies[1].calledBefore(spies[0]));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates updated Date while ticking","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":277,"column":42,"index":9666},"line":277,"code":"    it(\"creates updated Date while ticking\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(function () {\n        spy(new Date().getTime());\n      }, 10);\n      this.clock.tick(100);\n      assert.equals(spy.callCount, 10);\n      assert(spy.calledWith(10));\n      assert(spy.calledWith(20));\n      assert(spy.calledWith(30));\n      assert(spy.calledWith(40));\n      assert(spy.calledWith(50));\n      assert(spy.calledWith(60));\n      assert(spy.calledWith(70));\n      assert(spy.calledWith(80));\n      assert(spy.calledWith(90));\n      assert(spy.calledWith(100));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fires timer in intervals of 13","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":295,"column":38,"index":10260},"line":295,"code":"    it(\"fires timer in intervals of 13\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 13);\n      this.clock.tick(500);\n      assert.equals(spy.callCount, 38);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fires timers in correct order","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":301,"column":37,"index":10459},"line":301,"code":"    it(\"fires timers in correct order\", function () {\n      this.timeout(5000);\n      const spy13 = sinonSpy();\n      const spy10 = sinonSpy();\n      this.clock.setInterval(function () {\n        spy13(new Date().getTime());\n      }, 13);\n      this.clock.setInterval(function () {\n        spy10(new Date().getTime());\n      }, 10);\n      this.clock.tick(500);\n      assert.equals(spy13.callCount, 38);\n      assert.equals(spy10.callCount, 50);\n      assert(spy13.calledWith(416));\n      assert(spy10.calledWith(320));\n      assert(spy10.getCall(0).calledBefore(spy13.getCall(0)));\n      assert(spy10.getCall(4).calledBefore(spy13.getCall(3)));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"triggers timeouts and intervals in the order scheduled","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":319,"column":62,"index":11136},"line":319,"code":"    it(\"triggers timeouts and intervals in the order scheduled\", function () {\n      const spies = [sinonSpy(), sinonSpy()];\n      this.clock.setInterval(spies[0], 10);\n      this.clock.setTimeout(spies[1], 50);\n      this.clock.tick(100);\n      assert(spies[0].calledBefore(spies[1]));\n      assert.equals(spies[0].callCount, 10);\n      assert.equals(spies[1].callCount, 1);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not fire canceled intervals","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":328,"column":40,"index":11498},"line":328,"code":"    it(\"does not fire canceled intervals\", function () {\n      // eslint-disable-next-line prefer-const\n      let id;\n      const callback = sinonSpy(function () {\n        if (callback.callCount === 3) {\n          clearInterval(id);\n        }\n      });\n      id = this.clock.setInterval(callback, 10);\n      this.clock.tick(100);\n      assert.equals(callback.callCount, 3);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes 6 seconds","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":340,"column":24,"index":11864},"line":340,"code":"    it(\"passes 6 seconds\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 4000);\n      this.clock.tick(\"08\");\n      assert.equals(spy.callCount, 2);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes 1 minute","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":346,"column":23,"index":12051},"line":346,"code":"    it(\"passes 1 minute\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 6000);\n      this.clock.tick(\"01:00\");\n      assert.equals(spy.callCount, 10);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes 2 hours, 34 minutes and 12 seconds","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":352,"column":49,"index":12268},"line":352,"code":"    it(\"passes 2 hours, 34 minutes and 12 seconds\", function () {\n      this.timeout(50000);\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 10000);\n      this.clock.tick(\"02:34:10\");\n      assert.equals(spy.callCount, 925);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws for invalid format","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":359,"column":33,"index":12501},"line":359,"code":"    it(\"throws for invalid format\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 10000);\n      const test = this;\n      assert.exception(function () {\n        test.clock.tick(\"12:02:34:10\");\n      });\n      assert.equals(spy.callCount, 0);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws for invalid minutes","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":368,"column":34,"index":12783},"line":368,"code":"    it(\"throws for invalid minutes\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 10000);\n      const test = this;\n      assert.exception(function () {\n        test.clock.tick(\"67:10\");\n      });\n      assert.equals(spy.callCount, 0);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws for negative minutes","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":377,"column":35,"index":13060},"line":377,"code":"    it(\"throws for negative minutes\", function () {\n      const spy = sinonSpy();\n      this.clock.setInterval(spy, 10000);\n      const test = this;\n      assert.exception(function () {\n        test.clock.tick(\"-7:10\");\n      });\n      assert.equals(spy.callCount, 0);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"treats missing argument as 0","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":386,"column":36,"index":13338},"line":386,"code":"    it(\"treats missing argument as 0\", function () {\n      this.clock.tick();\n      assert.equals(this.clock.now, 0);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fires nested setTimeout calls properly","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":390,"column":46,"index":13474},"line":390,"code":"    it(\"fires nested setTimeout calls properly\", function () {\n      let i = 0;\n      const clock = this.clock;\n      const callback = function () {\n        ++i;\n        clock.setTimeout(function () {\n          callback();\n        }, 100);\n      };\n      callback();\n      clock.tick(1000);\n      assert.equals(i, 11);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not silently catch exceptions","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":403,"column":42,"index":13797},"line":403,"code":"    it(\"does not silently catch exceptions\", function () {\n      const clock = this.clock;\n      clock.setTimeout(function () {\n        throw new Error(\"oh no!\");\n      }, 1000);\n      assert.exception(function () {\n        clock.tick(1000);\n      });\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns the current now value","suites":["fakeTimers.clock",".tick"],"updatePoint":{"line":412,"column":37,"index":14052},"line":412,"code":"    it(\"returns the current now value\", function () {\n      const clock = this.clock;\n      const value = clock.tick(200);\n      assert.equals(clock.now, value);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"removes timeout","suites":["fakeTimers.clock",".clearTimeout"],"updatePoint":{"line":422,"column":23,"index":14339},"line":422,"code":"    it(\"removes timeout\", function () {\n      const stub = sinonStub();\n      const id = this.clock.setTimeout(stub, 50);\n      this.clock.clearTimeout(id);\n      this.clock.tick(50);\n      assert.isFalse(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"ignores null argument","suites":["fakeTimers.clock",".clearTimeout"],"updatePoint":{"line":429,"column":29,"index":14572},"line":429,"code":"    it(\"ignores null argument\", function () {\n      this.clock.clearTimeout(null);\n      assert(true); // doesn't fail\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"empties timeouts queue","suites":["fakeTimers.clock",".reset"],"updatePoint":{"line":439,"column":30,"index":14825},"line":439,"code":"    it(\"empties timeouts queue\", function () {\n      const stub = sinonStub();\n      this.clock.setTimeout(stub);\n      this.clock.reset();\n      this.clock.tick(0);\n      assert.isFalse(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws if no arguments","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":451,"column":30,"index":15164},"line":451,"code":"    it(\"throws if no arguments\", function () {\n      const clock = this.clock;\n      assert.exception(function () {\n        clock.setInterval();\n      });\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns a timer whose primitive representation is a number","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":457,"column":66,"index":15363},"line":457,"code":"    it(\"returns a timer whose primitive representation is a number\", function () {\n      // eslint-disable-next-line no-empty-function\n      const noop = function () {};\n      const result = this.clock.setInterval(noop);\n      assert.isNumber(Number(result));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns unique id","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":463,"column":25,"index":15590},"line":463,"code":"    it(\"returns unique id\", function () {\n      // eslint-disable-next-line no-empty-function\n      const noop = function () {};\n      const id1 = this.clock.setInterval(noop);\n      const id2 = this.clock.setInterval(noop);\n      refute.equals(id2, id1);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"schedules recurring timeout","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":470,"column":35,"index":15864},"line":470,"code":"    it(\"schedules recurring timeout\", function () {\n      const stub = sinonStub();\n      this.clock.setInterval(stub, 10);\n      this.clock.tick(99);\n      assert.equals(stub.callCount, 9);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not schedule recurring timeout when cleared","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":476,"column":56,"index":16084},"line":476,"code":"    it(\"does not schedule recurring timeout when cleared\", function () {\n      const clock = this.clock;\n      // eslint-disable-next-line\n      let id;\n      const stub = sinonSpy(function () {\n        if (stub.callCount === 3) {\n          clock.clearInterval(id);\n        }\n      });\n      id = this.clock.setInterval(stub, 10);\n      this.clock.tick(100);\n      assert.equals(stub.callCount, 3);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"passes setTimeout parameters","suites":["fakeTimers.clock",".setInterval"],"updatePoint":{"line":489,"column":36,"index":16471},"line":489,"code":"    it(\"passes setTimeout parameters\", function () {\n      const clock = fakeTimers.clock.create();\n      const stub = sinonStub();\n      clock.setInterval(stub, 2, \"the first\", \"the second\");\n      clock.tick(3);\n      assert.isTrue(stub.calledWithExactly(\"the first\", \"the second\"));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"provides date constructor","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":506,"column":33,"index":17053},"line":506,"code":"    it(\"provides date constructor\", function () {\n      assert.isFunction(this.clock.Date);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates real Date objects","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":509,"column":33,"index":17153},"line":509,"code":"    it(\"creates real Date objects\", function () {\n      const date = new this.clock.Date();\n      assert(Date.prototype.isPrototypeOf(date));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates date strings when called as function","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":513,"column":52,"index":17322},"line":513,"code":"    it(\"creates date strings when called as function\", function () {\n      const date = this.clock.Date();\n      assert.isString(date);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates real Date objects when Date constructor is gone","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":517,"column":63,"index":17477},"line":517,"code":"    it(\"creates real Date objects when Date constructor is gone\", function () {\n      const realDate = new Date();\n\n      // eslint-disable-next-line no-global-assign, no-native-reassign\n      Date = function () {\n        return;\n      };\n      this.global.Date = function () {\n        return;\n      };\n      const date = new this.clock.Date();\n\n      // restore directly after use, because tearDown is async in buster-next and\n      // the overridden Date is used in node 0.x native code\n      this.global.Date = this.Date;\n      assert.same(date.constructor.prototype, realDate.constructor.prototype);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates Date objects representing clock time","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":534,"column":52,"index":18078},"line":534,"code":"    it(\"creates Date objects representing clock time\", function () {\n      const date = new this.clock.Date();\n      assert.equals(date.getTime(), new Date(this.now).getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"listens to ticking clock","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":538,"column":32,"index":18244},"line":538,"code":"    it(\"listens to ticking clock\", function () {\n      const date1 = new this.clock.Date();\n      this.clock.tick(3);\n      const date2 = new this.clock.Date();\n      assert.equals(date2.getTime() - date1.getTime(), 3);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing timestamp","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":544,"column":51,"index":18491},"line":544,"code":"    it(\"creates regular date when passing timestamp\", function () {\n      const date = new Date();\n      const fakeDate = new this.clock.Date(date.getTime());\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing year, month","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":549,"column":53,"index":18717},"line":549,"code":"    it(\"creates regular date when passing year, month\", function () {\n      const date = new Date(2010, 4);\n      const fakeDate = new this.clock.Date(2010, 4);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing y, m, d","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":554,"column":49,"index":18939},"line":554,"code":"    it(\"creates regular date when passing y, m, d\", function () {\n      const date = new Date(2010, 4, 2);\n      const fakeDate = new this.clock.Date(2010, 4, 2);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing y, m, d, h","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":559,"column":52,"index":19170},"line":559,"code":"    it(\"creates regular date when passing y, m, d, h\", function () {\n      const date = new Date(2010, 4, 2, 12);\n      const fakeDate = new this.clock.Date(2010, 4, 2, 12);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing y, m, d, h, m","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":564,"column":55,"index":19412},"line":564,"code":"    it(\"creates regular date when passing y, m, d, h, m\", function () {\n      const date = new Date(2010, 4, 2, 12, 42);\n      const fakeDate = new this.clock.Date(2010, 4, 2, 12, 42);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing y, m, d, h, m, s","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":569,"column":58,"index":19665},"line":569,"code":"    it(\"creates regular date when passing y, m, d, h, m, s\", function () {\n      const date = new Date(2010, 4, 2, 12, 42, 53);\n      const fakeDate = new this.clock.Date(2010, 4, 2, 12, 42, 53);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"creates regular date when passing y, m, d, h, m, s, ms","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":574,"column":62,"index":19930},"line":574,"code":"    it(\"creates regular date when passing y, m, d, h, m, s, ms\", function () {\n      const date = new Date(2010, 4, 2, 12, 42, 53, 498);\n      const fakeDate = new this.clock.Date(2010, 4, 2, 12, 42, 53, 498);\n      assert.equals(fakeDate.getTime(), date.getTime());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors native Date.prototype","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":579,"column":37,"index":20180},"line":579,"code":"    it(\"mirrors native Date.prototype\", function () {\n      assert.same(this.clock.Date.prototype, Date.prototype);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"supports now method if present","suites":["fakeTimers.clock",".date"],"updatePoint":{"line":582,"column":38,"index":20305},"line":582,"code":"    it(\"supports now method if present\", function () {\n      assert.same(typeof this.clock.Date.now, typeof Date.now);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns clock.now","suites":["fakeTimers.clock",".date",".now"],"updatePoint":{"line":591,"column":27,"index":20572},"line":591,"code":"      it(\"returns clock.now\", function () {\n        assert.equals(this.clock.Date.now(), this.now);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"is undefined","suites":["fakeTimers.clock",".date","unsupported now"],"updatePoint":{"line":601,"column":22,"index":20847},"line":601,"code":"      it(\"is undefined\", function () {\n        assert.isUndefined(this.clock.Date.now);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors parse method","suites":["fakeTimers.clock",".date","unsupported now"],"updatePoint":{"line":605,"column":28,"index":20959},"line":605,"code":"    it(\"mirrors parse method\", function () {\n      assert.same(this.clock.Date.parse, Date.parse);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors UTC method","suites":["fakeTimers.clock",".date","unsupported now"],"updatePoint":{"line":608,"column":26,"index":21064},"line":608,"code":"    it(\"mirrors UTC method\", function () {\n      assert.same(this.clock.Date.UTC, Date.UTC);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors toUTCString method","suites":["fakeTimers.clock",".date","unsupported now"],"updatePoint":{"line":611,"column":34,"index":21173},"line":611,"code":"    it(\"mirrors toUTCString method\", function () {\n      assert.same(this.clock.Date.prototype.toUTCString, Date.prototype.toUTCString);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"is mirrored","suites":["fakeTimers.clock",".date",".toSource"],"updatePoint":{"line":620,"column":21,"index":21466},"line":620,"code":"      it(\"is mirrored\", function () {\n        assert.same(this.clock.Date.toSource(), Date.toSource());\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"is undefined","suites":["fakeTimers.clock",".date","unsupported toSource"],"updatePoint":{"line":630,"column":22,"index":21761},"line":630,"code":"      it(\"is undefined\", function () {\n        assert.isUndefined(this.clock.Date.toSource);\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors toString","suites":["fakeTimers.clock",".date","unsupported toSource"],"updatePoint":{"line":634,"column":24,"index":21874},"line":634,"code":"    it(\"mirrors toString\", function () {\n      assert.same(this.clock.Date.toString(), Date.toString());\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns clock object","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":666,"column":28,"index":23105},"line":666,"code":"    it(\"returns clock object\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      assert.isObject(this.clock);\n      assert.isFunction(this.clock.tick);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"has clock property","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":671,"column":26,"index":23280},"line":671,"code":"    it(\"has clock property\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      assert.same(setTimeout.clock, this.clock);\n      assert.same(clearTimeout.clock, this.clock);\n      assert.same(setInterval.clock, this.clock);\n      assert.same(clearInterval.clock, this.clock);\n      assert.same(Date.clock, this.clock);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"sets initial timestamp","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":679,"column":30,"index":23627},"line":679,"code":"    it(\"sets initial timestamp\", function () {\n      this.clock = fakeTimers.useFakeTimers(1400);\n      assert.equals(this.clock.now, 1400);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"replaces global setTimeout","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":683,"column":34,"index":23780},"line":683,"code":"    it(\"replaces global setTimeout\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      setTimeout(stub, 1000);\n      this.clock.tick(1000);\n      assert(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"returns a timer whose primitive representation is a number","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":690,"column":66,"index":24036},"line":690,"code":"    it(\"returns a timer whose primitive representation is a number\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      const to = setTimeout(stub, 1000);\n      assert.isNumber(Number(to));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"replaces global clearTimeout","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":696,"column":36,"index":24252},"line":696,"code":"    it(\"replaces global clearTimeout\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      clearTimeout(setTimeout(stub, 1000));\n      this.clock.tick(1000);\n      assert.isFalse(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global setTimeout","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":703,"column":34,"index":24498},"line":703,"code":"    it(\"restores global setTimeout\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      this.clock.restore();\n      this.timer = setTimeout(stub, 1000);\n      this.clock.tick(1000);\n      assert.isFalse(stub.called);\n      assert.same(setTimeout, fakeTimers.timers.setTimeout);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global clearTimeout","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":712,"column":36,"index":24834},"line":712,"code":"    it(\"restores global clearTimeout\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      sinonStub();\n      this.clock.restore();\n      assert.same(clearTimeout, fakeTimers.timers.clearTimeout);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"replaces global setInterval","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":718,"column":35,"index":25053},"line":718,"code":"    it(\"replaces global setInterval\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      setInterval(stub, 500);\n      this.clock.tick(1000);\n      assert(stub.calledTwice);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"replaces global clearInterval","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":725,"column":37,"index":25285},"line":725,"code":"    it(\"replaces global clearInterval\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      clearInterval(setInterval(stub, 500));\n      this.clock.tick(1000);\n      assert.isFalse(stub.called);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global setInterval","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":732,"column":35,"index":25533},"line":732,"code":"    it(\"restores global setInterval\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      this.clock.restore();\n      this.timer = setInterval(stub, 1000);\n      this.clock.tick(1000);\n      assert.isFalse(stub.called);\n      assert.same(setInterval, fakeTimers.timers.setInterval);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global clearInterval","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":741,"column":37,"index":25873},"line":741,"code":"    it(\"restores global clearInterval\", function () {\n      this.clock = fakeTimers.useFakeTimers();\n      sinonStub();\n      this.clock.restore();\n      assert.same(clearInterval, fakeTimers.timers.clearInterval);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global setImmediate","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":747,"column":36,"index":26095},"line":747,"code":"    it(\"restores global setImmediate\", function () {\n      if (typeof setImmediate !== \"function\") {\n        this.skip();\n      }\n      this.clock = fakeTimers.useFakeTimers();\n      const stub = sinonStub();\n      this.clock.restore();\n      this.timer = setImmediate(stub);\n      this.clock.tick(1);\n      assert.isFalse(stub.called);\n      assert.same(setImmediate, fakeTimers.timers.setImmediate);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not install global setImmediate","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":759,"column":44,"index":26513},"line":759,"code":"    it(\"does not install global setImmediate\", function () {\n      if (typeof setImmediate !== \"undefined\") {\n        this.skip();\n      }\n      this.clock = fakeTimers.useFakeTimers();\n      assert.isUndefined(setImmediate);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global clearImmediate","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":766,"column":38,"index":26741},"line":766,"code":"    it(\"restores global clearImmediate\", function () {\n      if (typeof clearImmediate !== \"function\") {\n        this.skip();\n      }\n      this.clock = fakeTimers.useFakeTimers();\n      sinonStub();\n      this.clock.restore();\n      assert.same(clearImmediate, fakeTimers.timers.clearImmediate);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not install global clearImmediate","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":775,"column":46,"index":27054},"line":775,"code":"    it(\"does not install global clearImmediate\", function () {\n      if (typeof clearImmediate !== \"undefined\") {\n        this.skip();\n      }\n      this.clock = fakeTimers.useFakeTimers();\n      assert.isUndefined(clearImmediate);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"deletes global property on restore if it was inherited onto the global object","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":782,"column":85,"index":27333},"line":782,"code":"    it(\"deletes global property on restore if it was inherited onto the global object\", function () {\n      /*eslint-disable no-proto*/\n      if (!Object.__proto__) {\n        this.skip();\n      }\n\n      // Give the global object an inherited 'tick' method\n      delete this.global.tick;\n      this.global.__proto__.tick = function () {\n        return;\n      };\n      if (!this.global.hasOwnProperty(\"tick\")) {\n        this.clock = fakeTimers.useFakeTimers({\n          toFake: [\"tick\"]\n        });\n        assert.isTrue(this.global.hasOwnProperty(\"tick\"));\n        this.clock.restore();\n        assert.isFalse(this.global.hasOwnProperty(\"tick\"));\n        delete this.global.__proto__.tick;\n      } else {\n        // hasOwnProperty does not work as expected.\n        assert(true);\n      }\n      /*eslint-enable no-proto*/\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores global property on restore if it is present on the global object itself","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":808,"column":88,"index":28165},"line":808,"code":"    it(\"restores global property on restore if it is present on the global object itself\", function () {\n      // Directly give the global object a tick method\n      this.global.tick = function () {\n        return;\n      };\n      this.clock = fakeTimers.useFakeTimers({\n        toFake: [\"tick\"]\n      });\n      assert.isTrue(this.global.hasOwnProperty(\"tick\"));\n      this.clock.restore();\n      assert.isTrue(this.global.hasOwnProperty(\"tick\"));\n      delete this.global.tick;\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fakes Date constructor","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":821,"column":30,"index":28593},"line":821,"code":"    it(\"fakes Date constructor\", function () {\n      this.clock = fakeTimers.useFakeTimers(0);\n      const now = new Date();\n      refute.same(Date, fakeTimers.timers.Date);\n      assert.equals(now.getTime(), 0);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fake Date constructor should mirror Date's properties","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":827,"column":61,"index":28845},"line":827,"code":"    it(\"fake Date constructor should mirror Date's properties\", function () {\n      this.clock = fakeTimers.useFakeTimers(0);\n      assert(Boolean(Date.parse));\n      assert(Boolean(Date.UTC));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"decide on Date.now support at call-time when supported","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":832,"column":62,"index":29048},"line":832,"code":"    it(\"decide on Date.now support at call-time when supported\", function () {\n      this.global.Date.now = function () {\n        return;\n      };\n      this.clock = fakeTimers.useFakeTimers(0);\n      assert.equals(typeof Date.now, \"function\");\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"decide on Date.now support at call-time when unsupported","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":839,"column":64,"index":29303},"line":839,"code":"    it(\"decide on Date.now support at call-time when unsupported\", function () {\n      this.global.Date.now = null;\n      this.clock = fakeTimers.useFakeTimers(0);\n      assert.isUndefined(Date.now);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"mirrors custom Date properties","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":844,"column":38,"index":29485},"line":844,"code":"    it(\"mirrors custom Date properties\", function () {\n      const f = function () {\n        return;\n      };\n      this.global.Date.format = f;\n      fakeTimers.useFakeTimers();\n      assert.equals(Date.format, f);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"restores Date constructor","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":852,"column":33,"index":29704},"line":852,"code":"    it(\"restores Date constructor\", function () {\n      this.clock = fakeTimers.useFakeTimers(0);\n      this.clock.restore();\n      assert.same(GlobalDate, fakeTimers.timers.Date);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"fakes provided methods","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":857,"column":30,"index":29890},"line":857,"code":"    it(\"fakes provided methods\", function () {\n      this.clock = fakeTimers.useFakeTimers({\n        toFake: [\"setTimeout\", \"Date\"]\n      });\n      refute.same(setTimeout, fakeTimers.timers.setTimeout);\n      refute.same(Date, fakeTimers.timers.Date);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"resets faked methods","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":864,"column":28,"index":30148},"line":864,"code":"    it(\"resets faked methods\", function () {\n      this.clock = fakeTimers.useFakeTimers({\n        toFake: [\"setTimeout\", \"Date\"]\n      });\n      this.clock.restore();\n      assert.same(setTimeout, fakeTimers.timers.setTimeout);\n      assert.same(Date, fakeTimers.timers.Date);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"does not fake methods not provided","suites":["fakeTimers.clock",".useFakeTimers"],"updatePoint":{"line":872,"column":42,"index":30448},"line":872,"code":"    it(\"does not fake methods not provided\", function () {\n      this.clock = fakeTimers.useFakeTimers({\n        toFake: [\"setTimeout\", \"Date\"]\n      });\n      assert.same(clearTimeout, fakeTimers.timers.clearTimeout);\n      assert.same(setInterval, fakeTimers.timers.setInterval);\n      assert.same(clearInterval, fakeTimers.timers.clearInterval);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"installs by default without nextTick","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":886,"column":46,"index":31011},"line":886,"code":"      it(\"installs by default without nextTick\", function () {\n        this.clock = fakeTimers.useFakeTimers();\n        let called = false;\n        process.nextTick(function () {\n          called = true;\n        });\n        this.clock.runAll();\n        assert(!called);\n        this.clock.restore();\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"installs with nextTick","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":896,"column":32,"index":31307},"line":896,"code":"      it(\"installs with nextTick\", function () {\n        this.clock = fakeTimers.useFakeTimers({\n          toFake: [\"nextTick\"]\n        });\n        let called = false;\n        process.nextTick(function () {\n          called = true;\n        });\n        this.clock.runAll();\n        assert(called);\n        this.clock.restore();\n      });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"installs clock in advancing mode and triggers setTimeout","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":909,"column":64,"index":31684},"line":909,"code":"    it(\"installs clock in advancing mode and triggers setTimeout\", function (done) {\n      this.clock = fakeTimers.useFakeTimers({\n        shouldAdvanceTime: true\n      });\n      this.clock.setTimeout(function () {\n        this.clock.restore();\n        done();\n      }.bind(this), 10);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"installs clock in advancing mode and triggers setInterval","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":918,"column":65,"index":31979},"line":918,"code":"    it(\"installs clock in advancing mode and triggers setInterval\", function (done) {\n      this.clock = fakeTimers.useFakeTimers({\n        shouldAdvanceTime: true\n      });\n      let counter = 0;\n      const iterations = 3;\n      const id = this.clock.setInterval(function () {\n        if (counter++ < iterations) {\n          return;\n        }\n        this.clock.clearInterval(id);\n        this.clock.restore();\n        done();\n      }.bind(this), 10);\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"installs clock in advancing mode and triggers setImmediate","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":933,"column":66,"index":32442},"line":933,"code":"    it(\"installs clock in advancing mode and triggers setImmediate\", function (done) {\n      if (!setImmediatePresent) {\n        this.skip();\n      }\n      this.clock = fakeTimers.useFakeTimers({\n        shouldAdvanceTime: true\n      });\n      this.clock.setImmediate(function () {\n        this.clock.restore();\n        done();\n      }.bind(this));\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"throws on old useFakeTimers signatures","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":945,"column":46,"index":32779},"line":945,"code":"    it(\"throws on old useFakeTimers signatures\", function () {\n      const expectedError = \"useFakeTimers expected epoch or config object. See https://github.com/sinonjs/sinon\";\n      assert.exception(function () {\n        fakeTimers.useFakeTimers(\"setImmediate\");\n      }, {\n        name: \"TypeError\",\n        message: expectedError\n      });\n      assert.exception(function () {\n        fakeTimers.useFakeTimers(\"setImmediate\", \"Date\");\n      }, {\n        name: \"TypeError\",\n        message: expectedError\n      });\n      assert.exception(function () {\n        fakeTimers.useFakeTimers(1000, \"setImmediate\", \"Date\");\n      }, {\n        name: \"TypeError\",\n        message: expectedError\n      });\n      assert.exception(function () {\n        fakeTimers.useFakeTimers(new Date(10000000), \"setImmediate\", \"Date\");\n      }, {\n        name: \"TypeError\",\n        message: expectedError\n      });\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"},{"name":"supports a way to pass the global context","suites":["fakeTimers.clock",".useFakeTimers","with nextTick"],"updatePoint":{"line":972,"column":49,"index":33682},"line":972,"code":"    it(\"supports a way to pass the global context\", function () {\n      const stub = sinonStub();\n      const globalCtx = {\n        Date: sinonStub(),\n        setTimeout: stub,\n        clearTimeout: sinonStub()\n      };\n      this.clock = fakeTimers.useFakeTimers({\n        global: globalCtx\n      });\n      assert.isUndefined(this.clock.performance);\n      assert.same(this.clock._setTimeout, stub); // eslint-disable-line no-underscore-dangle\n      this.clock.restore();\n    });","file":"util/fake-timers-test.js","skipped":false,"dir":"test"}]}